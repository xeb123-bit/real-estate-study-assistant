(function(){const f=document.createElement("link").relList;if(f&&f.supports&&f.supports("modulepreload"))return;for(const _ of document.querySelectorAll('link[rel="modulepreload"]'))c(_);new MutationObserver(_=>{for(const B of _)if(B.type==="childList")for(const N of B.addedNodes)N.tagName==="LINK"&&N.rel==="modulepreload"&&c(N)}).observe(document,{childList:!0,subtree:!0});function D(_){const B={};return _.integrity&&(B.integrity=_.integrity),_.referrerPolicy&&(B.referrerPolicy=_.referrerPolicy),_.crossOrigin==="use-credentials"?B.credentials="include":_.crossOrigin==="anonymous"?B.credentials="omit":B.credentials="same-origin",B}function c(_){if(_.ep)return;_.ep=!0;const B=D(_);fetch(_.href,B)}})();var commonjsGlobal=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function getDefaultExportFromCjs(R){return R&&R.__esModule&&Object.prototype.hasOwnProperty.call(R,"default")?R.default:R}function getAugmentedNamespace(R){if(Object.prototype.hasOwnProperty.call(R,"__esModule"))return R;var f=R.default;if(typeof f=="function"){var D=function c(){var _=!1;try{_=this instanceof c}catch{}return _?Reflect.construct(f,arguments,this.constructor):f.apply(this,arguments)};D.prototype=f.prototype}else D={};return Object.defineProperty(D,"__esModule",{value:!0}),Object.keys(R).forEach(function(c){var _=Object.getOwnPropertyDescriptor(R,c);Object.defineProperty(D,c,_.get?_:{enumerable:!0,get:function(){return R[c]}})}),D}var jsxRuntime={exports:{}},reactJsxRuntime_production={};var hasRequiredReactJsxRuntime_production;function requireReactJsxRuntime_production(){if(hasRequiredReactJsxRuntime_production)return reactJsxRuntime_production;hasRequiredReactJsxRuntime_production=1;var R=Symbol.for("react.transitional.element"),f=Symbol.for("react.fragment");function D(c,_,B){var N=null;if(B!==void 0&&(N=""+B),_.key!==void 0&&(N=""+_.key),"key"in _){B={};for(var U in _)U!=="key"&&(B[U]=_[U])}else B=_;return _=B.ref,{$$typeof:R,type:c,key:N,ref:_!==void 0?_:null,props:B}}return reactJsxRuntime_production.Fragment=f,reactJsxRuntime_production.jsx=D,reactJsxRuntime_production.jsxs=D,reactJsxRuntime_production}var hasRequiredJsxRuntime;function requireJsxRuntime(){return hasRequiredJsxRuntime||(hasRequiredJsxRuntime=1,jsxRuntime.exports=requireReactJsxRuntime_production()),jsxRuntime.exports}var jsxRuntimeExports=requireJsxRuntime(),react={exports:{}},react_production={};var hasRequiredReact_production;function requireReact_production(){if(hasRequiredReact_production)return react_production;hasRequiredReact_production=1;var R=Symbol.for("react.transitional.element"),f=Symbol.for("react.portal"),D=Symbol.for("react.fragment"),c=Symbol.for("react.strict_mode"),_=Symbol.for("react.profiler"),B=Symbol.for("react.consumer"),N=Symbol.for("react.context"),U=Symbol.for("react.forward_ref"),F=Symbol.for("react.suspense"),u=Symbol.for("react.memo"),o=Symbol.for("react.lazy"),d=Symbol.for("react.activity"),b=Symbol.iterator;function g(y){return y===null||typeof y!="object"?null:(y=b&&y[b]||y["@@iterator"],typeof y=="function"?y:null)}var h={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},E=Object.assign,C={};function x(y,O,H){this.props=y,this.context=O,this.refs=C,this.updater=H||h}x.prototype.isReactComponent={},x.prototype.setState=function(y,O){if(typeof y!="object"&&typeof y!="function"&&y!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,y,O,"setState")},x.prototype.forceUpdate=function(y){this.updater.enqueueForceUpdate(this,y,"forceUpdate")};function I(){}I.prototype=x.prototype;function Q(y,O,H){this.props=y,this.context=O,this.refs=C,this.updater=H||h}var V=Q.prototype=new I;V.constructor=Q,E(V,x.prototype),V.isPureReactComponent=!0;var T=Array.isArray;function L(){}var $={H:null,A:null,T:null,S:null},rt=Object.prototype.hasOwnProperty;function et(y,O,H){var J=H.ref;return{$$typeof:R,type:y,key:O,ref:J!==void 0?J:null,props:H}}function yt(y,O){return et(y.type,O,y.props)}function gt(y){return typeof y=="object"&&y!==null&&y.$$typeof===R}function kt(y){var O={"=":"=0",":":"=2"};return"$"+y.replace(/[=:]/g,function(H){return O[H]})}var At=/\/+/g;function Ft(y,O){return typeof y=="object"&&y!==null&&y.key!=null?kt(""+y.key):O.toString(36)}function Xt(y){switch(y.status){case"fulfilled":return y.value;case"rejected":throw y.reason;default:switch(typeof y.status=="string"?y.then(L,L):(y.status="pending",y.then(function(O){y.status==="pending"&&(y.status="fulfilled",y.value=O)},function(O){y.status==="pending"&&(y.status="rejected",y.reason=O)})),y.status){case"fulfilled":return y.value;case"rejected":throw y.reason}}throw y}function nt(y,O,H,J,K){var m=typeof y;(m==="undefined"||m==="boolean")&&(y=null);var M=!1;if(y===null)M=!0;else switch(m){case"bigint":case"string":case"number":M=!0;break;case"object":switch(y.$$typeof){case R:case f:M=!0;break;case o:return M=y._init,nt(M(y._payload),O,H,J,K)}}if(M)return K=K(y),M=J===""?"."+Ft(y,0):J,T(K)?(H="",M!=null&&(H=M.replace(At,"$&/")+"/"),nt(K,O,H,"",function(G){return G})):K!=null&&(gt(K)&&(K=yt(K,H+(K.key==null||y&&y.key===K.key?"":(""+K.key).replace(At,"$&/")+"/")+M)),O.push(K)),1;M=0;var z=J===""?".":J+":";if(T(y))for(var W=0;W<y.length;W++)J=y[W],m=z+Ft(J,W),M+=nt(J,O,H,m,K);else if(W=g(y),typeof W=="function")for(y=W.call(y),W=0;!(J=y.next()).done;)J=J.value,m=z+Ft(J,W++),M+=nt(J,O,H,m,K);else if(m==="object"){if(typeof y.then=="function")return nt(Xt(y),O,H,J,K);throw O=String(y),Error("Objects are not valid as a React child (found: "+(O==="[object Object]"?"object with keys {"+Object.keys(y).join(", ")+"}":O)+"). If you meant to render a collection of children, use an array instead.")}return M}function Y(y,O,H){if(y==null)return y;var J=[],K=0;return nt(y,J,"","",function(m){return O.call(H,m,K++)}),J}function k(y){if(y._status===-1){var O=y._result;O=O(),O.then(function(H){(y._status===0||y._status===-1)&&(y._status=1,y._result=H)},function(H){(y._status===0||y._status===-1)&&(y._status=2,y._result=H)}),y._status===-1&&(y._status=0,y._result=O)}if(y._status===1)return y._result.default;throw y._result}var S=typeof reportError=="function"?reportError:function(y){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var O=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof y=="object"&&y!==null&&typeof y.message=="string"?String(y.message):String(y),error:y});if(!window.dispatchEvent(O))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",y);return}console.error(y)},w={map:Y,forEach:function(y,O,H){Y(y,function(){O.apply(this,arguments)},H)},count:function(y){var O=0;return Y(y,function(){O++}),O},toArray:function(y){return Y(y,function(O){return O})||[]},only:function(y){if(!gt(y))throw Error("React.Children.only expected to receive a single React element child.");return y}};return react_production.Activity=d,react_production.Children=w,react_production.Component=x,react_production.Fragment=D,react_production.Profiler=_,react_production.PureComponent=Q,react_production.StrictMode=c,react_production.Suspense=F,react_production.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=$,react_production.__COMPILER_RUNTIME={__proto__:null,c:function(y){return $.H.useMemoCache(y)}},react_production.cache=function(y){return function(){return y.apply(null,arguments)}},react_production.cacheSignal=function(){return null},react_production.cloneElement=function(y,O,H){if(y==null)throw Error("The argument must be a React element, but you passed "+y+".");var J=E({},y.props),K=y.key;if(O!=null)for(m in O.key!==void 0&&(K=""+O.key),O)!rt.call(O,m)||m==="key"||m==="__self"||m==="__source"||m==="ref"&&O.ref===void 0||(J[m]=O[m]);var m=arguments.length-2;if(m===1)J.children=H;else if(1<m){for(var M=Array(m),z=0;z<m;z++)M[z]=arguments[z+2];J.children=M}return et(y.type,K,J)},react_production.createContext=function(y){return y={$$typeof:N,_currentValue:y,_currentValue2:y,_threadCount:0,Provider:null,Consumer:null},y.Provider=y,y.Consumer={$$typeof:B,_context:y},y},react_production.createElement=function(y,O,H){var J,K={},m=null;if(O!=null)for(J in O.key!==void 0&&(m=""+O.key),O)rt.call(O,J)&&J!=="key"&&J!=="__self"&&J!=="__source"&&(K[J]=O[J]);var M=arguments.length-2;if(M===1)K.children=H;else if(1<M){for(var z=Array(M),W=0;W<M;W++)z[W]=arguments[W+2];K.children=z}if(y&&y.defaultProps)for(J in M=y.defaultProps,M)K[J]===void 0&&(K[J]=M[J]);return et(y,m,K)},react_production.createRef=function(){return{current:null}},react_production.forwardRef=function(y){return{$$typeof:U,render:y}},react_production.isValidElement=gt,react_production.lazy=function(y){return{$$typeof:o,_payload:{_status:-1,_result:y},_init:k}},react_production.memo=function(y,O){return{$$typeof:u,type:y,compare:O===void 0?null:O}},react_production.startTransition=function(y){var O=$.T,H={};$.T=H;try{var J=y(),K=$.S;K!==null&&K(H,J),typeof J=="object"&&J!==null&&typeof J.then=="function"&&J.then(L,S)}catch(m){S(m)}finally{O!==null&&H.types!==null&&(O.types=H.types),$.T=O}},react_production.unstable_useCacheRefresh=function(){return $.H.useCacheRefresh()},react_production.use=function(y){return $.H.use(y)},react_production.useActionState=function(y,O,H){return $.H.useActionState(y,O,H)},react_production.useCallback=function(y,O){return $.H.useCallback(y,O)},react_production.useContext=function(y){return $.H.useContext(y)},react_production.useDebugValue=function(){},react_production.useDeferredValue=function(y,O){return $.H.useDeferredValue(y,O)},react_production.useEffect=function(y,O){return $.H.useEffect(y,O)},react_production.useEffectEvent=function(y){return $.H.useEffectEvent(y)},react_production.useId=function(){return $.H.useId()},react_production.useImperativeHandle=function(y,O,H){return $.H.useImperativeHandle(y,O,H)},react_production.useInsertionEffect=function(y,O){return $.H.useInsertionEffect(y,O)},react_production.useLayoutEffect=function(y,O){return $.H.useLayoutEffect(y,O)},react_production.useMemo=function(y,O){return $.H.useMemo(y,O)},react_production.useOptimistic=function(y,O){return $.H.useOptimistic(y,O)},react_production.useReducer=function(y,O,H){return $.H.useReducer(y,O,H)},react_production.useRef=function(y){return $.H.useRef(y)},react_production.useState=function(y){return $.H.useState(y)},react_production.useSyncExternalStore=function(y,O,H){return $.H.useSyncExternalStore(y,O,H)},react_production.useTransition=function(){return $.H.useTransition()},react_production.version="19.2.4",react_production}var hasRequiredReact;function requireReact(){return hasRequiredReact||(hasRequiredReact=1,react.exports=requireReact_production()),react.exports}var reactExports=requireReact();const React=getDefaultExportFromCjs(reactExports);var client={exports:{}},reactDomClient_production={},scheduler={exports:{}},scheduler_production={};var hasRequiredScheduler_production;function requireScheduler_production(){return hasRequiredScheduler_production||(hasRequiredScheduler_production=1,(function(R){function f(nt,Y){var k=nt.length;nt.push(Y);t:for(;0<k;){var S=k-1>>>1,w=nt[S];if(0<_(w,Y))nt[S]=Y,nt[k]=w,k=S;else break t}}function D(nt){return nt.length===0?null:nt[0]}function c(nt){if(nt.length===0)return null;var Y=nt[0],k=nt.pop();if(k!==Y){nt[0]=k;t:for(var S=0,w=nt.length,y=w>>>1;S<y;){var O=2*(S+1)-1,H=nt[O],J=O+1,K=nt[J];if(0>_(H,k))J<w&&0>_(K,H)?(nt[S]=K,nt[J]=k,S=J):(nt[S]=H,nt[O]=k,S=O);else if(J<w&&0>_(K,k))nt[S]=K,nt[J]=k,S=J;else break t}}return Y}function _(nt,Y){var k=nt.sortIndex-Y.sortIndex;return k!==0?k:nt.id-Y.id}if(R.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var B=performance;R.unstable_now=function(){return B.now()}}else{var N=Date,U=N.now();R.unstable_now=function(){return N.now()-U}}var F=[],u=[],o=1,d=null,b=3,g=!1,h=!1,E=!1,C=!1,x=typeof setTimeout=="function"?setTimeout:null,I=typeof clearTimeout=="function"?clearTimeout:null,Q=typeof setImmediate<"u"?setImmediate:null;function V(nt){for(var Y=D(u);Y!==null;){if(Y.callback===null)c(u);else if(Y.startTime<=nt)c(u),Y.sortIndex=Y.expirationTime,f(F,Y);else break;Y=D(u)}}function T(nt){if(E=!1,V(nt),!h)if(D(F)!==null)h=!0,L||(L=!0,kt());else{var Y=D(u);Y!==null&&Xt(T,Y.startTime-nt)}}var L=!1,$=-1,rt=5,et=-1;function yt(){return C?!0:!(R.unstable_now()-et<rt)}function gt(){if(C=!1,L){var nt=R.unstable_now();et=nt;var Y=!0;try{t:{h=!1,E&&(E=!1,I($),$=-1),g=!0;var k=b;try{e:{for(V(nt),d=D(F);d!==null&&!(d.expirationTime>nt&&yt());){var S=d.callback;if(typeof S=="function"){d.callback=null,b=d.priorityLevel;var w=S(d.expirationTime<=nt);if(nt=R.unstable_now(),typeof w=="function"){d.callback=w,V(nt),Y=!0;break e}d===D(F)&&c(F),V(nt)}else c(F);d=D(F)}if(d!==null)Y=!0;else{var y=D(u);y!==null&&Xt(T,y.startTime-nt),Y=!1}}break t}finally{d=null,b=k,g=!1}Y=void 0}}finally{Y?kt():L=!1}}}var kt;if(typeof Q=="function")kt=function(){Q(gt)};else if(typeof MessageChannel<"u"){var At=new MessageChannel,Ft=At.port2;At.port1.onmessage=gt,kt=function(){Ft.postMessage(null)}}else kt=function(){x(gt,0)};function Xt(nt,Y){$=x(function(){nt(R.unstable_now())},Y)}R.unstable_IdlePriority=5,R.unstable_ImmediatePriority=1,R.unstable_LowPriority=4,R.unstable_NormalPriority=3,R.unstable_Profiling=null,R.unstable_UserBlockingPriority=2,R.unstable_cancelCallback=function(nt){nt.callback=null},R.unstable_forceFrameRate=function(nt){0>nt||125<nt?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):rt=0<nt?Math.floor(1e3/nt):5},R.unstable_getCurrentPriorityLevel=function(){return b},R.unstable_next=function(nt){switch(b){case 1:case 2:case 3:var Y=3;break;default:Y=b}var k=b;b=Y;try{return nt()}finally{b=k}},R.unstable_requestPaint=function(){C=!0},R.unstable_runWithPriority=function(nt,Y){switch(nt){case 1:case 2:case 3:case 4:case 5:break;default:nt=3}var k=b;b=nt;try{return Y()}finally{b=k}},R.unstable_scheduleCallback=function(nt,Y,k){var S=R.unstable_now();switch(typeof k=="object"&&k!==null?(k=k.delay,k=typeof k=="number"&&0<k?S+k:S):k=S,nt){case 1:var w=-1;break;case 2:w=250;break;case 5:w=1073741823;break;case 4:w=1e4;break;default:w=5e3}return w=k+w,nt={id:o++,callback:Y,priorityLevel:nt,startTime:k,expirationTime:w,sortIndex:-1},k>S?(nt.sortIndex=k,f(u,nt),D(F)===null&&nt===D(u)&&(E?(I($),$=-1):E=!0,Xt(T,k-S))):(nt.sortIndex=w,f(F,nt),h||g||(h=!0,L||(L=!0,kt()))),nt},R.unstable_shouldYield=yt,R.unstable_wrapCallback=function(nt){var Y=b;return function(){var k=b;b=Y;try{return nt.apply(this,arguments)}finally{b=k}}}})(scheduler_production)),scheduler_production}var hasRequiredScheduler;function requireScheduler(){return hasRequiredScheduler||(hasRequiredScheduler=1,scheduler.exports=requireScheduler_production()),scheduler.exports}var reactDom={exports:{}},reactDom_production={};var hasRequiredReactDom_production;function requireReactDom_production(){if(hasRequiredReactDom_production)return reactDom_production;hasRequiredReactDom_production=1;var R=requireReact();function f(F){var u="https://react.dev/errors/"+F;if(1<arguments.length){u+="?args[]="+encodeURIComponent(arguments[1]);for(var o=2;o<arguments.length;o++)u+="&args[]="+encodeURIComponent(arguments[o])}return"Minified React error #"+F+"; visit "+u+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function D(){}var c={d:{f:D,r:function(){throw Error(f(522))},D,C:D,L:D,m:D,X:D,S:D,M:D},p:0,findDOMNode:null},_=Symbol.for("react.portal");function B(F,u,o){var d=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:_,key:d==null?null:""+d,children:F,containerInfo:u,implementation:o}}var N=R.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function U(F,u){if(F==="font")return"";if(typeof u=="string")return u==="use-credentials"?u:""}return reactDom_production.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=c,reactDom_production.createPortal=function(F,u){var o=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!u||u.nodeType!==1&&u.nodeType!==9&&u.nodeType!==11)throw Error(f(299));return B(F,u,null,o)},reactDom_production.flushSync=function(F){var u=N.T,o=c.p;try{if(N.T=null,c.p=2,F)return F()}finally{N.T=u,c.p=o,c.d.f()}},reactDom_production.preconnect=function(F,u){typeof F=="string"&&(u?(u=u.crossOrigin,u=typeof u=="string"?u==="use-credentials"?u:"":void 0):u=null,c.d.C(F,u))},reactDom_production.prefetchDNS=function(F){typeof F=="string"&&c.d.D(F)},reactDom_production.preinit=function(F,u){if(typeof F=="string"&&u&&typeof u.as=="string"){var o=u.as,d=U(o,u.crossOrigin),b=typeof u.integrity=="string"?u.integrity:void 0,g=typeof u.fetchPriority=="string"?u.fetchPriority:void 0;o==="style"?c.d.S(F,typeof u.precedence=="string"?u.precedence:void 0,{crossOrigin:d,integrity:b,fetchPriority:g}):o==="script"&&c.d.X(F,{crossOrigin:d,integrity:b,fetchPriority:g,nonce:typeof u.nonce=="string"?u.nonce:void 0})}},reactDom_production.preinitModule=function(F,u){if(typeof F=="string")if(typeof u=="object"&&u!==null){if(u.as==null||u.as==="script"){var o=U(u.as,u.crossOrigin);c.d.M(F,{crossOrigin:o,integrity:typeof u.integrity=="string"?u.integrity:void 0,nonce:typeof u.nonce=="string"?u.nonce:void 0})}}else u==null&&c.d.M(F)},reactDom_production.preload=function(F,u){if(typeof F=="string"&&typeof u=="object"&&u!==null&&typeof u.as=="string"){var o=u.as,d=U(o,u.crossOrigin);c.d.L(F,o,{crossOrigin:d,integrity:typeof u.integrity=="string"?u.integrity:void 0,nonce:typeof u.nonce=="string"?u.nonce:void 0,type:typeof u.type=="string"?u.type:void 0,fetchPriority:typeof u.fetchPriority=="string"?u.fetchPriority:void 0,referrerPolicy:typeof u.referrerPolicy=="string"?u.referrerPolicy:void 0,imageSrcSet:typeof u.imageSrcSet=="string"?u.imageSrcSet:void 0,imageSizes:typeof u.imageSizes=="string"?u.imageSizes:void 0,media:typeof u.media=="string"?u.media:void 0})}},reactDom_production.preloadModule=function(F,u){if(typeof F=="string")if(u){var o=U(u.as,u.crossOrigin);c.d.m(F,{as:typeof u.as=="string"&&u.as!=="script"?u.as:void 0,crossOrigin:o,integrity:typeof u.integrity=="string"?u.integrity:void 0})}else c.d.m(F)},reactDom_production.requestFormReset=function(F){c.d.r(F)},reactDom_production.unstable_batchedUpdates=function(F,u){return F(u)},reactDom_production.useFormState=function(F,u,o){return N.H.useFormState(F,u,o)},reactDom_production.useFormStatus=function(){return N.H.useHostTransitionStatus()},reactDom_production.version="19.2.4",reactDom_production}var hasRequiredReactDom;function requireReactDom(){if(hasRequiredReactDom)return reactDom.exports;hasRequiredReactDom=1;function R(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(R)}catch(f){console.error(f)}}return R(),reactDom.exports=requireReactDom_production(),reactDom.exports}var hasRequiredReactDomClient_production;function requireReactDomClient_production(){if(hasRequiredReactDomClient_production)return reactDomClient_production;hasRequiredReactDomClient_production=1;var R=requireScheduler(),f=requireReact(),D=requireReactDom();function c(t){var e="https://react.dev/errors/"+t;if(1<arguments.length){e+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function _(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function B(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,(e.flags&4098)!==0&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function N(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function U(t){if(t.tag===31){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function F(t){if(B(t)!==t)throw Error(c(188))}function u(t){var e=t.alternate;if(!e){if(e=B(t),e===null)throw Error(c(188));return e!==t?null:t}for(var n=t,i=e;;){var a=n.return;if(a===null)break;var r=a.alternate;if(r===null){if(i=a.return,i!==null){n=i;continue}break}if(a.child===r.child){for(r=a.child;r;){if(r===n)return F(a),t;if(r===i)return F(a),e;r=r.sibling}throw Error(c(188))}if(n.return!==i.return)n=a,i=r;else{for(var A=!1,q=a.child;q;){if(q===n){A=!0,n=a,i=r;break}if(q===i){A=!0,i=a,n=r;break}q=q.sibling}if(!A){for(q=r.child;q;){if(q===n){A=!0,n=r,i=a;break}if(q===i){A=!0,i=r,n=a;break}q=q.sibling}if(!A)throw Error(c(189))}}if(n.alternate!==i)throw Error(c(190))}if(n.tag!==3)throw Error(c(188));return n.stateNode.current===n?t:e}function o(t){var e=t.tag;if(e===5||e===26||e===27||e===6)return t;for(t=t.child;t!==null;){if(e=o(t),e!==null)return e;t=t.sibling}return null}var d=Object.assign,b=Symbol.for("react.element"),g=Symbol.for("react.transitional.element"),h=Symbol.for("react.portal"),E=Symbol.for("react.fragment"),C=Symbol.for("react.strict_mode"),x=Symbol.for("react.profiler"),I=Symbol.for("react.consumer"),Q=Symbol.for("react.context"),V=Symbol.for("react.forward_ref"),T=Symbol.for("react.suspense"),L=Symbol.for("react.suspense_list"),$=Symbol.for("react.memo"),rt=Symbol.for("react.lazy"),et=Symbol.for("react.activity"),yt=Symbol.for("react.memo_cache_sentinel"),gt=Symbol.iterator;function kt(t){return t===null||typeof t!="object"?null:(t=gt&&t[gt]||t["@@iterator"],typeof t=="function"?t:null)}var At=Symbol.for("react.client.reference");function Ft(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===At?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case E:return"Fragment";case x:return"Profiler";case C:return"StrictMode";case T:return"Suspense";case L:return"SuspenseList";case et:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case h:return"Portal";case Q:return t.displayName||"Context";case I:return(t._context.displayName||"Context")+".Consumer";case V:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case $:return e=t.displayName||null,e!==null?e:Ft(t.type)||"Memo";case rt:e=t._payload,t=t._init;try{return Ft(t(e))}catch{}}return null}var Xt=Array.isArray,nt=f.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Y=D.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,k={pending:!1,data:null,method:null,action:null},S=[],w=-1;function y(t){return{current:t}}function O(t){0>w||(t.current=S[w],S[w]=null,w--)}function H(t,e){w++,S[w]=t.current,t.current=e}var J=y(null),K=y(null),m=y(null),M=y(null);function z(t,e){switch(H(m,e),H(K,t),H(J,null),e.nodeType){case 9:case 11:t=(t=e.documentElement)&&(t=t.namespaceURI)?kh(t):0;break;default:if(t=e.tagName,e=e.namespaceURI)e=kh(e),t=Nh(e,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}O(J),H(J,t)}function W(){O(J),O(K),O(m)}function G(t){t.memoizedState!==null&&H(M,t);var e=J.current,n=Nh(e,t.type);e!==n&&(H(K,t),H(J,n))}function it(t){K.current===t&&(O(J),O(K)),M.current===t&&(O(M),Jr._currentValue=k)}var at,jt;function Yt(t){if(at===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);at=e&&e[1]||"",jt=-1<n.stack.indexOf(`
    at`)?" (<anonymous>)":-1<n.stack.indexOf("@")?"@unknown:0:0":""}return`
`+at+t+jt}var Rt=!1;function Nt(t,e){if(!t||Rt)return"";Rt=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var i={DetermineComponentFrameRoot:function(){try{if(e){var It=function(){throw Error()};if(Object.defineProperty(It.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(It,[])}catch(Mt){var Ct=Mt}Reflect.construct(t,[],It)}else{try{It.call()}catch(Mt){Ct=Mt}t.call(It.prototype)}}else{try{throw Error()}catch(Mt){Ct=Mt}(It=t())&&typeof It.catch=="function"&&It.catch(function(){})}}catch(Mt){if(Mt&&Ct&&typeof Mt.stack=="string")return[Mt.stack,Ct.stack]}return[null,null]}};i.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var a=Object.getOwnPropertyDescriptor(i.DetermineComponentFrameRoot,"name");a&&a.configurable&&Object.defineProperty(i.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var r=i.DetermineComponentFrameRoot(),A=r[0],q=r[1];if(A&&q){var ot=A.split(`
`),wt=q.split(`
`);for(a=i=0;i<ot.length&&!ot[i].includes("DetermineComponentFrameRoot");)i++;for(;a<wt.length&&!wt[a].includes("DetermineComponentFrameRoot");)a++;if(i===ot.length||a===wt.length)for(i=ot.length-1,a=wt.length-1;1<=i&&0<=a&&ot[i]!==wt[a];)a--;for(;1<=i&&0<=a;i--,a--)if(ot[i]!==wt[a]){if(i!==1||a!==1)do if(i--,a--,0>a||ot[i]!==wt[a]){var Ot=`
`+ot[i].replace(" at new "," at ");return t.displayName&&Ot.includes("<anonymous>")&&(Ot=Ot.replace("<anonymous>",t.displayName)),Ot}while(1<=i&&0<=a);break}}}finally{Rt=!1,Error.prepareStackTrace=n}return(n=t?t.displayName||t.name:"")?Yt(n):""}function Pt(t,e){switch(t.tag){case 26:case 27:case 5:return Yt(t.type);case 16:return Yt("Lazy");case 13:return t.child!==e&&e!==null?Yt("Suspense Fallback"):Yt("Suspense");case 19:return Yt("SuspenseList");case 0:case 15:return Nt(t.type,!1);case 11:return Nt(t.type.render,!1);case 1:return Nt(t.type,!0);case 31:return Yt("Activity");default:return""}}function Lt(t){try{var e="",n=null;do e+=Pt(t,n),n=t,t=t.return;while(t);return e}catch(i){return`
Error generating stack: `+i.message+`
`+i.stack}}var Ut=Object.prototype.hasOwnProperty,Qt=R.unstable_scheduleCallback,$t=R.unstable_cancelCallback,se=R.unstable_shouldYield,le=R.unstable_requestPaint,oe=R.unstable_now,_e=R.unstable_getCurrentPriorityLevel,Ce=R.unstable_ImmediatePriority,Ue=R.unstable_UserBlockingPriority,jn=R.unstable_NormalPriority,We=R.unstable_LowPriority,En=R.unstable_IdlePriority,xi=R.log,ui=R.unstable_setDisableYieldValue,Qn=null,Bt=null;function vt(t){if(typeof xi=="function"&&ui(t),Bt&&typeof Bt.setStrictMode=="function")try{Bt.setStrictMode(Qn,t)}catch{}}var st=Math.clz32?Math.clz32:Ye,Jt=Math.log,me=Math.LN2;function Ye(t){return t>>>=0,t===0?32:31-(Jt(t)/me|0)|0}var Kt=256,Cn=262144,Dn=4194304;function cn(t){var e=t&42;if(e!==0)return e;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return t&261888;case 262144:case 524288:case 1048576:case 2097152:return t&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function Qe(t,e,n){var i=t.pendingLanes;if(i===0)return 0;var a=0,r=t.suspendedLanes,A=t.pingedLanes;t=t.warmLanes;var q=i&134217727;return q!==0?(i=q&~r,i!==0?a=cn(i):(A&=q,A!==0?a=cn(A):n||(n=q&~t,n!==0&&(a=cn(n))))):(q=i&~r,q!==0?a=cn(q):A!==0?a=cn(A):n||(n=i&~t,n!==0&&(a=cn(n)))),a===0?0:e!==0&&e!==a&&(e&r)===0&&(r=a&-a,n=e&-e,r>=n||r===32&&(n&4194048)!==0)?e:a}function An(t,e){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&e)===0}function Zn(t,e){switch(t){case 1:case 2:case 4:case 8:case 64:return e+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Di(){var t=Dn;return Dn<<=1,(Dn&62914560)===0&&(Dn=4194304),t}function ke(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function gn(t,e){t.pendingLanes|=e,e!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function vi(t,e,n,i,a,r){var A=t.pendingLanes;t.pendingLanes=n,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=n,t.entangledLanes&=n,t.errorRecoveryDisabledLanes&=n,t.shellSuspendCounter=0;var q=t.entanglements,ot=t.expirationTimes,wt=t.hiddenUpdates;for(n=A&~n;0<n;){var Ot=31-st(n),It=1<<Ot;q[Ot]=0,ot[Ot]=-1;var Ct=wt[Ot];if(Ct!==null)for(wt[Ot]=null,Ot=0;Ot<Ct.length;Ot++){var Mt=Ct[Ot];Mt!==null&&(Mt.lane&=-536870913)}n&=~It}i!==0&&di(t,i,0),r!==0&&a===0&&t.tag!==0&&(t.suspendedLanes|=r&~(A&~e))}function di(t,e,n){t.pendingLanes|=e,t.suspendedLanes&=~e;var i=31-st(e);t.entangledLanes|=e,t.entanglements[i]=t.entanglements[i]|1073741824|n&261930}function Re(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var i=31-st(n),a=1<<i;a&e|t[i]&e&&(t[i]|=e),n&=~a}}function Be(t,e){var n=e&-e;return n=(n&42)!==0?1:un(n),(n&(t.suspendedLanes|e))!==0?0:n}function un(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function On(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function hi(){var t=Y.p;return t!==0?t:(t=window.event,t===void 0?32:ef(t.type))}function Us(t,e){var n=Y.p;try{return Y.p=t,e()}finally{Y.p=n}}var bi=Math.random().toString(36).slice(2),qe="__reactFiber$"+bi,$e="__reactProps$"+bi,Mn="__reactContainer$"+bi,os="__reactEvents$"+bi,ml="__reactListeners$"+bi,_i="__reactHandles$"+bi,sr="__reactResources$"+bi,Un="__reactMarker$"+bi;function fa(t){delete t[qe],delete t[$e],delete t[os],delete t[ml],delete t[_i]}function Ei(t){var e=t[qe];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Mn]||n[qe]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Bh(t);t!==null;){if(n=t[qe])return n;t=Bh(t)}return e}t=n,n=t.parentNode}return null}function Oe(t){if(t=t[qe]||t[Mn]){var e=t.tag;if(e===5||e===6||e===13||e===31||e===26||e===27||e===3)return t}return null}function qn(t){var e=t.tag;if(e===5||e===26||e===27||e===6)return t.stateNode;throw Error(c(33))}function Sn(t){var e=t[sr];return e||(e=t[sr]={hoistableStyles:new Map,hoistableScripts:new Map}),e}function tn(t){t[Un]=!0}var Oi=new Set,qs={};function fi(t,e){Ai(t,e),Ai(t+"Capture",e)}function Ai(t,e){for(qs[t]=e,t=0;t<e.length;t++)Oi.add(e[t])}var Li=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),ar={},Hs={};function no(t){return Ut.call(Hs,t)?!0:Ut.call(ar,t)?!1:Li.test(t)?Hs[t]=!0:(ar[t]=!0,!1)}function pe(t,e,n){if(no(e))if(n===null)t.removeAttribute(e);else{switch(typeof n){case"undefined":case"function":case"symbol":t.removeAttribute(e);return;case"boolean":var i=e.toLowerCase().slice(0,5);if(i!=="data-"&&i!=="aria-"){t.removeAttribute(e);return}}t.setAttribute(e,""+n)}}function Gs(t,e,n){if(n===null)t.removeAttribute(e);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(e);return}t.setAttribute(e,""+n)}}function Jn(t,e,n,i){if(i===null)t.removeAttribute(n);else{switch(typeof i){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(n);return}t.setAttributeNS(e,n,""+i)}}function yn(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function ls(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function io(t,e,n){var i=Object.getOwnPropertyDescriptor(t.constructor.prototype,e);if(!t.hasOwnProperty(e)&&typeof i<"u"&&typeof i.get=="function"&&typeof i.set=="function"){var a=i.get,r=i.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return a.call(this)},set:function(A){n=""+A,r.call(this,A)}}),Object.defineProperty(t,e,{enumerable:i.enumerable}),{getValue:function(){return n},setValue:function(A){n=""+A},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function pa(t){if(!t._valueTracker){var e=ls(t)?"checked":"value";t._valueTracker=io(t,e,""+t[e])}}function rr(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),i="";return t&&(i=ls(t)?t.checked?"true":"false":t.value),t=i,t!==n?(e.setValue(t),!0):!1}function Te(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var Xs=/[\n"\\]/g;function hn(t){return t.replace(Xs,function(e){return"\\"+e.charCodeAt(0).toString(16)+" "})}function Si(t,e,n,i,a,r,A,q){t.name="",A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"?t.type=A:t.removeAttribute("type"),e!=null?A==="number"?(e===0&&t.value===""||t.value!=e)&&(t.value=""+yn(e)):t.value!==""+yn(e)&&(t.value=""+yn(e)):A!=="submit"&&A!=="reset"||t.removeAttribute("value"),e!=null?Ks(t,A,yn(e)):n!=null?Ks(t,A,yn(n)):i!=null&&t.removeAttribute("value"),a==null&&r!=null&&(t.defaultChecked=!!r),a!=null&&(t.checked=a&&typeof a!="function"&&typeof a!="symbol"),q!=null&&typeof q!="function"&&typeof q!="symbol"&&typeof q!="boolean"?t.name=""+yn(q):t.removeAttribute("name")}function ma(t,e,n,i,a,r,A,q){if(r!=null&&typeof r!="function"&&typeof r!="symbol"&&typeof r!="boolean"&&(t.type=r),e!=null||n!=null){if(!(r!=="submit"&&r!=="reset"||e!=null)){pa(t);return}n=n!=null?""+yn(n):"",e=e!=null?""+yn(e):n,q||e===t.value||(t.value=e),t.defaultValue=e}i=i??a,i=typeof i!="function"&&typeof i!="symbol"&&!!i,t.checked=q?t.checked:!!i,t.defaultChecked=!!i,A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"&&(t.name=A),pa(t)}function Ks(t,e,n){e==="number"&&Te(t.ownerDocument)===t||t.defaultValue===""+n||(t.defaultValue=""+n)}function pi(t,e,n,i){if(t=t.options,e){e={};for(var a=0;a<n.length;a++)e["$"+n[a]]=!0;for(n=0;n<t.length;n++)a=e.hasOwnProperty("$"+t[n].value),t[n].selected!==a&&(t[n].selected=a),a&&i&&(t[n].defaultSelected=!0)}else{for(n=""+yn(n),e=null,a=0;a<t.length;a++){if(t[a].value===n){t[a].selected=!0,i&&(t[a].defaultSelected=!0);return}e!==null||t[a].disabled||(e=t[a])}e!==null&&(e.selected=!0)}}function or(t,e,n){if(e!=null&&(e=""+yn(e),e!==t.value&&(t.value=e),n==null)){t.defaultValue!==e&&(t.defaultValue=e);return}t.defaultValue=n!=null?""+yn(n):""}function Ys(t,e,n,i){if(e==null){if(i!=null){if(n!=null)throw Error(c(92));if(Xt(i)){if(1<i.length)throw Error(c(93));i=i[0]}n=i}n==null&&(n=""),e=n}n=yn(e),t.defaultValue=n,i=t.textContent,i===n&&i!==""&&i!==null&&(t.value=i),pa(t)}function Pi(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var gl=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Ee(t,e,n){var i=e.indexOf("--")===0;n==null||typeof n=="boolean"||n===""?i?t.setProperty(e,""):e==="float"?t.cssFloat="":t[e]="":i?t.setProperty(e,n):typeof n!="number"||n===0||gl.has(e)?e==="float"?t.cssFloat=n:t[e]=(""+n).trim():t[e]=n+"px"}function lr(t,e,n){if(e!=null&&typeof e!="object")throw Error(c(62));if(t=t.style,n!=null){for(var i in n)!n.hasOwnProperty(i)||e!=null&&e.hasOwnProperty(i)||(i.indexOf("--")===0?t.setProperty(i,""):i==="float"?t.cssFloat="":t[i]="");for(var a in e)i=e[a],e.hasOwnProperty(a)&&n[a]!==i&&Ee(t,a,i)}else for(var r in e)e.hasOwnProperty(r)&&Ee(t,r,e[r])}function cr(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var yl=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),kn=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function mi(t){return kn.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}function Ln(){}var $n=null;function ga(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Fi=null,He=null;function Hn(t){var e=Oe(t);if(e&&(t=e.stateNode)){var n=t[$e]||null;t:switch(t=e.stateNode,e.type){case"input":if(Si(t,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll('input[name="'+hn(""+e)+'"][type="radio"]'),e=0;e<n.length;e++){var i=n[e];if(i!==t&&i.form===t.form){var a=i[$e]||null;if(!a)throw Error(c(90));Si(i,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name)}}for(e=0;e<n.length;e++)i=n[e],i.form===t.form&&rr(i)}break t;case"textarea":or(t,n.value,n.defaultValue);break t;case"select":e=n.value,e!=null&&pi(t,!!n.multiple,e,!1)}}}var zi=!1;function cs(t,e,n){if(zi)return t(e,n);zi=!0;try{var i=t(e);return i}finally{if(zi=!1,(Fi!==null||He!==null)&&(Yo(),Fi&&(e=Fi,t=He,He=Fi=null,Hn(e),t)))for(e=0;e<t.length;e++)Hn(t[e])}}function Bi(t,e){var n=t.stateNode;if(n===null)return null;var i=n[$e]||null;if(i===null)return null;n=i[e];t:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(t=t.type,i=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!i;break t;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(c(231,e,typeof n));return n}var fn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ur=!1;if(fn)try{var wn={};Object.defineProperty(wn,"passive",{get:function(){ur=!0}}),window.addEventListener("test",wn,wn),window.removeEventListener("test",wn,wn)}catch{ur=!1}var ti=null,ya=null,us=null;function ds(){if(us)return us;var t,e=ya,n=e.length,i,a="value"in ti?ti.value:ti.textContent,r=a.length;for(t=0;t<n&&e[t]===a[t];t++);var A=n-t;for(i=1;i<=A&&e[n-i]===a[r-i];i++);return us=a.slice(t,1<i?1-i:void 0)}function hs(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Vs(){return!0}function so(){return!1}function sn(t){function e(n,i,a,r,A){this._reactName=n,this._targetInst=a,this.type=i,this.nativeEvent=r,this.target=A,this.currentTarget=null;for(var q in t)t.hasOwnProperty(q)&&(n=t[q],this[q]=n?n(r):r[q]);return this.isDefaultPrevented=(r.defaultPrevented!=null?r.defaultPrevented:r.returnValue===!1)?Vs:so,this.isPropagationStopped=so,this}return d(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Vs)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Vs)},persist:function(){},isPersistent:Vs}),e}var Ii={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},xa=sn(Ii),wi=d({},Ii,{view:0,detail:0}),va=sn(wi),Ws,dr,Qs,ba=d({},wi,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ui,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Qs&&(Qs&&t.type==="mousemove"?(Ws=t.screenX-Qs.screenX,dr=t.screenY-Qs.screenY):dr=Ws=0,Qs=t),Ws)},movementY:function(t){return"movementY"in t?t.movementY:dr}}),_a=sn(ba),hr=d({},ba,{dataTransfer:0}),ao=sn(hr),Ea=d({},wi,{relatedTarget:0}),fs=sn(Ea),Aa=d({},Ii,{animationName:0,elapsedTime:0,pseudoElement:0}),ro=sn(Aa),xl=d({},Ii,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),ps=sn(xl),fr=d({},Ii,{data:0}),Sa=sn(fr),pr={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},mr={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},pn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Zs(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=pn[t])?!!e[t]:!1}function Ui(){return Zs}var oo=d({},wi,{key:function(t){if(t.key){var e=pr[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=hs(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?mr[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ui,charCode:function(t){return t.type==="keypress"?hs(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?hs(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),wa=sn(oo),lo=d({},ba,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),gr=sn(lo),Ra=d({},wi,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ui}),yr=sn(Ra),qi=d({},Ii,{propertyName:0,elapsedTime:0,pseudoElement:0}),xr=sn(qi),vr=d({},ba,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Ta=sn(vr),br=d({},Ii,{newState:0,oldState:0}),co=sn(br),vl=[9,13,27,32],Js=fn&&"CompositionEvent"in window,Ri=null;fn&&"documentMode"in document&&(Ri=document.documentMode);var bl=fn&&"TextEvent"in window&&!Ri,ja=fn&&(!Js||Ri&&8<Ri&&11>=Ri),Ca=" ",uo=!1;function _r(t,e){switch(t){case"keyup":return vl.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ho(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Hi=!1;function fo(t,e){switch(t){case"compositionend":return ho(e);case"keypress":return e.which!==32?null:(uo=!0,Ca);case"textInput":return t=e.data,t===Ca&&uo?null:t;default:return null}}function _l(t,e){if(Hi)return t==="compositionend"||!Js&&_r(t,e)?(t=ds(),us=ya=ti=null,Hi=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return ja&&e.locale!=="ko"?null:e.data;default:return null}}var po={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ma(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!po[t.type]:e==="textarea"}function Er(t,e,n,i){Fi?He?He.push(i):He=[i]:Fi=i,e=tl(e,"onChange"),0<e.length&&(n=new xa("onChange","change",null,n,i),t.push({event:n,listeners:e}))}var ms=null,$s=null;function El(t){wh(t,0)}function ka(t){var e=qn(t);if(rr(e))return t}function ta(t,e){if(t==="change")return e}var ei=!1;if(fn){var Ge;if(fn){var gs="oninput"in document;if(!gs){var Gi=document.createElement("div");Gi.setAttribute("oninput","return;"),gs=typeof Gi.oninput=="function"}Ge=gs}else Ge=!1;ei=Ge&&(!document.documentMode||9<document.documentMode)}function mo(){ms&&(ms.detachEvent("onpropertychange",Na),$s=ms=null)}function Na(t){if(t.propertyName==="value"&&ka($s)){var e=[];Er(e,$s,t,ga(t)),cs(El,e)}}function go(t,e,n){t==="focusin"?(mo(),ms=e,$s=n,ms.attachEvent("onpropertychange",Na)):t==="focusout"&&mo()}function Xi(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return ka($s)}function Ar(t,e){if(t==="click")return ka(e)}function ys(t,e){if(t==="input"||t==="change")return ka(e)}function Ti(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Rn=typeof Object.is=="function"?Object.is:Ti;function s(t,e){if(Rn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),i=Object.keys(e);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var a=n[i];if(!Ut.call(e,a)||!Rn(t[a],e[a]))return!1}return!0}function l(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function p(t,e){var n=l(t);t=0;for(var i;n;){if(n.nodeType===3){if(i=t+n.textContent.length,t<=e&&i>=e)return{node:n,offset:e-t};t=i}t:{for(;n;){if(n.nextSibling){n=n.nextSibling;break t}n=n.parentNode}n=void 0}n=l(n)}}function v(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?v(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function j(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var e=Te(t.document);e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Te(t.document)}return e}function P(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}var Z=fn&&"documentMode"in document&&11>=document.documentMode,tt=null,ct=null,bt=null,ut=!1;function lt(t,e,n){var i=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;ut||tt==null||tt!==Te(i)||(i=tt,"selectionStart"in i&&P(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),bt&&s(bt,i)||(bt=i,i=tl(ct,"onSelect"),0<i.length&&(e=new xa("onSelect","select",null,e,n),t.push({event:e,listeners:i}),e.target=tt)))}function ft(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var mt={animationend:ft("Animation","AnimationEnd"),animationiteration:ft("Animation","AnimationIteration"),animationstart:ft("Animation","AnimationStart"),transitionrun:ft("Transition","TransitionRun"),transitionstart:ft("Transition","TransitionStart"),transitioncancel:ft("Transition","TransitionCancel"),transitionend:ft("Transition","TransitionEnd")},dt={},ht={};fn&&(ht=document.createElement("div").style,"AnimationEvent"in window||(delete mt.animationend.animation,delete mt.animationiteration.animation,delete mt.animationstart.animation),"TransitionEvent"in window||delete mt.transitionend.transition);function Et(t){if(dt[t])return dt[t];if(!mt[t])return t;var e=mt[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in ht)return dt[t]=e[n];return t}var Tt=Et("animationend"),_t=Et("animationiteration"),Dt=Et("animationstart"),qt=Et("transitionrun"),Vt=Et("transitionstart"),Wt=Et("transitioncancel"),Ht=Et("transitionend"),te=new Map,Zt="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Zt.push("scrollEnd");function Gt(t,e){te.set(t,e),fi(e,[t])}var ee=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var e=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(e))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)},ue=[],ge=0,ae=0;function de(){for(var t=ge,e=ae=ge=0;e<t;){var n=ue[e];ue[e++]=null;var i=ue[e];ue[e++]=null;var a=ue[e];ue[e++]=null;var r=ue[e];if(ue[e++]=null,i!==null&&a!==null){var A=i.pending;A===null?a.next=a:(a.next=A.next,A.next=a),i.pending=a}r!==0&&ji(n,a,r)}}function Le(t,e,n,i){ue[ge++]=t,ue[ge++]=e,ue[ge++]=n,ue[ge++]=i,ae|=i,t.lanes|=i,t=t.alternate,t!==null&&(t.lanes|=i)}function Tn(t,e,n,i){return Le(t,e,n,i),xs(t)}function Me(t,e){return Le(t,null,null,e),xs(t)}function ji(t,e,n){t.lanes|=n;var i=t.alternate;i!==null&&(i.lanes|=n);for(var a=!1,r=t.return;r!==null;)r.childLanes|=n,i=r.alternate,i!==null&&(i.childLanes|=n),r.tag===22&&(t=r.stateNode,t===null||t._visibility&1||(a=!0)),t=r,r=r.return;return t.tag===3?(r=t.stateNode,a&&e!==null&&(a=31-st(n),t=r.hiddenUpdates,i=t[a],i===null?t[a]=[e]:i.push(e),e.lane=n|536870912),r):null}function xs(t){if(50<Xr)throw Xr=0,kc=null,Error(c(185));for(var e=t.return;e!==null;)t=e,e=t.return;return t.tag===3?t.stateNode:null}var Da={};function cf(t,e,n,i){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Gn(t,e,n,i){return new cf(t,e,n,i)}function Al(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Ki(t,e){var n=t.alternate;return n===null?(n=Gn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&65011712,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n.refCleanup=t.refCleanup,n}function ou(t,e){t.flags&=65011714;var n=t.alternate;return n===null?(t.childLanes=0,t.lanes=e,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=n.childLanes,t.lanes=n.lanes,t.child=n.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=n.memoizedProps,t.memoizedState=n.memoizedState,t.updateQueue=n.updateQueue,t.type=n.type,e=n.dependencies,t.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),t}function yo(t,e,n,i,a,r){var A=0;if(i=t,typeof t=="function")Al(t)&&(A=1);else if(typeof t=="string")A=pp(t,n,J.current)?26:t==="html"||t==="head"||t==="body"?27:5;else t:switch(t){case et:return t=Gn(31,n,e,a),t.elementType=et,t.lanes=r,t;case E:return ea(n.children,a,r,e);case C:A=8,a|=24;break;case x:return t=Gn(12,n,e,a|2),t.elementType=x,t.lanes=r,t;case T:return t=Gn(13,n,e,a),t.elementType=T,t.lanes=r,t;case L:return t=Gn(19,n,e,a),t.elementType=L,t.lanes=r,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Q:A=10;break t;case I:A=9;break t;case V:A=11;break t;case $:A=14;break t;case rt:A=16,i=null;break t}A=29,n=Error(c(130,t===null?"null":typeof t,"")),i=null}return e=Gn(A,n,e,a),e.elementType=t,e.type=i,e.lanes=r,e}function ea(t,e,n,i){return t=Gn(7,t,i,e),t.lanes=n,t}function Sl(t,e,n){return t=Gn(6,t,null,e),t.lanes=n,t}function lu(t){var e=Gn(18,null,null,0);return e.stateNode=t,e}function wl(t,e,n){return e=Gn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}var cu=new WeakMap;function ni(t,e){if(typeof t=="object"&&t!==null){var n=cu.get(t);return n!==void 0?n:(e={value:t,source:e,stack:Lt(e)},cu.set(t,e),e)}return{value:t,source:e,stack:Lt(e)}}var Oa=[],La=0,xo=null,Sr=0,ii=[],si=0,vs=null,Ci=1,Mi="";function Yi(t,e){Oa[La++]=Sr,Oa[La++]=xo,xo=t,Sr=e}function uu(t,e,n){ii[si++]=Ci,ii[si++]=Mi,ii[si++]=vs,vs=t;var i=Ci;t=Mi;var a=32-st(i)-1;i&=~(1<<a),n+=1;var r=32-st(e)+a;if(30<r){var A=a-a%5;r=(i&(1<<A)-1).toString(32),i>>=A,a-=A,Ci=1<<32-st(e)+a|n<<a|i,Mi=r+t}else Ci=1<<r|n<<a|i,Mi=t}function Rl(t){t.return!==null&&(Yi(t,1),uu(t,1,0))}function Tl(t){for(;t===xo;)xo=Oa[--La],Oa[La]=null,Sr=Oa[--La],Oa[La]=null;for(;t===vs;)vs=ii[--si],ii[si]=null,Mi=ii[--si],ii[si]=null,Ci=ii[--si],ii[si]=null}function du(t,e){ii[si++]=Ci,ii[si++]=Mi,ii[si++]=vs,Ci=e.id,Mi=e.overflow,vs=t}var xn=null,Xe=null,Ae=!1,bs=null,ri=!1,jl=Error(c(519));function _s(t){var e=Error(c(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw wr(ni(e,t)),jl}function hu(t){var e=t.stateNode,n=t.type,i=t.memoizedProps;switch(e[qe]=t,e[$e]=i,n){case"dialog":xe("cancel",e),xe("close",e);break;case"iframe":case"object":case"embed":xe("load",e);break;case"video":case"audio":for(n=0;n<Yr.length;n++)xe(Yr[n],e);break;case"source":xe("error",e);break;case"img":case"image":case"link":xe("error",e),xe("load",e);break;case"details":xe("toggle",e);break;case"input":xe("invalid",e),ma(e,i.value,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name,!0);break;case"select":xe("invalid",e);break;case"textarea":xe("invalid",e),Ys(e,i.value,i.defaultValue,i.children)}n=i.children,typeof n!="string"&&typeof n!="number"&&typeof n!="bigint"||e.textContent===""+n||i.suppressHydrationWarning===!0||Ch(e.textContent,n)?(i.popover!=null&&(xe("beforetoggle",e),xe("toggle",e)),i.onScroll!=null&&xe("scroll",e),i.onScrollEnd!=null&&xe("scrollend",e),i.onClick!=null&&(e.onclick=Ln),e=!0):e=!1,e||_s(t,!0)}function fu(t){for(xn=t.return;xn;)switch(xn.tag){case 5:case 31:case 13:ri=!1;return;case 27:case 3:ri=!0;return;default:xn=xn.return}}function Pa(t){if(t!==xn)return!1;if(!Ae)return fu(t),Ae=!0,!1;var e=t.tag,n;if((n=e!==3&&e!==27)&&((n=e===5)&&(n=t.type,n=!(n!=="form"&&n!=="button")||Kc(t.type,t.memoizedProps)),n=!n),n&&Xe&&_s(t),fu(t),e===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(c(317));Xe=zh(t)}else if(e===31){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(c(317));Xe=zh(t)}else e===27?(e=Xe,Ls(t.type)?(t=Zc,Zc=null,Xe=t):Xe=e):Xe=xn?li(t.stateNode.nextSibling):null;return!0}function na(){Xe=xn=null,Ae=!1}function Cl(){var t=bs;return t!==null&&(Bn===null?Bn=t:Bn.push.apply(Bn,t),bs=null),t}function wr(t){bs===null?bs=[t]:bs.push(t)}var Ml=y(null),ia=null,Vi=null;function Es(t,e,n){H(Ml,e._currentValue),e._currentValue=n}function Wi(t){t._currentValue=Ml.current,O(Ml)}function kl(t,e,n){for(;t!==null;){var i=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,i!==null&&(i.childLanes|=e)):i!==null&&(i.childLanes&e)!==e&&(i.childLanes|=e),t===n)break;t=t.return}}function Nl(t,e,n,i){var a=t.child;for(a!==null&&(a.return=t);a!==null;){var r=a.dependencies;if(r!==null){var A=a.child;r=r.firstContext;t:for(;r!==null;){var q=r;r=a;for(var ot=0;ot<e.length;ot++)if(q.context===e[ot]){r.lanes|=n,q=r.alternate,q!==null&&(q.lanes|=n),kl(r.return,n,t),i||(A=null);break t}r=q.next}}else if(a.tag===18){if(A=a.return,A===null)throw Error(c(341));A.lanes|=n,r=A.alternate,r!==null&&(r.lanes|=n),kl(A,n,t),A=null}else A=a.child;if(A!==null)A.return=a;else for(A=a;A!==null;){if(A===t){A=null;break}if(a=A.sibling,a!==null){a.return=A.return,A=a;break}A=A.return}a=A}}function Fa(t,e,n,i){t=null;for(var a=e,r=!1;a!==null;){if(!r){if((a.flags&524288)!==0)r=!0;else if((a.flags&262144)!==0)break}if(a.tag===10){var A=a.alternate;if(A===null)throw Error(c(387));if(A=A.memoizedProps,A!==null){var q=a.type;Rn(a.pendingProps.value,A.value)||(t!==null?t.push(q):t=[q])}}else if(a===M.current){if(A=a.alternate,A===null)throw Error(c(387));A.memoizedState.memoizedState!==a.memoizedState.memoizedState&&(t!==null?t.push(Jr):t=[Jr])}a=a.return}t!==null&&Nl(e,t,n,i),e.flags|=262144}function vo(t){for(t=t.firstContext;t!==null;){if(!Rn(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function sa(t){ia=t,Vi=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function vn(t){return pu(ia,t)}function bo(t,e){return ia===null&&sa(t),pu(t,e)}function pu(t,e){var n=e._currentValue;if(e={context:e,memoizedValue:n,next:null},Vi===null){if(t===null)throw Error(c(308));Vi=e,t.dependencies={lanes:0,firstContext:e},t.flags|=524288}else Vi=Vi.next=e;return n}var uf=typeof AbortController<"u"?AbortController:function(){var t=[],e=this.signal={aborted:!1,addEventListener:function(n,i){t.push(i)}};this.abort=function(){e.aborted=!0,t.forEach(function(n){return n()})}},df=R.unstable_scheduleCallback,hf=R.unstable_NormalPriority,an={$$typeof:Q,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Dl(){return{controller:new uf,data:new Map,refCount:0}}function Rr(t){t.refCount--,t.refCount===0&&df(hf,function(){t.controller.abort()})}var Tr=null,Ol=0,za=0,Ba=null;function ff(t,e){if(Tr===null){var n=Tr=[];Ol=0,za=Fc(),Ba={status:"pending",value:void 0,then:function(i){n.push(i)}}}return Ol++,e.then(mu,mu),e}function mu(){if(--Ol===0&&Tr!==null){Ba!==null&&(Ba.status="fulfilled");var t=Tr;Tr=null,za=0,Ba=null;for(var e=0;e<t.length;e++)(0,t[e])()}}function pf(t,e){var n=[],i={status:"pending",value:null,reason:null,then:function(a){n.push(a)}};return t.then(function(){i.status="fulfilled",i.value=e;for(var a=0;a<n.length;a++)(0,n[a])(e)},function(a){for(i.status="rejected",i.reason=a,a=0;a<n.length;a++)(0,n[a])(void 0)}),i}var gu=nt.S;nt.S=function(t,e){$d=oe(),typeof e=="object"&&e!==null&&typeof e.then=="function"&&ff(t,e),gu!==null&&gu(t,e)};var aa=y(null);function Ll(){var t=aa.current;return t!==null?t:Ie.pooledCache}function _o(t,e){e===null?H(aa,aa.current):H(aa,e.pool)}function yu(){var t=Ll();return t===null?null:{parent:an._currentValue,pool:t}}var Ia=Error(c(460)),Pl=Error(c(474)),Eo=Error(c(542)),Ao={then:function(){}};function xu(t){return t=t.status,t==="fulfilled"||t==="rejected"}function vu(t,e,n){switch(n=t[n],n===void 0?t.push(e):n!==e&&(e.then(Ln,Ln),e=n),e.status){case"fulfilled":return e.value;case"rejected":throw t=e.reason,_u(t),t;default:if(typeof e.status=="string")e.then(Ln,Ln);else{if(t=Ie,t!==null&&100<t.shellSuspendCounter)throw Error(c(482));t=e,t.status="pending",t.then(function(i){if(e.status==="pending"){var a=e;a.status="fulfilled",a.value=i}},function(i){if(e.status==="pending"){var a=e;a.status="rejected",a.reason=i}})}switch(e.status){case"fulfilled":return e.value;case"rejected":throw t=e.reason,_u(t),t}throw oa=e,Ia}}function ra(t){try{var e=t._init;return e(t._payload)}catch(n){throw n!==null&&typeof n=="object"&&typeof n.then=="function"?(oa=n,Ia):n}}var oa=null;function bu(){if(oa===null)throw Error(c(459));var t=oa;return oa=null,t}function _u(t){if(t===Ia||t===Eo)throw Error(c(483))}var Ua=null,jr=0;function So(t){var e=jr;return jr+=1,Ua===null&&(Ua=[]),vu(Ua,t,e)}function Cr(t,e){e=e.props.ref,t.ref=e!==void 0?e:null}function wo(t,e){throw e.$$typeof===b?Error(c(525)):(t=Object.prototype.toString.call(e),Error(c(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)))}function Eu(t){function e(xt,pt){if(t){var St=xt.deletions;St===null?(xt.deletions=[pt],xt.flags|=16):St.push(pt)}}function n(xt,pt){if(!t)return null;for(;pt!==null;)e(xt,pt),pt=pt.sibling;return null}function i(xt){for(var pt=new Map;xt!==null;)xt.key!==null?pt.set(xt.key,xt):pt.set(xt.index,xt),xt=xt.sibling;return pt}function a(xt,pt){return xt=Ki(xt,pt),xt.index=0,xt.sibling=null,xt}function r(xt,pt,St){return xt.index=St,t?(St=xt.alternate,St!==null?(St=St.index,St<pt?(xt.flags|=67108866,pt):St):(xt.flags|=67108866,pt)):(xt.flags|=1048576,pt)}function A(xt){return t&&xt.alternate===null&&(xt.flags|=67108866),xt}function q(xt,pt,St,zt){return pt===null||pt.tag!==6?(pt=Sl(St,xt.mode,zt),pt.return=xt,pt):(pt=a(pt,St),pt.return=xt,pt)}function ot(xt,pt,St,zt){var re=St.type;return re===E?Ot(xt,pt,St.props.children,zt,St.key):pt!==null&&(pt.elementType===re||typeof re=="object"&&re!==null&&re.$$typeof===rt&&ra(re)===pt.type)?(pt=a(pt,St.props),Cr(pt,St),pt.return=xt,pt):(pt=yo(St.type,St.key,St.props,null,xt.mode,zt),Cr(pt,St),pt.return=xt,pt)}function wt(xt,pt,St,zt){return pt===null||pt.tag!==4||pt.stateNode.containerInfo!==St.containerInfo||pt.stateNode.implementation!==St.implementation?(pt=wl(St,xt.mode,zt),pt.return=xt,pt):(pt=a(pt,St.children||[]),pt.return=xt,pt)}function Ot(xt,pt,St,zt,re){return pt===null||pt.tag!==7?(pt=ea(St,xt.mode,zt,re),pt.return=xt,pt):(pt=a(pt,St),pt.return=xt,pt)}function It(xt,pt,St){if(typeof pt=="string"&&pt!==""||typeof pt=="number"||typeof pt=="bigint")return pt=Sl(""+pt,xt.mode,St),pt.return=xt,pt;if(typeof pt=="object"&&pt!==null){switch(pt.$$typeof){case g:return St=yo(pt.type,pt.key,pt.props,null,xt.mode,St),Cr(St,pt),St.return=xt,St;case h:return pt=wl(pt,xt.mode,St),pt.return=xt,pt;case rt:return pt=ra(pt),It(xt,pt,St)}if(Xt(pt)||kt(pt))return pt=ea(pt,xt.mode,St,null),pt.return=xt,pt;if(typeof pt.then=="function")return It(xt,So(pt),St);if(pt.$$typeof===Q)return It(xt,bo(xt,pt),St);wo(xt,pt)}return null}function Ct(xt,pt,St,zt){var re=pt!==null?pt.key:null;if(typeof St=="string"&&St!==""||typeof St=="number"||typeof St=="bigint")return re!==null?null:q(xt,pt,""+St,zt);if(typeof St=="object"&&St!==null){switch(St.$$typeof){case g:return St.key===re?ot(xt,pt,St,zt):null;case h:return St.key===re?wt(xt,pt,St,zt):null;case rt:return St=ra(St),Ct(xt,pt,St,zt)}if(Xt(St)||kt(St))return re!==null?null:Ot(xt,pt,St,zt,null);if(typeof St.then=="function")return Ct(xt,pt,So(St),zt);if(St.$$typeof===Q)return Ct(xt,pt,bo(xt,St),zt);wo(xt,St)}return null}function Mt(xt,pt,St,zt,re){if(typeof zt=="string"&&zt!==""||typeof zt=="number"||typeof zt=="bigint")return xt=xt.get(St)||null,q(pt,xt,""+zt,re);if(typeof zt=="object"&&zt!==null){switch(zt.$$typeof){case g:return xt=xt.get(zt.key===null?St:zt.key)||null,ot(pt,xt,zt,re);case h:return xt=xt.get(zt.key===null?St:zt.key)||null,wt(pt,xt,zt,re);case rt:return zt=ra(zt),Mt(xt,pt,St,zt,re)}if(Xt(zt)||kt(zt))return xt=xt.get(St)||null,Ot(pt,xt,zt,re,null);if(typeof zt.then=="function")return Mt(xt,pt,St,So(zt),re);if(zt.$$typeof===Q)return Mt(xt,pt,St,bo(pt,zt),re);wo(pt,zt)}return null}function ne(xt,pt,St,zt){for(var re=null,Se=null,ie=pt,fe=pt=0,be=null;ie!==null&&fe<St.length;fe++){ie.index>fe?(be=ie,ie=null):be=ie.sibling;var we=Ct(xt,ie,St[fe],zt);if(we===null){ie===null&&(ie=be);break}t&&ie&&we.alternate===null&&e(xt,ie),pt=r(we,pt,fe),Se===null?re=we:Se.sibling=we,Se=we,ie=be}if(fe===St.length)return n(xt,ie),Ae&&Yi(xt,fe),re;if(ie===null){for(;fe<St.length;fe++)ie=It(xt,St[fe],zt),ie!==null&&(pt=r(ie,pt,fe),Se===null?re=ie:Se.sibling=ie,Se=ie);return Ae&&Yi(xt,fe),re}for(ie=i(ie);fe<St.length;fe++)be=Mt(ie,xt,fe,St[fe],zt),be!==null&&(t&&be.alternate!==null&&ie.delete(be.key===null?fe:be.key),pt=r(be,pt,fe),Se===null?re=be:Se.sibling=be,Se=be);return t&&ie.forEach(function(Is){return e(xt,Is)}),Ae&&Yi(xt,fe),re}function ce(xt,pt,St,zt){if(St==null)throw Error(c(151));for(var re=null,Se=null,ie=pt,fe=pt=0,be=null,we=St.next();ie!==null&&!we.done;fe++,we=St.next()){ie.index>fe?(be=ie,ie=null):be=ie.sibling;var Is=Ct(xt,ie,we.value,zt);if(Is===null){ie===null&&(ie=be);break}t&&ie&&Is.alternate===null&&e(xt,ie),pt=r(Is,pt,fe),Se===null?re=Is:Se.sibling=Is,Se=Is,ie=be}if(we.done)return n(xt,ie),Ae&&Yi(xt,fe),re;if(ie===null){for(;!we.done;fe++,we=St.next())we=It(xt,we.value,zt),we!==null&&(pt=r(we,pt,fe),Se===null?re=we:Se.sibling=we,Se=we);return Ae&&Yi(xt,fe),re}for(ie=i(ie);!we.done;fe++,we=St.next())we=Mt(ie,xt,fe,we.value,zt),we!==null&&(t&&we.alternate!==null&&ie.delete(we.key===null?fe:we.key),pt=r(we,pt,fe),Se===null?re=we:Se.sibling=we,Se=we);return t&&ie.forEach(function(wp){return e(xt,wp)}),Ae&&Yi(xt,fe),re}function ze(xt,pt,St,zt){if(typeof St=="object"&&St!==null&&St.type===E&&St.key===null&&(St=St.props.children),typeof St=="object"&&St!==null){switch(St.$$typeof){case g:t:{for(var re=St.key;pt!==null;){if(pt.key===re){if(re=St.type,re===E){if(pt.tag===7){n(xt,pt.sibling),zt=a(pt,St.props.children),zt.return=xt,xt=zt;break t}}else if(pt.elementType===re||typeof re=="object"&&re!==null&&re.$$typeof===rt&&ra(re)===pt.type){n(xt,pt.sibling),zt=a(pt,St.props),Cr(zt,St),zt.return=xt,xt=zt;break t}n(xt,pt);break}else e(xt,pt);pt=pt.sibling}St.type===E?(zt=ea(St.props.children,xt.mode,zt,St.key),zt.return=xt,xt=zt):(zt=yo(St.type,St.key,St.props,null,xt.mode,zt),Cr(zt,St),zt.return=xt,xt=zt)}return A(xt);case h:t:{for(re=St.key;pt!==null;){if(pt.key===re)if(pt.tag===4&&pt.stateNode.containerInfo===St.containerInfo&&pt.stateNode.implementation===St.implementation){n(xt,pt.sibling),zt=a(pt,St.children||[]),zt.return=xt,xt=zt;break t}else{n(xt,pt);break}else e(xt,pt);pt=pt.sibling}zt=wl(St,xt.mode,zt),zt.return=xt,xt=zt}return A(xt);case rt:return St=ra(St),ze(xt,pt,St,zt)}if(Xt(St))return ne(xt,pt,St,zt);if(kt(St)){if(re=kt(St),typeof re!="function")throw Error(c(150));return St=re.call(St),ce(xt,pt,St,zt)}if(typeof St.then=="function")return ze(xt,pt,So(St),zt);if(St.$$typeof===Q)return ze(xt,pt,bo(xt,St),zt);wo(xt,St)}return typeof St=="string"&&St!==""||typeof St=="number"||typeof St=="bigint"?(St=""+St,pt!==null&&pt.tag===6?(n(xt,pt.sibling),zt=a(pt,St),zt.return=xt,xt=zt):(n(xt,pt),zt=Sl(St,xt.mode,zt),zt.return=xt,xt=zt),A(xt)):n(xt,pt)}return function(xt,pt,St,zt){try{jr=0;var re=ze(xt,pt,St,zt);return Ua=null,re}catch(ie){if(ie===Ia||ie===Eo)throw ie;var Se=Gn(29,ie,null,xt.mode);return Se.lanes=zt,Se.return=xt,Se}}}var la=Eu(!0),Au=Eu(!1),As=!1;function Fl(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function zl(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function Ss(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function ws(t,e,n){var i=t.updateQueue;if(i===null)return null;if(i=i.shared,(je&2)!==0){var a=i.pending;return a===null?e.next=e:(e.next=a.next,a.next=e),i.pending=e,e=xs(t),ji(t,null,n),e}return Le(t,i,e,n),xs(t)}function Mr(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194048)!==0)){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,Re(t,n)}}function Bl(t,e){var n=t.updateQueue,i=t.alternate;if(i!==null&&(i=i.updateQueue,n===i)){var a=null,r=null;if(n=n.firstBaseUpdate,n!==null){do{var A={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};r===null?a=r=A:r=r.next=A,n=n.next}while(n!==null);r===null?a=r=e:r=r.next=e}else a=r=e;n={baseState:i.baseState,firstBaseUpdate:a,lastBaseUpdate:r,shared:i.shared,callbacks:i.callbacks},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}var Il=!1;function kr(){if(Il){var t=Ba;if(t!==null)throw t}}function Nr(t,e,n,i){Il=!1;var a=t.updateQueue;As=!1;var r=a.firstBaseUpdate,A=a.lastBaseUpdate,q=a.shared.pending;if(q!==null){a.shared.pending=null;var ot=q,wt=ot.next;ot.next=null,A===null?r=wt:A.next=wt,A=ot;var Ot=t.alternate;Ot!==null&&(Ot=Ot.updateQueue,q=Ot.lastBaseUpdate,q!==A&&(q===null?Ot.firstBaseUpdate=wt:q.next=wt,Ot.lastBaseUpdate=ot))}if(r!==null){var It=a.baseState;A=0,Ot=wt=ot=null,q=r;do{var Ct=q.lane&-536870913,Mt=Ct!==q.lane;if(Mt?(ve&Ct)===Ct:(i&Ct)===Ct){Ct!==0&&Ct===za&&(Il=!0),Ot!==null&&(Ot=Ot.next={lane:0,tag:q.tag,payload:q.payload,callback:null,next:null});t:{var ne=t,ce=q;Ct=e;var ze=n;switch(ce.tag){case 1:if(ne=ce.payload,typeof ne=="function"){It=ne.call(ze,It,Ct);break t}It=ne;break t;case 3:ne.flags=ne.flags&-65537|128;case 0:if(ne=ce.payload,Ct=typeof ne=="function"?ne.call(ze,It,Ct):ne,Ct==null)break t;It=d({},It,Ct);break t;case 2:As=!0}}Ct=q.callback,Ct!==null&&(t.flags|=64,Mt&&(t.flags|=8192),Mt=a.callbacks,Mt===null?a.callbacks=[Ct]:Mt.push(Ct))}else Mt={lane:Ct,tag:q.tag,payload:q.payload,callback:q.callback,next:null},Ot===null?(wt=Ot=Mt,ot=It):Ot=Ot.next=Mt,A|=Ct;if(q=q.next,q===null){if(q=a.shared.pending,q===null)break;Mt=q,q=Mt.next,Mt.next=null,a.lastBaseUpdate=Mt,a.shared.pending=null}}while(!0);Ot===null&&(ot=It),a.baseState=ot,a.firstBaseUpdate=wt,a.lastBaseUpdate=Ot,r===null&&(a.shared.lanes=0),Ms|=A,t.lanes=A,t.memoizedState=It}}function Su(t,e){if(typeof t!="function")throw Error(c(191,t));t.call(e)}function wu(t,e){var n=t.callbacks;if(n!==null)for(t.callbacks=null,t=0;t<n.length;t++)Su(n[t],e)}var qa=y(null),Ro=y(0);function Ru(t,e){t=ss,H(Ro,t),H(qa,e),ss=t|e.baseLanes}function Ul(){H(Ro,ss),H(qa,qa.current)}function ql(){ss=Ro.current,O(qa),O(Ro)}var Xn=y(null),oi=null;function Rs(t){var e=t.alternate;H(en,en.current&1),H(Xn,t),oi===null&&(e===null||qa.current!==null||e.memoizedState!==null)&&(oi=t)}function Hl(t){H(en,en.current),H(Xn,t),oi===null&&(oi=t)}function Tu(t){t.tag===22?(H(en,en.current),H(Xn,t),oi===null&&(oi=t)):Ts()}function Ts(){H(en,en.current),H(Xn,Xn.current)}function Kn(t){O(Xn),oi===t&&(oi=null),O(en)}var en=y(0);function To(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||Wc(n)||Qc(n)))return e}else if(e.tag===19&&(e.memoizedProps.revealOrder==="forwards"||e.memoizedProps.revealOrder==="backwards"||e.memoizedProps.revealOrder==="unstable_legacy-backwards"||e.memoizedProps.revealOrder==="together")){if((e.flags&128)!==0)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Qi=0,he=null,Pe=null,rn=null,jo=!1,Ha=!1,ca=!1,Co=0,Dr=0,Ga=null,mf=0;function Ze(){throw Error(c(321))}function Gl(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Rn(t[n],e[n]))return!1;return!0}function Xl(t,e,n,i,a,r){return Qi=r,he=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,nt.H=t===null||t.memoizedState===null?ud:rc,ca=!1,r=n(i,a),ca=!1,Ha&&(r=Cu(e,n,i,a)),ju(t),r}function ju(t){nt.H=Pr;var e=Pe!==null&&Pe.next!==null;if(Qi=0,rn=Pe=he=null,jo=!1,Dr=0,Ga=null,e)throw Error(c(300));t===null||on||(t=t.dependencies,t!==null&&vo(t)&&(on=!0))}function Cu(t,e,n,i){he=t;var a=0;do{if(Ha&&(Ga=null),Dr=0,Ha=!1,25<=a)throw Error(c(301));if(a+=1,rn=Pe=null,t.updateQueue!=null){var r=t.updateQueue;r.lastEffect=null,r.events=null,r.stores=null,r.memoCache!=null&&(r.memoCache.index=0)}nt.H=dd,r=e(n,i)}while(Ha);return r}function gf(){var t=nt.H,e=t.useState()[0];return e=typeof e.then=="function"?Or(e):e,t=t.useState()[0],(Pe!==null?Pe.memoizedState:null)!==t&&(he.flags|=1024),e}function Kl(){var t=Co!==0;return Co=0,t}function Yl(t,e,n){e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~n}function Vl(t){if(jo){for(t=t.memoizedState;t!==null;){var e=t.queue;e!==null&&(e.pending=null),t=t.next}jo=!1}Qi=0,rn=Pe=he=null,Ha=!1,Dr=Co=0,Ga=null}function Nn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return rn===null?he.memoizedState=rn=t:rn=rn.next=t,rn}function nn(){if(Pe===null){var t=he.alternate;t=t!==null?t.memoizedState:null}else t=Pe.next;var e=rn===null?he.memoizedState:rn.next;if(e!==null)rn=e,Pe=t;else{if(t===null)throw he.alternate===null?Error(c(467)):Error(c(310));Pe=t,t={memoizedState:Pe.memoizedState,baseState:Pe.baseState,baseQueue:Pe.baseQueue,queue:Pe.queue,next:null},rn===null?he.memoizedState=rn=t:rn=rn.next=t}return rn}function Mo(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Or(t){var e=Dr;return Dr+=1,Ga===null&&(Ga=[]),t=vu(Ga,t,e),e=he,(rn===null?e.memoizedState:rn.next)===null&&(e=e.alternate,nt.H=e===null||e.memoizedState===null?ud:rc),t}function ko(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return Or(t);if(t.$$typeof===Q)return vn(t)}throw Error(c(438,String(t)))}function Wl(t){var e=null,n=he.updateQueue;if(n!==null&&(e=n.memoCache),e==null){var i=he.alternate;i!==null&&(i=i.updateQueue,i!==null&&(i=i.memoCache,i!=null&&(e={data:i.data.map(function(a){return a.slice()}),index:0})))}if(e==null&&(e={data:[],index:0}),n===null&&(n=Mo(),he.updateQueue=n),n.memoCache=e,n=e.data[e.index],n===void 0)for(n=e.data[e.index]=Array(t),i=0;i<t;i++)n[i]=yt;return e.index++,n}function Zi(t,e){return typeof e=="function"?e(t):e}function No(t){var e=nn();return Ql(e,Pe,t)}function Ql(t,e,n){var i=t.queue;if(i===null)throw Error(c(311));i.lastRenderedReducer=n;var a=t.baseQueue,r=i.pending;if(r!==null){if(a!==null){var A=a.next;a.next=r.next,r.next=A}e.baseQueue=a=r,i.pending=null}if(r=t.baseState,a===null)t.memoizedState=r;else{e=a.next;var q=A=null,ot=null,wt=e,Ot=!1;do{var It=wt.lane&-536870913;if(It!==wt.lane?(ve&It)===It:(Qi&It)===It){var Ct=wt.revertLane;if(Ct===0)ot!==null&&(ot=ot.next={lane:0,revertLane:0,gesture:null,action:wt.action,hasEagerState:wt.hasEagerState,eagerState:wt.eagerState,next:null}),It===za&&(Ot=!0);else if((Qi&Ct)===Ct){wt=wt.next,Ct===za&&(Ot=!0);continue}else It={lane:0,revertLane:wt.revertLane,gesture:null,action:wt.action,hasEagerState:wt.hasEagerState,eagerState:wt.eagerState,next:null},ot===null?(q=ot=It,A=r):ot=ot.next=It,he.lanes|=Ct,Ms|=Ct;It=wt.action,ca&&n(r,It),r=wt.hasEagerState?wt.eagerState:n(r,It)}else Ct={lane:It,revertLane:wt.revertLane,gesture:wt.gesture,action:wt.action,hasEagerState:wt.hasEagerState,eagerState:wt.eagerState,next:null},ot===null?(q=ot=Ct,A=r):ot=ot.next=Ct,he.lanes|=It,Ms|=It;wt=wt.next}while(wt!==null&&wt!==e);if(ot===null?A=r:ot.next=q,!Rn(r,t.memoizedState)&&(on=!0,Ot&&(n=Ba,n!==null)))throw n;t.memoizedState=r,t.baseState=A,t.baseQueue=ot,i.lastRenderedState=r}return a===null&&(i.lanes=0),[t.memoizedState,i.dispatch]}function Zl(t){var e=nn(),n=e.queue;if(n===null)throw Error(c(311));n.lastRenderedReducer=t;var i=n.dispatch,a=n.pending,r=e.memoizedState;if(a!==null){n.pending=null;var A=a=a.next;do r=t(r,A.action),A=A.next;while(A!==a);Rn(r,e.memoizedState)||(on=!0),e.memoizedState=r,e.baseQueue===null&&(e.baseState=r),n.lastRenderedState=r}return[r,i]}function Mu(t,e,n){var i=he,a=nn(),r=Ae;if(r){if(n===void 0)throw Error(c(407));n=n()}else n=e();var A=!Rn((Pe||a).memoizedState,n);if(A&&(a.memoizedState=n,on=!0),a=a.queue,tc(Du.bind(null,i,a,t),[t]),a.getSnapshot!==e||A||rn!==null&&rn.memoizedState.tag&1){if(i.flags|=2048,Xa(9,{destroy:void 0},Nu.bind(null,i,a,n,e),null),Ie===null)throw Error(c(349));r||(Qi&127)!==0||ku(i,e,n)}return n}function ku(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=he.updateQueue,e===null?(e=Mo(),he.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function Nu(t,e,n,i){e.value=n,e.getSnapshot=i,Ou(e)&&Lu(t)}function Du(t,e,n){return n(function(){Ou(e)&&Lu(t)})}function Ou(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Rn(t,n)}catch{return!0}}function Lu(t){var e=Me(t,2);e!==null&&In(e,t,2)}function Jl(t){var e=Nn();if(typeof t=="function"){var n=t;if(t=n(),ca){vt(!0);try{n()}finally{vt(!1)}}}return e.memoizedState=e.baseState=t,e.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Zi,lastRenderedState:t},e}function Pu(t,e,n,i){return t.baseState=n,Ql(t,Pe,typeof i=="function"?i:Zi)}function yf(t,e,n,i,a){if(Lo(t))throw Error(c(485));if(t=e.action,t!==null){var r={payload:a,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(A){r.listeners.push(A)}};nt.T!==null?n(!0):r.isTransition=!1,i(r),n=e.pending,n===null?(r.next=e.pending=r,Fu(e,r)):(r.next=n.next,e.pending=n.next=r)}}function Fu(t,e){var n=e.action,i=e.payload,a=t.state;if(e.isTransition){var r=nt.T,A={};nt.T=A;try{var q=n(a,i),ot=nt.S;ot!==null&&ot(A,q),zu(t,e,q)}catch(wt){$l(t,e,wt)}finally{r!==null&&A.types!==null&&(r.types=A.types),nt.T=r}}else try{r=n(a,i),zu(t,e,r)}catch(wt){$l(t,e,wt)}}function zu(t,e,n){n!==null&&typeof n=="object"&&typeof n.then=="function"?n.then(function(i){Bu(t,e,i)},function(i){return $l(t,e,i)}):Bu(t,e,n)}function Bu(t,e,n){e.status="fulfilled",e.value=n,Iu(e),t.state=n,e=t.pending,e!==null&&(n=e.next,n===e?t.pending=null:(n=n.next,e.next=n,Fu(t,n)))}function $l(t,e,n){var i=t.pending;if(t.pending=null,i!==null){i=i.next;do e.status="rejected",e.reason=n,Iu(e),e=e.next;while(e!==i)}t.action=null}function Iu(t){t=t.listeners;for(var e=0;e<t.length;e++)(0,t[e])()}function Uu(t,e){return e}function qu(t,e){if(Ae){var n=Ie.formState;if(n!==null){t:{var i=he;if(Ae){if(Xe){e:{for(var a=Xe,r=ri;a.nodeType!==8;){if(!r){a=null;break e}if(a=li(a.nextSibling),a===null){a=null;break e}}r=a.data,a=r==="F!"||r==="F"?a:null}if(a){Xe=li(a.nextSibling),i=a.data==="F!";break t}}_s(i)}i=!1}i&&(e=n[0])}}return n=Nn(),n.memoizedState=n.baseState=e,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Uu,lastRenderedState:e},n.queue=i,n=od.bind(null,he,i),i.dispatch=n,i=Jl(!1),r=ac.bind(null,he,!1,i.queue),i=Nn(),a={state:e,dispatch:null,action:t,pending:null},i.queue=a,n=yf.bind(null,he,a,r,n),a.dispatch=n,i.memoizedState=t,[e,n,!1]}function Hu(t){var e=nn();return Gu(e,Pe,t)}function Gu(t,e,n){if(e=Ql(t,e,Uu)[0],t=No(Zi)[0],typeof e=="object"&&e!==null&&typeof e.then=="function")try{var i=Or(e)}catch(A){throw A===Ia?Eo:A}else i=e;e=nn();var a=e.queue,r=a.dispatch;return n!==e.memoizedState&&(he.flags|=2048,Xa(9,{destroy:void 0},xf.bind(null,a,n),null)),[i,r,t]}function xf(t,e){t.action=e}function Xu(t){var e=nn(),n=Pe;if(n!==null)return Gu(e,n,t);nn(),e=e.memoizedState,n=nn();var i=n.queue.dispatch;return n.memoizedState=t,[e,i,!1]}function Xa(t,e,n,i){return t={tag:t,create:n,deps:i,inst:e,next:null},e=he.updateQueue,e===null&&(e=Mo(),he.updateQueue=e),n=e.lastEffect,n===null?e.lastEffect=t.next=t:(i=n.next,n.next=t,t.next=i,e.lastEffect=t),t}function Ku(){return nn().memoizedState}function Do(t,e,n,i){var a=Nn();he.flags|=t,a.memoizedState=Xa(1|e,{destroy:void 0},n,i===void 0?null:i)}function Oo(t,e,n,i){var a=nn();i=i===void 0?null:i;var r=a.memoizedState.inst;Pe!==null&&i!==null&&Gl(i,Pe.memoizedState.deps)?a.memoizedState=Xa(e,r,n,i):(he.flags|=t,a.memoizedState=Xa(1|e,r,n,i))}function Yu(t,e){Do(8390656,8,t,e)}function tc(t,e){Oo(2048,8,t,e)}function vf(t){he.flags|=4;var e=he.updateQueue;if(e===null)e=Mo(),he.updateQueue=e,e.events=[t];else{var n=e.events;n===null?e.events=[t]:n.push(t)}}function Vu(t){var e=nn().memoizedState;return vf({ref:e,nextImpl:t}),function(){if((je&2)!==0)throw Error(c(440));return e.impl.apply(void 0,arguments)}}function Wu(t,e){return Oo(4,2,t,e)}function Qu(t,e){return Oo(4,4,t,e)}function Zu(t,e){if(typeof e=="function"){t=t();var n=e(t);return function(){typeof n=="function"?n():e(null)}}if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Ju(t,e,n){n=n!=null?n.concat([t]):null,Oo(4,4,Zu.bind(null,e,t),n)}function ec(){}function $u(t,e){var n=nn();e=e===void 0?null:e;var i=n.memoizedState;return e!==null&&Gl(e,i[1])?i[0]:(n.memoizedState=[t,e],t)}function td(t,e){var n=nn();e=e===void 0?null:e;var i=n.memoizedState;if(e!==null&&Gl(e,i[1]))return i[0];if(i=t(),ca){vt(!0);try{t()}finally{vt(!1)}}return n.memoizedState=[i,e],i}function nc(t,e,n){return n===void 0||(Qi&1073741824)!==0&&(ve&261930)===0?t.memoizedState=e:(t.memoizedState=n,t=eh(),he.lanes|=t,Ms|=t,n)}function ed(t,e,n,i){return Rn(n,e)?n:qa.current!==null?(t=nc(t,n,i),Rn(t,e)||(on=!0),t):(Qi&42)===0||(Qi&1073741824)!==0&&(ve&261930)===0?(on=!0,t.memoizedState=n):(t=eh(),he.lanes|=t,Ms|=t,e)}function nd(t,e,n,i,a){var r=Y.p;Y.p=r!==0&&8>r?r:8;var A=nt.T,q={};nt.T=q,ac(t,!1,e,n);try{var ot=a(),wt=nt.S;if(wt!==null&&wt(q,ot),ot!==null&&typeof ot=="object"&&typeof ot.then=="function"){var Ot=pf(ot,i);Lr(t,e,Ot,Wn(t))}else Lr(t,e,i,Wn(t))}catch(It){Lr(t,e,{then:function(){},status:"rejected",reason:It},Wn())}finally{Y.p=r,A!==null&&q.types!==null&&(A.types=q.types),nt.T=A}}function bf(){}function ic(t,e,n,i){if(t.tag!==5)throw Error(c(476));var a=id(t).queue;nd(t,a,e,k,n===null?bf:function(){return sd(t),n(i)})}function id(t){var e=t.memoizedState;if(e!==null)return e;e={memoizedState:k,baseState:k,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Zi,lastRenderedState:k},next:null};var n={};return e.next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Zi,lastRenderedState:n},next:null},t.memoizedState=e,t=t.alternate,t!==null&&(t.memoizedState=e),e}function sd(t){var e=id(t);e.next===null&&(e=t.alternate.memoizedState),Lr(t,e.next.queue,{},Wn())}function sc(){return vn(Jr)}function ad(){return nn().memoizedState}function rd(){return nn().memoizedState}function _f(t){for(var e=t.return;e!==null;){switch(e.tag){case 24:case 3:var n=Wn();t=Ss(n);var i=ws(e,t,n);i!==null&&(In(i,e,n),Mr(i,e,n)),e={cache:Dl()},t.payload=e;return}e=e.return}}function Ef(t,e,n){var i=Wn();n={lane:i,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null},Lo(t)?ld(e,n):(n=Tn(t,e,n,i),n!==null&&(In(n,t,i),cd(n,e,i)))}function od(t,e,n){var i=Wn();Lr(t,e,n,i)}function Lr(t,e,n,i){var a={lane:i,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null};if(Lo(t))ld(e,a);else{var r=t.alternate;if(t.lanes===0&&(r===null||r.lanes===0)&&(r=e.lastRenderedReducer,r!==null))try{var A=e.lastRenderedState,q=r(A,n);if(a.hasEagerState=!0,a.eagerState=q,Rn(q,A))return Le(t,e,a,0),Ie===null&&de(),!1}catch{}if(n=Tn(t,e,a,i),n!==null)return In(n,t,i),cd(n,e,i),!0}return!1}function ac(t,e,n,i){if(i={lane:2,revertLane:Fc(),gesture:null,action:i,hasEagerState:!1,eagerState:null,next:null},Lo(t)){if(e)throw Error(c(479))}else e=Tn(t,n,i,2),e!==null&&In(e,t,2)}function Lo(t){var e=t.alternate;return t===he||e!==null&&e===he}function ld(t,e){Ha=jo=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function cd(t,e,n){if((n&4194048)!==0){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,Re(t,n)}}var Pr={readContext:vn,use:ko,useCallback:Ze,useContext:Ze,useEffect:Ze,useImperativeHandle:Ze,useLayoutEffect:Ze,useInsertionEffect:Ze,useMemo:Ze,useReducer:Ze,useRef:Ze,useState:Ze,useDebugValue:Ze,useDeferredValue:Ze,useTransition:Ze,useSyncExternalStore:Ze,useId:Ze,useHostTransitionStatus:Ze,useFormState:Ze,useActionState:Ze,useOptimistic:Ze,useMemoCache:Ze,useCacheRefresh:Ze};Pr.useEffectEvent=Ze;var ud={readContext:vn,use:ko,useCallback:function(t,e){return Nn().memoizedState=[t,e===void 0?null:e],t},useContext:vn,useEffect:Yu,useImperativeHandle:function(t,e,n){n=n!=null?n.concat([t]):null,Do(4194308,4,Zu.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Do(4194308,4,t,e)},useInsertionEffect:function(t,e){Do(4,2,t,e)},useMemo:function(t,e){var n=Nn();e=e===void 0?null:e;var i=t();if(ca){vt(!0);try{t()}finally{vt(!1)}}return n.memoizedState=[i,e],i},useReducer:function(t,e,n){var i=Nn();if(n!==void 0){var a=n(e);if(ca){vt(!0);try{n(e)}finally{vt(!1)}}}else a=e;return i.memoizedState=i.baseState=a,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:a},i.queue=t,t=t.dispatch=Ef.bind(null,he,t),[i.memoizedState,t]},useRef:function(t){var e=Nn();return t={current:t},e.memoizedState=t},useState:function(t){t=Jl(t);var e=t.queue,n=od.bind(null,he,e);return e.dispatch=n,[t.memoizedState,n]},useDebugValue:ec,useDeferredValue:function(t,e){var n=Nn();return nc(n,t,e)},useTransition:function(){var t=Jl(!1);return t=nd.bind(null,he,t.queue,!0,!1),Nn().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,e,n){var i=he,a=Nn();if(Ae){if(n===void 0)throw Error(c(407));n=n()}else{if(n=e(),Ie===null)throw Error(c(349));(ve&127)!==0||ku(i,e,n)}a.memoizedState=n;var r={value:n,getSnapshot:e};return a.queue=r,Yu(Du.bind(null,i,r,t),[t]),i.flags|=2048,Xa(9,{destroy:void 0},Nu.bind(null,i,r,n,e),null),n},useId:function(){var t=Nn(),e=Ie.identifierPrefix;if(Ae){var n=Mi,i=Ci;n=(i&~(1<<32-st(i)-1)).toString(32)+n,e="_"+e+"R_"+n,n=Co++,0<n&&(e+="H"+n.toString(32)),e+="_"}else n=mf++,e="_"+e+"r_"+n.toString(32)+"_";return t.memoizedState=e},useHostTransitionStatus:sc,useFormState:qu,useActionState:qu,useOptimistic:function(t){var e=Nn();e.memoizedState=e.baseState=t;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return e.queue=n,e=ac.bind(null,he,!0,n),n.dispatch=e,[t,e]},useMemoCache:Wl,useCacheRefresh:function(){return Nn().memoizedState=_f.bind(null,he)},useEffectEvent:function(t){var e=Nn(),n={impl:t};return e.memoizedState=n,function(){if((je&2)!==0)throw Error(c(440));return n.impl.apply(void 0,arguments)}}},rc={readContext:vn,use:ko,useCallback:$u,useContext:vn,useEffect:tc,useImperativeHandle:Ju,useInsertionEffect:Wu,useLayoutEffect:Qu,useMemo:td,useReducer:No,useRef:Ku,useState:function(){return No(Zi)},useDebugValue:ec,useDeferredValue:function(t,e){var n=nn();return ed(n,Pe.memoizedState,t,e)},useTransition:function(){var t=No(Zi)[0],e=nn().memoizedState;return[typeof t=="boolean"?t:Or(t),e]},useSyncExternalStore:Mu,useId:ad,useHostTransitionStatus:sc,useFormState:Hu,useActionState:Hu,useOptimistic:function(t,e){var n=nn();return Pu(n,Pe,t,e)},useMemoCache:Wl,useCacheRefresh:rd};rc.useEffectEvent=Vu;var dd={readContext:vn,use:ko,useCallback:$u,useContext:vn,useEffect:tc,useImperativeHandle:Ju,useInsertionEffect:Wu,useLayoutEffect:Qu,useMemo:td,useReducer:Zl,useRef:Ku,useState:function(){return Zl(Zi)},useDebugValue:ec,useDeferredValue:function(t,e){var n=nn();return Pe===null?nc(n,t,e):ed(n,Pe.memoizedState,t,e)},useTransition:function(){var t=Zl(Zi)[0],e=nn().memoizedState;return[typeof t=="boolean"?t:Or(t),e]},useSyncExternalStore:Mu,useId:ad,useHostTransitionStatus:sc,useFormState:Xu,useActionState:Xu,useOptimistic:function(t,e){var n=nn();return Pe!==null?Pu(n,Pe,t,e):(n.baseState=t,[t,n.queue.dispatch])},useMemoCache:Wl,useCacheRefresh:rd};dd.useEffectEvent=Vu;function oc(t,e,n,i){e=t.memoizedState,n=n(i,e),n=n==null?e:d({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var lc={enqueueSetState:function(t,e,n){t=t._reactInternals;var i=Wn(),a=Ss(i);a.payload=e,n!=null&&(a.callback=n),e=ws(t,a,i),e!==null&&(In(e,t,i),Mr(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var i=Wn(),a=Ss(i);a.tag=1,a.payload=e,n!=null&&(a.callback=n),e=ws(t,a,i),e!==null&&(In(e,t,i),Mr(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Wn(),i=Ss(n);i.tag=2,e!=null&&(i.callback=e),e=ws(t,i,n),e!==null&&(In(e,t,n),Mr(e,t,n))}};function hd(t,e,n,i,a,r,A){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(i,r,A):e.prototype&&e.prototype.isPureReactComponent?!s(n,i)||!s(a,r):!0}function fd(t,e,n,i){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,i),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,i),e.state!==t&&lc.enqueueReplaceState(e,e.state,null)}function ua(t,e){var n=e;if("ref"in e){n={};for(var i in e)i!=="ref"&&(n[i]=e[i])}if(t=t.defaultProps){n===e&&(n=d({},n));for(var a in t)n[a]===void 0&&(n[a]=t[a])}return n}function pd(t){ee(t)}function md(t){console.error(t)}function gd(t){ee(t)}function Po(t,e){try{var n=t.onUncaughtError;n(e.value,{componentStack:e.stack})}catch(i){setTimeout(function(){throw i})}}function yd(t,e,n){try{var i=t.onCaughtError;i(n.value,{componentStack:n.stack,errorBoundary:e.tag===1?e.stateNode:null})}catch(a){setTimeout(function(){throw a})}}function cc(t,e,n){return n=Ss(n),n.tag=3,n.payload={element:null},n.callback=function(){Po(t,e)},n}function xd(t){return t=Ss(t),t.tag=3,t}function vd(t,e,n,i){var a=n.type.getDerivedStateFromError;if(typeof a=="function"){var r=i.value;t.payload=function(){return a(r)},t.callback=function(){yd(e,n,i)}}var A=n.stateNode;A!==null&&typeof A.componentDidCatch=="function"&&(t.callback=function(){yd(e,n,i),typeof a!="function"&&(ks===null?ks=new Set([this]):ks.add(this));var q=i.stack;this.componentDidCatch(i.value,{componentStack:q!==null?q:""})})}function Af(t,e,n,i,a){if(n.flags|=32768,i!==null&&typeof i=="object"&&typeof i.then=="function"){if(e=n.alternate,e!==null&&Fa(e,n,a,!0),n=Xn.current,n!==null){switch(n.tag){case 31:case 13:return oi===null?Vo():n.alternate===null&&Je===0&&(Je=3),n.flags&=-257,n.flags|=65536,n.lanes=a,i===Ao?n.flags|=16384:(e=n.updateQueue,e===null?n.updateQueue=new Set([i]):e.add(i),Oc(t,i,a)),!1;case 22:return n.flags|=65536,i===Ao?n.flags|=16384:(e=n.updateQueue,e===null?(e={transitions:null,markerInstances:null,retryQueue:new Set([i])},n.updateQueue=e):(n=e.retryQueue,n===null?e.retryQueue=new Set([i]):n.add(i)),Oc(t,i,a)),!1}throw Error(c(435,n.tag))}return Oc(t,i,a),Vo(),!1}if(Ae)return e=Xn.current,e!==null?((e.flags&65536)===0&&(e.flags|=256),e.flags|=65536,e.lanes=a,i!==jl&&(t=Error(c(422),{cause:i}),wr(ni(t,n)))):(i!==jl&&(e=Error(c(423),{cause:i}),wr(ni(e,n))),t=t.current.alternate,t.flags|=65536,a&=-a,t.lanes|=a,i=ni(i,n),a=cc(t.stateNode,i,a),Bl(t,a),Je!==4&&(Je=2)),!1;var r=Error(c(520),{cause:i});if(r=ni(r,n),Gr===null?Gr=[r]:Gr.push(r),Je!==4&&(Je=2),e===null)return!0;i=ni(i,n),n=e;do{switch(n.tag){case 3:return n.flags|=65536,t=a&-a,n.lanes|=t,t=cc(n.stateNode,i,t),Bl(n,t),!1;case 1:if(e=n.type,r=n.stateNode,(n.flags&128)===0&&(typeof e.getDerivedStateFromError=="function"||r!==null&&typeof r.componentDidCatch=="function"&&(ks===null||!ks.has(r))))return n.flags|=65536,a&=-a,n.lanes|=a,a=xd(a),vd(a,t,n,i),Bl(n,a),!1}n=n.return}while(n!==null);return!1}var uc=Error(c(461)),on=!1;function bn(t,e,n,i){e.child=t===null?Au(e,null,n,i):la(e,t.child,n,i)}function bd(t,e,n,i,a){n=n.render;var r=e.ref;if("ref"in i){var A={};for(var q in i)q!=="ref"&&(A[q]=i[q])}else A=i;return sa(e),i=Xl(t,e,n,A,r,a),q=Kl(),t!==null&&!on?(Yl(t,e,a),Ji(t,e,a)):(Ae&&q&&Rl(e),e.flags|=1,bn(t,e,i,a),e.child)}function _d(t,e,n,i,a){if(t===null){var r=n.type;return typeof r=="function"&&!Al(r)&&r.defaultProps===void 0&&n.compare===null?(e.tag=15,e.type=r,Ed(t,e,r,i,a)):(t=yo(n.type,null,i,e,e.mode,a),t.ref=e.ref,t.return=e,e.child=t)}if(r=t.child,!xc(t,a)){var A=r.memoizedProps;if(n=n.compare,n=n!==null?n:s,n(A,i)&&t.ref===e.ref)return Ji(t,e,a)}return e.flags|=1,t=Ki(r,i),t.ref=e.ref,t.return=e,e.child=t}function Ed(t,e,n,i,a){if(t!==null){var r=t.memoizedProps;if(s(r,i)&&t.ref===e.ref)if(on=!1,e.pendingProps=i=r,xc(t,a))(t.flags&131072)!==0&&(on=!0);else return e.lanes=t.lanes,Ji(t,e,a)}return dc(t,e,n,i,a)}function Ad(t,e,n,i){var a=i.children,r=t!==null?t.memoizedState:null;if(t===null&&e.stateNode===null&&(e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),i.mode==="hidden"){if((e.flags&128)!==0){if(r=r!==null?r.baseLanes|n:n,t!==null){for(i=e.child=t.child,a=0;i!==null;)a=a|i.lanes|i.childLanes,i=i.sibling;i=a&~r}else i=0,e.child=null;return Sd(t,e,r,n,i)}if((n&536870912)!==0)e.memoizedState={baseLanes:0,cachePool:null},t!==null&&_o(e,r!==null?r.cachePool:null),r!==null?Ru(e,r):Ul(),Tu(e);else return i=e.lanes=536870912,Sd(t,e,r!==null?r.baseLanes|n:n,n,i)}else r!==null?(_o(e,r.cachePool),Ru(e,r),Ts(),e.memoizedState=null):(t!==null&&_o(e,null),Ul(),Ts());return bn(t,e,a,n),e.child}function Fr(t,e){return t!==null&&t.tag===22||e.stateNode!==null||(e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),e.sibling}function Sd(t,e,n,i,a){var r=Ll();return r=r===null?null:{parent:an._currentValue,pool:r},e.memoizedState={baseLanes:n,cachePool:r},t!==null&&_o(e,null),Ul(),Tu(e),t!==null&&Fa(t,e,i,!0),e.childLanes=a,null}function Fo(t,e){return e=Bo({mode:e.mode,children:e.children},t.mode),e.ref=t.ref,t.child=e,e.return=t,e}function wd(t,e,n){return la(e,t.child,null,n),t=Fo(e,e.pendingProps),t.flags|=2,Kn(e),e.memoizedState=null,t}function Sf(t,e,n){var i=e.pendingProps,a=(e.flags&128)!==0;if(e.flags&=-129,t===null){if(Ae){if(i.mode==="hidden")return t=Fo(e,i),e.lanes=536870912,Fr(null,t);if(Hl(e),(t=Xe)?(t=Fh(t,ri),t=t!==null&&t.data==="&"?t:null,t!==null&&(e.memoizedState={dehydrated:t,treeContext:vs!==null?{id:Ci,overflow:Mi}:null,retryLane:536870912,hydrationErrors:null},n=lu(t),n.return=e,e.child=n,xn=e,Xe=null)):t=null,t===null)throw _s(e);return e.lanes=536870912,null}return Fo(e,i)}var r=t.memoizedState;if(r!==null){var A=r.dehydrated;if(Hl(e),a)if(e.flags&256)e.flags&=-257,e=wd(t,e,n);else if(e.memoizedState!==null)e.child=t.child,e.flags|=128,e=null;else throw Error(c(558));else if(on||Fa(t,e,n,!1),a=(n&t.childLanes)!==0,on||a){if(i=Ie,i!==null&&(A=Be(i,n),A!==0&&A!==r.retryLane))throw r.retryLane=A,Me(t,A),In(i,t,A),uc;Vo(),e=wd(t,e,n)}else t=r.treeContext,Xe=li(A.nextSibling),xn=e,Ae=!0,bs=null,ri=!1,t!==null&&du(e,t),e=Fo(e,i),e.flags|=4096;return e}return t=Ki(t.child,{mode:i.mode,children:i.children}),t.ref=e.ref,e.child=t,t.return=e,t}function zo(t,e){var n=e.ref;if(n===null)t!==null&&t.ref!==null&&(e.flags|=4194816);else{if(typeof n!="function"&&typeof n!="object")throw Error(c(284));(t===null||t.ref!==n)&&(e.flags|=4194816)}}function dc(t,e,n,i,a){return sa(e),n=Xl(t,e,n,i,void 0,a),i=Kl(),t!==null&&!on?(Yl(t,e,a),Ji(t,e,a)):(Ae&&i&&Rl(e),e.flags|=1,bn(t,e,n,a),e.child)}function Rd(t,e,n,i,a,r){return sa(e),e.updateQueue=null,n=Cu(e,i,n,a),ju(t),i=Kl(),t!==null&&!on?(Yl(t,e,r),Ji(t,e,r)):(Ae&&i&&Rl(e),e.flags|=1,bn(t,e,n,r),e.child)}function Td(t,e,n,i,a){if(sa(e),e.stateNode===null){var r=Da,A=n.contextType;typeof A=="object"&&A!==null&&(r=vn(A)),r=new n(i,r),e.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,r.updater=lc,e.stateNode=r,r._reactInternals=e,r=e.stateNode,r.props=i,r.state=e.memoizedState,r.refs={},Fl(e),A=n.contextType,r.context=typeof A=="object"&&A!==null?vn(A):Da,r.state=e.memoizedState,A=n.getDerivedStateFromProps,typeof A=="function"&&(oc(e,n,A,i),r.state=e.memoizedState),typeof n.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(A=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),A!==r.state&&lc.enqueueReplaceState(r,r.state,null),Nr(e,i,r,a),kr(),r.state=e.memoizedState),typeof r.componentDidMount=="function"&&(e.flags|=4194308),i=!0}else if(t===null){r=e.stateNode;var q=e.memoizedProps,ot=ua(n,q);r.props=ot;var wt=r.context,Ot=n.contextType;A=Da,typeof Ot=="object"&&Ot!==null&&(A=vn(Ot));var It=n.getDerivedStateFromProps;Ot=typeof It=="function"||typeof r.getSnapshotBeforeUpdate=="function",q=e.pendingProps!==q,Ot||typeof r.UNSAFE_componentWillReceiveProps!="function"&&typeof r.componentWillReceiveProps!="function"||(q||wt!==A)&&fd(e,r,i,A),As=!1;var Ct=e.memoizedState;r.state=Ct,Nr(e,i,r,a),kr(),wt=e.memoizedState,q||Ct!==wt||As?(typeof It=="function"&&(oc(e,n,It,i),wt=e.memoizedState),(ot=As||hd(e,n,ot,i,Ct,wt,A))?(Ot||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount()),typeof r.componentDidMount=="function"&&(e.flags|=4194308)):(typeof r.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=i,e.memoizedState=wt),r.props=i,r.state=wt,r.context=A,i=ot):(typeof r.componentDidMount=="function"&&(e.flags|=4194308),i=!1)}else{r=e.stateNode,zl(t,e),A=e.memoizedProps,Ot=ua(n,A),r.props=Ot,It=e.pendingProps,Ct=r.context,wt=n.contextType,ot=Da,typeof wt=="object"&&wt!==null&&(ot=vn(wt)),q=n.getDerivedStateFromProps,(wt=typeof q=="function"||typeof r.getSnapshotBeforeUpdate=="function")||typeof r.UNSAFE_componentWillReceiveProps!="function"&&typeof r.componentWillReceiveProps!="function"||(A!==It||Ct!==ot)&&fd(e,r,i,ot),As=!1,Ct=e.memoizedState,r.state=Ct,Nr(e,i,r,a),kr();var Mt=e.memoizedState;A!==It||Ct!==Mt||As||t!==null&&t.dependencies!==null&&vo(t.dependencies)?(typeof q=="function"&&(oc(e,n,q,i),Mt=e.memoizedState),(Ot=As||hd(e,n,Ot,i,Ct,Mt,ot)||t!==null&&t.dependencies!==null&&vo(t.dependencies))?(wt||typeof r.UNSAFE_componentWillUpdate!="function"&&typeof r.componentWillUpdate!="function"||(typeof r.componentWillUpdate=="function"&&r.componentWillUpdate(i,Mt,ot),typeof r.UNSAFE_componentWillUpdate=="function"&&r.UNSAFE_componentWillUpdate(i,Mt,ot)),typeof r.componentDidUpdate=="function"&&(e.flags|=4),typeof r.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof r.componentDidUpdate!="function"||A===t.memoizedProps&&Ct===t.memoizedState||(e.flags|=4),typeof r.getSnapshotBeforeUpdate!="function"||A===t.memoizedProps&&Ct===t.memoizedState||(e.flags|=1024),e.memoizedProps=i,e.memoizedState=Mt),r.props=i,r.state=Mt,r.context=ot,i=Ot):(typeof r.componentDidUpdate!="function"||A===t.memoizedProps&&Ct===t.memoizedState||(e.flags|=4),typeof r.getSnapshotBeforeUpdate!="function"||A===t.memoizedProps&&Ct===t.memoizedState||(e.flags|=1024),i=!1)}return r=i,zo(t,e),i=(e.flags&128)!==0,r||i?(r=e.stateNode,n=i&&typeof n.getDerivedStateFromError!="function"?null:r.render(),e.flags|=1,t!==null&&i?(e.child=la(e,t.child,null,a),e.child=la(e,null,n,a)):bn(t,e,n,a),e.memoizedState=r.state,t=e.child):t=Ji(t,e,a),t}function jd(t,e,n,i){return na(),e.flags|=256,bn(t,e,n,i),e.child}var hc={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function fc(t){return{baseLanes:t,cachePool:yu()}}function pc(t,e,n){return t=t!==null?t.childLanes&~n:0,e&&(t|=Vn),t}function Cd(t,e,n){var i=e.pendingProps,a=!1,r=(e.flags&128)!==0,A;if((A=r)||(A=t!==null&&t.memoizedState===null?!1:(en.current&2)!==0),A&&(a=!0,e.flags&=-129),A=(e.flags&32)!==0,e.flags&=-33,t===null){if(Ae){if(a?Rs(e):Ts(),(t=Xe)?(t=Fh(t,ri),t=t!==null&&t.data!=="&"?t:null,t!==null&&(e.memoizedState={dehydrated:t,treeContext:vs!==null?{id:Ci,overflow:Mi}:null,retryLane:536870912,hydrationErrors:null},n=lu(t),n.return=e,e.child=n,xn=e,Xe=null)):t=null,t===null)throw _s(e);return Qc(t)?e.lanes=32:e.lanes=536870912,null}var q=i.children;return i=i.fallback,a?(Ts(),a=e.mode,q=Bo({mode:"hidden",children:q},a),i=ea(i,a,n,null),q.return=e,i.return=e,q.sibling=i,e.child=q,i=e.child,i.memoizedState=fc(n),i.childLanes=pc(t,A,n),e.memoizedState=hc,Fr(null,i)):(Rs(e),mc(e,q))}var ot=t.memoizedState;if(ot!==null&&(q=ot.dehydrated,q!==null)){if(r)e.flags&256?(Rs(e),e.flags&=-257,e=gc(t,e,n)):e.memoizedState!==null?(Ts(),e.child=t.child,e.flags|=128,e=null):(Ts(),q=i.fallback,a=e.mode,i=Bo({mode:"visible",children:i.children},a),q=ea(q,a,n,null),q.flags|=2,i.return=e,q.return=e,i.sibling=q,e.child=i,la(e,t.child,null,n),i=e.child,i.memoizedState=fc(n),i.childLanes=pc(t,A,n),e.memoizedState=hc,e=Fr(null,i));else if(Rs(e),Qc(q)){if(A=q.nextSibling&&q.nextSibling.dataset,A)var wt=A.dgst;A=wt,i=Error(c(419)),i.stack="",i.digest=A,wr({value:i,source:null,stack:null}),e=gc(t,e,n)}else if(on||Fa(t,e,n,!1),A=(n&t.childLanes)!==0,on||A){if(A=Ie,A!==null&&(i=Be(A,n),i!==0&&i!==ot.retryLane))throw ot.retryLane=i,Me(t,i),In(A,t,i),uc;Wc(q)||Vo(),e=gc(t,e,n)}else Wc(q)?(e.flags|=192,e.child=t.child,e=null):(t=ot.treeContext,Xe=li(q.nextSibling),xn=e,Ae=!0,bs=null,ri=!1,t!==null&&du(e,t),e=mc(e,i.children),e.flags|=4096);return e}return a?(Ts(),q=i.fallback,a=e.mode,ot=t.child,wt=ot.sibling,i=Ki(ot,{mode:"hidden",children:i.children}),i.subtreeFlags=ot.subtreeFlags&65011712,wt!==null?q=Ki(wt,q):(q=ea(q,a,n,null),q.flags|=2),q.return=e,i.return=e,i.sibling=q,e.child=i,Fr(null,i),i=e.child,q=t.child.memoizedState,q===null?q=fc(n):(a=q.cachePool,a!==null?(ot=an._currentValue,a=a.parent!==ot?{parent:ot,pool:ot}:a):a=yu(),q={baseLanes:q.baseLanes|n,cachePool:a}),i.memoizedState=q,i.childLanes=pc(t,A,n),e.memoizedState=hc,Fr(t.child,i)):(Rs(e),n=t.child,t=n.sibling,n=Ki(n,{mode:"visible",children:i.children}),n.return=e,n.sibling=null,t!==null&&(A=e.deletions,A===null?(e.deletions=[t],e.flags|=16):A.push(t)),e.child=n,e.memoizedState=null,n)}function mc(t,e){return e=Bo({mode:"visible",children:e},t.mode),e.return=t,t.child=e}function Bo(t,e){return t=Gn(22,t,null,e),t.lanes=0,t}function gc(t,e,n){return la(e,t.child,null,n),t=mc(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function Md(t,e,n){t.lanes|=e;var i=t.alternate;i!==null&&(i.lanes|=e),kl(t.return,e,n)}function yc(t,e,n,i,a,r){var A=t.memoizedState;A===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:a,treeForkCount:r}:(A.isBackwards=e,A.rendering=null,A.renderingStartTime=0,A.last=i,A.tail=n,A.tailMode=a,A.treeForkCount=r)}function kd(t,e,n){var i=e.pendingProps,a=i.revealOrder,r=i.tail;i=i.children;var A=en.current,q=(A&2)!==0;if(q?(A=A&1|2,e.flags|=128):A&=1,H(en,A),bn(t,e,i,n),i=Ae?Sr:0,!q&&t!==null&&(t.flags&128)!==0)t:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Md(t,n,e);else if(t.tag===19)Md(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break t;for(;t.sibling===null;){if(t.return===null||t.return===e)break t;t=t.return}t.sibling.return=t.return,t=t.sibling}switch(a){case"forwards":for(n=e.child,a=null;n!==null;)t=n.alternate,t!==null&&To(t)===null&&(a=n),n=n.sibling;n=a,n===null?(a=e.child,e.child=null):(a=n.sibling,n.sibling=null),yc(e,!1,a,n,r,i);break;case"backwards":case"unstable_legacy-backwards":for(n=null,a=e.child,e.child=null;a!==null;){if(t=a.alternate,t!==null&&To(t)===null){e.child=a;break}t=a.sibling,a.sibling=n,n=a,a=t}yc(e,!0,n,null,r,i);break;case"together":yc(e,!1,null,null,void 0,i);break;default:e.memoizedState=null}return e.child}function Ji(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Ms|=e.lanes,(n&e.childLanes)===0)if(t!==null){if(Fa(t,e,n,!1),(n&e.childLanes)===0)return null}else return null;if(t!==null&&e.child!==t.child)throw Error(c(153));if(e.child!==null){for(t=e.child,n=Ki(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Ki(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function xc(t,e){return(t.lanes&e)!==0?!0:(t=t.dependencies,!!(t!==null&&vo(t)))}function wf(t,e,n){switch(e.tag){case 3:z(e,e.stateNode.containerInfo),Es(e,an,t.memoizedState.cache),na();break;case 27:case 5:G(e);break;case 4:z(e,e.stateNode.containerInfo);break;case 10:Es(e,e.type,e.memoizedProps.value);break;case 31:if(e.memoizedState!==null)return e.flags|=128,Hl(e),null;break;case 13:var i=e.memoizedState;if(i!==null)return i.dehydrated!==null?(Rs(e),e.flags|=128,null):(n&e.child.childLanes)!==0?Cd(t,e,n):(Rs(e),t=Ji(t,e,n),t!==null?t.sibling:null);Rs(e);break;case 19:var a=(t.flags&128)!==0;if(i=(n&e.childLanes)!==0,i||(Fa(t,e,n,!1),i=(n&e.childLanes)!==0),a){if(i)return kd(t,e,n);e.flags|=128}if(a=e.memoizedState,a!==null&&(a.rendering=null,a.tail=null,a.lastEffect=null),H(en,en.current),i)break;return null;case 22:return e.lanes=0,Ad(t,e,n,e.pendingProps);case 24:Es(e,an,t.memoizedState.cache)}return Ji(t,e,n)}function Nd(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps)on=!0;else{if(!xc(t,n)&&(e.flags&128)===0)return on=!1,wf(t,e,n);on=(t.flags&131072)!==0}else on=!1,Ae&&(e.flags&1048576)!==0&&uu(e,Sr,e.index);switch(e.lanes=0,e.tag){case 16:t:{var i=e.pendingProps;if(t=ra(e.elementType),e.type=t,typeof t=="function")Al(t)?(i=ua(t,i),e.tag=1,e=Td(null,e,t,i,n)):(e.tag=0,e=dc(null,e,t,i,n));else{if(t!=null){var a=t.$$typeof;if(a===V){e.tag=11,e=bd(null,e,t,i,n);break t}else if(a===$){e.tag=14,e=_d(null,e,t,i,n);break t}}throw e=Ft(t)||t,Error(c(306,e,""))}}return e;case 0:return dc(t,e,e.type,e.pendingProps,n);case 1:return i=e.type,a=ua(i,e.pendingProps),Td(t,e,i,a,n);case 3:t:{if(z(e,e.stateNode.containerInfo),t===null)throw Error(c(387));i=e.pendingProps;var r=e.memoizedState;a=r.element,zl(t,e),Nr(e,i,null,n);var A=e.memoizedState;if(i=A.cache,Es(e,an,i),i!==r.cache&&Nl(e,[an],n,!0),kr(),i=A.element,r.isDehydrated)if(r={element:i,isDehydrated:!1,cache:A.cache},e.updateQueue.baseState=r,e.memoizedState=r,e.flags&256){e=jd(t,e,i,n);break t}else if(i!==a){a=ni(Error(c(424)),e),wr(a),e=jd(t,e,i,n);break t}else for(t=e.stateNode.containerInfo,t.nodeType===9?t=t.body:t=t.nodeName==="HTML"?t.ownerDocument.body:t,Xe=li(t.firstChild),xn=e,Ae=!0,bs=null,ri=!0,n=Au(e,null,i,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(na(),i===a){e=Ji(t,e,n);break t}bn(t,e,i,n)}e=e.child}return e;case 26:return zo(t,e),t===null?(n=Hh(e.type,null,e.pendingProps,null))?e.memoizedState=n:Ae||(n=e.type,t=e.pendingProps,i=el(m.current).createElement(n),i[qe]=e,i[$e]=t,_n(i,n,t),tn(i),e.stateNode=i):e.memoizedState=Hh(e.type,t.memoizedProps,e.pendingProps,t.memoizedState),null;case 27:return G(e),t===null&&Ae&&(i=e.stateNode=Ih(e.type,e.pendingProps,m.current),xn=e,ri=!0,a=Xe,Ls(e.type)?(Zc=a,Xe=li(i.firstChild)):Xe=a),bn(t,e,e.pendingProps.children,n),zo(t,e),t===null&&(e.flags|=4194304),e.child;case 5:return t===null&&Ae&&((a=i=Xe)&&(i=ep(i,e.type,e.pendingProps,ri),i!==null?(e.stateNode=i,xn=e,Xe=li(i.firstChild),ri=!1,a=!0):a=!1),a||_s(e)),G(e),a=e.type,r=e.pendingProps,A=t!==null?t.memoizedProps:null,i=r.children,Kc(a,r)?i=null:A!==null&&Kc(a,A)&&(e.flags|=32),e.memoizedState!==null&&(a=Xl(t,e,gf,null,null,n),Jr._currentValue=a),zo(t,e),bn(t,e,i,n),e.child;case 6:return t===null&&Ae&&((t=n=Xe)&&(n=np(n,e.pendingProps,ri),n!==null?(e.stateNode=n,xn=e,Xe=null,t=!0):t=!1),t||_s(e)),null;case 13:return Cd(t,e,n);case 4:return z(e,e.stateNode.containerInfo),i=e.pendingProps,t===null?e.child=la(e,null,i,n):bn(t,e,i,n),e.child;case 11:return bd(t,e,e.type,e.pendingProps,n);case 7:return bn(t,e,e.pendingProps,n),e.child;case 8:return bn(t,e,e.pendingProps.children,n),e.child;case 12:return bn(t,e,e.pendingProps.children,n),e.child;case 10:return i=e.pendingProps,Es(e,e.type,i.value),bn(t,e,i.children,n),e.child;case 9:return a=e.type._context,i=e.pendingProps.children,sa(e),a=vn(a),i=i(a),e.flags|=1,bn(t,e,i,n),e.child;case 14:return _d(t,e,e.type,e.pendingProps,n);case 15:return Ed(t,e,e.type,e.pendingProps,n);case 19:return kd(t,e,n);case 31:return Sf(t,e,n);case 22:return Ad(t,e,n,e.pendingProps);case 24:return sa(e),i=vn(an),t===null?(a=Ll(),a===null&&(a=Ie,r=Dl(),a.pooledCache=r,r.refCount++,r!==null&&(a.pooledCacheLanes|=n),a=r),e.memoizedState={parent:i,cache:a},Fl(e),Es(e,an,a)):((t.lanes&n)!==0&&(zl(t,e),Nr(e,null,null,n),kr()),a=t.memoizedState,r=e.memoizedState,a.parent!==i?(a={parent:i,cache:i},e.memoizedState=a,e.lanes===0&&(e.memoizedState=e.updateQueue.baseState=a),Es(e,an,i)):(i=r.cache,Es(e,an,i),i!==a.cache&&Nl(e,[an],n,!0))),bn(t,e,e.pendingProps.children,n),e.child;case 29:throw e.pendingProps}throw Error(c(156,e.tag))}function $i(t){t.flags|=4}function vc(t,e,n,i,a){if((e=(t.mode&32)!==0)&&(e=!1),e){if(t.flags|=16777216,(a&335544128)===a)if(t.stateNode.complete)t.flags|=8192;else if(ah())t.flags|=8192;else throw oa=Ao,Pl}else t.flags&=-16777217}function Dd(t,e){if(e.type!=="stylesheet"||(e.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!Vh(e))if(ah())t.flags|=8192;else throw oa=Ao,Pl}function Io(t,e){e!==null&&(t.flags|=4),t.flags&16384&&(e=t.tag!==22?Di():536870912,t.lanes|=e,Wa|=e)}function zr(t,e){if(!Ae)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:i.sibling=null}}function Ke(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,i=0;if(e)for(var a=t.child;a!==null;)n|=a.lanes|a.childLanes,i|=a.subtreeFlags&65011712,i|=a.flags&65011712,a.return=t,a=a.sibling;else for(a=t.child;a!==null;)n|=a.lanes|a.childLanes,i|=a.subtreeFlags,i|=a.flags,a.return=t,a=a.sibling;return t.subtreeFlags|=i,t.childLanes=n,e}function Rf(t,e,n){var i=e.pendingProps;switch(Tl(e),e.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ke(e),null;case 1:return Ke(e),null;case 3:return n=e.stateNode,i=null,t!==null&&(i=t.memoizedState.cache),e.memoizedState.cache!==i&&(e.flags|=2048),Wi(an),W(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(t===null||t.child===null)&&(Pa(e)?$i(e):t===null||t.memoizedState.isDehydrated&&(e.flags&256)===0||(e.flags|=1024,Cl())),Ke(e),null;case 26:var a=e.type,r=e.memoizedState;return t===null?($i(e),r!==null?(Ke(e),Dd(e,r)):(Ke(e),vc(e,a,null,i,n))):r?r!==t.memoizedState?($i(e),Ke(e),Dd(e,r)):(Ke(e),e.flags&=-16777217):(t=t.memoizedProps,t!==i&&$i(e),Ke(e),vc(e,a,t,i,n)),null;case 27:if(it(e),n=m.current,a=e.type,t!==null&&e.stateNode!=null)t.memoizedProps!==i&&$i(e);else{if(!i){if(e.stateNode===null)throw Error(c(166));return Ke(e),null}t=J.current,Pa(e)?hu(e):(t=Ih(a,i,n),e.stateNode=t,$i(e))}return Ke(e),null;case 5:if(it(e),a=e.type,t!==null&&e.stateNode!=null)t.memoizedProps!==i&&$i(e);else{if(!i){if(e.stateNode===null)throw Error(c(166));return Ke(e),null}if(r=J.current,Pa(e))hu(e);else{var A=el(m.current);switch(r){case 1:r=A.createElementNS("http://www.w3.org/2000/svg",a);break;case 2:r=A.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;default:switch(a){case"svg":r=A.createElementNS("http://www.w3.org/2000/svg",a);break;case"math":r=A.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;case"script":r=A.createElement("div"),r.innerHTML="<script><\/script>",r=r.removeChild(r.firstChild);break;case"select":r=typeof i.is=="string"?A.createElement("select",{is:i.is}):A.createElement("select"),i.multiple?r.multiple=!0:i.size&&(r.size=i.size);break;default:r=typeof i.is=="string"?A.createElement(a,{is:i.is}):A.createElement(a)}}r[qe]=e,r[$e]=i;t:for(A=e.child;A!==null;){if(A.tag===5||A.tag===6)r.appendChild(A.stateNode);else if(A.tag!==4&&A.tag!==27&&A.child!==null){A.child.return=A,A=A.child;continue}if(A===e)break t;for(;A.sibling===null;){if(A.return===null||A.return===e)break t;A=A.return}A.sibling.return=A.return,A=A.sibling}e.stateNode=r;t:switch(_n(r,a,i),a){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break t;case"img":i=!0;break t;default:i=!1}i&&$i(e)}}return Ke(e),vc(e,e.type,t===null?null:t.memoizedProps,e.pendingProps,n),null;case 6:if(t&&e.stateNode!=null)t.memoizedProps!==i&&$i(e);else{if(typeof i!="string"&&e.stateNode===null)throw Error(c(166));if(t=m.current,Pa(e)){if(t=e.stateNode,n=e.memoizedProps,i=null,a=xn,a!==null)switch(a.tag){case 27:case 5:i=a.memoizedProps}t[qe]=e,t=!!(t.nodeValue===n||i!==null&&i.suppressHydrationWarning===!0||Ch(t.nodeValue,n)),t||_s(e,!0)}else t=el(t).createTextNode(i),t[qe]=e,e.stateNode=t}return Ke(e),null;case 31:if(n=e.memoizedState,t===null||t.memoizedState!==null){if(i=Pa(e),n!==null){if(t===null){if(!i)throw Error(c(318));if(t=e.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(c(557));t[qe]=e}else na(),(e.flags&128)===0&&(e.memoizedState=null),e.flags|=4;Ke(e),t=!1}else n=Cl(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=n),t=!0;if(!t)return e.flags&256?(Kn(e),e):(Kn(e),null);if((e.flags&128)!==0)throw Error(c(558))}return Ke(e),null;case 13:if(i=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(a=Pa(e),i!==null&&i.dehydrated!==null){if(t===null){if(!a)throw Error(c(318));if(a=e.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(c(317));a[qe]=e}else na(),(e.flags&128)===0&&(e.memoizedState=null),e.flags|=4;Ke(e),a=!1}else a=Cl(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=a),a=!0;if(!a)return e.flags&256?(Kn(e),e):(Kn(e),null)}return Kn(e),(e.flags&128)!==0?(e.lanes=n,e):(n=i!==null,t=t!==null&&t.memoizedState!==null,n&&(i=e.child,a=null,i.alternate!==null&&i.alternate.memoizedState!==null&&i.alternate.memoizedState.cachePool!==null&&(a=i.alternate.memoizedState.cachePool.pool),r=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(r=i.memoizedState.cachePool.pool),r!==a&&(i.flags|=2048)),n!==t&&n&&(e.child.flags|=8192),Io(e,e.updateQueue),Ke(e),null);case 4:return W(),t===null&&Uc(e.stateNode.containerInfo),Ke(e),null;case 10:return Wi(e.type),Ke(e),null;case 19:if(O(en),i=e.memoizedState,i===null)return Ke(e),null;if(a=(e.flags&128)!==0,r=i.rendering,r===null)if(a)zr(i,!1);else{if(Je!==0||t!==null&&(t.flags&128)!==0)for(t=e.child;t!==null;){if(r=To(t),r!==null){for(e.flags|=128,zr(i,!1),t=r.updateQueue,e.updateQueue=t,Io(e,t),e.subtreeFlags=0,t=n,n=e.child;n!==null;)ou(n,t),n=n.sibling;return H(en,en.current&1|2),Ae&&Yi(e,i.treeForkCount),e.child}t=t.sibling}i.tail!==null&&oe()>Xo&&(e.flags|=128,a=!0,zr(i,!1),e.lanes=4194304)}else{if(!a)if(t=To(r),t!==null){if(e.flags|=128,a=!0,t=t.updateQueue,e.updateQueue=t,Io(e,t),zr(i,!0),i.tail===null&&i.tailMode==="hidden"&&!r.alternate&&!Ae)return Ke(e),null}else 2*oe()-i.renderingStartTime>Xo&&n!==536870912&&(e.flags|=128,a=!0,zr(i,!1),e.lanes=4194304);i.isBackwards?(r.sibling=e.child,e.child=r):(t=i.last,t!==null?t.sibling=r:e.child=r,i.last=r)}return i.tail!==null?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=oe(),t.sibling=null,n=en.current,H(en,a?n&1|2:n&1),Ae&&Yi(e,i.treeForkCount),t):(Ke(e),null);case 22:case 23:return Kn(e),ql(),i=e.memoizedState!==null,t!==null?t.memoizedState!==null!==i&&(e.flags|=8192):i&&(e.flags|=8192),i?(n&536870912)!==0&&(e.flags&128)===0&&(Ke(e),e.subtreeFlags&6&&(e.flags|=8192)):Ke(e),n=e.updateQueue,n!==null&&Io(e,n.retryQueue),n=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(n=t.memoizedState.cachePool.pool),i=null,e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(i=e.memoizedState.cachePool.pool),i!==n&&(e.flags|=2048),t!==null&&O(aa),null;case 24:return n=null,t!==null&&(n=t.memoizedState.cache),e.memoizedState.cache!==n&&(e.flags|=2048),Wi(an),Ke(e),null;case 25:return null;case 30:return null}throw Error(c(156,e.tag))}function Tf(t,e){switch(Tl(e),e.tag){case 1:return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Wi(an),W(),t=e.flags,(t&65536)!==0&&(t&128)===0?(e.flags=t&-65537|128,e):null;case 26:case 27:case 5:return it(e),null;case 31:if(e.memoizedState!==null){if(Kn(e),e.alternate===null)throw Error(c(340));na()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 13:if(Kn(e),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(c(340));na()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return O(en),null;case 4:return W(),null;case 10:return Wi(e.type),null;case 22:case 23:return Kn(e),ql(),t!==null&&O(aa),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 24:return Wi(an),null;case 25:return null;default:return null}}function Od(t,e){switch(Tl(e),e.tag){case 3:Wi(an),W();break;case 26:case 27:case 5:it(e);break;case 4:W();break;case 31:e.memoizedState!==null&&Kn(e);break;case 13:Kn(e);break;case 19:O(en);break;case 10:Wi(e.type);break;case 22:case 23:Kn(e),ql(),t!==null&&O(aa);break;case 24:Wi(an)}}function Br(t,e){try{var n=e.updateQueue,i=n!==null?n.lastEffect:null;if(i!==null){var a=i.next;n=a;do{if((n.tag&t)===t){i=void 0;var r=n.create,A=n.inst;i=r(),A.destroy=i}n=n.next}while(n!==a)}}catch(q){De(e,e.return,q)}}function js(t,e,n){try{var i=e.updateQueue,a=i!==null?i.lastEffect:null;if(a!==null){var r=a.next;i=r;do{if((i.tag&t)===t){var A=i.inst,q=A.destroy;if(q!==void 0){A.destroy=void 0,a=e;var ot=n,wt=q;try{wt()}catch(Ot){De(a,ot,Ot)}}}i=i.next}while(i!==r)}}catch(Ot){De(e,e.return,Ot)}}function Ld(t){var e=t.updateQueue;if(e!==null){var n=t.stateNode;try{wu(e,n)}catch(i){De(t,t.return,i)}}}function Pd(t,e,n){n.props=ua(t.type,t.memoizedProps),n.state=t.memoizedState;try{n.componentWillUnmount()}catch(i){De(t,e,i)}}function Ir(t,e){try{var n=t.ref;if(n!==null){switch(t.tag){case 26:case 27:case 5:var i=t.stateNode;break;case 30:i=t.stateNode;break;default:i=t.stateNode}typeof n=="function"?t.refCleanup=n(i):n.current=i}}catch(a){De(t,e,a)}}function ki(t,e){var n=t.ref,i=t.refCleanup;if(n!==null)if(typeof i=="function")try{i()}catch(a){De(t,e,a)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof n=="function")try{n(null)}catch(a){De(t,e,a)}else n.current=null}function Fd(t){var e=t.type,n=t.memoizedProps,i=t.stateNode;try{t:switch(e){case"button":case"input":case"select":case"textarea":n.autoFocus&&i.focus();break t;case"img":n.src?i.src=n.src:n.srcSet&&(i.srcset=n.srcSet)}}catch(a){De(t,t.return,a)}}function bc(t,e,n){try{var i=t.stateNode;Wf(i,t.type,n,e),i[$e]=e}catch(a){De(t,t.return,a)}}function zd(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&Ls(t.type)||t.tag===4}function _c(t){t:for(;;){for(;t.sibling===null;){if(t.return===null||zd(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&Ls(t.type)||t.flags&2||t.child===null||t.tag===4)continue t;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Ec(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n).insertBefore(t,e):(e=n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,e.appendChild(t),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Ln));else if(i!==4&&(i===27&&Ls(t.type)&&(n=t.stateNode,e=null),t=t.child,t!==null))for(Ec(t,e,n),t=t.sibling;t!==null;)Ec(t,e,n),t=t.sibling}function Uo(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(i!==4&&(i===27&&Ls(t.type)&&(n=t.stateNode),t=t.child,t!==null))for(Uo(t,e,n),t=t.sibling;t!==null;)Uo(t,e,n),t=t.sibling}function Bd(t){var e=t.stateNode,n=t.memoizedProps;try{for(var i=t.type,a=e.attributes;a.length;)e.removeAttributeNode(a[0]);_n(e,i,n),e[qe]=t,e[$e]=n}catch(r){De(t,t.return,r)}}var ts=!1,ln=!1,Ac=!1,Id=typeof WeakSet=="function"?WeakSet:Set,mn=null;function jf(t,e){if(t=t.containerInfo,Gc=ll,t=j(t),P(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else t:{n=(n=t.ownerDocument)&&n.defaultView||window;var i=n.getSelection&&n.getSelection();if(i&&i.rangeCount!==0){n=i.anchorNode;var a=i.anchorOffset,r=i.focusNode;i=i.focusOffset;try{n.nodeType,r.nodeType}catch{n=null;break t}var A=0,q=-1,ot=-1,wt=0,Ot=0,It=t,Ct=null;e:for(;;){for(var Mt;It!==n||a!==0&&It.nodeType!==3||(q=A+a),It!==r||i!==0&&It.nodeType!==3||(ot=A+i),It.nodeType===3&&(A+=It.nodeValue.length),(Mt=It.firstChild)!==null;)Ct=It,It=Mt;for(;;){if(It===t)break e;if(Ct===n&&++wt===a&&(q=A),Ct===r&&++Ot===i&&(ot=A),(Mt=It.nextSibling)!==null)break;It=Ct,Ct=It.parentNode}It=Mt}n=q===-1||ot===-1?null:{start:q,end:ot}}else n=null}n=n||{start:0,end:0}}else n=null;for(Xc={focusedElem:t,selectionRange:n},ll=!1,mn=e;mn!==null;)if(e=mn,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,mn=t;else for(;mn!==null;){switch(e=mn,r=e.alternate,t=e.flags,e.tag){case 0:if((t&4)!==0&&(t=e.updateQueue,t=t!==null?t.events:null,t!==null))for(n=0;n<t.length;n++)a=t[n],a.ref.impl=a.nextImpl;break;case 11:case 15:break;case 1:if((t&1024)!==0&&r!==null){t=void 0,n=e,a=r.memoizedProps,r=r.memoizedState,i=n.stateNode;try{var ne=ua(n.type,a);t=i.getSnapshotBeforeUpdate(ne,r),i.__reactInternalSnapshotBeforeUpdate=t}catch(ce){De(n,n.return,ce)}}break;case 3:if((t&1024)!==0){if(t=e.stateNode.containerInfo,n=t.nodeType,n===9)Vc(t);else if(n===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":Vc(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(c(163))}if(t=e.sibling,t!==null){t.return=e.return,mn=t;break}mn=e.return}}function Ud(t,e,n){var i=n.flags;switch(n.tag){case 0:case 11:case 15:ns(t,n),i&4&&Br(5,n);break;case 1:if(ns(t,n),i&4)if(t=n.stateNode,e===null)try{t.componentDidMount()}catch(A){De(n,n.return,A)}else{var a=ua(n.type,e.memoizedProps);e=e.memoizedState;try{t.componentDidUpdate(a,e,t.__reactInternalSnapshotBeforeUpdate)}catch(A){De(n,n.return,A)}}i&64&&Ld(n),i&512&&Ir(n,n.return);break;case 3:if(ns(t,n),i&64&&(t=n.updateQueue,t!==null)){if(e=null,n.child!==null)switch(n.child.tag){case 27:case 5:e=n.child.stateNode;break;case 1:e=n.child.stateNode}try{wu(t,e)}catch(A){De(n,n.return,A)}}break;case 27:e===null&&i&4&&Bd(n);case 26:case 5:ns(t,n),e===null&&i&4&&Fd(n),i&512&&Ir(n,n.return);break;case 12:ns(t,n);break;case 31:ns(t,n),i&4&&Gd(t,n);break;case 13:ns(t,n),i&4&&Xd(t,n),i&64&&(t=n.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(n=Ff.bind(null,n),ip(t,n))));break;case 22:if(i=n.memoizedState!==null||ts,!i){e=e!==null&&e.memoizedState!==null||ln,a=ts;var r=ln;ts=i,(ln=e)&&!r?is(t,n,(n.subtreeFlags&8772)!==0):ns(t,n),ts=a,ln=r}break;case 30:break;default:ns(t,n)}}function qd(t){var e=t.alternate;e!==null&&(t.alternate=null,qd(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&fa(e)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var Ve=null,Pn=!1;function es(t,e,n){for(n=n.child;n!==null;)Hd(t,e,n),n=n.sibling}function Hd(t,e,n){if(Bt&&typeof Bt.onCommitFiberUnmount=="function")try{Bt.onCommitFiberUnmount(Qn,n)}catch{}switch(n.tag){case 26:ln||ki(n,e),es(t,e,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode,n.parentNode.removeChild(n));break;case 27:ln||ki(n,e);var i=Ve,a=Pn;Ls(n.type)&&(Ve=n.stateNode,Pn=!1),es(t,e,n),Wr(n.stateNode),Ve=i,Pn=a;break;case 5:ln||ki(n,e);case 6:if(i=Ve,a=Pn,Ve=null,es(t,e,n),Ve=i,Pn=a,Ve!==null)if(Pn)try{(Ve.nodeType===9?Ve.body:Ve.nodeName==="HTML"?Ve.ownerDocument.body:Ve).removeChild(n.stateNode)}catch(r){De(n,e,r)}else try{Ve.removeChild(n.stateNode)}catch(r){De(n,e,r)}break;case 18:Ve!==null&&(Pn?(t=Ve,Lh(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,n.stateNode),ir(t)):Lh(Ve,n.stateNode));break;case 4:i=Ve,a=Pn,Ve=n.stateNode.containerInfo,Pn=!0,es(t,e,n),Ve=i,Pn=a;break;case 0:case 11:case 14:case 15:js(2,n,e),ln||js(4,n,e),es(t,e,n);break;case 1:ln||(ki(n,e),i=n.stateNode,typeof i.componentWillUnmount=="function"&&Pd(n,e,i)),es(t,e,n);break;case 21:es(t,e,n);break;case 22:ln=(i=ln)||n.memoizedState!==null,es(t,e,n),ln=i;break;default:es(t,e,n)}}function Gd(t,e){if(e.memoizedState===null&&(t=e.alternate,t!==null&&(t=t.memoizedState,t!==null))){t=t.dehydrated;try{ir(t)}catch(n){De(e,e.return,n)}}}function Xd(t,e){if(e.memoizedState===null&&(t=e.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{ir(t)}catch(n){De(e,e.return,n)}}function Cf(t){switch(t.tag){case 31:case 13:case 19:var e=t.stateNode;return e===null&&(e=t.stateNode=new Id),e;case 22:return t=t.stateNode,e=t._retryCache,e===null&&(e=t._retryCache=new Id),e;default:throw Error(c(435,t.tag))}}function qo(t,e){var n=Cf(t);e.forEach(function(i){if(!n.has(i)){n.add(i);var a=zf.bind(null,t,i);i.then(a,a)}})}function Fn(t,e){var n=e.deletions;if(n!==null)for(var i=0;i<n.length;i++){var a=n[i],r=t,A=e,q=A;t:for(;q!==null;){switch(q.tag){case 27:if(Ls(q.type)){Ve=q.stateNode,Pn=!1;break t}break;case 5:Ve=q.stateNode,Pn=!1;break t;case 3:case 4:Ve=q.stateNode.containerInfo,Pn=!0;break t}q=q.return}if(Ve===null)throw Error(c(160));Hd(r,A,a),Ve=null,Pn=!1,r=a.alternate,r!==null&&(r.return=null),a.return=null}if(e.subtreeFlags&13886)for(e=e.child;e!==null;)Kd(e,t),e=e.sibling}var gi=null;function Kd(t,e){var n=t.alternate,i=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:Fn(e,t),zn(t),i&4&&(js(3,t,t.return),Br(3,t),js(5,t,t.return));break;case 1:Fn(e,t),zn(t),i&512&&(ln||n===null||ki(n,n.return)),i&64&&ts&&(t=t.updateQueue,t!==null&&(i=t.callbacks,i!==null&&(n=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=n===null?i:n.concat(i))));break;case 26:var a=gi;if(Fn(e,t),zn(t),i&512&&(ln||n===null||ki(n,n.return)),i&4){var r=n!==null?n.memoizedState:null;if(i=t.memoizedState,n===null)if(i===null)if(t.stateNode===null){t:{i=t.type,n=t.memoizedProps,a=a.ownerDocument||a;e:switch(i){case"title":r=a.getElementsByTagName("title")[0],(!r||r[Un]||r[qe]||r.namespaceURI==="http://www.w3.org/2000/svg"||r.hasAttribute("itemprop"))&&(r=a.createElement(i),a.head.insertBefore(r,a.querySelector("head > title"))),_n(r,i,n),r[qe]=t,tn(r),i=r;break t;case"link":var A=Kh("link","href",a).get(i+(n.href||""));if(A){for(var q=0;q<A.length;q++)if(r=A[q],r.getAttribute("href")===(n.href==null||n.href===""?null:n.href)&&r.getAttribute("rel")===(n.rel==null?null:n.rel)&&r.getAttribute("title")===(n.title==null?null:n.title)&&r.getAttribute("crossorigin")===(n.crossOrigin==null?null:n.crossOrigin)){A.splice(q,1);break e}}r=a.createElement(i),_n(r,i,n),a.head.appendChild(r);break;case"meta":if(A=Kh("meta","content",a).get(i+(n.content||""))){for(q=0;q<A.length;q++)if(r=A[q],r.getAttribute("content")===(n.content==null?null:""+n.content)&&r.getAttribute("name")===(n.name==null?null:n.name)&&r.getAttribute("property")===(n.property==null?null:n.property)&&r.getAttribute("http-equiv")===(n.httpEquiv==null?null:n.httpEquiv)&&r.getAttribute("charset")===(n.charSet==null?null:n.charSet)){A.splice(q,1);break e}}r=a.createElement(i),_n(r,i,n),a.head.appendChild(r);break;default:throw Error(c(468,i))}r[qe]=t,tn(r),i=r}t.stateNode=i}else Yh(a,t.type,t.stateNode);else t.stateNode=Xh(a,i,t.memoizedProps);else r!==i?(r===null?n.stateNode!==null&&(n=n.stateNode,n.parentNode.removeChild(n)):r.count--,i===null?Yh(a,t.type,t.stateNode):Xh(a,i,t.memoizedProps)):i===null&&t.stateNode!==null&&bc(t,t.memoizedProps,n.memoizedProps)}break;case 27:Fn(e,t),zn(t),i&512&&(ln||n===null||ki(n,n.return)),n!==null&&i&4&&bc(t,t.memoizedProps,n.memoizedProps);break;case 5:if(Fn(e,t),zn(t),i&512&&(ln||n===null||ki(n,n.return)),t.flags&32){a=t.stateNode;try{Pi(a,"")}catch(ne){De(t,t.return,ne)}}i&4&&t.stateNode!=null&&(a=t.memoizedProps,bc(t,a,n!==null?n.memoizedProps:a)),i&1024&&(Ac=!0);break;case 6:if(Fn(e,t),zn(t),i&4){if(t.stateNode===null)throw Error(c(162));i=t.memoizedProps,n=t.stateNode;try{n.nodeValue=i}catch(ne){De(t,t.return,ne)}}break;case 3:if(sl=null,a=gi,gi=nl(e.containerInfo),Fn(e,t),gi=a,zn(t),i&4&&n!==null&&n.memoizedState.isDehydrated)try{ir(e.containerInfo)}catch(ne){De(t,t.return,ne)}Ac&&(Ac=!1,Yd(t));break;case 4:i=gi,gi=nl(t.stateNode.containerInfo),Fn(e,t),zn(t),gi=i;break;case 12:Fn(e,t),zn(t);break;case 31:Fn(e,t),zn(t),i&4&&(i=t.updateQueue,i!==null&&(t.updateQueue=null,qo(t,i)));break;case 13:Fn(e,t),zn(t),t.child.flags&8192&&t.memoizedState!==null!=(n!==null&&n.memoizedState!==null)&&(Go=oe()),i&4&&(i=t.updateQueue,i!==null&&(t.updateQueue=null,qo(t,i)));break;case 22:a=t.memoizedState!==null;var ot=n!==null&&n.memoizedState!==null,wt=ts,Ot=ln;if(ts=wt||a,ln=Ot||ot,Fn(e,t),ln=Ot,ts=wt,zn(t),i&8192)t:for(e=t.stateNode,e._visibility=a?e._visibility&-2:e._visibility|1,a&&(n===null||ot||ts||ln||da(t)),n=null,e=t;;){if(e.tag===5||e.tag===26){if(n===null){ot=n=e;try{if(r=ot.stateNode,a)A=r.style,typeof A.setProperty=="function"?A.setProperty("display","none","important"):A.display="none";else{q=ot.stateNode;var It=ot.memoizedProps.style,Ct=It!=null&&It.hasOwnProperty("display")?It.display:null;q.style.display=Ct==null||typeof Ct=="boolean"?"":(""+Ct).trim()}}catch(ne){De(ot,ot.return,ne)}}}else if(e.tag===6){if(n===null){ot=e;try{ot.stateNode.nodeValue=a?"":ot.memoizedProps}catch(ne){De(ot,ot.return,ne)}}}else if(e.tag===18){if(n===null){ot=e;try{var Mt=ot.stateNode;a?Ph(Mt,!0):Ph(ot.stateNode,!1)}catch(ne){De(ot,ot.return,ne)}}}else if((e.tag!==22&&e.tag!==23||e.memoizedState===null||e===t)&&e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break t;for(;e.sibling===null;){if(e.return===null||e.return===t)break t;n===e&&(n=null),e=e.return}n===e&&(n=null),e.sibling.return=e.return,e=e.sibling}i&4&&(i=t.updateQueue,i!==null&&(n=i.retryQueue,n!==null&&(i.retryQueue=null,qo(t,n))));break;case 19:Fn(e,t),zn(t),i&4&&(i=t.updateQueue,i!==null&&(t.updateQueue=null,qo(t,i)));break;case 30:break;case 21:break;default:Fn(e,t),zn(t)}}function zn(t){var e=t.flags;if(e&2){try{for(var n,i=t.return;i!==null;){if(zd(i)){n=i;break}i=i.return}if(n==null)throw Error(c(160));switch(n.tag){case 27:var a=n.stateNode,r=_c(t);Uo(t,r,a);break;case 5:var A=n.stateNode;n.flags&32&&(Pi(A,""),n.flags&=-33);var q=_c(t);Uo(t,q,A);break;case 3:case 4:var ot=n.stateNode.containerInfo,wt=_c(t);Ec(t,wt,ot);break;default:throw Error(c(161))}}catch(Ot){De(t,t.return,Ot)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function Yd(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var e=t;Yd(e),e.tag===5&&e.flags&1024&&e.stateNode.reset(),t=t.sibling}}function ns(t,e){if(e.subtreeFlags&8772)for(e=e.child;e!==null;)Ud(t,e.alternate,e),e=e.sibling}function da(t){for(t=t.child;t!==null;){var e=t;switch(e.tag){case 0:case 11:case 14:case 15:js(4,e,e.return),da(e);break;case 1:ki(e,e.return);var n=e.stateNode;typeof n.componentWillUnmount=="function"&&Pd(e,e.return,n),da(e);break;case 27:Wr(e.stateNode);case 26:case 5:ki(e,e.return),da(e);break;case 22:e.memoizedState===null&&da(e);break;case 30:da(e);break;default:da(e)}t=t.sibling}}function is(t,e,n){for(n=n&&(e.subtreeFlags&8772)!==0,e=e.child;e!==null;){var i=e.alternate,a=t,r=e,A=r.flags;switch(r.tag){case 0:case 11:case 15:is(a,r,n),Br(4,r);break;case 1:if(is(a,r,n),i=r,a=i.stateNode,typeof a.componentDidMount=="function")try{a.componentDidMount()}catch(wt){De(i,i.return,wt)}if(i=r,a=i.updateQueue,a!==null){var q=i.stateNode;try{var ot=a.shared.hiddenCallbacks;if(ot!==null)for(a.shared.hiddenCallbacks=null,a=0;a<ot.length;a++)Su(ot[a],q)}catch(wt){De(i,i.return,wt)}}n&&A&64&&Ld(r),Ir(r,r.return);break;case 27:Bd(r);case 26:case 5:is(a,r,n),n&&i===null&&A&4&&Fd(r),Ir(r,r.return);break;case 12:is(a,r,n);break;case 31:is(a,r,n),n&&A&4&&Gd(a,r);break;case 13:is(a,r,n),n&&A&4&&Xd(a,r);break;case 22:r.memoizedState===null&&is(a,r,n),Ir(r,r.return);break;case 30:break;default:is(a,r,n)}e=e.sibling}}function Sc(t,e){var n=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(n=t.memoizedState.cachePool.pool),t=null,e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(t=e.memoizedState.cachePool.pool),t!==n&&(t!=null&&t.refCount++,n!=null&&Rr(n))}function wc(t,e){t=null,e.alternate!==null&&(t=e.alternate.memoizedState.cache),e=e.memoizedState.cache,e!==t&&(e.refCount++,t!=null&&Rr(t))}function yi(t,e,n,i){if(e.subtreeFlags&10256)for(e=e.child;e!==null;)Vd(t,e,n,i),e=e.sibling}function Vd(t,e,n,i){var a=e.flags;switch(e.tag){case 0:case 11:case 15:yi(t,e,n,i),a&2048&&Br(9,e);break;case 1:yi(t,e,n,i);break;case 3:yi(t,e,n,i),a&2048&&(t=null,e.alternate!==null&&(t=e.alternate.memoizedState.cache),e=e.memoizedState.cache,e!==t&&(e.refCount++,t!=null&&Rr(t)));break;case 12:if(a&2048){yi(t,e,n,i),t=e.stateNode;try{var r=e.memoizedProps,A=r.id,q=r.onPostCommit;typeof q=="function"&&q(A,e.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(ot){De(e,e.return,ot)}}else yi(t,e,n,i);break;case 31:yi(t,e,n,i);break;case 13:yi(t,e,n,i);break;case 23:break;case 22:r=e.stateNode,A=e.alternate,e.memoizedState!==null?r._visibility&2?yi(t,e,n,i):Ur(t,e):r._visibility&2?yi(t,e,n,i):(r._visibility|=2,Ka(t,e,n,i,(e.subtreeFlags&10256)!==0||!1)),a&2048&&Sc(A,e);break;case 24:yi(t,e,n,i),a&2048&&wc(e.alternate,e);break;default:yi(t,e,n,i)}}function Ka(t,e,n,i,a){for(a=a&&((e.subtreeFlags&10256)!==0||!1),e=e.child;e!==null;){var r=t,A=e,q=n,ot=i,wt=A.flags;switch(A.tag){case 0:case 11:case 15:Ka(r,A,q,ot,a),Br(8,A);break;case 23:break;case 22:var Ot=A.stateNode;A.memoizedState!==null?Ot._visibility&2?Ka(r,A,q,ot,a):Ur(r,A):(Ot._visibility|=2,Ka(r,A,q,ot,a)),a&&wt&2048&&Sc(A.alternate,A);break;case 24:Ka(r,A,q,ot,a),a&&wt&2048&&wc(A.alternate,A);break;default:Ka(r,A,q,ot,a)}e=e.sibling}}function Ur(t,e){if(e.subtreeFlags&10256)for(e=e.child;e!==null;){var n=t,i=e,a=i.flags;switch(i.tag){case 22:Ur(n,i),a&2048&&Sc(i.alternate,i);break;case 24:Ur(n,i),a&2048&&wc(i.alternate,i);break;default:Ur(n,i)}e=e.sibling}}var qr=8192;function Ya(t,e,n){if(t.subtreeFlags&qr)for(t=t.child;t!==null;)Wd(t,e,n),t=t.sibling}function Wd(t,e,n){switch(t.tag){case 26:Ya(t,e,n),t.flags&qr&&t.memoizedState!==null&&mp(n,gi,t.memoizedState,t.memoizedProps);break;case 5:Ya(t,e,n);break;case 3:case 4:var i=gi;gi=nl(t.stateNode.containerInfo),Ya(t,e,n),gi=i;break;case 22:t.memoizedState===null&&(i=t.alternate,i!==null&&i.memoizedState!==null?(i=qr,qr=16777216,Ya(t,e,n),qr=i):Ya(t,e,n));break;default:Ya(t,e,n)}}function Qd(t){var e=t.alternate;if(e!==null&&(t=e.child,t!==null)){e.child=null;do e=t.sibling,t.sibling=null,t=e;while(t!==null)}}function Hr(t){var e=t.deletions;if((t.flags&16)!==0){if(e!==null)for(var n=0;n<e.length;n++){var i=e[n];mn=i,Jd(i,t)}Qd(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)Zd(t),t=t.sibling}function Zd(t){switch(t.tag){case 0:case 11:case 15:Hr(t),t.flags&2048&&js(9,t,t.return);break;case 3:Hr(t);break;case 12:Hr(t);break;case 22:var e=t.stateNode;t.memoizedState!==null&&e._visibility&2&&(t.return===null||t.return.tag!==13)?(e._visibility&=-3,Ho(t)):Hr(t);break;default:Hr(t)}}function Ho(t){var e=t.deletions;if((t.flags&16)!==0){if(e!==null)for(var n=0;n<e.length;n++){var i=e[n];mn=i,Jd(i,t)}Qd(t)}for(t=t.child;t!==null;){switch(e=t,e.tag){case 0:case 11:case 15:js(8,e,e.return),Ho(e);break;case 22:n=e.stateNode,n._visibility&2&&(n._visibility&=-3,Ho(e));break;default:Ho(e)}t=t.sibling}}function Jd(t,e){for(;mn!==null;){var n=mn;switch(n.tag){case 0:case 11:case 15:js(8,n,e);break;case 23:case 22:if(n.memoizedState!==null&&n.memoizedState.cachePool!==null){var i=n.memoizedState.cachePool.pool;i!=null&&i.refCount++}break;case 24:Rr(n.memoizedState.cache)}if(i=n.child,i!==null)i.return=n,mn=i;else t:for(n=t;mn!==null;){i=mn;var a=i.sibling,r=i.return;if(qd(i),i===n){mn=null;break t}if(a!==null){a.return=r,mn=a;break t}mn=r}}}var Mf={getCacheForType:function(t){var e=vn(an),n=e.data.get(t);return n===void 0&&(n=t(),e.data.set(t,n)),n},cacheSignal:function(){return vn(an).controller.signal}},kf=typeof WeakMap=="function"?WeakMap:Map,je=0,Ie=null,ye=null,ve=0,Ne=0,Yn=null,Cs=!1,Va=!1,Rc=!1,ss=0,Je=0,Ms=0,ha=0,Tc=0,Vn=0,Wa=0,Gr=null,Bn=null,jc=!1,Go=0,$d=0,Xo=1/0,Ko=null,ks=null,dn=0,Ns=null,Qa=null,as=0,Cc=0,Mc=null,th=null,Xr=0,kc=null;function Wn(){return(je&2)!==0&&ve!==0?ve&-ve:nt.T!==null?Fc():hi()}function eh(){if(Vn===0)if((ve&536870912)===0||Ae){var t=Cn;Cn<<=1,(Cn&3932160)===0&&(Cn=262144),Vn=t}else Vn=536870912;return t=Xn.current,t!==null&&(t.flags|=32),Vn}function In(t,e,n){(t===Ie&&(Ne===2||Ne===9)||t.cancelPendingCommit!==null)&&(Za(t,0),Ds(t,ve,Vn,!1)),gn(t,n),((je&2)===0||t!==Ie)&&(t===Ie&&((je&2)===0&&(ha|=n),Je===4&&Ds(t,ve,Vn,!1)),Ni(t))}function nh(t,e,n){if((je&6)!==0)throw Error(c(327));var i=!n&&(e&127)===0&&(e&t.expiredLanes)===0||An(t,e),a=i?Of(t,e):Dc(t,e,!0),r=i;do{if(a===0){Va&&!i&&Ds(t,e,0,!1);break}else{if(n=t.current.alternate,r&&!Nf(n)){a=Dc(t,e,!1),r=!1;continue}if(a===2){if(r=e,t.errorRecoveryDisabledLanes&r)var A=0;else A=t.pendingLanes&-536870913,A=A!==0?A:A&536870912?536870912:0;if(A!==0){e=A;t:{var q=t;a=Gr;var ot=q.current.memoizedState.isDehydrated;if(ot&&(Za(q,A).flags|=256),A=Dc(q,A,!1),A!==2){if(Rc&&!ot){q.errorRecoveryDisabledLanes|=r,ha|=r,a=4;break t}r=Bn,Bn=a,r!==null&&(Bn===null?Bn=r:Bn.push.apply(Bn,r))}a=A}if(r=!1,a!==2)continue}}if(a===1){Za(t,0),Ds(t,e,0,!0);break}t:{switch(i=t,r=a,r){case 0:case 1:throw Error(c(345));case 4:if((e&4194048)!==e)break;case 6:Ds(i,e,Vn,!Cs);break t;case 2:Bn=null;break;case 3:case 5:break;default:throw Error(c(329))}if((e&62914560)===e&&(a=Go+300-oe(),10<a)){if(Ds(i,e,Vn,!Cs),Qe(i,0,!0)!==0)break t;as=e,i.timeoutHandle=Dh(ih.bind(null,i,n,Bn,Ko,jc,e,Vn,ha,Wa,Cs,r,"Throttled",-0,0),a);break t}ih(i,n,Bn,Ko,jc,e,Vn,ha,Wa,Cs,r,null,-0,0)}}break}while(!0);Ni(t)}function ih(t,e,n,i,a,r,A,q,ot,wt,Ot,It,Ct,Mt){if(t.timeoutHandle=-1,It=e.subtreeFlags,It&8192||(It&16785408)===16785408){It={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Ln},Wd(e,r,It);var ne=(r&62914560)===r?Go-oe():(r&4194048)===r?$d-oe():0;if(ne=gp(It,ne),ne!==null){as=r,t.cancelPendingCommit=ne(dh.bind(null,t,e,r,n,i,a,A,q,ot,Ot,It,null,Ct,Mt)),Ds(t,r,A,!wt);return}}dh(t,e,r,n,i,a,A,q,ot)}function Nf(t){for(var e=t;;){var n=e.tag;if((n===0||n===11||n===15)&&e.flags&16384&&(n=e.updateQueue,n!==null&&(n=n.stores,n!==null)))for(var i=0;i<n.length;i++){var a=n[i],r=a.getSnapshot;a=a.value;try{if(!Rn(r(),a))return!1}catch{return!1}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Ds(t,e,n,i){e&=~Tc,e&=~ha,t.suspendedLanes|=e,t.pingedLanes&=~e,i&&(t.warmLanes|=e),i=t.expirationTimes;for(var a=e;0<a;){var r=31-st(a),A=1<<r;i[r]=-1,a&=~A}n!==0&&di(t,n,e)}function Yo(){return(je&6)===0?(Kr(0),!1):!0}function Nc(){if(ye!==null){if(Ne===0)var t=ye.return;else t=ye,Vi=ia=null,Vl(t),Ua=null,jr=0,t=ye;for(;t!==null;)Od(t.alternate,t),t=t.return;ye=null}}function Za(t,e){var n=t.timeoutHandle;n!==-1&&(t.timeoutHandle=-1,Jf(n)),n=t.cancelPendingCommit,n!==null&&(t.cancelPendingCommit=null,n()),as=0,Nc(),Ie=t,ye=n=Ki(t.current,null),ve=e,Ne=0,Yn=null,Cs=!1,Va=An(t,e),Rc=!1,Wa=Vn=Tc=ha=Ms=Je=0,Bn=Gr=null,jc=!1,(e&8)!==0&&(e|=e&32);var i=t.entangledLanes;if(i!==0)for(t=t.entanglements,i&=e;0<i;){var a=31-st(i),r=1<<a;e|=t[a],i&=~r}return ss=e,de(),n}function sh(t,e){he=null,nt.H=Pr,e===Ia||e===Eo?(e=bu(),Ne=3):e===Pl?(e=bu(),Ne=4):Ne=e===uc?8:e!==null&&typeof e=="object"&&typeof e.then=="function"?6:1,Yn=e,ye===null&&(Je=1,Po(t,ni(e,t.current)))}function ah(){var t=Xn.current;return t===null?!0:(ve&4194048)===ve?oi===null:(ve&62914560)===ve||(ve&536870912)!==0?t===oi:!1}function rh(){var t=nt.H;return nt.H=Pr,t===null?Pr:t}function oh(){var t=nt.A;return nt.A=Mf,t}function Vo(){Je=4,Cs||(ve&4194048)!==ve&&Xn.current!==null||(Va=!0),(Ms&134217727)===0&&(ha&134217727)===0||Ie===null||Ds(Ie,ve,Vn,!1)}function Dc(t,e,n){var i=je;je|=2;var a=rh(),r=oh();(Ie!==t||ve!==e)&&(Ko=null,Za(t,e)),e=!1;var A=Je;t:do try{if(Ne!==0&&ye!==null){var q=ye,ot=Yn;switch(Ne){case 8:Nc(),A=6;break t;case 3:case 2:case 9:case 6:Xn.current===null&&(e=!0);var wt=Ne;if(Ne=0,Yn=null,Ja(t,q,ot,wt),n&&Va){A=0;break t}break;default:wt=Ne,Ne=0,Yn=null,Ja(t,q,ot,wt)}}Df(),A=Je;break}catch(Ot){sh(t,Ot)}while(!0);return e&&t.shellSuspendCounter++,Vi=ia=null,je=i,nt.H=a,nt.A=r,ye===null&&(Ie=null,ve=0,de()),A}function Df(){for(;ye!==null;)lh(ye)}function Of(t,e){var n=je;je|=2;var i=rh(),a=oh();Ie!==t||ve!==e?(Ko=null,Xo=oe()+500,Za(t,e)):Va=An(t,e);t:do try{if(Ne!==0&&ye!==null){e=ye;var r=Yn;e:switch(Ne){case 1:Ne=0,Yn=null,Ja(t,e,r,1);break;case 2:case 9:if(xu(r)){Ne=0,Yn=null,ch(e);break}e=function(){Ne!==2&&Ne!==9||Ie!==t||(Ne=7),Ni(t)},r.then(e,e);break t;case 3:Ne=7;break t;case 4:Ne=5;break t;case 7:xu(r)?(Ne=0,Yn=null,ch(e)):(Ne=0,Yn=null,Ja(t,e,r,7));break;case 5:var A=null;switch(ye.tag){case 26:A=ye.memoizedState;case 5:case 27:var q=ye;if(A?Vh(A):q.stateNode.complete){Ne=0,Yn=null;var ot=q.sibling;if(ot!==null)ye=ot;else{var wt=q.return;wt!==null?(ye=wt,Wo(wt)):ye=null}break e}}Ne=0,Yn=null,Ja(t,e,r,5);break;case 6:Ne=0,Yn=null,Ja(t,e,r,6);break;case 8:Nc(),Je=6;break t;default:throw Error(c(462))}}Lf();break}catch(Ot){sh(t,Ot)}while(!0);return Vi=ia=null,nt.H=i,nt.A=a,je=n,ye!==null?0:(Ie=null,ve=0,de(),Je)}function Lf(){for(;ye!==null&&!se();)lh(ye)}function lh(t){var e=Nd(t.alternate,t,ss);t.memoizedProps=t.pendingProps,e===null?Wo(t):ye=e}function ch(t){var e=t,n=e.alternate;switch(e.tag){case 15:case 0:e=Rd(n,e,e.pendingProps,e.type,void 0,ve);break;case 11:e=Rd(n,e,e.pendingProps,e.type.render,e.ref,ve);break;case 5:Vl(e);default:Od(n,e),e=ye=ou(e,ss),e=Nd(n,e,ss)}t.memoizedProps=t.pendingProps,e===null?Wo(t):ye=e}function Ja(t,e,n,i){Vi=ia=null,Vl(e),Ua=null,jr=0;var a=e.return;try{if(Af(t,a,e,n,ve)){Je=1,Po(t,ni(n,t.current)),ye=null;return}}catch(r){if(a!==null)throw ye=a,r;Je=1,Po(t,ni(n,t.current)),ye=null;return}e.flags&32768?(Ae||i===1?t=!0:Va||(ve&536870912)!==0?t=!1:(Cs=t=!0,(i===2||i===9||i===3||i===6)&&(i=Xn.current,i!==null&&i.tag===13&&(i.flags|=16384))),uh(e,t)):Wo(e)}function Wo(t){var e=t;do{if((e.flags&32768)!==0){uh(e,Cs);return}t=e.return;var n=Rf(e.alternate,e,ss);if(n!==null){ye=n;return}if(e=e.sibling,e!==null){ye=e;return}ye=e=t}while(e!==null);Je===0&&(Je=5)}function uh(t,e){do{var n=Tf(t.alternate,t);if(n!==null){n.flags&=32767,ye=n;return}if(n=t.return,n!==null&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!e&&(t=t.sibling,t!==null)){ye=t;return}ye=t=n}while(t!==null);Je=6,ye=null}function dh(t,e,n,i,a,r,A,q,ot){t.cancelPendingCommit=null;do Qo();while(dn!==0);if((je&6)!==0)throw Error(c(327));if(e!==null){if(e===t.current)throw Error(c(177));if(r=e.lanes|e.childLanes,r|=ae,vi(t,n,r,A,q,ot),t===Ie&&(ye=Ie=null,ve=0),Qa=e,Ns=t,as=n,Cc=r,Mc=a,th=i,(e.subtreeFlags&10256)!==0||(e.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,Bf(jn,function(){return gh(),null})):(t.callbackNode=null,t.callbackPriority=0),i=(e.flags&13878)!==0,(e.subtreeFlags&13878)!==0||i){i=nt.T,nt.T=null,a=Y.p,Y.p=2,A=je,je|=4;try{jf(t,e,n)}finally{je=A,Y.p=a,nt.T=i}}dn=1,hh(),fh(),ph()}}function hh(){if(dn===1){dn=0;var t=Ns,e=Qa,n=(e.flags&13878)!==0;if((e.subtreeFlags&13878)!==0||n){n=nt.T,nt.T=null;var i=Y.p;Y.p=2;var a=je;je|=4;try{Kd(e,t);var r=Xc,A=j(t.containerInfo),q=r.focusedElem,ot=r.selectionRange;if(A!==q&&q&&q.ownerDocument&&v(q.ownerDocument.documentElement,q)){if(ot!==null&&P(q)){var wt=ot.start,Ot=ot.end;if(Ot===void 0&&(Ot=wt),"selectionStart"in q)q.selectionStart=wt,q.selectionEnd=Math.min(Ot,q.value.length);else{var It=q.ownerDocument||document,Ct=It&&It.defaultView||window;if(Ct.getSelection){var Mt=Ct.getSelection(),ne=q.textContent.length,ce=Math.min(ot.start,ne),ze=ot.end===void 0?ce:Math.min(ot.end,ne);!Mt.extend&&ce>ze&&(A=ze,ze=ce,ce=A);var xt=p(q,ce),pt=p(q,ze);if(xt&&pt&&(Mt.rangeCount!==1||Mt.anchorNode!==xt.node||Mt.anchorOffset!==xt.offset||Mt.focusNode!==pt.node||Mt.focusOffset!==pt.offset)){var St=It.createRange();St.setStart(xt.node,xt.offset),Mt.removeAllRanges(),ce>ze?(Mt.addRange(St),Mt.extend(pt.node,pt.offset)):(St.setEnd(pt.node,pt.offset),Mt.addRange(St))}}}}for(It=[],Mt=q;Mt=Mt.parentNode;)Mt.nodeType===1&&It.push({element:Mt,left:Mt.scrollLeft,top:Mt.scrollTop});for(typeof q.focus=="function"&&q.focus(),q=0;q<It.length;q++){var zt=It[q];zt.element.scrollLeft=zt.left,zt.element.scrollTop=zt.top}}ll=!!Gc,Xc=Gc=null}finally{je=a,Y.p=i,nt.T=n}}t.current=e,dn=2}}function fh(){if(dn===2){dn=0;var t=Ns,e=Qa,n=(e.flags&8772)!==0;if((e.subtreeFlags&8772)!==0||n){n=nt.T,nt.T=null;var i=Y.p;Y.p=2;var a=je;je|=4;try{Ud(t,e.alternate,e)}finally{je=a,Y.p=i,nt.T=n}}dn=3}}function ph(){if(dn===4||dn===3){dn=0,le();var t=Ns,e=Qa,n=as,i=th;(e.subtreeFlags&10256)!==0||(e.flags&10256)!==0?dn=5:(dn=0,Qa=Ns=null,mh(t,t.pendingLanes));var a=t.pendingLanes;if(a===0&&(ks=null),On(n),e=e.stateNode,Bt&&typeof Bt.onCommitFiberRoot=="function")try{Bt.onCommitFiberRoot(Qn,e,void 0,(e.current.flags&128)===128)}catch{}if(i!==null){e=nt.T,a=Y.p,Y.p=2,nt.T=null;try{for(var r=t.onRecoverableError,A=0;A<i.length;A++){var q=i[A];r(q.value,{componentStack:q.stack})}}finally{nt.T=e,Y.p=a}}(as&3)!==0&&Qo(),Ni(t),a=t.pendingLanes,(n&261930)!==0&&(a&42)!==0?t===kc?Xr++:(Xr=0,kc=t):Xr=0,Kr(0)}}function mh(t,e){(t.pooledCacheLanes&=e)===0&&(e=t.pooledCache,e!=null&&(t.pooledCache=null,Rr(e)))}function Qo(){return hh(),fh(),ph(),gh()}function gh(){if(dn!==5)return!1;var t=Ns,e=Cc;Cc=0;var n=On(as),i=nt.T,a=Y.p;try{Y.p=32>n?32:n,nt.T=null,n=Mc,Mc=null;var r=Ns,A=as;if(dn=0,Qa=Ns=null,as=0,(je&6)!==0)throw Error(c(331));var q=je;if(je|=4,Zd(r.current),Vd(r,r.current,A,n),je=q,Kr(0,!1),Bt&&typeof Bt.onPostCommitFiberRoot=="function")try{Bt.onPostCommitFiberRoot(Qn,r)}catch{}return!0}finally{Y.p=a,nt.T=i,mh(t,e)}}function yh(t,e,n){e=ni(n,e),e=cc(t.stateNode,e,2),t=ws(t,e,2),t!==null&&(gn(t,2),Ni(t))}function De(t,e,n){if(t.tag===3)yh(t,t,n);else for(;e!==null;){if(e.tag===3){yh(e,t,n);break}else if(e.tag===1){var i=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(ks===null||!ks.has(i))){t=ni(n,t),n=xd(2),i=ws(e,n,2),i!==null&&(vd(n,i,e,t),gn(i,2),Ni(i));break}}e=e.return}}function Oc(t,e,n){var i=t.pingCache;if(i===null){i=t.pingCache=new kf;var a=new Set;i.set(e,a)}else a=i.get(e),a===void 0&&(a=new Set,i.set(e,a));a.has(n)||(Rc=!0,a.add(n),t=Pf.bind(null,t,e,n),e.then(t,t))}function Pf(t,e,n){var i=t.pingCache;i!==null&&i.delete(e),t.pingedLanes|=t.suspendedLanes&n,t.warmLanes&=~n,Ie===t&&(ve&n)===n&&(Je===4||Je===3&&(ve&62914560)===ve&&300>oe()-Go?(je&2)===0&&Za(t,0):Tc|=n,Wa===ve&&(Wa=0)),Ni(t)}function xh(t,e){e===0&&(e=Di()),t=Me(t,e),t!==null&&(gn(t,e),Ni(t))}function Ff(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),xh(t,n)}function zf(t,e){var n=0;switch(t.tag){case 31:case 13:var i=t.stateNode,a=t.memoizedState;a!==null&&(n=a.retryLane);break;case 19:i=t.stateNode;break;case 22:i=t.stateNode._retryCache;break;default:throw Error(c(314))}i!==null&&i.delete(e),xh(t,n)}function Bf(t,e){return Qt(t,e)}var Zo=null,$a=null,Lc=!1,Jo=!1,Pc=!1,Os=0;function Ni(t){t!==$a&&t.next===null&&($a===null?Zo=$a=t:$a=$a.next=t),Jo=!0,Lc||(Lc=!0,Uf())}function Kr(t,e){if(!Pc&&Jo){Pc=!0;do for(var n=!1,i=Zo;i!==null;){if(t!==0){var a=i.pendingLanes;if(a===0)var r=0;else{var A=i.suspendedLanes,q=i.pingedLanes;r=(1<<31-st(42|t)+1)-1,r&=a&~(A&~q),r=r&201326741?r&201326741|1:r?r|2:0}r!==0&&(n=!0,Eh(i,r))}else r=ve,r=Qe(i,i===Ie?r:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),(r&3)===0||An(i,r)||(n=!0,Eh(i,r));i=i.next}while(n);Pc=!1}}function If(){vh()}function vh(){Jo=Lc=!1;var t=0;Os!==0&&Zf()&&(t=Os);for(var e=oe(),n=null,i=Zo;i!==null;){var a=i.next,r=bh(i,e);r===0?(i.next=null,n===null?Zo=a:n.next=a,a===null&&($a=n)):(n=i,(t!==0||(r&3)!==0)&&(Jo=!0)),i=a}dn!==0&&dn!==5||Kr(t),Os!==0&&(Os=0)}function bh(t,e){for(var n=t.suspendedLanes,i=t.pingedLanes,a=t.expirationTimes,r=t.pendingLanes&-62914561;0<r;){var A=31-st(r),q=1<<A,ot=a[A];ot===-1?((q&n)===0||(q&i)!==0)&&(a[A]=Zn(q,e)):ot<=e&&(t.expiredLanes|=q),r&=~q}if(e=Ie,n=ve,n=Qe(t,t===e?n:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),i=t.callbackNode,n===0||t===e&&(Ne===2||Ne===9)||t.cancelPendingCommit!==null)return i!==null&&i!==null&&$t(i),t.callbackNode=null,t.callbackPriority=0;if((n&3)===0||An(t,n)){if(e=n&-n,e===t.callbackPriority)return e;switch(i!==null&&$t(i),On(n)){case 2:case 8:n=Ue;break;case 32:n=jn;break;case 268435456:n=En;break;default:n=jn}return i=_h.bind(null,t),n=Qt(n,i),t.callbackPriority=e,t.callbackNode=n,e}return i!==null&&i!==null&&$t(i),t.callbackPriority=2,t.callbackNode=null,2}function _h(t,e){if(dn!==0&&dn!==5)return t.callbackNode=null,t.callbackPriority=0,null;var n=t.callbackNode;if(Qo()&&t.callbackNode!==n)return null;var i=ve;return i=Qe(t,t===Ie?i:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),i===0?null:(nh(t,i,e),bh(t,oe()),t.callbackNode!=null&&t.callbackNode===n?_h.bind(null,t):null)}function Eh(t,e){if(Qo())return null;nh(t,e,!0)}function Uf(){$f(function(){(je&6)!==0?Qt(Ce,If):vh()})}function Fc(){if(Os===0){var t=za;t===0&&(t=Kt,Kt<<=1,(Kt&261888)===0&&(Kt=256)),Os=t}return Os}function Ah(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:mi(""+t)}function Sh(t,e){var n=e.ownerDocument.createElement("input");return n.name=e.name,n.value=e.value,t.id&&n.setAttribute("form",t.id),e.parentNode.insertBefore(n,e),t=new FormData(t),n.parentNode.removeChild(n),t}function qf(t,e,n,i,a){if(e==="submit"&&n&&n.stateNode===a){var r=Ah((a[$e]||null).action),A=i.submitter;A&&(e=(e=A[$e]||null)?Ah(e.formAction):A.getAttribute("formAction"),e!==null&&(r=e,A=null));var q=new xa("action","action",null,i,a);t.push({event:q,listeners:[{instance:null,listener:function(){if(i.defaultPrevented){if(Os!==0){var ot=A?Sh(a,A):new FormData(a);ic(n,{pending:!0,data:ot,method:a.method,action:r},null,ot)}}else typeof r=="function"&&(q.preventDefault(),ot=A?Sh(a,A):new FormData(a),ic(n,{pending:!0,data:ot,method:a.method,action:r},r,ot))},currentTarget:a}]})}}for(var zc=0;zc<Zt.length;zc++){var Bc=Zt[zc],Hf=Bc.toLowerCase(),Gf=Bc[0].toUpperCase()+Bc.slice(1);Gt(Hf,"on"+Gf)}Gt(Tt,"onAnimationEnd"),Gt(_t,"onAnimationIteration"),Gt(Dt,"onAnimationStart"),Gt("dblclick","onDoubleClick"),Gt("focusin","onFocus"),Gt("focusout","onBlur"),Gt(qt,"onTransitionRun"),Gt(Vt,"onTransitionStart"),Gt(Wt,"onTransitionCancel"),Gt(Ht,"onTransitionEnd"),Ai("onMouseEnter",["mouseout","mouseover"]),Ai("onMouseLeave",["mouseout","mouseover"]),Ai("onPointerEnter",["pointerout","pointerover"]),Ai("onPointerLeave",["pointerout","pointerover"]),fi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),fi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),fi("onBeforeInput",["compositionend","keypress","textInput","paste"]),fi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),fi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),fi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Yr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Xf=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Yr));function wh(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var i=t[n],a=i.event;i=i.listeners;t:{var r=void 0;if(e)for(var A=i.length-1;0<=A;A--){var q=i[A],ot=q.instance,wt=q.currentTarget;if(q=q.listener,ot!==r&&a.isPropagationStopped())break t;r=q,a.currentTarget=wt;try{r(a)}catch(Ot){ee(Ot)}a.currentTarget=null,r=ot}else for(A=0;A<i.length;A++){if(q=i[A],ot=q.instance,wt=q.currentTarget,q=q.listener,ot!==r&&a.isPropagationStopped())break t;r=q,a.currentTarget=wt;try{r(a)}catch(Ot){ee(Ot)}a.currentTarget=null,r=ot}}}}function xe(t,e){var n=e[os];n===void 0&&(n=e[os]=new Set);var i=t+"__bubble";n.has(i)||(Rh(e,t,2,!1),n.add(i))}function Ic(t,e,n){var i=0;e&&(i|=4),Rh(n,t,i,e)}var $o="_reactListening"+Math.random().toString(36).slice(2);function Uc(t){if(!t[$o]){t[$o]=!0,Oi.forEach(function(n){n!=="selectionchange"&&(Xf.has(n)||Ic(n,!1,t),Ic(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[$o]||(e[$o]=!0,Ic("selectionchange",!1,e))}}function Rh(t,e,n,i){switch(ef(e)){case 2:var a=vp;break;case 8:a=bp;break;default:a=nu}n=a.bind(null,e,n,t),a=void 0,!ur||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(a=!0),i?a!==void 0?t.addEventListener(e,n,{capture:!0,passive:a}):t.addEventListener(e,n,!0):a!==void 0?t.addEventListener(e,n,{passive:a}):t.addEventListener(e,n,!1)}function qc(t,e,n,i,a){var r=i;if((e&1)===0&&(e&2)===0&&i!==null)t:for(;;){if(i===null)return;var A=i.tag;if(A===3||A===4){var q=i.stateNode.containerInfo;if(q===a)break;if(A===4)for(A=i.return;A!==null;){var ot=A.tag;if((ot===3||ot===4)&&A.stateNode.containerInfo===a)return;A=A.return}for(;q!==null;){if(A=Ei(q),A===null)return;if(ot=A.tag,ot===5||ot===6||ot===26||ot===27){i=r=A;continue t}q=q.parentNode}}i=i.return}cs(function(){var wt=r,Ot=ga(n),It=[];t:{var Ct=te.get(t);if(Ct!==void 0){var Mt=xa,ne=t;switch(t){case"keypress":if(hs(n)===0)break t;case"keydown":case"keyup":Mt=wa;break;case"focusin":ne="focus",Mt=fs;break;case"focusout":ne="blur",Mt=fs;break;case"beforeblur":case"afterblur":Mt=fs;break;case"click":if(n.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Mt=_a;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Mt=ao;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Mt=yr;break;case Tt:case _t:case Dt:Mt=ro;break;case Ht:Mt=xr;break;case"scroll":case"scrollend":Mt=va;break;case"wheel":Mt=Ta;break;case"copy":case"cut":case"paste":Mt=ps;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Mt=gr;break;case"toggle":case"beforetoggle":Mt=co}var ce=(e&4)!==0,ze=!ce&&(t==="scroll"||t==="scrollend"),xt=ce?Ct!==null?Ct+"Capture":null:Ct;ce=[];for(var pt=wt,St;pt!==null;){var zt=pt;if(St=zt.stateNode,zt=zt.tag,zt!==5&&zt!==26&&zt!==27||St===null||xt===null||(zt=Bi(pt,xt),zt!=null&&ce.push(Vr(pt,zt,St))),ze)break;pt=pt.return}0<ce.length&&(Ct=new Mt(Ct,ne,null,n,Ot),It.push({event:Ct,listeners:ce}))}}if((e&7)===0){t:{if(Ct=t==="mouseover"||t==="pointerover",Mt=t==="mouseout"||t==="pointerout",Ct&&n!==$n&&(ne=n.relatedTarget||n.fromElement)&&(Ei(ne)||ne[Mn]))break t;if((Mt||Ct)&&(Ct=Ot.window===Ot?Ot:(Ct=Ot.ownerDocument)?Ct.defaultView||Ct.parentWindow:window,Mt?(ne=n.relatedTarget||n.toElement,Mt=wt,ne=ne?Ei(ne):null,ne!==null&&(ze=B(ne),ce=ne.tag,ne!==ze||ce!==5&&ce!==27&&ce!==6)&&(ne=null)):(Mt=null,ne=wt),Mt!==ne)){if(ce=_a,zt="onMouseLeave",xt="onMouseEnter",pt="mouse",(t==="pointerout"||t==="pointerover")&&(ce=gr,zt="onPointerLeave",xt="onPointerEnter",pt="pointer"),ze=Mt==null?Ct:qn(Mt),St=ne==null?Ct:qn(ne),Ct=new ce(zt,pt+"leave",Mt,n,Ot),Ct.target=ze,Ct.relatedTarget=St,zt=null,Ei(Ot)===wt&&(ce=new ce(xt,pt+"enter",ne,n,Ot),ce.target=St,ce.relatedTarget=ze,zt=ce),ze=zt,Mt&&ne)e:{for(ce=Kf,xt=Mt,pt=ne,St=0,zt=xt;zt;zt=ce(zt))St++;zt=0;for(var re=pt;re;re=ce(re))zt++;for(;0<St-zt;)xt=ce(xt),St--;for(;0<zt-St;)pt=ce(pt),zt--;for(;St--;){if(xt===pt||pt!==null&&xt===pt.alternate){ce=xt;break e}xt=ce(xt),pt=ce(pt)}ce=null}else ce=null;Mt!==null&&Th(It,Ct,Mt,ce,!1),ne!==null&&ze!==null&&Th(It,ze,ne,ce,!0)}}t:{if(Ct=wt?qn(wt):window,Mt=Ct.nodeName&&Ct.nodeName.toLowerCase(),Mt==="select"||Mt==="input"&&Ct.type==="file")var Se=ta;else if(Ma(Ct))if(ei)Se=ys;else{Se=Xi;var ie=go}else Mt=Ct.nodeName,!Mt||Mt.toLowerCase()!=="input"||Ct.type!=="checkbox"&&Ct.type!=="radio"?wt&&cr(wt.elementType)&&(Se=ta):Se=Ar;if(Se&&(Se=Se(t,wt))){Er(It,Se,n,Ot);break t}ie&&ie(t,Ct,wt),t==="focusout"&&wt&&Ct.type==="number"&&wt.memoizedProps.value!=null&&Ks(Ct,"number",Ct.value)}switch(ie=wt?qn(wt):window,t){case"focusin":(Ma(ie)||ie.contentEditable==="true")&&(tt=ie,ct=wt,bt=null);break;case"focusout":bt=ct=tt=null;break;case"mousedown":ut=!0;break;case"contextmenu":case"mouseup":case"dragend":ut=!1,lt(It,n,Ot);break;case"selectionchange":if(Z)break;case"keydown":case"keyup":lt(It,n,Ot)}var fe;if(Js)t:{switch(t){case"compositionstart":var be="onCompositionStart";break t;case"compositionend":be="onCompositionEnd";break t;case"compositionupdate":be="onCompositionUpdate";break t}be=void 0}else Hi?_r(t,n)&&(be="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(be="onCompositionStart");be&&(ja&&n.locale!=="ko"&&(Hi||be!=="onCompositionStart"?be==="onCompositionEnd"&&Hi&&(fe=ds()):(ti=Ot,ya="value"in ti?ti.value:ti.textContent,Hi=!0)),ie=tl(wt,be),0<ie.length&&(be=new Sa(be,t,null,n,Ot),It.push({event:be,listeners:ie}),fe?be.data=fe:(fe=ho(n),fe!==null&&(be.data=fe)))),(fe=bl?fo(t,n):_l(t,n))&&(be=tl(wt,"onBeforeInput"),0<be.length&&(ie=new Sa("onBeforeInput","beforeinput",null,n,Ot),It.push({event:ie,listeners:be}),ie.data=fe)),qf(It,t,wt,n,Ot)}wh(It,e)})}function Vr(t,e,n){return{instance:t,listener:e,currentTarget:n}}function tl(t,e){for(var n=e+"Capture",i=[];t!==null;){var a=t,r=a.stateNode;if(a=a.tag,a!==5&&a!==26&&a!==27||r===null||(a=Bi(t,n),a!=null&&i.unshift(Vr(t,a,r)),a=Bi(t,e),a!=null&&i.push(Vr(t,a,r))),t.tag===3)return i;t=t.return}return[]}function Kf(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function Th(t,e,n,i,a){for(var r=e._reactName,A=[];n!==null&&n!==i;){var q=n,ot=q.alternate,wt=q.stateNode;if(q=q.tag,ot!==null&&ot===i)break;q!==5&&q!==26&&q!==27||wt===null||(ot=wt,a?(wt=Bi(n,r),wt!=null&&A.unshift(Vr(n,wt,ot))):a||(wt=Bi(n,r),wt!=null&&A.push(Vr(n,wt,ot)))),n=n.return}A.length!==0&&t.push({event:e,listeners:A})}var Yf=/\r\n?/g,Vf=/\u0000|\uFFFD/g;function jh(t){return(typeof t=="string"?t:""+t).replace(Yf,`
`).replace(Vf,"")}function Ch(t,e){return e=jh(e),jh(t)===e}function Fe(t,e,n,i,a,r){switch(n){case"children":typeof i=="string"?e==="body"||e==="textarea"&&i===""||Pi(t,i):(typeof i=="number"||typeof i=="bigint")&&e!=="body"&&Pi(t,""+i);break;case"className":Gs(t,"class",i);break;case"tabIndex":Gs(t,"tabindex",i);break;case"dir":case"role":case"viewBox":case"width":case"height":Gs(t,n,i);break;case"style":lr(t,i,r);break;case"data":if(e!=="object"){Gs(t,"data",i);break}case"src":case"href":if(i===""&&(e!=="a"||n!=="href")){t.removeAttribute(n);break}if(i==null||typeof i=="function"||typeof i=="symbol"||typeof i=="boolean"){t.removeAttribute(n);break}i=mi(""+i),t.setAttribute(n,i);break;case"action":case"formAction":if(typeof i=="function"){t.setAttribute(n,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof r=="function"&&(n==="formAction"?(e!=="input"&&Fe(t,e,"name",a.name,a,null),Fe(t,e,"formEncType",a.formEncType,a,null),Fe(t,e,"formMethod",a.formMethod,a,null),Fe(t,e,"formTarget",a.formTarget,a,null)):(Fe(t,e,"encType",a.encType,a,null),Fe(t,e,"method",a.method,a,null),Fe(t,e,"target",a.target,a,null)));if(i==null||typeof i=="symbol"||typeof i=="boolean"){t.removeAttribute(n);break}i=mi(""+i),t.setAttribute(n,i);break;case"onClick":i!=null&&(t.onclick=Ln);break;case"onScroll":i!=null&&xe("scroll",t);break;case"onScrollEnd":i!=null&&xe("scrollend",t);break;case"dangerouslySetInnerHTML":if(i!=null){if(typeof i!="object"||!("__html"in i))throw Error(c(61));if(n=i.__html,n!=null){if(a.children!=null)throw Error(c(60));t.innerHTML=n}}break;case"multiple":t.multiple=i&&typeof i!="function"&&typeof i!="symbol";break;case"muted":t.muted=i&&typeof i!="function"&&typeof i!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(i==null||typeof i=="function"||typeof i=="boolean"||typeof i=="symbol"){t.removeAttribute("xlink:href");break}n=mi(""+i),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",n);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":i!=null&&typeof i!="function"&&typeof i!="symbol"?t.setAttribute(n,""+i):t.removeAttribute(n);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":i&&typeof i!="function"&&typeof i!="symbol"?t.setAttribute(n,""):t.removeAttribute(n);break;case"capture":case"download":i===!0?t.setAttribute(n,""):i!==!1&&i!=null&&typeof i!="function"&&typeof i!="symbol"?t.setAttribute(n,i):t.removeAttribute(n);break;case"cols":case"rows":case"size":case"span":i!=null&&typeof i!="function"&&typeof i!="symbol"&&!isNaN(i)&&1<=i?t.setAttribute(n,i):t.removeAttribute(n);break;case"rowSpan":case"start":i==null||typeof i=="function"||typeof i=="symbol"||isNaN(i)?t.removeAttribute(n):t.setAttribute(n,i);break;case"popover":xe("beforetoggle",t),xe("toggle",t),pe(t,"popover",i);break;case"xlinkActuate":Jn(t,"http://www.w3.org/1999/xlink","xlink:actuate",i);break;case"xlinkArcrole":Jn(t,"http://www.w3.org/1999/xlink","xlink:arcrole",i);break;case"xlinkRole":Jn(t,"http://www.w3.org/1999/xlink","xlink:role",i);break;case"xlinkShow":Jn(t,"http://www.w3.org/1999/xlink","xlink:show",i);break;case"xlinkTitle":Jn(t,"http://www.w3.org/1999/xlink","xlink:title",i);break;case"xlinkType":Jn(t,"http://www.w3.org/1999/xlink","xlink:type",i);break;case"xmlBase":Jn(t,"http://www.w3.org/XML/1998/namespace","xml:base",i);break;case"xmlLang":Jn(t,"http://www.w3.org/XML/1998/namespace","xml:lang",i);break;case"xmlSpace":Jn(t,"http://www.w3.org/XML/1998/namespace","xml:space",i);break;case"is":pe(t,"is",i);break;case"innerText":case"textContent":break;default:(!(2<n.length)||n[0]!=="o"&&n[0]!=="O"||n[1]!=="n"&&n[1]!=="N")&&(n=yl.get(n)||n,pe(t,n,i))}}function Hc(t,e,n,i,a,r){switch(n){case"style":lr(t,i,r);break;case"dangerouslySetInnerHTML":if(i!=null){if(typeof i!="object"||!("__html"in i))throw Error(c(61));if(n=i.__html,n!=null){if(a.children!=null)throw Error(c(60));t.innerHTML=n}}break;case"children":typeof i=="string"?Pi(t,i):(typeof i=="number"||typeof i=="bigint")&&Pi(t,""+i);break;case"onScroll":i!=null&&xe("scroll",t);break;case"onScrollEnd":i!=null&&xe("scrollend",t);break;case"onClick":i!=null&&(t.onclick=Ln);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!qs.hasOwnProperty(n))t:{if(n[0]==="o"&&n[1]==="n"&&(a=n.endsWith("Capture"),e=n.slice(2,a?n.length-7:void 0),r=t[$e]||null,r=r!=null?r[n]:null,typeof r=="function"&&t.removeEventListener(e,r,a),typeof i=="function")){typeof r!="function"&&r!==null&&(n in t?t[n]=null:t.hasAttribute(n)&&t.removeAttribute(n)),t.addEventListener(e,i,a);break t}n in t?t[n]=i:i===!0?t.setAttribute(n,""):pe(t,n,i)}}}function _n(t,e,n){switch(e){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":xe("error",t),xe("load",t);var i=!1,a=!1,r;for(r in n)if(n.hasOwnProperty(r)){var A=n[r];if(A!=null)switch(r){case"src":i=!0;break;case"srcSet":a=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(c(137,e));default:Fe(t,e,r,A,n,null)}}a&&Fe(t,e,"srcSet",n.srcSet,n,null),i&&Fe(t,e,"src",n.src,n,null);return;case"input":xe("invalid",t);var q=r=A=a=null,ot=null,wt=null;for(i in n)if(n.hasOwnProperty(i)){var Ot=n[i];if(Ot!=null)switch(i){case"name":a=Ot;break;case"type":A=Ot;break;case"checked":ot=Ot;break;case"defaultChecked":wt=Ot;break;case"value":r=Ot;break;case"defaultValue":q=Ot;break;case"children":case"dangerouslySetInnerHTML":if(Ot!=null)throw Error(c(137,e));break;default:Fe(t,e,i,Ot,n,null)}}ma(t,r,q,ot,wt,A,a,!1);return;case"select":xe("invalid",t),i=A=r=null;for(a in n)if(n.hasOwnProperty(a)&&(q=n[a],q!=null))switch(a){case"value":r=q;break;case"defaultValue":A=q;break;case"multiple":i=q;default:Fe(t,e,a,q,n,null)}e=r,n=A,t.multiple=!!i,e!=null?pi(t,!!i,e,!1):n!=null&&pi(t,!!i,n,!0);return;case"textarea":xe("invalid",t),r=a=i=null;for(A in n)if(n.hasOwnProperty(A)&&(q=n[A],q!=null))switch(A){case"value":i=q;break;case"defaultValue":a=q;break;case"children":r=q;break;case"dangerouslySetInnerHTML":if(q!=null)throw Error(c(91));break;default:Fe(t,e,A,q,n,null)}Ys(t,i,a,r);return;case"option":for(ot in n)n.hasOwnProperty(ot)&&(i=n[ot],i!=null)&&(ot==="selected"?t.selected=i&&typeof i!="function"&&typeof i!="symbol":Fe(t,e,ot,i,n,null));return;case"dialog":xe("beforetoggle",t),xe("toggle",t),xe("cancel",t),xe("close",t);break;case"iframe":case"object":xe("load",t);break;case"video":case"audio":for(i=0;i<Yr.length;i++)xe(Yr[i],t);break;case"image":xe("error",t),xe("load",t);break;case"details":xe("toggle",t);break;case"embed":case"source":case"link":xe("error",t),xe("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(wt in n)if(n.hasOwnProperty(wt)&&(i=n[wt],i!=null))switch(wt){case"children":case"dangerouslySetInnerHTML":throw Error(c(137,e));default:Fe(t,e,wt,i,n,null)}return;default:if(cr(e)){for(Ot in n)n.hasOwnProperty(Ot)&&(i=n[Ot],i!==void 0&&Hc(t,e,Ot,i,n,void 0));return}}for(q in n)n.hasOwnProperty(q)&&(i=n[q],i!=null&&Fe(t,e,q,i,n,null))}function Wf(t,e,n,i){switch(e){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var a=null,r=null,A=null,q=null,ot=null,wt=null,Ot=null;for(Mt in n){var It=n[Mt];if(n.hasOwnProperty(Mt)&&It!=null)switch(Mt){case"checked":break;case"value":break;case"defaultValue":ot=It;default:i.hasOwnProperty(Mt)||Fe(t,e,Mt,null,i,It)}}for(var Ct in i){var Mt=i[Ct];if(It=n[Ct],i.hasOwnProperty(Ct)&&(Mt!=null||It!=null))switch(Ct){case"type":r=Mt;break;case"name":a=Mt;break;case"checked":wt=Mt;break;case"defaultChecked":Ot=Mt;break;case"value":A=Mt;break;case"defaultValue":q=Mt;break;case"children":case"dangerouslySetInnerHTML":if(Mt!=null)throw Error(c(137,e));break;default:Mt!==It&&Fe(t,e,Ct,Mt,i,It)}}Si(t,A,q,ot,wt,Ot,r,a);return;case"select":Mt=A=q=Ct=null;for(r in n)if(ot=n[r],n.hasOwnProperty(r)&&ot!=null)switch(r){case"value":break;case"multiple":Mt=ot;default:i.hasOwnProperty(r)||Fe(t,e,r,null,i,ot)}for(a in i)if(r=i[a],ot=n[a],i.hasOwnProperty(a)&&(r!=null||ot!=null))switch(a){case"value":Ct=r;break;case"defaultValue":q=r;break;case"multiple":A=r;default:r!==ot&&Fe(t,e,a,r,i,ot)}e=q,n=A,i=Mt,Ct!=null?pi(t,!!n,Ct,!1):!!i!=!!n&&(e!=null?pi(t,!!n,e,!0):pi(t,!!n,n?[]:"",!1));return;case"textarea":Mt=Ct=null;for(q in n)if(a=n[q],n.hasOwnProperty(q)&&a!=null&&!i.hasOwnProperty(q))switch(q){case"value":break;case"children":break;default:Fe(t,e,q,null,i,a)}for(A in i)if(a=i[A],r=n[A],i.hasOwnProperty(A)&&(a!=null||r!=null))switch(A){case"value":Ct=a;break;case"defaultValue":Mt=a;break;case"children":break;case"dangerouslySetInnerHTML":if(a!=null)throw Error(c(91));break;default:a!==r&&Fe(t,e,A,a,i,r)}or(t,Ct,Mt);return;case"option":for(var ne in n)Ct=n[ne],n.hasOwnProperty(ne)&&Ct!=null&&!i.hasOwnProperty(ne)&&(ne==="selected"?t.selected=!1:Fe(t,e,ne,null,i,Ct));for(ot in i)Ct=i[ot],Mt=n[ot],i.hasOwnProperty(ot)&&Ct!==Mt&&(Ct!=null||Mt!=null)&&(ot==="selected"?t.selected=Ct&&typeof Ct!="function"&&typeof Ct!="symbol":Fe(t,e,ot,Ct,i,Mt));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var ce in n)Ct=n[ce],n.hasOwnProperty(ce)&&Ct!=null&&!i.hasOwnProperty(ce)&&Fe(t,e,ce,null,i,Ct);for(wt in i)if(Ct=i[wt],Mt=n[wt],i.hasOwnProperty(wt)&&Ct!==Mt&&(Ct!=null||Mt!=null))switch(wt){case"children":case"dangerouslySetInnerHTML":if(Ct!=null)throw Error(c(137,e));break;default:Fe(t,e,wt,Ct,i,Mt)}return;default:if(cr(e)){for(var ze in n)Ct=n[ze],n.hasOwnProperty(ze)&&Ct!==void 0&&!i.hasOwnProperty(ze)&&Hc(t,e,ze,void 0,i,Ct);for(Ot in i)Ct=i[Ot],Mt=n[Ot],!i.hasOwnProperty(Ot)||Ct===Mt||Ct===void 0&&Mt===void 0||Hc(t,e,Ot,Ct,i,Mt);return}}for(var xt in n)Ct=n[xt],n.hasOwnProperty(xt)&&Ct!=null&&!i.hasOwnProperty(xt)&&Fe(t,e,xt,null,i,Ct);for(It in i)Ct=i[It],Mt=n[It],!i.hasOwnProperty(It)||Ct===Mt||Ct==null&&Mt==null||Fe(t,e,It,Ct,i,Mt)}function Mh(t){switch(t){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function Qf(){if(typeof performance.getEntriesByType=="function"){for(var t=0,e=0,n=performance.getEntriesByType("resource"),i=0;i<n.length;i++){var a=n[i],r=a.transferSize,A=a.initiatorType,q=a.duration;if(r&&q&&Mh(A)){for(A=0,q=a.responseEnd,i+=1;i<n.length;i++){var ot=n[i],wt=ot.startTime;if(wt>q)break;var Ot=ot.transferSize,It=ot.initiatorType;Ot&&Mh(It)&&(ot=ot.responseEnd,A+=Ot*(ot<q?1:(q-wt)/(ot-wt)))}if(--i,e+=8*(r+A)/(a.duration/1e3),t++,10<t)break}}if(0<t)return e/t/1e6}return navigator.connection&&(t=navigator.connection.downlink,typeof t=="number")?t:5}var Gc=null,Xc=null;function el(t){return t.nodeType===9?t:t.ownerDocument}function kh(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Nh(t,e){if(t===0)switch(e){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&e==="foreignObject"?0:t}function Kc(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.children=="bigint"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Yc=null;function Zf(){var t=window.event;return t&&t.type==="popstate"?t===Yc?!1:(Yc=t,!0):(Yc=null,!1)}var Dh=typeof setTimeout=="function"?setTimeout:void 0,Jf=typeof clearTimeout=="function"?clearTimeout:void 0,Oh=typeof Promise=="function"?Promise:void 0,$f=typeof queueMicrotask=="function"?queueMicrotask:typeof Oh<"u"?function(t){return Oh.resolve(null).then(t).catch(tp)}:Dh;function tp(t){setTimeout(function(){throw t})}function Ls(t){return t==="head"}function Lh(t,e){var n=e,i=0;do{var a=n.nextSibling;if(t.removeChild(n),a&&a.nodeType===8)if(n=a.data,n==="/$"||n==="/&"){if(i===0){t.removeChild(a),ir(e);return}i--}else if(n==="$"||n==="$?"||n==="$~"||n==="$!"||n==="&")i++;else if(n==="html")Wr(t.ownerDocument.documentElement);else if(n==="head"){n=t.ownerDocument.head,Wr(n);for(var r=n.firstChild;r;){var A=r.nextSibling,q=r.nodeName;r[Un]||q==="SCRIPT"||q==="STYLE"||q==="LINK"&&r.rel.toLowerCase()==="stylesheet"||n.removeChild(r),r=A}}else n==="body"&&Wr(t.ownerDocument.body);n=a}while(n);ir(e)}function Ph(t,e){var n=t;t=0;do{var i=n.nextSibling;if(n.nodeType===1?e?(n._stashedDisplay=n.style.display,n.style.display="none"):(n.style.display=n._stashedDisplay||"",n.getAttribute("style")===""&&n.removeAttribute("style")):n.nodeType===3&&(e?(n._stashedText=n.nodeValue,n.nodeValue=""):n.nodeValue=n._stashedText||""),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(t===0)break;t--}else n!=="$"&&n!=="$?"&&n!=="$~"&&n!=="$!"||t++;n=i}while(n)}function Vc(t){var e=t.firstChild;for(e&&e.nodeType===10&&(e=e.nextSibling);e;){var n=e;switch(e=e.nextSibling,n.nodeName){case"HTML":case"HEAD":case"BODY":Vc(n),fa(n);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(n.rel.toLowerCase()==="stylesheet")continue}t.removeChild(n)}}function ep(t,e,n,i){for(;t.nodeType===1;){var a=n;if(t.nodeName.toLowerCase()!==e.toLowerCase()){if(!i&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(i){if(!t[Un])switch(e){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(r=t.getAttribute("rel"),r==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(r!==a.rel||t.getAttribute("href")!==(a.href==null||a.href===""?null:a.href)||t.getAttribute("crossorigin")!==(a.crossOrigin==null?null:a.crossOrigin)||t.getAttribute("title")!==(a.title==null?null:a.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(r=t.getAttribute("src"),(r!==(a.src==null?null:a.src)||t.getAttribute("type")!==(a.type==null?null:a.type)||t.getAttribute("crossorigin")!==(a.crossOrigin==null?null:a.crossOrigin))&&r&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(e==="input"&&t.type==="hidden"){var r=a.name==null?null:""+a.name;if(a.type==="hidden"&&t.getAttribute("name")===r)return t}else return t;if(t=li(t.nextSibling),t===null)break}return null}function np(t,e,n){if(e==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!n||(t=li(t.nextSibling),t===null))return null;return t}function Fh(t,e){for(;t.nodeType!==8;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!e||(t=li(t.nextSibling),t===null))return null;return t}function Wc(t){return t.data==="$?"||t.data==="$~"}function Qc(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState!=="loading"}function ip(t,e){var n=t.ownerDocument;if(t.data==="$~")t._reactRetry=e;else if(t.data!=="$?"||n.readyState!=="loading")e();else{var i=function(){e(),n.removeEventListener("DOMContentLoaded",i)};n.addEventListener("DOMContentLoaded",i),t._reactRetry=i}}function li(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?"||e==="$~"||e==="&"||e==="F!"||e==="F")break;if(e==="/$"||e==="/&")return null}}return t}var Zc=null;function zh(t){t=t.nextSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"||n==="/&"){if(e===0)return li(t.nextSibling);e--}else n!=="$"&&n!=="$!"&&n!=="$?"&&n!=="$~"&&n!=="&"||e++}t=t.nextSibling}return null}function Bh(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"||n==="$~"||n==="&"){if(e===0)return t;e--}else n!=="/$"&&n!=="/&"||e++}t=t.previousSibling}return null}function Ih(t,e,n){switch(e=el(n),t){case"html":if(t=e.documentElement,!t)throw Error(c(452));return t;case"head":if(t=e.head,!t)throw Error(c(453));return t;case"body":if(t=e.body,!t)throw Error(c(454));return t;default:throw Error(c(451))}}function Wr(t){for(var e=t.attributes;e.length;)t.removeAttributeNode(e[0]);fa(t)}var ci=new Map,Uh=new Set;function nl(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var rs=Y.d;Y.d={f:sp,r:ap,D:rp,C:op,L:lp,m:cp,X:dp,S:up,M:hp};function sp(){var t=rs.f(),e=Yo();return t||e}function ap(t){var e=Oe(t);e!==null&&e.tag===5&&e.type==="form"?sd(e):rs.r(t)}var tr=typeof document>"u"?null:document;function qh(t,e,n){var i=tr;if(i&&typeof e=="string"&&e){var a=hn(e);a='link[rel="'+t+'"][href="'+a+'"]',typeof n=="string"&&(a+='[crossorigin="'+n+'"]'),Uh.has(a)||(Uh.add(a),t={rel:t,crossOrigin:n,href:e},i.querySelector(a)===null&&(e=i.createElement("link"),_n(e,"link",t),tn(e),i.head.appendChild(e)))}}function rp(t){rs.D(t),qh("dns-prefetch",t,null)}function op(t,e){rs.C(t,e),qh("preconnect",t,e)}function lp(t,e,n){rs.L(t,e,n);var i=tr;if(i&&t&&e){var a='link[rel="preload"][as="'+hn(e)+'"]';e==="image"&&n&&n.imageSrcSet?(a+='[imagesrcset="'+hn(n.imageSrcSet)+'"]',typeof n.imageSizes=="string"&&(a+='[imagesizes="'+hn(n.imageSizes)+'"]')):a+='[href="'+hn(t)+'"]';var r=a;switch(e){case"style":r=er(t);break;case"script":r=nr(t)}ci.has(r)||(t=d({rel:"preload",href:e==="image"&&n&&n.imageSrcSet?void 0:t,as:e},n),ci.set(r,t),i.querySelector(a)!==null||e==="style"&&i.querySelector(Qr(r))||e==="script"&&i.querySelector(Zr(r))||(e=i.createElement("link"),_n(e,"link",t),tn(e),i.head.appendChild(e)))}}function cp(t,e){rs.m(t,e);var n=tr;if(n&&t){var i=e&&typeof e.as=="string"?e.as:"script",a='link[rel="modulepreload"][as="'+hn(i)+'"][href="'+hn(t)+'"]',r=a;switch(i){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":r=nr(t)}if(!ci.has(r)&&(t=d({rel:"modulepreload",href:t},e),ci.set(r,t),n.querySelector(a)===null)){switch(i){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(n.querySelector(Zr(r)))return}i=n.createElement("link"),_n(i,"link",t),tn(i),n.head.appendChild(i)}}}function up(t,e,n){rs.S(t,e,n);var i=tr;if(i&&t){var a=Sn(i).hoistableStyles,r=er(t);e=e||"default";var A=a.get(r);if(!A){var q={loading:0,preload:null};if(A=i.querySelector(Qr(r)))q.loading=5;else{t=d({rel:"stylesheet",href:t,"data-precedence":e},n),(n=ci.get(r))&&Jc(t,n);var ot=A=i.createElement("link");tn(ot),_n(ot,"link",t),ot._p=new Promise(function(wt,Ot){ot.onload=wt,ot.onerror=Ot}),ot.addEventListener("load",function(){q.loading|=1}),ot.addEventListener("error",function(){q.loading|=2}),q.loading|=4,il(A,e,i)}A={type:"stylesheet",instance:A,count:1,state:q},a.set(r,A)}}}function dp(t,e){rs.X(t,e);var n=tr;if(n&&t){var i=Sn(n).hoistableScripts,a=nr(t),r=i.get(a);r||(r=n.querySelector(Zr(a)),r||(t=d({src:t,async:!0},e),(e=ci.get(a))&&$c(t,e),r=n.createElement("script"),tn(r),_n(r,"link",t),n.head.appendChild(r)),r={type:"script",instance:r,count:1,state:null},i.set(a,r))}}function hp(t,e){rs.M(t,e);var n=tr;if(n&&t){var i=Sn(n).hoistableScripts,a=nr(t),r=i.get(a);r||(r=n.querySelector(Zr(a)),r||(t=d({src:t,async:!0,type:"module"},e),(e=ci.get(a))&&$c(t,e),r=n.createElement("script"),tn(r),_n(r,"link",t),n.head.appendChild(r)),r={type:"script",instance:r,count:1,state:null},i.set(a,r))}}function Hh(t,e,n,i){var a=(a=m.current)?nl(a):null;if(!a)throw Error(c(446));switch(t){case"meta":case"title":return null;case"style":return typeof n.precedence=="string"&&typeof n.href=="string"?(e=er(n.href),n=Sn(a).hoistableStyles,i=n.get(e),i||(i={type:"style",instance:null,count:0,state:null},n.set(e,i)),i):{type:"void",instance:null,count:0,state:null};case"link":if(n.rel==="stylesheet"&&typeof n.href=="string"&&typeof n.precedence=="string"){t=er(n.href);var r=Sn(a).hoistableStyles,A=r.get(t);if(A||(a=a.ownerDocument||a,A={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},r.set(t,A),(r=a.querySelector(Qr(t)))&&!r._p&&(A.instance=r,A.state.loading=5),ci.has(t)||(n={rel:"preload",as:"style",href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},ci.set(t,n),r||fp(a,t,n,A.state))),e&&i===null)throw Error(c(528,""));return A}if(e&&i!==null)throw Error(c(529,""));return null;case"script":return e=n.async,n=n.src,typeof n=="string"&&e&&typeof e!="function"&&typeof e!="symbol"?(e=nr(n),n=Sn(a).hoistableScripts,i=n.get(e),i||(i={type:"script",instance:null,count:0,state:null},n.set(e,i)),i):{type:"void",instance:null,count:0,state:null};default:throw Error(c(444,t))}}function er(t){return'href="'+hn(t)+'"'}function Qr(t){return'link[rel="stylesheet"]['+t+"]"}function Gh(t){return d({},t,{"data-precedence":t.precedence,precedence:null})}function fp(t,e,n,i){t.querySelector('link[rel="preload"][as="style"]['+e+"]")?i.loading=1:(e=t.createElement("link"),i.preload=e,e.addEventListener("load",function(){return i.loading|=1}),e.addEventListener("error",function(){return i.loading|=2}),_n(e,"link",n),tn(e),t.head.appendChild(e))}function nr(t){return'[src="'+hn(t)+'"]'}function Zr(t){return"script[async]"+t}function Xh(t,e,n){if(e.count++,e.instance===null)switch(e.type){case"style":var i=t.querySelector('style[data-href~="'+hn(n.href)+'"]');if(i)return e.instance=i,tn(i),i;var a=d({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return i=(t.ownerDocument||t).createElement("style"),tn(i),_n(i,"style",a),il(i,n.precedence,t),e.instance=i;case"stylesheet":a=er(n.href);var r=t.querySelector(Qr(a));if(r)return e.state.loading|=4,e.instance=r,tn(r),r;i=Gh(n),(a=ci.get(a))&&Jc(i,a),r=(t.ownerDocument||t).createElement("link"),tn(r);var A=r;return A._p=new Promise(function(q,ot){A.onload=q,A.onerror=ot}),_n(r,"link",i),e.state.loading|=4,il(r,n.precedence,t),e.instance=r;case"script":return r=nr(n.src),(a=t.querySelector(Zr(r)))?(e.instance=a,tn(a),a):(i=n,(a=ci.get(r))&&(i=d({},n),$c(i,a)),t=t.ownerDocument||t,a=t.createElement("script"),tn(a),_n(a,"link",i),t.head.appendChild(a),e.instance=a);case"void":return null;default:throw Error(c(443,e.type))}else e.type==="stylesheet"&&(e.state.loading&4)===0&&(i=e.instance,e.state.loading|=4,il(i,n.precedence,t));return e.instance}function il(t,e,n){for(var i=n.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),a=i.length?i[i.length-1]:null,r=a,A=0;A<i.length;A++){var q=i[A];if(q.dataset.precedence===e)r=q;else if(r!==a)break}r?r.parentNode.insertBefore(t,r.nextSibling):(e=n.nodeType===9?n.head:n,e.insertBefore(t,e.firstChild))}function Jc(t,e){t.crossOrigin==null&&(t.crossOrigin=e.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=e.referrerPolicy),t.title==null&&(t.title=e.title)}function $c(t,e){t.crossOrigin==null&&(t.crossOrigin=e.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=e.referrerPolicy),t.integrity==null&&(t.integrity=e.integrity)}var sl=null;function Kh(t,e,n){if(sl===null){var i=new Map,a=sl=new Map;a.set(n,i)}else a=sl,i=a.get(n),i||(i=new Map,a.set(n,i));if(i.has(t))return i;for(i.set(t,null),n=n.getElementsByTagName(t),a=0;a<n.length;a++){var r=n[a];if(!(r[Un]||r[qe]||t==="link"&&r.getAttribute("rel")==="stylesheet")&&r.namespaceURI!=="http://www.w3.org/2000/svg"){var A=r.getAttribute(e)||"";A=t+A;var q=i.get(A);q?q.push(r):i.set(A,[r])}}return i}function Yh(t,e,n){t=t.ownerDocument||t,t.head.insertBefore(n,e==="title"?t.querySelector("head > title"):null)}function pp(t,e,n){if(n===1||e.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof e.precedence!="string"||typeof e.href!="string"||e.href==="")break;return!0;case"link":if(typeof e.rel!="string"||typeof e.href!="string"||e.href===""||e.onLoad||e.onError)break;return e.rel==="stylesheet"?(t=e.disabled,typeof e.precedence=="string"&&t==null):!0;case"script":if(e.async&&typeof e.async!="function"&&typeof e.async!="symbol"&&!e.onLoad&&!e.onError&&e.src&&typeof e.src=="string")return!0}return!1}function Vh(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}function mp(t,e,n,i){if(n.type==="stylesheet"&&(typeof i.media!="string"||matchMedia(i.media).matches!==!1)&&(n.state.loading&4)===0){if(n.instance===null){var a=er(i.href),r=e.querySelector(Qr(a));if(r){e=r._p,e!==null&&typeof e=="object"&&typeof e.then=="function"&&(t.count++,t=al.bind(t),e.then(t,t)),n.state.loading|=4,n.instance=r,tn(r);return}r=e.ownerDocument||e,i=Gh(i),(a=ci.get(a))&&Jc(i,a),r=r.createElement("link"),tn(r);var A=r;A._p=new Promise(function(q,ot){A.onload=q,A.onerror=ot}),_n(r,"link",i),n.instance=r}t.stylesheets===null&&(t.stylesheets=new Map),t.stylesheets.set(n,e),(e=n.state.preload)&&(n.state.loading&3)===0&&(t.count++,n=al.bind(t),e.addEventListener("load",n),e.addEventListener("error",n))}}var tu=0;function gp(t,e){return t.stylesheets&&t.count===0&&ol(t,t.stylesheets),0<t.count||0<t.imgCount?function(n){var i=setTimeout(function(){if(t.stylesheets&&ol(t,t.stylesheets),t.unsuspend){var r=t.unsuspend;t.unsuspend=null,r()}},6e4+e);0<t.imgBytes&&tu===0&&(tu=62500*Qf());var a=setTimeout(function(){if(t.waitingForImages=!1,t.count===0&&(t.stylesheets&&ol(t,t.stylesheets),t.unsuspend)){var r=t.unsuspend;t.unsuspend=null,r()}},(t.imgBytes>tu?50:800)+e);return t.unsuspend=n,function(){t.unsuspend=null,clearTimeout(i),clearTimeout(a)}}:null}function al(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)ol(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var rl=null;function ol(t,e){t.stylesheets=null,t.unsuspend!==null&&(t.count++,rl=new Map,e.forEach(yp,t),rl=null,al.call(t))}function yp(t,e){if(!(e.state.loading&4)){var n=rl.get(t);if(n)var i=n.get(null);else{n=new Map,rl.set(t,n);for(var a=t.querySelectorAll("link[data-precedence],style[data-precedence]"),r=0;r<a.length;r++){var A=a[r];(A.nodeName==="LINK"||A.getAttribute("media")!=="not all")&&(n.set(A.dataset.precedence,A),i=A)}i&&n.set(null,i)}a=e.instance,A=a.getAttribute("data-precedence"),r=n.get(A)||i,r===i&&n.set(null,a),n.set(A,a),this.count++,i=al.bind(this),a.addEventListener("load",i),a.addEventListener("error",i),r?r.parentNode.insertBefore(a,r.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(a,t.firstChild)),e.state.loading|=4}}var Jr={$$typeof:Q,Provider:null,Consumer:null,_currentValue:k,_currentValue2:k,_threadCount:0};function xp(t,e,n,i,a,r,A,q,ot){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=ke(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ke(0),this.hiddenUpdates=ke(null),this.identifierPrefix=i,this.onUncaughtError=a,this.onCaughtError=r,this.onRecoverableError=A,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=ot,this.incompleteTransitions=new Map}function Wh(t,e,n,i,a,r,A,q,ot,wt,Ot,It){return t=new xp(t,e,n,A,ot,wt,Ot,It,q),e=1,r===!0&&(e|=24),r=Gn(3,null,null,e),t.current=r,r.stateNode=t,e=Dl(),e.refCount++,t.pooledCache=e,e.refCount++,r.memoizedState={element:i,isDehydrated:n,cache:e},Fl(r),t}function Qh(t){return t?(t=Da,t):Da}function Zh(t,e,n,i,a,r){a=Qh(a),i.context===null?i.context=a:i.pendingContext=a,i=Ss(e),i.payload={element:n},r=r===void 0?null:r,r!==null&&(i.callback=r),n=ws(t,i,e),n!==null&&(In(n,t,e),Mr(n,t,e))}function Jh(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function eu(t,e){Jh(t,e),(t=t.alternate)&&Jh(t,e)}function $h(t){if(t.tag===13||t.tag===31){var e=Me(t,67108864);e!==null&&In(e,t,67108864),eu(t,67108864)}}function tf(t){if(t.tag===13||t.tag===31){var e=Wn();e=un(e);var n=Me(t,e);n!==null&&In(n,t,e),eu(t,e)}}var ll=!0;function vp(t,e,n,i){var a=nt.T;nt.T=null;var r=Y.p;try{Y.p=2,nu(t,e,n,i)}finally{Y.p=r,nt.T=a}}function bp(t,e,n,i){var a=nt.T;nt.T=null;var r=Y.p;try{Y.p=8,nu(t,e,n,i)}finally{Y.p=r,nt.T=a}}function nu(t,e,n,i){if(ll){var a=iu(i);if(a===null)qc(t,e,i,cl,n),nf(t,i);else if(Ep(a,t,e,n,i))i.stopPropagation();else if(nf(t,i),e&4&&-1<_p.indexOf(t)){for(;a!==null;){var r=Oe(a);if(r!==null)switch(r.tag){case 3:if(r=r.stateNode,r.current.memoizedState.isDehydrated){var A=cn(r.pendingLanes);if(A!==0){var q=r;for(q.pendingLanes|=2,q.entangledLanes|=2;A;){var ot=1<<31-st(A);q.entanglements[1]|=ot,A&=~ot}Ni(r),(je&6)===0&&(Xo=oe()+500,Kr(0))}}break;case 31:case 13:q=Me(r,2),q!==null&&In(q,r,2),Yo(),eu(r,2)}if(r=iu(i),r===null&&qc(t,e,i,cl,n),r===a)break;a=r}a!==null&&i.stopPropagation()}else qc(t,e,i,null,n)}}function iu(t){return t=ga(t),su(t)}var cl=null;function su(t){if(cl=null,t=Ei(t),t!==null){var e=B(t);if(e===null)t=null;else{var n=e.tag;if(n===13){if(t=N(e),t!==null)return t;t=null}else if(n===31){if(t=U(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null)}}return cl=t,null}function ef(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(_e()){case Ce:return 2;case Ue:return 8;case jn:case We:return 32;case En:return 268435456;default:return 32}default:return 32}}var au=!1,Ps=null,Fs=null,zs=null,$r=new Map,to=new Map,Bs=[],_p="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function nf(t,e){switch(t){case"focusin":case"focusout":Ps=null;break;case"dragenter":case"dragleave":Fs=null;break;case"mouseover":case"mouseout":zs=null;break;case"pointerover":case"pointerout":$r.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":to.delete(e.pointerId)}}function eo(t,e,n,i,a,r){return t===null||t.nativeEvent!==r?(t={blockedOn:e,domEventName:n,eventSystemFlags:i,nativeEvent:r,targetContainers:[a]},e!==null&&(e=Oe(e),e!==null&&$h(e)),t):(t.eventSystemFlags|=i,e=t.targetContainers,a!==null&&e.indexOf(a)===-1&&e.push(a),t)}function Ep(t,e,n,i,a){switch(e){case"focusin":return Ps=eo(Ps,t,e,n,i,a),!0;case"dragenter":return Fs=eo(Fs,t,e,n,i,a),!0;case"mouseover":return zs=eo(zs,t,e,n,i,a),!0;case"pointerover":var r=a.pointerId;return $r.set(r,eo($r.get(r)||null,t,e,n,i,a)),!0;case"gotpointercapture":return r=a.pointerId,to.set(r,eo(to.get(r)||null,t,e,n,i,a)),!0}return!1}function sf(t){var e=Ei(t.target);if(e!==null){var n=B(e);if(n!==null){if(e=n.tag,e===13){if(e=N(n),e!==null){t.blockedOn=e,Us(t.priority,function(){tf(n)});return}}else if(e===31){if(e=U(n),e!==null){t.blockedOn=e,Us(t.priority,function(){tf(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function ul(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=iu(t.nativeEvent);if(n===null){n=t.nativeEvent;var i=new n.constructor(n.type,n);$n=i,n.target.dispatchEvent(i),$n=null}else return e=Oe(n),e!==null&&$h(e),t.blockedOn=n,!1;e.shift()}return!0}function af(t,e,n){ul(t)&&n.delete(e)}function Ap(){au=!1,Ps!==null&&ul(Ps)&&(Ps=null),Fs!==null&&ul(Fs)&&(Fs=null),zs!==null&&ul(zs)&&(zs=null),$r.forEach(af),to.forEach(af)}function dl(t,e){t.blockedOn===e&&(t.blockedOn=null,au||(au=!0,R.unstable_scheduleCallback(R.unstable_NormalPriority,Ap)))}var hl=null;function rf(t){hl!==t&&(hl=t,R.unstable_scheduleCallback(R.unstable_NormalPriority,function(){hl===t&&(hl=null);for(var e=0;e<t.length;e+=3){var n=t[e],i=t[e+1],a=t[e+2];if(typeof i!="function"){if(su(i||n)===null)continue;break}var r=Oe(n);r!==null&&(t.splice(e,3),e-=3,ic(r,{pending:!0,data:a,method:n.method,action:i},i,a))}}))}function ir(t){function e(ot){return dl(ot,t)}Ps!==null&&dl(Ps,t),Fs!==null&&dl(Fs,t),zs!==null&&dl(zs,t),$r.forEach(e),to.forEach(e);for(var n=0;n<Bs.length;n++){var i=Bs[n];i.blockedOn===t&&(i.blockedOn=null)}for(;0<Bs.length&&(n=Bs[0],n.blockedOn===null);)sf(n),n.blockedOn===null&&Bs.shift();if(n=(t.ownerDocument||t).$$reactFormReplay,n!=null)for(i=0;i<n.length;i+=3){var a=n[i],r=n[i+1],A=a[$e]||null;if(typeof r=="function")A||rf(n);else if(A){var q=null;if(r&&r.hasAttribute("formAction")){if(a=r,A=r[$e]||null)q=A.formAction;else if(su(a)!==null)continue}else q=A.action;typeof q=="function"?n[i+1]=q:(n.splice(i,3),i-=3),rf(n)}}}function of(){function t(r){r.canIntercept&&r.info==="react-transition"&&r.intercept({handler:function(){return new Promise(function(A){return a=A})},focusReset:"manual",scroll:"manual"})}function e(){a!==null&&(a(),a=null),i||setTimeout(n,20)}function n(){if(!i&&!navigation.transition){var r=navigation.currentEntry;r&&r.url!=null&&navigation.navigate(r.url,{state:r.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var i=!1,a=null;return navigation.addEventListener("navigate",t),navigation.addEventListener("navigatesuccess",e),navigation.addEventListener("navigateerror",e),setTimeout(n,100),function(){i=!0,navigation.removeEventListener("navigate",t),navigation.removeEventListener("navigatesuccess",e),navigation.removeEventListener("navigateerror",e),a!==null&&(a(),a=null)}}}function ru(t){this._internalRoot=t}fl.prototype.render=ru.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(c(409));var n=e.current,i=Wn();Zh(n,i,t,e,null,null)},fl.prototype.unmount=ru.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Zh(t.current,2,null,t,null,null),Yo(),e[Mn]=null}};function fl(t){this._internalRoot=t}fl.prototype.unstable_scheduleHydration=function(t){if(t){var e=hi();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Bs.length&&e!==0&&e<Bs[n].priority;n++);Bs.splice(n,0,t),n===0&&sf(t)}};var lf=f.version;if(lf!=="19.2.4")throw Error(c(527,lf,"19.2.4"));Y.findDOMNode=function(t){var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(c(188)):(t=Object.keys(t).join(","),Error(c(268,t)));return t=u(e),t=t!==null?o(t):null,t=t===null?null:t.stateNode,t};var Sp={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:nt,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var pl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!pl.isDisabled&&pl.supportsFiber)try{Qn=pl.inject(Sp),Bt=pl}catch{}}return reactDomClient_production.createRoot=function(t,e){if(!_(t))throw Error(c(299));var n=!1,i="",a=pd,r=md,A=gd;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(i=e.identifierPrefix),e.onUncaughtError!==void 0&&(a=e.onUncaughtError),e.onCaughtError!==void 0&&(r=e.onCaughtError),e.onRecoverableError!==void 0&&(A=e.onRecoverableError)),e=Wh(t,1,!1,null,null,n,i,null,a,r,A,of),t[Mn]=e.current,Uc(t),new ru(e)},reactDomClient_production.hydrateRoot=function(t,e,n){if(!_(t))throw Error(c(299));var i=!1,a="",r=pd,A=md,q=gd,ot=null;return n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(a=n.identifierPrefix),n.onUncaughtError!==void 0&&(r=n.onUncaughtError),n.onCaughtError!==void 0&&(A=n.onCaughtError),n.onRecoverableError!==void 0&&(q=n.onRecoverableError),n.formState!==void 0&&(ot=n.formState)),e=Wh(t,1,!0,e,n??null,i,a,ot,r,A,q,of),e.context=Qh(null),n=e.current,i=Wn(),i=un(i),a=Ss(i),a.callback=null,ws(n,a,i),n=i,e.current.lanes=n,gn(e,n),Ni(e),t[Mn]=e.current,Uc(t),new fl(e)},reactDomClient_production.version="19.2.4",reactDomClient_production}var hasRequiredClient;function requireClient(){if(hasRequiredClient)return client.exports;hasRequiredClient=1;function R(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(R)}catch(f){console.error(f)}}return R(),client.exports=requireReactDomClient_production(),client.exports}var clientExports=requireClient();const ReactDOM=getDefaultExportFromCjs(clientExports),scriptRel="modulepreload",assetsURL=function(R){return"/"+R},seen={},__vitePreload=function(f,D,c){let _=Promise.resolve();if(D&&D.length>0){let u=function(o){return Promise.all(o.map(d=>Promise.resolve(d).then(b=>({status:"fulfilled",value:b}),b=>({status:"rejected",reason:b}))))};var N=u;document.getElementsByTagName("link");const U=document.querySelector("meta[property=csp-nonce]"),F=U?.nonce||U?.getAttribute("nonce");_=u(D.map(o=>{if(o=assetsURL(o),o in seen)return;seen[o]=!0;const d=o.endsWith(".css"),b=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${o}"]${b}`))return;const g=document.createElement("link");if(g.rel=d?"stylesheet":scriptRel,d||(g.as="script"),g.crossOrigin="",g.href=o,F&&g.setAttribute("nonce",F),document.head.appendChild(g),d)return new Promise((h,E)=>{g.addEventListener("load",h),g.addEventListener("error",()=>E(new Error(`Unable to preload CSS for ${o}`)))})}))}function B(U){const F=new Event("vite:preloadError",{cancelable:!0});if(F.payload=U,window.dispatchEvent(F),!F.defaultPrevented)throw U}return _.then(U=>{for(const F of U||[])F.status==="rejected"&&B(F.reason);return f().catch(B)})};const mergeClasses=(...R)=>R.filter((f,D,c)=>!!f&&f.trim()!==""&&c.indexOf(f)===D).join(" ").trim();const toKebabCase=R=>R.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase();const toCamelCase=R=>R.replace(/^([A-Z])|[\s-_]+(\w)/g,(f,D,c)=>c?c.toUpperCase():D.toLowerCase());const toPascalCase=R=>{const f=toCamelCase(R);return f.charAt(0).toUpperCase()+f.slice(1)};var defaultAttributes={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const hasA11yProp=R=>{for(const f in R)if(f.startsWith("aria-")||f==="role"||f==="title")return!0;return!1};const Icon=reactExports.forwardRef(({color:R="currentColor",size:f=24,strokeWidth:D=2,absoluteStrokeWidth:c,className:_="",children:B,iconNode:N,...U},F)=>reactExports.createElement("svg",{ref:F,...defaultAttributes,width:f,height:f,stroke:R,strokeWidth:c?Number(D)*24/Number(f):D,className:mergeClasses("lucide",_),...!B&&!hasA11yProp(U)&&{"aria-hidden":"true"},...U},[...N.map(([u,o])=>reactExports.createElement(u,o)),...Array.isArray(B)?B:[B]]));const createLucideIcon=(R,f)=>{const D=reactExports.forwardRef(({className:c,..._},B)=>reactExports.createElement(Icon,{ref:B,iconNode:f,className:mergeClasses(`lucide-${toKebabCase(toPascalCase(R))}`,`lucide-${R}`,c),..._}));return D.displayName=toPascalCase(R),D};const __iconNode$z=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],ArrowLeft=createLucideIcon("arrow-left",__iconNode$z);const __iconNode$y=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],ArrowRight=createLucideIcon("arrow-right",__iconNode$y);const __iconNode$x=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],BookOpen=createLucideIcon("book-open",__iconNode$x);const __iconNode$w=[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20",key:"k3hazp"}]],Book=createLucideIcon("book",__iconNode$w);const __iconNode$v=[["path",{d:"M12 18V5",key:"adv99a"}],["path",{d:"M15 13a4.17 4.17 0 0 1-3-4 4.17 4.17 0 0 1-3 4",key:"1e3is1"}],["path",{d:"M17.598 6.5A3 3 0 1 0 12 5a3 3 0 1 0-5.598 1.5",key:"1gqd8o"}],["path",{d:"M17.997 5.125a4 4 0 0 1 2.526 5.77",key:"iwvgf7"}],["path",{d:"M18 18a4 4 0 0 0 2-7.464",key:"efp6ie"}],["path",{d:"M19.967 17.483A4 4 0 1 1 12 18a4 4 0 1 1-7.967-.517",key:"1gq6am"}],["path",{d:"M6 18a4 4 0 0 1-2-7.464",key:"k1g0md"}],["path",{d:"M6.003 5.125a4 4 0 0 0-2.526 5.77",key:"q97ue3"}]],Brain=createLucideIcon("brain",__iconNode$v);const __iconNode$u=[["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M9 22v-3a1 1 0 0 1 1-1h4a1 1 0 0 1 1 1v3",key:"cabbwy"}],["rect",{x:"4",y:"2",width:"16",height:"20",rx:"2",key:"1uxh74"}]],Building=createLucideIcon("building",__iconNode$u);const __iconNode$t=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],Calendar=createLucideIcon("calendar",__iconNode$t);const __iconNode$s=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],ChartColumn=createLucideIcon("chart-column",__iconNode$s);const __iconNode$r=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],ChevronRight=createLucideIcon("chevron-right",__iconNode$r);const __iconNode$q=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],CircleAlert=createLucideIcon("circle-alert",__iconNode$q);const __iconNode$p=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],CircleCheckBig=createLucideIcon("circle-check-big",__iconNode$p);const __iconNode$o=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]],CircleQuestionMark=createLucideIcon("circle-question-mark",__iconNode$o);const __iconNode$n=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],CircleX=createLucideIcon("circle-x",__iconNode$n);const __iconNode$m=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],Clock=createLucideIcon("clock",__iconNode$m);const __iconNode$l=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],DollarSign=createLucideIcon("dollar-sign",__iconNode$l);const __iconNode$k=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],ExternalLink=createLucideIcon("external-link",__iconNode$k);const __iconNode$j=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"m9 15 2 2 4-4",key:"1grp1n"}]],FileCheck=createLucideIcon("file-check",__iconNode$j);const __iconNode$i=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["circle",{cx:"11.5",cy:"14.5",r:"2.5",key:"1bq0ko"}],["path",{d:"M13.3 16.3 15 18",key:"2quom7"}]],FileSearch=createLucideIcon("file-search",__iconNode$i);const __iconNode$h=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],FileText=createLucideIcon("file-text",__iconNode$h);const __iconNode$g=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-6a2 2 0 0 1 2.582 0l7 6A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"r6nss1"}]],House=createLucideIcon("house",__iconNode$g);const __iconNode$f=[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]],Key=createLucideIcon("key",__iconNode$f);const __iconNode$e=[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]],Lightbulb=createLucideIcon("lightbulb",__iconNode$e);const __iconNode$d=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],LoaderCircle=createLucideIcon("loader-circle",__iconNode$d);const __iconNode$c=[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]],Menu=createLucideIcon("menu",__iconNode$c);const __iconNode$b=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],RotateCcw=createLucideIcon("rotate-ccw",__iconNode$b);const __iconNode$a=[["path",{d:"M12 3v18",key:"108xh3"}],["path",{d:"m19 8 3 8a5 5 0 0 1-6 0zV7",key:"zcdpyk"}],["path",{d:"M3 7h1a17 17 0 0 0 8-2 17 17 0 0 0 8 2h1",key:"1yorad"}],["path",{d:"m5 8 3 8a5 5 0 0 1-6 0zV7",key:"eua70x"}],["path",{d:"M7 21h10",key:"1b0cd5"}]],Scale=createLucideIcon("scale",__iconNode$a);const __iconNode$9=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],Shield=createLucideIcon("shield",__iconNode$9);const __iconNode$8=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],Sparkles=createLucideIcon("sparkles",__iconNode$8);const __iconNode$7=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],Target=createLucideIcon("target",__iconNode$7);const __iconNode$6=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],TrendingUp=createLucideIcon("trending-up",__iconNode$6);const __iconNode$5=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],TriangleAlert=createLucideIcon("triangle-alert",__iconNode$5);const __iconNode$4=[["path",{d:"M10 14.66v1.626a2 2 0 0 1-.976 1.696A5 5 0 0 0 7 21.978",key:"1n3hpd"}],["path",{d:"M14 14.66v1.626a2 2 0 0 0 .976 1.696A5 5 0 0 1 17 21.978",key:"rfe1zi"}],["path",{d:"M18 9h1.5a1 1 0 0 0 0-5H18",key:"7xy6bh"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M6 9a6 6 0 0 0 12 0V3a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1z",key:"1mhfuq"}],["path",{d:"M6 9H4.5a1 1 0 0 1 0-5H6",key:"tex48p"}]],Trophy=createLucideIcon("trophy",__iconNode$4);const __iconNode$3=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],Upload=createLucideIcon("upload",__iconNode$3);const __iconNode$2=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],Users=createLucideIcon("users",__iconNode$2);const __iconNode$1=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],X=createLucideIcon("x",__iconNode$1);const __iconNode=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],Zap=createLucideIcon("zap",__iconNode),API_KEY_STORAGE_KEY="tavily_api_key";function getApiKey(){return localStorage.getItem(API_KEY_STORAGE_KEY)}function setApiKey(R){localStorage.setItem(API_KEY_STORAGE_KEY,R)}function hasApiKey(){return!!getApiKey()}function createSemanticChunks(R,f){const D=[],c=/Chapter\s+\d+[\s:.-]+([^\n]+)/gi,_=R.split(c);let B="Introduction",N=0;for(let U=0;U<_.length;U++){const F=_[U].trim();if(F){if(U%2===1){B=F;continue}if(F.length>50){const u=extractConcepts(F);D.push({id:`chunk-${f}-${N++}`,text:F.substring(0,2e3),heading:B,concepts:u})}}}return D.length===0&&R.length>50&&D.push({id:`chunk-${f}-0`,text:R.substring(0,3e3),heading:"Main Content",concepts:extractConcepts(R)}),D}function extractConcepts(R){const f=[],D=R.toLowerCase(),c={"real property":"real-property","personal property":"personal-property",fixture:"fixture","joint tenancy":"joint-tenancy","tenancy in common":"tenancy-common","bundle of rights":"bundle-rights",mortgage:"mortgage",contract:"contract",agency:"agency",fiduciary:"fiduciary",escrow:"escrow",appraisal:"appraisal",zoning:"zoning"};for(const[_,B]of Object.entries(c))D.includes(_)&&f.push(B);return[...new Set(f)]}const ELI5_DATABASE={"real-property":{oneSentence:"Real property is land and everything stuck to it like houses and trees.",summary:"When you buy real property, you are buying the dirt AND everything attached to it. This includes the house, garage, fence, and even trees. You cannot pick up real property and take it with you!",analogy:"Real property is like a cake with frosting. The cake is the land, and the frosting is everything attached - the house, garage, and trees. You buy the whole cake, not just the frosting!",whyItMatters:"Understanding this helps you know what you are buying when you purchase a house. You get more than just the building!",realWorldExample:"When Tommy's family bought their house, they got the land, the house, the garage, the fence, AND the big oak tree in the backyard.",visualDescription:"A cartoon showing a piece of land with a house, garage, fence, and trees all attached with glue",memoryHook:"Real = Dirt + Stuff Stuck to Dirt"},"personal-property":{oneSentence:"Personal property is stuff you can pick up and take with you like your toys or bike.",summary:"Personal property is anything you can move around. Your clothes, furniture, TV, and bike are all personal property. When you sell your house, you take personal property with you!",analogy:"Personal property is like your backpack - you can fill it with stuff and take it wherever you go. You do not leave your backpack behind when you move!",whyItMatters:"Knowing the difference helps you understand what stays with a house and what goes when someone moves.",realWorldExample:"When the Johnsons sold their house, they took their TV, beds, and kitchen table with them, but left the built-in cabinets.",visualDescription:"A moving truck with furniture and boxes being loaded, while a house stays behind",memoryHook:"Personal = Portable (both start with P!)"},fixture:{oneSentence:"A fixture is something that used to be movable but got attached so well it became part of the house.",summary:"A fixture started as personal property, but got attached to the house permanently. Even though you COULD remove it, it stays with the house when you sell.",analogy:"A fixture is like a sticker on your water bottle. You could peel it off, but it was meant to stay there, and it might damage the bottle if you remove it.",whyItMatters:"Fixtures cause arguments when people sell houses. Knowing what stays and what goes prevents fights!",realWorldExample:"The fancy chandelier in the dining room is a fixture. The seller wanted to take it, but the buyer said it stays. The chandelier stayed because it was attached.",visualDescription:"Before and after showing a chandelier: first as a store item, then installed and attached to the ceiling",memoryHook:"M-A-R-I-A: Method, Adaptation, Relationship, Intent, Agreement"},"joint-tenancy":{oneSentence:"Joint tenancy is when two people own property together and if one dies, their share automatically goes to the other.",summary:"Joint tenancy means equal ownership with right of survivorship. When one owner dies, their share passes to the surviving owners automatically without going through probate.",analogy:"Joint tenancy is like a group project where everyone gets equal credit, and if someone drops the class, their credit is split among those who remain.",whyItMatters:"This is important for married couples and partners who want the surviving person to automatically get full ownership.",realWorldExample:"A married couple buys a house as joint tenants. When one spouse dies, the surviving spouse automatically owns the entire house - no court needed.",visualDescription:"Two people holding a house together, with an arrow showing property flowing to survivor",memoryHook:"Joint = Together, Survivor Gets It All"},default:{oneSentence:"This real estate concept helps you understand how property works.",summary:"This concept is important for real estate professionals to understand so they can help clients make smart decisions about buying and selling property.",analogy:"Learning real estate is like learning the rules of a new board game. At first it seems complicated, but once you understand the basics, it becomes fun and easy!",whyItMatters:"Understanding real estate concepts helps you serve your clients better and protects you from making costly mistakes.",realWorldExample:"When you help a family buy their first home, you will use this knowledge to make sure they understand what they are getting.",visualDescription:"A friendly cartoon showing a real estate agent helping a happy family",memoryHook:"Remember: Knowledge Protects Your Clients!"}};function getELI5(R){return ELI5_DATABASE[R]||ELI5_DATABASE.default}function generateFlashcards(R,f){const D=[];for(const c of R.concepts){const _=getELI5(c);D.push({id:`${R.id}-card-${D.length}`,chapterId:f,conceptId:c,front:`What is ${c.replace(/-/g," ")}?`,frontType:"concept",back:_.oneSentence,backType:"explanation",eli5Explanation:_.summary,realWorldExample:_.realWorldExample,difficulty:"easy",interval:1,repetition:0,easinessFactor:2.5,nextReviewDate:new Date,timesReviewed:0,timesCorrect:0}),D.push({id:`${R.id}-card-${D.length}`,chapterId:f,conceptId:c,front:"Explain this like I am 5 years old",frontType:"concept",back:_.analogy,backType:"analogy",eli5Explanation:_.analogy,realWorldExample:_.realWorldExample,difficulty:"easy",interval:1,repetition:0,easinessFactor:2.5,nextReviewDate:new Date,timesReviewed:0,timesCorrect:0})}return D}function generateQuestions(R,f){const D=[];for(const c of R.concepts){const _=getELI5(c);D.push({id:`${R.id}-q-${D.length}`,chapterId:f,conceptId:c,question:`What is the main idea of ${c.replace(/-/g," ")}?`,questionType:"conceptual",options:[_.oneSentence,"Something only lawyers need to know","A complicated legal procedure","Not important for real estate"],correctAnswer:0,explanation:_.summary,eli5Explanation:_.analogy,whyCorrect:_.whyItMatters,whyOthersWrong:["Incorrect option","Not accurate","Not applicable"],scenario:void 0,difficulty:"easy",topic:c,tags:[f]})}return D}async function processPDFWithAI(R,f={}){const{generateVisuals:D=!0}=f;console.log(" BRAIN: Processing document...");const c=`book-${Date.now()}`,_=createSemanticChunks(R,c);console.log(`   Created ${_.length} semantic chunks`);const B=[],N=[],U=[],F=[],u=[];for(let d=0;d<_.length;d++){const b=_[d],g=`chapter-${c}-${d}`;console.log(`   Processing Chapter ${d+1}: ${b.heading}`);const h=b.concepts.map((Q,V)=>{const T=getELI5(Q);return{id:`${g}-concept-${V}`,name:Q.replace(/-/g," ").replace(/\b\w/g,L=>L.toUpperCase()),simpleExplanation:T.oneSentence,detailedExplanation:T.summary,analogy:T.analogy,realWorldExample:T.realWorldExample,visualDescription:`Illustration showing ${Q.replace(/-/g," ")} concept`,icon:"Book",color:"blue",relatedConcepts:b.concepts.filter(L=>L!==Q),difficulty:"beginner",tags:[b.heading]}});N.push(...h);const E=b.concepts.length>0?getELI5(b.concepts[0]):getELI5("default"),C={id:g,bookId:c,number:d+1,title:b.heading,content:b.text,eli5Summary:{oneSentence:E.oneSentence,shortSummary:E.summary,whyItMatters:E.whyItMatters,realWorldConnection:E.realWorldExample},concepts:h,visualAids:D?[{id:`${g}-visual`,type:"diagram",title:`${b.heading} Concept Map`,description:`Visual guide for ${b.heading}`,data:{concepts:b.concepts}}]:[],readingTime:Math.ceil(b.text.length/1e3),difficulty:"easy",topics:[b.heading],createdAt:new Date,updatedAt:new Date};B.push(C);const x=generateFlashcards(b,g),I=generateQuestions(b,g);U.push(...x),F.push(...I),D&&u.push(...C.visualAids)}const o={id:`map-${c}`,chapterId:B[0]?.id||"default",concepts:N,connections:N.flatMap(d=>d.relatedConcepts.map(b=>({from:d.id,to:N.find(g=>g.name.toLowerCase().replace(/\s/g,"-")===b)?.id||b,relationship:"relates to"})))};return console.log(" BRAIN: Processing complete!"),console.log(`   Chapters: ${B.length}`),console.log(`   Concepts: ${N.length}`),console.log(`   Flashcards: ${U.length}`),console.log(`   Questions: ${F.length}`),{chapters:B,concepts:N,conceptMap:o,flashcards:U,questions:F,visualAids:u}}async function getMarketAnalysis(R,f){return{summary:`Market analysis for ${R}`,eli5Summary:`The ${R} housing market is like a busy store where prices change based on how many people want to buy versus how many homes are available.`,marketTrends:[{trend:"Home Prices",direction:"up",percentage:3.5,explanation:"Prices are rising due to demand."}],keyInsights:["Market favors sellers","Low inventory","High competition"],dataSources:[]}}async function getCompsReport(R){return{subjectProperty:{address:R.address,estimatedValue:35e4,confidence:"medium"},comparables:[],analysis:{avgPricePerSqft:200,priceRange:{low:3e5,high:4e5},daysOnMarket:15}}}const ai=Object.freeze(Object.defineProperty({__proto__:null,getApiKey,getCompsReport,getMarketAnalysis,hasApiKey,processPDFWithAI,setApiKey},Symbol.toStringTag,{value:"Module"}));var dexie_min$1={exports:{}},dexie_min=dexie_min$1.exports,hasRequiredDexie_min;function requireDexie_min(){return hasRequiredDexie_min||(hasRequiredDexie_min=1,(function(R,f){((D,c)=>{R.exports=c()})(dexie_min,function(){var D=function(s,l){return(D=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(p,v){p.__proto__=v}:function(p,v){for(var j in v)Object.prototype.hasOwnProperty.call(v,j)&&(p[j]=v[j])}))(s,l)},c=function(){return(c=Object.assign||function(s){for(var l,p=1,v=arguments.length;p<v;p++)for(var j in l=arguments[p])Object.prototype.hasOwnProperty.call(l,j)&&(s[j]=l[j]);return s}).apply(this,arguments)};function _(s,l,p){for(var v,j=0,P=l.length;j<P;j++)!v&&j in l||((v=v||Array.prototype.slice.call(l,0,j))[j]=l[j]);return s.concat(v||Array.prototype.slice.call(l))}var B=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:commonjsGlobal,N=Object.keys,U=Array.isArray;function F(s,l){return typeof l=="object"&&N(l).forEach(function(p){s[p]=l[p]}),s}typeof Promise>"u"||B.Promise||(B.Promise=Promise);var u=Object.getPrototypeOf,o={}.hasOwnProperty;function d(s,l){return o.call(s,l)}function b(s,l){typeof l=="function"&&(l=l(u(s))),(typeof Reflect>"u"?N:Reflect.ownKeys)(l).forEach(function(p){h(s,p,l[p])})}var g=Object.defineProperty;function h(s,l,p,v){g(s,l,F(p&&d(p,"get")&&typeof p.get=="function"?{get:p.get,set:p.set,configurable:!0}:{value:p,configurable:!0,writable:!0},v))}function E(s){return{from:function(l){return s.prototype=Object.create(l.prototype),h(s.prototype,"constructor",s),{extend:b.bind(null,s.prototype)}}}}var C=Object.getOwnPropertyDescriptor,x=[].slice;function I(s,l,p){return x.call(s,l,p)}function Q(s,l){return l(s)}function V(s){if(!s)throw new Error("Assertion Failed")}function T(s){B.setImmediate?setImmediate(s):setTimeout(s,0)}function L(s,l){if(typeof l=="string"&&d(s,l))return s[l];if(!l)return s;if(typeof l!="string"){for(var p=[],v=0,j=l.length;v<j;++v){var P=L(s,l[v]);p.push(P)}return p}var Z,tt=l.indexOf(".");return tt===-1||(Z=s[l.substr(0,tt)])==null?void 0:L(Z,l.substr(tt+1))}function $(s,l,p){if(s&&l!==void 0&&!("isFrozen"in Object&&Object.isFrozen(s)))if(typeof l!="string"&&"length"in l){V(typeof p!="string"&&"length"in p);for(var v=0,j=l.length;v<j;++v)$(s,l[v],p[v])}else{var P,Z,tt=l.indexOf(".");tt!==-1?(P=l.substr(0,tt),(tt=l.substr(tt+1))===""?p===void 0?U(s)&&!isNaN(parseInt(P))?s.splice(P,1):delete s[P]:s[P]=p:$(Z=(Z=s[P])&&d(s,P)?Z:s[P]={},tt,p)):p===void 0?U(s)&&!isNaN(parseInt(l))?s.splice(l,1):delete s[l]:s[l]=p}}function rt(s){var l,p={};for(l in s)d(s,l)&&(p[l]=s[l]);return p}var et=[].concat;function yt(s){return et.apply([],s)}var O="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(yt([8,16,32,64].map(function(s){return["Int","Uint","Float"].map(function(l){return l+s+"Array"})}))).filter(function(s){return B[s]}),gt=new Set(O.map(function(s){return B[s]})),kt=null;function At(s){return kt=new WeakMap,s=(function l(p){if(!p||typeof p!="object")return p;var v=kt.get(p);if(v)return v;if(U(p)){v=[],kt.set(p,v);for(var j=0,P=p.length;j<P;++j)v.push(l(p[j]))}else if(gt.has(p.constructor))v=p;else{var Z,tt=u(p);for(Z in v=tt===Object.prototype?{}:Object.create(tt),kt.set(p,v),p)d(p,Z)&&(v[Z]=l(p[Z]))}return v})(s),kt=null,s}var Ft={}.toString;function Xt(s){return Ft.call(s).slice(8,-1)}var nt=typeof Symbol<"u"?Symbol.iterator:"@@iterator",Y=typeof nt=="symbol"?function(s){var l;return s!=null&&(l=s[nt])&&l.apply(s)}:function(){return null};function k(s,l){l=s.indexOf(l),0<=l&&s.splice(l,1)}var S={};function w(s){var l,p,v,j;if(arguments.length===1){if(U(s))return s.slice();if(this===S&&typeof s=="string")return[s];if(j=Y(s))for(p=[];!(v=j.next()).done;)p.push(v.value);else{if(s==null)return[s];if(typeof(l=s.length)!="number")return[s];for(p=new Array(l);l--;)p[l]=s[l]}}else for(l=arguments.length,p=new Array(l);l--;)p[l]=arguments[l];return p}var y=typeof Symbol<"u"?function(s){return s[Symbol.toStringTag]==="AsyncFunction"}:function(){return!1},O=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],Ce=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(O),H={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function J(s,l){this.name=s,this.message=l}function K(s,l){return s+". Errors: "+Object.keys(l).map(function(p){return l[p].toString()}).filter(function(p,v,j){return j.indexOf(p)===v}).join(`
`)}function m(s,l,p,v){this.failures=l,this.failedKeys=v,this.successCount=p,this.message=K(s,l)}function M(s,l){this.name="BulkError",this.failures=Object.keys(l).map(function(p){return l[p]}),this.failuresByPos=l,this.message=K(s,this.failures)}E(J).from(Error).extend({toString:function(){return this.name+": "+this.message}}),E(m).from(J),E(M).from(J);var z=Ce.reduce(function(s,l){return s[l]=l+"Error",s},{}),W=J,G=Ce.reduce(function(s,l){var p=l+"Error";function v(j,P){this.name=p,j?typeof j=="string"?(this.message="".concat(j).concat(P?`
 `+P:""),this.inner=P||null):typeof j=="object"&&(this.message="".concat(j.name," ").concat(j.message),this.inner=j):(this.message=H[l]||p,this.inner=null)}return E(v).from(W),s[l]=v,s},{}),it=(G.Syntax=SyntaxError,G.Type=TypeError,G.Range=RangeError,O.reduce(function(s,l){return s[l+"Error"]=G[l],s},{}));O=Ce.reduce(function(s,l){return["Syntax","Type","Range"].indexOf(l)===-1&&(s[l+"Error"]=G[l]),s},{});function at(){}function jt(s){return s}function Yt(s,l){return s==null||s===jt?l:function(p){return l(s(p))}}function Rt(s,l){return function(){s.apply(this,arguments),l.apply(this,arguments)}}function Nt(s,l){return s===at?l:function(){var p=s.apply(this,arguments),v=(p!==void 0&&(arguments[0]=p),this.onsuccess),j=this.onerror,P=(this.onsuccess=null,this.onerror=null,l.apply(this,arguments));return v&&(this.onsuccess=this.onsuccess?Rt(v,this.onsuccess):v),j&&(this.onerror=this.onerror?Rt(j,this.onerror):j),P!==void 0?P:p}}function Pt(s,l){return s===at?l:function(){s.apply(this,arguments);var p=this.onsuccess,v=this.onerror;this.onsuccess=this.onerror=null,l.apply(this,arguments),p&&(this.onsuccess=this.onsuccess?Rt(p,this.onsuccess):p),v&&(this.onerror=this.onerror?Rt(v,this.onerror):v)}}function Lt(s,l){return s===at?l:function(j){var v=s.apply(this,arguments),j=(F(j,v),this.onsuccess),P=this.onerror,Z=(this.onsuccess=null,this.onerror=null,l.apply(this,arguments));return j&&(this.onsuccess=this.onsuccess?Rt(j,this.onsuccess):j),P&&(this.onerror=this.onerror?Rt(P,this.onerror):P),v===void 0?Z===void 0?void 0:Z:F(v,Z)}}function Ut(s,l){return s===at?l:function(){return l.apply(this,arguments)!==!1&&s.apply(this,arguments)}}function Qt(s,l){return s===at?l:function(){var p=s.apply(this,arguments);if(p&&typeof p.then=="function"){for(var v=this,j=arguments.length,P=new Array(j);j--;)P[j]=arguments[j];return p.then(function(){return l.apply(v,P)})}return l.apply(this,arguments)}}O.ModifyError=m,O.DexieError=J,O.BulkError=M;var $t=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function se(s){$t=s}var le={},oe=100,_e=typeof Promise>"u"?[]:(Ce=Promise.resolve(),typeof crypto<"u"&&crypto.subtle?[_e=crypto.subtle.digest("SHA-512",new Uint8Array([0])),u(_e),Ce]:[Ce,u(Ce),Ce]),Ce=_e[0],Gi=_e[1],Gi=Gi&&Gi.then,Ue=Ce&&Ce.constructor,jn=!!_e[2],We=function(s,l){Jt.push([s,l]),xi&&(queueMicrotask(Di),xi=!1)},En=!0,xi=!0,ui=[],Qn=[],Bt=jt,vt={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:at,pgp:!1,env:{},finalize:at},st=vt,Jt=[],me=0,Ye=[];function Kt(s){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this._lib=!1;var l=this._PSD=st;if(typeof s!="function"){if(s!==le)throw new TypeError("Not a function");this._state=arguments[1],this._value=arguments[2],this._state===!1&&cn(this,this._value)}else this._state=null,this._value=null,++l.ref,(function p(v,j){try{j(function(P){if(v._state===null){if(P===v)throw new TypeError("A promise cannot be resolved with itself.");var Z=v._lib&&ke();P&&typeof P.then=="function"?p(v,function(tt,ct){P instanceof Kt?P._then(tt,ct):P.then(tt,ct)}):(v._state=!0,v._value=P,Qe(v)),Z&&gn()}},cn.bind(null,v))}catch(P){cn(v,P)}})(this,s)}var Cn={get:function(){var s=st,l=Us;function p(v,j){var P=this,Z=!s.global&&(s!==st||l!==Us),tt=Z&&!Mn(),ct=new Kt(function(bt,ut){An(P,new Dn(fa(v,s,Z,tt),fa(j,s,Z,tt),bt,ut,s))});return this._consoleTask&&(ct._consoleTask=this._consoleTask),ct}return p.prototype=le,p},set:function(s){h(this,"then",s&&s.prototype===le?Cn:{get:function(){return s},set:Cn.set})}};function Dn(s,l,p,v,j){this.onFulfilled=typeof s=="function"?s:null,this.onRejected=typeof l=="function"?l:null,this.resolve=p,this.reject=v,this.psd=j}function cn(s,l){var p,v;Qn.push(l),s._state===null&&(p=s._lib&&ke(),l=Bt(l),s._state=!1,s._value=l,v=s,ui.some(function(j){return j._value===v._value})||ui.push(v),Qe(s),p)&&gn()}function Qe(s){var l=s._listeners;s._listeners=[];for(var p=0,v=l.length;p<v;++p)An(s,l[p]);var j=s._PSD;--j.ref||j.finalize(),me===0&&(++me,We(function(){--me==0&&vi()},[]))}function An(s,l){if(s._state===null)s._listeners.push(l);else{var p=s._state?l.onFulfilled:l.onRejected;if(p===null)return(s._state?l.resolve:l.reject)(s._value);++l.psd.ref,++me,We(Zn,[p,s,l])}}function Zn(s,l,p){try{var v,j=l._value;!l._state&&Qn.length&&(Qn=[]),v=$t&&l._consoleTask?l._consoleTask.run(function(){return s(j)}):s(j),l._state||Qn.indexOf(j)!==-1||(P=>{for(var Z=ui.length;Z;)if(ui[--Z]._value===P._value)return ui.splice(Z,1)})(l),p.resolve(v)}catch(P){p.reject(P)}finally{--me==0&&vi(),--p.psd.ref||p.psd.finalize()}}function Di(){Un(vt,function(){ke()&&gn()})}function ke(){var s=En;return xi=En=!1,s}function gn(){var s,l,p;do for(;0<Jt.length;)for(s=Jt,Jt=[],p=s.length,l=0;l<p;++l){var v=s[l];v[0].apply(null,v[1])}while(0<Jt.length);xi=En=!0}function vi(){for(var s=ui,l=(ui=[],s.forEach(function(v){v._PSD.onunhandled.call(null,v._value,v)}),Ye.slice(0)),p=l.length;p;)l[--p]()}function di(s){return new Kt(le,!1,s)}function Re(s,l){var p=st;return function(){var v=ke(),j=st;try{return _i(p,!0),s.apply(this,arguments)}catch(P){l&&l(P)}finally{_i(j,!1),v&&gn()}}}b(Kt.prototype,{then:Cn,_then:function(s,l){An(this,new Dn(null,null,s,l,st))},catch:function(s){var l,p;return arguments.length===1?this.then(null,s):(l=s,p=arguments[1],typeof l=="function"?this.then(null,function(v){return(v instanceof l?p:di)(v)}):this.then(null,function(v){return(v&&v.name===l?p:di)(v)}))},finally:function(s){return this.then(function(l){return Kt.resolve(s()).then(function(){return l})},function(l){return Kt.resolve(s()).then(function(){return di(l)})})},timeout:function(s,l){var p=this;return s<1/0?new Kt(function(v,j){var P=setTimeout(function(){return j(new G.Timeout(l))},s);p.then(v,j).finally(clearTimeout.bind(null,P))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&h(Kt.prototype,Symbol.toStringTag,"Dexie.Promise"),vt.env=sr(),b(Kt,{all:function(){var s=w.apply(null,arguments).map(os);return new Kt(function(l,p){s.length===0&&l([]);var v=s.length;s.forEach(function(j,P){return Kt.resolve(j).then(function(Z){s[P]=Z,--v||l(s)},p)})})},resolve:function(s){return s instanceof Kt?s:s&&typeof s.then=="function"?new Kt(function(l,p){s.then(l,p)}):new Kt(le,!0,s)},reject:di,race:function(){var s=w.apply(null,arguments).map(os);return new Kt(function(l,p){s.map(function(v){return Kt.resolve(v).then(l,p)})})},PSD:{get:function(){return st},set:function(s){return st=s}},totalEchoes:{get:function(){return Us}},newPSD:qe,usePSD:Un,scheduler:{get:function(){return We},set:function(s){We=s}},rejectionMapper:{get:function(){return Bt},set:function(s){Bt=s}},follow:function(s,l){return new Kt(function(p,v){return qe(function(j,P){var Z=st;Z.unhandleds=[],Z.onunhandled=P,Z.finalize=Rt(function(){var tt,ct=this;tt=function(){ct.unhandleds.length===0?j():P(ct.unhandleds[0])},Ye.push(function bt(){tt(),Ye.splice(Ye.indexOf(bt),1)}),++me,We(function(){--me==0&&vi()},[])},Z.finalize),s()},l,p,v)})}}),Ue&&(Ue.allSettled&&h(Kt,"allSettled",function(){var s=w.apply(null,arguments).map(os);return new Kt(function(l){s.length===0&&l([]);var p=s.length,v=new Array(p);s.forEach(function(j,P){return Kt.resolve(j).then(function(Z){return v[P]={status:"fulfilled",value:Z}},function(Z){return v[P]={status:"rejected",reason:Z}}).then(function(){return--p||l(v)})})})}),Ue.any&&typeof AggregateError<"u"&&h(Kt,"any",function(){var s=w.apply(null,arguments).map(os);return new Kt(function(l,p){s.length===0&&p(new AggregateError([]));var v=s.length,j=new Array(v);s.forEach(function(P,Z){return Kt.resolve(P).then(function(tt){return l(tt)},function(tt){j[Z]=tt,--v||p(new AggregateError(j))})})})}),Ue.withResolvers)&&(Kt.withResolvers=Ue.withResolvers);var Be={awaits:0,echoes:0,id:0},un=0,On=[],hi=0,Us=0,bi=0;function qe(s,Z,p,v){var j=st,P=Object.create(j),Z=(P.parent=j,P.ref=0,P.global=!1,P.id=++bi,vt.env,P.env=jn?{Promise:Kt,PromiseProp:{value:Kt,configurable:!0,writable:!0},all:Kt.all,race:Kt.race,allSettled:Kt.allSettled,any:Kt.any,resolve:Kt.resolve,reject:Kt.reject}:{},Z&&F(P,Z),++j.ref,P.finalize=function(){--this.parent.ref||this.parent.finalize()},Un(P,s,p,v));return P.ref===0&&P.finalize(),Z}function $e(){return Be.id||(Be.id=++un),++Be.awaits,Be.echoes+=oe,Be.id}function Mn(){return!!Be.awaits&&(--Be.awaits==0&&(Be.id=0),Be.echoes=Be.awaits*oe,!0)}function os(s){return Be.echoes&&s&&s.constructor===Ue?($e(),s.then(function(l){return Mn(),l},function(l){return Mn(),Oe(l)})):s}function ml(){var s=On[On.length-1];On.pop(),_i(s,!1)}function _i(s,l){var p,v,j=st;(l?!Be.echoes||hi++&&s===st:!hi||--hi&&s===st)||queueMicrotask(l?(function(P){++Us,Be.echoes&&--Be.echoes!=0||(Be.echoes=Be.awaits=Be.id=0),On.push(st),_i(P,!0)}).bind(null,s):ml),s!==st&&(st=s,j===vt&&(vt.env=sr()),jn)&&(p=vt.env.Promise,v=s.env,j.global||s.global)&&(Object.defineProperty(B,"Promise",v.PromiseProp),p.all=v.all,p.race=v.race,p.resolve=v.resolve,p.reject=v.reject,v.allSettled&&(p.allSettled=v.allSettled),v.any)&&(p.any=v.any)}function sr(){var s=B.Promise;return jn?{Promise:s,PromiseProp:Object.getOwnPropertyDescriptor(B,"Promise"),all:s.all,race:s.race,allSettled:s.allSettled,any:s.any,resolve:s.resolve,reject:s.reject}:{}}function Un(s,l,p,v,j){var P=st;try{return _i(s,!0),l(p,v,j)}finally{_i(P,!1)}}function fa(s,l,p,v){return typeof s!="function"?s:function(){var j=st;p&&$e(),_i(l,!0);try{return s.apply(this,arguments)}finally{_i(j,!1),v&&queueMicrotask(Mn)}}}function Ei(s){Promise===Ue&&Be.echoes===0?hi===0?s():enqueueNativeMicroTask(s):setTimeout(s,0)}(""+Gi).indexOf("[native code]")===-1&&($e=Mn=at);var Oe=Kt.reject,qn="",Sn="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",tn="String expected.",Oi=[],qs="__dbnames",fi="readonly",Ai="readwrite";function Li(s,l){return s?l?function(){return s.apply(this,arguments)&&l.apply(this,arguments)}:s:l}var ar={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function Hs(s){return typeof s!="string"||/\./.test(s)?function(l){return l}:function(l){return l[s]===void 0&&s in l&&delete(l=At(l))[s],l}}function no(){throw G.Type("Entity instances must never be new:ed. Instances are generated by the framework bypassing the constructor.")}function pe(s,l){try{var p=Gs(s),v=Gs(l);if(p!==v)return p==="Array"?1:v==="Array"?-1:p==="binary"?1:v==="binary"?-1:p==="string"?1:v==="string"?-1:p==="Date"?1:v!=="Date"?NaN:-1;switch(p){case"number":case"Date":case"string":return l<s?1:s<l?-1:0;case"binary":for(var j=Jn(s),P=Jn(l),Z=j.length,tt=P.length,ct=Z<tt?Z:tt,bt=0;bt<ct;++bt)if(j[bt]!==P[bt])return j[bt]<P[bt]?-1:1;return Z===tt?0:Z<tt?-1:1;case"Array":for(var ut=s,lt=l,ft=ut.length,mt=lt.length,dt=ft<mt?ft:mt,ht=0;ht<dt;++ht){var Et=pe(ut[ht],lt[ht]);if(Et!==0)return Et}return ft===mt?0:ft<mt?-1:1}}catch{}return NaN}function Gs(s){var l=typeof s;return l=="object"&&(ArrayBuffer.isView(s)||(l=Xt(s))==="ArrayBuffer")?"binary":l}function Jn(s){return s instanceof Uint8Array?s:ArrayBuffer.isView(s)?new Uint8Array(s.buffer,s.byteOffset,s.byteLength):new Uint8Array(s)}function yn(s,l,p){var v=s.schema.yProps;return v?(l&&0<p.numFailures&&(l=l.filter(function(j,P){return!p.failures[P]})),Promise.all(v.map(function(j){return j=j.updatesTable,l?s.db.table(j).where("k").anyOf(l).delete():s.db.table(j).clear()})).then(function(){return p})):p}io.prototype.execute=function(s){var l=this["@@propmod"];if(l.add!==void 0){var p=l.add;if(U(p))return _(_([],U(s)?s:[],!0),p).sort();if(typeof p=="number")return(Number(s)||0)+p;if(typeof p=="bigint")try{return BigInt(s)+p}catch{return BigInt(0)+p}throw new TypeError("Invalid term ".concat(p))}if(l.remove!==void 0){var v=l.remove;if(U(v))return U(s)?s.filter(function(j){return!v.includes(j)}).sort():[];if(typeof v=="number")return Number(s)-v;if(typeof v=="bigint")try{return BigInt(s)-v}catch{return BigInt(0)-v}throw new TypeError("Invalid subtrahend ".concat(v))}return p=(p=l.replacePrefix)==null?void 0:p[0],p&&typeof s=="string"&&s.startsWith(p)?l.replacePrefix[1]+s.substring(p.length):s};var ls=io;function io(s){this["@@propmod"]=s}function pa(s,l){for(var p=N(l),v=p.length,j=!1,P=0;P<v;++P){var Z=p[P],tt=l[Z],ct=L(s,Z);tt instanceof ls?($(s,Z,tt.execute(ct)),j=!0):ct!==tt&&($(s,Z,tt),j=!0)}return j}Te.prototype._trans=function(s,l,p){var v=this._tx||st.trans,j=this.name,P=$t&&typeof console<"u"&&console.createTask&&console.createTask("Dexie: ".concat(s==="readonly"?"read":"write"," ").concat(this.name));function Z(bt,ut,lt){if(lt.schema[j])return l(lt.idbtrans,lt);throw new G.NotFound("Table "+j+" not part of transaction")}var tt=ke();try{var ct=v&&v.db._novip===this.db._novip?v===st.trans?v._promise(s,Z,p):qe(function(){return v._promise(s,Z,p)},{trans:v,transless:st.transless||st}):(function bt(ut,lt,ft,mt){if(ut.idbdb&&(ut._state.openComplete||st.letThrough||ut._vip)){var dt=ut._createTransaction(lt,ft,ut._dbSchema);try{dt.create(),ut._state.PR1398_maxLoop=3}catch(ht){return ht.name===z.InvalidState&&ut.isOpen()&&0<--ut._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),ut.close({disableAutoOpen:!1}),ut.open().then(function(){return bt(ut,lt,ft,mt)})):Oe(ht)}return dt._promise(lt,function(ht,Et){return qe(function(){return st.trans=dt,mt(ht,Et,dt)})}).then(function(ht){if(lt==="readwrite")try{dt.idbtrans.commit()}catch{}return lt==="readonly"?ht:dt._completion.then(function(){return ht})})}if(ut._state.openComplete)return Oe(new G.DatabaseClosed(ut._state.dbOpenError));if(!ut._state.isBeingOpened){if(!ut._state.autoOpen)return Oe(new G.DatabaseClosed);ut.open().catch(at)}return ut._state.dbReadyPromise.then(function(){return bt(ut,lt,ft,mt)})})(this.db,s,[this.name],Z);return P&&(ct._consoleTask=P,ct=ct.catch(function(bt){return console.trace(bt),Oe(bt)})),ct}finally{tt&&gn()}},Te.prototype.get=function(s,l){var p=this;return s&&s.constructor===Object?this.where(s).first(l):s==null?Oe(new G.Type("Invalid argument to Table.get()")):this._trans("readonly",function(v){return p.core.get({trans:v,key:s}).then(function(j){return p.hook.reading.fire(j)})}).then(l)},Te.prototype.where=function(s){if(typeof s=="string")return new this.db.WhereClause(this,s);if(U(s))return new this.db.WhereClause(this,"[".concat(s.join("+"),"]"));var l=N(s);if(l.length===1)return this.where(l[0]).equals(s[l[0]]);var p=this.schema.indexes.concat(this.schema.primKey).filter(function(tt){if(tt.compound&&l.every(function(bt){return 0<=tt.keyPath.indexOf(bt)})){for(var ct=0;ct<l.length;++ct)if(l.indexOf(tt.keyPath[ct])===-1)return!1;return!0}return!1}).sort(function(tt,ct){return tt.keyPath.length-ct.keyPath.length})[0];if(p&&this.db._maxKey!==qn)return Z=p.keyPath.slice(0,l.length),this.where(Z).equals(Z.map(function(tt){return s[tt]}));!p&&$t&&console.warn("The query ".concat(JSON.stringify(s)," on ").concat(this.name," would benefit from a ")+"compound index [".concat(l.join("+"),"]"));var v=this.schema.idxByName;function j(tt,ct){return pe(tt,ct)===0}var Z=l.reduce(function(ut,ct){var bt=ut[0],ut=ut[1],lt=v[ct],ft=s[ct];return[bt||lt,bt||!lt?Li(ut,lt&&lt.multi?function(mt){return mt=L(mt,ct),U(mt)&&mt.some(function(dt){return j(ft,dt)})}:function(mt){return j(ft,L(mt,ct))}):ut]},[null,null]),P=Z[0],Z=Z[1];return P?this.where(P.name).equals(s[P.keyPath]).filter(Z):p?this.filter(Z):this.where(l).equals("")},Te.prototype.filter=function(s){return this.toCollection().and(s)},Te.prototype.count=function(s){return this.toCollection().count(s)},Te.prototype.offset=function(s){return this.toCollection().offset(s)},Te.prototype.limit=function(s){return this.toCollection().limit(s)},Te.prototype.each=function(s){return this.toCollection().each(s)},Te.prototype.toArray=function(s){return this.toCollection().toArray(s)},Te.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},Te.prototype.orderBy=function(s){return new this.db.Collection(new this.db.WhereClause(this,U(s)?"[".concat(s.join("+"),"]"):s))},Te.prototype.reverse=function(){return this.toCollection().reverse()},Te.prototype.mapToClass=function(s){for(var l=this.db,p=this.name,v=((this.schema.mappedClass=s).prototype instanceof no&&(s=(Z=>{var tt=ut,ct=Z;if(typeof ct!="function"&&ct!==null)throw new TypeError("Class extends value "+String(ct)+" is not a constructor or null");function bt(){this.constructor=tt}function ut(){return Z!==null&&Z.apply(this,arguments)||this}return D(tt,ct),tt.prototype=ct===null?Object.create(ct):(bt.prototype=ct.prototype,new bt),Object.defineProperty(ut.prototype,"db",{get:function(){return l},enumerable:!1,configurable:!0}),ut.prototype.table=function(){return p},ut})(s)),new Set),j=s.prototype;j;j=u(j))Object.getOwnPropertyNames(j).forEach(function(Z){return v.add(Z)});function P(Z){if(!Z)return Z;var tt,ct=Object.create(s.prototype);for(tt in Z)if(!v.has(tt))try{ct[tt]=Z[tt]}catch{}return ct}return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=P,this.hook("reading",P),s},Te.prototype.defineClass=function(){return this.mapToClass(function(s){F(this,s)})},Te.prototype.add=function(s,l){var p=this,v=this.schema.primKey,j=v.auto,P=v.keyPath,Z=s;return P&&j&&(Z=Hs(P)(s)),this._trans("readwrite",function(tt){return p.core.mutate({trans:tt,type:"add",keys:l!=null?[l]:null,values:[Z]})}).then(function(tt){return tt.numFailures?Kt.reject(tt.failures[0]):tt.lastResult}).then(function(tt){if(P)try{$(s,P,tt)}catch{}return tt})},Te.prototype.upsert=function(s,l){var p=this,v=this.schema.primKey.keyPath;return this._trans("readwrite",function(j){return p.core.get({trans:j,key:s}).then(function(P){var Z=P??{};return pa(Z,l),v&&$(Z,v,s),p.core.mutate({trans:j,type:"put",values:[Z],keys:[s],upsert:!0,updates:{keys:[s],changeSpecs:[l]}}).then(function(tt){return tt.numFailures?Kt.reject(tt.failures[0]):!!P})})})},Te.prototype.update=function(s,l){return typeof s!="object"||U(s)?this.where(":id").equals(s).modify(l):(s=L(s,this.schema.primKey.keyPath))===void 0?Oe(new G.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(s).modify(l)},Te.prototype.put=function(s,l){var p=this,v=this.schema.primKey,j=v.auto,P=v.keyPath,Z=s;return P&&j&&(Z=Hs(P)(s)),this._trans("readwrite",function(tt){return p.core.mutate({trans:tt,type:"put",values:[Z],keys:l!=null?[l]:null})}).then(function(tt){return tt.numFailures?Kt.reject(tt.failures[0]):tt.lastResult}).then(function(tt){if(P)try{$(s,P,tt)}catch{}return tt})},Te.prototype.delete=function(s){var l=this;return this._trans("readwrite",function(p){return l.core.mutate({trans:p,type:"delete",keys:[s]}).then(function(v){return yn(l,[s],v)}).then(function(v){return v.numFailures?Kt.reject(v.failures[0]):void 0})})},Te.prototype.clear=function(){var s=this;return this._trans("readwrite",function(l){return s.core.mutate({trans:l,type:"deleteRange",range:ar}).then(function(p){return yn(s,null,p)})}).then(function(l){return l.numFailures?Kt.reject(l.failures[0]):void 0})},Te.prototype.bulkGet=function(s){var l=this;return this._trans("readonly",function(p){return l.core.getMany({keys:s,trans:p}).then(function(v){return v.map(function(j){return l.hook.reading.fire(j)})})})},Te.prototype.bulkAdd=function(s,l,p){var v=this,j=Array.isArray(l)?l:void 0,P=(p=p||(j?void 0:l))?p.allKeys:void 0;return this._trans("readwrite",function(Z){var tt=v.schema.primKey,bt=tt.auto,tt=tt.keyPath;if(tt&&j)throw new G.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(j&&j.length!==s.length)throw new G.InvalidArgument("Arguments objects and keys must have the same length");var ct=s.length,bt=tt&&bt?s.map(Hs(tt)):s;return v.core.mutate({trans:Z,type:"add",keys:j,values:bt,wantResults:P}).then(function(ut){var lt=ut.numFailures,ft=ut.failures;if(lt===0)return P?ut.results:ut.lastResult;throw new M("".concat(v.name,".bulkAdd(): ").concat(lt," of ").concat(ct," operations failed"),ft)})})},Te.prototype.bulkPut=function(s,l,p){var v=this,j=Array.isArray(l)?l:void 0,P=(p=p||(j?void 0:l))?p.allKeys:void 0;return this._trans("readwrite",function(Z){var tt=v.schema.primKey,bt=tt.auto,tt=tt.keyPath;if(tt&&j)throw new G.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(j&&j.length!==s.length)throw new G.InvalidArgument("Arguments objects and keys must have the same length");var ct=s.length,bt=tt&&bt?s.map(Hs(tt)):s;return v.core.mutate({trans:Z,type:"put",keys:j,values:bt,wantResults:P}).then(function(ut){var lt=ut.numFailures,ft=ut.failures;if(lt===0)return P?ut.results:ut.lastResult;throw new M("".concat(v.name,".bulkPut(): ").concat(lt," of ").concat(ct," operations failed"),ft)})})},Te.prototype.bulkUpdate=function(s){var l=this,p=this.core,v=s.map(function(Z){return Z.key}),j=s.map(function(Z){return Z.changes}),P=[];return this._trans("readwrite",function(Z){return p.getMany({trans:Z,keys:v,cache:"clone"}).then(function(tt){var ct=[],bt=[],ut=(s.forEach(function(lt,ft){var mt=lt.key,dt=lt.changes,ht=tt[ft];if(ht){for(var Et=0,Tt=Object.keys(dt);Et<Tt.length;Et++){var _t=Tt[Et],Dt=dt[_t];if(_t===l.schema.primKey.keyPath){if(pe(Dt,mt)!==0)throw new G.Constraint("Cannot update primary key in bulkUpdate()")}else $(ht,_t,Dt)}P.push(ft),ct.push(mt),bt.push(ht)}}),ct.length);return p.mutate({trans:Z,type:"put",keys:ct,values:bt,updates:{keys:v,changeSpecs:j}}).then(function(lt){var ft=lt.numFailures,mt=lt.failures;if(ft===0)return ut;for(var dt=0,ht=Object.keys(mt);dt<ht.length;dt++){var Et,Tt=ht[dt],_t=P[Number(Tt)];_t!=null&&(Et=mt[Tt],delete mt[Tt],mt[_t]=Et)}throw new M("".concat(l.name,".bulkUpdate(): ").concat(ft," of ").concat(ut," operations failed"),mt)})})})},Te.prototype.bulkDelete=function(s){var l=this,p=s.length;return this._trans("readwrite",function(v){return l.core.mutate({trans:v,type:"delete",keys:s}).then(function(j){return yn(l,s,j)})}).then(function(v){var j=v.numFailures,P=v.failures;if(j===0)return v.lastResult;throw new M("".concat(l.name,".bulkDelete(): ").concat(j," of ").concat(p," operations failed"),P)})};var rr=Te;function Te(){}function Xs(s){function l(Z,tt){if(tt){for(var ct=arguments.length,bt=new Array(ct-1);--ct;)bt[ct-1]=arguments[ct];return p[Z].subscribe.apply(null,bt),s}if(typeof Z=="string")return p[Z]}var p={};l.addEventType=P;for(var v=1,j=arguments.length;v<j;++v)P(arguments[v]);return l;function P(Z,tt,ct){var bt,ut;if(typeof Z!="object")return tt=tt||Ut,ut={subscribers:[],fire:ct=ct||at,subscribe:function(lt){ut.subscribers.indexOf(lt)===-1&&(ut.subscribers.push(lt),ut.fire=tt(ut.fire,lt))},unsubscribe:function(lt){ut.subscribers=ut.subscribers.filter(function(ft){return ft!==lt}),ut.fire=ut.subscribers.reduce(tt,ct)}},p[Z]=l[Z]=ut;N(bt=Z).forEach(function(lt){var ft=bt[lt];if(U(ft))P(lt,bt[lt][0],bt[lt][1]);else{if(ft!=="asap")throw new G.InvalidArgument("Invalid event config");var mt=P(lt,jt,function(){for(var dt=arguments.length,ht=new Array(dt);dt--;)ht[dt]=arguments[dt];mt.subscribers.forEach(function(Et){T(function(){Et.apply(null,ht)})})})}})}}function hn(s,l){return E(l).from({prototype:s}),l}function Si(s,l){return!(s.filter||s.algorithm||s.or)&&(l?s.justLimit:!s.replayFilter)}function ma(s,l){s.filter=Li(s.filter,l)}function Ks(s,l,p){var v=s.replayFilter;s.replayFilter=v?function(){return Li(v(),l())}:l,s.justLimit=p&&!v}function pi(s,l){if(s.isPrimKey)return l.primaryKey;var p=l.getIndexByKeyPath(s.index);if(p)return p;throw new G.Schema("KeyPath "+s.index+" on object store "+l.name+" is not indexed")}function or(s,l,p){var v=pi(s,l.schema);return l.openCursor({trans:p,values:!s.keysOnly,reverse:s.dir==="prev",unique:!!s.unique,query:{index:v,range:s.range}})}function Ys(s,l,p,v){var j,P,Z=s.replayFilter?Li(s.filter,s.replayFilter()):s.filter;return s.or?(j={},P=function(tt,ct,bt){var ut,lt;Z&&!Z(ct,bt,function(ft){return ct.stop(ft)},function(ft){return ct.fail(ft)})||((lt=""+(ut=ct.primaryKey))=="[object ArrayBuffer]"&&(lt=""+new Uint8Array(ut)),d(j,lt))||(j[lt]=!0,l(tt,ct,bt))},Promise.all([s.or._iterate(P,p),Pi(or(s,v,p),s.algorithm,P,!s.keysOnly&&s.valueMapper)])):Pi(or(s,v,p),Li(s.algorithm,Z),l,!s.keysOnly&&s.valueMapper)}function Pi(s,l,p,v){var j=Re(v?function(P,Z,tt){return p(v(P),Z,tt)}:p);return s.then(function(P){if(P)return P.start(function(){var Z=function(){return P.continue()};l&&!l(P,function(tt){return Z=tt},function(tt){P.stop(tt),Z=at},function(tt){P.fail(tt),Z=at})||j(P.value,P,function(tt){return Z=tt}),Z()})})}Ee.prototype._read=function(s,l){var p=this._ctx;return p.error?p.table._trans(null,Oe.bind(null,p.error)):p.table._trans("readonly",s).then(l)},Ee.prototype._write=function(s){var l=this._ctx;return l.error?l.table._trans(null,Oe.bind(null,l.error)):l.table._trans("readwrite",s,"locked")},Ee.prototype._addAlgorithm=function(s){var l=this._ctx;l.algorithm=Li(l.algorithm,s)},Ee.prototype._iterate=function(s,l){return Ys(this._ctx,s,l,this._ctx.table.core)},Ee.prototype.clone=function(s){var l=Object.create(this.constructor.prototype),p=Object.create(this._ctx);return s&&F(p,s),l._ctx=p,l},Ee.prototype.raw=function(){return this._ctx.valueMapper=null,this},Ee.prototype.each=function(s){var l=this._ctx;return this._read(function(p){return Ys(l,s,p,l.table.core)})},Ee.prototype.count=function(s){var l=this;return this._read(function(p){var v,j=l._ctx,P=j.table.core;return Si(j,!0)?P.count({trans:p,query:{index:pi(j,P.schema),range:j.range}}).then(function(Z){return Math.min(Z,j.limit)}):(v=0,Ys(j,function(){return++v,!1},p,P).then(function(){return v}))}).then(s)},Ee.prototype.sortBy=function(s,l){var p=s.split(".").reverse(),v=p[0],j=p.length-1;function P(ct,bt){return bt?P(ct[p[bt]],bt-1):ct[v]}var Z=this._ctx.dir==="next"?1:-1;function tt(ct,bt){return pe(P(ct,j),P(bt,j))*Z}return this.toArray(function(ct){return ct.sort(tt)}).then(l)},Ee.prototype.toArray=function(s){var l=this;return this._read(function(p){var v,j,P,Z=l._ctx;return Z.dir==="next"&&Si(Z,!0)&&0<Z.limit?(v=Z.valueMapper,j=pi(Z,Z.table.core.schema),Z.table.core.query({trans:p,limit:Z.limit,values:!0,query:{index:j,range:Z.range}}).then(function(tt){return tt=tt.result,v?tt.map(v):tt})):(P=[],Ys(Z,function(tt){return P.push(tt)},p,Z.table.core).then(function(){return P}))},s)},Ee.prototype.offset=function(s){var l=this._ctx;return s<=0||(l.offset+=s,Si(l)?Ks(l,function(){var p=s;return function(v,j){return p===0||(p===1?--p:j(function(){v.advance(p),p=0}),!1)}}):Ks(l,function(){var p=s;return function(){return--p<0}})),this},Ee.prototype.limit=function(s){return this._ctx.limit=Math.min(this._ctx.limit,s),Ks(this._ctx,function(){var l=s;return function(p,v,j){return--l<=0&&v(j),0<=l}},!0),this},Ee.prototype.until=function(s,l){return ma(this._ctx,function(p,v,j){return!s(p.value)||(v(j),l)}),this},Ee.prototype.first=function(s){return this.limit(1).toArray(function(l){return l[0]}).then(s)},Ee.prototype.last=function(s){return this.reverse().first(s)},Ee.prototype.filter=function(s){var l;return ma(this._ctx,function(p){return s(p.value)}),(l=this._ctx).isMatch=Li(l.isMatch,s),this},Ee.prototype.and=function(s){return this.filter(s)},Ee.prototype.or=function(s){return new this.db.WhereClause(this._ctx.table,s,this)},Ee.prototype.reverse=function(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},Ee.prototype.desc=function(){return this.reverse()},Ee.prototype.eachKey=function(s){var l=this._ctx;return l.keysOnly=!l.isMatch,this.each(function(p,v){s(v.key,v)})},Ee.prototype.eachUniqueKey=function(s){return this._ctx.unique="unique",this.eachKey(s)},Ee.prototype.eachPrimaryKey=function(s){var l=this._ctx;return l.keysOnly=!l.isMatch,this.each(function(p,v){s(v.primaryKey,v)})},Ee.prototype.keys=function(s){var l=this._ctx,p=(l.keysOnly=!l.isMatch,[]);return this.each(function(v,j){p.push(j.key)}).then(function(){return p}).then(s)},Ee.prototype.primaryKeys=function(s){var l=this._ctx;if(l.dir==="next"&&Si(l,!0)&&0<l.limit)return this._read(function(v){var j=pi(l,l.table.core.schema);return l.table.core.query({trans:v,values:!1,limit:l.limit,query:{index:j,range:l.range}})}).then(function(v){return v.result}).then(s);l.keysOnly=!l.isMatch;var p=[];return this.each(function(v,j){p.push(j.primaryKey)}).then(function(){return p}).then(s)},Ee.prototype.uniqueKeys=function(s){return this._ctx.unique="unique",this.keys(s)},Ee.prototype.firstKey=function(s){return this.limit(1).keys(function(l){return l[0]}).then(s)},Ee.prototype.lastKey=function(s){return this.reverse().firstKey(s)},Ee.prototype.distinct=function(){var s,l=this._ctx,l=l.index&&l.table.schema.idxByName[l.index];return l&&l.multi&&(s={},ma(this._ctx,function(v){var v=v.primaryKey.toString(),j=d(s,v);return s[v]=!0,!j})),this},Ee.prototype.modify=function(s){var l=this,p=this._ctx;return this._write(function(v){function j(ht,Et){var Tt=Et.failures;ft+=ht-Et.numFailures;for(var _t=0,Dt=N(Tt);_t<Dt.length;_t++){var qt=Dt[_t];lt.push(Tt[qt])}}var P=typeof s=="function"?s:function(ht){return pa(ht,s)},Z=p.table.core,ut=Z.schema.primaryKey,tt=ut.outbound,ct=ut.extractKey,bt=200,ut=l.db._options.modifyChunkSize,lt=(ut&&(bt=typeof ut=="object"?ut[Z.name]||ut["*"]||200:ut),[]),ft=0,mt=[],dt=s===lr;return l.clone().primaryKeys().then(function(ht){function Et(_t){var Dt=Math.min(bt,ht.length-_t),qt=ht.slice(_t,_t+Dt);return(dt?Promise.resolve([]):Z.getMany({trans:v,keys:qt,cache:"immutable"})).then(function(Vt){var Wt=[],Ht=[],te=tt?[]:null,Zt=dt?qt:[];if(!dt)for(var Gt=0;Gt<Dt;++Gt){var ee=Vt[Gt],ue={value:At(ee),primKey:ht[_t+Gt]};P.call(ue,ue.value,ue)!==!1&&(ue.value==null?Zt.push(ht[_t+Gt]):tt||pe(ct(ee),ct(ue.value))===0?(Ht.push(ue.value),tt&&te.push(ht[_t+Gt])):(Zt.push(ht[_t+Gt]),Wt.push(ue.value)))}return Promise.resolve(0<Wt.length&&Z.mutate({trans:v,type:"add",values:Wt}).then(function(ge){for(var ae in ge.failures)Zt.splice(parseInt(ae),1);j(Wt.length,ge)})).then(function(){return(0<Ht.length||Tt&&typeof s=="object")&&Z.mutate({trans:v,type:"put",keys:te,values:Ht,criteria:Tt,changeSpec:typeof s!="function"&&s,isAdditionalChunk:0<_t}).then(function(ge){return j(Ht.length,ge)})}).then(function(){return(0<Zt.length||Tt&&dt)&&Z.mutate({trans:v,type:"delete",keys:Zt,criteria:Tt,isAdditionalChunk:0<_t}).then(function(ge){return yn(p.table,Zt,ge)}).then(function(ge){return j(Zt.length,ge)})}).then(function(){return ht.length>_t+Dt&&Et(_t+bt)})})}var Tt=Si(p)&&p.limit===1/0&&(typeof s!="function"||dt)&&{index:p.index,range:p.range};return Et(0).then(function(){if(0<lt.length)throw new m("Error modifying one or more objects",lt,ft,mt);return ht.length})})})},Ee.prototype.delete=function(){var s=this._ctx,l=s.range;return!Si(s)||s.table.schema.yProps||!s.isPrimKey&&l.type!==3?this.modify(lr):this._write(function(p){var v=s.table.core.schema.primaryKey,j=l;return s.table.core.count({trans:p,query:{index:v,range:j}}).then(function(P){return s.table.core.mutate({trans:p,type:"deleteRange",range:j}).then(function(ct){var tt=ct.failures,ct=ct.numFailures;if(ct)throw new m("Could not delete some values",Object.keys(tt).map(function(bt){return tt[bt]}),P-ct);return P-ct})})})};var gl=Ee;function Ee(){}var lr=function(s,l){return l.value=null};function cr(s,l){return s<l?-1:s===l?0:1}function yl(s,l){return l<s?-1:s===l?0:1}function kn(s,l,p){return s=s instanceof Fi?new s.Collection(s):s,s._ctx.error=new(p||TypeError)(l),s}function mi(s){return new s.Collection(s,function(){return ga("")}).limit(0)}function Ln(mt,l,p,v){var j,P,Z,tt,ct,bt,ut,lt=p.length;if(!p.every(function(ht){return typeof ht=="string"}))return kn(mt,tn);function ft(ht){j=ht==="next"?function(Tt){return Tt.toUpperCase()}:function(Tt){return Tt.toLowerCase()},P=ht==="next"?function(Tt){return Tt.toLowerCase()}:function(Tt){return Tt.toUpperCase()},Z=ht==="next"?cr:yl;var Et=p.map(function(Tt){return{lower:P(Tt),upper:j(Tt)}}).sort(function(Tt,_t){return Z(Tt.lower,_t.lower)});tt=Et.map(function(Tt){return Tt.upper}),ct=Et.map(function(Tt){return Tt.lower}),ut=(bt=ht)==="next"?"":v}ft("next");var mt=new mt.Collection(mt,function(){return $n(tt[0],ct[lt-1]+v)}),dt=(mt._ondirectionchange=function(ht){ft(ht)},0);return mt._addAlgorithm(function(ht,Et,Tt){var _t=ht.key;if(typeof _t=="string"){var Dt=P(_t);if(l(Dt,ct,dt))return!0;for(var qt=null,Vt=dt;Vt<lt;++Vt){var Wt=((Ht,te,Zt,Gt,ee,ue)=>{for(var ge=Math.min(Ht.length,Gt.length),ae=-1,de=0;de<ge;++de){var Le=te[de];if(Le!==Gt[de])return ee(Ht[de],Zt[de])<0?Ht.substr(0,de)+Zt[de]+Zt.substr(de+1):ee(Ht[de],Gt[de])<0?Ht.substr(0,de)+Gt[de]+Zt.substr(de+1):0<=ae?Ht.substr(0,ae)+te[ae]+Zt.substr(ae+1):null;ee(Ht[de],Le)<0&&(ae=de)}return ge<Gt.length&&ue==="next"?Ht+Zt.substr(Ht.length):ge<Ht.length&&ue==="prev"?Ht.substr(0,Zt.length):ae<0?null:Ht.substr(0,ae)+Gt[ae]+Zt.substr(ae+1)})(_t,Dt,tt[Vt],ct[Vt],Z,bt);Wt===null&&qt===null?dt=Vt+1:(qt===null||0<Z(qt,Wt))&&(qt=Wt)}Et(qt!==null?function(){ht.continue(qt+ut)}:Tt)}return!1}),mt}function $n(s,l,p,v){return{type:2,lower:s,upper:l,lowerOpen:p,upperOpen:v}}function ga(s){return{type:1,lower:s,upper:s}}Object.defineProperty(He.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),He.prototype.between=function(s,l,p,v){p=p!==!1,v=v===!0;try{return 0<this._cmp(s,l)||this._cmp(s,l)===0&&(p||v)&&(!p||!v)?mi(this):new this.Collection(this,function(){return $n(s,l,!p,!v)})}catch{return kn(this,Sn)}},He.prototype.equals=function(s){return s==null?kn(this,Sn):new this.Collection(this,function(){return ga(s)})},He.prototype.above=function(s){return s==null?kn(this,Sn):new this.Collection(this,function(){return $n(s,void 0,!0)})},He.prototype.aboveOrEqual=function(s){return s==null?kn(this,Sn):new this.Collection(this,function(){return $n(s,void 0,!1)})},He.prototype.below=function(s){return s==null?kn(this,Sn):new this.Collection(this,function(){return $n(void 0,s,!1,!0)})},He.prototype.belowOrEqual=function(s){return s==null?kn(this,Sn):new this.Collection(this,function(){return $n(void 0,s)})},He.prototype.startsWith=function(s){return typeof s!="string"?kn(this,tn):this.between(s,s+qn,!0,!0)},He.prototype.startsWithIgnoreCase=function(s){return s===""?this.startsWith(s):Ln(this,function(l,p){return l.indexOf(p[0])===0},[s],qn)},He.prototype.equalsIgnoreCase=function(s){return Ln(this,function(l,p){return l===p[0]},[s],"")},He.prototype.anyOfIgnoreCase=function(){var s=w.apply(S,arguments);return s.length===0?mi(this):Ln(this,function(l,p){return p.indexOf(l)!==-1},s,"")},He.prototype.startsWithAnyOfIgnoreCase=function(){var s=w.apply(S,arguments);return s.length===0?mi(this):Ln(this,function(l,p){return p.some(function(v){return l.indexOf(v)===0})},s,qn)},He.prototype.anyOf=function(){var s,l,p=this,v=w.apply(S,arguments),j=this._cmp;try{v.sort(j)}catch{return kn(this,Sn)}return v.length===0?mi(this):((s=new this.Collection(this,function(){return $n(v[0],v[v.length-1])}))._ondirectionchange=function(P){j=P==="next"?p._ascending:p._descending,v.sort(j)},l=0,s._addAlgorithm(function(P,Z,tt){for(var ct=P.key;0<j(ct,v[l]);)if(++l===v.length)return Z(tt),!1;return j(ct,v[l])===0||(Z(function(){P.continue(v[l])}),!1)}),s)},He.prototype.notEqual=function(s){return this.inAnyRange([[-1/0,s],[s,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},He.prototype.noneOf=function(){var s=w.apply(S,arguments);if(s.length===0)return new this.Collection(this);try{s.sort(this._ascending)}catch{return kn(this,Sn)}var l=s.reduce(function(p,v){return p?p.concat([[p[p.length-1][1],v]]):[[-1/0,v]]},null);return l.push([s[s.length-1],this.db._maxKey]),this.inAnyRange(l,{includeLowers:!1,includeUppers:!1})},He.prototype.inAnyRange=function(s,Tt){var p=this,v=this._cmp,j=this._ascending,P=this._descending,Z=this._min,tt=this._max;if(s.length===0)return mi(this);if(!s.every(function(_t){return _t[0]!==void 0&&_t[1]!==void 0&&j(_t[0],_t[1])<=0}))return kn(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",G.InvalidArgument);var ct=!Tt||Tt.includeLowers!==!1,bt=Tt&&Tt.includeUppers===!0,ut,lt=j;function ft(_t,Dt){return lt(_t[0],Dt[0])}try{(ut=s.reduce(function(_t,Dt){for(var qt=0,Vt=_t.length;qt<Vt;++qt){var Wt=_t[qt];if(v(Dt[0],Wt[1])<0&&0<v(Dt[1],Wt[0])){Wt[0]=Z(Wt[0],Dt[0]),Wt[1]=tt(Wt[1],Dt[1]);break}}return qt===Vt&&_t.push(Dt),_t},[])).sort(ft)}catch{return kn(this,Sn)}var mt=0,dt=bt?function(_t){return 0<j(_t,ut[mt][1])}:function(_t){return 0<=j(_t,ut[mt][1])},ht=ct?function(_t){return 0<P(_t,ut[mt][0])}:function(_t){return 0<=P(_t,ut[mt][0])},Et=dt,Tt=new this.Collection(this,function(){return $n(ut[0][0],ut[ut.length-1][1],!ct,!bt)});return Tt._ondirectionchange=function(_t){lt=_t==="next"?(Et=dt,j):(Et=ht,P),ut.sort(ft)},Tt._addAlgorithm(function(_t,Dt,qt){for(var Vt,Wt=_t.key;Et(Wt);)if(++mt===ut.length)return Dt(qt),!1;return!dt(Vt=Wt)&&!ht(Vt)||(p._cmp(Wt,ut[mt][1])===0||p._cmp(Wt,ut[mt][0])===0||Dt(function(){lt===j?_t.continue(ut[mt][0]):_t.continue(ut[mt][1])}),!1)}),Tt},He.prototype.startsWithAnyOf=function(){var s=w.apply(S,arguments);return s.every(function(l){return typeof l=="string"})?s.length===0?mi(this):this.inAnyRange(s.map(function(l){return[l,l+qn]})):kn(this,"startsWithAnyOf() only works with strings")};var Fi=He;function He(){}function Hn(s){return Re(function(l){return zi(l),s(l.target.error),!1})}function zi(s){s.stopPropagation&&s.stopPropagation(),s.preventDefault&&s.preventDefault()}var cs="storagemutated",Bi="x-storagemutated-1",fn=Xs(null,cs),ur=(wn.prototype._lock=function(){return V(!st.global),++this._reculock,this._reculock!==1||st.global||(st.lockOwnerFor=this),this},wn.prototype._unlock=function(){if(V(!st.global),--this._reculock==0)for(st.global||(st.lockOwnerFor=null);0<this._blockedFuncs.length&&!this._locked();){var s=this._blockedFuncs.shift();try{Un(s[1],s[0])}catch{}}return this},wn.prototype._locked=function(){return this._reculock&&st.lockOwnerFor!==this},wn.prototype.create=function(s){var l=this;if(this.mode){var p=this.db.idbdb,v=this.db._state.dbOpenError;if(V(!this.idbtrans),!s&&!p)switch(v&&v.name){case"DatabaseClosedError":throw new G.DatabaseClosed(v);case"MissingAPIError":throw new G.MissingAPI(v.message,v);default:throw new G.OpenFailed(v)}if(!this.active)throw new G.TransactionInactive;V(this._completion._state===null),(s=this.idbtrans=s||(this.db.core||p).transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})).onerror=Re(function(j){zi(j),l._reject(s.error)}),s.onabort=Re(function(j){zi(j),l.active&&l._reject(new G.Abort(s.error)),l.active=!1,l.on("abort").fire(j)}),s.oncomplete=Re(function(){l.active=!1,l._resolve(),"mutatedParts"in s&&fn.storagemutated.fire(s.mutatedParts)})}return this},wn.prototype._promise=function(s,l,p){var v,j=this;return s==="readwrite"&&this.mode!=="readwrite"?Oe(new G.ReadOnly("Transaction is readonly")):this.active?this._locked()?new Kt(function(P,Z){j._blockedFuncs.push([function(){j._promise(s,l,p).then(P,Z)},st])}):p?qe(function(){var P=new Kt(function(Z,tt){j._lock();var ct=l(Z,tt,j);ct&&ct.then&&ct.then(Z,tt)});return P.finally(function(){return j._unlock()}),P._lib=!0,P}):((v=new Kt(function(P,Z){var tt=l(P,Z,j);tt&&tt.then&&tt.then(P,Z)}))._lib=!0,v):Oe(new G.TransactionInactive)},wn.prototype._root=function(){return this.parent?this.parent._root():this},wn.prototype.waitFor=function(s){var l,p=this._root(),v=Kt.resolve(s),j=(p._waitingFor?p._waitingFor=p._waitingFor.then(function(){return v}):(p._waitingFor=v,p._waitingQueue=[],l=p.idbtrans.objectStore(p.storeNames[0]),(function P(){for(++p._spinCount;p._waitingQueue.length;)p._waitingQueue.shift()();p._waitingFor&&(l.get(-1/0).onsuccess=P)})()),p._waitingFor);return new Kt(function(P,Z){v.then(function(tt){return p._waitingQueue.push(Re(P.bind(null,tt)))},function(tt){return p._waitingQueue.push(Re(Z.bind(null,tt)))}).finally(function(){p._waitingFor===j&&(p._waitingFor=null)})})},wn.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new G.Abort))},wn.prototype.table=function(s){var l=this._memoizedTables||(this._memoizedTables={});if(d(l,s))return l[s];var p=this.schema[s];if(p)return(p=new this.db.Table(s,p,this)).core=this.db.core.table(s),l[s]=p;throw new G.NotFound("Table "+s+" not part of transaction")},wn);function wn(){}function ti(s,l,p,v,j,P,Z,tt){return{name:s,keyPath:l,unique:p,multi:v,auto:j,compound:P,src:(p&&!Z?"&":"")+(v?"*":"")+(j?"++":"")+ya(l),type:tt}}function ya(s){return typeof s=="string"?s:s?"["+[].join.call(s,"+")+"]":""}function us(s,l,p){return{name:s,primKey:l,indexes:p,mappedClass:null,idxByName:(v=function(j){return[j.name,j]},p.reduce(function(j,P,Z){return P=v(P,Z),P&&(j[P[0]]=P[1]),j},{}))};var v}var ds=function(s){try{return s.only([[]]),ds=function(){return[[]]},[[]]}catch{return ds=function(){return qn},qn}};function hs(s){return s==null?function(){}:typeof s=="string"?(l=s).split(".").length===1?function(p){return p[l]}:function(p){return L(p,l)}:function(p){return L(p,s)};var l}function Vs(s){return[].slice.call(s)}var so=0;function sn(s){return s==null?":id":typeof s=="string"?s:"[".concat(s.join("+"),"]")}function Ii(s,l,ct){function v(dt){if(dt.type===3)return null;if(dt.type===4)throw new Error("Cannot convert never type to IDBKeyRange");var lt=dt.lower,ft=dt.upper,mt=dt.lowerOpen,dt=dt.upperOpen;return lt===void 0?ft===void 0?null:l.upperBound(ft,!!dt):ft===void 0?l.lowerBound(lt,!!mt):l.bound(lt,ft,!!mt,!!dt)}function j(ut){var lt,ft=ut.name;return{name:ft,schema:ut,mutate:function(mt){var dt=mt.trans,ht=mt.type,Et=mt.keys,Tt=mt.values,_t=mt.range;return new Promise(function(Dt,qt){Dt=Re(Dt);var Vt=dt.objectStore(ft),Wt=Vt.keyPath==null,Ht=ht==="put"||ht==="add";if(!Ht&&ht!=="delete"&&ht!=="deleteRange")throw new Error("Invalid operation type: "+ht);var te,Zt=(Et||Tt||{length:1}).length;if(Et&&Tt&&Et.length!==Tt.length)throw new Error("Given keys array must have same length as given values array.");if(Zt===0)return Dt({numFailures:0,failures:{},results:[],lastResult:void 0});function Gt(Me){++ge,zi(Me)}var ee=[],ue=[],ge=0;if(ht==="deleteRange"){if(_t.type===4)return Dt({numFailures:ge,failures:ue,results:[],lastResult:void 0});_t.type===3?ee.push(te=Vt.clear()):ee.push(te=Vt.delete(v(_t)))}else{var Wt=Ht?Wt?[Tt,Et]:[Tt,null]:[Et,null],ae=Wt[0],de=Wt[1];if(Ht)for(var Le=0;Le<Zt;++Le)ee.push(te=de&&de[Le]!==void 0?Vt[ht](ae[Le],de[Le]):Vt[ht](ae[Le])),te.onerror=Gt;else for(Le=0;Le<Zt;++Le)ee.push(te=Vt[ht](ae[Le])),te.onerror=Gt}function Tn(Me){Me=Me.target.result,ee.forEach(function(ji,xs){return ji.error!=null&&(ue[xs]=ji.error)}),Dt({numFailures:ge,failures:ue,results:ht==="delete"?Et:ee.map(function(ji){return ji.result}),lastResult:Me})}te.onerror=function(Me){Gt(Me),Tn(Me)},te.onsuccess=Tn})},getMany:function(mt){var dt=mt.trans,ht=mt.keys;return new Promise(function(Et,Tt){Et=Re(Et);for(var _t,Dt=dt.objectStore(ft),qt=ht.length,Vt=new Array(qt),Wt=0,Ht=0,te=function(ee){ee=ee.target,Vt[ee._pos]=ee.result,++Ht===Wt&&Et(Vt)},Zt=Hn(Tt),Gt=0;Gt<qt;++Gt)ht[Gt]!=null&&((_t=Dt.get(ht[Gt]))._pos=Gt,_t.onsuccess=te,_t.onerror=Zt,++Wt);Wt===0&&Et(Vt)})},get:function(mt){var dt=mt.trans,ht=mt.key;return new Promise(function(Et,Tt){Et=Re(Et);var _t=dt.objectStore(ft).get(ht);_t.onsuccess=function(Dt){return Et(Dt.target.result)},_t.onerror=Hn(Tt)})},query:(lt=tt,function(mt){return new Promise(function(dt,ht){dt=Re(dt);var Et,Tt,_t,Ht=mt.trans,Dt=mt.values,qt=mt.limit,Wt=mt.query,Vt=qt===1/0?void 0:qt,te=Wt.index,Wt=Wt.range,Ht=Ht.objectStore(ft),Ht=te.isPrimaryKey?Ht:Ht.index(te.name),te=v(Wt);if(qt===0)return dt({result:[]});lt?((Wt=Dt?Ht.getAll(te,Vt):Ht.getAllKeys(te,Vt)).onsuccess=function(Zt){return dt({result:Zt.target.result})},Wt.onerror=Hn(ht)):(Et=0,Tt=!Dt&&"openKeyCursor"in Ht?Ht.openKeyCursor(te):Ht.openCursor(te),_t=[],Tt.onsuccess=function(Zt){var Gt=Tt.result;return!Gt||(_t.push(Dt?Gt.value:Gt.primaryKey),++Et===qt)?dt({result:_t}):void Gt.continue()},Tt.onerror=Hn(ht))})}),openCursor:function(mt){var dt=mt.trans,ht=mt.values,Et=mt.query,Tt=mt.reverse,_t=mt.unique;return new Promise(function(Dt,qt){Dt=Re(Dt);var Ht=Et.index,Vt=Et.range,Wt=dt.objectStore(ft),Wt=Ht.isPrimaryKey?Wt:Wt.index(Ht.name),Ht=Tt?_t?"prevunique":"prev":_t?"nextunique":"next",te=!ht&&"openKeyCursor"in Wt?Wt.openKeyCursor(v(Vt),Ht):Wt.openCursor(v(Vt),Ht);te.onerror=Hn(qt),te.onsuccess=Re(function(Zt){var Gt,ee,ue,ge,ae=te.result;ae?(ae.___id=++so,ae.done=!1,Gt=ae.continue.bind(ae),ee=(ee=ae.continuePrimaryKey)&&ee.bind(ae),ue=ae.advance.bind(ae),ge=function(){throw new Error("Cursor not stopped")},ae.trans=dt,ae.stop=ae.continue=ae.continuePrimaryKey=ae.advance=function(){throw new Error("Cursor not started")},ae.fail=Re(qt),ae.next=function(){var de=this,Le=1;return this.start(function(){return Le--?de.continue():de.stop()}).then(function(){return de})},ae.start=function(de){function Le(){if(te.result)try{de()}catch(Me){ae.fail(Me)}else ae.done=!0,ae.start=function(){throw new Error("Cursor behind last entry")},ae.stop()}var Tn=new Promise(function(Me,ji){Me=Re(Me),te.onerror=Hn(ji),ae.fail=ji,ae.stop=function(xs){ae.stop=ae.continue=ae.continuePrimaryKey=ae.advance=ge,Me(xs)}});return te.onsuccess=Re(function(Me){te.onsuccess=Le,Le()}),ae.continue=Gt,ae.continuePrimaryKey=ee,ae.advance=ue,Le(),Tn},Dt(ae)):Dt(null)},qt)})},count:function(mt){var dt=mt.query,ht=mt.trans,Et=dt.index,Tt=dt.range;return new Promise(function(_t,Dt){var qt=ht.objectStore(ft),qt=Et.isPrimaryKey?qt:qt.index(Et.name),Vt=v(Tt),Vt=Vt?qt.count(Vt):qt.count();Vt.onsuccess=Re(function(Wt){return _t(Wt.target.result)}),Vt.onerror=Hn(Dt)})}}}P=ct,Z=Vs((ct=s).objectStoreNames);var P,ct={schema:{name:ct.name,tables:Z.map(function(ut){return P.objectStore(ut)}).map(function(ut){var lt=ut.keyPath,ft=ut.autoIncrement,dt=U(lt),mt={},dt={name:ut.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:lt==null,compound:dt,keyPath:lt,autoIncrement:ft,unique:!0,extractKey:hs(lt)},indexes:Vs(ut.indexNames).map(function(ht){return ut.index(ht)}).map(function(_t){var Dt=_t.name,Et=_t.unique,Tt=_t.multiEntry,_t=_t.keyPath,Dt={name:Dt,compound:U(_t),keyPath:_t,unique:Et,multiEntry:Tt,extractKey:hs(_t)};return mt[sn(_t)]=Dt}),getIndexByKeyPath:function(ht){return mt[sn(ht)]}};return mt[":id"]=dt.primaryKey,lt!=null&&(mt[sn(lt)]=dt.primaryKey),dt})},hasGetAll:0<Z.length&&"getAll"in P.objectStore(Z[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)},Z=ct.schema,tt=ct.hasGetAll,ct=Z.tables.map(j),bt={};return ct.forEach(function(ut){return bt[ut.name]=ut}),{stack:"dbcore",transaction:s.transaction.bind(s),table:function(ut){if(bt[ut])return bt[ut];throw new Error("Table '".concat(ut,"' not found"))},MIN_KEY:-1/0,MAX_KEY:ds(l),schema:Z}}function xa(s,l,p,v){return p=p.IDBKeyRange,l=Ii(l,p,v),{dbcore:s.dbcore.reduce(function(j,P){return P=P.create,c(c({},j),P(j))},l)}}function wi(s,l){var p=l.db,p=xa(s._middlewares,p,s._deps,l);s.core=p.dbcore,s.tables.forEach(function(v){var j=v.name;s.core.schema.tables.some(function(P){return P.name===j})&&(v.core=s.core.table(j),s[j]instanceof s.Table)&&(s[j].core=v.core)})}function va(s,l,p,v){p.forEach(function(j){var P=v[j];l.forEach(function(Z){var tt=(function ct(bt,ut){return C(bt,ut)||(bt=u(bt))&&ct(bt,ut)})(Z,j);(!tt||"value"in tt&&tt.value===void 0)&&(Z===s.Transaction.prototype||Z instanceof s.Transaction?h(Z,j,{get:function(){return this.table(j)},set:function(ct){g(this,j,{value:ct,writable:!0,configurable:!0,enumerable:!0})}}):Z[j]=new s.Table(j,P))})})}function Ws(s,l){l.forEach(function(p){for(var v in p)p[v]instanceof s.Table&&delete p[v]})}function dr(s,l){return s._cfg.version-l._cfg.version}function Qs(s,l,p,v){var j=s._dbSchema,P=(p.objectStoreNames.contains("$meta")&&!j.$meta&&(j.$meta=us("$meta",ro("")[0],[]),s._storeNames.push("$meta")),s._createTransaction("readwrite",s._storeNames,j)),Z=(P.create(p),P._completion.catch(v),P._reject.bind(P)),tt=st.transless||st;qe(function(){if(st.trans=P,st.transless=tt,l!==0)return wi(s,p),bt=l,((ct=P).storeNames.includes("$meta")?ct.table("$meta").get("version").then(function(ut){return ut??bt}):Kt.resolve(bt)).then(function(Et){var lt=s,ft=Et,mt=P,dt=p,ht=[],Et=lt._versions,Tt=lt._dbSchema=fs(0,lt.idbdb,dt);return(Et=Et.filter(function(_t){return _t._cfg.version>=ft})).length===0?Kt.resolve():(Et.forEach(function(_t){ht.push(function(){var Dt,qt,Vt,Wt=Tt,Ht=_t._cfg.dbschema,te=(Aa(lt,Wt,dt),Aa(lt,Ht,dt),Tt=lt._dbSchema=Ht,_a(Wt,Ht)),Zt=(te.add.forEach(function(Gt){hr(dt,Gt[0],Gt[1].primKey,Gt[1].indexes)}),te.change.forEach(function(Gt){if(Gt.recreate)throw new G.Upgrade("Not yet support for changing primary key");var ee=dt.objectStore(Gt.name);Gt.add.forEach(function(ue){return Ea(ee,ue)}),Gt.change.forEach(function(ue){ee.deleteIndex(ue.name),Ea(ee,ue)}),Gt.del.forEach(function(ue){return ee.deleteIndex(ue)})}),_t._cfg.contentUpgrade);if(Zt&&_t._cfg.version>ft)return wi(lt,dt),mt._memoizedTables={},Dt=rt(Ht),te.del.forEach(function(Gt){Dt[Gt]=Wt[Gt]}),Ws(lt,[lt.Transaction.prototype]),va(lt,[lt.Transaction.prototype],N(Dt),Dt),mt.schema=Dt,(qt=y(Zt))&&$e(),Ht=Kt.follow(function(){var Gt;(Vt=Zt(mt))&&qt&&(Gt=Mn.bind(null,null),Vt.then(Gt,Gt))}),Vt&&typeof Vt.then=="function"?Kt.resolve(Vt):Ht.then(function(){return Vt})}),ht.push(function(Dt){var qt,Vt,Wt=_t._cfg.dbschema;qt=Wt,Vt=Dt,[].slice.call(Vt.db.objectStoreNames).forEach(function(Ht){return qt[Ht]==null&&Vt.db.deleteObjectStore(Ht)}),Ws(lt,[lt.Transaction.prototype]),va(lt,[lt.Transaction.prototype],lt._storeNames,lt._dbSchema),mt.schema=lt._dbSchema}),ht.push(function(Dt){lt.idbdb.objectStoreNames.contains("$meta")&&(Math.ceil(lt.idbdb.version/10)===_t._cfg.version?(lt.idbdb.deleteObjectStore("$meta"),delete lt._dbSchema.$meta,lt._storeNames=lt._storeNames.filter(function(qt){return qt!=="$meta"})):Dt.objectStore("$meta").put(_t._cfg.version,"version"))})}),(function _t(){return ht.length?Kt.resolve(ht.shift()(mt.idbtrans)).then(_t):Kt.resolve()})().then(function(){ao(Tt,dt)}))}).catch(Z);var ct,bt;N(j).forEach(function(ut){hr(p,ut,j[ut].primKey,j[ut].indexes)}),wi(s,p),Kt.follow(function(){return s.on.populate.fire(P)}).catch(Z)})}function ba(s,l){ao(s._dbSchema,l),l.db.version%10!=0||l.objectStoreNames.contains("$meta")||l.db.createObjectStore("$meta").add(Math.ceil(l.db.version/10-1),"version");var p=fs(0,s.idbdb,l);Aa(s,s._dbSchema,l);for(var v=0,j=_a(p,s._dbSchema).change;v<j.length;v++){var P=(Z=>{if(Z.change.length||Z.recreate)return console.warn("Unable to patch indexes of table ".concat(Z.name," because it has changes on the type of index or primary key.")),{value:void 0};var tt=l.objectStore(Z.name);Z.add.forEach(function(ct){$t&&console.debug("Dexie upgrade patch: Creating missing index ".concat(Z.name,".").concat(ct.src)),Ea(tt,ct)})})(j[v]);if(typeof P=="object")return P.value}}function _a(s,l){var p,v={del:[],add:[],change:[]};for(p in s)l[p]||v.del.push(p);for(p in l){var j=s[p],P=l[p];if(j){var Z={name:p,def:P,recreate:!1,del:[],add:[],change:[]};if(""+(j.primKey.keyPath||"")!=""+(P.primKey.keyPath||"")||j.primKey.auto!==P.primKey.auto)Z.recreate=!0,v.change.push(Z);else{var tt=j.idxByName,ct=P.idxByName,bt=void 0;for(bt in tt)ct[bt]||Z.del.push(bt);for(bt in ct){var ut=tt[bt],lt=ct[bt];ut?ut.src!==lt.src&&Z.change.push(lt):Z.add.push(lt)}(0<Z.del.length||0<Z.add.length||0<Z.change.length)&&v.change.push(Z)}}else v.add.push([p,P])}return v}function hr(s,l,p,v){var j=s.db.createObjectStore(l,p.keyPath?{keyPath:p.keyPath,autoIncrement:p.auto}:{autoIncrement:p.auto});v.forEach(function(P){return Ea(j,P)})}function ao(s,l){N(s).forEach(function(p){l.db.objectStoreNames.contains(p)||($t&&console.debug("Dexie: Creating missing table",p),hr(l,p,s[p].primKey,s[p].indexes))})}function Ea(s,l){s.createIndex(l.name,l.keyPath,{unique:l.unique,multiEntry:l.multi})}function fs(s,l,p){var v={};return I(l.objectStoreNames,0).forEach(function(j){for(var P=p.objectStore(j),Z=ti(ya(bt=P.keyPath),bt||"",!0,!1,!!P.autoIncrement,bt&&typeof bt!="string",!0),tt=[],ct=0;ct<P.indexNames.length;++ct){var ut=P.index(P.indexNames[ct]),bt=ut.keyPath,ut=ti(ut.name,bt,!!ut.unique,!!ut.multiEntry,!1,bt&&typeof bt!="string",!1);tt.push(ut)}v[j]=us(j,Z,tt)}),v}function Aa(s,l,p){for(var v=p.db.objectStoreNames,j=0;j<v.length;++j){var P=v[j],Z=p.objectStore(P);s._hasGetAll="getAll"in Z;for(var tt=0;tt<Z.indexNames.length;++tt){var ct,bt=Z.indexNames[tt],ut=Z.index(bt).keyPath,ut=typeof ut=="string"?ut:"["+I(ut).join("+")+"]";l[P]&&(ct=l[P].idxByName[ut])&&(ct.name=bt,delete l[P].idxByName[ut],l[P].idxByName[bt]=ct)}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&B.WorkerGlobalScope&&B instanceof B.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(s._hasGetAll=!1)}function ro(s){return s.split(",").map(function(l,p){var j=l.split(":"),v=(v=j[1])==null?void 0:v.trim(),j=(l=j[0].trim()).replace(/([&*]|\+\+)/g,""),P=/^\[/.test(j)?j.match(/^\[(.*)\]$/)[1].split("+"):j;return ti(j,P||null,/\&/.test(l),/\*/.test(l),/\+\+/.test(l),U(P),p===0,v)})}ps.prototype._createTableSchema=us,ps.prototype._parseIndexSyntax=ro,ps.prototype._parseStoresSpec=function(s,l){var p=this;N(s).forEach(function(v){if(s[v]!==null){var j=p._parseIndexSyntax(s[v]),P=j.shift();if(!P)throw new G.Schema("Invalid schema for table "+v+": "+s[v]);if(P.unique=!0,P.multi)throw new G.Schema("Primary key cannot be multiEntry*");j.forEach(function(Z){if(Z.auto)throw new G.Schema("Only primary key can be marked as autoIncrement (++)");if(!Z.keyPath)throw new G.Schema("Index must have a name and cannot be an empty string")}),P=p._createTableSchema(v,P,j),l[v]=P}})},ps.prototype.stores=function(p){var l=this.db,p=(this._cfg.storesSource=this._cfg.storesSource?F(this._cfg.storesSource,p):p,l._versions),v={},j={};return p.forEach(function(P){F(v,P._cfg.storesSource),j=P._cfg.dbschema={},P._parseStoresSpec(v,j)}),l._dbSchema=j,Ws(l,[l._allTables,l,l.Transaction.prototype]),va(l,[l._allTables,l,l.Transaction.prototype,this._cfg.tables],N(j),j),l._storeNames=N(j),this},ps.prototype.upgrade=function(s){return this._cfg.contentUpgrade=Qt(this._cfg.contentUpgrade||at,s),this};var xl=ps;function ps(){}function fr(s,l){var p=s._dbNamesDB;return p||(p=s._dbNamesDB=new ei(qs,{addons:[],indexedDB:s,IDBKeyRange:l})).version(1).stores({dbnames:"name"}),p.table("dbnames")}function Sa(s){return s&&typeof s.databases=="function"}function pr(s){return qe(function(){return st.letThrough=!0,s()})}function mr(s){return!("from"in s)}var pn=function(s,l){var p;if(!this)return p=new pn,s&&"d"in s&&F(p,s),p;F(this,arguments.length?{d:1,from:s,to:1<arguments.length?l:s}:{d:0})};function Zs(s,l,p){var v=pe(l,p);if(!isNaN(v)){if(0<v)throw RangeError();if(mr(s))return F(s,{from:l,to:p,d:1});var v=s.l,j=s.r;if(pe(p,s.from)<0)return v?Zs(v,l,p):s.l={from:l,to:p,d:1,l:null,r:null},lo(s);if(0<pe(l,s.to))return j?Zs(j,l,p):s.r={from:l,to:p,d:1,l:null,r:null},lo(s);pe(l,s.from)<0&&(s.from=l,s.l=null,s.d=j?j.d+1:1),0<pe(p,s.to)&&(s.to=p,s.r=null,s.d=s.l?s.l.d+1:1),l=!s.r,v&&!s.l&&Ui(s,v),j&&l&&Ui(s,j)}}function Ui(s,l){mr(l)||(function p(v,j){var P=j.from,Z=j.l,tt=j.r;Zs(v,P,j.to),Z&&p(v,Z),tt&&p(v,tt)})(s,l)}function oo(s,l){var p=wa(l),v=p.next();if(!v.done)for(var j=v.value,P=wa(s),Z=P.next(j.from),tt=Z.value;!v.done&&!Z.done;){if(pe(tt.from,j.to)<=0&&0<=pe(tt.to,j.from))return!0;pe(j.from,tt.from)<0?j=(v=p.next(tt.from)).value:tt=(Z=P.next(j.from)).value}return!1}function wa(s){var l=mr(s)?null:{s:0,n:s};return{next:function(p){for(var v=0<arguments.length;l;)switch(l.s){case 0:if(l.s=1,v)for(;l.n.l&&pe(p,l.n.from)<0;)l={up:l,n:l.n.l,s:1};else for(;l.n.l;)l={up:l,n:l.n.l,s:1};case 1:if(l.s=2,!v||pe(p,l.n.to)<=0)return{value:l.n,done:!1};case 2:if(l.n.r){l.s=3,l={up:l,n:l.n.r,s:0};continue}case 3:l=l.up}return{done:!0}}}}function lo(s){var l,p,v,j=(((j=s.r)==null?void 0:j.d)||0)-(((j=s.l)==null?void 0:j.d)||0),j=1<j?"r":j<-1?"l":"";j&&(l=j=="r"?"l":"r",p=c({},s),v=s[j],s.from=v.from,s.to=v.to,s[j]=v[j],p[j]=v[l],(s[l]=p).d=gr(p)),s.d=gr(s)}function gr(p){var l=p.r,p=p.l;return(l?p?Math.max(l.d,p.d):l.d:p?p.d:0)+1}function Ra(s,l){return N(l).forEach(function(p){s[p]?Ui(s[p],l[p]):s[p]=(function v(j){var P,Z,tt={};for(P in j)d(j,P)&&(Z=j[P],tt[P]=!Z||typeof Z!="object"||gt.has(Z.constructor)?Z:v(Z));return tt})(l[p])}),s}function yr(s,l){return s.all||l.all||Object.keys(s).some(function(p){return l[p]&&oo(l[p],s[p])})}b(pn.prototype,((Ce={add:function(s){return Ui(this,s),this},addKey:function(s){return Zs(this,s,s),this},addKeys:function(s){var l=this;return s.forEach(function(p){return Zs(l,p,p)}),this},hasKey:function(s){var l=wa(this).next(s).value;return l&&pe(l.from,s)<=0&&0<=pe(l.to,s)}})[nt]=function(){return wa(this)},Ce));var qi={},xr={},vr=!1;function Ta(s){Ra(xr,s),vr||(vr=!0,setTimeout(function(){vr=!1,br(xr,!(xr={}))},0))}function br(s,l){l===void 0&&(l=!1);var p=new Set;if(s.all)for(var v=0,j=Object.values(qi);v<j.length;v++)co(tt=j[v],s,p,l);else for(var P in s){var Z,tt,P=/^idb\:\/\/(.*)\/(.*)\//.exec(P);P&&(Z=P[1],P=P[2],tt=qi["idb://".concat(Z,"/").concat(P)])&&co(tt,s,p,l)}p.forEach(function(ct){return ct()})}function co(s,l,p,v){for(var j=[],P=0,Z=Object.entries(s.queries.query);P<Z.length;P++){for(var tt=Z[P],ct=tt[0],bt=[],ut=0,lt=tt[1];ut<lt.length;ut++){var ft=lt[ut];yr(l,ft.obsSet)?ft.subscribers.forEach(function(Et){return p.add(Et)}):v&&bt.push(ft)}v&&j.push([ct,bt])}if(v)for(var mt=0,dt=j;mt<dt.length;mt++){var ht=dt[mt],ct=ht[0],bt=ht[1];s.queries.query[ct]=bt}}function vl(s){var l=s._state,p=s._deps.indexedDB;if(l.isBeingOpened||s.idbdb)return l.dbReadyPromise.then(function(){return l.dbOpenError?Oe(l.dbOpenError):s});l.isBeingOpened=!0,l.dbOpenError=null,l.openComplete=!1;var v=l.openCanceller,j=Math.round(10*s.verno),P=!1;function Z(){if(l.openCanceller!==v)throw new G.DatabaseClosed("db.open() was cancelled")}function tt(){return new Kt(function(ft,mt){if(Z(),!p)throw new G.MissingAPI;var dt=s.name,ht=l.autoSchema||!j?p.open(dt):p.open(dt,j);if(!ht)throw new G.MissingAPI;ht.onerror=Hn(mt),ht.onblocked=Re(s._fireOnBlocked),ht.onupgradeneeded=Re(function(Et){var Tt;ut=ht.transaction,l.autoSchema&&!s._options.allowEmptyDB?(ht.onerror=zi,ut.abort(),ht.result.close(),(Tt=p.deleteDatabase(dt)).onsuccess=Tt.onerror=Re(function(){mt(new G.NoSuchDatabase("Database ".concat(dt," doesnt exist")))})):(ut.onerror=Hn(mt),Tt=Et.oldVersion>Math.pow(2,62)?0:Et.oldVersion,lt=Tt<1,s.idbdb=ht.result,P&&ba(s,ut),Qs(s,Tt/10,ut,mt))},mt),ht.onsuccess=Re(function(){ut=null;var Et,Tt,_t,Dt,qt,Vt,Wt=s.idbdb=ht.result,Ht=I(Wt.objectStoreNames);if(0<Ht.length)try{var te=Wt.transaction((qt=Ht).length===1?qt[0]:qt,"readonly");if(l.autoSchema)Vt=Wt,Dt=te,(_t=s).verno=Vt.version/10,Dt=_t._dbSchema=fs(0,Vt,Dt),_t._storeNames=I(Vt.objectStoreNames,0),va(_t,[_t._allTables],N(Dt),Dt);else if(Aa(s,s._dbSchema,te),Tt=te,((Tt=_a(fs(0,(Et=s).idbdb,Tt),Et._dbSchema)).add.length||Tt.change.some(function(Zt){return Zt.add.length||Zt.change.length}))&&!P)return console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Dexie will add missing parts and increment native version number to workaround this."),Wt.close(),j=Wt.version+1,P=!0,ft(tt());wi(s,te)}catch{}Oi.push(s),Wt.onversionchange=Re(function(Zt){l.vcFired=!0,s.on("versionchange").fire(Zt)}),Wt.onclose=Re(function(){s.close({disableAutoOpen:!1})}),lt&&(Ht=s._deps,qt=dt,Sa(Vt=Ht.indexedDB)||qt===qs||fr(Vt,Ht.IDBKeyRange).put({name:qt}).catch(at)),ft()},mt)}).catch(function(ft){switch(ft?.name){case"UnknownError":if(0<l.PR1398_maxLoop)return l.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),tt();break;case"VersionError":if(0<j)return j=0,tt()}return Kt.reject(ft)})}var ct,bt=l.dbReadyResolve,ut=null,lt=!1;return Kt.race([v,(typeof navigator>"u"?Kt.resolve():!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise(function(ft){function mt(){return indexedDB.databases().finally(ft)}ct=setInterval(mt,100),mt()}).finally(function(){return clearInterval(ct)}):Promise.resolve()).then(tt)]).then(function(){return Z(),l.onReadyBeingFired=[],Kt.resolve(pr(function(){return s.on.ready.fire(s.vip)})).then(function ft(){var mt;if(0<l.onReadyBeingFired.length)return mt=l.onReadyBeingFired.reduce(Qt,at),l.onReadyBeingFired=[],Kt.resolve(pr(function(){return mt(s.vip)})).then(ft)})}).finally(function(){l.openCanceller===v&&(l.onReadyBeingFired=null,l.isBeingOpened=!1)}).catch(function(ft){l.dbOpenError=ft;try{ut&&ut.abort()}catch{}return v===l.openCanceller&&s._close(),Oe(ft)}).finally(function(){l.openComplete=!0,bt()}).then(function(){var ft;return lt&&(ft={},s.tables.forEach(function(mt){mt.schema.indexes.forEach(function(dt){dt.name&&(ft["idb://".concat(s.name,"/").concat(mt.name,"/").concat(dt.name)]=new pn(-1/0,[[[]]]))}),ft["idb://".concat(s.name,"/").concat(mt.name,"/")]=ft["idb://".concat(s.name,"/").concat(mt.name,"/:dels")]=new pn(-1/0,[[[]]])}),fn(cs).fire(ft),br(ft,!0)),s})}function Js(s){function l(P){return s.next(P)}var p=j(l),v=j(function(P){return s.throw(P)});function j(P){return function(tt){var tt=P(tt),ct=tt.value;return tt.done?ct:ct&&typeof ct.then=="function"?ct.then(p,v):U(ct)?Promise.all(ct).then(p,v):p(ct)}}return j(l)()}function Ri(s,l,p){for(var v=U(s)?s.slice():[s],j=0;j<p;++j)v.push(l);return v}var bl={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(s){return c(c({},s),{table:function(v){var p=s.table(v),v=p.schema,j={},P=[];function Z(ft,mt,dt){var _t=sn(ft),ht=j[_t]=j[_t]||[],Et=ft==null?0:typeof ft=="string"?1:ft.length,Tt=0<mt,_t=c(c({},dt),{name:Tt?"".concat(_t,"(virtual-from:").concat(dt.name,")"):dt.name,lowLevelIndex:dt,isVirtual:Tt,keyTail:mt,keyLength:Et,extractKey:hs(ft),unique:!Tt&&dt.unique});return ht.push(_t),_t.isPrimaryKey||P.push(_t),1<Et&&Z(Et===2?ft[0]:ft.slice(0,Et-1),mt+1,dt),ht.sort(function(Dt,qt){return Dt.keyTail-qt.keyTail}),_t}var tt=Z(v.primaryKey.keyPath,0,v.primaryKey);j[":id"]=[tt];for(var ct=0,bt=v.indexes;ct<bt.length;ct++){var ut=bt[ct];Z(ut.keyPath,0,ut)}function lt(ft){var mt,dt=ft.query.index;return dt.isVirtual?c(c({},ft),{query:{index:dt.lowLevelIndex,range:(mt=ft.query.range,dt=dt.keyTail,{type:mt.type===1?2:mt.type,lower:Ri(mt.lower,mt.lowerOpen?s.MAX_KEY:s.MIN_KEY,dt),lowerOpen:!0,upper:Ri(mt.upper,mt.upperOpen?s.MIN_KEY:s.MAX_KEY,dt),upperOpen:!0})}}):ft}return c(c({},p),{schema:c(c({},v),{primaryKey:tt,indexes:P,getIndexByKeyPath:function(ft){return(ft=j[sn(ft)])&&ft[0]}}),count:function(ft){return p.count(lt(ft))},query:function(ft){return p.query(lt(ft))},openCursor:function(ft){var mt=ft.query.index,dt=mt.keyTail,ht=mt.keyLength;return mt.isVirtual?p.openCursor(lt(ft)).then(function(Tt){return Tt&&Et(Tt)}):p.openCursor(ft);function Et(Tt){return Object.create(Tt,{continue:{value:function(_t){_t!=null?Tt.continue(Ri(_t,ft.reverse?s.MAX_KEY:s.MIN_KEY,dt)):ft.unique?Tt.continue(Tt.key.slice(0,ht).concat(ft.reverse?s.MIN_KEY:s.MAX_KEY,dt)):Tt.continue()}},continuePrimaryKey:{value:function(_t,Dt){Tt.continuePrimaryKey(Ri(_t,s.MAX_KEY,dt),Dt)}},primaryKey:{get:function(){return Tt.primaryKey}},key:{get:function(){var _t=Tt.key;return ht===1?_t[0]:_t.slice(0,ht)}},value:{get:function(){return Tt.value}}})}}})}})}};function ja(s,l,p,v){return p=p||{},v=v||"",N(s).forEach(function(j){var P,Z,tt;d(l,j)?(P=s[j],Z=l[j],typeof P=="object"&&typeof Z=="object"&&P&&Z?(tt=Xt(P))!==Xt(Z)?p[v+j]=l[j]:tt==="Object"?ja(P,Z,p,v+j+"."):P!==Z&&(p[v+j]=l[j]):P!==Z&&(p[v+j]=l[j])):p[v+j]=void 0}),N(l).forEach(function(j){d(s,j)||(p[v+j]=l[j])}),p}function Ca(s,l){return l.type==="delete"?l.keys:l.keys||l.values.map(s.extractKey)}var uo={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(s){return c(c({},s),{table:function(l){var p=s.table(l),v=p.schema.primaryKey;return c(c({},p),{mutate:function(j){var P=st.trans,Z=P.table(l).hook,tt=Z.deleting,ct=Z.creating,bt=Z.updating;switch(j.type){case"add":if(ct.fire===at)break;return P._promise("readwrite",function(){return ut(j)},!0);case"put":if(ct.fire===at&&bt.fire===at)break;return P._promise("readwrite",function(){return ut(j)},!0);case"delete":if(tt.fire===at)break;return P._promise("readwrite",function(){return ut(j)},!0);case"deleteRange":if(tt.fire===at)break;return P._promise("readwrite",function(){return(function lt(ft,mt,dt){return p.query({trans:ft,values:!1,query:{index:v,range:mt},limit:dt}).then(function(ht){var Et=ht.result;return ut({type:"delete",keys:Et,trans:ft}).then(function(Tt){return 0<Tt.numFailures?Promise.reject(Tt.failures[0]):Et.length<dt?{failures:[],numFailures:0,lastResult:void 0}:lt(ft,c(c({},mt),{lower:Et[Et.length-1],lowerOpen:!0}),dt)})})})(j.trans,j.range,1e4)},!0)}return p.mutate(j);function ut(lt){var ft,mt,dt,ht=st.trans,Et=lt.keys||Ca(v,lt);if(Et)return(lt=lt.type==="add"||lt.type==="put"?c(c({},lt),{keys:Et}):c({},lt)).type!=="delete"&&(lt.values=_([],lt.values)),lt.keys&&(lt.keys=_([],lt.keys)),ft=p,dt=Et,((mt=lt).type==="add"?Promise.resolve([]):ft.getMany({trans:mt.trans,keys:dt,cache:"immutable"})).then(function(Tt){var _t=Et.map(function(Dt,qt){var Vt,Wt,Ht,te=Tt[qt],Zt={onerror:null,onsuccess:null};return lt.type==="delete"?tt.fire.call(Zt,Dt,te,ht):lt.type==="add"||te===void 0?(Vt=ct.fire.call(Zt,Dt,lt.values[qt],ht),Dt==null&&Vt!=null&&(lt.keys[qt]=Dt=Vt,v.outbound||$(lt.values[qt],v.keyPath,Dt))):(Vt=ja(te,lt.values[qt]),(Wt=bt.fire.call(Zt,Vt,Dt,te,ht))&&(Ht=lt.values[qt],Object.keys(Wt).forEach(function(Gt){d(Ht,Gt)?Ht[Gt]=Wt[Gt]:$(Ht,Gt,Wt[Gt])}))),Zt});return p.mutate(lt).then(function(Dt){for(var qt=Dt.failures,Vt=Dt.results,Wt=Dt.numFailures,Dt=Dt.lastResult,Ht=0;Ht<Et.length;++Ht){var te=(Vt||Et)[Ht],Zt=_t[Ht];te==null?Zt.onerror&&Zt.onerror(qt[Ht]):Zt.onsuccess&&Zt.onsuccess(lt.type==="put"&&Tt[Ht]?lt.values[Ht]:te)}return{failures:qt,results:Vt,numFailures:Wt,lastResult:Dt}}).catch(function(Dt){return _t.forEach(function(qt){return qt.onerror&&qt.onerror(Dt)}),Promise.reject(Dt)})});throw new Error("Keys missing")}}})}})}};function _r(s,l,p){try{if(!l||l.keys.length<s.length)return null;for(var v=[],j=0,P=0;j<l.keys.length&&P<s.length;++j)pe(l.keys[j],s[P])===0&&(v.push(p?At(l.values[j]):l.values[j]),++P);return v.length===s.length?v:null}catch{return null}}var ho={stack:"dbcore",level:-1,create:function(s){return{table:function(l){var p=s.table(l);return c(c({},p),{getMany:function(v){var j;return v.cache?(j=_r(v.keys,v.trans._cache,v.cache==="clone"))?Kt.resolve(j):p.getMany(v).then(function(P){return v.trans._cache={keys:v.keys,values:v.cache==="clone"?At(P):P},P}):p.getMany(v)},mutate:function(v){return v.type!=="add"&&(v.trans._cache=null),p.mutate(v)}})}}}};function Hi(s,l){return s.trans.mode==="readonly"&&!!s.subscr&&!s.trans.explicit&&s.trans.db._options.cache!=="disabled"&&!l.schema.primaryKey.outbound}function fo(s,l){switch(s){case"query":return l.values&&!l.unique;case"get":case"getMany":case"count":case"openCursor":return!1}}var _l={stack:"dbcore",level:0,name:"Observability",create:function(s){var l=s.schema.name,p=new pn(s.MIN_KEY,s.MAX_KEY);return c(c({},s),{transaction:function(v,j,P){if(st.subscr&&j!=="readonly")throw new G.ReadOnly("Readwrite transaction in liveQuery context. Querier source: ".concat(st.querier));return s.transaction(v,j,P)},table:function(v){function j(Et){var ht,Et=Et.query;return[ht=Et.index,new pn((ht=(Et=Et.range).lower)!=null?ht:s.MIN_KEY,(ht=Et.upper)!=null?ht:s.MAX_KEY)]}var P=s.table(v),Z=P.schema,tt=Z.primaryKey,ct=Z.indexes,bt=tt.extractKey,ut=tt.outbound,lt=tt.autoIncrement&&ct.filter(function(dt){return dt.compound&&dt.keyPath.includes(tt.keyPath)}),ft=c(c({},P),{mutate:function(dt){function ht(ee){return ee="idb://".concat(l,"/").concat(v,"/").concat(ee),qt[ee]||(qt[ee]=new pn)}var Et,Tt,_t,Dt=dt.trans,qt=dt.mutatedParts||(dt.mutatedParts={}),Vt=ht(""),Wt=ht(":dels"),Ht=dt.type,Zt=dt.type==="deleteRange"?[dt.range]:dt.type==="delete"?[dt.keys]:dt.values.length<50?[Ca(tt,dt).filter(function(ee){return ee}),dt.values]:[],te=Zt[0],Zt=Zt[1],Gt=dt.trans._cache;return U(te)?(Vt.addKeys(te),(Ht=Ht==="delete"||te.length===Zt.length?_r(te,Gt):null)||Wt.addKeys(te),(Ht||Zt)&&(Et=ht,Tt=Ht,_t=Zt,Z.indexes.forEach(function(ee){var ue=Et(ee.name||"");function ge(de){return de!=null?ee.extractKey(de):null}function ae(de){ee.multiEntry&&U(de)?de.forEach(function(Le){return ue.addKey(Le)}):ue.addKey(de)}(Tt||_t).forEach(function(de,Me){var Tn=Tt&&ge(Tt[Me]),Me=_t&&ge(_t[Me]);pe(Tn,Me)!==0&&(Tn!=null&&ae(Tn),Me!=null)&&ae(Me)})}))):te?(Zt={from:(Gt=te.lower)!=null?Gt:s.MIN_KEY,to:(Ht=te.upper)!=null?Ht:s.MAX_KEY},Wt.add(Zt),Vt.add(Zt)):(Vt.add(p),Wt.add(p),Z.indexes.forEach(function(ee){return ht(ee.name).add(p)})),P.mutate(dt).then(function(ee){return!te||dt.type!=="add"&&dt.type!=="put"||(Vt.addKeys(ee.results),lt&&lt.forEach(function(ue){for(var ge=dt.values.map(function(Tn){return ue.extractKey(Tn)}),ae=ue.keyPath.findIndex(function(Tn){return Tn===tt.keyPath}),de=0,Le=ee.results.length;de<Le;++de)ge[de][ae]=ee.results[de];ht(ue.name).addKeys(ge)})),Dt.mutatedParts=Ra(Dt.mutatedParts||{},qt),ee})}}),mt={get:function(dt){return[tt,new pn(dt.key)]},getMany:function(dt){return[tt,new pn().addKeys(dt.keys)]},count:j,query:j,openCursor:j};return N(mt).forEach(function(dt){ft[dt]=function(ht){var Et=st.subscr,Tt=!!Et,_t=Hi(st,P)&&fo(dt,ht)?ht.obsSet={}:Et;if(Tt){var Dt,Et=function(Zt){return Zt="idb://".concat(l,"/").concat(v,"/").concat(Zt),_t[Zt]||(_t[Zt]=new pn)},qt=Et(""),Vt=Et(":dels"),Tt=mt[dt](ht),Wt=Tt[0],Tt=Tt[1];if((dt==="query"&&Wt.isPrimaryKey&&!ht.values?Vt:Et(Wt.name||"")).add(Tt),!Wt.isPrimaryKey){if(dt!=="count")return Dt=dt==="query"&&ut&&ht.values&&P.query(c(c({},ht),{values:!1})),P[dt].apply(this,arguments).then(function(Zt){if(dt==="query"){if(ut&&ht.values)return Dt.then(function(ge){return ge=ge.result,qt.addKeys(ge),Zt});var Gt=ht.values?Zt.result.map(bt):Zt.result;(ht.values?qt:Vt).addKeys(Gt)}else{var ee,ue;if(dt==="openCursor")return ue=ht.values,(ee=Zt)&&Object.create(ee,{key:{get:function(){return Vt.addKey(ee.primaryKey),ee.key}},primaryKey:{get:function(){var ge=ee.primaryKey;return Vt.addKey(ge),ge}},value:{get:function(){return ue&&qt.addKey(ee.primaryKey),ee.value}}})}return Zt});Vt.add(p)}}return P[dt].apply(this,arguments)}}),ft}})}};function po(s,l,p){var v;return p.numFailures===0?l:l.type==="deleteRange"||(v=l.keys?l.keys.length:"values"in l&&l.values?l.values.length:1,p.numFailures===v)?null:(v=c({},l),U(v.keys)&&(v.keys=v.keys.filter(function(j,P){return!(P in p.failures)})),"values"in v&&U(v.values)&&(v.values=v.values.filter(function(j,P){return!(P in p.failures)})),v)}function Ma(s,l){return p=s,((v=l).lower===void 0||(v.lowerOpen?0<pe(p,v.lower):0<=pe(p,v.lower)))&&(p=s,(v=l).upper===void 0||(v.upperOpen?pe(p,v.upper)<0:pe(p,v.upper)<=0));var p,v}function Er(s,l,p,v,j,P){var Z,tt,ct,bt,ut,lt;return!p||p.length===0||(Z=l.query.index,tt=Z.multiEntry,ct=l.query.range,bt=v.schema.primaryKey.extractKey,ut=Z.extractKey,lt=(Z.lowLevelIndex||Z).extractKey,(v=p.reduce(function(ft,mt){var dt=ft,ht=[];if(mt.type==="add"||mt.type==="put")for(var Et=new pn,Tt=mt.values.length-1;0<=Tt;--Tt){var _t,Dt=mt.values[Tt],qt=bt(Dt);!Et.hasKey(qt)&&(_t=ut(Dt),tt&&U(_t)?_t.some(function(Zt){return Ma(Zt,ct)}):Ma(_t,ct))&&(Et.addKey(qt),ht.push(Dt))}switch(mt.type){case"add":var Vt=new pn().addKeys(l.values?ft.map(function(Gt){return bt(Gt)}):ft),dt=ft.concat(l.values?ht.filter(function(Gt){return Gt=bt(Gt),!Vt.hasKey(Gt)&&(Vt.addKey(Gt),!0)}):ht.map(function(Gt){return bt(Gt)}).filter(function(Gt){return!Vt.hasKey(Gt)&&(Vt.addKey(Gt),!0)}));break;case"put":var Wt=new pn().addKeys(mt.values.map(function(Gt){return bt(Gt)}));dt=ft.filter(function(Gt){return!Wt.hasKey(l.values?bt(Gt):Gt)}).concat(l.values?ht:ht.map(function(Gt){return bt(Gt)}));break;case"delete":var Ht=new pn().addKeys(mt.keys);dt=ft.filter(function(Gt){return!Ht.hasKey(l.values?bt(Gt):Gt)});break;case"deleteRange":var te=mt.range;dt=ft.filter(function(Gt){return!Ma(bt(Gt),te)})}return dt},s))===s)?s:(v.sort(function(ft,mt){return pe(lt(ft),lt(mt))||pe(bt(ft),bt(mt))}),l.limit&&l.limit<1/0&&(v.length>l.limit?v.length=l.limit:s.length===l.limit&&v.length<l.limit&&(j.dirty=!0)),P?Object.freeze(v):v)}function ms(s,l){return pe(s.lower,l.lower)===0&&pe(s.upper,l.upper)===0&&!!s.lowerOpen==!!l.lowerOpen&&!!s.upperOpen==!!l.upperOpen}function $s(s,l){return((p,v,j,P)=>{if(p===void 0)return v!==void 0?-1:0;if(v===void 0)return 1;if((p=pe(p,v))===0){if(j&&P)return 0;if(j)return 1;if(P)return-1}return p})(s.lower,l.lower,s.lowerOpen,l.lowerOpen)<=0&&0<=((p,v,j,P)=>{if(p===void 0)return v!==void 0?1:0;if(v===void 0)return-1;if((p=pe(p,v))===0){if(j&&P)return 0;if(j)return-1;if(P)return 1}return p})(s.upper,l.upper,s.upperOpen,l.upperOpen)}function El(s,l,p,v){s.subscribers.add(p),v.addEventListener("abort",function(){var j,P;s.subscribers.delete(p),s.subscribers.size===0&&(j=s,P=l,setTimeout(function(){j.subscribers.size===0&&k(P,j)},3e3))})}var ka={stack:"dbcore",level:0,name:"Cache",create:function(s){var l=s.schema.name;return c(c({},s),{transaction:function(p,v,j){var P,Z,tt=s.transaction(p,v,j);return v==="readwrite"&&(j=(P=new AbortController).signal,tt.addEventListener("abort",(Z=function(ct){return function(){if(P.abort(),v==="readwrite"){for(var bt=new Set,ut=0,lt=p;ut<lt.length;ut++){var ft=lt[ut],mt=qi["idb://".concat(l,"/").concat(ft)];if(mt){var dt=s.table(ft),ht=mt.optimisticOps.filter(function(ee){return ee.trans===tt});if(tt._explicit&&ct&&tt.mutatedParts)for(var Et=0,Tt=Object.values(mt.queries.query);Et<Tt.length;Et++)for(var _t=0,Dt=(Wt=Tt[Et]).slice();_t<Dt.length;_t++)yr((Ht=Dt[_t]).obsSet,tt.mutatedParts)&&(k(Wt,Ht),Ht.subscribers.forEach(function(ee){return bt.add(ee)}));else if(0<ht.length){mt.optimisticOps=mt.optimisticOps.filter(function(ee){return ee.trans!==tt});for(var qt=0,Vt=Object.values(mt.queries.query);qt<Vt.length;qt++)for(var Wt,Ht,te,Zt=0,Gt=(Wt=Vt[qt]).slice();Zt<Gt.length;Zt++)(Ht=Gt[Zt]).res!=null&&tt.mutatedParts&&(ct&&!Ht.dirty?(te=Object.isFrozen(Ht.res),te=Er(Ht.res,Ht.req,ht,dt,Ht,te),Ht.dirty?(k(Wt,Ht),Ht.subscribers.forEach(function(ee){return bt.add(ee)})):te!==Ht.res&&(Ht.res=te,Ht.promise=Kt.resolve({result:te}))):(Ht.dirty&&k(Wt,Ht),Ht.subscribers.forEach(function(ee){return bt.add(ee)})))}}}bt.forEach(function(ee){return ee()})}}})(!1),{signal:j}),tt.addEventListener("error",Z(!1),{signal:j}),tt.addEventListener("complete",Z(!0),{signal:j})),tt},table:function(p){var v=s.table(p),j=v.schema.primaryKey;return c(c({},v),{mutate:function(P){var Z,tt=st.trans;return!j.outbound&&tt.db._options.cache!=="disabled"&&!tt.explicit&&tt.idbtrans.mode==="readwrite"&&(Z=qi["idb://".concat(l,"/").concat(p)])?(tt=v.mutate(P),P.type!=="add"&&P.type!=="put"||!(50<=P.values.length||Ca(j,P).some(function(ct){return ct==null}))?(Z.optimisticOps.push(P),P.mutatedParts&&Ta(P.mutatedParts),tt.then(function(ct){0<ct.numFailures&&(k(Z.optimisticOps,P),(ct=po(0,P,ct))&&Z.optimisticOps.push(ct),P.mutatedParts)&&Ta(P.mutatedParts)}),tt.catch(function(){k(Z.optimisticOps,P),P.mutatedParts&&Ta(P.mutatedParts)})):tt.then(function(ct){var bt=po(0,c(c({},P),{values:P.values.map(function(ut,lt){var ft;return ct.failures[lt]?ut:($(ft=(ft=j.keyPath)!=null&&ft.includes(".")?At(ut):c({},ut),j.keyPath,ct.results[lt]),ft)})}),ct);Z.optimisticOps.push(bt),queueMicrotask(function(){return P.mutatedParts&&Ta(P.mutatedParts)})}),tt):v.mutate(P)},query:function(P){var Z,tt,ct,bt,ut,lt,ft;return Hi(st,v)&&fo("query",P)?(Z=((ct=st.trans)==null?void 0:ct.db._options.cache)==="immutable",tt=(ct=st).requery,ct=ct.signal,lt=((mt,dt,ht,Et)=>{var Tt=qi["idb://".concat(mt,"/").concat(dt)];if(!Tt)return[];if(!(mt=Tt.queries[ht]))return[null,!1,Tt,null];var _t=mt[(Et.query?Et.query.index.name:null)||""];if(!_t)return[null,!1,Tt,null];switch(ht){case"query":var Dt=_t.find(function(qt){return qt.req.limit===Et.limit&&qt.req.values===Et.values&&ms(qt.req.query.range,Et.query.range)});return Dt?[Dt,!0,Tt,_t]:[_t.find(function(qt){return("limit"in qt.req?qt.req.limit:1/0)>=Et.limit&&(!Et.values||qt.req.values)&&$s(qt.req.query.range,Et.query.range)}),!1,Tt,_t];case"count":return Dt=_t.find(function(qt){return ms(qt.req.query.range,Et.query.range)}),[Dt,!!Dt,Tt,_t]}})(l,p,"query",P),ft=lt[0],bt=lt[2],ut=lt[3],ft&&lt[1]?ft.obsSet=P.obsSet:(lt=v.query(P).then(function(mt){var dt=mt.result;if(ft&&(ft.res=dt),Z){for(var ht=0,Et=dt.length;ht<Et;++ht)Object.freeze(dt[ht]);Object.freeze(dt)}else mt.result=At(dt);return mt}).catch(function(mt){return ut&&ft&&k(ut,ft),Promise.reject(mt)}),ft={obsSet:P.obsSet,promise:lt,subscribers:new Set,type:"query",req:P,dirty:!1},ut?ut.push(ft):(ut=[ft],(bt=bt||(qi["idb://".concat(l,"/").concat(p)]={queries:{query:{},count:{}},objs:new Map,optimisticOps:[],unsignaledParts:{}})).queries.query[P.query.index.name||""]=ut)),El(ft,ut,tt,ct),ft.promise.then(function(mt){return{result:Er(mt.result,P,bt?.optimisticOps,v,ft,Z)}})):v.query(P)}})}})}};function ta(s,l){return new Proxy(s,{get:function(p,v,j){return v==="db"?l:Reflect.get(p,v,j)}})}Ge.prototype.version=function(s){if(isNaN(s)||s<.1)throw new G.Type("Given version is not a positive number");if(s=Math.round(10*s)/10,this.idbdb||this._state.isBeingOpened)throw new G.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,s);var l=this._versions,p=l.filter(function(v){return v._cfg.version===s})[0];return p||(p=new this.Version(s),l.push(p),l.sort(dr),p.stores({}),this._state.autoSchema=!1),p},Ge.prototype._whenReady=function(s){var l=this;return this.idbdb&&(this._state.openComplete||st.letThrough||this._vip)?s():new Kt(function(p,v){if(l._state.openComplete)return v(new G.DatabaseClosed(l._state.dbOpenError));if(!l._state.isBeingOpened){if(!l._state.autoOpen)return void v(new G.DatabaseClosed);l.open().catch(at)}l._state.dbReadyPromise.then(p,v)}).then(s)},Ge.prototype.use=function(j){var l=j.stack,p=j.create,v=j.level,j=j.name,P=(j&&this.unuse({stack:l,name:j}),this._middlewares[l]||(this._middlewares[l]=[]));return P.push({stack:l,create:p,level:v??10,name:j}),P.sort(function(Z,tt){return Z.level-tt.level}),this},Ge.prototype.unuse=function(s){var l=s.stack,p=s.name,v=s.create;return l&&this._middlewares[l]&&(this._middlewares[l]=this._middlewares[l].filter(function(j){return v?j.create!==v:!!p&&j.name!==p})),this},Ge.prototype.open=function(){var s=this;return Un(vt,function(){return vl(s)})},Ge.prototype._close=function(){this.on.close.fire(new CustomEvent("close"));var s=this._state,l=Oi.indexOf(this);if(0<=l&&Oi.splice(l,1),this.idbdb){try{this.idbdb.close()}catch{}this.idbdb=null}s.isBeingOpened||(s.dbReadyPromise=new Kt(function(p){s.dbReadyResolve=p}),s.openCanceller=new Kt(function(p,v){s.cancelOpen=v}))},Ge.prototype.close=function(l){var l=(l===void 0?{disableAutoOpen:!0}:l).disableAutoOpen,p=this._state;l?(p.isBeingOpened&&p.cancelOpen(new G.DatabaseClosed),this._close(),p.autoOpen=!1,p.dbOpenError=new G.DatabaseClosed):(this._close(),p.autoOpen=this._options.autoOpen||p.isBeingOpened,p.openComplete=!1,p.dbOpenError=null)},Ge.prototype.delete=function(s){var l=this,p=(s===void 0&&(s={disableAutoOpen:!0}),0<arguments.length&&typeof arguments[0]!="object"),v=this._state;return new Kt(function(j,P){function Z(){l.close(s);var tt=l._deps.indexedDB.deleteDatabase(l.name);tt.onsuccess=Re(function(){var ct,bt,ut;ct=l._deps,bt=l.name,Sa(ut=ct.indexedDB)||bt===qs||fr(ut,ct.IDBKeyRange).delete(bt).catch(at),j()}),tt.onerror=Hn(P),tt.onblocked=l._fireOnBlocked}if(p)throw new G.InvalidArgument("Invalid closeOptions argument to db.delete()");v.isBeingOpened?v.dbReadyPromise.then(Z):Z()})},Ge.prototype.backendDB=function(){return this.idbdb},Ge.prototype.isOpen=function(){return this.idbdb!==null},Ge.prototype.hasBeenClosed=function(){var s=this._state.dbOpenError;return s&&s.name==="DatabaseClosed"},Ge.prototype.hasFailed=function(){return this._state.dbOpenError!==null},Ge.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(Ge.prototype,"tables",{get:function(){var s=this;return N(this._allTables).map(function(l){return s._allTables[l]})},enumerable:!1,configurable:!0}),Ge.prototype.transaction=function(){var s=(function(l,p,v){var j=arguments.length;if(j<2)throw new G.InvalidArgument("Too few arguments");for(var P=new Array(j-1);--j;)P[j-1]=arguments[j];return v=P.pop(),[l,yt(P),v]}).apply(this,arguments);return this._transaction.apply(this,s)},Ge.prototype._transaction=function(s,l,p){var v,j,P=this,Z=st.trans,tt=(Z&&Z.db===this&&s.indexOf("!")===-1||(Z=null),s.indexOf("?")!==-1);s=s.replace("!","").replace("?","");try{if(j=l.map(function(bt){if(bt=bt instanceof P.Table?bt.name:bt,typeof bt!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return bt}),s=="r"||s===fi)v=fi;else{if(s!="rw"&&s!=Ai)throw new G.InvalidArgument("Invalid transaction mode: "+s);v=Ai}if(Z){if(Z.mode===fi&&v===Ai){if(!tt)throw new G.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");Z=null}Z&&j.forEach(function(bt){if(Z&&Z.storeNames.indexOf(bt)===-1){if(!tt)throw new G.SubTransaction("Table "+bt+" not included in parent transaction.");Z=null}}),tt&&Z&&!Z.active&&(Z=null)}}catch(bt){return Z?Z._promise(null,function(ut,lt){lt(bt)}):Oe(bt)}var ct=(function bt(ut,lt,ft,mt,dt){return Kt.resolve().then(function(){var _t=st.transless||st,ht=ut._createTransaction(lt,ft,ut._dbSchema,mt),_t=(ht.explicit=!0,{trans:ht,transless:_t});if(mt)ht.idbtrans=mt.idbtrans;else try{ht.create(),ht.idbtrans._explicit=!0,ut._state.PR1398_maxLoop=3}catch(Dt){return Dt.name===z.InvalidState&&ut.isOpen()&&0<--ut._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),ut.close({disableAutoOpen:!1}),ut.open().then(function(){return bt(ut,lt,ft,null,dt)})):Oe(Dt)}var Et,Tt=y(dt),_t=(Tt&&$e(),Kt.follow(function(){var Dt;(Et=dt.call(ht,ht))&&(Tt?(Dt=Mn.bind(null,null),Et.then(Dt,Dt)):typeof Et.next=="function"&&typeof Et.throw=="function"&&(Et=Js(Et)))},_t));return(Et&&typeof Et.then=="function"?Kt.resolve(Et).then(function(Dt){return ht.active?Dt:Oe(new G.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):_t.then(function(){return Et})).then(function(Dt){return mt&&ht._resolve(),ht._completion.then(function(){return Dt})}).catch(function(Dt){return ht._reject(Dt),Oe(Dt)})})}).bind(null,this,v,j,Z,p);return Z?Z._promise(v,ct,"lock"):st.trans?Un(st.transless,function(){return P._whenReady(ct)}):this._whenReady(ct)},Ge.prototype.table=function(s){if(d(this._allTables,s))return this._allTables[s];throw new G.InvalidTable("Table ".concat(s," does not exist"))};var ei=Ge;function Ge(s,l){var p,v,j,P,Z,tt=this,ct=(this._middlewares={},this.verno=0,Ge.dependencies),ct=(this._options=l=c({addons:Ge.addons,autoOpen:!0,indexedDB:ct.indexedDB,IDBKeyRange:ct.IDBKeyRange,cache:"cloned"},l),this._deps={indexedDB:l.indexedDB,IDBKeyRange:l.IDBKeyRange},l.addons),bt=(this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this,{dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:at,dbReadyPromise:null,cancelOpen:at,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3,autoOpen:l.autoOpen}),ut=(bt.dbReadyPromise=new Kt(function(lt){bt.dbReadyResolve=lt}),bt.openCanceller=new Kt(function(lt,ft){bt.cancelOpen=ft}),this._state=bt,this.name=s,this.on=Xs(this,"populate","blocked","versionchange","close",{ready:[Qt,at]}),this.once=function(lt,ft){var mt=function(){for(var dt=[],ht=0;ht<arguments.length;ht++)dt[ht]=arguments[ht];tt.on(lt).unsubscribe(mt),ft.apply(tt,dt)};return tt.on(lt,mt)},this.on.ready.subscribe=Q(this.on.ready.subscribe,function(lt){return function(ft,mt){Ge.vip(function(){var dt,ht=tt._state;ht.openComplete?(ht.dbOpenError||Kt.resolve().then(ft),mt&&lt(ft)):ht.onReadyBeingFired?(ht.onReadyBeingFired.push(ft),mt&&lt(ft)):(lt(ft),dt=tt,mt||lt(function Et(){dt.on.ready.unsubscribe(ft),dt.on.ready.unsubscribe(Et)}))})}}),this.Collection=(p=this,hn(gl.prototype,function(Et,ht){this.db=p;var mt=ar,dt=null;if(ht)try{mt=ht()}catch(_t){dt=_t}var ht=Et._ctx,Et=ht.table,Tt=Et.hook.reading.fire;this._ctx={table:Et,index:ht.index,isPrimKey:!ht.index||Et.schema.primKey.keyPath&&ht.index===Et.schema.primKey.name,range:mt,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:dt,or:ht.or,valueMapper:Tt!==jt?Tt:null}})),this.Table=(v=this,hn(rr.prototype,function(lt,ft,mt){this.db=v,this._tx=mt,this.name=lt,this.schema=ft,this.hook=v._allTables[lt]?v._allTables[lt].hook:Xs(null,{creating:[Nt,at],reading:[Yt,jt],updating:[Lt,at],deleting:[Pt,at]})})),this.Transaction=(j=this,hn(ur.prototype,function(lt,ft,mt,dt,ht){var Et=this;lt!=="readonly"&&ft.forEach(function(Tt){Tt=(Tt=mt[Tt])==null?void 0:Tt.yProps,Tt&&(ft=ft.concat(Tt.map(function(_t){return _t.updatesTable})))}),this.db=j,this.mode=lt,this.storeNames=ft,this.schema=mt,this.chromeTransactionDurability=dt,this.idbtrans=null,this.on=Xs(this,"complete","error","abort"),this.parent=ht||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new Kt(function(Tt,_t){Et._resolve=Tt,Et._reject=_t}),this._completion.then(function(){Et.active=!1,Et.on.complete.fire()},function(Tt){var _t=Et.active;return Et.active=!1,Et.on.error.fire(Tt),Et.parent?Et.parent._reject(Tt):_t&&Et.idbtrans&&Et.idbtrans.abort(),Oe(Tt)})})),this.Version=(P=this,hn(xl.prototype,function(lt){this.db=P,this._cfg={version:lt,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})),this.WhereClause=(Z=this,hn(Fi.prototype,function(lt,ft,mt){if(this.db=Z,this._ctx={table:lt,index:ft===":id"?null:ft,or:mt},this._cmp=this._ascending=pe,this._descending=function(dt,ht){return pe(ht,dt)},this._max=function(dt,ht){return 0<pe(dt,ht)?dt:ht},this._min=function(dt,ht){return pe(dt,ht)<0?dt:ht},this._IDBKeyRange=Z._deps.IDBKeyRange,!this._IDBKeyRange)throw new G.MissingAPI})),this.on("versionchange",function(lt){0<lt.newVersion?console.warn("Another connection wants to upgrade database '".concat(tt.name,"'. Closing db now to resume the upgrade.")):console.warn("Another connection wants to delete database '".concat(tt.name,"'. Closing db now to resume the delete request.")),tt.close({disableAutoOpen:!1})}),this.on("blocked",function(lt){!lt.newVersion||lt.newVersion<lt.oldVersion?console.warn("Dexie.delete('".concat(tt.name,"') was blocked")):console.warn("Upgrade '".concat(tt.name,"' blocked by other connection holding version ").concat(lt.oldVersion/10))}),this._maxKey=ds(l.IDBKeyRange),this._createTransaction=function(lt,ft,mt,dt){return new tt.Transaction(lt,ft,mt,tt._options.chromeTransactionDurability,dt)},this._fireOnBlocked=function(lt){tt.on("blocked").fire(lt),Oi.filter(function(ft){return ft.name===tt.name&&ft!==tt&&!ft._state.vcFired}).map(function(ft){return ft.on("versionchange").fire(lt)})},this.use(ho),this.use(ka),this.use(_l),this.use(bl),this.use(uo),new Proxy(this,{get:function(lt,ft,mt){var dt;return ft==="_vip"||(ft==="table"?function(ht){return ta(tt.table(ht),ut)}:(dt=Reflect.get(lt,ft,mt))instanceof rr?ta(dt,ut):ft==="tables"?dt.map(function(ht){return ta(ht,ut)}):ft==="_createTransaction"?function(){return ta(dt.apply(this,arguments),ut)}:dt)}}));this.vip=ut,ct.forEach(function(lt){return lt(tt)})}var gs,Gi=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable",mo=(Na.prototype.subscribe=function(s,l,p){return this._subscribe(s&&typeof s!="function"?s:{next:s,error:l,complete:p})},Na.prototype[Gi]=function(){return this},Na);function Na(s){this._subscribe=s}try{gs={indexedDB:B.indexedDB||B.mozIndexedDB||B.webkitIndexedDB||B.msIndexedDB,IDBKeyRange:B.IDBKeyRange||B.webkitIDBKeyRange}}catch{gs={indexedDB:null,IDBKeyRange:null}}function go(s){var l,p=!1,v=new mo(function(j){var P=y(s),Z,tt=!1,ct={},bt={},ut={get closed(){return tt},unsubscribe:function(){tt||(tt=!0,Z&&Z.abort(),lt&&fn.storagemutated.unsubscribe(mt))}},lt=(j.start&&j.start(ut),!1),ft=function(){return Ei(dt)},mt=function(ht){Ra(ct,ht),yr(bt,ct)&&ft()},dt=function(){var ht,Et,Tt;!tt&&gs.indexedDB&&(ct={},ht={},Z&&Z.abort(),Z=new AbortController,Tt=(_t=>{var Dt=ke();try{P&&$e();var qt=qe(s,_t);return qt=P?qt.finally(Mn):qt}finally{Dt&&gn()}})(Et={subscr:ht,signal:Z.signal,requery:ft,querier:s,trans:null}),Promise.resolve(Tt).then(function(_t){p=!0,l=_t,tt||Et.signal.aborted||(ct={},(Dt=>{for(var qt in Dt)if(d(Dt,qt))return;return 1})(bt=ht)||lt||(fn(cs,mt),lt=!0),Ei(function(){return!tt&&j.next&&j.next(_t)}))},function(_t){p=!1,["DatabaseClosedError","AbortError"].includes(_t?.name)||tt||Ei(function(){tt||j.error&&j.error(_t)})}))};return setTimeout(ft,0),ut});return v.hasValue=function(){return p},v.getValue=function(){return l},v}var Xi=ei;function Ar(s){var l=Ti;try{Ti=!0,fn.storagemutated.fire(s),br(s,!0)}finally{Ti=l}}b(Xi,c(c({},O),{delete:function(s){return new Xi(s,{addons:[]}).delete()},exists:function(s){return new Xi(s,{addons:[]}).open().then(function(l){return l.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(s){try{return l=Xi.dependencies,p=l.indexedDB,l=l.IDBKeyRange,(Sa(p)?Promise.resolve(p.databases()).then(function(v){return v.map(function(j){return j.name}).filter(function(j){return j!==qs})}):fr(p,l).toCollection().primaryKeys()).then(s)}catch{return Oe(new G.MissingAPI)}var l,p},defineClass:function(){return function(s){F(this,s)}},ignoreTransaction:function(s){return st.trans?Un(st.transless,s):s()},vip:pr,async:function(s){return function(){try{var l=Js(s.apply(this,arguments));return l&&typeof l.then=="function"?l:Kt.resolve(l)}catch(p){return Oe(p)}}},spawn:function(s,l,p){try{var v=Js(s.apply(p,l||[]));return v&&typeof v.then=="function"?v:Kt.resolve(v)}catch(j){return Oe(j)}},currentTransaction:{get:function(){return st.trans||null}},waitFor:function(s,l){return s=Kt.resolve(typeof s=="function"?Xi.ignoreTransaction(s):s).timeout(l||6e4),st.trans?st.trans.waitFor(s):s},Promise:Kt,debug:{get:function(){return $t},set:function(s){se(s)}},derive:E,extend:F,props:b,override:Q,Events:Xs,on:fn,liveQuery:go,extendObservabilitySet:Ra,getByKeyPath:L,setByKeyPath:$,delByKeyPath:function(s,l){typeof l=="string"?$(s,l,void 0):"length"in l&&[].map.call(l,function(p){$(s,p,void 0)})},shallowClone:rt,deepClone:At,getObjectDiff:ja,cmp:pe,asap:T,minKey:-1/0,addons:[],connections:Oi,errnames:z,dependencies:gs,cache:qi,semVer:"4.3.0",version:"4.3.0".split(".").map(function(s){return parseInt(s)}).reduce(function(s,l,p){return s+l/Math.pow(10,2*p)})})),Xi.maxKey=ds(Xi.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(fn(cs,function(s){Ti||(s=new CustomEvent(Bi,{detail:s}),Ti=!0,dispatchEvent(s),Ti=!1)}),addEventListener(Bi,function(s){s=s.detail,Ti||Ar(s)}));var ys,Ti=!1,Rn=function(){};return typeof BroadcastChannel<"u"&&((Rn=function(){(ys=new BroadcastChannel(Bi)).onmessage=function(s){return s.data&&Ar(s.data)}})(),typeof ys.unref=="function"&&ys.unref(),fn(cs,function(s){Ti||ys.postMessage(s)})),typeof addEventListener<"u"&&(addEventListener("pagehide",function(s){if(!ei.disableBfCache&&s.persisted){$t&&console.debug("Dexie: handling persisted pagehide"),ys?.close();for(var l=0,p=Oi;l<p.length;l++)p[l].close({disableAutoOpen:!1})}}),addEventListener("pageshow",function(s){!ei.disableBfCache&&s.persisted&&($t&&console.debug("Dexie: handling persisted pageshow"),Rn(),Ar({all:new pn(-1/0,[[]])}))})),Kt.rejectionMapper=function(s,l){return!s||s instanceof J||s instanceof TypeError||s instanceof SyntaxError||!s.name||!it[s.name]?s:(l=new it[s.name](l||s.message,s),"stack"in s&&h(l,"stack",{get:function(){return this.inner.stack}}),l)},se($t),c(ei,Object.freeze({__proto__:null,Dexie:ei,Entity:no,PropModification:ls,RangeSet:pn,add:function(s){return new ls({add:s})},cmp:pe,default:ei,liveQuery:go,mergeRanges:Ui,rangesOverlap:oo,remove:function(s){return new ls({remove:s})},replacePrefix:function(s,l){return new ls({replacePrefix:[s,l]})}}),{default:ei}),ei})})(dexie_min$1)),dexie_min$1.exports}var dexie_minExports=requireDexie_min();const _Dexie=getDefaultExportFromCjs(dexie_minExports),DexieSymbol=Symbol.for("Dexie"),Dexie=globalThis[DexieSymbol]||(globalThis[DexieSymbol]=_Dexie);if(_Dexie.semVer!==Dexie.semVer)throw new Error(`Two different versions of Dexie loaded in the same app: ${_Dexie.semVer} and ${Dexie.semVer}`);const{liveQuery,mergeRanges,rangesOverlap,RangeSet,cmp,Entity,PropModification,replacePrefix,add,remove,DexieYProvider}=Dexie;class StudyDatabase extends Dexie{books;chapters;flashcards;questions;studySessions;studySchedules;progress;quizResults;concepts;conceptMaps;constructor(){super("RealEstateStudyDB"),this.version(2).stores({books:"id, title, uploadedAt",chapters:"id, bookId, number, title, createdAt, *topics",flashcards:"id, chapterId, conceptId, nextReviewDate, difficulty, *timesReviewed",questions:"id, chapterId, conceptId, difficulty, topic, *tags",studySessions:"id, date, type, *conceptsReviewed",studySchedules:"id, examDate",progress:"id, bookId, lastStudied, *conceptsMastered",quizResults:"id, date, chapterId, score, *weakAreas",concepts:"id, name, difficulty, *tags, *relatedConcepts",conceptMaps:"id, chapterId"})}}const db=new StudyDatabase;async function getDueFlashcards(){const R=new Date;return await db.flashcards.where("nextReviewDate").belowOrEqual(R).toArray()}async function updateFlashcardAfterReview(R,f){const D=await db.flashcards.get(R);if(!D)return;let{interval:c,repetition:_,easinessFactor:B,timesReviewed:N,timesCorrect:U}=D;N++,f>=3&&U++,B=Math.max(1.3,B+(.1-(5-f)*(.08+(5-f)*.02))),f<3?(_=0,c=1):(_+=1,_===1?c=1:_===2?c=6:c=Math.round(c*B));const F=new Date;F.setDate(F.getDate()+c),await db.flashcards.update(R,{interval:c,repetition:_,easinessFactor:B,nextReviewDate:F,lastReviewedDate:new Date,timesReviewed:N,timesCorrect:U})}async function getProgressByBook(R){return await db.progress.where("bookId").equals(R).first()}async function getStudyStats(R){const f=await db.flashcards.toArray(),D=new Date,c=f.filter(g=>new Date(g.nextReviewDate)<=D),_=await db.questions.toArray(),B=await db.quizResults.toArray(),N=B.length>0?Math.round(B.reduce((g,h)=>g+h.score,0)/B.length):0,U=[...new Set(B.map(g=>new Date(g.date).toDateString()))];let F=0;const u=new Date().toDateString(),o=new Date(Date.now()-864e5).toDateString();(U.includes(u)||U.includes(o))&&(F=U.length);let d=0,b=0;if(R){const g=await getProgressByBook(R);g?.conceptProgress&&(d=g.conceptProgress.filter(E=>E.mastery>=80).length),b=(await db.books.get(R))?.totalConcepts||0}return{totalFlashcards:f.length,dueFlashcards:c.length,totalQuestions:_.length,averageScore:N,studyStreak:F,conceptsMastered:d,totalConcepts:b}}function commonjsRequire(R){throw new Error('Could not dynamically require "'+R+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var pdf={exports:{}};const __viteBrowserExternal={},__viteBrowserExternal$1=Object.freeze(Object.defineProperty({__proto__:null,default:__viteBrowserExternal},Symbol.toStringTag,{value:"Module"})),require$$5=getAugmentedNamespace(__viteBrowserExternal$1);var hasRequiredPdf;function requirePdf(){return hasRequiredPdf||(hasRequiredPdf=1,(function(module,exports$1){(function(f,D){module.exports=f.pdfjsLib=D()})(globalThis,()=>(()=>{var __webpack_modules__=[,((R,f)=>{Object.defineProperty(f,"__esModule",{value:!0}),f.VerbosityLevel=f.Util=f.UnknownErrorException=f.UnexpectedResponseException=f.TextRenderingMode=f.RenderingIntentFlag=f.PromiseCapability=f.PermissionFlag=f.PasswordResponses=f.PasswordException=f.PageActionEventType=f.OPS=f.MissingPDFException=f.MAX_IMAGE_SIZE_TO_CACHE=f.LINE_FACTOR=f.LINE_DESCENT_FACTOR=f.InvalidPDFException=f.ImageKind=f.IDENTITY_MATRIX=f.FormatError=f.FeatureTest=f.FONT_IDENTITY_MATRIX=f.DocumentActionEventType=f.CMapCompressionType=f.BaseException=f.BASELINE_FACTOR=f.AnnotationType=f.AnnotationReplyType=f.AnnotationPrefix=f.AnnotationMode=f.AnnotationFlag=f.AnnotationFieldFlag=f.AnnotationEditorType=f.AnnotationEditorPrefix=f.AnnotationEditorParamsType=f.AnnotationBorderStyleType=f.AnnotationActionEventType=f.AbortException=void 0,f.assert=S,f.bytesToString=it,f.createValidAbsoluteUrl=y,f.getModificationDate=Ue,f.getUuid=ui,f.getVerbosityLevel=Xt,f.info=nt,f.isArrayBuffer=_e,f.isArrayEqual=Ce,f.isNodeJS=void 0,f.normalizeUnicode=xi,f.objectFromMap=Rt,f.objectSize=Yt,f.setVerbosityLevel=Ft,f.shadow=O,f.string32=jt,f.stringToBytes=at,f.stringToPDFString=se,f.stringToUTF8String=le,f.unreachable=k,f.utf8StringToString=oe,f.warn=Y;const D=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser");f.isNodeJS=D;const c=[1,0,0,1,0,0];f.IDENTITY_MATRIX=c;const _=[.001,0,0,.001,0,0];f.FONT_IDENTITY_MATRIX=_;const B=1e7;f.MAX_IMAGE_SIZE_TO_CACHE=B;const N=1.35;f.LINE_FACTOR=N;const U=.35;f.LINE_DESCENT_FACTOR=U;const F=U/N;f.BASELINE_FACTOR=F;const u={ANY:1,DISPLAY:2,PRINT:4,SAVE:8,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,OPLIST:256};f.RenderingIntentFlag=u;const o={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3};f.AnnotationMode=o;const d="pdfjs_internal_editor_";f.AnnotationEditorPrefix=d;const b={DISABLE:-1,NONE:0,FREETEXT:3,STAMP:13,INK:15};f.AnnotationEditorType=b;const g={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23};f.AnnotationEditorParamsType=g;const h={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048};f.PermissionFlag=h;const E={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4};f.TextRenderingMode=E;const C={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3};f.ImageKind=C;const x={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26};f.AnnotationType=x;const I={GROUP:"Group",REPLY:"R"};f.AnnotationReplyType=I;const Q={INVISIBLE:1,HIDDEN:2,PRINT:4,NOZOOM:8,NOROTATE:16,NOVIEW:32,READONLY:64,LOCKED:128,TOGGLENOVIEW:256,LOCKEDCONTENTS:512};f.AnnotationFlag=Q;const V={READONLY:1,REQUIRED:2,NOEXPORT:4,MULTILINE:4096,PASSWORD:8192,NOTOGGLETOOFF:16384,RADIO:32768,PUSHBUTTON:65536,COMBO:131072,EDIT:262144,SORT:524288,FILESELECT:1048576,MULTISELECT:2097152,DONOTSPELLCHECK:4194304,DONOTSCROLL:8388608,COMB:16777216,RICHTEXT:33554432,RADIOSINUNISON:33554432,COMMITONSELCHANGE:67108864};f.AnnotationFieldFlag=V;const T={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5};f.AnnotationBorderStyleType=T;const L={E:"Mouse Enter",X:"Mouse Exit",D:"Mouse Down",U:"Mouse Up",Fo:"Focus",Bl:"Blur",PO:"PageOpen",PC:"PageClose",PV:"PageVisible",PI:"PageInvisible",K:"Keystroke",F:"Format",V:"Validate",C:"Calculate"};f.AnnotationActionEventType=L;const $={WC:"WillClose",WS:"WillSave",DS:"DidSave",WP:"WillPrint",DP:"DidPrint"};f.DocumentActionEventType=$;const rt={O:"PageOpen",C:"PageClose"};f.PageActionEventType=rt;const et={ERRORS:0,WARNINGS:1,INFOS:5};f.VerbosityLevel=et;const yt={NONE:0,BINARY:1};f.CMapCompressionType=yt;const gt={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91};f.OPS=gt;const kt={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};f.PasswordResponses=kt;let At=et.WARNINGS;function Ft(Bt){Number.isInteger(Bt)&&(At=Bt)}function Xt(){return At}function nt(Bt){At>=et.INFOS&&console.log(`Info: ${Bt}`)}function Y(Bt){At>=et.WARNINGS&&console.log(`Warning: ${Bt}`)}function k(Bt){throw new Error(Bt)}function S(Bt,vt){Bt||k(vt)}function w(Bt){switch(Bt?.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function y(Bt,vt=null,st=null){if(!Bt)return null;try{if(st&&typeof Bt=="string"&&(st.addDefaultProtocol&&Bt.startsWith("www.")&&Bt.match(/\./g)?.length>=2&&(Bt=`http://${Bt}`),st.tryConvertEncoding))try{Bt=le(Bt)}catch{}const Jt=vt?new URL(Bt,vt):new URL(Bt);if(w(Jt))return Jt}catch{}return null}function O(Bt,vt,st,Jt=!1){return Object.defineProperty(Bt,vt,{value:st,enumerable:!Jt,configurable:!0,writable:!1}),st}const H=(function(){function vt(st,Jt){this.constructor===vt&&k("Cannot initialize BaseException."),this.message=st,this.name=Jt}return vt.prototype=new Error,vt.constructor=vt,vt})();f.BaseException=H;class J extends H{constructor(vt,st){super(vt,"PasswordException"),this.code=st}}f.PasswordException=J;class K extends H{constructor(vt,st){super(vt,"UnknownErrorException"),this.details=st}}f.UnknownErrorException=K;class m extends H{constructor(vt){super(vt,"InvalidPDFException")}}f.InvalidPDFException=m;class M extends H{constructor(vt){super(vt,"MissingPDFException")}}f.MissingPDFException=M;class z extends H{constructor(vt,st){super(vt,"UnexpectedResponseException"),this.status=st}}f.UnexpectedResponseException=z;class W extends H{constructor(vt){super(vt,"FormatError")}}f.FormatError=W;class G extends H{constructor(vt){super(vt,"AbortException")}}f.AbortException=G;function it(Bt){(typeof Bt!="object"||Bt?.length===void 0)&&k("Invalid argument for bytesToString");const vt=Bt.length,st=8192;if(vt<st)return String.fromCharCode.apply(null,Bt);const Jt=[];for(let me=0;me<vt;me+=st){const Ye=Math.min(me+st,vt),Kt=Bt.subarray(me,Ye);Jt.push(String.fromCharCode.apply(null,Kt))}return Jt.join("")}function at(Bt){typeof Bt!="string"&&k("Invalid argument for stringToBytes");const vt=Bt.length,st=new Uint8Array(vt);for(let Jt=0;Jt<vt;++Jt)st[Jt]=Bt.charCodeAt(Jt)&255;return st}function jt(Bt){return String.fromCharCode(Bt>>24&255,Bt>>16&255,Bt>>8&255,Bt&255)}function Yt(Bt){return Object.keys(Bt).length}function Rt(Bt){const vt=Object.create(null);for(const[st,Jt]of Bt)vt[st]=Jt;return vt}function Nt(){const Bt=new Uint8Array(4);return Bt[0]=1,new Uint32Array(Bt.buffer,0,1)[0]===1}function Pt(){try{return new Function(""),!0}catch{return!1}}class Lt{static get isLittleEndian(){return O(this,"isLittleEndian",Nt())}static get isEvalSupported(){return O(this,"isEvalSupported",Pt())}static get isOffscreenCanvasSupported(){return O(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get platform(){return typeof navigator>"u"?O(this,"platform",{isWin:!1,isMac:!1}):O(this,"platform",{isWin:navigator.platform.includes("Win"),isMac:navigator.platform.includes("Mac")})}static get isCSSRoundSupported(){return O(this,"isCSSRoundSupported",globalThis.CSS?.supports?.("width: round(1.5px, 1px)"))}}f.FeatureTest=Lt;const Ut=[...Array(256).keys()].map(Bt=>Bt.toString(16).padStart(2,"0"));class Qt{static makeHexColor(vt,st,Jt){return`#${Ut[vt]}${Ut[st]}${Ut[Jt]}`}static scaleMinMax(vt,st){let Jt;vt[0]?(vt[0]<0&&(Jt=st[0],st[0]=st[1],st[1]=Jt),st[0]*=vt[0],st[1]*=vt[0],vt[3]<0&&(Jt=st[2],st[2]=st[3],st[3]=Jt),st[2]*=vt[3],st[3]*=vt[3]):(Jt=st[0],st[0]=st[2],st[2]=Jt,Jt=st[1],st[1]=st[3],st[3]=Jt,vt[1]<0&&(Jt=st[2],st[2]=st[3],st[3]=Jt),st[2]*=vt[1],st[3]*=vt[1],vt[2]<0&&(Jt=st[0],st[0]=st[1],st[1]=Jt),st[0]*=vt[2],st[1]*=vt[2]),st[0]+=vt[4],st[1]+=vt[4],st[2]+=vt[5],st[3]+=vt[5]}static transform(vt,st){return[vt[0]*st[0]+vt[2]*st[1],vt[1]*st[0]+vt[3]*st[1],vt[0]*st[2]+vt[2]*st[3],vt[1]*st[2]+vt[3]*st[3],vt[0]*st[4]+vt[2]*st[5]+vt[4],vt[1]*st[4]+vt[3]*st[5]+vt[5]]}static applyTransform(vt,st){const Jt=vt[0]*st[0]+vt[1]*st[2]+st[4],me=vt[0]*st[1]+vt[1]*st[3]+st[5];return[Jt,me]}static applyInverseTransform(vt,st){const Jt=st[0]*st[3]-st[1]*st[2],me=(vt[0]*st[3]-vt[1]*st[2]+st[2]*st[5]-st[4]*st[3])/Jt,Ye=(-vt[0]*st[1]+vt[1]*st[0]+st[4]*st[1]-st[5]*st[0])/Jt;return[me,Ye]}static getAxialAlignedBoundingBox(vt,st){const Jt=this.applyTransform(vt,st),me=this.applyTransform(vt.slice(2,4),st),Ye=this.applyTransform([vt[0],vt[3]],st),Kt=this.applyTransform([vt[2],vt[1]],st);return[Math.min(Jt[0],me[0],Ye[0],Kt[0]),Math.min(Jt[1],me[1],Ye[1],Kt[1]),Math.max(Jt[0],me[0],Ye[0],Kt[0]),Math.max(Jt[1],me[1],Ye[1],Kt[1])]}static inverseTransform(vt){const st=vt[0]*vt[3]-vt[1]*vt[2];return[vt[3]/st,-vt[1]/st,-vt[2]/st,vt[0]/st,(vt[2]*vt[5]-vt[4]*vt[3])/st,(vt[4]*vt[1]-vt[5]*vt[0])/st]}static singularValueDecompose2dScale(vt){const st=[vt[0],vt[2],vt[1],vt[3]],Jt=vt[0]*st[0]+vt[1]*st[2],me=vt[0]*st[1]+vt[1]*st[3],Ye=vt[2]*st[0]+vt[3]*st[2],Kt=vt[2]*st[1]+vt[3]*st[3],Cn=(Jt+Kt)/2,Dn=Math.sqrt((Jt+Kt)**2-4*(Jt*Kt-Ye*me))/2,cn=Cn+Dn||1,Qe=Cn-Dn||1;return[Math.sqrt(cn),Math.sqrt(Qe)]}static normalizeRect(vt){const st=vt.slice(0);return vt[0]>vt[2]&&(st[0]=vt[2],st[2]=vt[0]),vt[1]>vt[3]&&(st[1]=vt[3],st[3]=vt[1]),st}static intersect(vt,st){const Jt=Math.max(Math.min(vt[0],vt[2]),Math.min(st[0],st[2])),me=Math.min(Math.max(vt[0],vt[2]),Math.max(st[0],st[2]));if(Jt>me)return null;const Ye=Math.max(Math.min(vt[1],vt[3]),Math.min(st[1],st[3])),Kt=Math.min(Math.max(vt[1],vt[3]),Math.max(st[1],st[3]));return Ye>Kt?null:[Jt,Ye,me,Kt]}static bezierBoundingBox(vt,st,Jt,me,Ye,Kt,Cn,Dn){const cn=[],Qe=[[],[]];let An,Zn,Di,ke,gn,vi,di,Re;for(let hi=0;hi<2;++hi){if(hi===0?(Zn=6*vt-12*Jt+6*Ye,An=-3*vt+9*Jt-9*Ye+3*Cn,Di=3*Jt-3*vt):(Zn=6*st-12*me+6*Kt,An=-3*st+9*me-9*Kt+3*Dn,Di=3*me-3*st),Math.abs(An)<1e-12){if(Math.abs(Zn)<1e-12)continue;ke=-Di/Zn,0<ke&&ke<1&&cn.push(ke);continue}di=Zn*Zn-4*Di*An,Re=Math.sqrt(di),!(di<0)&&(gn=(-Zn+Re)/(2*An),0<gn&&gn<1&&cn.push(gn),vi=(-Zn-Re)/(2*An),0<vi&&vi<1&&cn.push(vi))}let Be=cn.length,un;const On=Be;for(;Be--;)ke=cn[Be],un=1-ke,Qe[0][Be]=un*un*un*vt+3*un*un*ke*Jt+3*un*ke*ke*Ye+ke*ke*ke*Cn,Qe[1][Be]=un*un*un*st+3*un*un*ke*me+3*un*ke*ke*Kt+ke*ke*ke*Dn;return Qe[0][On]=vt,Qe[1][On]=st,Qe[0][On+1]=Cn,Qe[1][On+1]=Dn,Qe[0].length=Qe[1].length=On+2,[Math.min(...Qe[0]),Math.min(...Qe[1]),Math.max(...Qe[0]),Math.max(...Qe[1])]}}f.Util=Qt;const $t=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,728,711,710,729,733,731,730,732,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8226,8224,8225,8230,8212,8211,402,8260,8249,8250,8722,8240,8222,8220,8221,8216,8217,8218,8482,64257,64258,321,338,352,376,381,305,322,339,353,382,0,8364];function se(Bt){if(Bt[0]>=""){let st;if(Bt[0]===""&&Bt[1]===""?st="utf-16be":Bt[0]===""&&Bt[1]===""?st="utf-16le":Bt[0]===""&&Bt[1]===""&&Bt[2]===""&&(st="utf-8"),st)try{const Jt=new TextDecoder(st,{fatal:!0}),me=at(Bt);return Jt.decode(me)}catch(Jt){Y(`stringToPDFString: "${Jt}".`)}}const vt=[];for(let st=0,Jt=Bt.length;st<Jt;st++){const me=$t[Bt.charCodeAt(st)];vt.push(me?String.fromCharCode(me):Bt.charAt(st))}return vt.join("")}function le(Bt){return decodeURIComponent(escape(Bt))}function oe(Bt){return unescape(encodeURIComponent(Bt))}function _e(Bt){return typeof Bt=="object"&&Bt?.byteLength!==void 0}function Ce(Bt,vt){if(Bt.length!==vt.length)return!1;for(let st=0,Jt=Bt.length;st<Jt;st++)if(Bt[st]!==vt[st])return!1;return!0}function Ue(Bt=new Date){return[Bt.getUTCFullYear().toString(),(Bt.getUTCMonth()+1).toString().padStart(2,"0"),Bt.getUTCDate().toString().padStart(2,"0"),Bt.getUTCHours().toString().padStart(2,"0"),Bt.getUTCMinutes().toString().padStart(2,"0"),Bt.getUTCSeconds().toString().padStart(2,"0")].join("")}class jn{#t=!1;constructor(){this.promise=new Promise((vt,st)=>{this.resolve=Jt=>{this.#t=!0,vt(Jt)},this.reject=Jt=>{this.#t=!0,st(Jt)}})}get settled(){return this.#t}}f.PromiseCapability=jn;let We=null,En=null;function xi(Bt){return We||(We=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,En=new Map([["","t"]])),Bt.replaceAll(We,(vt,st,Jt)=>st?st.normalize("NFKC"):En.get(Jt))}function ui(){if(typeof crypto<"u"&&typeof crypto?.randomUUID=="function")return crypto.randomUUID();const Bt=new Uint8Array(32);if(typeof crypto<"u"&&typeof crypto?.getRandomValues=="function")crypto.getRandomValues(Bt);else for(let vt=0;vt<32;vt++)Bt[vt]=Math.floor(Math.random()*255);return it(Bt)}const Qn="pdfjs_internal_id_";f.AnnotationPrefix=Qn}),((__unused_webpack_module,exports$1,__w_pdfjs_require__)=>{Object.defineProperty(exports$1,"__esModule",{value:!0}),exports$1.RenderTask=exports$1.PDFWorkerUtil=exports$1.PDFWorker=exports$1.PDFPageProxy=exports$1.PDFDocumentProxy=exports$1.PDFDocumentLoadingTask=exports$1.PDFDataRangeTransport=exports$1.LoopbackPort=exports$1.DefaultStandardFontDataFactory=exports$1.DefaultFilterFactory=exports$1.DefaultCanvasFactory=exports$1.DefaultCMapReaderFactory=void 0,Object.defineProperty(exports$1,"SVGGraphics",{enumerable:!0,get:function(){return _displaySvg.SVGGraphics}}),exports$1.build=void 0,exports$1.getDocument=getDocument,exports$1.version=void 0;var _util=__w_pdfjs_require__(1),_annotation_storage=__w_pdfjs_require__(3),_display_utils=__w_pdfjs_require__(6),_font_loader=__w_pdfjs_require__(9),_displayNode_utils=__w_pdfjs_require__(10),_canvas=__w_pdfjs_require__(11),_worker_options=__w_pdfjs_require__(14),_message_handler=__w_pdfjs_require__(15),_metadata=__w_pdfjs_require__(16),_optional_content_config=__w_pdfjs_require__(17),_transport_stream=__w_pdfjs_require__(18),_displayFetch_stream=__w_pdfjs_require__(19),_displayNetwork=__w_pdfjs_require__(22),_displayNode_stream=__w_pdfjs_require__(23),_displaySvg=__w_pdfjs_require__(24),_xfa_text=__w_pdfjs_require__(25);const DEFAULT_RANGE_CHUNK_SIZE=65536,RENDERING_CANCELLED_TIMEOUT=100,DELAYED_CLEANUP_TIMEOUT=5e3,DefaultCanvasFactory=_util.isNodeJS?_displayNode_utils.NodeCanvasFactory:_display_utils.DOMCanvasFactory;exports$1.DefaultCanvasFactory=DefaultCanvasFactory;const DefaultCMapReaderFactory=_util.isNodeJS?_displayNode_utils.NodeCMapReaderFactory:_display_utils.DOMCMapReaderFactory;exports$1.DefaultCMapReaderFactory=DefaultCMapReaderFactory;const DefaultFilterFactory=_util.isNodeJS?_displayNode_utils.NodeFilterFactory:_display_utils.DOMFilterFactory;exports$1.DefaultFilterFactory=DefaultFilterFactory;const DefaultStandardFontDataFactory=_util.isNodeJS?_displayNode_utils.NodeStandardFontDataFactory:_display_utils.DOMStandardFontDataFactory;exports$1.DefaultStandardFontDataFactory=DefaultStandardFontDataFactory;function getDocument(R){if(typeof R=="string"||R instanceof URL?R={url:R}:(0,_util.isArrayBuffer)(R)&&(R={data:R}),typeof R!="object")throw new Error("Invalid parameter in getDocument, need parameter object.");if(!R.url&&!R.data&&!R.range)throw new Error("Invalid parameter object: need either .data, .range or .url");const f=new PDFDocumentLoadingTask,{docId:D}=f,c=R.url?getUrlProp(R.url):null,_=R.data?getDataProp(R.data):null,B=R.httpHeaders||null,N=R.withCredentials===!0,U=R.password??null,F=R.range instanceof PDFDataRangeTransport?R.range:null,u=Number.isInteger(R.rangeChunkSize)&&R.rangeChunkSize>0?R.rangeChunkSize:DEFAULT_RANGE_CHUNK_SIZE;let o=R.worker instanceof PDFWorker?R.worker:null;const d=R.verbosity,b=typeof R.docBaseUrl=="string"&&!(0,_display_utils.isDataScheme)(R.docBaseUrl)?R.docBaseUrl:null,g=typeof R.cMapUrl=="string"?R.cMapUrl:null,h=R.cMapPacked!==!1,E=R.CMapReaderFactory||DefaultCMapReaderFactory,C=typeof R.standardFontDataUrl=="string"?R.standardFontDataUrl:null,x=R.StandardFontDataFactory||DefaultStandardFontDataFactory,I=R.stopAtErrors!==!0,Q=Number.isInteger(R.maxImageSize)&&R.maxImageSize>-1?R.maxImageSize:-1,V=R.isEvalSupported!==!1,T=typeof R.isOffscreenCanvasSupported=="boolean"?R.isOffscreenCanvasSupported:!_util.isNodeJS,L=Number.isInteger(R.canvasMaxAreaInBytes)?R.canvasMaxAreaInBytes:-1,$=typeof R.disableFontFace=="boolean"?R.disableFontFace:_util.isNodeJS,rt=R.fontExtraProperties===!0,et=R.enableXfa===!0,yt=R.ownerDocument||globalThis.document,gt=R.disableRange===!0,kt=R.disableStream===!0,At=R.disableAutoFetch===!0,Ft=R.pdfBug===!0,Xt=F?F.length:R.length??NaN,nt=typeof R.useSystemFonts=="boolean"?R.useSystemFonts:!_util.isNodeJS&&!$,Y=typeof R.useWorkerFetch=="boolean"?R.useWorkerFetch:E===_display_utils.DOMCMapReaderFactory&&x===_display_utils.DOMStandardFontDataFactory&&g&&C&&(0,_display_utils.isValidFetchUrl)(g,document.baseURI)&&(0,_display_utils.isValidFetchUrl)(C,document.baseURI),k=R.canvasFactory||new DefaultCanvasFactory({ownerDocument:yt}),S=R.filterFactory||new DefaultFilterFactory({docId:D,ownerDocument:yt}),w=null;(0,_util.setVerbosityLevel)(d);const y={canvasFactory:k,filterFactory:S};if(Y||(y.cMapReaderFactory=new E({baseUrl:g,isCompressed:h}),y.standardFontDataFactory=new x({baseUrl:C})),!o){const J={verbosity:d,port:_worker_options.GlobalWorkerOptions.workerPort};o=J.port?PDFWorker.fromPort(J):new PDFWorker(J),f._worker=o}const O={docId:D,apiVersion:"3.11.174",data:_,password:U,disableAutoFetch:At,rangeChunkSize:u,length:Xt,docBaseUrl:b,enableXfa:et,evaluatorOptions:{maxImageSize:Q,disableFontFace:$,ignoreErrors:I,isEvalSupported:V,isOffscreenCanvasSupported:T,canvasMaxAreaInBytes:L,fontExtraProperties:rt,useSystemFonts:nt,cMapUrl:Y?g:null,standardFontDataUrl:Y?C:null}},H={ignoreErrors:I,isEvalSupported:V,disableFontFace:$,fontExtraProperties:rt,enableXfa:et,ownerDocument:yt,disableAutoFetch:At,pdfBug:Ft,styleElement:w};return o.promise.then(function(){if(f.destroyed)throw new Error("Loading aborted");const J=_fetchDocument(o,O),K=new Promise(function(m){let M;F?M=new _transport_stream.PDFDataTransportStream({length:Xt,initialData:F.initialData,progressiveDone:F.progressiveDone,contentDispositionFilename:F.contentDispositionFilename,disableRange:gt,disableStream:kt},F):_||(M=(W=>_util.isNodeJS?new _displayNode_stream.PDFNodeStream(W):(0,_display_utils.isValidFetchUrl)(W.url)?new _displayFetch_stream.PDFFetchStream(W):new _displayNetwork.PDFNetworkStream(W))({url:c,length:Xt,httpHeaders:B,withCredentials:N,rangeChunkSize:u,disableRange:gt,disableStream:kt})),m(M)});return Promise.all([J,K]).then(function([m,M]){if(f.destroyed)throw new Error("Loading aborted");const z=new _message_handler.MessageHandler(D,m,o.port),W=new WorkerTransport(z,f,M,H,y);f._transport=W,z.send("Ready",null)})}).catch(f._capability.reject),f}async function _fetchDocument(R,f){if(R.destroyed)throw new Error("Worker was destroyed");const D=await R.messageHandler.sendWithPromise("GetDocRequest",f,f.data?[f.data.buffer]:null);if(R.destroyed)throw new Error("Worker was destroyed");return D}function getUrlProp(R){if(R instanceof URL)return R.href;try{return new URL(R,window.location).href}catch{if(_util.isNodeJS&&typeof R=="string")return R}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function getDataProp(R){if(_util.isNodeJS&&typeof Buffer<"u"&&R instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(R instanceof Uint8Array&&R.byteLength===R.buffer.byteLength)return R;if(typeof R=="string")return(0,_util.stringToBytes)(R);if(typeof R=="object"&&!isNaN(R?.length)||(0,_util.isArrayBuffer)(R))return new Uint8Array(R);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}class PDFDocumentLoadingTask{static#t=0;constructor(){this._capability=new _util.PromiseCapability,this._transport=null,this._worker=null,this.docId=`d${PDFDocumentLoadingTask.#t++}`,this.destroyed=!1,this.onPassword=null,this.onProgress=null}get promise(){return this._capability.promise}async destroy(){this.destroyed=!0;try{this._worker?.port&&(this._worker._pendingDestroy=!0),await this._transport?.destroy()}catch(f){throw this._worker?.port&&delete this._worker._pendingDestroy,f}this._transport=null,this._worker&&(this._worker.destroy(),this._worker=null)}}exports$1.PDFDocumentLoadingTask=PDFDocumentLoadingTask;class PDFDataRangeTransport{constructor(f,D,c=!1,_=null){this.length=f,this.initialData=D,this.progressiveDone=c,this.contentDispositionFilename=_,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=new _util.PromiseCapability}addRangeListener(f){this._rangeListeners.push(f)}addProgressListener(f){this._progressListeners.push(f)}addProgressiveReadListener(f){this._progressiveReadListeners.push(f)}addProgressiveDoneListener(f){this._progressiveDoneListeners.push(f)}onDataRange(f,D){for(const c of this._rangeListeners)c(f,D)}onDataProgress(f,D){this._readyCapability.promise.then(()=>{for(const c of this._progressListeners)c(f,D)})}onDataProgressiveRead(f){this._readyCapability.promise.then(()=>{for(const D of this._progressiveReadListeners)D(f)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const f of this._progressiveDoneListeners)f()})}transportReady(){this._readyCapability.resolve()}requestDataRange(f,D){(0,_util.unreachable)("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}exports$1.PDFDataRangeTransport=PDFDataRangeTransport;class PDFDocumentProxy{constructor(f,D){this._pdfInfo=f,this._transport=D,Object.defineProperty(this,"getJavaScript",{value:()=>((0,_display_utils.deprecated)("`PDFDocumentProxy.getJavaScript`, please use `PDFDocumentProxy.getJSActions` instead."),this.getJSActions().then(c=>{if(!c)return c;const _=[];for(const B in c)_.push(...c[B]);return _}))})}get annotationStorage(){return this._transport.annotationStorage}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return(0,_util.shadow)(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(f){return this._transport.getPage(f)}getPageIndex(f){return this._transport.getPageIndex(f)}getDestinations(){return this._transport.getDestinations()}getDestination(f){return this._transport.getDestination(f)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig(){return this._transport.getOptionalContentConfig()}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(f=!1){return this._transport.startCleanup(f||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}exports$1.PDFDocumentProxy=PDFDocumentProxy;class PDFPageProxy{#t=null;#e=!1;constructor(f,D,c,_=!1){this._pageIndex=f,this._pageInfo=D,this._transport=c,this._stats=_?new _display_utils.StatTimer:null,this._pdfBug=_,this.commonObjs=c.commonObjs,this.objs=new PDFObjects,this._maybeCleanupAfterRender=!1,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:f,rotation:D=this.rotate,offsetX:c=0,offsetY:_=0,dontFlip:B=!1}={}){return new _display_utils.PageViewport({viewBox:this.view,scale:f,rotation:D,offsetX:c,offsetY:_,dontFlip:B})}getAnnotations({intent:f="display"}={}){const D=this._transport.getRenderingIntent(f);return this._transport.getAnnotations(this._pageIndex,D.renderingIntent)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return(0,_util.shadow)(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){return this._transport._htmlForXfa?.children[this._pageIndex]||null}render({canvasContext:f,viewport:D,intent:c="display",annotationMode:_=_util.AnnotationMode.ENABLE,transform:B=null,background:N=null,optionalContentConfigPromise:U=null,annotationCanvasMap:F=null,pageColors:u=null,printAnnotationStorage:o=null}){this._stats?.time("Overall");const d=this._transport.getRenderingIntent(c,_,o);this.#e=!1,this.#i(),U||(U=this._transport.getOptionalContentConfig());let b=this._intentStates.get(d.cacheKey);b||(b=Object.create(null),this._intentStates.set(d.cacheKey,b)),b.streamReaderCancelTimeout&&(clearTimeout(b.streamReaderCancelTimeout),b.streamReaderCancelTimeout=null);const g=!!(d.renderingIntent&_util.RenderingIntentFlag.PRINT);b.displayReadyCapability||(b.displayReadyCapability=new _util.PromiseCapability,b.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(d));const h=x=>{b.renderTasks.delete(E),(this._maybeCleanupAfterRender||g)&&(this.#e=!0),this.#n(!g),x?(E.capability.reject(x),this._abortOperatorList({intentState:b,reason:x instanceof Error?x:new Error(x)})):E.capability.resolve(),this._stats?.timeEnd("Rendering"),this._stats?.timeEnd("Overall")},E=new InternalRenderTask({callback:h,params:{canvasContext:f,viewport:D,transform:B,background:N},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:F,operatorList:b.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!g,pdfBug:this._pdfBug,pageColors:u});(b.renderTasks||=new Set).add(E);const C=E.task;return Promise.all([b.displayReadyCapability.promise,U]).then(([x,I])=>{if(this.destroyed){h();return}this._stats?.time("Rendering"),E.initializeGraphics({transparency:x,optionalContentConfig:I}),E.operatorListChanged()}).catch(h),C}getOperatorList({intent:f="display",annotationMode:D=_util.AnnotationMode.ENABLE,printAnnotationStorage:c=null}={}){function _(){N.operatorList.lastChunk&&(N.opListReadCapability.resolve(N.operatorList),N.renderTasks.delete(U))}const B=this._transport.getRenderingIntent(f,D,c,!0);let N=this._intentStates.get(B.cacheKey);N||(N=Object.create(null),this._intentStates.set(B.cacheKey,N));let U;return N.opListReadCapability||(U=Object.create(null),U.operatorListChanged=_,N.opListReadCapability=new _util.PromiseCapability,(N.renderTasks||=new Set).add(U),N.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(B)),N.opListReadCapability.promise}streamTextContent({includeMarkedContent:f=!1,disableNormalization:D=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:f===!0,disableNormalization:D===!0},{highWaterMark:100,size(_){return _.items.length}})}getTextContent(f={}){if(this._transport._htmlForXfa)return this.getXfa().then(c=>_xfa_text.XfaText.textContent(c));const D=this.streamTextContent(f);return new Promise(function(c,_){function B(){N.read().then(function({value:F,done:u}){if(u){c(U);return}Object.assign(U.styles,F.styles),U.items.push(...F.items),B()},_)}const N=D.getReader(),U={items:[],styles:Object.create(null)};B()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const f=[];for(const D of this._intentStates.values())if(this._abortOperatorList({intentState:D,reason:new Error("Page was destroyed."),force:!0}),!D.opListReadCapability)for(const c of D.renderTasks)f.push(c.completed),c.cancel();return this.objs.clear(),this.#e=!1,this.#i(),Promise.all(f)}cleanup(f=!1){this.#e=!0;const D=this.#n(!1);return f&&D&&(this._stats&&=new _display_utils.StatTimer),D}#n(f=!1){if(this.#i(),!this.#e||this.destroyed)return!1;if(f)return this.#t=setTimeout(()=>{this.#t=null,this.#n(!1)},DELAYED_CLEANUP_TIMEOUT),!1;for(const{renderTasks:D,operatorList:c}of this._intentStates.values())if(D.size>0||!c.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),this.#e=!1,!0}#i(){this.#t&&(clearTimeout(this.#t),this.#t=null)}_startRenderPage(f,D){const c=this._intentStates.get(D);c&&(this._stats?.timeEnd("Page Request"),c.displayReadyCapability?.resolve(f))}_renderPageChunk(f,D){for(let c=0,_=f.length;c<_;c++)D.operatorList.fnArray.push(f.fnArray[c]),D.operatorList.argsArray.push(f.argsArray[c]);D.operatorList.lastChunk=f.lastChunk,D.operatorList.separateAnnots=f.separateAnnots;for(const c of D.renderTasks)c.operatorListChanged();f.lastChunk&&this.#n(!0)}_pumpOperatorList({renderingIntent:f,cacheKey:D,annotationStorageSerializable:c}){const{map:_,transfers:B}=c,U=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:f,cacheKey:D,annotationStorage:_},B).getReader(),F=this._intentStates.get(D);F.streamReader=U;const u=()=>{U.read().then(({value:o,done:d})=>{if(d){F.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(o,F),u())},o=>{if(F.streamReader=null,!this._transport.destroyed){if(F.operatorList){F.operatorList.lastChunk=!0;for(const d of F.renderTasks)d.operatorListChanged();this.#n(!0)}if(F.displayReadyCapability)F.displayReadyCapability.reject(o);else if(F.opListReadCapability)F.opListReadCapability.reject(o);else throw o}})};u()}_abortOperatorList({intentState:f,reason:D,force:c=!1}){if(f.streamReader){if(f.streamReaderCancelTimeout&&(clearTimeout(f.streamReaderCancelTimeout),f.streamReaderCancelTimeout=null),!c){if(f.renderTasks.size>0)return;if(D instanceof _display_utils.RenderingCancelledException){let _=RENDERING_CANCELLED_TIMEOUT;D.extraDelay>0&&D.extraDelay<1e3&&(_+=D.extraDelay),f.streamReaderCancelTimeout=setTimeout(()=>{f.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:f,reason:D,force:!0})},_);return}}if(f.streamReader.cancel(new _util.AbortException(D.message)).catch(()=>{}),f.streamReader=null,!this._transport.destroyed){for(const[_,B]of this._intentStates)if(B===f){this._intentStates.delete(_);break}this.cleanup()}}}get stats(){return this._stats}}exports$1.PDFPageProxy=PDFPageProxy;class LoopbackPort{#t=new Set;#e=Promise.resolve();postMessage(f,D){const c={data:structuredClone(f,D?{transfer:D}:null)};this.#e.then(()=>{for(const _ of this.#t)_.call(this,c)})}addEventListener(f,D){this.#t.add(D)}removeEventListener(f,D){this.#t.delete(D)}terminate(){this.#t.clear()}}exports$1.LoopbackPort=LoopbackPort;const PDFWorkerUtil={isWorkerDisabled:!1,fallbackWorkerSrc:null,fakeWorkerId:0};exports$1.PDFWorkerUtil=PDFWorkerUtil;{if(_util.isNodeJS&&typeof commonjsRequire=="function")PDFWorkerUtil.isWorkerDisabled=!0,PDFWorkerUtil.fallbackWorkerSrc="./pdf.worker.js";else if(typeof document=="object"){const R=document?.currentScript?.src;R&&(PDFWorkerUtil.fallbackWorkerSrc=R.replace(/(\.(?:min\.)?js)(\?.*)?$/i,".worker$1$2"))}PDFWorkerUtil.isSameOrigin=function(R,f){let D;try{if(D=new URL(R),!D.origin||D.origin==="null")return!1}catch{return!1}const c=new URL(f,D);return D.origin===c.origin},PDFWorkerUtil.createCDNWrapper=function(R){const f=`importScripts("${R}");`;return URL.createObjectURL(new Blob([f]))}}class PDFWorker{static#workerPorts;constructor({name:R=null,port:f=null,verbosity:D=(0,_util.getVerbosityLevel)()}={}){if(this.name=R,this.destroyed=!1,this.verbosity=D,this._readyCapability=new _util.PromiseCapability,this._port=null,this._webWorker=null,this._messageHandler=null,f){if(PDFWorker.#workerPorts?.has(f))throw new Error("Cannot use more than one PDFWorker per port.");(PDFWorker.#workerPorts||=new WeakMap).set(f,this),this._initializeFromPort(f);return}this._initialize()}get promise(){return this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(R){this._port=R,this._messageHandler=new _message_handler.MessageHandler("main","worker",R),this._messageHandler.on("ready",function(){}),this._readyCapability.resolve(),this._messageHandler.send("configure",{verbosity:this.verbosity})}_initialize(){if(!PDFWorkerUtil.isWorkerDisabled&&!PDFWorker._mainThreadWorkerMessageHandler){let{workerSrc:R}=PDFWorker;try{PDFWorkerUtil.isSameOrigin(window.location.href,R)||(R=PDFWorkerUtil.createCDNWrapper(new URL(R,window.location).href));const f=new Worker(R),D=new _message_handler.MessageHandler("main","worker",f),c=()=>{f.removeEventListener("error",_),D.destroy(),f.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},_=()=>{this._webWorker||c()};f.addEventListener("error",_),D.on("test",N=>{if(f.removeEventListener("error",_),this.destroyed){c();return}N?(this._messageHandler=D,this._port=f,this._webWorker=f,this._readyCapability.resolve(),D.send("configure",{verbosity:this.verbosity})):(this._setupFakeWorker(),D.destroy(),f.terminate())}),D.on("ready",N=>{if(f.removeEventListener("error",_),this.destroyed){c();return}try{B()}catch{this._setupFakeWorker()}});const B=()=>{const N=new Uint8Array;D.send("test",N,[N.buffer])};B();return}catch{(0,_util.info)("The worker has been disabled.")}}this._setupFakeWorker()}_setupFakeWorker(){PDFWorkerUtil.isWorkerDisabled||((0,_util.warn)("Setting up fake worker."),PDFWorkerUtil.isWorkerDisabled=!0),PDFWorker._setupFakeWorkerGlobal.then(R=>{if(this.destroyed){this._readyCapability.reject(new Error("Worker was destroyed"));return}const f=new LoopbackPort;this._port=f;const D=`fake${PDFWorkerUtil.fakeWorkerId++}`,c=new _message_handler.MessageHandler(D+"_worker",D,f);R.setup(c,f);const _=new _message_handler.MessageHandler(D,D+"_worker",f);this._messageHandler=_,this._readyCapability.resolve(),_.send("configure",{verbosity:this.verbosity})}).catch(R=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${R.message}".`))})}destroy(){this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),PDFWorker.#workerPorts?.delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}static fromPort(R){if(!R?.port)throw new Error("PDFWorker.fromPort - invalid method signature.");const f=this.#workerPorts?.get(R.port);if(f){if(f._pendingDestroy)throw new Error("PDFWorker.fromPort - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return f}return new PDFWorker(R)}static get workerSrc(){if(_worker_options.GlobalWorkerOptions.workerSrc)return _worker_options.GlobalWorkerOptions.workerSrc;if(PDFWorkerUtil.fallbackWorkerSrc!==null)return _util.isNodeJS||(0,_display_utils.deprecated)('No "GlobalWorkerOptions.workerSrc" specified.'),PDFWorkerUtil.fallbackWorkerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _mainThreadWorkerMessageHandler(){try{return globalThis.pdfjsWorker?.WorkerMessageHandler||null}catch{return null}}static get _setupFakeWorkerGlobal(){const loader=async()=>{const mainWorkerMessageHandler=this._mainThreadWorkerMessageHandler;if(mainWorkerMessageHandler)return mainWorkerMessageHandler;if(_util.isNodeJS&&typeof commonjsRequire=="function"){const worker=eval("require")(this.workerSrc);return worker.WorkerMessageHandler}return await(0,_display_utils.loadScript)(this.workerSrc),window.pdfjsWorker.WorkerMessageHandler};return(0,_util.shadow)(this,"_setupFakeWorkerGlobal",loader())}}exports$1.PDFWorker=PDFWorker;class WorkerTransport{#t=new Map;#e=new Map;#n=new Map;#i=null;constructor(f,D,c,_,B){this.messageHandler=f,this.loadingTask=D,this.commonObjs=new PDFObjects,this.fontLoader=new _font_loader.FontLoader({ownerDocument:_.ownerDocument,styleElement:_.styleElement}),this._params=_,this.canvasFactory=B.canvasFactory,this.filterFactory=B.filterFactory,this.cMapReaderFactory=B.cMapReaderFactory,this.standardFontDataFactory=B.standardFontDataFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=c,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=new _util.PromiseCapability,this.setupMessageHandler()}#o(f,D=null){const c=this.#t.get(f);if(c)return c;const _=this.messageHandler.sendWithPromise(f,D);return this.#t.set(f,_),_}get annotationStorage(){return(0,_util.shadow)(this,"annotationStorage",new _annotation_storage.AnnotationStorage)}getRenderingIntent(f,D=_util.AnnotationMode.ENABLE,c=null,_=!1){let B=_util.RenderingIntentFlag.DISPLAY,N=_annotation_storage.SerializableEmpty;switch(f){case"any":B=_util.RenderingIntentFlag.ANY;break;case"display":break;case"print":B=_util.RenderingIntentFlag.PRINT;break;default:(0,_util.warn)(`getRenderingIntent - invalid intent: ${f}`)}switch(D){case _util.AnnotationMode.DISABLE:B+=_util.RenderingIntentFlag.ANNOTATIONS_DISABLE;break;case _util.AnnotationMode.ENABLE:break;case _util.AnnotationMode.ENABLE_FORMS:B+=_util.RenderingIntentFlag.ANNOTATIONS_FORMS;break;case _util.AnnotationMode.ENABLE_STORAGE:B+=_util.RenderingIntentFlag.ANNOTATIONS_STORAGE,N=(B&_util.RenderingIntentFlag.PRINT&&c instanceof _annotation_storage.PrintAnnotationStorage?c:this.annotationStorage).serializable;break;default:(0,_util.warn)(`getRenderingIntent - invalid annotationMode: ${D}`)}return _&&(B+=_util.RenderingIntentFlag.OPLIST),{renderingIntent:B,cacheKey:`${B}_${N.hash}`,annotationStorageSerializable:N}}destroy(){if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=new _util.PromiseCapability,this.#i?.reject(new Error("Worker was destroyed during onPassword callback"));const f=[];for(const c of this.#e.values())f.push(c._destroy());this.#e.clear(),this.#n.clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const D=this.messageHandler.sendWithPromise("Terminate",null);return f.push(D),Promise.all(f).then(()=>{this.commonObjs.clear(),this.fontLoader.clear(),this.#t.clear(),this.filterFactory.destroy(),this._networkStream?.cancelAllRequests(new _util.AbortException("Worker was terminated.")),this.messageHandler&&(this.messageHandler.destroy(),this.messageHandler=null),this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:f,loadingTask:D}=this;f.on("GetReader",(c,_)=>{(0,_util.assert)(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=B=>{this._lastProgress={loaded:B.loaded,total:B.total}},_.onPull=()=>{this._fullReader.read().then(function({value:B,done:N}){if(N){_.close();return}(0,_util.assert)(B instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),_.enqueue(new Uint8Array(B),1,[B])}).catch(B=>{_.error(B)})},_.onCancel=B=>{this._fullReader.cancel(B),_.ready.catch(N=>{if(!this.destroyed)throw N})}}),f.on("ReaderHeadersReady",c=>{const _=new _util.PromiseCapability,B=this._fullReader;return B.headersReady.then(()=>{(!B.isStreamingSupported||!B.isRangeSupported)&&(this._lastProgress&&D.onProgress?.(this._lastProgress),B.onProgress=N=>{D.onProgress?.({loaded:N.loaded,total:N.total})}),_.resolve({isStreamingSupported:B.isStreamingSupported,isRangeSupported:B.isRangeSupported,contentLength:B.contentLength})},_.reject),_.promise}),f.on("GetRangeReader",(c,_)=>{(0,_util.assert)(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const B=this._networkStream.getRangeReader(c.begin,c.end);if(!B){_.close();return}_.onPull=()=>{B.read().then(function({value:N,done:U}){if(U){_.close();return}(0,_util.assert)(N instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),_.enqueue(new Uint8Array(N),1,[N])}).catch(N=>{_.error(N)})},_.onCancel=N=>{B.cancel(N),_.ready.catch(U=>{if(!this.destroyed)throw U})}}),f.on("GetDoc",({pdfInfo:c})=>{this._numPages=c.numPages,this._htmlForXfa=c.htmlForXfa,delete c.htmlForXfa,D._capability.resolve(new PDFDocumentProxy(c,this))}),f.on("DocException",function(c){let _;switch(c.name){case"PasswordException":_=new _util.PasswordException(c.message,c.code);break;case"InvalidPDFException":_=new _util.InvalidPDFException(c.message);break;case"MissingPDFException":_=new _util.MissingPDFException(c.message);break;case"UnexpectedResponseException":_=new _util.UnexpectedResponseException(c.message,c.status);break;case"UnknownErrorException":_=new _util.UnknownErrorException(c.message,c.details);break;default:(0,_util.unreachable)("DocException - expected a valid Error.")}D._capability.reject(_)}),f.on("PasswordRequest",c=>{if(this.#i=new _util.PromiseCapability,D.onPassword){const _=B=>{B instanceof Error?this.#i.reject(B):this.#i.resolve({password:B})};try{D.onPassword(_,c.code)}catch(B){this.#i.reject(B)}}else this.#i.reject(new _util.PasswordException(c.message,c.code));return this.#i.promise}),f.on("DataLoaded",c=>{D.onProgress?.({loaded:c.length,total:c.length}),this.downloadInfoCapability.resolve(c)}),f.on("StartRenderPage",c=>{if(this.destroyed)return;this.#e.get(c.pageIndex)._startRenderPage(c.transparency,c.cacheKey)}),f.on("commonobj",([c,_,B])=>{if(!this.destroyed&&!this.commonObjs.has(c))switch(_){case"Font":const N=this._params;if("error"in B){const u=B.error;(0,_util.warn)(`Error during font loading: ${u}`),this.commonObjs.resolve(c,u);break}const U=N.pdfBug&&globalThis.FontInspector?.enabled?(u,o)=>globalThis.FontInspector.fontAdded(u,o):null,F=new _font_loader.FontFaceObject(B,{isEvalSupported:N.isEvalSupported,disableFontFace:N.disableFontFace,ignoreErrors:N.ignoreErrors,inspectFont:U});this.fontLoader.bind(F).catch(u=>f.sendWithPromise("FontFallback",{id:c})).finally(()=>{!N.fontExtraProperties&&F.data&&(F.data=null),this.commonObjs.resolve(c,F)});break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(c,B);break;default:throw new Error(`Got unknown common object type ${_}`)}}),f.on("obj",([c,_,B,N])=>{if(this.destroyed)return;const U=this.#e.get(_);if(!U.objs.has(c))switch(B){case"Image":if(U.objs.resolve(c,N),N){let F;if(N.bitmap){const{width:u,height:o}=N;F=u*o*4}else F=N.data?.length||0;F>_util.MAX_IMAGE_SIZE_TO_CACHE&&(U._maybeCleanupAfterRender=!0)}break;case"Pattern":U.objs.resolve(c,N);break;default:throw new Error(`Got unknown object type ${B}`)}}),f.on("DocProgress",c=>{this.destroyed||D.onProgress?.({loaded:c.loaded,total:c.total})}),f.on("FetchBuiltInCMap",c=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.cMapReaderFactory?this.cMapReaderFactory.fetch(c):Promise.reject(new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter."))),f.on("FetchStandardFontData",c=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.standardFontDataFactory?this.standardFontDataFactory.fetch(c):Promise.reject(new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.")))}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){this.annotationStorage.size<=0&&(0,_util.warn)("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:f,transfers:D}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:f,filename:this._fullReader?.filename??null},D).finally(()=>{this.annotationStorage.resetModified()})}getPage(f){if(!Number.isInteger(f)||f<=0||f>this._numPages)return Promise.reject(new Error("Invalid page request."));const D=f-1,c=this.#n.get(D);if(c)return c;const _=this.messageHandler.sendWithPromise("GetPage",{pageIndex:D}).then(B=>{if(this.destroyed)throw new Error("Transport destroyed");const N=new PDFPageProxy(D,B,this,this._params.pdfBug);return this.#e.set(D,N),N});return this.#n.set(D,_),_}getPageIndex(f){return typeof f!="object"||f===null||!Number.isInteger(f.num)||f.num<0||!Number.isInteger(f.gen)||f.gen<0?Promise.reject(new Error("Invalid pageIndex request.")):this.messageHandler.sendWithPromise("GetPageIndex",{num:f.num,gen:f.gen})}getAnnotations(f,D){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:f,intent:D})}getFieldObjects(){return this.#o("GetFieldObjects")}hasJSActions(){return this.#o("HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(f){return typeof f!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:f})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getDocJSActions(){return this.#o("GetDocJSActions")}getPageJSActions(f){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:f})}getStructTree(f){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:f})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(){return this.messageHandler.sendWithPromise("GetOptionalContentConfig",null).then(f=>new _optional_content_config.OptionalContentConfig(f))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const f="GetMetadata",D=this.#t.get(f);if(D)return D;const c=this.messageHandler.sendWithPromise(f,null).then(_=>({info:_[0],metadata:_[1]?new _metadata.Metadata(_[1]):null,contentDispositionFilename:this._fullReader?.filename??null,contentLength:this._fullReader?.contentLength??null}));return this.#t.set(f,c),c}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(f=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const D of this.#e.values())if(!D.cleanup())throw new Error(`startCleanup: Page ${D.pageNumber} is currently rendering.`);this.commonObjs.clear(),f||this.fontLoader.clear(),this.#t.clear(),this.filterFactory.destroy(!0)}}get loadingParams(){const{disableAutoFetch:f,enableXfa:D}=this._params;return(0,_util.shadow)(this,"loadingParams",{disableAutoFetch:f,enableXfa:D})}}class PDFObjects{#t=Object.create(null);#e(f){return this.#t[f]||={capability:new _util.PromiseCapability,data:null}}get(f,D=null){if(D){const _=this.#e(f);return _.capability.promise.then(()=>D(_.data)),null}const c=this.#t[f];if(!c?.capability.settled)throw new Error(`Requesting object that isn't resolved yet ${f}.`);return c.data}has(f){return this.#t[f]?.capability.settled||!1}resolve(f,D=null){const c=this.#e(f);c.data=D,c.capability.resolve()}clear(){for(const f in this.#t){const{data:D}=this.#t[f];D?.bitmap?.close()}this.#t=Object.create(null)}}class RenderTask{#t=null;constructor(f){this.#t=f,this.onContinue=null}get promise(){return this.#t.capability.promise}cancel(f=0){this.#t.cancel(null,f)}get separateAnnots(){const{separateAnnots:f}=this.#t.operatorList;if(!f)return!1;const{annotationCanvasMap:D}=this.#t;return f.form||f.canvas&&D?.size>0}}exports$1.RenderTask=RenderTask;class InternalRenderTask{static#t=new WeakSet;constructor({callback:f,params:D,objs:c,commonObjs:_,annotationCanvasMap:B,operatorList:N,pageIndex:U,canvasFactory:F,filterFactory:u,useRequestAnimationFrame:o=!1,pdfBug:d=!1,pageColors:b=null}){this.callback=f,this.params=D,this.objs=c,this.commonObjs=_,this.annotationCanvasMap=B,this.operatorListIdx=null,this.operatorList=N,this._pageIndex=U,this.canvasFactory=F,this.filterFactory=u,this._pdfBug=d,this.pageColors=b,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=o===!0&&typeof window<"u",this.cancelled=!1,this.capability=new _util.PromiseCapability,this.task=new RenderTask(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=D.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:f=!1,optionalContentConfig:D}){if(this.cancelled)return;if(this._canvas){if(InternalRenderTask.#t.has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");InternalRenderTask.#t.add(this._canvas)}this._pdfBug&&globalThis.StepperManager?.enabled&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:c,viewport:_,transform:B,background:N}=this.params;this.gfx=new _canvas.CanvasGraphics(c,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:D},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:B,viewport:_,transparency:f,background:N}),this.operatorListIdx=0,this.graphicsReady=!0,this.graphicsReadyCallback?.()}cancel(f=null,D=0){this.running=!1,this.cancelled=!0,this.gfx?.endDrawing(),InternalRenderTask.#t.delete(this._canvas),this.callback(f||new _display_utils.RenderingCancelledException(`Rendering cancelled, page ${this._pageIndex+1}`,D))}operatorListChanged(){if(!this.graphicsReady){this.graphicsReadyCallback||=this._continueBound;return}this.stepper?.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?window.requestAnimationFrame(()=>{this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),InternalRenderTask.#t.delete(this._canvas),this.callback())))}}const version="3.11.174";exports$1.version=version;const build="ce8716743";exports$1.build=build}),((R,f,D)=>{Object.defineProperty(f,"__esModule",{value:!0}),f.SerializableEmpty=f.PrintAnnotationStorage=f.AnnotationStorage=void 0;var c=D(1),_=D(4),B=D(8);const N=Object.freeze({map:null,hash:"",transfers:void 0});f.SerializableEmpty=N;class U{#t=!1;#e=new Map;constructor(){this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(o,d){const b=this.#e.get(o);return b===void 0?d:Object.assign(d,b)}getRawValue(o){return this.#e.get(o)}remove(o){if(this.#e.delete(o),this.#e.size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const d of this.#e.values())if(d instanceof _.AnnotationEditor)return;this.onAnnotationEditor(null)}}setValue(o,d){const b=this.#e.get(o);let g=!1;if(b!==void 0)for(const[h,E]of Object.entries(d))b[h]!==E&&(g=!0,b[h]=E);else g=!0,this.#e.set(o,d);g&&this.#n(),d instanceof _.AnnotationEditor&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(d.constructor._type)}has(o){return this.#e.has(o)}getAll(){return this.#e.size>0?(0,c.objectFromMap)(this.#e):null}setAll(o){for(const[d,b]of Object.entries(o))this.setValue(d,b)}get size(){return this.#e.size}#n(){this.#t||(this.#t=!0,typeof this.onSetModified=="function"&&this.onSetModified())}resetModified(){this.#t&&(this.#t=!1,typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new F(this)}get serializable(){if(this.#e.size===0)return N;const o=new Map,d=new B.MurmurHash3_64,b=[],g=Object.create(null);let h=!1;for(const[E,C]of this.#e){const x=C instanceof _.AnnotationEditor?C.serialize(!1,g):C;x&&(o.set(E,x),d.update(`${E}:${JSON.stringify(x)}`),h||=!!x.bitmap)}if(h)for(const E of o.values())E.bitmap&&b.push(E.bitmap);return o.size>0?{map:o,hash:d.hexdigest(),transfers:b}:N}}f.AnnotationStorage=U;class F extends U{#t;constructor(o){super();const{map:d,hash:b,transfers:g}=o.serializable,h=structuredClone(d,g?{transfer:g}:null);this.#t={map:h,hash:b,transfers:g}}get print(){(0,c.unreachable)("Should not call PrintAnnotationStorage.print")}get serializable(){return this.#t}}f.PrintAnnotationStorage=F}),((R,f,D)=>{Object.defineProperty(f,"__esModule",{value:!0}),f.AnnotationEditor=void 0;var c=D(5),_=D(1),B=D(6);class N{#t="";#e=!1;#n=null;#i=null;#o=null;#r=!1;#a=null;#l=this.focusin.bind(this);#c=this.focusout.bind(this);#s=!1;#f=!1;#d=!1;_initialOptions=Object.create(null);_uiManager=null;_focusEventsAllowed=!0;_l10nPromise=null;#h=!1;#p=N._zIndex++;static _borderLineWidth=-1;static _colorManager=new c.ColorManager;static _zIndex=1;static SMALL_EDITOR_SIZE=0;constructor(u){this.constructor===N&&(0,_.unreachable)("Cannot initialize AnnotationEditor."),this.parent=u.parent,this.id=u.id,this.width=this.height=null,this.pageIndex=u.parent.pageIndex,this.name=u.name,this.div=null,this._uiManager=u.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=u.isCentered,this._structTreeParentId=null;const{rotation:o,rawDims:{pageWidth:d,pageHeight:b,pageX:g,pageY:h}}=this.parent.viewport;this.rotation=o,this.pageRotation=(360+o-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[d,b],this.pageTranslation=[g,h];const[E,C]=this.parentDimensions;this.x=u.x/E,this.y=u.y/C,this.isAttachedToDOM=!1,this.deleted=!1}get editorType(){return Object.getPrototypeOf(this).constructor._type}static get _defaultLineColor(){return(0,_.shadow)(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(u){const o=new U({id:u.parent.getNextId(),parent:u.parent,uiManager:u._uiManager});o.annotationElementId=u.annotationElementId,o.deleted=!0,o._uiManager.addToAnnotationStorage(o)}static initialize(u,o=null){if(N._l10nPromise||=new Map(["editor_alt_text_button_label","editor_alt_text_edit_button_label","editor_alt_text_decorative_tooltip"].map(b=>[b,u.get(b)])),o?.strings)for(const b of o.strings)N._l10nPromise.set(b,u.get(b));if(N._borderLineWidth!==-1)return;const d=getComputedStyle(document.documentElement);N._borderLineWidth=parseFloat(d.getPropertyValue("--outline-width"))||0}static updateDefaultParams(u,o){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(u){return!1}static paste(u,o){(0,_.unreachable)("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return this.#h}set _isDraggable(u){this.#h=u,this.div?.classList.toggle("draggable",u)}center(){const[u,o]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*o/(u*2),this.y+=this.width*u/(o*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*o/(u*2),this.y-=this.width*u/(o*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(u){this._uiManager.addCommands(u)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=this.#p}setParent(u){u!==null&&(this.pageIndex=u.pageIndex,this.pageDimensions=u.pageDimensions),this.parent=u}focusin(u){this._focusEventsAllowed&&(this.#s?this.#s=!1:this.parent.setSelected(this))}focusout(u){!this._focusEventsAllowed||!this.isAttachedToDOM||u.relatedTarget?.closest(`#${this.id}`)||(u.preventDefault(),this.parent?.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(u,o,d,b){const[g,h]=this.parentDimensions;[d,b]=this.screenToPageTranslation(d,b),this.x=(u+d)/g,this.y=(o+b)/h,this.fixAndSetPosition()}#y([u,o],d,b){[d,b]=this.screenToPageTranslation(d,b),this.x+=d/u,this.y+=b/o,this.fixAndSetPosition()}translate(u,o){this.#y(this.parentDimensions,u,o)}translateInPage(u,o){this.#y(this.pageDimensions,u,o),this.div.scrollIntoView({block:"nearest"})}drag(u,o){const[d,b]=this.parentDimensions;if(this.x+=u/d,this.y+=o/b,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x,y:I}=this.div.getBoundingClientRect();this.parent.findNewParent(this,x,I)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:g,y:h}=this;const[E,C]=this.#g();g+=E,h+=C,this.div.style.left=`${(100*g).toFixed(2)}%`,this.div.style.top=`${(100*h).toFixed(2)}%`,this.div.scrollIntoView({block:"nearest"})}#g(){const[u,o]=this.parentDimensions,{_borderLineWidth:d}=N,b=d/u,g=d/o;switch(this.rotation){case 90:return[-b,g];case 180:return[b,g];case 270:return[b,-g];default:return[-b,-g]}}fixAndSetPosition(){const[u,o]=this.pageDimensions;let{x:d,y:b,width:g,height:h}=this;switch(g*=u,h*=o,d*=u,b*=o,this.rotation){case 0:d=Math.max(0,Math.min(u-g,d)),b=Math.max(0,Math.min(o-h,b));break;case 90:d=Math.max(0,Math.min(u-h,d)),b=Math.min(o,Math.max(g,b));break;case 180:d=Math.min(u,Math.max(g,d)),b=Math.min(o,Math.max(h,b));break;case 270:d=Math.min(u,Math.max(h,d)),b=Math.max(0,Math.min(o-g,b));break}this.x=d/=u,this.y=b/=o;const[E,C]=this.#g();d+=E,b+=C;const{style:x}=this.div;x.left=`${(100*d).toFixed(2)}%`,x.top=`${(100*b).toFixed(2)}%`,this.moveInDOM()}static#m(u,o,d){switch(d){case 90:return[o,-u];case 180:return[-u,-o];case 270:return[-o,u];default:return[u,o]}}screenToPageTranslation(u,o){return N.#m(u,o,this.parentRotation)}pageTranslationToScreen(u,o){return N.#m(u,o,360-this.parentRotation)}#u(u){switch(u){case 90:{const[o,d]=this.pageDimensions;return[0,-o/d,d/o,0]}case 180:return[-1,0,0,-1];case 270:{const[o,d]=this.pageDimensions;return[0,o/d,-d/o,0]}default:return[1,0,0,1]}}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:u,pageDimensions:[o,d]}=this,b=o*u,g=d*u;return _.FeatureTest.isCSSRoundSupported?[Math.round(b),Math.round(g)]:[b,g]}setDims(u,o){const[d,b]=this.parentDimensions;this.div.style.width=`${(100*u/d).toFixed(2)}%`,this.#r||(this.div.style.height=`${(100*o/b).toFixed(2)}%`),this.#n?.classList.toggle("small",u<N.SMALL_EDITOR_SIZE||o<N.SMALL_EDITOR_SIZE)}fixDims(){const{style:u}=this.div,{height:o,width:d}=u,b=d.endsWith("%"),g=!this.#r&&o.endsWith("%");if(b&&g)return;const[h,E]=this.parentDimensions;b||(u.width=`${(100*parseFloat(d)/h).toFixed(2)}%`),!this.#r&&!g&&(u.height=`${(100*parseFloat(o)/E).toFixed(2)}%`)}getInitialTranslation(){return[0,0]}#x(){if(this.#a)return;this.#a=document.createElement("div"),this.#a.classList.add("resizers");const u=["topLeft","topRight","bottomRight","bottomLeft"];this._willKeepAspectRatio||u.push("topMiddle","middleRight","bottomMiddle","middleLeft");for(const o of u){const d=document.createElement("div");this.#a.append(d),d.classList.add("resizer",o),d.addEventListener("pointerdown",this.#A.bind(this,o)),d.addEventListener("contextmenu",B.noContextMenu)}this.div.prepend(this.#a)}#A(u,o){o.preventDefault();const{isMac:d}=_.FeatureTest.platform;if(o.button!==0||o.ctrlKey&&d)return;const b=this.#E.bind(this,u),g=this._isDraggable;this._isDraggable=!1;const h={passive:!0,capture:!0};window.addEventListener("pointermove",b,h);const E=this.x,C=this.y,x=this.width,I=this.height,Q=this.parent.div.style.cursor,V=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(o.target).cursor;const T=()=>{this._isDraggable=g,window.removeEventListener("pointerup",T),window.removeEventListener("blur",T),window.removeEventListener("pointermove",b,h),this.parent.div.style.cursor=Q,this.div.style.cursor=V;const L=this.x,$=this.y,rt=this.width,et=this.height;L===E&&$===C&&rt===x&&et===I||this.addCommands({cmd:()=>{this.width=rt,this.height=et,this.x=L,this.y=$;const[yt,gt]=this.parentDimensions;this.setDims(yt*rt,gt*et),this.fixAndSetPosition()},undo:()=>{this.width=x,this.height=I,this.x=E,this.y=C;const[yt,gt]=this.parentDimensions;this.setDims(yt*x,gt*I),this.fixAndSetPosition()},mustExec:!0})};window.addEventListener("pointerup",T),window.addEventListener("blur",T)}#E(u,o){const[d,b]=this.parentDimensions,g=this.x,h=this.y,E=this.width,C=this.height,x=N.MIN_SIZE/d,I=N.MIN_SIZE/b,Q=K=>Math.round(K*1e4)/1e4,V=this.#u(this.rotation),T=(K,m)=>[V[0]*K+V[2]*m,V[1]*K+V[3]*m],L=this.#u(360-this.rotation),$=(K,m)=>[L[0]*K+L[2]*m,L[1]*K+L[3]*m];let rt,et,yt=!1,gt=!1;switch(u){case"topLeft":yt=!0,rt=(K,m)=>[0,0],et=(K,m)=>[K,m];break;case"topMiddle":rt=(K,m)=>[K/2,0],et=(K,m)=>[K/2,m];break;case"topRight":yt=!0,rt=(K,m)=>[K,0],et=(K,m)=>[0,m];break;case"middleRight":gt=!0,rt=(K,m)=>[K,m/2],et=(K,m)=>[0,m/2];break;case"bottomRight":yt=!0,rt=(K,m)=>[K,m],et=(K,m)=>[0,0];break;case"bottomMiddle":rt=(K,m)=>[K/2,m],et=(K,m)=>[K/2,0];break;case"bottomLeft":yt=!0,rt=(K,m)=>[0,m],et=(K,m)=>[K,0];break;case"middleLeft":gt=!0,rt=(K,m)=>[0,m/2],et=(K,m)=>[K,m/2];break}const kt=rt(E,C),At=et(E,C);let Ft=T(...At);const Xt=Q(g+Ft[0]),nt=Q(h+Ft[1]);let Y=1,k=1,[S,w]=this.screenToPageTranslation(o.movementX,o.movementY);if([S,w]=$(S/d,w/b),yt){const K=Math.hypot(E,C);Y=k=Math.max(Math.min(Math.hypot(At[0]-kt[0]-S,At[1]-kt[1]-w)/K,1/E,1/C),x/E,I/C)}else gt?Y=Math.max(x,Math.min(1,Math.abs(At[0]-kt[0]-S)))/E:k=Math.max(I,Math.min(1,Math.abs(At[1]-kt[1]-w)))/C;const y=Q(E*Y),O=Q(C*k);Ft=T(...et(y,O));const H=Xt-Ft[0],J=nt-Ft[1];this.width=y,this.height=O,this.x=H,this.y=J,this.setDims(d*y,b*O),this.fixAndSetPosition()}async addAltTextButton(){if(this.#n)return;const u=this.#n=document.createElement("button");u.className="altText";const o=await N._l10nPromise.get("editor_alt_text_button_label");u.textContent=o,u.setAttribute("aria-label",o),u.tabIndex="0",u.addEventListener("contextmenu",B.noContextMenu),u.addEventListener("pointerdown",d=>d.stopPropagation()),u.addEventListener("click",d=>{d.preventDefault(),this._uiManager.editAltText(this)},{capture:!0}),u.addEventListener("keydown",d=>{d.target===u&&d.key==="Enter"&&(d.preventDefault(),this._uiManager.editAltText(this))}),this.#R(),this.div.append(u),N.SMALL_EDITOR_SIZE||(N.SMALL_EDITOR_SIZE=Math.min(128,Math.round(u.getBoundingClientRect().width*1.4)))}async#R(){const u=this.#n;if(!u)return;if(!this.#t&&!this.#e){u.classList.remove("done"),this.#i?.remove();return}N._l10nPromise.get("editor_alt_text_edit_button_label").then(d=>{u.setAttribute("aria-label",d)});let o=this.#i;if(!o){this.#i=o=document.createElement("span"),o.className="tooltip",o.setAttribute("role","tooltip");const d=o.id=`alt-text-tooltip-${this.id}`;u.setAttribute("aria-describedby",d);const b=100;u.addEventListener("mouseenter",()=>{this.#o=setTimeout(()=>{this.#o=null,this.#i.classList.add("show"),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",subtype:this.editorType,data:{action:"alt_text_tooltip"}}})},b)}),u.addEventListener("mouseleave",()=>{clearTimeout(this.#o),this.#o=null,this.#i?.classList.remove("show")})}u.classList.add("done"),o.innerText=this.#e?await N._l10nPromise.get("editor_alt_text_decorative_tooltip"):this.#t,o.parentNode||u.append(o)}getClientDimensions(){return this.div.getBoundingClientRect()}get altTextData(){return{altText:this.#t,decorative:this.#e}}set altTextData({altText:u,decorative:o}){this.#t===u&&this.#e===o||(this.#t=u,this.#e=o,this.#R())}render(){this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.setAttribute("tabIndex",0),this.setInForeground(),this.div.addEventListener("focusin",this.#l),this.div.addEventListener("focusout",this.#c);const[u,o]=this.parentDimensions;this.parentRotation%180!==0&&(this.div.style.maxWidth=`${(100*o/u).toFixed(2)}%`,this.div.style.maxHeight=`${(100*u/o).toFixed(2)}%`);const[d,b]=this.getInitialTranslation();return this.translate(d,b),(0,c.bindEvents)(this,this.div,["pointerdown"]),this.div}pointerdown(u){const{isMac:o}=_.FeatureTest.platform;if(u.button!==0||u.ctrlKey&&o){u.preventDefault();return}this.#s=!0,this.#j(u)}#j(u){if(!this._isDraggable)return;const o=this._uiManager.isSelected(this);this._uiManager.setUpDragSession();let d,b;o&&(d={passive:!0,capture:!0},b=h=>{const[E,C]=this.screenToPageTranslation(h.movementX,h.movementY);this._uiManager.dragSelectedEditors(E,C)},window.addEventListener("pointermove",b,d));const g=()=>{if(window.removeEventListener("pointerup",g),window.removeEventListener("blur",g),o&&window.removeEventListener("pointermove",b,d),this.#s=!1,!this._uiManager.endDragSession()){const{isMac:h}=_.FeatureTest.platform;u.ctrlKey&&!h||u.shiftKey||u.metaKey&&h?this.parent.toggleSelected(this):this.parent.setSelected(this)}};window.addEventListener("pointerup",g),window.addEventListener("blur",g)}moveInDOM(){this.parent?.moveEditorInDOM(this)}_setParentAndPosition(u,o,d){u.changeParent(this),this.x=o,this.y=d,this.fixAndSetPosition()}getRect(u,o){const d=this.parentScale,[b,g]=this.pageDimensions,[h,E]=this.pageTranslation,C=u/d,x=o/d,I=this.x*b,Q=this.y*g,V=this.width*b,T=this.height*g;switch(this.rotation){case 0:return[I+C+h,g-Q-x-T+E,I+C+V+h,g-Q-x+E];case 90:return[I+x+h,g-Q+C+E,I+x+T+h,g-Q+C+V+E];case 180:return[I-C-V+h,g-Q+x+E,I-C+h,g-Q+x+T+E];case 270:return[I-x-T+h,g-Q-C-V+E,I-x+h,g-Q-C+E];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(u,o){const[d,b,g,h]=u,E=g-d,C=h-b;switch(this.rotation){case 0:return[d,o-h,E,C];case 90:return[d,o-b,C,E];case 180:return[g,o-b,E,C];case 270:return[g,o-h,C,E];default:throw new Error("Invalid rotation")}}onceAdded(){}isEmpty(){return!1}enableEditMode(){this.#d=!0}disableEditMode(){this.#d=!1}isInEditMode(){return this.#d}shouldGetKeyboardEvents(){return!1}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}rebuild(){this.div?.addEventListener("focusin",this.#l),this.div?.addEventListener("focusout",this.#c)}serialize(u=!1,o=null){(0,_.unreachable)("An editor must be serializable")}static deserialize(u,o,d){const b=new this.prototype.constructor({parent:o,id:o.getNextId(),uiManager:d});b.rotation=u.rotation;const[g,h]=b.pageDimensions,[E,C,x,I]=b.getRectInCurrentCoords(u.rect,h);return b.x=E/g,b.y=C/h,b.width=x/g,b.height=I/h,b}remove(){this.div.removeEventListener("focusin",this.#l),this.div.removeEventListener("focusout",this.#c),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),this.#n?.remove(),this.#n=null,this.#i=null}get isResizable(){return!1}makeResizable(){this.isResizable&&(this.#x(),this.#a.classList.remove("hidden"))}select(){this.makeResizable(),this.div?.classList.add("selectedEditor")}unselect(){this.#a?.classList.add("hidden"),this.div?.classList.remove("selectedEditor"),this.div?.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus()}updateParams(u,o){}disableEditing(){this.#n&&(this.#n.hidden=!0)}enableEditing(){this.#n&&(this.#n.hidden=!1)}enterInEditMode(){}get contentDiv(){return this.div}get isEditing(){return this.#f}set isEditing(u){this.#f=u,this.parent&&(u?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(u,o){this.#r=!0;const d=u/o,{style:b}=this.div;b.aspectRatio=d,b.height="auto"}static get MIN_SIZE(){return 16}}f.AnnotationEditor=N;class U extends N{constructor(u){super(u),this.annotationElementId=u.annotationElementId,this.deleted=!0}serialize(){return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex}}}}),((R,f,D)=>{Object.defineProperty(f,"__esModule",{value:!0}),f.KeyboardManager=f.CommandManager=f.ColorManager=f.AnnotationEditorUIManager=void 0,f.bindEvents=B,f.opacityToHex=N;var c=D(1),_=D(6);function B(g,h,E){for(const C of E)h.addEventListener(C,g[C].bind(g))}function N(g){return Math.round(Math.min(255,Math.max(1,255*g))).toString(16).padStart(2,"0")}class U{#t=0;getId(){return`${c.AnnotationEditorPrefix}${this.#t++}`}}class F{#t=(0,c.getUuid)();#e=0;#n=null;static get _isSVGFittingCanvas(){const h='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',C=new OffscreenCanvas(1,3).getContext("2d"),x=new Image;x.src=h;const I=x.decode().then(()=>(C.drawImage(x,0,0,1,1,0,0,1,3),new Uint32Array(C.getImageData(0,0,1,1).data.buffer)[0]===0));return(0,c.shadow)(this,"_isSVGFittingCanvas",I)}async#i(h,E){this.#n||=new Map;let C=this.#n.get(h);if(C===null)return null;if(C?.bitmap)return C.refCounter+=1,C;try{C||={bitmap:null,id:`image_${this.#t}_${this.#e++}`,refCounter:0,isSvg:!1};let x;if(typeof E=="string"){C.url=E;const I=await fetch(E);if(!I.ok)throw new Error(I.statusText);x=await I.blob()}else x=C.file=E;if(x.type==="image/svg+xml"){const I=F._isSVGFittingCanvas,Q=new FileReader,V=new Image,T=new Promise((L,$)=>{V.onload=()=>{C.bitmap=V,C.isSvg=!0,L()},Q.onload=async()=>{const rt=C.svgUrl=Q.result;V.src=await I?`${rt}#svgView(preserveAspectRatio(none))`:rt},V.onerror=Q.onerror=$});Q.readAsDataURL(x),await T}else C.bitmap=await createImageBitmap(x);C.refCounter=1}catch(x){console.error(x),C=null}return this.#n.set(h,C),C&&this.#n.set(C.id,C),C}async getFromFile(h){const{lastModified:E,name:C,size:x,type:I}=h;return this.#i(`${E}_${C}_${x}_${I}`,h)}async getFromUrl(h){return this.#i(h,h)}async getFromId(h){this.#n||=new Map;const E=this.#n.get(h);return E?E.bitmap?(E.refCounter+=1,E):E.file?this.getFromFile(E.file):this.getFromUrl(E.url):null}getSvgUrl(h){const E=this.#n.get(h);return E?.isSvg?E.svgUrl:null}deleteId(h){this.#n||=new Map;const E=this.#n.get(h);E&&(E.refCounter-=1,E.refCounter===0&&(E.bitmap=null))}isValidId(h){return h.startsWith(`image_${this.#t}_`)}}class u{#t=[];#e=!1;#n;#i=-1;constructor(h=128){this.#n=h}add({cmd:h,undo:E,mustExec:C,type:x=NaN,overwriteIfSameType:I=!1,keepUndo:Q=!1}){if(C&&h(),this.#e)return;const V={cmd:h,undo:E,type:x};if(this.#i===-1){this.#t.length>0&&(this.#t.length=0),this.#i=0,this.#t.push(V);return}if(I&&this.#t[this.#i].type===x){Q&&(V.undo=this.#t[this.#i].undo),this.#t[this.#i]=V;return}const T=this.#i+1;T===this.#n?this.#t.splice(0,1):(this.#i=T,T<this.#t.length&&this.#t.splice(T)),this.#t.push(V)}undo(){this.#i!==-1&&(this.#e=!0,this.#t[this.#i].undo(),this.#e=!1,this.#i-=1)}redo(){this.#i<this.#t.length-1&&(this.#i+=1,this.#e=!0,this.#t[this.#i].cmd(),this.#e=!1)}hasSomethingToUndo(){return this.#i!==-1}hasSomethingToRedo(){return this.#i<this.#t.length-1}destroy(){this.#t=null}}f.CommandManager=u;class o{constructor(h){this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:E}=c.FeatureTest.platform;for(const[C,x,I={}]of h)for(const Q of C){const V=Q.startsWith("mac+");E&&V?(this.callbacks.set(Q.slice(4),{callback:x,options:I}),this.allKeys.add(Q.split("+").at(-1))):!E&&!V&&(this.callbacks.set(Q,{callback:x,options:I}),this.allKeys.add(Q.split("+").at(-1)))}}#t(h){h.altKey&&this.buffer.push("alt"),h.ctrlKey&&this.buffer.push("ctrl"),h.metaKey&&this.buffer.push("meta"),h.shiftKey&&this.buffer.push("shift"),this.buffer.push(h.key);const E=this.buffer.join("+");return this.buffer.length=0,E}exec(h,E){if(!this.allKeys.has(E.key))return;const C=this.callbacks.get(this.#t(E));if(!C)return;const{callback:x,options:{bubbles:I=!1,args:Q=[],checker:V=null}}=C;V&&!V(h,E)||(x.bind(h,...Q)(),I||(E.stopPropagation(),E.preventDefault()))}}f.KeyboardManager=o;class d{static _colorsMapping=new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]);get _colors(){const h=new Map([["CanvasText",null],["Canvas",null]]);return(0,_.getColorValues)(h),(0,c.shadow)(this,"_colors",h)}convert(h){const E=(0,_.getRGB)(h);if(!window.matchMedia("(forced-colors: active)").matches)return E;for(const[C,x]of this._colors)if(x.every((I,Q)=>I===E[Q]))return d._colorsMapping.get(C);return E}getHexCode(h){const E=this._colors.get(h);return E?c.Util.makeHexColor(...E):h}}f.ColorManager=d;class b{#t=null;#e=new Map;#n=new Map;#i=null;#o=null;#r=new u;#a=0;#l=new Set;#c=null;#s=null;#f=new Set;#d=null;#h=new U;#p=!1;#y=!1;#g=null;#m=c.AnnotationEditorType.NONE;#u=new Set;#x=null;#A=this.blur.bind(this);#E=this.focus.bind(this);#R=this.copy.bind(this);#j=this.cut.bind(this);#O=this.paste.bind(this);#L=this.keydown.bind(this);#P=this.onEditingAction.bind(this);#v=this.onPageChanging.bind(this);#D=this.onScaleChanging.bind(this);#C=this.onRotationChanging.bind(this);#M={isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1};#b=[0,0];#T=null;#S=null;#F=null;static TRANSLATE_SMALL=1;static TRANSLATE_BIG=10;static get _keyboardManager(){const h=b.prototype,E=I=>{const{activeElement:Q}=document;return Q&&I.#S.contains(Q)&&I.hasSomethingToControl()},C=this.TRANSLATE_SMALL,x=this.TRANSLATE_BIG;return(0,c.shadow)(this,"_keyboardManager",new o([[["ctrl+a","mac+meta+a"],h.selectAll],[["ctrl+z","mac+meta+z"],h.undo],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],h.redo],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],h.delete],[["Escape","mac+Escape"],h.unselectAll],[["ArrowLeft","mac+ArrowLeft"],h.translateSelectedEditors,{args:[-C,0],checker:E}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],h.translateSelectedEditors,{args:[-x,0],checker:E}],[["ArrowRight","mac+ArrowRight"],h.translateSelectedEditors,{args:[C,0],checker:E}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],h.translateSelectedEditors,{args:[x,0],checker:E}],[["ArrowUp","mac+ArrowUp"],h.translateSelectedEditors,{args:[0,-C],checker:E}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],h.translateSelectedEditors,{args:[0,-x],checker:E}],[["ArrowDown","mac+ArrowDown"],h.translateSelectedEditors,{args:[0,C],checker:E}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],h.translateSelectedEditors,{args:[0,x],checker:E}]]))}constructor(h,E,C,x,I,Q){this.#S=h,this.#F=E,this.#i=C,this._eventBus=x,this._eventBus._on("editingaction",this.#P),this._eventBus._on("pagechanging",this.#v),this._eventBus._on("scalechanging",this.#D),this._eventBus._on("rotationchanging",this.#C),this.#o=I.annotationStorage,this.#d=I.filterFactory,this.#x=Q,this.viewParameters={realScale:_.PixelsPerInch.PDF_TO_CSS_UNITS,rotation:0}}destroy(){this.#k(),this.#B(),this._eventBus._off("editingaction",this.#P),this._eventBus._off("pagechanging",this.#v),this._eventBus._off("scalechanging",this.#D),this._eventBus._off("rotationchanging",this.#C);for(const h of this.#n.values())h.destroy();this.#n.clear(),this.#e.clear(),this.#f.clear(),this.#t=null,this.#u.clear(),this.#r.destroy(),this.#i.destroy()}get hcmFilter(){return(0,c.shadow)(this,"hcmFilter",this.#x?this.#d.addHCMFilter(this.#x.foreground,this.#x.background):"none")}get direction(){return(0,c.shadow)(this,"direction",getComputedStyle(this.#S).direction)}editAltText(h){this.#i?.editAltText(this,h)}onPageChanging({pageNumber:h}){this.#a=h-1}focusMainContainer(){this.#S.focus()}findParent(h,E){for(const C of this.#n.values()){const{x,y:I,width:Q,height:V}=C.div.getBoundingClientRect();if(h>=x&&h<=x+Q&&E>=I&&E<=I+V)return C}return null}disableUserSelect(h=!1){this.#F.classList.toggle("noUserSelect",h)}addShouldRescale(h){this.#f.add(h)}removeShouldRescale(h){this.#f.delete(h)}onScaleChanging({scale:h}){this.commitOrRemove(),this.viewParameters.realScale=h*_.PixelsPerInch.PDF_TO_CSS_UNITS;for(const E of this.#f)E.onScaleChanging()}onRotationChanging({pagesRotation:h}){this.commitOrRemove(),this.viewParameters.rotation=h}addToAnnotationStorage(h){!h.isEmpty()&&this.#o&&!this.#o.has(h.id)&&this.#o.setValue(h.id,h)}#z(){window.addEventListener("focus",this.#E),window.addEventListener("blur",this.#A)}#B(){window.removeEventListener("focus",this.#E),window.removeEventListener("blur",this.#A)}blur(){if(!this.hasSelection)return;const{activeElement:h}=document;for(const E of this.#u)if(E.div.contains(h)){this.#g=[E,h],E._focusEventsAllowed=!1;break}}focus(){if(!this.#g)return;const[h,E]=this.#g;this.#g=null,E.addEventListener("focusin",()=>{h._focusEventsAllowed=!0},{once:!0}),E.focus()}#I(){window.addEventListener("keydown",this.#L,{capture:!0})}#k(){window.removeEventListener("keydown",this.#L,{capture:!0})}#N(){document.addEventListener("copy",this.#R),document.addEventListener("cut",this.#j),document.addEventListener("paste",this.#O)}#w(){document.removeEventListener("copy",this.#R),document.removeEventListener("cut",this.#j),document.removeEventListener("paste",this.#O)}addEditListeners(){this.#I(),this.#N()}removeEditListeners(){this.#k(),this.#w()}copy(h){if(h.preventDefault(),this.#t?.commitOrRemove(),!this.hasSelection)return;const E=[];for(const C of this.#u){const x=C.serialize(!0);x&&E.push(x)}E.length!==0&&h.clipboardData.setData("application/pdfjs",JSON.stringify(E))}cut(h){this.copy(h),this.delete()}paste(h){h.preventDefault();const{clipboardData:E}=h;for(const I of E.items)for(const Q of this.#s)if(Q.isHandlingMimeForPasting(I.type)){Q.paste(I,this.currentLayer);return}let C=E.getData("application/pdfjs");if(!C)return;try{C=JSON.parse(C)}catch(I){(0,c.warn)(`paste: "${I.message}".`);return}if(!Array.isArray(C))return;this.unselectAll();const x=this.currentLayer;try{const I=[];for(const T of C){const L=x.deserialize(T);if(!L)return;I.push(L)}const Q=()=>{for(const T of I)this.#H(T);this.#G(I)},V=()=>{for(const T of I)T.remove()};this.addCommands({cmd:Q,undo:V,mustExec:!0})}catch(I){(0,c.warn)(`paste: "${I.message}".`)}}keydown(h){this.getActive()?.shouldGetKeyboardEvents()||b._keyboardManager.exec(this,h)}onEditingAction(h){["undo","redo","delete","selectAll"].includes(h.name)&&this[h.name]()}#_(h){Object.entries(h).some(([C,x])=>this.#M[C]!==x)&&this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(this.#M,h)})}#U(h){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:h})}setEditingState(h){h?(this.#z(),this.#I(),this.#N(),this.#_({isEditing:this.#m!==c.AnnotationEditorType.NONE,isEmpty:this.#q(),hasSomethingToUndo:this.#r.hasSomethingToUndo(),hasSomethingToRedo:this.#r.hasSomethingToRedo(),hasSelectedEditor:!1})):(this.#B(),this.#k(),this.#w(),this.#_({isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(h){if(!this.#s){this.#s=h;for(const E of this.#s)this.#U(E.defaultPropertiesToUpdate)}}getId(){return this.#h.getId()}get currentLayer(){return this.#n.get(this.#a)}getLayer(h){return this.#n.get(h)}get currentPageIndex(){return this.#a}addLayer(h){this.#n.set(h.pageIndex,h),this.#p?h.enable():h.disable()}removeLayer(h){this.#n.delete(h.pageIndex)}updateMode(h,E=null){if(this.#m!==h){if(this.#m=h,h===c.AnnotationEditorType.NONE){this.setEditingState(!1),this.#K();return}this.setEditingState(!0),this.#X(),this.unselectAll();for(const C of this.#n.values())C.updateMode(h);if(E){for(const C of this.#e.values())if(C.annotationElementId===E){this.setSelected(C),C.enterInEditMode();break}}}}updateToolbar(h){h!==this.#m&&this._eventBus.dispatch("switchannotationeditormode",{source:this,mode:h})}updateParams(h,E){if(this.#s){if(h===c.AnnotationEditorParamsType.CREATE){this.currentLayer.addNewEditor(h);return}for(const C of this.#u)C.updateParams(h,E);for(const C of this.#s)C.updateDefaultParams(h,E)}}enableWaiting(h=!1){if(this.#y!==h){this.#y=h;for(const E of this.#n.values())h?E.disableClick():E.enableClick(),E.div.classList.toggle("waiting",h)}}#X(){if(!this.#p){this.#p=!0;for(const h of this.#n.values())h.enable()}}#K(){if(this.unselectAll(),this.#p){this.#p=!1;for(const h of this.#n.values())h.disable()}}getEditors(h){const E=[];for(const C of this.#e.values())C.pageIndex===h&&E.push(C);return E}getEditor(h){return this.#e.get(h)}addEditor(h){this.#e.set(h.id,h)}removeEditor(h){this.#e.delete(h.id),this.unselect(h),(!h.annotationElementId||!this.#l.has(h.annotationElementId))&&this.#o?.remove(h.id)}addDeletedAnnotationElement(h){this.#l.add(h.annotationElementId),h.deleted=!0}isDeletedAnnotationElement(h){return this.#l.has(h)}removeDeletedAnnotationElement(h){this.#l.delete(h.annotationElementId),h.deleted=!1}#H(h){const E=this.#n.get(h.pageIndex);E?E.addOrRebuild(h):this.addEditor(h)}setActiveEditor(h){this.#t!==h&&(this.#t=h,h&&this.#U(h.propertiesToUpdate))}toggleSelected(h){if(this.#u.has(h)){this.#u.delete(h),h.unselect(),this.#_({hasSelectedEditor:this.hasSelection});return}this.#u.add(h),h.select(),this.#U(h.propertiesToUpdate),this.#_({hasSelectedEditor:!0})}setSelected(h){for(const E of this.#u)E!==h&&E.unselect();this.#u.clear(),this.#u.add(h),h.select(),this.#U(h.propertiesToUpdate),this.#_({hasSelectedEditor:!0})}isSelected(h){return this.#u.has(h)}unselect(h){h.unselect(),this.#u.delete(h),this.#_({hasSelectedEditor:this.hasSelection})}get hasSelection(){return this.#u.size!==0}undo(){this.#r.undo(),this.#_({hasSomethingToUndo:this.#r.hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:this.#q()})}redo(){this.#r.redo(),this.#_({hasSomethingToUndo:!0,hasSomethingToRedo:this.#r.hasSomethingToRedo(),isEmpty:this.#q()})}addCommands(h){this.#r.add(h),this.#_({hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:this.#q()})}#q(){if(this.#e.size===0)return!0;if(this.#e.size===1)for(const h of this.#e.values())return h.isEmpty();return!1}delete(){if(this.commitOrRemove(),!this.hasSelection)return;const h=[...this.#u],E=()=>{for(const x of h)x.remove()},C=()=>{for(const x of h)this.#H(x)};this.addCommands({cmd:E,undo:C,mustExec:!0})}commitOrRemove(){this.#t?.commitOrRemove()}hasSomethingToControl(){return this.#t||this.hasSelection}#G(h){this.#u.clear();for(const E of h)E.isEmpty()||(this.#u.add(E),E.select());this.#_({hasSelectedEditor:!0})}selectAll(){for(const h of this.#u)h.commit();this.#G(this.#e.values())}unselectAll(){if(this.#t){this.#t.commitOrRemove();return}if(this.hasSelection){for(const h of this.#u)h.unselect();this.#u.clear(),this.#_({hasSelectedEditor:!1})}}translateSelectedEditors(h,E,C=!1){if(C||this.commitOrRemove(),!this.hasSelection)return;this.#b[0]+=h,this.#b[1]+=E;const[x,I]=this.#b,Q=[...this.#u],V=1e3;this.#T&&clearTimeout(this.#T),this.#T=setTimeout(()=>{this.#T=null,this.#b[0]=this.#b[1]=0,this.addCommands({cmd:()=>{for(const T of Q)this.#e.has(T.id)&&T.translateInPage(x,I)},undo:()=>{for(const T of Q)this.#e.has(T.id)&&T.translateInPage(-x,-I)},mustExec:!1})},V);for(const T of Q)T.translateInPage(h,E)}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),this.#c=new Map;for(const h of this.#u)this.#c.set(h,{savedX:h.x,savedY:h.y,savedPageIndex:h.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!this.#c)return!1;this.disableUserSelect(!1);const h=this.#c;this.#c=null;let E=!1;for(const[{x,y:I,pageIndex:Q},V]of h)V.newX=x,V.newY=I,V.newPageIndex=Q,E||=x!==V.savedX||I!==V.savedY||Q!==V.savedPageIndex;if(!E)return!1;const C=(x,I,Q,V)=>{if(this.#e.has(x.id)){const T=this.#n.get(V);T?x._setParentAndPosition(T,I,Q):(x.pageIndex=V,x.x=I,x.y=Q)}};return this.addCommands({cmd:()=>{for(const[x,{newX:I,newY:Q,newPageIndex:V}]of h)C(x,I,Q,V)},undo:()=>{for(const[x,{savedX:I,savedY:Q,savedPageIndex:V}]of h)C(x,I,Q,V)},mustExec:!0}),!0}dragSelectedEditors(h,E){if(this.#c)for(const C of this.#c.keys())C.drag(h,E)}rebuild(h){if(h.parent===null){const E=this.getLayer(h.pageIndex);E?(E.changeParent(h),E.addOrRebuild(h)):(this.addEditor(h),this.addToAnnotationStorage(h),h.rebuild())}else h.parent.addOrRebuild(h)}isActive(h){return this.#t===h}getActive(){return this.#t}getMode(){return this.#m}get imageManager(){return(0,c.shadow)(this,"imageManager",new F)}}f.AnnotationEditorUIManager=b}),((R,f,D)=>{Object.defineProperty(f,"__esModule",{value:!0}),f.StatTimer=f.RenderingCancelledException=f.PixelsPerInch=f.PageViewport=f.PDFDateString=f.DOMStandardFontDataFactory=f.DOMSVGFactory=f.DOMFilterFactory=f.DOMCanvasFactory=f.DOMCMapReaderFactory=void 0,f.deprecated=$,f.getColorValues=kt,f.getCurrentTransform=At,f.getCurrentTransformInverse=Ft,f.getFilenameFromUrl=x,f.getPdfFilenameFromUrl=I,f.getRGB=gt,f.getXfaPageViewport=yt,f.isDataScheme=E,f.isPdfFile=C,f.isValidFetchUrl=V,f.loadScript=L,f.noContextMenu=T,f.setLayerDimensions=Xt;var c=D(7),_=D(1);const B="http://www.w3.org/2000/svg";class N{static CSS=96;static PDF=72;static PDF_TO_CSS_UNITS=this.CSS/this.PDF}f.PixelsPerInch=N;class U extends c.BaseFilterFactory{#t;#e;#n;#i;#o;#r;#a;#l;#c;#s;#f=0;constructor({docId:Y,ownerDocument:k=globalThis.document}={}){super(),this.#n=Y,this.#i=k}get#d(){return this.#t||=new Map}get#h(){if(!this.#e){const Y=this.#i.createElement("div"),{style:k}=Y;k.visibility="hidden",k.contain="strict",k.width=k.height=0,k.position="absolute",k.top=k.left=0,k.zIndex=-1;const S=this.#i.createElementNS(B,"svg");S.setAttribute("width",0),S.setAttribute("height",0),this.#e=this.#i.createElementNS(B,"defs"),Y.append(S),S.append(this.#e),this.#i.body.append(Y)}return this.#e}addFilter(Y){if(!Y)return"none";let k=this.#d.get(Y);if(k)return k;let S,w,y,O;if(Y.length===1){const m=Y[0],M=new Array(256);for(let z=0;z<256;z++)M[z]=m[z]/255;O=S=w=y=M.join(",")}else{const[m,M,z]=Y,W=new Array(256),G=new Array(256),it=new Array(256);for(let at=0;at<256;at++)W[at]=m[at]/255,G[at]=M[at]/255,it[at]=z[at]/255;S=W.join(","),w=G.join(","),y=it.join(","),O=`${S}${w}${y}`}if(k=this.#d.get(O),k)return this.#d.set(Y,k),k;const H=`g_${this.#n}_transfer_map_${this.#f++}`,J=`url(#${H})`;this.#d.set(Y,J),this.#d.set(O,J);const K=this.#y(H);return this.#m(S,w,y,K),J}addHCMFilter(Y,k){const S=`${Y}-${k}`;if(this.#r===S)return this.#a;if(this.#r=S,this.#a="none",this.#o?.remove(),!Y||!k)return this.#a;const w=this.#u(Y);Y=_.Util.makeHexColor(...w);const y=this.#u(k);if(k=_.Util.makeHexColor(...y),this.#h.style.color="",Y==="#000000"&&k==="#ffffff"||Y===k)return this.#a;const O=new Array(256);for(let M=0;M<=255;M++){const z=M/255;O[M]=z<=.03928?z/12.92:((z+.055)/1.055)**2.4}const H=O.join(","),J=`g_${this.#n}_hcm_filter`,K=this.#l=this.#y(J);this.#m(H,H,H,K),this.#p(K);const m=(M,z)=>{const W=w[M]/255,G=y[M]/255,it=new Array(z+1);for(let at=0;at<=z;at++)it[at]=W+at/z*(G-W);return it.join(",")};return this.#m(m(0,5),m(1,5),m(2,5),K),this.#a=`url(#${J})`,this.#a}addHighlightHCMFilter(Y,k,S,w){const y=`${Y}-${k}-${S}-${w}`;if(this.#c===y)return this.#s;if(this.#c=y,this.#s="none",this.#l?.remove(),!Y||!k)return this.#s;const[O,H]=[Y,k].map(this.#u.bind(this));let J=Math.round(.2126*O[0]+.7152*O[1]+.0722*O[2]),K=Math.round(.2126*H[0]+.7152*H[1]+.0722*H[2]),[m,M]=[S,w].map(this.#u.bind(this));K<J&&([J,K,m,M]=[K,J,M,m]),this.#h.style.color="";const z=(it,at,jt)=>{const Yt=new Array(256),Rt=(K-J)/jt,Nt=it/255,Pt=(at-it)/(255*jt);let Lt=0;for(let Ut=0;Ut<=jt;Ut++){const Qt=Math.round(J+Ut*Rt),$t=Nt+Ut*Pt;for(let se=Lt;se<=Qt;se++)Yt[se]=$t;Lt=Qt+1}for(let Ut=Lt;Ut<256;Ut++)Yt[Ut]=Yt[Lt-1];return Yt.join(",")},W=`g_${this.#n}_hcm_highlight_filter`,G=this.#l=this.#y(W);return this.#p(G),this.#m(z(m[0],M[0],5),z(m[1],M[1],5),z(m[2],M[2],5),G),this.#s=`url(#${W})`,this.#s}destroy(Y=!1){Y&&(this.#a||this.#s)||(this.#e&&(this.#e.parentNode.parentNode.remove(),this.#e=null),this.#t&&(this.#t.clear(),this.#t=null),this.#f=0)}#p(Y){const k=this.#i.createElementNS(B,"feColorMatrix");k.setAttribute("type","matrix"),k.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),Y.append(k)}#y(Y){const k=this.#i.createElementNS(B,"filter");return k.setAttribute("color-interpolation-filters","sRGB"),k.setAttribute("id",Y),this.#h.append(k),k}#g(Y,k,S){const w=this.#i.createElementNS(B,k);w.setAttribute("type","discrete"),w.setAttribute("tableValues",S),Y.append(w)}#m(Y,k,S,w){const y=this.#i.createElementNS(B,"feComponentTransfer");w.append(y),this.#g(y,"feFuncR",Y),this.#g(y,"feFuncG",k),this.#g(y,"feFuncB",S)}#u(Y){return this.#h.style.color=Y,gt(getComputedStyle(this.#h).getPropertyValue("color"))}}f.DOMFilterFactory=U;class F extends c.BaseCanvasFactory{constructor({ownerDocument:Y=globalThis.document}={}){super(),this._document=Y}_createCanvas(Y,k){const S=this._document.createElement("canvas");return S.width=Y,S.height=k,S}}f.DOMCanvasFactory=F;async function u(nt,Y=!1){if(V(nt,document.baseURI)){const k=await fetch(nt);if(!k.ok)throw new Error(k.statusText);return Y?new Uint8Array(await k.arrayBuffer()):(0,_.stringToBytes)(await k.text())}return new Promise((k,S)=>{const w=new XMLHttpRequest;w.open("GET",nt,!0),Y&&(w.responseType="arraybuffer"),w.onreadystatechange=()=>{if(w.readyState===XMLHttpRequest.DONE){if(w.status===200||w.status===0){let y;if(Y&&w.response?y=new Uint8Array(w.response):!Y&&w.responseText&&(y=(0,_.stringToBytes)(w.responseText)),y){k(y);return}}S(new Error(w.statusText))}},w.send(null)})}class o extends c.BaseCMapReaderFactory{_fetchData(Y,k){return u(Y,this.isCompressed).then(S=>({cMapData:S,compressionType:k}))}}f.DOMCMapReaderFactory=o;class d extends c.BaseStandardFontDataFactory{_fetchData(Y){return u(Y,!0)}}f.DOMStandardFontDataFactory=d;class b extends c.BaseSVGFactory{_createSVG(Y){return document.createElementNS(B,Y)}}f.DOMSVGFactory=b;class g{constructor({viewBox:Y,scale:k,rotation:S,offsetX:w=0,offsetY:y=0,dontFlip:O=!1}){this.viewBox=Y,this.scale=k,this.rotation=S,this.offsetX=w,this.offsetY=y;const H=(Y[2]+Y[0])/2,J=(Y[3]+Y[1])/2;let K,m,M,z;switch(S%=360,S<0&&(S+=360),S){case 180:K=-1,m=0,M=0,z=1;break;case 90:K=0,m=1,M=1,z=0;break;case 270:K=0,m=-1,M=-1,z=0;break;case 0:K=1,m=0,M=0,z=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}O&&(M=-M,z=-z);let W,G,it,at;K===0?(W=Math.abs(J-Y[1])*k+w,G=Math.abs(H-Y[0])*k+y,it=(Y[3]-Y[1])*k,at=(Y[2]-Y[0])*k):(W=Math.abs(H-Y[0])*k+w,G=Math.abs(J-Y[1])*k+y,it=(Y[2]-Y[0])*k,at=(Y[3]-Y[1])*k),this.transform=[K*k,m*k,M*k,z*k,W-K*k*H-M*k*J,G-m*k*H-z*k*J],this.width=it,this.height=at}get rawDims(){const{viewBox:Y}=this;return(0,_.shadow)(this,"rawDims",{pageWidth:Y[2]-Y[0],pageHeight:Y[3]-Y[1],pageX:Y[0],pageY:Y[1]})}clone({scale:Y=this.scale,rotation:k=this.rotation,offsetX:S=this.offsetX,offsetY:w=this.offsetY,dontFlip:y=!1}={}){return new g({viewBox:this.viewBox.slice(),scale:Y,rotation:k,offsetX:S,offsetY:w,dontFlip:y})}convertToViewportPoint(Y,k){return _.Util.applyTransform([Y,k],this.transform)}convertToViewportRectangle(Y){const k=_.Util.applyTransform([Y[0],Y[1]],this.transform),S=_.Util.applyTransform([Y[2],Y[3]],this.transform);return[k[0],k[1],S[0],S[1]]}convertToPdfPoint(Y,k){return _.Util.applyInverseTransform([Y,k],this.transform)}}f.PageViewport=g;class h extends _.BaseException{constructor(Y,k=0){super(Y,"RenderingCancelledException"),this.extraDelay=k}}f.RenderingCancelledException=h;function E(nt){const Y=nt.length;let k=0;for(;k<Y&&nt[k].trim()==="";)k++;return nt.substring(k,k+5).toLowerCase()==="data:"}function C(nt){return typeof nt=="string"&&/\.pdf$/i.test(nt)}function x(nt,Y=!1){return Y||([nt]=nt.split(/[#?]/,1)),nt.substring(nt.lastIndexOf("/")+1)}function I(nt,Y="document.pdf"){if(typeof nt!="string")return Y;if(E(nt))return(0,_.warn)('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),Y;const k=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,S=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,w=k.exec(nt);let y=S.exec(w[1])||S.exec(w[2])||S.exec(w[3]);if(y&&(y=y[0],y.includes("%")))try{y=S.exec(decodeURIComponent(y))[0]}catch{}return y||Y}class Q{started=Object.create(null);times=[];time(Y){Y in this.started&&(0,_.warn)(`Timer is already running for ${Y}`),this.started[Y]=Date.now()}timeEnd(Y){Y in this.started||(0,_.warn)(`Timer has not been started for ${Y}`),this.times.push({name:Y,start:this.started[Y],end:Date.now()}),delete this.started[Y]}toString(){const Y=[];let k=0;for(const{name:S}of this.times)k=Math.max(S.length,k);for(const{name:S,start:w,end:y}of this.times)Y.push(`${S.padEnd(k)} ${y-w}ms
`);return Y.join("")}}f.StatTimer=Q;function V(nt,Y){try{const{protocol:k}=Y?new URL(nt,Y):new URL(nt);return k==="http:"||k==="https:"}catch{return!1}}function T(nt){nt.preventDefault()}function L(nt,Y=!1){return new Promise((k,S)=>{const w=document.createElement("script");w.src=nt,w.onload=function(y){Y&&w.remove(),k(y)},w.onerror=function(){S(new Error(`Cannot load script at: ${w.src}`))},(document.head||document.documentElement).append(w)})}function $(nt){console.log("Deprecated API usage: "+nt)}let rt;class et{static toDateObject(Y){if(!Y||typeof Y!="string")return null;rt||=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?");const k=rt.exec(Y);if(!k)return null;const S=parseInt(k[1],10);let w=parseInt(k[2],10);w=w>=1&&w<=12?w-1:0;let y=parseInt(k[3],10);y=y>=1&&y<=31?y:1;let O=parseInt(k[4],10);O=O>=0&&O<=23?O:0;let H=parseInt(k[5],10);H=H>=0&&H<=59?H:0;let J=parseInt(k[6],10);J=J>=0&&J<=59?J:0;const K=k[7]||"Z";let m=parseInt(k[8],10);m=m>=0&&m<=23?m:0;let M=parseInt(k[9],10)||0;return M=M>=0&&M<=59?M:0,K==="-"?(O+=m,H+=M):K==="+"&&(O-=m,H-=M),new Date(Date.UTC(S,w,y,O,H,J))}}f.PDFDateString=et;function yt(nt,{scale:Y=1,rotation:k=0}){const{width:S,height:w}=nt.attributes.style,y=[0,0,parseInt(S),parseInt(w)];return new g({viewBox:y,scale:Y,rotation:k})}function gt(nt){if(nt.startsWith("#")){const Y=parseInt(nt.slice(1),16);return[(Y&16711680)>>16,(Y&65280)>>8,Y&255]}return nt.startsWith("rgb(")?nt.slice(4,-1).split(",").map(Y=>parseInt(Y)):nt.startsWith("rgba(")?nt.slice(5,-1).split(",").map(Y=>parseInt(Y)).slice(0,3):((0,_.warn)(`Not a valid color format: "${nt}"`),[0,0,0])}function kt(nt){const Y=document.createElement("span");Y.style.visibility="hidden",document.body.append(Y);for(const k of nt.keys()){Y.style.color=k;const S=window.getComputedStyle(Y).color;nt.set(k,gt(S))}Y.remove()}function At(nt){const{a:Y,b:k,c:S,d:w,e:y,f:O}=nt.getTransform();return[Y,k,S,w,y,O]}function Ft(nt){const{a:Y,b:k,c:S,d:w,e:y,f:O}=nt.getTransform().invertSelf();return[Y,k,S,w,y,O]}function Xt(nt,Y,k=!1,S=!0){if(Y instanceof g){const{pageWidth:w,pageHeight:y}=Y.rawDims,{style:O}=nt,H=_.FeatureTest.isCSSRoundSupported,J=`var(--scale-factor) * ${w}px`,K=`var(--scale-factor) * ${y}px`,m=H?`round(${J}, 1px)`:`calc(${J})`,M=H?`round(${K}, 1px)`:`calc(${K})`;!k||Y.rotation%180===0?(O.width=m,O.height=M):(O.width=M,O.height=m)}S&&nt.setAttribute("data-main-rotation",Y.rotation)}}),((R,f,D)=>{Object.defineProperty(f,"__esModule",{value:!0}),f.BaseStandardFontDataFactory=f.BaseSVGFactory=f.BaseFilterFactory=f.BaseCanvasFactory=f.BaseCMapReaderFactory=void 0;var c=D(1);class _{constructor(){this.constructor===_&&(0,c.unreachable)("Cannot initialize BaseFilterFactory.")}addFilter(o){return"none"}addHCMFilter(o,d){return"none"}addHighlightHCMFilter(o,d,b,g){return"none"}destroy(o=!1){}}f.BaseFilterFactory=_;class B{constructor(){this.constructor===B&&(0,c.unreachable)("Cannot initialize BaseCanvasFactory.")}create(o,d){if(o<=0||d<=0)throw new Error("Invalid canvas size");const b=this._createCanvas(o,d);return{canvas:b,context:b.getContext("2d")}}reset(o,d,b){if(!o.canvas)throw new Error("Canvas is not specified");if(d<=0||b<=0)throw new Error("Invalid canvas size");o.canvas.width=d,o.canvas.height=b}destroy(o){if(!o.canvas)throw new Error("Canvas is not specified");o.canvas.width=0,o.canvas.height=0,o.canvas=null,o.context=null}_createCanvas(o,d){(0,c.unreachable)("Abstract method `_createCanvas` called.")}}f.BaseCanvasFactory=B;class N{constructor({baseUrl:o=null,isCompressed:d=!0}){this.constructor===N&&(0,c.unreachable)("Cannot initialize BaseCMapReaderFactory."),this.baseUrl=o,this.isCompressed=d}async fetch({name:o}){if(!this.baseUrl)throw new Error('The CMap "baseUrl" parameter must be specified, ensure that the "cMapUrl" and "cMapPacked" API parameters are provided.');if(!o)throw new Error("CMap name must be specified.");const d=this.baseUrl+o+(this.isCompressed?".bcmap":""),b=this.isCompressed?c.CMapCompressionType.BINARY:c.CMapCompressionType.NONE;return this._fetchData(d,b).catch(g=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${d}`)})}_fetchData(o,d){(0,c.unreachable)("Abstract method `_fetchData` called.")}}f.BaseCMapReaderFactory=N;class U{constructor({baseUrl:o=null}){this.constructor===U&&(0,c.unreachable)("Cannot initialize BaseStandardFontDataFactory."),this.baseUrl=o}async fetch({filename:o}){if(!this.baseUrl)throw new Error('The standard font "baseUrl" parameter must be specified, ensure that the "standardFontDataUrl" API parameter is provided.');if(!o)throw new Error("Font filename must be specified.");const d=`${this.baseUrl}${o}`;return this._fetchData(d).catch(b=>{throw new Error(`Unable to load font data at: ${d}`)})}_fetchData(o){(0,c.unreachable)("Abstract method `_fetchData` called.")}}f.BaseStandardFontDataFactory=U;class F{constructor(){this.constructor===F&&(0,c.unreachable)("Cannot initialize BaseSVGFactory.")}create(o,d,b=!1){if(o<=0||d<=0)throw new Error("Invalid SVG dimensions");const g=this._createSVG("svg:svg");return g.setAttribute("version","1.1"),b||(g.setAttribute("width",`${o}px`),g.setAttribute("height",`${d}px`)),g.setAttribute("preserveAspectRatio","none"),g.setAttribute("viewBox",`0 0 ${o} ${d}`),g}createElement(o){if(typeof o!="string")throw new Error("Invalid SVG element type");return this._createSVG(o)}_createSVG(o){(0,c.unreachable)("Abstract method `_createSVG` called.")}}f.BaseSVGFactory=F}),((R,f,D)=>{Object.defineProperty(f,"__esModule",{value:!0}),f.MurmurHash3_64=void 0;var c=D(1);const _=3285377520,B=4294901760,N=65535;class U{constructor(u){this.h1=u?u&4294967295:_,this.h2=u?u&4294967295:_}update(u){let o,d;if(typeof u=="string"){o=new Uint8Array(u.length*2),d=0;for(let $=0,rt=u.length;$<rt;$++){const et=u.charCodeAt($);et<=255?o[d++]=et:(o[d++]=et>>>8,o[d++]=et&255)}}else if((0,c.isArrayBuffer)(u))o=u.slice(),d=o.byteLength;else throw new Error("Wrong data format in MurmurHash3_64_update. Input must be a string or array.");const b=d>>2,g=d-b*4,h=new Uint32Array(o.buffer,0,b);let E=0,C=0,x=this.h1,I=this.h2;const Q=3432918353,V=461845907,T=Q&N,L=V&N;for(let $=0;$<b;$++)$&1?(E=h[$],E=E*Q&B|E*T&N,E=E<<15|E>>>17,E=E*V&B|E*L&N,x^=E,x=x<<13|x>>>19,x=x*5+3864292196):(C=h[$],C=C*Q&B|C*T&N,C=C<<15|C>>>17,C=C*V&B|C*L&N,I^=C,I=I<<13|I>>>19,I=I*5+3864292196);switch(E=0,g){case 3:E^=o[b*4+2]<<16;case 2:E^=o[b*4+1]<<8;case 1:E^=o[b*4],E=E*Q&B|E*T&N,E=E<<15|E>>>17,E=E*V&B|E*L&N,b&1?x^=E:I^=E}this.h1=x,this.h2=I}hexdigest(){let u=this.h1,o=this.h2;return u^=o>>>1,u=u*3981806797&B|u*36045&N,o=o*4283543511&B|((o<<16|u>>>16)*2950163797&B)>>>16,u^=o>>>1,u=u*444984403&B|u*60499&N,o=o*3301882366&B|((o<<16|u>>>16)*3120437893&B)>>>16,u^=o>>>1,(u>>>0).toString(16).padStart(8,"0")+(o>>>0).toString(16).padStart(8,"0")}}f.MurmurHash3_64=U}),((R,f,D)=>{Object.defineProperty(f,"__esModule",{value:!0}),f.FontLoader=f.FontFaceObject=void 0;var c=D(1);class _{#t=new Set;constructor({ownerDocument:U=globalThis.document,styleElement:F=null}){this._document=U,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(U){this.nativeFontFaces.add(U),this._document.fonts.add(U)}removeNativeFontFace(U){this.nativeFontFaces.delete(U),this._document.fonts.delete(U)}insertRule(U){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const F=this.styleElement.sheet;F.insertRule(U,F.cssRules.length)}clear(){for(const U of this.nativeFontFaces)this._document.fonts.delete(U);this.nativeFontFaces.clear(),this.#t.clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont(U){if(!(!U||this.#t.has(U.loadedName))){if((0,c.assert)(!this.disableFontFace,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:F,src:u,style:o}=U,d=new FontFace(F,u,o);this.addNativeFontFace(d);try{await d.load(),this.#t.add(F)}catch{(0,c.warn)(`Cannot load system font: ${U.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(d)}return}(0,c.unreachable)("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(U){if(U.attached||U.missingFile&&!U.systemFontInfo)return;if(U.attached=!0,U.systemFontInfo){await this.loadSystemFont(U.systemFontInfo);return}if(this.isFontLoadingAPISupported){const u=U.createNativeFontFace();if(u){this.addNativeFontFace(u);try{await u.loaded}catch(o){throw(0,c.warn)(`Failed to load font '${u.family}': '${o}'.`),U.disableFontFace=!0,o}}return}const F=U.createFontFaceRule();if(F){if(this.insertRule(F),this.isSyncFontLoadingSupported)return;await new Promise(u=>{const o=this._queueLoadingCallback(u);this._prepareFontLoadEvent(U,o)})}}get isFontLoadingAPISupported(){const U=!!this._document?.fonts;return(0,c.shadow)(this,"isFontLoadingAPISupported",U)}get isSyncFontLoadingSupported(){let U=!1;return(c.isNodeJS||typeof navigator<"u"&&/Mozilla\/5.0.*?rv:\d+.*? Gecko/.test(navigator.userAgent))&&(U=!0),(0,c.shadow)(this,"isSyncFontLoadingSupported",U)}_queueLoadingCallback(U){function F(){for((0,c.assert)(!o.done,"completeRequest() cannot be called twice."),o.done=!0;u.length>0&&u[0].done;){const d=u.shift();setTimeout(d.callback,0)}}const{loadingRequests:u}=this,o={done:!1,complete:F,callback:U};return u.push(o),o}get _loadTestFont(){const U=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return(0,c.shadow)(this,"_loadTestFont",U)}_prepareFontLoadEvent(U,F){function u(yt,gt){return yt.charCodeAt(gt)<<24|yt.charCodeAt(gt+1)<<16|yt.charCodeAt(gt+2)<<8|yt.charCodeAt(gt+3)&255}function o(yt,gt,kt,At){const Ft=yt.substring(0,gt),Xt=yt.substring(gt+kt);return Ft+At+Xt}let d,b;const g=this._document.createElement("canvas");g.width=1,g.height=1;const h=g.getContext("2d");let E=0;function C(yt,gt){if(++E>30){(0,c.warn)("Load test font never loaded."),gt();return}if(h.font="30px "+yt,h.fillText(".",0,20),h.getImageData(0,0,1,1).data[3]>0){gt();return}setTimeout(C.bind(null,yt,gt))}const x=`lt${Date.now()}${this.loadTestFontId++}`;let I=this._loadTestFont;I=o(I,976,x.length,x);const V=16,T=1482184792;let L=u(I,V);for(d=0,b=x.length-3;d<b;d+=4)L=L-T+u(x,d)|0;d<x.length&&(L=L-T+u(x+"XXX",d)|0),I=o(I,V,4,(0,c.string32)(L));const $=`url(data:font/opentype;base64,${btoa(I)});`,rt=`@font-face {font-family:"${x}";src:${$}}`;this.insertRule(rt);const et=this._document.createElement("div");et.style.visibility="hidden",et.style.width=et.style.height="10px",et.style.position="absolute",et.style.top=et.style.left="0px";for(const yt of[U.loadedName,x]){const gt=this._document.createElement("span");gt.textContent="Hi",gt.style.fontFamily=yt,et.append(gt)}this._document.body.append(et),C(x,()=>{et.remove(),F.complete()})}}f.FontLoader=_;class B{constructor(U,{isEvalSupported:F=!0,disableFontFace:u=!1,ignoreErrors:o=!1,inspectFont:d=null}){this.compiledGlyphs=Object.create(null);for(const b in U)this[b]=U[b];this.isEvalSupported=F!==!1,this.disableFontFace=u===!0,this.ignoreErrors=o===!0,this._inspectFont=d}createNativeFontFace(){if(!this.data||this.disableFontFace)return null;let U;if(!this.cssFontInfo)U=new FontFace(this.loadedName,this.data,{});else{const F={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(F.style=`oblique ${this.cssFontInfo.italicAngle}deg`),U=new FontFace(this.cssFontInfo.fontFamily,this.data,F)}return this._inspectFont?.(this),U}createFontFaceRule(){if(!this.data||this.disableFontFace)return null;const U=(0,c.bytesToString)(this.data),F=`url(data:${this.mimetype};base64,${btoa(U)});`;let u;if(!this.cssFontInfo)u=`@font-face {font-family:"${this.loadedName}";src:${F}}`;else{let o=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(o+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),u=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${o}src:${F}}`}return this._inspectFont?.(this,F),u}getPathGenerator(U,F){if(this.compiledGlyphs[F]!==void 0)return this.compiledGlyphs[F];let u;try{u=U.get(this.loadedName+"_path_"+F)}catch(o){if(!this.ignoreErrors)throw o;return(0,c.warn)(`getPathGenerator - ignoring character: "${o}".`),this.compiledGlyphs[F]=function(d,b){}}if(this.isEvalSupported&&c.FeatureTest.isEvalSupported){const o=[];for(const d of u){const b=d.args!==void 0?d.args.join(","):"";o.push("c.",d.cmd,"(",b,`);
`)}return this.compiledGlyphs[F]=new Function("c","size",o.join(""))}return this.compiledGlyphs[F]=function(o,d){for(const b of u)b.cmd==="scale"&&(b.args=[d,-d]),o[b.cmd].apply(o,b.args)}}}f.FontFaceObject=B}),((R,f,D)=>{Object.defineProperty(f,"__esModule",{value:!0}),f.NodeStandardFontDataFactory=f.NodeFilterFactory=f.NodeCanvasFactory=f.NodeCMapReaderFactory=void 0;var c=D(7);D(1);const _=function(u){return new Promise((o,d)=>{require$$5.readFile(u,(g,h)=>{if(g||!h){d(new Error(g));return}o(new Uint8Array(h))})})};class B extends c.BaseFilterFactory{}f.NodeFilterFactory=B;class N extends c.BaseCanvasFactory{_createCanvas(o,d){return require$$5.createCanvas(o,d)}}f.NodeCanvasFactory=N;class U extends c.BaseCMapReaderFactory{_fetchData(o,d){return _(o).then(b=>({cMapData:b,compressionType:d}))}}f.NodeCMapReaderFactory=U;class F extends c.BaseStandardFontDataFactory{_fetchData(o){return _(o)}}f.NodeStandardFontDataFactory=F}),((R,f,D)=>{Object.defineProperty(f,"__esModule",{value:!0}),f.CanvasGraphics=void 0;var c=D(1),_=D(6),B=D(12),N=D(13);const U=16,F=100,u=4096,o=15,d=10,b=1e3,g=16;function h(k,S){if(k._removeMirroring)throw new Error("Context is already forwarding operations.");k.__originalSave=k.save,k.__originalRestore=k.restore,k.__originalRotate=k.rotate,k.__originalScale=k.scale,k.__originalTranslate=k.translate,k.__originalTransform=k.transform,k.__originalSetTransform=k.setTransform,k.__originalResetTransform=k.resetTransform,k.__originalClip=k.clip,k.__originalMoveTo=k.moveTo,k.__originalLineTo=k.lineTo,k.__originalBezierCurveTo=k.bezierCurveTo,k.__originalRect=k.rect,k.__originalClosePath=k.closePath,k.__originalBeginPath=k.beginPath,k._removeMirroring=()=>{k.save=k.__originalSave,k.restore=k.__originalRestore,k.rotate=k.__originalRotate,k.scale=k.__originalScale,k.translate=k.__originalTranslate,k.transform=k.__originalTransform,k.setTransform=k.__originalSetTransform,k.resetTransform=k.__originalResetTransform,k.clip=k.__originalClip,k.moveTo=k.__originalMoveTo,k.lineTo=k.__originalLineTo,k.bezierCurveTo=k.__originalBezierCurveTo,k.rect=k.__originalRect,k.closePath=k.__originalClosePath,k.beginPath=k.__originalBeginPath,delete k._removeMirroring},k.save=function(){S.save(),this.__originalSave()},k.restore=function(){S.restore(),this.__originalRestore()},k.translate=function(y,O){S.translate(y,O),this.__originalTranslate(y,O)},k.scale=function(y,O){S.scale(y,O),this.__originalScale(y,O)},k.transform=function(y,O,H,J,K,m){S.transform(y,O,H,J,K,m),this.__originalTransform(y,O,H,J,K,m)},k.setTransform=function(y,O,H,J,K,m){S.setTransform(y,O,H,J,K,m),this.__originalSetTransform(y,O,H,J,K,m)},k.resetTransform=function(){S.resetTransform(),this.__originalResetTransform()},k.rotate=function(y){S.rotate(y),this.__originalRotate(y)},k.clip=function(y){S.clip(y),this.__originalClip(y)},k.moveTo=function(w,y){S.moveTo(w,y),this.__originalMoveTo(w,y)},k.lineTo=function(w,y){S.lineTo(w,y),this.__originalLineTo(w,y)},k.bezierCurveTo=function(w,y,O,H,J,K){S.bezierCurveTo(w,y,O,H,J,K),this.__originalBezierCurveTo(w,y,O,H,J,K)},k.rect=function(w,y,O,H){S.rect(w,y,O,H),this.__originalRect(w,y,O,H)},k.closePath=function(){S.closePath(),this.__originalClosePath()},k.beginPath=function(){S.beginPath(),this.__originalBeginPath()}}class E{constructor(S){this.canvasFactory=S,this.cache=Object.create(null)}getCanvas(S,w,y){let O;return this.cache[S]!==void 0?(O=this.cache[S],this.canvasFactory.reset(O,w,y)):(O=this.canvasFactory.create(w,y),this.cache[S]=O),O}delete(S){delete this.cache[S]}clear(){for(const S in this.cache){const w=this.cache[S];this.canvasFactory.destroy(w),delete this.cache[S]}}}function C(k,S,w,y,O,H,J,K,m,M){const[z,W,G,it,at,jt]=(0,_.getCurrentTransform)(k);if(W===0&&G===0){const Nt=J*z+at,Pt=Math.round(Nt),Lt=K*it+jt,Ut=Math.round(Lt),Qt=(J+m)*z+at,$t=Math.abs(Math.round(Qt)-Pt)||1,se=(K+M)*it+jt,le=Math.abs(Math.round(se)-Ut)||1;return k.setTransform(Math.sign(z),0,0,Math.sign(it),Pt,Ut),k.drawImage(S,w,y,O,H,0,0,$t,le),k.setTransform(z,W,G,it,at,jt),[$t,le]}if(z===0&&it===0){const Nt=K*G+at,Pt=Math.round(Nt),Lt=J*W+jt,Ut=Math.round(Lt),Qt=(K+M)*G+at,$t=Math.abs(Math.round(Qt)-Pt)||1,se=(J+m)*W+jt,le=Math.abs(Math.round(se)-Ut)||1;return k.setTransform(0,Math.sign(W),Math.sign(G),0,Pt,Ut),k.drawImage(S,w,y,O,H,0,0,le,$t),k.setTransform(z,W,G,it,at,jt),[le,$t]}k.drawImage(S,w,y,O,H,J,K,m,M);const Yt=Math.hypot(z,W),Rt=Math.hypot(G,it);return[Yt*m,Rt*M]}function x(k){const{width:S,height:w}=k;if(S>b||w>b)return null;const y=1e3,O=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),H=S+1;let J=new Uint8Array(H*(w+1)),K,m,M;const z=S+7&-8;let W=new Uint8Array(z*w),G=0;for(const Rt of k.data){let Nt=128;for(;Nt>0;)W[G++]=Rt&Nt?0:255,Nt>>=1}let it=0;for(G=0,W[G]!==0&&(J[0]=1,++it),m=1;m<S;m++)W[G]!==W[G+1]&&(J[m]=W[G]?2:1,++it),G++;for(W[G]!==0&&(J[m]=2,++it),K=1;K<w;K++){G=K*z,M=K*H,W[G-z]!==W[G]&&(J[M]=W[G]?1:8,++it);let Rt=(W[G]?4:0)+(W[G-z]?8:0);for(m=1;m<S;m++)Rt=(Rt>>2)+(W[G+1]?4:0)+(W[G-z+1]?8:0),O[Rt]&&(J[M+m]=O[Rt],++it),G++;if(W[G-z]!==W[G]&&(J[M+m]=W[G]?2:4,++it),it>y)return null}for(G=z*(w-1),M=K*H,W[G]!==0&&(J[M]=8,++it),m=1;m<S;m++)W[G]!==W[G+1]&&(J[M+m]=W[G]?4:8,++it),G++;if(W[G]!==0&&(J[M+m]=4,++it),it>y)return null;const at=new Int32Array([0,H,-1,0,-H,0,0,0,1]),jt=new Path2D;for(K=0;it&&K<=w;K++){let Rt=K*H;const Nt=Rt+S;for(;Rt<Nt&&!J[Rt];)Rt++;if(Rt===Nt)continue;jt.moveTo(Rt%H,K);const Pt=Rt;let Lt=J[Rt];do{const Ut=at[Lt];do Rt+=Ut;while(!J[Rt]);const Qt=J[Rt];Qt!==5&&Qt!==10?(Lt=Qt,J[Rt]=0):(Lt=Qt&51*Lt>>4,J[Rt]&=Lt>>2|Lt<<2),jt.lineTo(Rt%H,Rt/H|0),J[Rt]||--it}while(Pt!==Rt);--K}return W=null,J=null,function(Rt){Rt.save(),Rt.scale(1/S,-1/w),Rt.translate(0,-w),Rt.fill(jt),Rt.beginPath(),Rt.restore()}}class I{constructor(S,w){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=c.IDENTITY_MATRIX,this.textMatrixScale=1,this.fontMatrix=c.FONT_IDENTITY_MATRIX,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=c.TextRenderingMode.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps="none",this.startNewPathAndClipBox([0,0,S,w])}clone(){const S=Object.create(this);return S.clipBox=this.clipBox.slice(),S}setCurrentPoint(S,w){this.x=S,this.y=w}updatePathMinMax(S,w,y){[w,y]=c.Util.applyTransform([w,y],S),this.minX=Math.min(this.minX,w),this.minY=Math.min(this.minY,y),this.maxX=Math.max(this.maxX,w),this.maxY=Math.max(this.maxY,y)}updateRectMinMax(S,w){const y=c.Util.applyTransform(w,S),O=c.Util.applyTransform(w.slice(2),S);this.minX=Math.min(this.minX,y[0],O[0]),this.minY=Math.min(this.minY,y[1],O[1]),this.maxX=Math.max(this.maxX,y[0],O[0]),this.maxY=Math.max(this.maxY,y[1],O[1])}updateScalingPathMinMax(S,w){c.Util.scaleMinMax(S,w),this.minX=Math.min(this.minX,w[0]),this.maxX=Math.max(this.maxX,w[1]),this.minY=Math.min(this.minY,w[2]),this.maxY=Math.max(this.maxY,w[3])}updateCurvePathMinMax(S,w,y,O,H,J,K,m,M,z){const W=c.Util.bezierBoundingBox(w,y,O,H,J,K,m,M);if(z){z[0]=Math.min(z[0],W[0],W[2]),z[1]=Math.max(z[1],W[0],W[2]),z[2]=Math.min(z[2],W[1],W[3]),z[3]=Math.max(z[3],W[1],W[3]);return}this.updateRectMinMax(S,W)}getPathBoundingBox(S=B.PathType.FILL,w=null){const y=[this.minX,this.minY,this.maxX,this.maxY];if(S===B.PathType.STROKE){w||(0,c.unreachable)("Stroke bounding box must include transform.");const O=c.Util.singularValueDecompose2dScale(w),H=O[0]*this.lineWidth/2,J=O[1]*this.lineWidth/2;y[0]-=H,y[1]-=J,y[2]+=H,y[3]+=J}return y}updateClipFromPath(){const S=c.Util.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(S||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(S){this.clipBox=S,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(S=B.PathType.FILL,w=null){return c.Util.intersect(this.clipBox,this.getPathBoundingBox(S,w))}}function Q(k,S){if(typeof ImageData<"u"&&S instanceof ImageData){k.putImageData(S,0,0);return}const w=S.height,y=S.width,O=w%g,H=(w-O)/g,J=O===0?H:H+1,K=k.createImageData(y,g);let m=0,M;const z=S.data,W=K.data;let G,it,at,jt;if(S.kind===c.ImageKind.GRAYSCALE_1BPP){const Yt=z.byteLength,Rt=new Uint32Array(W.buffer,0,W.byteLength>>2),Nt=Rt.length,Pt=y+7>>3,Lt=4294967295,Ut=c.FeatureTest.isLittleEndian?4278190080:255;for(G=0;G<J;G++){for(at=G<H?g:O,M=0,it=0;it<at;it++){const Qt=Yt-m;let $t=0;const se=Qt>Pt?y:Qt*8-7,le=se&-8;let oe=0,_e=0;for(;$t<le;$t+=8)_e=z[m++],Rt[M++]=_e&128?Lt:Ut,Rt[M++]=_e&64?Lt:Ut,Rt[M++]=_e&32?Lt:Ut,Rt[M++]=_e&16?Lt:Ut,Rt[M++]=_e&8?Lt:Ut,Rt[M++]=_e&4?Lt:Ut,Rt[M++]=_e&2?Lt:Ut,Rt[M++]=_e&1?Lt:Ut;for(;$t<se;$t++)oe===0&&(_e=z[m++],oe=128),Rt[M++]=_e&oe?Lt:Ut,oe>>=1}for(;M<Nt;)Rt[M++]=0;k.putImageData(K,0,G*g)}}else if(S.kind===c.ImageKind.RGBA_32BPP){for(it=0,jt=y*g*4,G=0;G<H;G++)W.set(z.subarray(m,m+jt)),m+=jt,k.putImageData(K,0,it),it+=g;G<J&&(jt=y*O*4,W.set(z.subarray(m,m+jt)),k.putImageData(K,0,it))}else if(S.kind===c.ImageKind.RGB_24BPP)for(at=g,jt=y*at,G=0;G<J;G++){for(G>=H&&(at=O,jt=y*at),M=0,it=jt;it--;)W[M++]=z[m++],W[M++]=z[m++],W[M++]=z[m++],W[M++]=255;k.putImageData(K,0,G*g)}else throw new Error(`bad image kind: ${S.kind}`)}function V(k,S){if(S.bitmap){k.drawImage(S.bitmap,0,0);return}const w=S.height,y=S.width,O=w%g,H=(w-O)/g,J=O===0?H:H+1,K=k.createImageData(y,g);let m=0;const M=S.data,z=K.data;for(let W=0;W<J;W++){const G=W<H?g:O;({srcPos:m}=(0,N.convertBlackAndWhiteToRGBA)({src:M,srcPos:m,dest:z,width:y,height:G,nonBlackColor:0})),k.putImageData(K,0,W*g)}}function T(k,S){const w=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const y of w)k[y]!==void 0&&(S[y]=k[y]);k.setLineDash!==void 0&&(S.setLineDash(k.getLineDash()),S.lineDashOffset=k.lineDashOffset)}function L(k){if(k.strokeStyle=k.fillStyle="#000000",k.fillRule="nonzero",k.globalAlpha=1,k.lineWidth=1,k.lineCap="butt",k.lineJoin="miter",k.miterLimit=10,k.globalCompositeOperation="source-over",k.font="10px sans-serif",k.setLineDash!==void 0&&(k.setLineDash([]),k.lineDashOffset=0),!c.isNodeJS){const{filter:S}=k;S!=="none"&&S!==""&&(k.filter="none")}}function $(k,S,w,y){const O=k.length;for(let H=3;H<O;H+=4){const J=k[H];if(J===0)k[H-3]=S,k[H-2]=w,k[H-1]=y;else if(J<255){const K=255-J;k[H-3]=k[H-3]*J+S*K>>8,k[H-2]=k[H-2]*J+w*K>>8,k[H-1]=k[H-1]*J+y*K>>8}}}function rt(k,S,w){const y=k.length,O=1/255;for(let H=3;H<y;H+=4){const J=w?w[k[H]]:k[H];S[H]=S[H]*J*O|0}}function et(k,S,w){const y=k.length;for(let O=3;O<y;O+=4){const H=k[O-3]*77+k[O-2]*152+k[O-1]*28;S[O]=w?S[O]*w[H>>8]>>8:S[O]*H>>16}}function yt(k,S,w,y,O,H,J,K,m,M,z){const W=!!H,G=W?H[0]:0,it=W?H[1]:0,at=W?H[2]:0,jt=O==="Luminosity"?et:rt,Rt=Math.min(y,Math.ceil(1048576/w));for(let Nt=0;Nt<y;Nt+=Rt){const Pt=Math.min(Rt,y-Nt),Lt=k.getImageData(K-M,Nt+(m-z),w,Pt),Ut=S.getImageData(K,Nt+m,w,Pt);W&&$(Lt.data,G,it,at),jt(Lt.data,Ut.data,J),S.putImageData(Ut,K,Nt+m)}}function gt(k,S,w,y){const O=y[0],H=y[1],J=y[2]-O,K=y[3]-H;J===0||K===0||(yt(S.context,w,J,K,S.subtype,S.backdrop,S.transferMap,O,H,S.offsetX,S.offsetY),k.save(),k.globalAlpha=1,k.globalCompositeOperation="source-over",k.setTransform(1,0,0,1,0,0),k.drawImage(w.canvas,0,0),k.restore())}function kt(k,S){const w=c.Util.singularValueDecompose2dScale(k);w[0]=Math.fround(w[0]),w[1]=Math.fround(w[1]);const y=Math.fround((globalThis.devicePixelRatio||1)*_.PixelsPerInch.PDF_TO_CSS_UNITS);return S!==void 0?S:w[0]<=y||w[1]<=y}const At=["butt","round","square"],Ft=["miter","round","bevel"],Xt={},nt={};class Y{constructor(S,w,y,O,H,{optionalContentConfig:J,markedContentStack:K=null},m,M){this.ctx=S,this.current=new I(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=w,this.objs=y,this.canvasFactory=O,this.filterFactory=H,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=K||[],this.optionalContentConfig=J,this.cachedCanvases=new E(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=m,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=M,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(S,w=null){return typeof S=="string"?S.startsWith("g_")?this.commonObjs.get(S):this.objs.get(S):w}beginDrawing({transform:S,viewport:w,transparency:y=!1,background:O=null}){const H=this.ctx.canvas.width,J=this.ctx.canvas.height,K=this.ctx.fillStyle;if(this.ctx.fillStyle=O||"#ffffff",this.ctx.fillRect(0,0,H,J),this.ctx.fillStyle=K,y){const m=this.cachedCanvases.getCanvas("transparent",H,J);this.compositeCtx=this.ctx,this.transparentCanvas=m.canvas,this.ctx=m.context,this.ctx.save(),this.ctx.transform(...(0,_.getCurrentTransform)(this.compositeCtx))}this.ctx.save(),L(this.ctx),S&&(this.ctx.transform(...S),this.outputScaleX=S[0],this.outputScaleY=S[0]),this.ctx.transform(...w.transform),this.viewportScale=w.scale,this.baseTransform=(0,_.getCurrentTransform)(this.ctx)}executeOperatorList(S,w,y,O){const H=S.argsArray,J=S.fnArray;let K=w||0;const m=H.length;if(m===K)return K;const M=m-K>d&&typeof y=="function",z=M?Date.now()+o:0;let W=0;const G=this.commonObjs,it=this.objs;let at;for(;;){if(O!==void 0&&K===O.nextBreakPoint)return O.breakIt(K,y),K;if(at=J[K],at!==c.OPS.dependency)this[at].apply(this,H[K]);else for(const jt of H[K]){const Yt=jt.startsWith("g_")?G:it;if(!Yt.has(jt))return Yt.get(jt,y),K}if(K++,K===m)return K;if(M&&++W>d){if(Date.now()>z)return y(),K;W=0}}}#t(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)}endDrawing(){this.#t(),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const S of this._cachedBitmapsMap.values()){for(const w of S.values())typeof HTMLCanvasElement<"u"&&w instanceof HTMLCanvasElement&&(w.width=w.height=0);S.clear()}this._cachedBitmapsMap.clear(),this.#e()}#e(){if(this.pageColors){const S=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(S!=="none"){const w=this.ctx.filter;this.ctx.filter=S,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=w}}}_scaleImage(S,w){const y=S.width,O=S.height;let H=Math.max(Math.hypot(w[0],w[1]),1),J=Math.max(Math.hypot(w[2],w[3]),1),K=y,m=O,M="prescale1",z,W;for(;H>2&&K>1||J>2&&m>1;){let G=K,it=m;H>2&&K>1&&(G=K>=16384?Math.floor(K/2)-1||1:Math.ceil(K/2),H/=K/G),J>2&&m>1&&(it=m>=16384?Math.floor(m/2)-1||1:Math.ceil(m)/2,J/=m/it),z=this.cachedCanvases.getCanvas(M,G,it),W=z.context,W.clearRect(0,0,G,it),W.drawImage(S,0,0,K,m,0,0,G,it),S=z.canvas,K=G,m=it,M=M==="prescale1"?"prescale2":"prescale1"}return{img:S,paintWidth:K,paintHeight:m}}_createMaskCanvas(S){const w=this.ctx,{width:y,height:O}=S,H=this.current.fillColor,J=this.current.patternFill,K=(0,_.getCurrentTransform)(w);let m,M,z,W;if((S.bitmap||S.data)&&S.count>1){const $t=S.bitmap||S.data.buffer;M=JSON.stringify(J?K:[K.slice(0,4),H]),m=this._cachedBitmapsMap.get($t),m||(m=new Map,this._cachedBitmapsMap.set($t,m));const se=m.get(M);if(se&&!J){const le=Math.round(Math.min(K[0],K[2])+K[4]),oe=Math.round(Math.min(K[1],K[3])+K[5]);return{canvas:se,offsetX:le,offsetY:oe}}z=se}z||(W=this.cachedCanvases.getCanvas("maskCanvas",y,O),V(W.context,S));let G=c.Util.transform(K,[1/y,0,0,-1/O,0,0]);G=c.Util.transform(G,[1,0,0,1,0,-O]);const it=c.Util.applyTransform([0,0],G),at=c.Util.applyTransform([y,O],G),jt=c.Util.normalizeRect([it[0],it[1],at[0],at[1]]),Yt=Math.round(jt[2]-jt[0])||1,Rt=Math.round(jt[3]-jt[1])||1,Nt=this.cachedCanvases.getCanvas("fillCanvas",Yt,Rt),Pt=Nt.context,Lt=Math.min(it[0],at[0]),Ut=Math.min(it[1],at[1]);Pt.translate(-Lt,-Ut),Pt.transform(...G),z||(z=this._scaleImage(W.canvas,(0,_.getCurrentTransformInverse)(Pt)),z=z.img,m&&J&&m.set(M,z)),Pt.imageSmoothingEnabled=kt((0,_.getCurrentTransform)(Pt),S.interpolate),C(Pt,z,0,0,z.width,z.height,0,0,y,O),Pt.globalCompositeOperation="source-in";const Qt=c.Util.transform((0,_.getCurrentTransformInverse)(Pt),[1,0,0,1,-Lt,-Ut]);return Pt.fillStyle=J?H.getPattern(w,this,Qt,B.PathType.FILL):H,Pt.fillRect(0,0,y,O),m&&!J&&(this.cachedCanvases.delete("fillCanvas"),m.set(M,Nt.canvas)),{canvas:Nt.canvas,offsetX:Math.round(Lt),offsetY:Math.round(Ut)}}setLineWidth(S){S!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=S,this.ctx.lineWidth=S}setLineCap(S){this.ctx.lineCap=At[S]}setLineJoin(S){this.ctx.lineJoin=Ft[S]}setMiterLimit(S){this.ctx.miterLimit=S}setDash(S,w){const y=this.ctx;y.setLineDash!==void 0&&(y.setLineDash(S),y.lineDashOffset=w)}setRenderingIntent(S){}setFlatness(S){}setGState(S){for(const[w,y]of S)switch(w){case"LW":this.setLineWidth(y);break;case"LC":this.setLineCap(y);break;case"LJ":this.setLineJoin(y);break;case"ML":this.setMiterLimit(y);break;case"D":this.setDash(y[0],y[1]);break;case"RI":this.setRenderingIntent(y);break;case"FL":this.setFlatness(y);break;case"Font":this.setFont(y[0],y[1]);break;case"CA":this.current.strokeAlpha=y;break;case"ca":this.current.fillAlpha=y,this.ctx.globalAlpha=y;break;case"BM":this.ctx.globalCompositeOperation=y;break;case"SMask":this.current.activeSMask=y?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(y);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const S=this.inSMaskMode;this.current.activeSMask&&!S?this.beginSMaskMode():!this.current.activeSMask&&S&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const S=this.ctx.canvas.width,w=this.ctx.canvas.height,y="smaskGroupAt"+this.groupLevel,O=this.cachedCanvases.getCanvas(y,S,w);this.suspendedCtx=this.ctx,this.ctx=O.context;const H=this.ctx;H.setTransform(...(0,_.getCurrentTransform)(this.suspendedCtx)),T(this.suspendedCtx,H),h(H,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),T(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(S){if(!this.current.activeSMask)return;S?(S[0]=Math.floor(S[0]),S[1]=Math.floor(S[1]),S[2]=Math.ceil(S[2]),S[3]=Math.ceil(S[3])):S=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const w=this.current.activeSMask,y=this.suspendedCtx;gt(y,w,this.ctx,S),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}save(){this.inSMaskMode?(T(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();const S=this.current;this.stateStack.push(S),this.current=S.clone()}restore(){this.stateStack.length===0&&this.inSMaskMode&&this.endSMaskMode(),this.stateStack.length!==0&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),T(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null)}transform(S,w,y,O,H,J){this.ctx.transform(S,w,y,O,H,J),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(S,w,y){const O=this.ctx,H=this.current;let J=H.x,K=H.y,m,M;const z=(0,_.getCurrentTransform)(O),W=z[0]===0&&z[3]===0||z[1]===0&&z[2]===0,G=W?y.slice(0):null;for(let it=0,at=0,jt=S.length;it<jt;it++)switch(S[it]|0){case c.OPS.rectangle:J=w[at++],K=w[at++];const Yt=w[at++],Rt=w[at++],Nt=J+Yt,Pt=K+Rt;O.moveTo(J,K),Yt===0||Rt===0?O.lineTo(Nt,Pt):(O.lineTo(Nt,K),O.lineTo(Nt,Pt),O.lineTo(J,Pt)),W||H.updateRectMinMax(z,[J,K,Nt,Pt]),O.closePath();break;case c.OPS.moveTo:J=w[at++],K=w[at++],O.moveTo(J,K),W||H.updatePathMinMax(z,J,K);break;case c.OPS.lineTo:J=w[at++],K=w[at++],O.lineTo(J,K),W||H.updatePathMinMax(z,J,K);break;case c.OPS.curveTo:m=J,M=K,J=w[at+4],K=w[at+5],O.bezierCurveTo(w[at],w[at+1],w[at+2],w[at+3],J,K),H.updateCurvePathMinMax(z,m,M,w[at],w[at+1],w[at+2],w[at+3],J,K,G),at+=6;break;case c.OPS.curveTo2:m=J,M=K,O.bezierCurveTo(J,K,w[at],w[at+1],w[at+2],w[at+3]),H.updateCurvePathMinMax(z,m,M,J,K,w[at],w[at+1],w[at+2],w[at+3],G),J=w[at+2],K=w[at+3],at+=4;break;case c.OPS.curveTo3:m=J,M=K,J=w[at+2],K=w[at+3],O.bezierCurveTo(w[at],w[at+1],J,K,J,K),H.updateCurvePathMinMax(z,m,M,w[at],w[at+1],J,K,J,K,G),at+=4;break;case c.OPS.closePath:O.closePath();break}W&&H.updateScalingPathMinMax(z,G),H.setCurrentPoint(J,K)}closePath(){this.ctx.closePath()}stroke(S=!0){const w=this.ctx,y=this.current.strokeColor;w.globalAlpha=this.current.strokeAlpha,this.contentVisible&&(typeof y=="object"&&y?.getPattern?(w.save(),w.strokeStyle=y.getPattern(w,this,(0,_.getCurrentTransformInverse)(w),B.PathType.STROKE),this.rescaleAndStroke(!1),w.restore()):this.rescaleAndStroke(!0)),S&&this.consumePath(this.current.getClippedPathBoundingBox()),w.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(S=!0){const w=this.ctx,y=this.current.fillColor,O=this.current.patternFill;let H=!1;O&&(w.save(),w.fillStyle=y.getPattern(w,this,(0,_.getCurrentTransformInverse)(w),B.PathType.FILL),H=!0);const J=this.current.getClippedPathBoundingBox();this.contentVisible&&J!==null&&(this.pendingEOFill?(w.fill("evenodd"),this.pendingEOFill=!1):w.fill()),H&&w.restore(),S&&this.consumePath(J)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=Xt}eoClip(){this.pendingClip=nt}beginText(){this.current.textMatrix=c.IDENTITY_MATRIX,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const S=this.pendingTextPaths,w=this.ctx;if(S===void 0){w.beginPath();return}w.save(),w.beginPath();for(const y of S)w.setTransform(...y.transform),w.translate(y.x,y.y),y.addToPath(w,y.fontSize);w.restore(),w.clip(),w.beginPath(),delete this.pendingTextPaths}setCharSpacing(S){this.current.charSpacing=S}setWordSpacing(S){this.current.wordSpacing=S}setHScale(S){this.current.textHScale=S/100}setLeading(S){this.current.leading=-S}setFont(S,w){const y=this.commonObjs.get(S),O=this.current;if(!y)throw new Error(`Can't find font for ${S}`);if(O.fontMatrix=y.fontMatrix||c.FONT_IDENTITY_MATRIX,(O.fontMatrix[0]===0||O.fontMatrix[3]===0)&&(0,c.warn)("Invalid font matrix for font "+S),w<0?(w=-w,O.fontDirection=-1):O.fontDirection=1,this.current.font=y,this.current.fontSize=w,y.isType3Font)return;const H=y.loadedName||"sans-serif",J=y.systemFontInfo?.css||`"${H}", ${y.fallbackName}`;let K="normal";y.black?K="900":y.bold&&(K="bold");const m=y.italic?"italic":"normal";let M=w;w<U?M=U:w>F&&(M=F),this.current.fontSizeScale=w/M,this.ctx.font=`${m} ${K} ${M}px ${J}`}setTextRenderingMode(S){this.current.textRenderingMode=S}setTextRise(S){this.current.textRise=S}moveText(S,w){this.current.x=this.current.lineX+=S,this.current.y=this.current.lineY+=w}setLeadingMoveText(S,w){this.setLeading(-w),this.moveText(S,w)}setTextMatrix(S,w,y,O,H,J){this.current.textMatrix=[S,w,y,O,H,J],this.current.textMatrixScale=Math.hypot(S,w),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(S,w,y,O){const H=this.ctx,J=this.current,K=J.font,m=J.textRenderingMode,M=J.fontSize/J.fontSizeScale,z=m&c.TextRenderingMode.FILL_STROKE_MASK,W=!!(m&c.TextRenderingMode.ADD_TO_PATH_FLAG),G=J.patternFill&&!K.missingFile;let it;(K.disableFontFace||W||G)&&(it=K.getPathGenerator(this.commonObjs,S)),K.disableFontFace||G?(H.save(),H.translate(w,y),H.beginPath(),it(H,M),O&&H.setTransform(...O),(z===c.TextRenderingMode.FILL||z===c.TextRenderingMode.FILL_STROKE)&&H.fill(),(z===c.TextRenderingMode.STROKE||z===c.TextRenderingMode.FILL_STROKE)&&H.stroke(),H.restore()):((z===c.TextRenderingMode.FILL||z===c.TextRenderingMode.FILL_STROKE)&&H.fillText(S,w,y),(z===c.TextRenderingMode.STROKE||z===c.TextRenderingMode.FILL_STROKE)&&H.strokeText(S,w,y)),W&&(this.pendingTextPaths||=[]).push({transform:(0,_.getCurrentTransform)(H),x:w,y,fontSize:M,addToPath:it})}get isFontSubpixelAAEnabled(){const{context:S}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);S.scale(1.5,1),S.fillText("I",0,10);const w=S.getImageData(0,0,10,10).data;let y=!1;for(let O=3;O<w.length;O+=4)if(w[O]>0&&w[O]<255){y=!0;break}return(0,c.shadow)(this,"isFontSubpixelAAEnabled",y)}showText(S){const w=this.current,y=w.font;if(y.isType3Font)return this.showType3Text(S);const O=w.fontSize;if(O===0)return;const H=this.ctx,J=w.fontSizeScale,K=w.charSpacing,m=w.wordSpacing,M=w.fontDirection,z=w.textHScale*M,W=S.length,G=y.vertical,it=G?1:-1,at=y.defaultVMetrics,jt=O*w.fontMatrix[0],Yt=w.textRenderingMode===c.TextRenderingMode.FILL&&!y.disableFontFace&&!w.patternFill;H.save(),H.transform(...w.textMatrix),H.translate(w.x,w.y+w.textRise),M>0?H.scale(z,-1):H.scale(z,1);let Rt;if(w.patternFill){H.save();const Qt=w.fillColor.getPattern(H,this,(0,_.getCurrentTransformInverse)(H),B.PathType.FILL);Rt=(0,_.getCurrentTransform)(H),H.restore(),H.fillStyle=Qt}let Nt=w.lineWidth;const Pt=w.textMatrixScale;if(Pt===0||Nt===0){const Qt=w.textRenderingMode&c.TextRenderingMode.FILL_STROKE_MASK;(Qt===c.TextRenderingMode.STROKE||Qt===c.TextRenderingMode.FILL_STROKE)&&(Nt=this.getSinglePixelWidth())}else Nt/=Pt;if(J!==1&&(H.scale(J,J),Nt/=J),H.lineWidth=Nt,y.isInvalidPDFjsFont){const Qt=[];let $t=0;for(const se of S)Qt.push(se.unicode),$t+=se.width;H.fillText(Qt.join(""),0,0),w.x+=$t*jt*z,H.restore(),this.compose();return}let Lt=0,Ut;for(Ut=0;Ut<W;++Ut){const Qt=S[Ut];if(typeof Qt=="number"){Lt+=it*Qt*O/1e3;continue}let $t=!1;const se=(Qt.isSpace?m:0)+K,le=Qt.fontChar,oe=Qt.accent;let _e,Ce,Ue=Qt.width;if(G){const We=Qt.vmetric||at,En=-(Qt.vmetric?We[1]:Ue*.5)*jt,xi=We[2]*jt;Ue=We?-We[0]:Ue,_e=En/J,Ce=(Lt+xi)/J}else _e=Lt/J,Ce=0;if(y.remeasure&&Ue>0){const We=H.measureText(le).width*1e3/O*J;if(Ue<We&&this.isFontSubpixelAAEnabled){const En=Ue/We;$t=!0,H.save(),H.scale(En,1),_e/=En}else Ue!==We&&(_e+=(Ue-We)/2e3*O/J)}if(this.contentVisible&&(Qt.isInFont||y.missingFile)){if(Yt&&!oe)H.fillText(le,_e,Ce);else if(this.paintChar(le,_e,Ce,Rt),oe){const We=_e+O*oe.offset.x/J,En=Ce-O*oe.offset.y/J;this.paintChar(oe.fontChar,We,En,Rt)}}const jn=G?Ue*jt-se*M:Ue*jt+se*M;Lt+=jn,$t&&H.restore()}G?w.y-=Lt:w.x+=Lt*z,H.restore(),this.compose()}showType3Text(S){const w=this.ctx,y=this.current,O=y.font,H=y.fontSize,J=y.fontDirection,K=O.vertical?1:-1,m=y.charSpacing,M=y.wordSpacing,z=y.textHScale*J,W=y.fontMatrix||c.FONT_IDENTITY_MATRIX,G=S.length,it=y.textRenderingMode===c.TextRenderingMode.INVISIBLE;let at,jt,Yt,Rt;if(!(it||H===0)){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,w.save(),w.transform(...y.textMatrix),w.translate(y.x,y.y),w.scale(z,J),at=0;at<G;++at){if(jt=S[at],typeof jt=="number"){Rt=K*jt*H/1e3,this.ctx.translate(Rt,0),y.x+=Rt*z;continue}const Nt=(jt.isSpace?M:0)+m,Pt=O.charProcOperatorList[jt.operatorListId];if(!Pt){(0,c.warn)(`Type3 character "${jt.operatorListId}" is not available.`);continue}this.contentVisible&&(this.processingType3=jt,this.save(),w.scale(H,H),w.transform(...W),this.executeOperatorList(Pt),this.restore()),Yt=c.Util.applyTransform([jt.width,0],W)[0]*H+Nt,w.translate(Yt,0),y.x+=Yt*z}w.restore(),this.processingType3=null}}setCharWidth(S,w){}setCharWidthAndBounds(S,w,y,O,H,J){this.ctx.rect(y,O,H-y,J-O),this.ctx.clip(),this.endPath()}getColorN_Pattern(S){let w;if(S[0]==="TilingPattern"){const y=S[1],O=this.baseTransform||(0,_.getCurrentTransform)(this.ctx),H={createCanvasGraphics:J=>new Y(J,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};w=new B.TilingPattern(S,y,this.ctx,H,O)}else w=this._getPattern(S[1],S[2]);return w}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments)}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(S,w,y){const O=c.Util.makeHexColor(S,w,y);this.ctx.strokeStyle=O,this.current.strokeColor=O}setFillRGBColor(S,w,y){const O=c.Util.makeHexColor(S,w,y);this.ctx.fillStyle=O,this.current.fillColor=O,this.current.patternFill=!1}_getPattern(S,w=null){let y;return this.cachedPatterns.has(S)?y=this.cachedPatterns.get(S):(y=(0,B.getShadingPattern)(this.getObject(S)),this.cachedPatterns.set(S,y)),w&&(y.matrix=w),y}shadingFill(S){if(!this.contentVisible)return;const w=this.ctx;this.save();const y=this._getPattern(S);w.fillStyle=y.getPattern(w,this,(0,_.getCurrentTransformInverse)(w),B.PathType.SHADING);const O=(0,_.getCurrentTransformInverse)(w);if(O){const{width:H,height:J}=w.canvas,[K,m,M,z]=c.Util.getAxialAlignedBoundingBox([0,0,H,J],O);this.ctx.fillRect(K,m,M-K,z-m)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){(0,c.unreachable)("Should not call beginInlineImage")}beginImageData(){(0,c.unreachable)("Should not call beginImageData")}paintFormXObjectBegin(S,w){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),Array.isArray(S)&&S.length===6&&this.transform(...S),this.baseTransform=(0,_.getCurrentTransform)(this.ctx),w)){const y=w[2]-w[0],O=w[3]-w[1];this.ctx.rect(w[0],w[1],y,O),this.current.updateRectMinMax((0,_.getCurrentTransform)(this.ctx),w),this.clip(),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(S){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const w=this.ctx;S.isolated||(0,c.info)("TODO: Support non-isolated groups."),S.knockout&&(0,c.warn)("Knockout groups not supported.");const y=(0,_.getCurrentTransform)(w);if(S.matrix&&w.transform(...S.matrix),!S.bbox)throw new Error("Bounding box is required.");let O=c.Util.getAxialAlignedBoundingBox(S.bbox,(0,_.getCurrentTransform)(w));const H=[0,0,w.canvas.width,w.canvas.height];O=c.Util.intersect(O,H)||[0,0,0,0];const J=Math.floor(O[0]),K=Math.floor(O[1]);let m=Math.max(Math.ceil(O[2])-J,1),M=Math.max(Math.ceil(O[3])-K,1),z=1,W=1;m>u&&(z=m/u,m=u),M>u&&(W=M/u,M=u),this.current.startNewPathAndClipBox([0,0,m,M]);let G="groupAt"+this.groupLevel;S.smask&&(G+="_smask_"+this.smaskCounter++%2);const it=this.cachedCanvases.getCanvas(G,m,M),at=it.context;at.scale(1/z,1/W),at.translate(-J,-K),at.transform(...y),S.smask?this.smaskStack.push({canvas:it.canvas,context:at,offsetX:J,offsetY:K,scaleX:z,scaleY:W,subtype:S.smask.subtype,backdrop:S.smask.backdrop,transferMap:S.smask.transferMap||null,startTransformInverse:null}):(w.setTransform(1,0,0,1,0,0),w.translate(J,K),w.scale(z,W),w.save()),T(w,at),this.ctx=at,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(w),this.groupLevel++}endGroup(S){if(!this.contentVisible)return;this.groupLevel--;const w=this.ctx,y=this.groupStack.pop();if(this.ctx=y,this.ctx.imageSmoothingEnabled=!1,S.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const O=(0,_.getCurrentTransform)(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...O);const H=c.Util.getAxialAlignedBoundingBox([0,0,w.canvas.width,w.canvas.height],O);this.ctx.drawImage(w.canvas,0,0),this.ctx.restore(),this.compose(H)}}beginAnnotation(S,w,y,O,H){if(this.#t(),L(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),Array.isArray(w)&&w.length===4){const J=w[2]-w[0],K=w[3]-w[1];if(H&&this.annotationCanvasMap){y=y.slice(),y[4]-=w[0],y[5]-=w[1],w=w.slice(),w[0]=w[1]=0,w[2]=J,w[3]=K;const[m,M]=c.Util.singularValueDecompose2dScale((0,_.getCurrentTransform)(this.ctx)),{viewportScale:z}=this,W=Math.ceil(J*this.outputScaleX*z),G=Math.ceil(K*this.outputScaleY*z);this.annotationCanvas=this.canvasFactory.create(W,G);const{canvas:it,context:at}=this.annotationCanvas;this.annotationCanvasMap.set(S,it),this.annotationCanvas.savedCtx=this.ctx,this.ctx=at,this.ctx.save(),this.ctx.setTransform(m,0,0,-M,0,K*M),L(this.ctx)}else L(this.ctx),this.ctx.rect(w[0],w[1],J,K),this.ctx.clip(),this.endPath()}this.current=new I(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...y),this.transform(...O)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),this.#e(),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(S){if(!this.contentVisible)return;const w=S.count;S=this.getObject(S.data,S),S.count=w;const y=this.ctx,O=this.processingType3;if(O&&(O.compiled===void 0&&(O.compiled=x(S)),O.compiled)){O.compiled(y);return}const H=this._createMaskCanvas(S),J=H.canvas;y.save(),y.setTransform(1,0,0,1,0,0),y.drawImage(J,H.offsetX,H.offsetY),y.restore(),this.compose()}paintImageMaskXObjectRepeat(S,w,y=0,O=0,H,J){if(!this.contentVisible)return;S=this.getObject(S.data,S);const K=this.ctx;K.save();const m=(0,_.getCurrentTransform)(K);K.transform(w,y,O,H,0,0);const M=this._createMaskCanvas(S);K.setTransform(1,0,0,1,M.offsetX-m[4],M.offsetY-m[5]);for(let z=0,W=J.length;z<W;z+=2){const G=c.Util.transform(m,[w,y,O,H,J[z],J[z+1]]),[it,at]=c.Util.applyTransform([0,0],G);K.drawImage(M.canvas,it,at)}K.restore(),this.compose()}paintImageMaskXObjectGroup(S){if(!this.contentVisible)return;const w=this.ctx,y=this.current.fillColor,O=this.current.patternFill;for(const H of S){const{data:J,width:K,height:m,transform:M}=H,z=this.cachedCanvases.getCanvas("maskCanvas",K,m),W=z.context;W.save();const G=this.getObject(J,H);V(W,G),W.globalCompositeOperation="source-in",W.fillStyle=O?y.getPattern(W,this,(0,_.getCurrentTransformInverse)(w),B.PathType.FILL):y,W.fillRect(0,0,K,m),W.restore(),w.save(),w.transform(...M),w.scale(1,-1),C(w,z.canvas,0,0,K,m,0,-1,1,1),w.restore()}this.compose()}paintImageXObject(S){if(!this.contentVisible)return;const w=this.getObject(S);if(!w){(0,c.warn)("Dependent image isn't ready yet");return}this.paintInlineImageXObject(w)}paintImageXObjectRepeat(S,w,y,O){if(!this.contentVisible)return;const H=this.getObject(S);if(!H){(0,c.warn)("Dependent image isn't ready yet");return}const J=H.width,K=H.height,m=[];for(let M=0,z=O.length;M<z;M+=2)m.push({transform:[w,0,0,y,O[M],O[M+1]],x:0,y:0,w:J,h:K});this.paintInlineImageXObjectGroup(H,m)}applyTransferMapsToCanvas(S){return this.current.transferMaps!=="none"&&(S.filter=this.current.transferMaps,S.drawImage(S.canvas,0,0),S.filter="none"),S.canvas}applyTransferMapsToBitmap(S){if(this.current.transferMaps==="none")return S.bitmap;const{bitmap:w,width:y,height:O}=S,H=this.cachedCanvases.getCanvas("inlineImage",y,O),J=H.context;return J.filter=this.current.transferMaps,J.drawImage(w,0,0),J.filter="none",H.canvas}paintInlineImageXObject(S){if(!this.contentVisible)return;const w=S.width,y=S.height,O=this.ctx;if(this.save(),!c.isNodeJS){const{filter:K}=O;K!=="none"&&K!==""&&(O.filter="none")}O.scale(1/w,-1/y);let H;if(S.bitmap)H=this.applyTransferMapsToBitmap(S);else if(typeof HTMLElement=="function"&&S instanceof HTMLElement||!S.data)H=S;else{const m=this.cachedCanvases.getCanvas("inlineImage",w,y).context;Q(m,S),H=this.applyTransferMapsToCanvas(m)}const J=this._scaleImage(H,(0,_.getCurrentTransformInverse)(O));O.imageSmoothingEnabled=kt((0,_.getCurrentTransform)(O),S.interpolate),C(O,J.img,0,0,J.paintWidth,J.paintHeight,0,-y,w,y),this.compose(),this.restore()}paintInlineImageXObjectGroup(S,w){if(!this.contentVisible)return;const y=this.ctx;let O;if(S.bitmap)O=S.bitmap;else{const H=S.width,J=S.height,m=this.cachedCanvases.getCanvas("inlineImage",H,J).context;Q(m,S),O=this.applyTransferMapsToCanvas(m)}for(const H of w)y.save(),y.transform(...H.transform),y.scale(1,-1),C(y,O,H.x,H.y,H.w,H.h,0,-1,1,1),y.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(S){}markPointProps(S,w){}beginMarkedContent(S){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(S,w){S==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(w)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(S){const w=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(S);const y=this.ctx;this.pendingClip&&(w||(this.pendingClip===nt?y.clip("evenodd"):y.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),y.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const S=(0,_.getCurrentTransform)(this.ctx);if(S[1]===0&&S[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(S[0]),Math.abs(S[3]));else{const w=Math.abs(S[0]*S[3]-S[2]*S[1]),y=Math.hypot(S[0],S[2]),O=Math.hypot(S[1],S[3]);this._cachedGetSinglePixelWidth=Math.max(y,O)/w}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:S}=this.current,{a:w,b:y,c:O,d:H}=this.ctx.getTransform();let J,K;if(y===0&&O===0){const m=Math.abs(w),M=Math.abs(H);if(m===M)if(S===0)J=K=1/m;else{const z=m*S;J=K=z<1?1/z:1}else if(S===0)J=1/m,K=1/M;else{const z=m*S,W=M*S;J=z<1?1/z:1,K=W<1?1/W:1}}else{const m=Math.abs(w*H-y*O),M=Math.hypot(w,y),z=Math.hypot(O,H);if(S===0)J=z/m,K=M/m;else{const W=S*m;J=z>W?z/W:1,K=M>W?M/W:1}}this._cachedScaleForStroking[0]=J,this._cachedScaleForStroking[1]=K}return this._cachedScaleForStroking}rescaleAndStroke(S){const{ctx:w}=this,{lineWidth:y}=this.current,[O,H]=this.getScaleForStroking();if(w.lineWidth=y||1,O===1&&H===1){w.stroke();return}const J=w.getLineDash();if(S&&w.save(),w.scale(O,H),J.length>0){const K=Math.max(O,H);w.setLineDash(J.map(m=>m/K)),w.lineDashOffset/=K}w.stroke(),S&&w.restore()}isContentVisible(){for(let S=this.markedContentStack.length-1;S>=0;S--)if(!this.markedContentStack[S].visible)return!1;return!0}}f.CanvasGraphics=Y;for(const k in c.OPS)Y.prototype[k]!==void 0&&(Y.prototype[c.OPS[k]]=Y.prototype[k])}),((R,f,D)=>{Object.defineProperty(f,"__esModule",{value:!0}),f.TilingPattern=f.PathType=void 0,f.getShadingPattern=g;var c=D(1),_=D(6);const B={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};f.PathType=B;function N(C,x){if(!x)return;const I=x[2]-x[0],Q=x[3]-x[1],V=new Path2D;V.rect(x[0],x[1],I,Q),C.clip(V)}class U{constructor(){this.constructor===U&&(0,c.unreachable)("Cannot initialize BaseShadingPattern.")}getPattern(){(0,c.unreachable)("Abstract method `getPattern` called.")}}class F extends U{constructor(x){super(),this._type=x[1],this._bbox=x[2],this._colorStops=x[3],this._p0=x[4],this._p1=x[5],this._r0=x[6],this._r1=x[7],this.matrix=null}_createGradient(x){let I;this._type==="axial"?I=x.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(I=x.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const Q of this._colorStops)I.addColorStop(Q[0],Q[1]);return I}getPattern(x,I,Q,V){let T;if(V===B.STROKE||V===B.FILL){const L=I.current.getClippedPathBoundingBox(V,(0,_.getCurrentTransform)(x))||[0,0,0,0],$=Math.ceil(L[2]-L[0])||1,rt=Math.ceil(L[3]-L[1])||1,et=I.cachedCanvases.getCanvas("pattern",$,rt,!0),yt=et.context;yt.clearRect(0,0,yt.canvas.width,yt.canvas.height),yt.beginPath(),yt.rect(0,0,yt.canvas.width,yt.canvas.height),yt.translate(-L[0],-L[1]),Q=c.Util.transform(Q,[1,0,0,1,L[0],L[1]]),yt.transform(...I.baseTransform),this.matrix&&yt.transform(...this.matrix),N(yt,this._bbox),yt.fillStyle=this._createGradient(yt),yt.fill(),T=x.createPattern(et.canvas,"no-repeat");const gt=new DOMMatrix(Q);T.setTransform(gt)}else N(x,this._bbox),T=this._createGradient(x);return T}}function u(C,x,I,Q,V,T,L,$){const rt=x.coords,et=x.colors,yt=C.data,gt=C.width*4;let kt;rt[I+1]>rt[Q+1]&&(kt=I,I=Q,Q=kt,kt=T,T=L,L=kt),rt[Q+1]>rt[V+1]&&(kt=Q,Q=V,V=kt,kt=L,L=$,$=kt),rt[I+1]>rt[Q+1]&&(kt=I,I=Q,Q=kt,kt=T,T=L,L=kt);const At=(rt[I]+x.offsetX)*x.scaleX,Ft=(rt[I+1]+x.offsetY)*x.scaleY,Xt=(rt[Q]+x.offsetX)*x.scaleX,nt=(rt[Q+1]+x.offsetY)*x.scaleY,Y=(rt[V]+x.offsetX)*x.scaleX,k=(rt[V+1]+x.offsetY)*x.scaleY;if(Ft>=k)return;const S=et[T],w=et[T+1],y=et[T+2],O=et[L],H=et[L+1],J=et[L+2],K=et[$],m=et[$+1],M=et[$+2],z=Math.round(Ft),W=Math.round(k);let G,it,at,jt,Yt,Rt,Nt,Pt;for(let Lt=z;Lt<=W;Lt++){if(Lt<nt){const le=Lt<Ft?0:(Ft-Lt)/(Ft-nt);G=At-(At-Xt)*le,it=S-(S-O)*le,at=w-(w-H)*le,jt=y-(y-J)*le}else{let le;Lt>k?le=1:nt===k?le=0:le=(nt-Lt)/(nt-k),G=Xt-(Xt-Y)*le,it=O-(O-K)*le,at=H-(H-m)*le,jt=J-(J-M)*le}let Ut;Lt<Ft?Ut=0:Lt>k?Ut=1:Ut=(Ft-Lt)/(Ft-k),Yt=At-(At-Y)*Ut,Rt=S-(S-K)*Ut,Nt=w-(w-m)*Ut,Pt=y-(y-M)*Ut;const Qt=Math.round(Math.min(G,Yt)),$t=Math.round(Math.max(G,Yt));let se=gt*Lt+Qt*4;for(let le=Qt;le<=$t;le++)Ut=(G-le)/(G-Yt),Ut<0?Ut=0:Ut>1&&(Ut=1),yt[se++]=it-(it-Rt)*Ut|0,yt[se++]=at-(at-Nt)*Ut|0,yt[se++]=jt-(jt-Pt)*Ut|0,yt[se++]=255}}function o(C,x,I){const Q=x.coords,V=x.colors;let T,L;switch(x.type){case"lattice":const $=x.verticesPerRow,rt=Math.floor(Q.length/$)-1,et=$-1;for(T=0;T<rt;T++){let yt=T*$;for(let gt=0;gt<et;gt++,yt++)u(C,I,Q[yt],Q[yt+1],Q[yt+$],V[yt],V[yt+1],V[yt+$]),u(C,I,Q[yt+$+1],Q[yt+1],Q[yt+$],V[yt+$+1],V[yt+1],V[yt+$])}break;case"triangles":for(T=0,L=Q.length;T<L;T+=3)u(C,I,Q[T],Q[T+1],Q[T+2],V[T],V[T+1],V[T+2]);break;default:throw new Error("illegal figure")}}class d extends U{constructor(x){super(),this._coords=x[2],this._colors=x[3],this._figures=x[4],this._bounds=x[5],this._bbox=x[7],this._background=x[8],this.matrix=null}_createMeshCanvas(x,I,Q){const $=Math.floor(this._bounds[0]),rt=Math.floor(this._bounds[1]),et=Math.ceil(this._bounds[2])-$,yt=Math.ceil(this._bounds[3])-rt,gt=Math.min(Math.ceil(Math.abs(et*x[0]*1.1)),3e3),kt=Math.min(Math.ceil(Math.abs(yt*x[1]*1.1)),3e3),At=et/gt,Ft=yt/kt,Xt={coords:this._coords,colors:this._colors,offsetX:-$,offsetY:-rt,scaleX:1/At,scaleY:1/Ft},nt=gt+4,Y=kt+4,k=Q.getCanvas("mesh",nt,Y,!1),S=k.context,w=S.createImageData(gt,kt);if(I){const O=w.data;for(let H=0,J=O.length;H<J;H+=4)O[H]=I[0],O[H+1]=I[1],O[H+2]=I[2],O[H+3]=255}for(const O of this._figures)o(w,O,Xt);return S.putImageData(w,2,2),{canvas:k.canvas,offsetX:$-2*At,offsetY:rt-2*Ft,scaleX:At,scaleY:Ft}}getPattern(x,I,Q,V){N(x,this._bbox);let T;if(V===B.SHADING)T=c.Util.singularValueDecompose2dScale((0,_.getCurrentTransform)(x));else if(T=c.Util.singularValueDecompose2dScale(I.baseTransform),this.matrix){const $=c.Util.singularValueDecompose2dScale(this.matrix);T=[T[0]*$[0],T[1]*$[1]]}const L=this._createMeshCanvas(T,V===B.SHADING?null:this._background,I.cachedCanvases);return V!==B.SHADING&&(x.setTransform(...I.baseTransform),this.matrix&&x.transform(...this.matrix)),x.translate(L.offsetX,L.offsetY),x.scale(L.scaleX,L.scaleY),x.createPattern(L.canvas,"no-repeat")}}class b extends U{getPattern(){return"hotpink"}}function g(C){switch(C[0]){case"RadialAxial":return new F(C);case"Mesh":return new d(C);case"Dummy":return new b}throw new Error(`Unknown IR type: ${C[0]}`)}const h={COLORED:1,UNCOLORED:2};class E{static MAX_PATTERN_SIZE=3e3;constructor(x,I,Q,V,T){this.operatorList=x[2],this.matrix=x[3]||[1,0,0,1,0,0],this.bbox=x[4],this.xstep=x[5],this.ystep=x[6],this.paintType=x[7],this.tilingType=x[8],this.color=I,this.ctx=Q,this.canvasGraphicsFactory=V,this.baseTransform=T}createPatternCanvas(x){const I=this.operatorList,Q=this.bbox,V=this.xstep,T=this.ystep,L=this.paintType,$=this.tilingType,rt=this.color,et=this.canvasGraphicsFactory;(0,c.info)("TilingType: "+$);const yt=Q[0],gt=Q[1],kt=Q[2],At=Q[3],Ft=c.Util.singularValueDecompose2dScale(this.matrix),Xt=c.Util.singularValueDecompose2dScale(this.baseTransform),nt=[Ft[0]*Xt[0],Ft[1]*Xt[1]],Y=this.getSizeAndScale(V,this.ctx.canvas.width,nt[0]),k=this.getSizeAndScale(T,this.ctx.canvas.height,nt[1]),S=x.cachedCanvases.getCanvas("pattern",Y.size,k.size,!0),w=S.context,y=et.createCanvasGraphics(w);y.groupLevel=x.groupLevel,this.setFillAndStrokeStyleToContext(y,L,rt);let O=yt,H=gt,J=kt,K=At;return yt<0&&(O=0,J+=Math.abs(yt)),gt<0&&(H=0,K+=Math.abs(gt)),w.translate(-(Y.scale*O),-(k.scale*H)),y.transform(Y.scale,0,0,k.scale,0,0),w.save(),this.clipBbox(y,O,H,J,K),y.baseTransform=(0,_.getCurrentTransform)(y.ctx),y.executeOperatorList(I),y.endDrawing(),{canvas:S.canvas,scaleX:Y.scale,scaleY:k.scale,offsetX:O,offsetY:H}}getSizeAndScale(x,I,Q){x=Math.abs(x);const V=Math.max(E.MAX_PATTERN_SIZE,I);let T=Math.ceil(x*Q);return T>=V?T=V:Q=T/x,{scale:Q,size:T}}clipBbox(x,I,Q,V,T){const L=V-I,$=T-Q;x.ctx.rect(I,Q,L,$),x.current.updateRectMinMax((0,_.getCurrentTransform)(x.ctx),[I,Q,V,T]),x.clip(),x.endPath()}setFillAndStrokeStyleToContext(x,I,Q){const V=x.ctx,T=x.current;switch(I){case h.COLORED:const L=this.ctx;V.fillStyle=L.fillStyle,V.strokeStyle=L.strokeStyle,T.fillColor=L.fillStyle,T.strokeColor=L.strokeStyle;break;case h.UNCOLORED:const $=c.Util.makeHexColor(Q[0],Q[1],Q[2]);V.fillStyle=$,V.strokeStyle=$,T.fillColor=$,T.strokeColor=$;break;default:throw new c.FormatError(`Unsupported paint type: ${I}`)}}getPattern(x,I,Q,V){let T=Q;V!==B.SHADING&&(T=c.Util.transform(T,I.baseTransform),this.matrix&&(T=c.Util.transform(T,this.matrix)));const L=this.createPatternCanvas(I);let $=new DOMMatrix(T);$=$.translate(L.offsetX,L.offsetY),$=$.scale(1/L.scaleX,1/L.scaleY);const rt=x.createPattern(L.canvas,"repeat");return rt.setTransform($),rt}}f.TilingPattern=E}),((R,f,D)=>{Object.defineProperty(f,"__esModule",{value:!0}),f.convertBlackAndWhiteToRGBA=B,f.convertToRGBA=_,f.grayToRGBA=U;var c=D(1);function _(F){switch(F.kind){case c.ImageKind.GRAYSCALE_1BPP:return B(F);case c.ImageKind.RGB_24BPP:return N(F)}return null}function B({src:F,srcPos:u=0,dest:o,width:d,height:b,nonBlackColor:g=4294967295,inverseDecode:h=!1}){const E=c.FeatureTest.isLittleEndian?4278190080:255,[C,x]=h?[g,E]:[E,g],I=d>>3,Q=d&7,V=F.length;o=new Uint32Array(o.buffer);let T=0;for(let L=0;L<b;L++){for(const rt=u+I;u<rt;u++){const et=u<V?F[u]:255;o[T++]=et&128?x:C,o[T++]=et&64?x:C,o[T++]=et&32?x:C,o[T++]=et&16?x:C,o[T++]=et&8?x:C,o[T++]=et&4?x:C,o[T++]=et&2?x:C,o[T++]=et&1?x:C}if(Q===0)continue;const $=u<V?F[u++]:255;for(let rt=0;rt<Q;rt++)o[T++]=$&1<<7-rt?x:C}return{srcPos:u,destPos:T}}function N({src:F,srcPos:u=0,dest:o,destPos:d=0,width:b,height:g}){let h=0;const E=F.length>>2,C=new Uint32Array(F.buffer,u,E);if(c.FeatureTest.isLittleEndian){for(;h<E-2;h+=3,d+=4){const x=C[h],I=C[h+1],Q=C[h+2];o[d]=x|4278190080,o[d+1]=x>>>24|I<<8|4278190080,o[d+2]=I>>>16|Q<<16|4278190080,o[d+3]=Q>>>8|4278190080}for(let x=h*4,I=F.length;x<I;x+=3)o[d++]=F[x]|F[x+1]<<8|F[x+2]<<16|4278190080}else{for(;h<E-2;h+=3,d+=4){const x=C[h],I=C[h+1],Q=C[h+2];o[d]=x|255,o[d+1]=x<<24|I>>>8|255,o[d+2]=I<<16|Q>>>16|255,o[d+3]=Q<<8|255}for(let x=h*4,I=F.length;x<I;x+=3)o[d++]=F[x]<<24|F[x+1]<<16|F[x+2]<<8|255}return{srcPos:u,destPos:d}}function U(F,u){if(c.FeatureTest.isLittleEndian)for(let o=0,d=F.length;o<d;o++)u[o]=F[o]*65793|4278190080;else for(let o=0,d=F.length;o<d;o++)u[o]=F[o]*16843008|255}}),((R,f)=>{Object.defineProperty(f,"__esModule",{value:!0}),f.GlobalWorkerOptions=void 0;const D=Object.create(null);f.GlobalWorkerOptions=D,D.workerPort=null,D.workerSrc=""}),((R,f,D)=>{Object.defineProperty(f,"__esModule",{value:!0}),f.MessageHandler=void 0;var c=D(1);const _={DATA:1,ERROR:2},B={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function N(F){switch(F instanceof Error||typeof F=="object"&&F!==null||(0,c.unreachable)('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),F.name){case"AbortException":return new c.AbortException(F.message);case"MissingPDFException":return new c.MissingPDFException(F.message);case"PasswordException":return new c.PasswordException(F.message,F.code);case"UnexpectedResponseException":return new c.UnexpectedResponseException(F.message,F.status);case"UnknownErrorException":return new c.UnknownErrorException(F.message,F.details);default:return new c.UnknownErrorException(F.message,F.toString())}}class U{constructor(u,o,d){this.sourceName=u,this.targetName=o,this.comObj=d,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),this._onComObjOnMessage=b=>{const g=b.data;if(g.targetName!==this.sourceName)return;if(g.stream){this.#e(g);return}if(g.callback){const E=g.callbackId,C=this.callbackCapabilities[E];if(!C)throw new Error(`Cannot resolve callback ${E}`);if(delete this.callbackCapabilities[E],g.callback===_.DATA)C.resolve(g.data);else if(g.callback===_.ERROR)C.reject(N(g.reason));else throw new Error("Unexpected callback case");return}const h=this.actionHandler[g.action];if(!h)throw new Error(`Unknown action from worker: ${g.action}`);if(g.callbackId){const E=this.sourceName,C=g.sourceName;new Promise(function(x){x(h(g.data))}).then(function(x){d.postMessage({sourceName:E,targetName:C,callback:_.DATA,callbackId:g.callbackId,data:x})},function(x){d.postMessage({sourceName:E,targetName:C,callback:_.ERROR,callbackId:g.callbackId,reason:N(x)})});return}if(g.streamId){this.#t(g);return}h(g.data)},d.addEventListener("message",this._onComObjOnMessage)}on(u,o){const d=this.actionHandler;if(d[u])throw new Error(`There is already an actionName called "${u}"`);d[u]=o}send(u,o,d){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:u,data:o},d)}sendWithPromise(u,o,d){const b=this.callbackId++,g=new c.PromiseCapability;this.callbackCapabilities[b]=g;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:u,callbackId:b,data:o},d)}catch(h){g.reject(h)}return g.promise}sendWithStream(u,o,d,b){const g=this.streamId++,h=this.sourceName,E=this.targetName,C=this.comObj;return new ReadableStream({start:x=>{const I=new c.PromiseCapability;return this.streamControllers[g]={controller:x,startCall:I,pullCall:null,cancelCall:null,isClosed:!1},C.postMessage({sourceName:h,targetName:E,action:u,streamId:g,data:o,desiredSize:x.desiredSize},b),I.promise},pull:x=>{const I=new c.PromiseCapability;return this.streamControllers[g].pullCall=I,C.postMessage({sourceName:h,targetName:E,stream:B.PULL,streamId:g,desiredSize:x.desiredSize}),I.promise},cancel:x=>{(0,c.assert)(x instanceof Error,"cancel must have a valid reason");const I=new c.PromiseCapability;return this.streamControllers[g].cancelCall=I,this.streamControllers[g].isClosed=!0,C.postMessage({sourceName:h,targetName:E,stream:B.CANCEL,streamId:g,reason:N(x)}),I.promise}},d)}#t(u){const o=u.streamId,d=this.sourceName,b=u.sourceName,g=this.comObj,h=this,E=this.actionHandler[u.action],C={enqueue(x,I=1,Q){if(this.isCancelled)return;const V=this.desiredSize;this.desiredSize-=I,V>0&&this.desiredSize<=0&&(this.sinkCapability=new c.PromiseCapability,this.ready=this.sinkCapability.promise),g.postMessage({sourceName:d,targetName:b,stream:B.ENQUEUE,streamId:o,chunk:x},Q)},close(){this.isCancelled||(this.isCancelled=!0,g.postMessage({sourceName:d,targetName:b,stream:B.CLOSE,streamId:o}),delete h.streamSinks[o])},error(x){(0,c.assert)(x instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,g.postMessage({sourceName:d,targetName:b,stream:B.ERROR,streamId:o,reason:N(x)}))},sinkCapability:new c.PromiseCapability,onPull:null,onCancel:null,isCancelled:!1,desiredSize:u.desiredSize,ready:null};C.sinkCapability.resolve(),C.ready=C.sinkCapability.promise,this.streamSinks[o]=C,new Promise(function(x){x(E(u.data,C))}).then(function(){g.postMessage({sourceName:d,targetName:b,stream:B.START_COMPLETE,streamId:o,success:!0})},function(x){g.postMessage({sourceName:d,targetName:b,stream:B.START_COMPLETE,streamId:o,reason:N(x)})})}#e(u){const o=u.streamId,d=this.sourceName,b=u.sourceName,g=this.comObj,h=this.streamControllers[o],E=this.streamSinks[o];switch(u.stream){case B.START_COMPLETE:u.success?h.startCall.resolve():h.startCall.reject(N(u.reason));break;case B.PULL_COMPLETE:u.success?h.pullCall.resolve():h.pullCall.reject(N(u.reason));break;case B.PULL:if(!E){g.postMessage({sourceName:d,targetName:b,stream:B.PULL_COMPLETE,streamId:o,success:!0});break}E.desiredSize<=0&&u.desiredSize>0&&E.sinkCapability.resolve(),E.desiredSize=u.desiredSize,new Promise(function(C){C(E.onPull?.())}).then(function(){g.postMessage({sourceName:d,targetName:b,stream:B.PULL_COMPLETE,streamId:o,success:!0})},function(C){g.postMessage({sourceName:d,targetName:b,stream:B.PULL_COMPLETE,streamId:o,reason:N(C)})});break;case B.ENQUEUE:if((0,c.assert)(h,"enqueue should have stream controller"),h.isClosed)break;h.controller.enqueue(u.chunk);break;case B.CLOSE:if((0,c.assert)(h,"close should have stream controller"),h.isClosed)break;h.isClosed=!0,h.controller.close(),this.#n(h,o);break;case B.ERROR:(0,c.assert)(h,"error should have stream controller"),h.controller.error(N(u.reason)),this.#n(h,o);break;case B.CANCEL_COMPLETE:u.success?h.cancelCall.resolve():h.cancelCall.reject(N(u.reason)),this.#n(h,o);break;case B.CANCEL:if(!E)break;new Promise(function(C){C(E.onCancel?.(N(u.reason)))}).then(function(){g.postMessage({sourceName:d,targetName:b,stream:B.CANCEL_COMPLETE,streamId:o,success:!0})},function(C){g.postMessage({sourceName:d,targetName:b,stream:B.CANCEL_COMPLETE,streamId:o,reason:N(C)})}),E.sinkCapability.reject(N(u.reason)),E.isCancelled=!0,delete this.streamSinks[o];break;default:throw new Error("Unexpected stream case")}}async#n(u,o){await Promise.allSettled([u.startCall?.promise,u.pullCall?.promise,u.cancelCall?.promise]),delete this.streamControllers[o]}destroy(){this.comObj.removeEventListener("message",this._onComObjOnMessage)}}f.MessageHandler=U}),((R,f,D)=>{Object.defineProperty(f,"__esModule",{value:!0}),f.Metadata=void 0;var c=D(1);class _{#t;#e;constructor({parsedData:N,rawData:U}){this.#t=N,this.#e=U}getRaw(){return this.#e}get(N){return this.#t.get(N)??null}getAll(){return(0,c.objectFromMap)(this.#t)}has(N){return this.#t.has(N)}}f.Metadata=_}),((R,f,D)=>{Object.defineProperty(f,"__esModule",{value:!0}),f.OptionalContentConfig=void 0;var c=D(1),_=D(8);const B=Symbol("INTERNAL");class N{#t=!0;constructor(u,o){this.name=u,this.intent=o}get visible(){return this.#t}_setVisible(u,o){u!==B&&(0,c.unreachable)("Internal method `_setVisible` called."),this.#t=o}}class U{#t=null;#e=new Map;#n=null;#i=null;constructor(u){if(this.name=null,this.creator=null,u!==null){this.name=u.name,this.creator=u.creator,this.#i=u.order;for(const o of u.groups)this.#e.set(o.id,new N(o.name,o.intent));if(u.baseState==="OFF")for(const o of this.#e.values())o._setVisible(B,!1);for(const o of u.on)this.#e.get(o)._setVisible(B,!0);for(const o of u.off)this.#e.get(o)._setVisible(B,!1);this.#n=this.getHash()}}#o(u){const o=u.length;if(o<2)return!0;const d=u[0];for(let b=1;b<o;b++){const g=u[b];let h;if(Array.isArray(g))h=this.#o(g);else if(this.#e.has(g))h=this.#e.get(g).visible;else return(0,c.warn)(`Optional content group not found: ${g}`),!0;switch(d){case"And":if(!h)return!1;break;case"Or":if(h)return!0;break;case"Not":return!h;default:return!0}}return d==="And"}isVisible(u){if(this.#e.size===0)return!0;if(!u)return(0,c.warn)("Optional content group not defined."),!0;if(u.type==="OCG")return this.#e.has(u.id)?this.#e.get(u.id).visible:((0,c.warn)(`Optional content group not found: ${u.id}`),!0);if(u.type==="OCMD"){if(u.expression)return this.#o(u.expression);if(!u.policy||u.policy==="AnyOn"){for(const o of u.ids){if(!this.#e.has(o))return(0,c.warn)(`Optional content group not found: ${o}`),!0;if(this.#e.get(o).visible)return!0}return!1}else if(u.policy==="AllOn"){for(const o of u.ids){if(!this.#e.has(o))return(0,c.warn)(`Optional content group not found: ${o}`),!0;if(!this.#e.get(o).visible)return!1}return!0}else if(u.policy==="AnyOff"){for(const o of u.ids){if(!this.#e.has(o))return(0,c.warn)(`Optional content group not found: ${o}`),!0;if(!this.#e.get(o).visible)return!0}return!1}else if(u.policy==="AllOff"){for(const o of u.ids){if(!this.#e.has(o))return(0,c.warn)(`Optional content group not found: ${o}`),!0;if(this.#e.get(o).visible)return!1}return!0}return(0,c.warn)(`Unknown optional content policy ${u.policy}.`),!0}return(0,c.warn)(`Unknown group type ${u.type}.`),!0}setVisibility(u,o=!0){if(!this.#e.has(u)){(0,c.warn)(`Optional content group not found: ${u}`);return}this.#e.get(u)._setVisible(B,!!o),this.#t=null}get hasInitialVisibility(){return this.#n===null||this.getHash()===this.#n}getOrder(){return this.#e.size?this.#i?this.#i.slice():[...this.#e.keys()]:null}getGroups(){return this.#e.size>0?(0,c.objectFromMap)(this.#e):null}getGroup(u){return this.#e.get(u)||null}getHash(){if(this.#t!==null)return this.#t;const u=new _.MurmurHash3_64;for(const[o,d]of this.#e)u.update(`${o}:${d.visible}`);return this.#t=u.hexdigest()}}f.OptionalContentConfig=U}),((R,f,D)=>{Object.defineProperty(f,"__esModule",{value:!0}),f.PDFDataTransportStream=void 0;var c=D(1),_=D(6);class B{constructor({length:u,initialData:o,progressiveDone:d=!1,contentDispositionFilename:b=null,disableRange:g=!1,disableStream:h=!1},E){if((0,c.assert)(E,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.'),this._queuedChunks=[],this._progressiveDone=d,this._contentDispositionFilename=b,o?.length>0){const C=o instanceof Uint8Array&&o.byteLength===o.buffer.byteLength?o.buffer:new Uint8Array(o).buffer;this._queuedChunks.push(C)}this._pdfDataRangeTransport=E,this._isStreamingSupported=!h,this._isRangeSupported=!g,this._contentLength=u,this._fullRequestReader=null,this._rangeReaders=[],this._pdfDataRangeTransport.addRangeListener((C,x)=>{this._onReceiveData({begin:C,chunk:x})}),this._pdfDataRangeTransport.addProgressListener((C,x)=>{this._onProgress({loaded:C,total:x})}),this._pdfDataRangeTransport.addProgressiveReadListener(C=>{this._onReceiveData({chunk:C})}),this._pdfDataRangeTransport.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),this._pdfDataRangeTransport.transportReady()}_onReceiveData({begin:u,chunk:o}){const d=o instanceof Uint8Array&&o.byteLength===o.buffer.byteLength?o.buffer:new Uint8Array(o).buffer;if(u===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(d):this._queuedChunks.push(d);else{const b=this._rangeReaders.some(function(g){return g._begin!==u?!1:(g._enqueue(d),!0)});(0,c.assert)(b,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}_onProgress(u){u.total===void 0?this._rangeReaders[0]?.onProgress?.({loaded:u.loaded}):this._fullRequestReader?.onProgress?.({loaded:u.loaded,total:u.total})}_onProgressiveDone(){this._fullRequestReader?.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(u){const o=this._rangeReaders.indexOf(u);o>=0&&this._rangeReaders.splice(o,1)}getFullReader(){(0,c.assert)(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const u=this._queuedChunks;return this._queuedChunks=null,new N(this,u,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(u,o){if(o<=this._progressiveDataLength)return null;const d=new U(this,u,o);return this._pdfDataRangeTransport.requestDataRange(u,o),this._rangeReaders.push(d),d}cancelAllRequests(u){this._fullRequestReader?.cancel(u);for(const o of this._rangeReaders.slice(0))o.cancel(u);this._pdfDataRangeTransport.abort()}}f.PDFDataTransportStream=B;class N{constructor(u,o,d=!1,b=null){this._stream=u,this._done=d||!1,this._filename=(0,_.isPdfFile)(b)?b:null,this._queuedChunks=o||[],this._loaded=0;for(const g of this._queuedChunks)this._loaded+=g.byteLength;this._requests=[],this._headersReady=Promise.resolve(),u._fullRequestReader=this,this.onProgress=null}_enqueue(u){this._done||(this._requests.length>0?this._requests.shift().resolve({value:u,done:!1}):this._queuedChunks.push(u),this._loaded+=u.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const u=new c.PromiseCapability;return this._requests.push(u),u.promise}cancel(u){this._done=!0;for(const o of this._requests)o.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class U{constructor(u,o,d){this._stream=u,this._begin=o,this._end=d,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(u){if(!this._done){if(this._requests.length===0)this._queuedChunk=u;else{this._requests.shift().resolve({value:u,done:!1});for(const d of this._requests)d.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const o=this._queuedChunk;return this._queuedChunk=null,{value:o,done:!1}}if(this._done)return{value:void 0,done:!0};const u=new c.PromiseCapability;return this._requests.push(u),u.promise}cancel(u){this._done=!0;for(const o of this._requests)o.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}}),((R,f,D)=>{Object.defineProperty(f,"__esModule",{value:!0}),f.PDFFetchStream=void 0;var c=D(1),_=D(20);function B(d,b,g){return{method:"GET",headers:d,signal:g.signal,mode:"cors",credentials:b?"include":"same-origin",redirect:"follow"}}function N(d){const b=new Headers;for(const g in d){const h=d[g];h!==void 0&&b.append(g,h)}return b}function U(d){return d instanceof Uint8Array?d.buffer:d instanceof ArrayBuffer?d:((0,c.warn)(`getArrayBuffer - unexpected data format: ${d}`),new Uint8Array(d).buffer)}class F{constructor(b){this.source=b,this.isHttp=/^https?:/i.test(b.url),this.httpHeaders=this.isHttp&&b.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return(0,c.assert)(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new u(this),this._fullRequestReader}getRangeReader(b,g){if(g<=this._progressiveDataLength)return null;const h=new o(this,b,g);return this._rangeRequestReaders.push(h),h}cancelAllRequests(b){this._fullRequestReader?.cancel(b);for(const g of this._rangeRequestReaders.slice(0))g.cancel(b)}}f.PDFFetchStream=F;class u{constructor(b){this._stream=b,this._reader=null,this._loaded=0,this._filename=null;const g=b.source;this._withCredentials=g.withCredentials||!1,this._contentLength=g.length,this._headersCapability=new c.PromiseCapability,this._disableRange=g.disableRange||!1,this._rangeChunkSize=g.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!g.disableStream,this._isRangeSupported=!g.disableRange,this._headers=N(this._stream.httpHeaders);const h=g.url;fetch(h,B(this._headers,this._withCredentials,this._abortController)).then(E=>{if(!(0,_.validateResponseStatus)(E.status))throw(0,_.createResponseStatusError)(E.status,h);this._reader=E.body.getReader(),this._headersCapability.resolve();const C=Q=>E.headers.get(Q),{allowRangeRequests:x,suggestedLength:I}=(0,_.validateRangeRequestCapabilities)({getResponseHeader:C,isHttp:this._stream.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=x,this._contentLength=I||this._contentLength,this._filename=(0,_.extractFilenameFromHeader)(C),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new c.AbortException("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._headersCapability.promise;const{value:b,done:g}=await this._reader.read();return g?{value:b,done:g}:(this._loaded+=b.byteLength,this.onProgress?.({loaded:this._loaded,total:this._contentLength}),{value:U(b),done:!1})}cancel(b){this._reader?.cancel(b),this._abortController.abort()}}class o{constructor(b,g,h){this._stream=b,this._reader=null,this._loaded=0;const E=b.source;this._withCredentials=E.withCredentials||!1,this._readCapability=new c.PromiseCapability,this._isStreamingSupported=!E.disableStream,this._abortController=new AbortController,this._headers=N(this._stream.httpHeaders),this._headers.append("Range",`bytes=${g}-${h-1}`);const C=E.url;fetch(C,B(this._headers,this._withCredentials,this._abortController)).then(x=>{if(!(0,_.validateResponseStatus)(x.status))throw(0,_.createResponseStatusError)(x.status,C);this._readCapability.resolve(),this._reader=x.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._readCapability.promise;const{value:b,done:g}=await this._reader.read();return g?{value:b,done:g}:(this._loaded+=b.byteLength,this.onProgress?.({loaded:this._loaded}),{value:U(b),done:!1})}cancel(b){this._reader?.cancel(b),this._abortController.abort()}}}),((R,f,D)=>{Object.defineProperty(f,"__esModule",{value:!0}),f.createResponseStatusError=F,f.extractFilenameFromHeader=U,f.validateRangeRequestCapabilities=N,f.validateResponseStatus=u;var c=D(1),_=D(21),B=D(6);function N({getResponseHeader:o,isHttp:d,rangeChunkSize:b,disableRange:g}){const h={allowRangeRequests:!1,suggestedLength:void 0},E=parseInt(o("Content-Length"),10);return!Number.isInteger(E)||(h.suggestedLength=E,E<=2*b)||g||!d||o("Accept-Ranges")!=="bytes"||(o("Content-Encoding")||"identity")!=="identity"||(h.allowRangeRequests=!0),h}function U(o){const d=o("Content-Disposition");if(d){let b=(0,_.getFilenameFromContentDispositionHeader)(d);if(b.includes("%"))try{b=decodeURIComponent(b)}catch{}if((0,B.isPdfFile)(b))return b}return null}function F(o,d){return o===404||o===0&&d.startsWith("file:")?new c.MissingPDFException('Missing PDF "'+d+'".'):new c.UnexpectedResponseException(`Unexpected server response (${o}) while retrieving PDF "${d}".`,o)}function u(o){return o===200||o===206}}),((R,f,D)=>{Object.defineProperty(f,"__esModule",{value:!0}),f.getFilenameFromContentDispositionHeader=_;var c=D(1);function _(B){let N=!0,U=F("filename\\*","i").exec(B);if(U){U=U[1];let E=b(U);return E=unescape(E),E=g(E),E=h(E),o(E)}if(U=d(B),U){const E=h(U);return o(E)}if(U=F("filename","i").exec(B),U){U=U[1];let E=b(U);return E=h(E),o(E)}function F(E,C){return new RegExp("(?:^|;)\\s*"+E+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',C)}function u(E,C){if(E){if(!/^[\x00-\xFF]+$/.test(C))return C;try{const x=new TextDecoder(E,{fatal:!0}),I=(0,c.stringToBytes)(C);C=x.decode(I),N=!1}catch{}}return C}function o(E){return N&&/[\x80-\xff]/.test(E)&&(E=u("utf-8",E),N&&(E=u("iso-8859-1",E))),E}function d(E){const C=[];let x;const I=F("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(x=I.exec(E))!==null;){let[,V,T,L]=x;if(V=parseInt(V,10),V in C){if(V===0)break;continue}C[V]=[T,L]}const Q=[];for(let V=0;V<C.length&&V in C;++V){let[T,L]=C[V];L=b(L),T&&(L=unescape(L),V===0&&(L=g(L))),Q.push(L)}return Q.join("")}function b(E){if(E.startsWith('"')){const C=E.slice(1).split('\\"');for(let x=0;x<C.length;++x){const I=C[x].indexOf('"');I!==-1&&(C[x]=C[x].slice(0,I),C.length=x+1),C[x]=C[x].replaceAll(/\\(.)/g,"$1")}E=C.join('"')}return E}function g(E){const C=E.indexOf("'");if(C===-1)return E;const x=E.slice(0,C),Q=E.slice(C+1).replace(/^[^']*'/,"");return u(x,Q)}function h(E){return!E.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(E)?E:E.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(C,x,I,Q){if(I==="q"||I==="Q")return Q=Q.replaceAll("_"," "),Q=Q.replaceAll(/=([0-9a-fA-F]{2})/g,function(V,T){return String.fromCharCode(parseInt(T,16))}),u(x,Q);try{Q=atob(Q)}catch{}return u(x,Q)})}return""}}),((R,f,D)=>{Object.defineProperty(f,"__esModule",{value:!0}),f.PDFNetworkStream=void 0;var c=D(1),_=D(20);const B=200,N=206;function U(b){const g=b.response;return typeof g!="string"?g:(0,c.stringToBytes)(g).buffer}class F{constructor(g,h={}){this.url=g,this.isHttp=/^https?:/i.test(g),this.httpHeaders=this.isHttp&&h.httpHeaders||Object.create(null),this.withCredentials=h.withCredentials||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}requestRange(g,h,E){const C={begin:g,end:h};for(const x in E)C[x]=E[x];return this.request(C)}requestFull(g){return this.request(g)}request(g){const h=new XMLHttpRequest,E=this.currXhrId++,C=this.pendingRequests[E]={xhr:h};h.open("GET",this.url),h.withCredentials=this.withCredentials;for(const x in this.httpHeaders){const I=this.httpHeaders[x];I!==void 0&&h.setRequestHeader(x,I)}return this.isHttp&&"begin"in g&&"end"in g?(h.setRequestHeader("Range",`bytes=${g.begin}-${g.end-1}`),C.expectedStatus=N):C.expectedStatus=B,h.responseType="arraybuffer",g.onError&&(h.onerror=function(x){g.onError(h.status)}),h.onreadystatechange=this.onStateChange.bind(this,E),h.onprogress=this.onProgress.bind(this,E),C.onHeadersReceived=g.onHeadersReceived,C.onDone=g.onDone,C.onError=g.onError,C.onProgress=g.onProgress,h.send(null),E}onProgress(g,h){const E=this.pendingRequests[g];E&&E.onProgress?.(h)}onStateChange(g,h){const E=this.pendingRequests[g];if(!E)return;const C=E.xhr;if(C.readyState>=2&&E.onHeadersReceived&&(E.onHeadersReceived(),delete E.onHeadersReceived),C.readyState!==4||!(g in this.pendingRequests))return;if(delete this.pendingRequests[g],C.status===0&&this.isHttp){E.onError?.(C.status);return}const x=C.status||B;if(!(x===B&&E.expectedStatus===N)&&x!==E.expectedStatus){E.onError?.(C.status);return}const Q=U(C);if(x===N){const V=C.getResponseHeader("Content-Range"),T=/bytes (\d+)-(\d+)\/(\d+)/.exec(V);E.onDone({begin:parseInt(T[1],10),chunk:Q})}else Q?E.onDone({begin:0,chunk:Q}):E.onError?.(C.status)}getRequestXhr(g){return this.pendingRequests[g].xhr}isPendingRequest(g){return g in this.pendingRequests}abortRequest(g){const h=this.pendingRequests[g].xhr;delete this.pendingRequests[g],h.abort()}}class u{constructor(g){this._source=g,this._manager=new F(g.url,{httpHeaders:g.httpHeaders,withCredentials:g.withCredentials}),this._rangeChunkSize=g.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(g){const h=this._rangeRequestReaders.indexOf(g);h>=0&&this._rangeRequestReaders.splice(h,1)}getFullReader(){return(0,c.assert)(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new o(this._manager,this._source),this._fullRequestReader}getRangeReader(g,h){const E=new d(this._manager,g,h);return E.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(E),E}cancelAllRequests(g){this._fullRequestReader?.cancel(g);for(const h of this._rangeRequestReaders.slice(0))h.cancel(g)}}f.PDFNetworkStream=u;class o{constructor(g,h){this._manager=g;const E={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=h.url,this._fullRequestId=g.requestFull(E),this._headersReceivedCapability=new c.PromiseCapability,this._disableRange=h.disableRange||!1,this._contentLength=h.length,this._rangeChunkSize=h.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const g=this._fullRequestId,h=this._manager.getRequestXhr(g),E=I=>h.getResponseHeader(I),{allowRangeRequests:C,suggestedLength:x}=(0,_.validateRangeRequestCapabilities)({getResponseHeader:E,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});C&&(this._isRangeSupported=!0),this._contentLength=x||this._contentLength,this._filename=(0,_.extractFilenameFromHeader)(E),this._isRangeSupported&&this._manager.abortRequest(g),this._headersReceivedCapability.resolve()}_onDone(g){if(g&&(this._requests.length>0?this._requests.shift().resolve({value:g.chunk,done:!1}):this._cachedChunks.push(g.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const h of this._requests)h.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(g){this._storedError=(0,_.createResponseStatusError)(g,this._url),this._headersReceivedCapability.reject(this._storedError);for(const h of this._requests)h.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(g){this.onProgress?.({loaded:g.loaded,total:g.lengthComputable?g.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersReceivedCapability.promise}async read(){if(this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const g=new c.PromiseCapability;return this._requests.push(g),g.promise}cancel(g){this._done=!0,this._headersReceivedCapability.reject(g);for(const h of this._requests)h.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class d{constructor(g,h,E){this._manager=g;const C={onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=g.url,this._requestId=g.requestRange(h,E,C),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_close(){this.onClosed?.(this)}_onDone(g){const h=g.chunk;this._requests.length>0?this._requests.shift().resolve({value:h,done:!1}):this._queuedChunk=h,this._done=!0;for(const E of this._requests)E.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(g){this._storedError=(0,_.createResponseStatusError)(g,this._url);for(const h of this._requests)h.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(g){this.isStreamingSupported||this.onProgress?.({loaded:g.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const h=this._queuedChunk;return this._queuedChunk=null,{value:h,done:!1}}if(this._done)return{value:void 0,done:!0};const g=new c.PromiseCapability;return this._requests.push(g),g.promise}cancel(g){this._done=!0;for(const h of this._requests)h.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}}),((R,f,D)=>{Object.defineProperty(f,"__esModule",{value:!0}),f.PDFNodeStream=void 0;var c=D(1),_=D(20);const B=/^file:\/\/\/[a-zA-Z]:\//;function N(E){const C=require$$5,x=C.parse(E);return x.protocol==="file:"||x.host?x:/^[a-z]:[/\\]/i.test(E)?C.parse(`file:///${E}`):(x.host||(x.protocol="file:"),x)}class U{constructor(C){this.source=C,this.url=N(C.url),this.isHttp=this.url.protocol==="http:"||this.url.protocol==="https:",this.isFsUrl=this.url.protocol==="file:",this.httpHeaders=this.isHttp&&C.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return(0,c.assert)(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=this.isFsUrl?new g(this):new d(this),this._fullRequestReader}getRangeReader(C,x){if(x<=this._progressiveDataLength)return null;const I=this.isFsUrl?new h(this,C,x):new b(this,C,x);return this._rangeRequestReaders.push(I),I}cancelAllRequests(C){this._fullRequestReader?.cancel(C);for(const x of this._rangeRequestReaders.slice(0))x.cancel(C)}}f.PDFNodeStream=U;class F{constructor(C){this._url=C.url,this._done=!1,this._storedError=null,this.onProgress=null;const x=C.source;this._contentLength=x.length,this._loaded=0,this._filename=null,this._disableRange=x.disableRange||!1,this._rangeChunkSize=x.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!x.disableStream,this._isRangeSupported=!x.disableRange,this._readableStream=null,this._readCapability=new c.PromiseCapability,this._headersCapability=new c.PromiseCapability}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const C=this._readableStream.read();return C===null?(this._readCapability=new c.PromiseCapability,this.read()):(this._loaded+=C.length,this.onProgress?.({loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(C).buffer,done:!1})}cancel(C){if(!this._readableStream){this._error(C);return}this._readableStream.destroy(C)}_error(C){this._storedError=C,this._readCapability.resolve()}_setReadableStream(C){this._readableStream=C,C.on("readable",()=>{this._readCapability.resolve()}),C.on("end",()=>{C.destroy(),this._done=!0,this._readCapability.resolve()}),C.on("error",x=>{this._error(x)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new c.AbortException("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class u{constructor(C){this._url=C.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=new c.PromiseCapability;const x=C.source;this._isStreamingSupported=!x.disableStream}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const C=this._readableStream.read();return C===null?(this._readCapability=new c.PromiseCapability,this.read()):(this._loaded+=C.length,this.onProgress?.({loaded:this._loaded}),{value:new Uint8Array(C).buffer,done:!1})}cancel(C){if(!this._readableStream){this._error(C);return}this._readableStream.destroy(C)}_error(C){this._storedError=C,this._readCapability.resolve()}_setReadableStream(C){this._readableStream=C,C.on("readable",()=>{this._readCapability.resolve()}),C.on("end",()=>{C.destroy(),this._done=!0,this._readCapability.resolve()}),C.on("error",x=>{this._error(x)}),this._storedError&&this._readableStream.destroy(this._storedError)}}function o(E,C){return{protocol:E.protocol,auth:E.auth,host:E.hostname,port:E.port,path:E.path,method:"GET",headers:C}}class d extends F{constructor(C){super(C);const x=I=>{if(I.statusCode===404){const L=new c.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=L,this._headersCapability.reject(L);return}this._headersCapability.resolve(),this._setReadableStream(I);const Q=L=>this._readableStream.headers[L.toLowerCase()],{allowRangeRequests:V,suggestedLength:T}=(0,_.validateRangeRequestCapabilities)({getResponseHeader:Q,isHttp:C.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=V,this._contentLength=T||this._contentLength,this._filename=(0,_.extractFilenameFromHeader)(Q)};if(this._request=null,this._url.protocol==="http:"){const I=require$$5;this._request=I.request(o(this._url,C.httpHeaders),x)}else{const I=require$$5;this._request=I.request(o(this._url,C.httpHeaders),x)}this._request.on("error",I=>{this._storedError=I,this._headersCapability.reject(I)}),this._request.end()}}class b extends u{constructor(C,x,I){super(C),this._httpHeaders={};for(const V in C.httpHeaders){const T=C.httpHeaders[V];T!==void 0&&(this._httpHeaders[V]=T)}this._httpHeaders.Range=`bytes=${x}-${I-1}`;const Q=V=>{if(V.statusCode===404){const T=new c.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=T;return}this._setReadableStream(V)};if(this._request=null,this._url.protocol==="http:"){const V=require$$5;this._request=V.request(o(this._url,this._httpHeaders),Q)}else{const V=require$$5;this._request=V.request(o(this._url,this._httpHeaders),Q)}this._request.on("error",V=>{this._storedError=V}),this._request.end()}}class g extends F{constructor(C){super(C);let x=decodeURIComponent(this._url.path);B.test(this._url.href)&&(x=x.replace(/^\//,""));const I=require$$5;I.lstat(x,(Q,V)=>{if(Q){Q.code==="ENOENT"&&(Q=new c.MissingPDFException(`Missing PDF "${x}".`)),this._storedError=Q,this._headersCapability.reject(Q);return}this._contentLength=V.size,this._setReadableStream(I.createReadStream(x)),this._headersCapability.resolve()})}}class h extends u{constructor(C,x,I){super(C);let Q=decodeURIComponent(this._url.path);B.test(this._url.href)&&(Q=Q.replace(/^\//,""));const V=require$$5;this._setReadableStream(V.createReadStream(Q,{start:x,end:I-1}))}}}),((R,f,D)=>{Object.defineProperty(f,"__esModule",{value:!0}),f.SVGGraphics=void 0;var c=D(6),_=D(1);const B={fontStyle:"normal",fontWeight:"normal",fillColor:"#000000"},N="http://www.w3.org/XML/1998/namespace",U="http://www.w3.org/1999/xlink",F=["butt","round","square"],u=["miter","round","bevel"],o=function(V,T="",L=!1){if(URL.createObjectURL&&typeof Blob<"u"&&!L)return URL.createObjectURL(new Blob([V],{type:T}));const $="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let rt=`data:${T};base64,`;for(let et=0,yt=V.length;et<yt;et+=3){const gt=V[et]&255,kt=V[et+1]&255,At=V[et+2]&255,Ft=gt>>2,Xt=(gt&3)<<4|kt>>4,nt=et+1<yt?(kt&15)<<2|At>>6:64,Y=et+2<yt?At&63:64;rt+=$[Ft]+$[Xt]+$[nt]+$[Y]}return rt},d=(function(){const V=new Uint8Array([137,80,78,71,13,10,26,10]),T=12,L=new Int32Array(256);for(let At=0;At<256;At++){let Ft=At;for(let Xt=0;Xt<8;Xt++)Ft=Ft&1?3988292384^Ft>>1&2147483647:Ft>>1&2147483647;L[At]=Ft}function $(At,Ft,Xt){let nt=-1;for(let Y=Ft;Y<Xt;Y++){const k=(nt^At[Y])&255,S=L[k];nt=nt>>>8^S}return nt^-1}function rt(At,Ft,Xt,nt){let Y=nt;const k=Ft.length;Xt[Y]=k>>24&255,Xt[Y+1]=k>>16&255,Xt[Y+2]=k>>8&255,Xt[Y+3]=k&255,Y+=4,Xt[Y]=At.charCodeAt(0)&255,Xt[Y+1]=At.charCodeAt(1)&255,Xt[Y+2]=At.charCodeAt(2)&255,Xt[Y+3]=At.charCodeAt(3)&255,Y+=4,Xt.set(Ft,Y),Y+=Ft.length;const S=$(Xt,nt+4,Y);Xt[Y]=S>>24&255,Xt[Y+1]=S>>16&255,Xt[Y+2]=S>>8&255,Xt[Y+3]=S&255}function et(At,Ft,Xt){let nt=1,Y=0;for(let k=Ft;k<Xt;++k)nt=(nt+(At[k]&255))%65521,Y=(Y+nt)%65521;return Y<<16|nt}function yt(At){if(!_.isNodeJS)return gt(At);try{const Ft=parseInt(process.versions.node)>=8?At:Buffer.from(At),Xt=require$$5.deflateSync(Ft,{level:9});return Xt instanceof Uint8Array?Xt:new Uint8Array(Xt)}catch(Ft){(0,_.warn)("Not compressing PNG because zlib.deflateSync is unavailable: "+Ft)}return gt(At)}function gt(At){let Ft=At.length;const Xt=65535,nt=Math.ceil(Ft/Xt),Y=new Uint8Array(2+Ft+nt*5+4);let k=0;Y[k++]=120,Y[k++]=156;let S=0;for(;Ft>Xt;)Y[k++]=0,Y[k++]=255,Y[k++]=255,Y[k++]=0,Y[k++]=0,Y.set(At.subarray(S,S+Xt),k),k+=Xt,S+=Xt,Ft-=Xt;Y[k++]=1,Y[k++]=Ft&255,Y[k++]=Ft>>8&255,Y[k++]=~Ft&65535&255,Y[k++]=(~Ft&65535)>>8&255,Y.set(At.subarray(S),k),k+=At.length-S;const w=et(At,0,At.length);return Y[k++]=w>>24&255,Y[k++]=w>>16&255,Y[k++]=w>>8&255,Y[k++]=w&255,Y}function kt(At,Ft,Xt,nt){const Y=At.width,k=At.height;let S,w,y;const O=At.data;switch(Ft){case _.ImageKind.GRAYSCALE_1BPP:w=0,S=1,y=Y+7>>3;break;case _.ImageKind.RGB_24BPP:w=2,S=8,y=Y*3;break;case _.ImageKind.RGBA_32BPP:w=6,S=8,y=Y*4;break;default:throw new Error("invalid format")}const H=new Uint8Array((1+y)*k);let J=0,K=0;for(let it=0;it<k;++it)H[J++]=0,H.set(O.subarray(K,K+y),J),K+=y,J+=y;if(Ft===_.ImageKind.GRAYSCALE_1BPP&&nt){J=0;for(let it=0;it<k;it++){J++;for(let at=0;at<y;at++)H[J++]^=255}}const m=new Uint8Array([Y>>24&255,Y>>16&255,Y>>8&255,Y&255,k>>24&255,k>>16&255,k>>8&255,k&255,S,w,0,0,0]),M=yt(H),z=V.length+T*3+m.length+M.length,W=new Uint8Array(z);let G=0;return W.set(V,G),G+=V.length,rt("IHDR",m,W,G),G+=T+m.length,rt("IDATA",M,W,G),G+=T+M.length,rt("IEND",new Uint8Array(0),W,G),o(W,"image/png",Xt)}return function(Ft,Xt,nt){const Y=Ft.kind===void 0?_.ImageKind.GRAYSCALE_1BPP:Ft.kind;return kt(Ft,Y,Xt,nt)}})();class b{constructor(){this.fontSizeScale=1,this.fontWeight=B.fontWeight,this.fontSize=0,this.textMatrix=_.IDENTITY_MATRIX,this.fontMatrix=_.FONT_IDENTITY_MATRIX,this.leading=0,this.textRenderingMode=_.TextRenderingMode.FILL,this.textMatrixScale=1,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRise=0,this.fillColor=B.fillColor,this.strokeColor="#000000",this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.lineJoin="",this.lineCap="",this.miterLimit=0,this.dashArray=[],this.dashPhase=0,this.dependencies=[],this.activeClipUrl=null,this.clipGroup=null,this.maskId=""}clone(){return Object.create(this)}setCurrentPoint(T,L){this.x=T,this.y=L}}function g(V){let T=[];const L=[];for(const $ of V){if($.fn==="save"){T.push({fnId:92,fn:"group",items:[]}),L.push(T),T=T.at(-1).items;continue}$.fn==="restore"?T=L.pop():T.push($)}return T}function h(V){if(Number.isInteger(V))return V.toString();const T=V.toFixed(10);let L=T.length-1;if(T[L]!=="0")return T;do L--;while(T[L]==="0");return T.substring(0,T[L]==="."?L:L+1)}function E(V){if(V[4]===0&&V[5]===0){if(V[1]===0&&V[2]===0)return V[0]===1&&V[3]===1?"":`scale(${h(V[0])} ${h(V[3])})`;if(V[0]===V[3]&&V[1]===-V[2]){const T=Math.acos(V[0])*180/Math.PI;return`rotate(${h(T)})`}}else if(V[0]===1&&V[1]===0&&V[2]===0&&V[3]===1)return`translate(${h(V[4])} ${h(V[5])})`;return`matrix(${h(V[0])} ${h(V[1])} ${h(V[2])} ${h(V[3])} ${h(V[4])} ${h(V[5])})`}let C=0,x=0,I=0;class Q{constructor(T,L,$=!1){(0,c.deprecated)("The SVG back-end is no longer maintained and *may* be removed in the future."),this.svgFactory=new c.DOMSVGFactory,this.current=new b,this.transformMatrix=_.IDENTITY_MATRIX,this.transformStack=[],this.extraStack=[],this.commonObjs=T,this.objs=L,this.pendingClip=null,this.pendingEOFill=!1,this.embedFonts=!1,this.embeddedFonts=Object.create(null),this.cssStyle=null,this.forceDataSchema=!!$,this._operatorIdMapping=[];for(const rt in _.OPS)this._operatorIdMapping[_.OPS[rt]]=rt}getObject(T,L=null){return typeof T=="string"?T.startsWith("g_")?this.commonObjs.get(T):this.objs.get(T):L}save(){this.transformStack.push(this.transformMatrix);const T=this.current;this.extraStack.push(T),this.current=T.clone()}restore(){this.transformMatrix=this.transformStack.pop(),this.current=this.extraStack.pop(),this.pendingClip=null,this.tgrp=null}group(T){this.save(),this.executeOpTree(T),this.restore()}loadDependencies(T){const L=T.fnArray,$=T.argsArray;for(let rt=0,et=L.length;rt<et;rt++)if(L[rt]===_.OPS.dependency)for(const yt of $[rt]){const gt=yt.startsWith("g_")?this.commonObjs:this.objs,kt=new Promise(At=>{gt.get(yt,At)});this.current.dependencies.push(kt)}return Promise.all(this.current.dependencies)}transform(T,L,$,rt,et,yt){const gt=[T,L,$,rt,et,yt];this.transformMatrix=_.Util.transform(this.transformMatrix,gt),this.tgrp=null}getSVG(T,L){this.viewport=L;const $=this._initialize(L);return this.loadDependencies(T).then(()=>(this.transformMatrix=_.IDENTITY_MATRIX,this.executeOpTree(this.convertOpList(T)),$))}convertOpList(T){const L=this._operatorIdMapping,$=T.argsArray,rt=T.fnArray,et=[];for(let yt=0,gt=rt.length;yt<gt;yt++){const kt=rt[yt];et.push({fnId:kt,fn:L[kt],args:$[yt]})}return g(et)}executeOpTree(T){for(const L of T){const $=L.fn,rt=L.fnId,et=L.args;switch(rt|0){case _.OPS.beginText:this.beginText();break;case _.OPS.dependency:break;case _.OPS.setLeading:this.setLeading(et);break;case _.OPS.setLeadingMoveText:this.setLeadingMoveText(et[0],et[1]);break;case _.OPS.setFont:this.setFont(et);break;case _.OPS.showText:this.showText(et[0]);break;case _.OPS.showSpacedText:this.showText(et[0]);break;case _.OPS.endText:this.endText();break;case _.OPS.moveText:this.moveText(et[0],et[1]);break;case _.OPS.setCharSpacing:this.setCharSpacing(et[0]);break;case _.OPS.setWordSpacing:this.setWordSpacing(et[0]);break;case _.OPS.setHScale:this.setHScale(et[0]);break;case _.OPS.setTextMatrix:this.setTextMatrix(et[0],et[1],et[2],et[3],et[4],et[5]);break;case _.OPS.setTextRise:this.setTextRise(et[0]);break;case _.OPS.setTextRenderingMode:this.setTextRenderingMode(et[0]);break;case _.OPS.setLineWidth:this.setLineWidth(et[0]);break;case _.OPS.setLineJoin:this.setLineJoin(et[0]);break;case _.OPS.setLineCap:this.setLineCap(et[0]);break;case _.OPS.setMiterLimit:this.setMiterLimit(et[0]);break;case _.OPS.setFillRGBColor:this.setFillRGBColor(et[0],et[1],et[2]);break;case _.OPS.setStrokeRGBColor:this.setStrokeRGBColor(et[0],et[1],et[2]);break;case _.OPS.setStrokeColorN:this.setStrokeColorN(et);break;case _.OPS.setFillColorN:this.setFillColorN(et);break;case _.OPS.shadingFill:this.shadingFill(et[0]);break;case _.OPS.setDash:this.setDash(et[0],et[1]);break;case _.OPS.setRenderingIntent:this.setRenderingIntent(et[0]);break;case _.OPS.setFlatness:this.setFlatness(et[0]);break;case _.OPS.setGState:this.setGState(et[0]);break;case _.OPS.fill:this.fill();break;case _.OPS.eoFill:this.eoFill();break;case _.OPS.stroke:this.stroke();break;case _.OPS.fillStroke:this.fillStroke();break;case _.OPS.eoFillStroke:this.eoFillStroke();break;case _.OPS.clip:this.clip("nonzero");break;case _.OPS.eoClip:this.clip("evenodd");break;case _.OPS.paintSolidColorImageMask:this.paintSolidColorImageMask();break;case _.OPS.paintImageXObject:this.paintImageXObject(et[0]);break;case _.OPS.paintInlineImageXObject:this.paintInlineImageXObject(et[0]);break;case _.OPS.paintImageMaskXObject:this.paintImageMaskXObject(et[0]);break;case _.OPS.paintFormXObjectBegin:this.paintFormXObjectBegin(et[0],et[1]);break;case _.OPS.paintFormXObjectEnd:this.paintFormXObjectEnd();break;case _.OPS.closePath:this.closePath();break;case _.OPS.closeStroke:this.closeStroke();break;case _.OPS.closeFillStroke:this.closeFillStroke();break;case _.OPS.closeEOFillStroke:this.closeEOFillStroke();break;case _.OPS.nextLine:this.nextLine();break;case _.OPS.transform:this.transform(et[0],et[1],et[2],et[3],et[4],et[5]);break;case _.OPS.constructPath:this.constructPath(et[0],et[1]);break;case _.OPS.endPath:this.endPath();break;case 92:this.group(L.items);break;default:(0,_.warn)(`Unimplemented operator ${$}`);break}}}setWordSpacing(T){this.current.wordSpacing=T}setCharSpacing(T){this.current.charSpacing=T}nextLine(){this.moveText(0,this.current.leading)}setTextMatrix(T,L,$,rt,et,yt){const gt=this.current;gt.textMatrix=gt.lineMatrix=[T,L,$,rt,et,yt],gt.textMatrixScale=Math.hypot(T,L),gt.x=gt.lineX=0,gt.y=gt.lineY=0,gt.xcoords=[],gt.ycoords=[],gt.tspan=this.svgFactory.createElement("svg:tspan"),gt.tspan.setAttributeNS(null,"font-family",gt.fontFamily),gt.tspan.setAttributeNS(null,"font-size",`${h(gt.fontSize)}px`),gt.tspan.setAttributeNS(null,"y",h(-gt.y)),gt.txtElement=this.svgFactory.createElement("svg:text"),gt.txtElement.append(gt.tspan)}beginText(){const T=this.current;T.x=T.lineX=0,T.y=T.lineY=0,T.textMatrix=_.IDENTITY_MATRIX,T.lineMatrix=_.IDENTITY_MATRIX,T.textMatrixScale=1,T.tspan=this.svgFactory.createElement("svg:tspan"),T.txtElement=this.svgFactory.createElement("svg:text"),T.txtgrp=this.svgFactory.createElement("svg:g"),T.xcoords=[],T.ycoords=[]}moveText(T,L){const $=this.current;$.x=$.lineX+=T,$.y=$.lineY+=L,$.xcoords=[],$.ycoords=[],$.tspan=this.svgFactory.createElement("svg:tspan"),$.tspan.setAttributeNS(null,"font-family",$.fontFamily),$.tspan.setAttributeNS(null,"font-size",`${h($.fontSize)}px`),$.tspan.setAttributeNS(null,"y",h(-$.y))}showText(T){const L=this.current,$=L.font,rt=L.fontSize;if(rt===0)return;const et=L.fontSizeScale,yt=L.charSpacing,gt=L.wordSpacing,kt=L.fontDirection,At=L.textHScale*kt,Ft=$.vertical,Xt=Ft?1:-1,nt=$.defaultVMetrics,Y=rt*L.fontMatrix[0];let k=0;for(const y of T){if(y===null){k+=kt*gt;continue}else if(typeof y=="number"){k+=Xt*y*rt/1e3;continue}const O=(y.isSpace?gt:0)+yt,H=y.fontChar;let J,K,m=y.width;if(Ft){let z;const W=y.vmetric||nt;z=y.vmetric?W[1]:m*.5,z=-z*Y;const G=W[2]*Y;m=W?-W[0]:m,J=z/et,K=(k+G)/et}else J=k/et,K=0;(y.isInFont||$.missingFile)&&(L.xcoords.push(L.x+J),Ft&&L.ycoords.push(-L.y+K),L.tspan.textContent+=H);const M=Ft?m*Y-O*kt:m*Y+O*kt;k+=M}L.tspan.setAttributeNS(null,"x",L.xcoords.map(h).join(" ")),Ft?L.tspan.setAttributeNS(null,"y",L.ycoords.map(h).join(" ")):L.tspan.setAttributeNS(null,"y",h(-L.y)),Ft?L.y-=k:L.x+=k*At,L.tspan.setAttributeNS(null,"font-family",L.fontFamily),L.tspan.setAttributeNS(null,"font-size",`${h(L.fontSize)}px`),L.fontStyle!==B.fontStyle&&L.tspan.setAttributeNS(null,"font-style",L.fontStyle),L.fontWeight!==B.fontWeight&&L.tspan.setAttributeNS(null,"font-weight",L.fontWeight);const S=L.textRenderingMode&_.TextRenderingMode.FILL_STROKE_MASK;if(S===_.TextRenderingMode.FILL||S===_.TextRenderingMode.FILL_STROKE?(L.fillColor!==B.fillColor&&L.tspan.setAttributeNS(null,"fill",L.fillColor),L.fillAlpha<1&&L.tspan.setAttributeNS(null,"fill-opacity",L.fillAlpha)):L.textRenderingMode===_.TextRenderingMode.ADD_TO_PATH?L.tspan.setAttributeNS(null,"fill","transparent"):L.tspan.setAttributeNS(null,"fill","none"),S===_.TextRenderingMode.STROKE||S===_.TextRenderingMode.FILL_STROKE){const y=1/(L.textMatrixScale||1);this._setStrokeAttributes(L.tspan,y)}let w=L.textMatrix;L.textRise!==0&&(w=w.slice(),w[5]+=L.textRise),L.txtElement.setAttributeNS(null,"transform",`${E(w)} scale(${h(At)}, -1)`),L.txtElement.setAttributeNS(N,"xml:space","preserve"),L.txtElement.append(L.tspan),L.txtgrp.append(L.txtElement),this._ensureTransformGroup().append(L.txtElement)}setLeadingMoveText(T,L){this.setLeading(-L),this.moveText(T,L)}addFontStyle(T){if(!T.data)throw new Error('addFontStyle: No font data available, ensure that the "fontExtraProperties" API parameter is set.');this.cssStyle||(this.cssStyle=this.svgFactory.createElement("svg:style"),this.cssStyle.setAttributeNS(null,"type","text/css"),this.defs.append(this.cssStyle));const L=o(T.data,T.mimetype,this.forceDataSchema);this.cssStyle.textContent+=`@font-face { font-family: "${T.loadedName}"; src: url(${L}); }
`}setFont(T){const L=this.current,$=this.commonObjs.get(T[0]);let rt=T[1];L.font=$,this.embedFonts&&!$.missingFile&&!this.embeddedFonts[$.loadedName]&&(this.addFontStyle($),this.embeddedFonts[$.loadedName]=$),L.fontMatrix=$.fontMatrix||_.FONT_IDENTITY_MATRIX;let et="normal";$.black?et="900":$.bold&&(et="bold");const yt=$.italic?"italic":"normal";rt<0?(rt=-rt,L.fontDirection=-1):L.fontDirection=1,L.fontSize=rt,L.fontFamily=$.loadedName,L.fontWeight=et,L.fontStyle=yt,L.tspan=this.svgFactory.createElement("svg:tspan"),L.tspan.setAttributeNS(null,"y",h(-L.y)),L.xcoords=[],L.ycoords=[]}endText(){const T=this.current;T.textRenderingMode&_.TextRenderingMode.ADD_TO_PATH_FLAG&&T.txtElement?.hasChildNodes()&&(T.element=T.txtElement,this.clip("nonzero"),this.endPath())}setLineWidth(T){T>0&&(this.current.lineWidth=T)}setLineCap(T){this.current.lineCap=F[T]}setLineJoin(T){this.current.lineJoin=u[T]}setMiterLimit(T){this.current.miterLimit=T}setStrokeAlpha(T){this.current.strokeAlpha=T}setStrokeRGBColor(T,L,$){this.current.strokeColor=_.Util.makeHexColor(T,L,$)}setFillAlpha(T){this.current.fillAlpha=T}setFillRGBColor(T,L,$){this.current.fillColor=_.Util.makeHexColor(T,L,$),this.current.tspan=this.svgFactory.createElement("svg:tspan"),this.current.xcoords=[],this.current.ycoords=[]}setStrokeColorN(T){this.current.strokeColor=this._makeColorN_Pattern(T)}setFillColorN(T){this.current.fillColor=this._makeColorN_Pattern(T)}shadingFill(T){const{width:L,height:$}=this.viewport,rt=_.Util.inverseTransform(this.transformMatrix),[et,yt,gt,kt]=_.Util.getAxialAlignedBoundingBox([0,0,L,$],rt),At=this.svgFactory.createElement("svg:rect");At.setAttributeNS(null,"x",et),At.setAttributeNS(null,"y",yt),At.setAttributeNS(null,"width",gt-et),At.setAttributeNS(null,"height",kt-yt),At.setAttributeNS(null,"fill",this._makeShadingPattern(T)),this.current.fillAlpha<1&&At.setAttributeNS(null,"fill-opacity",this.current.fillAlpha),this._ensureTransformGroup().append(At)}_makeColorN_Pattern(T){return T[0]==="TilingPattern"?this._makeTilingPattern(T):this._makeShadingPattern(T)}_makeTilingPattern(T){const L=T[1],$=T[2],rt=T[3]||_.IDENTITY_MATRIX,[et,yt,gt,kt]=T[4],At=T[5],Ft=T[6],Xt=T[7],nt=`shading${I++}`,[Y,k,S,w]=_.Util.normalizeRect([..._.Util.applyTransform([et,yt],rt),..._.Util.applyTransform([gt,kt],rt)]),[y,O]=_.Util.singularValueDecompose2dScale(rt),H=At*y,J=Ft*O,K=this.svgFactory.createElement("svg:pattern");K.setAttributeNS(null,"id",nt),K.setAttributeNS(null,"patternUnits","userSpaceOnUse"),K.setAttributeNS(null,"width",H),K.setAttributeNS(null,"height",J),K.setAttributeNS(null,"x",`${Y}`),K.setAttributeNS(null,"y",`${k}`);const m=this.svg,M=this.transformMatrix,z=this.current.fillColor,W=this.current.strokeColor,G=this.svgFactory.create(S-Y,w-k);if(this.svg=G,this.transformMatrix=rt,Xt===2){const it=_.Util.makeHexColor(...L);this.current.fillColor=it,this.current.strokeColor=it}return this.executeOpTree(this.convertOpList($)),this.svg=m,this.transformMatrix=M,this.current.fillColor=z,this.current.strokeColor=W,K.append(G.childNodes[0]),this.defs.append(K),`url(#${nt})`}_makeShadingPattern(T){switch(typeof T=="string"&&(T=this.objs.get(T)),T[0]){case"RadialAxial":const L=`shading${I++}`,$=T[3];let rt;switch(T[1]){case"axial":const et=T[4],yt=T[5];rt=this.svgFactory.createElement("svg:linearGradient"),rt.setAttributeNS(null,"id",L),rt.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),rt.setAttributeNS(null,"x1",et[0]),rt.setAttributeNS(null,"y1",et[1]),rt.setAttributeNS(null,"x2",yt[0]),rt.setAttributeNS(null,"y2",yt[1]);break;case"radial":const gt=T[4],kt=T[5],At=T[6],Ft=T[7];rt=this.svgFactory.createElement("svg:radialGradient"),rt.setAttributeNS(null,"id",L),rt.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),rt.setAttributeNS(null,"cx",kt[0]),rt.setAttributeNS(null,"cy",kt[1]),rt.setAttributeNS(null,"r",Ft),rt.setAttributeNS(null,"fx",gt[0]),rt.setAttributeNS(null,"fy",gt[1]),rt.setAttributeNS(null,"fr",At);break;default:throw new Error(`Unknown RadialAxial type: ${T[1]}`)}for(const et of $){const yt=this.svgFactory.createElement("svg:stop");yt.setAttributeNS(null,"offset",et[0]),yt.setAttributeNS(null,"stop-color",et[1]),rt.append(yt)}return this.defs.append(rt),`url(#${L})`;case"Mesh":return(0,_.warn)("Unimplemented pattern Mesh"),null;case"Dummy":return"hotpink";default:throw new Error(`Unknown IR type: ${T[0]}`)}}setDash(T,L){this.current.dashArray=T,this.current.dashPhase=L}constructPath(T,L){const $=this.current;let rt=$.x,et=$.y,yt=[],gt=0;for(const kt of T)switch(kt|0){case _.OPS.rectangle:rt=L[gt++],et=L[gt++];const At=L[gt++],Ft=L[gt++],Xt=rt+At,nt=et+Ft;yt.push("M",h(rt),h(et),"L",h(Xt),h(et),"L",h(Xt),h(nt),"L",h(rt),h(nt),"Z");break;case _.OPS.moveTo:rt=L[gt++],et=L[gt++],yt.push("M",h(rt),h(et));break;case _.OPS.lineTo:rt=L[gt++],et=L[gt++],yt.push("L",h(rt),h(et));break;case _.OPS.curveTo:rt=L[gt+4],et=L[gt+5],yt.push("C",h(L[gt]),h(L[gt+1]),h(L[gt+2]),h(L[gt+3]),h(rt),h(et)),gt+=6;break;case _.OPS.curveTo2:yt.push("C",h(rt),h(et),h(L[gt]),h(L[gt+1]),h(L[gt+2]),h(L[gt+3])),rt=L[gt+2],et=L[gt+3],gt+=4;break;case _.OPS.curveTo3:rt=L[gt+2],et=L[gt+3],yt.push("C",h(L[gt]),h(L[gt+1]),h(rt),h(et),h(rt),h(et)),gt+=4;break;case _.OPS.closePath:yt.push("Z");break}yt=yt.join(" "),$.path&&T.length>0&&T[0]!==_.OPS.rectangle&&T[0]!==_.OPS.moveTo?yt=$.path.getAttributeNS(null,"d")+yt:($.path=this.svgFactory.createElement("svg:path"),this._ensureTransformGroup().append($.path)),$.path.setAttributeNS(null,"d",yt),$.path.setAttributeNS(null,"fill","none"),$.element=$.path,$.setCurrentPoint(rt,et)}endPath(){const T=this.current;if(T.path=null,!this.pendingClip)return;if(!T.element){this.pendingClip=null;return}const L=`clippath${C++}`,$=this.svgFactory.createElement("svg:clipPath");$.setAttributeNS(null,"id",L),$.setAttributeNS(null,"transform",E(this.transformMatrix));const rt=T.element.cloneNode(!0);if(this.pendingClip==="evenodd"?rt.setAttributeNS(null,"clip-rule","evenodd"):rt.setAttributeNS(null,"clip-rule","nonzero"),this.pendingClip=null,$.append(rt),this.defs.append($),T.activeClipUrl){T.clipGroup=null;for(const et of this.extraStack)et.clipGroup=null;$.setAttributeNS(null,"clip-path",T.activeClipUrl)}T.activeClipUrl=`url(#${L})`,this.tgrp=null}clip(T){this.pendingClip=T}closePath(){const T=this.current;if(T.path){const L=`${T.path.getAttributeNS(null,"d")}Z`;T.path.setAttributeNS(null,"d",L)}}setLeading(T){this.current.leading=-T}setTextRise(T){this.current.textRise=T}setTextRenderingMode(T){this.current.textRenderingMode=T}setHScale(T){this.current.textHScale=T/100}setRenderingIntent(T){}setFlatness(T){}setGState(T){for(const[L,$]of T)switch(L){case"LW":this.setLineWidth($);break;case"LC":this.setLineCap($);break;case"LJ":this.setLineJoin($);break;case"ML":this.setMiterLimit($);break;case"D":this.setDash($[0],$[1]);break;case"RI":this.setRenderingIntent($);break;case"FL":this.setFlatness($);break;case"Font":this.setFont($);break;case"CA":this.setStrokeAlpha($);break;case"ca":this.setFillAlpha($);break;default:(0,_.warn)(`Unimplemented graphic state operator ${L}`);break}}fill(){const T=this.current;T.element&&(T.element.setAttributeNS(null,"fill",T.fillColor),T.element.setAttributeNS(null,"fill-opacity",T.fillAlpha),this.endPath())}stroke(){const T=this.current;T.element&&(this._setStrokeAttributes(T.element),T.element.setAttributeNS(null,"fill","none"),this.endPath())}_setStrokeAttributes(T,L=1){const $=this.current;let rt=$.dashArray;L!==1&&rt.length>0&&(rt=rt.map(function(et){return L*et})),T.setAttributeNS(null,"stroke",$.strokeColor),T.setAttributeNS(null,"stroke-opacity",$.strokeAlpha),T.setAttributeNS(null,"stroke-miterlimit",h($.miterLimit)),T.setAttributeNS(null,"stroke-linecap",$.lineCap),T.setAttributeNS(null,"stroke-linejoin",$.lineJoin),T.setAttributeNS(null,"stroke-width",h(L*$.lineWidth)+"px"),T.setAttributeNS(null,"stroke-dasharray",rt.map(h).join(" ")),T.setAttributeNS(null,"stroke-dashoffset",h(L*$.dashPhase)+"px")}eoFill(){this.current.element?.setAttributeNS(null,"fill-rule","evenodd"),this.fill()}fillStroke(){this.stroke(),this.fill()}eoFillStroke(){this.current.element?.setAttributeNS(null,"fill-rule","evenodd"),this.fillStroke()}closeStroke(){this.closePath(),this.stroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.closePath(),this.eoFillStroke()}paintSolidColorImageMask(){const T=this.svgFactory.createElement("svg:rect");T.setAttributeNS(null,"x","0"),T.setAttributeNS(null,"y","0"),T.setAttributeNS(null,"width","1px"),T.setAttributeNS(null,"height","1px"),T.setAttributeNS(null,"fill",this.current.fillColor),this._ensureTransformGroup().append(T)}paintImageXObject(T){const L=this.getObject(T);if(!L){(0,_.warn)(`Dependent image with object ID ${T} is not ready yet`);return}this.paintInlineImageXObject(L)}paintInlineImageXObject(T,L){const $=T.width,rt=T.height,et=d(T,this.forceDataSchema,!!L),yt=this.svgFactory.createElement("svg:rect");yt.setAttributeNS(null,"x","0"),yt.setAttributeNS(null,"y","0"),yt.setAttributeNS(null,"width",h($)),yt.setAttributeNS(null,"height",h(rt)),this.current.element=yt,this.clip("nonzero");const gt=this.svgFactory.createElement("svg:image");gt.setAttributeNS(U,"xlink:href",et),gt.setAttributeNS(null,"x","0"),gt.setAttributeNS(null,"y",h(-rt)),gt.setAttributeNS(null,"width",h($)+"px"),gt.setAttributeNS(null,"height",h(rt)+"px"),gt.setAttributeNS(null,"transform",`scale(${h(1/$)} ${h(-1/rt)})`),L?L.append(gt):this._ensureTransformGroup().append(gt)}paintImageMaskXObject(T){const L=this.getObject(T.data,T);if(L.bitmap){(0,_.warn)("paintImageMaskXObject: ImageBitmap support is not implemented, ensure that the `isOffscreenCanvasSupported` API parameter is disabled.");return}const $=this.current,rt=L.width,et=L.height,yt=$.fillColor;$.maskId=`mask${x++}`;const gt=this.svgFactory.createElement("svg:mask");gt.setAttributeNS(null,"id",$.maskId);const kt=this.svgFactory.createElement("svg:rect");kt.setAttributeNS(null,"x","0"),kt.setAttributeNS(null,"y","0"),kt.setAttributeNS(null,"width",h(rt)),kt.setAttributeNS(null,"height",h(et)),kt.setAttributeNS(null,"fill",yt),kt.setAttributeNS(null,"mask",`url(#${$.maskId})`),this.defs.append(gt),this._ensureTransformGroup().append(kt),this.paintInlineImageXObject(L,gt)}paintFormXObjectBegin(T,L){if(Array.isArray(T)&&T.length===6&&this.transform(T[0],T[1],T[2],T[3],T[4],T[5]),L){const $=L[2]-L[0],rt=L[3]-L[1],et=this.svgFactory.createElement("svg:rect");et.setAttributeNS(null,"x",L[0]),et.setAttributeNS(null,"y",L[1]),et.setAttributeNS(null,"width",h($)),et.setAttributeNS(null,"height",h(rt)),this.current.element=et,this.clip("nonzero"),this.endPath()}}paintFormXObjectEnd(){}_initialize(T){const L=this.svgFactory.create(T.width,T.height),$=this.svgFactory.createElement("svg:defs");L.append($),this.defs=$;const rt=this.svgFactory.createElement("svg:g");return rt.setAttributeNS(null,"transform",E(T.transform)),L.append(rt),this.svg=rt,L}_ensureClipGroup(){if(!this.current.clipGroup){const T=this.svgFactory.createElement("svg:g");T.setAttributeNS(null,"clip-path",this.current.activeClipUrl),this.svg.append(T),this.current.clipGroup=T}return this.current.clipGroup}_ensureTransformGroup(){return this.tgrp||(this.tgrp=this.svgFactory.createElement("svg:g"),this.tgrp.setAttributeNS(null,"transform",E(this.transformMatrix)),this.current.activeClipUrl?this._ensureClipGroup().append(this.tgrp):this.svg.append(this.tgrp)),this.tgrp}}f.SVGGraphics=Q}),((R,f)=>{Object.defineProperty(f,"__esModule",{value:!0}),f.XfaText=void 0;class D{static textContent(_){const B=[],N={items:B,styles:Object.create(null)};function U(F){if(!F)return;let u=null;const o=F.name;if(o==="#text")u=F.value;else if(D.shouldBuildText(o))F?.attributes?.textContent?u=F.attributes.textContent:F.value&&(u=F.value);else return;if(u!==null&&B.push({str:u}),!!F.children)for(const d of F.children)U(d)}return U(_),N}static shouldBuildText(_){return!(_==="textarea"||_==="input"||_==="option"||_==="select")}}f.XfaText=D}),((R,f,D)=>{Object.defineProperty(f,"__esModule",{value:!0}),f.TextLayerRenderTask=void 0,f.renderTextLayer=E,f.updateTextLayer=C;var c=D(1),_=D(6);const B=1e5,N=30,U=.8,F=new Map;function u(x,I){let Q;if(I&&c.FeatureTest.isOffscreenCanvasSupported)Q=new OffscreenCanvas(x,x).getContext("2d",{alpha:!1});else{const V=document.createElement("canvas");V.width=V.height=x,Q=V.getContext("2d",{alpha:!1})}return Q}function o(x,I){const Q=F.get(x);if(Q)return Q;const V=u(N,I);V.font=`${N}px ${x}`;const T=V.measureText("");let L=T.fontBoundingBoxAscent,$=Math.abs(T.fontBoundingBoxDescent);if(L){const et=L/(L+$);return F.set(x,et),V.canvas.width=V.canvas.height=0,et}V.strokeStyle="red",V.clearRect(0,0,N,N),V.strokeText("g",0,0);let rt=V.getImageData(0,0,N,N).data;$=0;for(let et=rt.length-1-3;et>=0;et-=4)if(rt[et]>0){$=Math.ceil(et/4/N);break}V.clearRect(0,0,N,N),V.strokeText("A",0,N),rt=V.getImageData(0,0,N,N).data,L=0;for(let et=0,yt=rt.length;et<yt;et+=4)if(rt[et]>0){L=N-Math.floor(et/4/N);break}if(V.canvas.width=V.canvas.height=0,L){const et=L/(L+$);return F.set(x,et),et}return F.set(x,U),U}function d(x,I,Q){const V=document.createElement("span"),T={angle:0,canvasWidth:0,hasText:I.str!=="",hasEOL:I.hasEOL,fontSize:0};x._textDivs.push(V);const L=c.Util.transform(x._transform,I.transform);let $=Math.atan2(L[1],L[0]);const rt=Q[I.fontName];rt.vertical&&($+=Math.PI/2);const et=Math.hypot(L[2],L[3]),yt=et*o(rt.fontFamily,x._isOffscreenCanvasSupported);let gt,kt;$===0?(gt=L[4],kt=L[5]-yt):(gt=L[4]+yt*Math.sin($),kt=L[5]-yt*Math.cos($));const At="calc(var(--scale-factor)*",Ft=V.style;x._container===x._rootContainer?(Ft.left=`${(100*gt/x._pageWidth).toFixed(2)}%`,Ft.top=`${(100*kt/x._pageHeight).toFixed(2)}%`):(Ft.left=`${At}${gt.toFixed(2)}px)`,Ft.top=`${At}${kt.toFixed(2)}px)`),Ft.fontSize=`${At}${et.toFixed(2)}px)`,Ft.fontFamily=rt.fontFamily,T.fontSize=et,V.setAttribute("role","presentation"),V.textContent=I.str,V.dir=I.dir,x._fontInspectorEnabled&&(V.dataset.fontName=I.fontName),$!==0&&(T.angle=$*(180/Math.PI));let Xt=!1;if(I.str.length>1)Xt=!0;else if(I.str!==" "&&I.transform[0]!==I.transform[3]){const nt=Math.abs(I.transform[0]),Y=Math.abs(I.transform[3]);nt!==Y&&Math.max(nt,Y)/Math.min(nt,Y)>1.5&&(Xt=!0)}Xt&&(T.canvasWidth=rt.vertical?I.height:I.width),x._textDivProperties.set(V,T),x._isReadableStream&&x._layoutText(V)}function b(x){const{div:I,scale:Q,properties:V,ctx:T,prevFontSize:L,prevFontFamily:$}=x,{style:rt}=I;let et="";if(V.canvasWidth!==0&&V.hasText){const{fontFamily:yt}=rt,{canvasWidth:gt,fontSize:kt}=V;(L!==kt||$!==yt)&&(T.font=`${kt*Q}px ${yt}`,x.prevFontSize=kt,x.prevFontFamily=yt);const{width:At}=T.measureText(I.textContent);At>0&&(et=`scaleX(${gt*Q/At})`)}V.angle!==0&&(et=`rotate(${V.angle}deg) ${et}`),et.length>0&&(rt.transform=et)}function g(x){if(x._canceled)return;const I=x._textDivs,Q=x._capability;if(I.length>B){Q.resolve();return}if(!x._isReadableStream)for(const T of I)x._layoutText(T);Q.resolve()}class h{constructor({textContentSource:I,container:Q,viewport:V,textDivs:T,textDivProperties:L,textContentItemsStr:$,isOffscreenCanvasSupported:rt}){this._textContentSource=I,this._isReadableStream=I instanceof ReadableStream,this._container=this._rootContainer=Q,this._textDivs=T||[],this._textContentItemsStr=$||[],this._isOffscreenCanvasSupported=rt,this._fontInspectorEnabled=!!globalThis.FontInspector?.enabled,this._reader=null,this._textDivProperties=L||new WeakMap,this._canceled=!1,this._capability=new c.PromiseCapability,this._layoutTextParams={prevFontSize:null,prevFontFamily:null,div:null,scale:V.scale*(globalThis.devicePixelRatio||1),properties:null,ctx:u(0,rt)};const{pageWidth:et,pageHeight:yt,pageX:gt,pageY:kt}=V.rawDims;this._transform=[1,0,0,-1,-gt,kt+yt],this._pageWidth=et,this._pageHeight=yt,(0,_.setLayerDimensions)(Q,V),this._capability.promise.finally(()=>{this._layoutTextParams=null}).catch(()=>{})}get promise(){return this._capability.promise}cancel(){this._canceled=!0,this._reader&&(this._reader.cancel(new c.AbortException("TextLayer task cancelled.")).catch(()=>{}),this._reader=null),this._capability.reject(new c.AbortException("TextLayer task cancelled."))}_processItems(I,Q){for(const V of I){if(V.str===void 0){if(V.type==="beginMarkedContentProps"||V.type==="beginMarkedContent"){const T=this._container;this._container=document.createElement("span"),this._container.classList.add("markedContent"),V.id!==null&&this._container.setAttribute("id",`${V.id}`),T.append(this._container)}else V.type==="endMarkedContent"&&(this._container=this._container.parentNode);continue}this._textContentItemsStr.push(V.str),d(this,V,Q)}}_layoutText(I){const Q=this._layoutTextParams.properties=this._textDivProperties.get(I);if(this._layoutTextParams.div=I,b(this._layoutTextParams),Q.hasText&&this._container.append(I),Q.hasEOL){const V=document.createElement("br");V.setAttribute("role","presentation"),this._container.append(V)}}_render(){const I=new c.PromiseCapability;let Q=Object.create(null);if(this._isReadableStream){const V=()=>{this._reader.read().then(({value:T,done:L})=>{if(L){I.resolve();return}Object.assign(Q,T.styles),this._processItems(T.items,Q),V()},I.reject)};this._reader=this._textContentSource.getReader(),V()}else if(this._textContentSource){const{items:V,styles:T}=this._textContentSource;this._processItems(V,T),I.resolve()}else throw new Error('No "textContentSource" parameter specified.');I.promise.then(()=>{Q=null,g(this)},this._capability.reject)}}f.TextLayerRenderTask=h;function E(x){!x.textContentSource&&(x.textContent||x.textContentStream)&&((0,_.deprecated)("The TextLayerRender `textContent`/`textContentStream` parameters will be removed in the future, please use `textContentSource` instead."),x.textContentSource=x.textContent||x.textContentStream);const{container:I,viewport:Q}=x,V=getComputedStyle(I),T=V.getPropertyValue("visibility"),L=parseFloat(V.getPropertyValue("--scale-factor"));T==="visible"&&(!L||Math.abs(L-Q.scale)>1e-5)&&console.error("The `--scale-factor` CSS-variable must be set, to the same value as `viewport.scale`, either on the `container`-element itself or higher up in the DOM.");const $=new h(x);return $._render(),$}function C({container:x,viewport:I,textDivs:Q,textDivProperties:V,isOffscreenCanvasSupported:T,mustRotate:L=!0,mustRescale:$=!0}){if(L&&(0,_.setLayerDimensions)(x,{rotation:I.rotation}),$){const rt=u(0,T),yt={prevFontSize:null,prevFontFamily:null,div:null,scale:I.scale*(globalThis.devicePixelRatio||1),properties:null,ctx:rt};for(const gt of Q)yt.properties=V.get(gt),yt.div=gt,b(yt)}}}),((R,f,D)=>{Object.defineProperty(f,"__esModule",{value:!0}),f.AnnotationEditorLayer=void 0;var c=D(1),_=D(4),B=D(28),N=D(33),U=D(6),F=D(34);class u{#t;#e=!1;#n=null;#i=this.pointerup.bind(this);#o=this.pointerdown.bind(this);#r=new Map;#a=!1;#l=!1;#c=!1;#s;static _initialized=!1;constructor({uiManager:d,pageIndex:b,div:g,accessibilityManager:h,annotationLayer:E,viewport:C,l10n:x}){const I=[B.FreeTextEditor,N.InkEditor,F.StampEditor];if(!u._initialized){u._initialized=!0;for(const Q of I)Q.initialize(x)}d.registerEditorTypes(I),this.#s=d,this.pageIndex=b,this.div=g,this.#t=h,this.#n=E,this.viewport=C,this.#s.addLayer(this)}get isEmpty(){return this.#r.size===0}updateToolbar(d){this.#s.updateToolbar(d)}updateMode(d=this.#s.getMode()){this.#p(),d===c.AnnotationEditorType.INK?(this.addInkEditorIfNeeded(!1),this.disableClick()):this.enableClick(),d!==c.AnnotationEditorType.NONE&&(this.div.classList.toggle("freeTextEditing",d===c.AnnotationEditorType.FREETEXT),this.div.classList.toggle("inkEditing",d===c.AnnotationEditorType.INK),this.div.classList.toggle("stampEditing",d===c.AnnotationEditorType.STAMP),this.div.hidden=!1)}addInkEditorIfNeeded(d){if(!d&&this.#s.getMode()!==c.AnnotationEditorType.INK)return;if(!d){for(const g of this.#r.values())if(g.isEmpty()){g.setInBackground();return}}this.#d({offsetX:0,offsetY:0},!1).setInBackground()}setEditingState(d){this.#s.setEditingState(d)}addCommands(d){this.#s.addCommands(d)}enable(){this.div.style.pointerEvents="auto";const d=new Set;for(const g of this.#r.values())g.enableEditing(),g.annotationElementId&&d.add(g.annotationElementId);if(!this.#n)return;const b=this.#n.getEditableAnnotations();for(const g of b){if(g.hide(),this.#s.isDeletedAnnotationElement(g.data.id)||d.has(g.data.id))continue;const h=this.deserialize(g);h&&(this.addOrRebuild(h),h.enableEditing())}}disable(){this.#c=!0,this.div.style.pointerEvents="none";const d=new Set;for(const b of this.#r.values()){if(b.disableEditing(),!b.annotationElementId||b.serialize()!==null){d.add(b.annotationElementId);continue}this.getEditableAnnotation(b.annotationElementId)?.show(),b.remove()}if(this.#n){const b=this.#n.getEditableAnnotations();for(const g of b){const{id:h}=g.data;d.has(h)||this.#s.isDeletedAnnotationElement(h)||g.show()}}this.#p(),this.isEmpty&&(this.div.hidden=!0),this.#c=!1}getEditableAnnotation(d){return this.#n?.getEditableAnnotation(d)||null}setActiveEditor(d){this.#s.getActive()!==d&&this.#s.setActiveEditor(d)}enableClick(){this.div.addEventListener("pointerdown",this.#o),this.div.addEventListener("pointerup",this.#i)}disableClick(){this.div.removeEventListener("pointerdown",this.#o),this.div.removeEventListener("pointerup",this.#i)}attach(d){this.#r.set(d.id,d);const{annotationElementId:b}=d;b&&this.#s.isDeletedAnnotationElement(b)&&this.#s.removeDeletedAnnotationElement(d)}detach(d){this.#r.delete(d.id),this.#t?.removePointerInTextLayer(d.contentDiv),!this.#c&&d.annotationElementId&&this.#s.addDeletedAnnotationElement(d)}remove(d){this.detach(d),this.#s.removeEditor(d),d.div.contains(document.activeElement)&&setTimeout(()=>{this.#s.focusMainContainer()},0),d.div.remove(),d.isAttachedToDOM=!1,this.#l||this.addInkEditorIfNeeded(!1)}changeParent(d){d.parent!==this&&(d.annotationElementId&&(this.#s.addDeletedAnnotationElement(d.annotationElementId),_.AnnotationEditor.deleteAnnotationElement(d),d.annotationElementId=null),this.attach(d),d.parent?.detach(d),d.setParent(this),d.div&&d.isAttachedToDOM&&(d.div.remove(),this.div.append(d.div)))}add(d){if(this.changeParent(d),this.#s.addEditor(d),this.attach(d),!d.isAttachedToDOM){const b=d.render();this.div.append(b),d.isAttachedToDOM=!0}d.fixAndSetPosition(),d.onceAdded(),this.#s.addToAnnotationStorage(d)}moveEditorInDOM(d){if(!d.isAttachedToDOM)return;const{activeElement:b}=document;d.div.contains(b)&&(d._focusEventsAllowed=!1,setTimeout(()=>{d.div.contains(document.activeElement)?d._focusEventsAllowed=!0:(d.div.addEventListener("focusin",()=>{d._focusEventsAllowed=!0},{once:!0}),b.focus())},0)),d._structTreeParentId=this.#t?.moveElementInDOM(this.div,d.div,d.contentDiv,!0)}addOrRebuild(d){d.needsToBeRebuilt()?d.rebuild():this.add(d)}addUndoableEditor(d){const b=()=>d._uiManager.rebuild(d),g=()=>{d.remove()};this.addCommands({cmd:b,undo:g,mustExec:!1})}getNextId(){return this.#s.getId()}#f(d){switch(this.#s.getMode()){case c.AnnotationEditorType.FREETEXT:return new B.FreeTextEditor(d);case c.AnnotationEditorType.INK:return new N.InkEditor(d);case c.AnnotationEditorType.STAMP:return new F.StampEditor(d)}return null}pasteEditor(d,b){this.#s.updateToolbar(d),this.#s.updateMode(d);const{offsetX:g,offsetY:h}=this.#h(),E=this.getNextId(),C=this.#f({parent:this,id:E,x:g,y:h,uiManager:this.#s,isCentered:!0,...b});C&&this.add(C)}deserialize(d){switch(d.annotationType??d.annotationEditorType){case c.AnnotationEditorType.FREETEXT:return B.FreeTextEditor.deserialize(d,this,this.#s);case c.AnnotationEditorType.INK:return N.InkEditor.deserialize(d,this,this.#s);case c.AnnotationEditorType.STAMP:return F.StampEditor.deserialize(d,this,this.#s)}return null}#d(d,b){const g=this.getNextId(),h=this.#f({parent:this,id:g,x:d.offsetX,y:d.offsetY,uiManager:this.#s,isCentered:b});return h&&this.add(h),h}#h(){const{x:d,y:b,width:g,height:h}=this.div.getBoundingClientRect(),E=Math.max(0,d),C=Math.max(0,b),x=Math.min(window.innerWidth,d+g),I=Math.min(window.innerHeight,b+h),Q=(E+x)/2-d,V=(C+I)/2-b,[T,L]=this.viewport.rotation%180===0?[Q,V]:[V,Q];return{offsetX:T,offsetY:L}}addNewEditor(){this.#d(this.#h(),!0)}setSelected(d){this.#s.setSelected(d)}toggleSelected(d){this.#s.toggleSelected(d)}isSelected(d){return this.#s.isSelected(d)}unselect(d){this.#s.unselect(d)}pointerup(d){const{isMac:b}=c.FeatureTest.platform;if(!(d.button!==0||d.ctrlKey&&b)&&d.target===this.div&&this.#a){if(this.#a=!1,!this.#e){this.#e=!0;return}if(this.#s.getMode()===c.AnnotationEditorType.STAMP){this.#s.unselectAll();return}this.#d(d,!1)}}pointerdown(d){if(this.#a){this.#a=!1;return}const{isMac:b}=c.FeatureTest.platform;if(d.button!==0||d.ctrlKey&&b||d.target!==this.div)return;this.#a=!0;const g=this.#s.getActive();this.#e=!g||g.isEmpty()}findNewParent(d,b,g){const h=this.#s.findParent(b,g);return h===null||h===this?!1:(h.changeParent(d),!0)}destroy(){this.#s.getActive()?.parent===this&&(this.#s.commitOrRemove(),this.#s.setActiveEditor(null));for(const d of this.#r.values())this.#t?.removePointerInTextLayer(d.contentDiv),d.setParent(null),d.isAttachedToDOM=!1,d.div.remove();this.div=null,this.#r.clear(),this.#s.removeLayer(this)}#p(){this.#l=!0;for(const d of this.#r.values())d.isEmpty()&&d.remove();this.#l=!1}render({viewport:d}){this.viewport=d,(0,U.setLayerDimensions)(this.div,d);for(const b of this.#s.getEditors(this.pageIndex))this.add(b);this.updateMode()}update({viewport:d}){this.#s.commitOrRemove(),this.viewport=d,(0,U.setLayerDimensions)(this.div,{rotation:d.rotation}),this.updateMode()}get pageDimensions(){const{pageWidth:d,pageHeight:b}=this.viewport.rawDims;return[d,b]}}f.AnnotationEditorLayer=u}),((R,f,D)=>{Object.defineProperty(f,"__esModule",{value:!0}),f.FreeTextEditor=void 0;var c=D(1),_=D(5),B=D(4),N=D(29);class U extends B.AnnotationEditor{#t=this.editorDivBlur.bind(this);#e=this.editorDivFocus.bind(this);#n=this.editorDivInput.bind(this);#i=this.editorDivKeydown.bind(this);#o;#r="";#a=`${this.id}-editor`;#l;#c=null;static _freeTextDefaultContent="";static _internalPadding=0;static _defaultColor=null;static _defaultFontSize=10;static get _keyboardManager(){const u=U.prototype,o=g=>g.isEmpty(),d=_.AnnotationEditorUIManager.TRANSLATE_SMALL,b=_.AnnotationEditorUIManager.TRANSLATE_BIG;return(0,c.shadow)(this,"_keyboardManager",new _.KeyboardManager([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],u.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],u.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],u._translateEmpty,{args:[-d,0],checker:o}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],u._translateEmpty,{args:[-b,0],checker:o}],[["ArrowRight","mac+ArrowRight"],u._translateEmpty,{args:[d,0],checker:o}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],u._translateEmpty,{args:[b,0],checker:o}],[["ArrowUp","mac+ArrowUp"],u._translateEmpty,{args:[0,-d],checker:o}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],u._translateEmpty,{args:[0,-b],checker:o}],[["ArrowDown","mac+ArrowDown"],u._translateEmpty,{args:[0,d],checker:o}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],u._translateEmpty,{args:[0,b],checker:o}]]))}static _type="freetext";constructor(u){super({...u,name:"freeTextEditor"}),this.#o=u.color||U._defaultColor||B.AnnotationEditor._defaultLineColor,this.#l=u.fontSize||U._defaultFontSize}static initialize(u){B.AnnotationEditor.initialize(u,{strings:["free_text2_default_content","editor_free_text2_aria_label"]});const o=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(o.getPropertyValue("--freetext-padding"))}static updateDefaultParams(u,o){switch(u){case c.AnnotationEditorParamsType.FREETEXT_SIZE:U._defaultFontSize=o;break;case c.AnnotationEditorParamsType.FREETEXT_COLOR:U._defaultColor=o;break}}updateParams(u,o){switch(u){case c.AnnotationEditorParamsType.FREETEXT_SIZE:this.#s(o);break;case c.AnnotationEditorParamsType.FREETEXT_COLOR:this.#f(o);break}}static get defaultPropertiesToUpdate(){return[[c.AnnotationEditorParamsType.FREETEXT_SIZE,U._defaultFontSize],[c.AnnotationEditorParamsType.FREETEXT_COLOR,U._defaultColor||B.AnnotationEditor._defaultLineColor]]}get propertiesToUpdate(){return[[c.AnnotationEditorParamsType.FREETEXT_SIZE,this.#l],[c.AnnotationEditorParamsType.FREETEXT_COLOR,this.#o]]}#s(u){const o=b=>{this.editorDiv.style.fontSize=`calc(${b}px * var(--scale-factor))`,this.translate(0,-(b-this.#l)*this.parentScale),this.#l=b,this.#h()},d=this.#l;this.addCommands({cmd:()=>{o(u)},undo:()=>{o(d)},mustExec:!0,type:c.AnnotationEditorParamsType.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})}#f(u){const o=this.#o;this.addCommands({cmd:()=>{this.#o=this.editorDiv.style.color=u},undo:()=>{this.#o=this.editorDiv.style.color=o},mustExec:!0,type:c.AnnotationEditorParamsType.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})}_translateEmpty(u,o){this._uiManager.translateSelectedEditors(u,o,!0)}getInitialTranslation(){const u=this.parentScale;return[-U._internalPadding*u,-(U._internalPadding+this.#l)*u]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){this.isInEditMode()||(this.parent.setEditingState(!1),this.parent.updateToolbar(c.AnnotationEditorType.FREETEXT),super.enableEditMode(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),this.editorDiv.addEventListener("keydown",this.#i),this.editorDiv.addEventListener("focus",this.#e),this.editorDiv.addEventListener("blur",this.#t),this.editorDiv.addEventListener("input",this.#n))}disableEditMode(){this.isInEditMode()&&(this.parent.setEditingState(!0),super.disableEditMode(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",this.#a),this._isDraggable=!0,this.editorDiv.removeEventListener("keydown",this.#i),this.editorDiv.removeEventListener("focus",this.#e),this.editorDiv.removeEventListener("blur",this.#t),this.editorDiv.removeEventListener("input",this.#n),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freeTextEditing"))}focusin(u){this._focusEventsAllowed&&(super.focusin(u),u.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(){if(this.width){this.#g();return}this.enableEditMode(),this.editorDiv.focus(),this._initialOptions?.isCentered&&this.center(),this._initialOptions=null}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freeTextEditing")),super.remove()}#d(){const u=this.editorDiv.getElementsByTagName("div");if(u.length===0)return this.editorDiv.innerText;const o=[];for(const d of u)o.push(d.innerText.replace(/\r\n?|\n/,""));return o.join(`
`)}#h(){const[u,o]=this.parentDimensions;let d;if(this.isAttachedToDOM)d=this.div.getBoundingClientRect();else{const{currentLayer:b,div:g}=this,h=g.style.display;g.style.display="hidden",b.div.append(this.div),d=g.getBoundingClientRect(),g.remove(),g.style.display=h}this.rotation%180===this.parentRotation%180?(this.width=d.width/u,this.height=d.height/o):(this.width=d.height/u,this.height=d.width/o),this.fixAndSetPosition()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const u=this.#r,o=this.#r=this.#d().trimEnd();if(u===o)return;const d=b=>{if(this.#r=b,!b){this.remove();return}this.#p(),this._uiManager.rebuild(this),this.#h()};this.addCommands({cmd:()=>{d(o)},undo:()=>{d(u)},mustExec:!1}),this.#h()}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}dblclick(u){this.enterInEditMode()}keydown(u){u.target===this.div&&u.key==="Enter"&&(this.enterInEditMode(),u.preventDefault())}editorDivKeydown(u){U._keyboardManager.exec(this,u)}editorDivFocus(u){this.isEditing=!0}editorDivBlur(u){this.isEditing=!1}editorDivInput(u){this.parent.div.classList.toggle("freeTextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(this.div)return this.div;let u,o;this.width&&(u=this.x,o=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",this.#a),this.enableEditing(),B.AnnotationEditor._l10nPromise.get("editor_free_text2_aria_label").then(b=>this.editorDiv?.setAttribute("aria-label",b)),B.AnnotationEditor._l10nPromise.get("free_text2_default_content").then(b=>this.editorDiv?.setAttribute("default-content",b)),this.editorDiv.contentEditable=!0;const{style:d}=this.editorDiv;if(d.fontSize=`calc(${this.#l}px * var(--scale-factor))`,d.color=this.#o,this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),(0,_.bindEvents)(this,this.div,["dblclick","keydown"]),this.width){const[b,g]=this.parentDimensions;if(this.annotationElementId){const{position:h}=this.#c;let[E,C]=this.getInitialTranslation();[E,C]=this.pageTranslationToScreen(E,C);const[x,I]=this.pageDimensions,[Q,V]=this.pageTranslation;let T,L;switch(this.rotation){case 0:T=u+(h[0]-Q)/x,L=o+this.height-(h[1]-V)/I;break;case 90:T=u+(h[0]-Q)/x,L=o-(h[1]-V)/I,[E,C]=[C,-E];break;case 180:T=u-this.width+(h[0]-Q)/x,L=o-(h[1]-V)/I,[E,C]=[-E,-C];break;case 270:T=u+(h[0]-Q-this.height*I)/x,L=o+(h[1]-V-this.width*x)/I,[E,C]=[-C,E];break}this.setAt(T*b,L*g,E,C)}else this.setAt(u*b,o*g,this.width*b,this.height*g);this.#p(),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}#p(){if(this.editorDiv.replaceChildren(),!!this.#r)for(const u of this.#r.split(`
`)){const o=document.createElement("div");o.append(u?document.createTextNode(u):document.createElement("br")),this.editorDiv.append(o)}}get contentDiv(){return this.editorDiv}static deserialize(u,o,d){let b=null;if(u instanceof N.FreeTextAnnotationElement){const{data:{defaultAppearanceData:{fontSize:h,fontColor:E},rect:C,rotation:x,id:I},textContent:Q,textPosition:V,parent:{page:{pageNumber:T}}}=u;if(!Q||Q.length===0)return null;b=u={annotationType:c.AnnotationEditorType.FREETEXT,color:Array.from(E),fontSize:h,value:Q.join(`
`),position:V,pageIndex:T-1,rect:C,rotation:x,id:I,deleted:!1}}const g=super.deserialize(u,o,d);return g.#l=u.fontSize,g.#o=c.Util.makeHexColor(...u.color),g.#r=u.value,g.annotationElementId=u.id||null,g.#c=b,g}serialize(u=!1){if(this.isEmpty())return null;if(this.deleted)return{pageIndex:this.pageIndex,id:this.annotationElementId,deleted:!0};const o=U._internalPadding*this.parentScale,d=this.getRect(o,o),b=B.AnnotationEditor._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:this.#o),g={annotationType:c.AnnotationEditorType.FREETEXT,color:b,fontSize:this.#l,value:this.#r,pageIndex:this.pageIndex,rect:d,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return u?g:this.annotationElementId&&!this.#y(g)?null:(g.id=this.annotationElementId,g)}#y(u){const{value:o,fontSize:d,color:b,rect:g,pageIndex:h}=this.#c;return u.value!==o||u.fontSize!==d||u.rect.some((E,C)=>Math.abs(E-g[C])>=1)||u.color.some((E,C)=>E!==b[C])||u.pageIndex!==h}#g(u=!1){if(!this.annotationElementId)return;if(this.#h(),!u&&(this.width===0||this.height===0)){setTimeout(()=>this.#g(!0),0);return}const o=U._internalPadding*this.parentScale;this.#c.rect=this.getRect(o,o)}}f.FreeTextEditor=U}),((R,f,D)=>{Object.defineProperty(f,"__esModule",{value:!0}),f.StampAnnotationElement=f.InkAnnotationElement=f.FreeTextAnnotationElement=f.AnnotationLayer=void 0;var c=D(1),_=D(6),B=D(3),N=D(30),U=D(31),F=D(32);const u=1e3,o=9,d=new WeakSet;function b(K){return{width:K[2]-K[0],height:K[3]-K[1]}}class g{static create(m){switch(m.data.annotationType){case c.AnnotationType.LINK:return new E(m);case c.AnnotationType.TEXT:return new C(m);case c.AnnotationType.WIDGET:switch(m.data.fieldType){case"Tx":return new I(m);case"Btn":return m.data.radioButton?new T(m):m.data.checkBox?new V(m):new L(m);case"Ch":return new $(m);case"Sig":return new Q(m)}return new x(m);case c.AnnotationType.POPUP:return new rt(m);case c.AnnotationType.FREETEXT:return new yt(m);case c.AnnotationType.LINE:return new gt(m);case c.AnnotationType.SQUARE:return new kt(m);case c.AnnotationType.CIRCLE:return new At(m);case c.AnnotationType.POLYLINE:return new Ft(m);case c.AnnotationType.CARET:return new nt(m);case c.AnnotationType.INK:return new Y(m);case c.AnnotationType.POLYGON:return new Xt(m);case c.AnnotationType.HIGHLIGHT:return new k(m);case c.AnnotationType.UNDERLINE:return new S(m);case c.AnnotationType.SQUIGGLY:return new w(m);case c.AnnotationType.STRIKEOUT:return new y(m);case c.AnnotationType.STAMP:return new O(m);case c.AnnotationType.FILEATTACHMENT:return new H(m);default:return new h(m)}}}class h{#t=!1;constructor(m,{isRenderable:M=!1,ignoreBorder:z=!1,createQuadrilaterals:W=!1}={}){this.isRenderable=M,this.data=m.data,this.layer=m.layer,this.linkService=m.linkService,this.downloadManager=m.downloadManager,this.imageResourcesPath=m.imageResourcesPath,this.renderForms=m.renderForms,this.svgFactory=m.svgFactory,this.annotationStorage=m.annotationStorage,this.enableScripting=m.enableScripting,this.hasJSActions=m.hasJSActions,this._fieldObjects=m.fieldObjects,this.parent=m.parent,M&&(this.container=this._createContainer(z)),W&&this._createQuadrilaterals()}static _hasPopupData({titleObj:m,contentsObj:M,richText:z}){return!!(m?.str||M?.str||z?.str)}get hasPopupData(){return h._hasPopupData(this.data)}_createContainer(m){const{data:M,parent:{page:z,viewport:W}}=this,G=document.createElement("section");G.setAttribute("data-annotation-id",M.id),this instanceof x||(G.tabIndex=u),G.style.zIndex=this.parent.zIndex++,this.data.popupRef&&G.setAttribute("aria-haspopup","dialog"),M.noRotate&&G.classList.add("norotate");const{pageWidth:it,pageHeight:at,pageX:jt,pageY:Yt}=W.rawDims;if(!M.rect||this instanceof rt){const{rotation:Ut}=M;return!M.hasOwnCanvas&&Ut!==0&&this.setRotation(Ut,G),G}const{width:Rt,height:Nt}=b(M.rect),Pt=c.Util.normalizeRect([M.rect[0],z.view[3]-M.rect[1]+z.view[1],M.rect[2],z.view[3]-M.rect[3]+z.view[1]]);if(!m&&M.borderStyle.width>0){G.style.borderWidth=`${M.borderStyle.width}px`;const Ut=M.borderStyle.horizontalCornerRadius,Qt=M.borderStyle.verticalCornerRadius;if(Ut>0||Qt>0){const se=`calc(${Ut}px * var(--scale-factor)) / calc(${Qt}px * var(--scale-factor))`;G.style.borderRadius=se}else if(this instanceof T){const se=`calc(${Rt}px * var(--scale-factor)) / calc(${Nt}px * var(--scale-factor))`;G.style.borderRadius=se}switch(M.borderStyle.style){case c.AnnotationBorderStyleType.SOLID:G.style.borderStyle="solid";break;case c.AnnotationBorderStyleType.DASHED:G.style.borderStyle="dashed";break;case c.AnnotationBorderStyleType.BEVELED:(0,c.warn)("Unimplemented border style: beveled");break;case c.AnnotationBorderStyleType.INSET:(0,c.warn)("Unimplemented border style: inset");break;case c.AnnotationBorderStyleType.UNDERLINE:G.style.borderBottomStyle="solid";break}const $t=M.borderColor||null;$t?(this.#t=!0,G.style.borderColor=c.Util.makeHexColor($t[0]|0,$t[1]|0,$t[2]|0)):G.style.borderWidth=0}G.style.left=`${100*(Pt[0]-jt)/it}%`,G.style.top=`${100*(Pt[1]-Yt)/at}%`;const{rotation:Lt}=M;return M.hasOwnCanvas||Lt===0?(G.style.width=`${100*Rt/it}%`,G.style.height=`${100*Nt/at}%`):this.setRotation(Lt,G),G}setRotation(m,M=this.container){if(!this.data.rect)return;const{pageWidth:z,pageHeight:W}=this.parent.viewport.rawDims,{width:G,height:it}=b(this.data.rect);let at,jt;m%180===0?(at=100*G/z,jt=100*it/W):(at=100*it/z,jt=100*G/W),M.style.width=`${at}%`,M.style.height=`${jt}%`,M.setAttribute("data-main-rotation",(360-m)%360)}get _commonActions(){const m=(M,z,W)=>{const G=W.detail[M],it=G[0],at=G.slice(1);W.target.style[z]=N.ColorConverters[`${it}_HTML`](at),this.annotationStorage.setValue(this.data.id,{[z]:N.ColorConverters[`${it}_rgb`](at)})};return(0,c.shadow)(this,"_commonActions",{display:M=>{const{display:z}=M.detail,W=z%2===1;this.container.style.visibility=W?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:W,noPrint:z===1||z===2})},print:M=>{this.annotationStorage.setValue(this.data.id,{noPrint:!M.detail.print})},hidden:M=>{const{hidden:z}=M.detail;this.container.style.visibility=z?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:z,noView:z})},focus:M=>{setTimeout(()=>M.target.focus({preventScroll:!1}),0)},userName:M=>{M.target.title=M.detail.userName},readonly:M=>{M.target.disabled=M.detail.readonly},required:M=>{this._setRequired(M.target,M.detail.required)},bgColor:M=>{m("bgColor","backgroundColor",M)},fillColor:M=>{m("fillColor","backgroundColor",M)},fgColor:M=>{m("fgColor","color",M)},textColor:M=>{m("textColor","color",M)},borderColor:M=>{m("borderColor","borderColor",M)},strokeColor:M=>{m("strokeColor","borderColor",M)},rotation:M=>{const z=M.detail.rotation;this.setRotation(z),this.annotationStorage.setValue(this.data.id,{rotation:z})}})}_dispatchEventFromSandbox(m,M){const z=this._commonActions;for(const W of Object.keys(M.detail))(m[W]||z[W])?.(M)}_setDefaultPropertiesFromJS(m){if(!this.enableScripting)return;const M=this.annotationStorage.getRawValue(this.data.id);if(!M)return;const z=this._commonActions;for(const[W,G]of Object.entries(M)){const it=z[W];if(it){const at={detail:{[W]:G},target:m};it(at),delete M[W]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:m}=this.data;if(!m)return;const[M,z,W,G]=this.data.rect;if(m.length===1){const[,{x:Qt,y:$t},{x:se,y:le}]=m[0];if(W===Qt&&G===$t&&M===se&&z===le)return}const{style:it}=this.container;let at;if(this.#t){const{borderColor:Qt,borderWidth:$t}=it;it.borderWidth=0,at=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${Qt}" stroke-width="${$t}">`],this.container.classList.add("hasBorder")}const jt=W-M,Yt=G-z,{svgFactory:Rt}=this,Nt=Rt.createElement("svg");Nt.classList.add("quadrilateralsContainer"),Nt.setAttribute("width",0),Nt.setAttribute("height",0);const Pt=Rt.createElement("defs");Nt.append(Pt);const Lt=Rt.createElement("clipPath"),Ut=`clippath_${this.data.id}`;Lt.setAttribute("id",Ut),Lt.setAttribute("clipPathUnits","objectBoundingBox"),Pt.append(Lt);for(const[,{x:Qt,y:$t},{x:se,y:le}]of m){const oe=Rt.createElement("rect"),_e=(se-M)/jt,Ce=(G-$t)/Yt,Ue=(Qt-se)/jt,jn=($t-le)/Yt;oe.setAttribute("x",_e),oe.setAttribute("y",Ce),oe.setAttribute("width",Ue),oe.setAttribute("height",jn),Lt.append(oe),at?.push(`<rect vector-effect="non-scaling-stroke" x="${_e}" y="${Ce}" width="${Ue}" height="${jn}"/>`)}this.#t&&(at.push("</g></svg>')"),it.backgroundImage=at.join("")),this.container.append(Nt),this.container.style.clipPath=`url(#${Ut})`}_createPopup(){const{container:m,data:M}=this;m.setAttribute("aria-haspopup","dialog");const z=new rt({data:{color:M.color,titleObj:M.titleObj,modificationDate:M.modificationDate,contentsObj:M.contentsObj,richText:M.richText,parentRect:M.rect,borderStyle:0,id:`popup_${M.id}`,rotation:M.rotation},parent:this.parent,elements:[this]});this.parent.div.append(z.render())}render(){(0,c.unreachable)("Abstract method `AnnotationElement.render` called")}_getElementsByName(m,M=null){const z=[];if(this._fieldObjects){const W=this._fieldObjects[m];if(W)for(const{page:G,id:it,exportValues:at}of W){if(G===-1||it===M)continue;const jt=typeof at=="string"?at:null,Yt=document.querySelector(`[data-element-id="${it}"]`);if(Yt&&!d.has(Yt)){(0,c.warn)(`_getElementsByName - element not allowed: ${it}`);continue}z.push({id:it,exportValue:jt,domElement:Yt})}return z}for(const W of document.getElementsByName(m)){const{exportValue:G}=W,it=W.getAttribute("data-element-id");it!==M&&d.has(W)&&z.push({id:it,exportValue:G,domElement:W})}return z}show(){this.container&&(this.container.hidden=!1),this.popup?.maybeShow()}hide(){this.container&&(this.container.hidden=!0),this.popup?.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const m=this.getElementsToTriggerPopup();if(Array.isArray(m))for(const M of m)M.classList.add("highlightArea");else m.classList.add("highlightArea")}_editOnDoubleClick(){const{annotationEditorType:m,data:{id:M}}=this;this.container.addEventListener("dblclick",()=>{this.linkService.eventBus?.dispatch("switchannotationeditormode",{source:this,mode:m,editId:M})})}}class E extends h{constructor(m,M=null){super(m,{isRenderable:!0,ignoreBorder:!!M?.ignoreBorder,createQuadrilaterals:!0}),this.isTooltipOnly=m.data.isTooltipOnly}render(){const{data:m,linkService:M}=this,z=document.createElement("a");z.setAttribute("data-element-id",m.id);let W=!1;return m.url?(M.addLinkAttributes(z,m.url,m.newWindow),W=!0):m.action?(this._bindNamedAction(z,m.action),W=!0):m.attachment?(this._bindAttachment(z,m.attachment),W=!0):m.setOCGState?(this.#e(z,m.setOCGState),W=!0):m.dest?(this._bindLink(z,m.dest),W=!0):(m.actions&&(m.actions.Action||m.actions["Mouse Up"]||m.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(z,m),W=!0),m.resetForm?(this._bindResetFormAction(z,m.resetForm),W=!0):this.isTooltipOnly&&!W&&(this._bindLink(z,""),W=!0)),this.container.classList.add("linkAnnotation"),W&&this.container.append(z),this.container}#t(){this.container.setAttribute("data-internal-link","")}_bindLink(m,M){m.href=this.linkService.getDestinationHash(M),m.onclick=()=>(M&&this.linkService.goToDestination(M),!1),(M||M==="")&&this.#t()}_bindNamedAction(m,M){m.href=this.linkService.getAnchorUrl(""),m.onclick=()=>(this.linkService.executeNamedAction(M),!1),this.#t()}_bindAttachment(m,M){m.href=this.linkService.getAnchorUrl(""),m.onclick=()=>(this.downloadManager?.openOrDownloadData(this.container,M.content,M.filename),!1),this.#t()}#e(m,M){m.href=this.linkService.getAnchorUrl(""),m.onclick=()=>(this.linkService.executeSetOCGState(M),!1),this.#t()}_bindJSAction(m,M){m.href=this.linkService.getAnchorUrl("");const z=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const W of Object.keys(M.actions)){const G=z.get(W);G&&(m[G]=()=>(this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:M.id,name:W}}),!1))}m.onclick||(m.onclick=()=>!1),this.#t()}_bindResetFormAction(m,M){const z=m.onclick;if(z||(m.href=this.linkService.getAnchorUrl("")),this.#t(),!this._fieldObjects){(0,c.warn)('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),z||(m.onclick=()=>!1);return}m.onclick=()=>{z?.();const{fields:W,refs:G,include:it}=M,at=[];if(W.length!==0||G.length!==0){const Rt=new Set(G);for(const Nt of W){const Pt=this._fieldObjects[Nt]||[];for(const{id:Lt}of Pt)Rt.add(Lt)}for(const Nt of Object.values(this._fieldObjects))for(const Pt of Nt)Rt.has(Pt.id)===it&&at.push(Pt)}else for(const Rt of Object.values(this._fieldObjects))at.push(...Rt);const jt=this.annotationStorage,Yt=[];for(const Rt of at){const{id:Nt}=Rt;switch(Yt.push(Nt),Rt.type){case"text":{const Lt=Rt.defaultValue||"";jt.setValue(Nt,{value:Lt});break}case"checkbox":case"radiobutton":{const Lt=Rt.defaultValue===Rt.exportValues;jt.setValue(Nt,{value:Lt});break}case"combobox":case"listbox":{const Lt=Rt.defaultValue||"";jt.setValue(Nt,{value:Lt});break}default:continue}const Pt=document.querySelector(`[data-element-id="${Nt}"]`);if(Pt){if(!d.has(Pt)){(0,c.warn)(`_bindResetFormAction - element not allowed: ${Nt}`);continue}}else continue;Pt.dispatchEvent(new Event("resetform"))}return this.enableScripting&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:Yt,name:"ResetForm"}}),!1}}}class C extends h{constructor(m){super(m,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const m=document.createElement("img");return m.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",m.alt="[{{type}} Annotation]",m.dataset.l10nId="text_annotation_type",m.dataset.l10nArgs=JSON.stringify({type:this.data.name}),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(m),this.container}}class x extends h{render(){return this.data.alternativeText&&(this.container.title=this.data.alternativeText),this.container}showElementAndHideCanvas(m){this.data.hasOwnCanvas&&(m.previousSibling?.nodeName==="CANVAS"&&(m.previousSibling.hidden=!0),m.hidden=!1)}_getKeyModifier(m){const{isWin:M,isMac:z}=c.FeatureTest.platform;return M&&m.ctrlKey||z&&m.metaKey}_setEventListener(m,M,z,W,G){z.includes("mouse")?m.addEventListener(z,it=>{this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:W,value:G(it),shift:it.shiftKey,modifier:this._getKeyModifier(it)}})}):m.addEventListener(z,it=>{if(z==="blur"){if(!M.focused||!it.relatedTarget)return;M.focused=!1}else if(z==="focus"){if(M.focused)return;M.focused=!0}G&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:W,value:G(it)}})})}_setEventListeners(m,M,z,W){for(const[G,it]of z)(it==="Action"||this.data.actions?.[it])&&((it==="Focus"||it==="Blur")&&(M||={focused:!1}),this._setEventListener(m,M,G,it,W),it==="Focus"&&!this.data.actions?.Blur?this._setEventListener(m,M,"blur","Blur",null):it==="Blur"&&!this.data.actions?.Focus&&this._setEventListener(m,M,"focus","Focus",null))}_setBackgroundColor(m){const M=this.data.backgroundColor||null;m.style.backgroundColor=M===null?"transparent":c.Util.makeHexColor(M[0],M[1],M[2])}_setTextStyle(m){const M=["left","center","right"],{fontColor:z}=this.data.defaultAppearanceData,W=this.data.defaultAppearanceData.fontSize||o,G=m.style;let it;const at=2,jt=Yt=>Math.round(10*Yt)/10;if(this.data.multiLine){const Yt=Math.abs(this.data.rect[3]-this.data.rect[1]-at),Rt=Math.round(Yt/(c.LINE_FACTOR*W))||1,Nt=Yt/Rt;it=Math.min(W,jt(Nt/c.LINE_FACTOR))}else{const Yt=Math.abs(this.data.rect[3]-this.data.rect[1]-at);it=Math.min(W,jt(Yt/c.LINE_FACTOR))}G.fontSize=`calc(${it}px * var(--scale-factor))`,G.color=c.Util.makeHexColor(z[0],z[1],z[2]),this.data.textAlignment!==null&&(G.textAlign=M[this.data.textAlignment])}_setRequired(m,M){M?m.setAttribute("required",!0):m.removeAttribute("required"),m.setAttribute("aria-required",M)}}class I extends x{constructor(m){const M=m.renderForms||!m.data.hasAppearance&&!!m.data.fieldValue;super(m,{isRenderable:M})}setPropertyOnSiblings(m,M,z,W){const G=this.annotationStorage;for(const it of this._getElementsByName(m.name,m.id))it.domElement&&(it.domElement[M]=z),G.setValue(it.id,{[W]:z})}render(){const m=this.annotationStorage,M=this.data.id;this.container.classList.add("textWidgetAnnotation");let z=null;if(this.renderForms){const W=m.getValue(M,{value:this.data.fieldValue});let G=W.value||"";const it=m.getValue(M,{charLimit:this.data.maxLen}).charLimit;it&&G.length>it&&(G=G.slice(0,it));let at=W.formattedValue||this.data.textContent?.join(`
`)||null;at&&this.data.comb&&(at=at.replaceAll(/\s+/g,""));const jt={userValue:G,formattedValue:at,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(z=document.createElement("textarea"),z.textContent=at??G,this.data.doNotScroll&&(z.style.overflowY="hidden")):(z=document.createElement("input"),z.type="text",z.setAttribute("value",at??G),this.data.doNotScroll&&(z.style.overflowX="hidden")),this.data.hasOwnCanvas&&(z.hidden=!0),d.add(z),z.setAttribute("data-element-id",M),z.disabled=this.data.readOnly,z.name=this.data.fieldName,z.tabIndex=u,this._setRequired(z,this.data.required),it&&(z.maxLength=it),z.addEventListener("input",Rt=>{m.setValue(M,{value:Rt.target.value}),this.setPropertyOnSiblings(z,"value",Rt.target.value,"value"),jt.formattedValue=null}),z.addEventListener("resetform",Rt=>{const Nt=this.data.defaultFieldValue??"";z.value=jt.userValue=Nt,jt.formattedValue=null});let Yt=Rt=>{const{formattedValue:Nt}=jt;Nt!=null&&(Rt.target.value=Nt),Rt.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){z.addEventListener("focus",Nt=>{if(jt.focused)return;const{target:Pt}=Nt;jt.userValue&&(Pt.value=jt.userValue),jt.lastCommittedValue=Pt.value,jt.commitKey=1,jt.focused=!0}),z.addEventListener("updatefromsandbox",Nt=>{this.showElementAndHideCanvas(Nt.target);const Pt={value(Lt){jt.userValue=Lt.detail.value??"",m.setValue(M,{value:jt.userValue.toString()}),Lt.target.value=jt.userValue},formattedValue(Lt){const{formattedValue:Ut}=Lt.detail;jt.formattedValue=Ut,Ut!=null&&Lt.target!==document.activeElement&&(Lt.target.value=Ut),m.setValue(M,{formattedValue:Ut})},selRange(Lt){Lt.target.setSelectionRange(...Lt.detail.selRange)},charLimit:Lt=>{const{charLimit:Ut}=Lt.detail,{target:Qt}=Lt;if(Ut===0){Qt.removeAttribute("maxLength");return}Qt.setAttribute("maxLength",Ut);let $t=jt.userValue;!$t||$t.length<=Ut||($t=$t.slice(0,Ut),Qt.value=jt.userValue=$t,m.setValue(M,{value:$t}),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:M,name:"Keystroke",value:$t,willCommit:!0,commitKey:1,selStart:Qt.selectionStart,selEnd:Qt.selectionEnd}}))}};this._dispatchEventFromSandbox(Pt,Nt)}),z.addEventListener("keydown",Nt=>{jt.commitKey=1;let Pt=-1;if(Nt.key==="Escape"?Pt=0:Nt.key==="Enter"&&!this.data.multiLine?Pt=2:Nt.key==="Tab"&&(jt.commitKey=3),Pt===-1)return;const{value:Lt}=Nt.target;jt.lastCommittedValue!==Lt&&(jt.lastCommittedValue=Lt,jt.userValue=Lt,this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:M,name:"Keystroke",value:Lt,willCommit:!0,commitKey:Pt,selStart:Nt.target.selectionStart,selEnd:Nt.target.selectionEnd}}))});const Rt=Yt;Yt=null,z.addEventListener("blur",Nt=>{if(!jt.focused||!Nt.relatedTarget)return;jt.focused=!1;const{value:Pt}=Nt.target;jt.userValue=Pt,jt.lastCommittedValue!==Pt&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:M,name:"Keystroke",value:Pt,willCommit:!0,commitKey:jt.commitKey,selStart:Nt.target.selectionStart,selEnd:Nt.target.selectionEnd}}),Rt(Nt)}),this.data.actions?.Keystroke&&z.addEventListener("beforeinput",Nt=>{jt.lastCommittedValue=null;const{data:Pt,target:Lt}=Nt,{value:Ut,selectionStart:Qt,selectionEnd:$t}=Lt;let se=Qt,le=$t;switch(Nt.inputType){case"deleteWordBackward":{const oe=Ut.substring(0,Qt).match(/\w*[^\w]*$/);oe&&(se-=oe[0].length);break}case"deleteWordForward":{const oe=Ut.substring(Qt).match(/^[^\w]*\w*/);oe&&(le+=oe[0].length);break}case"deleteContentBackward":Qt===$t&&(se-=1);break;case"deleteContentForward":Qt===$t&&(le+=1);break}Nt.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:M,name:"Keystroke",value:Ut,change:Pt||"",willCommit:!1,selStart:se,selEnd:le}})}),this._setEventListeners(z,jt,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],Nt=>Nt.target.value)}if(Yt&&z.addEventListener("blur",Yt),this.data.comb){const Nt=(this.data.rect[2]-this.data.rect[0])/it;z.classList.add("comb"),z.style.letterSpacing=`calc(${Nt}px * var(--scale-factor) - 1ch)`}}else z=document.createElement("div"),z.textContent=this.data.fieldValue,z.style.verticalAlign="middle",z.style.display="table-cell";return this._setTextStyle(z),this._setBackgroundColor(z),this._setDefaultPropertiesFromJS(z),this.container.append(z),this.container}}class Q extends x{constructor(m){super(m,{isRenderable:!!m.data.hasOwnCanvas})}}class V extends x{constructor(m){super(m,{isRenderable:m.renderForms})}render(){const m=this.annotationStorage,M=this.data,z=M.id;let W=m.getValue(z,{value:M.exportValue===M.fieldValue}).value;typeof W=="string"&&(W=W!=="Off",m.setValue(z,{value:W})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const G=document.createElement("input");return d.add(G),G.setAttribute("data-element-id",z),G.disabled=M.readOnly,this._setRequired(G,this.data.required),G.type="checkbox",G.name=M.fieldName,W&&G.setAttribute("checked",!0),G.setAttribute("exportValue",M.exportValue),G.tabIndex=u,G.addEventListener("change",it=>{const{name:at,checked:jt}=it.target;for(const Yt of this._getElementsByName(at,z)){const Rt=jt&&Yt.exportValue===M.exportValue;Yt.domElement&&(Yt.domElement.checked=Rt),m.setValue(Yt.id,{value:Rt})}m.setValue(z,{value:jt})}),G.addEventListener("resetform",it=>{const at=M.defaultFieldValue||"Off";it.target.checked=at===M.exportValue}),this.enableScripting&&this.hasJSActions&&(G.addEventListener("updatefromsandbox",it=>{const at={value(jt){jt.target.checked=jt.detail.value!=="Off",m.setValue(z,{value:jt.target.checked})}};this._dispatchEventFromSandbox(at,it)}),this._setEventListeners(G,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],it=>it.target.checked)),this._setBackgroundColor(G),this._setDefaultPropertiesFromJS(G),this.container.append(G),this.container}}class T extends x{constructor(m){super(m,{isRenderable:m.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const m=this.annotationStorage,M=this.data,z=M.id;let W=m.getValue(z,{value:M.fieldValue===M.buttonValue}).value;typeof W=="string"&&(W=W!==M.buttonValue,m.setValue(z,{value:W}));const G=document.createElement("input");if(d.add(G),G.setAttribute("data-element-id",z),G.disabled=M.readOnly,this._setRequired(G,this.data.required),G.type="radio",G.name=M.fieldName,W&&G.setAttribute("checked",!0),G.tabIndex=u,G.addEventListener("change",it=>{const{name:at,checked:jt}=it.target;for(const Yt of this._getElementsByName(at,z))m.setValue(Yt.id,{value:!1});m.setValue(z,{value:jt})}),G.addEventListener("resetform",it=>{const at=M.defaultFieldValue;it.target.checked=at!=null&&at===M.buttonValue}),this.enableScripting&&this.hasJSActions){const it=M.buttonValue;G.addEventListener("updatefromsandbox",at=>{const jt={value:Yt=>{const Rt=it===Yt.detail.value;for(const Nt of this._getElementsByName(Yt.target.name)){const Pt=Rt&&Nt.id===z;Nt.domElement&&(Nt.domElement.checked=Pt),m.setValue(Nt.id,{value:Pt})}}};this._dispatchEventFromSandbox(jt,at)}),this._setEventListeners(G,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],at=>at.target.checked)}return this._setBackgroundColor(G),this._setDefaultPropertiesFromJS(G),this.container.append(G),this.container}}class L extends E{constructor(m){super(m,{ignoreBorder:m.data.hasAppearance})}render(){const m=super.render();m.classList.add("buttonWidgetAnnotation","pushButton"),this.data.alternativeText&&(m.title=this.data.alternativeText);const M=m.lastChild;return this.enableScripting&&this.hasJSActions&&M&&(this._setDefaultPropertiesFromJS(M),M.addEventListener("updatefromsandbox",z=>{this._dispatchEventFromSandbox({},z)})),m}}class $ extends x{constructor(m){super(m,{isRenderable:m.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const m=this.annotationStorage,M=this.data.id,z=m.getValue(M,{value:this.data.fieldValue}),W=document.createElement("select");d.add(W),W.setAttribute("data-element-id",M),W.disabled=this.data.readOnly,this._setRequired(W,this.data.required),W.name=this.data.fieldName,W.tabIndex=u;let G=this.data.combo&&this.data.options.length>0;this.data.combo||(W.size=this.data.options.length,this.data.multiSelect&&(W.multiple=!0)),W.addEventListener("resetform",Rt=>{const Nt=this.data.defaultFieldValue;for(const Pt of W.options)Pt.selected=Pt.value===Nt});for(const Rt of this.data.options){const Nt=document.createElement("option");Nt.textContent=Rt.displayValue,Nt.value=Rt.exportValue,z.value.includes(Rt.exportValue)&&(Nt.setAttribute("selected",!0),G=!1),W.append(Nt)}let it=null;if(G){const Rt=document.createElement("option");Rt.value=" ",Rt.setAttribute("hidden",!0),Rt.setAttribute("selected",!0),W.prepend(Rt),it=()=>{Rt.remove(),W.removeEventListener("input",it),it=null},W.addEventListener("input",it)}const at=Rt=>{const Nt=Rt?"value":"textContent",{options:Pt,multiple:Lt}=W;return Lt?Array.prototype.filter.call(Pt,Ut=>Ut.selected).map(Ut=>Ut[Nt]):Pt.selectedIndex===-1?null:Pt[Pt.selectedIndex][Nt]};let jt=at(!1);const Yt=Rt=>{const Nt=Rt.target.options;return Array.prototype.map.call(Nt,Pt=>({displayValue:Pt.textContent,exportValue:Pt.value}))};return this.enableScripting&&this.hasJSActions?(W.addEventListener("updatefromsandbox",Rt=>{const Nt={value(Pt){it?.();const Lt=Pt.detail.value,Ut=new Set(Array.isArray(Lt)?Lt:[Lt]);for(const Qt of W.options)Qt.selected=Ut.has(Qt.value);m.setValue(M,{value:at(!0)}),jt=at(!1)},multipleSelection(Pt){W.multiple=!0},remove(Pt){const Lt=W.options,Ut=Pt.detail.remove;Lt[Ut].selected=!1,W.remove(Ut),Lt.length>0&&Array.prototype.findIndex.call(Lt,$t=>$t.selected)===-1&&(Lt[0].selected=!0),m.setValue(M,{value:at(!0),items:Yt(Pt)}),jt=at(!1)},clear(Pt){for(;W.length!==0;)W.remove(0);m.setValue(M,{value:null,items:[]}),jt=at(!1)},insert(Pt){const{index:Lt,displayValue:Ut,exportValue:Qt}=Pt.detail.insert,$t=W.children[Lt],se=document.createElement("option");se.textContent=Ut,se.value=Qt,$t?$t.before(se):W.append(se),m.setValue(M,{value:at(!0),items:Yt(Pt)}),jt=at(!1)},items(Pt){const{items:Lt}=Pt.detail;for(;W.length!==0;)W.remove(0);for(const Ut of Lt){const{displayValue:Qt,exportValue:$t}=Ut,se=document.createElement("option");se.textContent=Qt,se.value=$t,W.append(se)}W.options.length>0&&(W.options[0].selected=!0),m.setValue(M,{value:at(!0),items:Yt(Pt)}),jt=at(!1)},indices(Pt){const Lt=new Set(Pt.detail.indices);for(const Ut of Pt.target.options)Ut.selected=Lt.has(Ut.index);m.setValue(M,{value:at(!0)}),jt=at(!1)},editable(Pt){Pt.target.disabled=!Pt.detail.editable}};this._dispatchEventFromSandbox(Nt,Rt)}),W.addEventListener("input",Rt=>{const Nt=at(!0);m.setValue(M,{value:Nt}),Rt.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:M,name:"Keystroke",value:jt,changeEx:Nt,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(W,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],Rt=>Rt.target.value)):W.addEventListener("input",function(Rt){m.setValue(M,{value:at(!0)})}),this.data.combo&&this._setTextStyle(W),this._setBackgroundColor(W),this._setDefaultPropertiesFromJS(W),this.container.append(W),this.container}}class rt extends h{constructor(m){const{data:M,elements:z}=m;super(m,{isRenderable:h._hasPopupData(M)}),this.elements=z}render(){this.container.classList.add("popupAnnotation");const m=new et({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open}),M=[];for(const z of this.elements)z.popup=m,M.push(z.data.id),z.addHighlightArea();return this.container.setAttribute("aria-controls",M.map(z=>`${c.AnnotationPrefix}${z}`).join(",")),this.container}}class et{#t=null;#e=this.#u.bind(this);#n=this.#E.bind(this);#i=this.#A.bind(this);#o=this.#x.bind(this);#r=null;#a=null;#l=null;#c=null;#s=null;#f=null;#d=!1;#h=null;#p=null;#y=null;#g=null;#m=!1;constructor({container:m,color:M,elements:z,titleObj:W,modificationDate:G,contentsObj:it,richText:at,parent:jt,rect:Yt,parentRect:Rt,open:Nt}){this.#a=m,this.#g=W,this.#l=it,this.#y=at,this.#s=jt,this.#r=M,this.#p=Yt,this.#f=Rt,this.#c=z;const Pt=_.PDFDateString.toDateObject(G);Pt&&(this.#t=jt.l10n.get("annotation_date_string",{date:Pt.toLocaleDateString(),time:Pt.toLocaleTimeString()})),this.trigger=z.flatMap(Lt=>Lt.getElementsToTriggerPopup());for(const Lt of this.trigger)Lt.addEventListener("click",this.#o),Lt.addEventListener("mouseenter",this.#i),Lt.addEventListener("mouseleave",this.#n),Lt.classList.add("popupTriggerArea");for(const Lt of z)Lt.container?.addEventListener("keydown",this.#e);this.#a.hidden=!0,Nt&&this.#x()}render(){if(this.#h)return;const{page:{view:m},viewport:{rawDims:{pageWidth:M,pageHeight:z,pageX:W,pageY:G}}}=this.#s,it=this.#h=document.createElement("div");if(it.className="popup",this.#r){const oe=it.style.outlineColor=c.Util.makeHexColor(...this.#r);CSS.supports("background-color","color-mix(in srgb, red 30%, white)")?it.style.backgroundColor=`color-mix(in srgb, ${oe} 30%, white)`:it.style.backgroundColor=c.Util.makeHexColor(...this.#r.map(Ce=>Math.floor(.7*(255-Ce)+Ce)))}const at=document.createElement("span");at.className="header";const jt=document.createElement("h1");if(at.append(jt),{dir:jt.dir,str:jt.textContent}=this.#g,it.append(at),this.#t){const oe=document.createElement("span");oe.classList.add("popupDate"),this.#t.then(_e=>{oe.textContent=_e}),at.append(oe)}const Yt=this.#l,Rt=this.#y;if(Rt?.str&&(!Yt?.str||Yt.str===Rt.str))F.XfaLayer.render({xfaHtml:Rt.html,intent:"richText",div:it}),it.lastChild.classList.add("richText","popupContent");else{const oe=this._formatContents(Yt);it.append(oe)}let Nt=!!this.#f,Pt=Nt?this.#f:this.#p;for(const oe of this.#c)if(!Pt||c.Util.intersect(oe.data.rect,Pt)!==null){Pt=oe.data.rect,Nt=!0;break}const Lt=c.Util.normalizeRect([Pt[0],m[3]-Pt[1]+m[1],Pt[2],m[3]-Pt[3]+m[1]]),Qt=Nt?Pt[2]-Pt[0]+5:0,$t=Lt[0]+Qt,se=Lt[1],{style:le}=this.#a;le.left=`${100*($t-W)/M}%`,le.top=`${100*(se-G)/z}%`,this.#a.append(it)}_formatContents({str:m,dir:M}){const z=document.createElement("p");z.classList.add("popupContent"),z.dir=M;const W=m.split(/(?:\r\n?|\n)/);for(let G=0,it=W.length;G<it;++G){const at=W[G];z.append(document.createTextNode(at)),G<it-1&&z.append(document.createElement("br"))}return z}#u(m){m.altKey||m.shiftKey||m.ctrlKey||m.metaKey||(m.key==="Enter"||m.key==="Escape"&&this.#d)&&this.#x()}#x(){this.#d=!this.#d,this.#d?(this.#A(),this.#a.addEventListener("click",this.#o),this.#a.addEventListener("keydown",this.#e)):(this.#E(),this.#a.removeEventListener("click",this.#o),this.#a.removeEventListener("keydown",this.#e))}#A(){this.#h||this.render(),this.isVisible?this.#d&&this.#a.classList.add("focused"):(this.#a.hidden=!1,this.#a.style.zIndex=parseInt(this.#a.style.zIndex)+1e3)}#E(){this.#a.classList.remove("focused"),!(this.#d||!this.isVisible)&&(this.#a.hidden=!0,this.#a.style.zIndex=parseInt(this.#a.style.zIndex)-1e3)}forceHide(){this.#m=this.isVisible,this.#m&&(this.#a.hidden=!0)}maybeShow(){this.#m&&(this.#m=!1,this.#a.hidden=!1)}get isVisible(){return this.#a.hidden===!1}}class yt extends h{constructor(m){super(m,{isRenderable:!0,ignoreBorder:!0}),this.textContent=m.data.textContent,this.textPosition=m.data.textPosition,this.annotationEditorType=c.AnnotationEditorType.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const m=document.createElement("div");m.classList.add("annotationTextContent"),m.setAttribute("role","comment");for(const M of this.textContent){const z=document.createElement("span");z.textContent=M,m.append(z)}this.container.append(m)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}f.FreeTextAnnotationElement=yt;class gt extends h{#t=null;constructor(m){super(m,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("lineAnnotation");const m=this.data,{width:M,height:z}=b(m.rect),W=this.svgFactory.create(M,z,!0),G=this.#t=this.svgFactory.createElement("svg:line");return G.setAttribute("x1",m.rect[2]-m.lineCoordinates[0]),G.setAttribute("y1",m.rect[3]-m.lineCoordinates[1]),G.setAttribute("x2",m.rect[2]-m.lineCoordinates[2]),G.setAttribute("y2",m.rect[3]-m.lineCoordinates[3]),G.setAttribute("stroke-width",m.borderStyle.width||1),G.setAttribute("stroke","transparent"),G.setAttribute("fill","transparent"),W.append(G),this.container.append(W),!m.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class kt extends h{#t=null;constructor(m){super(m,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("squareAnnotation");const m=this.data,{width:M,height:z}=b(m.rect),W=this.svgFactory.create(M,z,!0),G=m.borderStyle.width,it=this.#t=this.svgFactory.createElement("svg:rect");return it.setAttribute("x",G/2),it.setAttribute("y",G/2),it.setAttribute("width",M-G),it.setAttribute("height",z-G),it.setAttribute("stroke-width",G||1),it.setAttribute("stroke","transparent"),it.setAttribute("fill","transparent"),W.append(it),this.container.append(W),!m.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class At extends h{#t=null;constructor(m){super(m,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("circleAnnotation");const m=this.data,{width:M,height:z}=b(m.rect),W=this.svgFactory.create(M,z,!0),G=m.borderStyle.width,it=this.#t=this.svgFactory.createElement("svg:ellipse");return it.setAttribute("cx",M/2),it.setAttribute("cy",z/2),it.setAttribute("rx",M/2-G/2),it.setAttribute("ry",z/2-G/2),it.setAttribute("stroke-width",G||1),it.setAttribute("stroke","transparent"),it.setAttribute("fill","transparent"),W.append(it),this.container.append(W),!m.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class Ft extends h{#t=null;constructor(m){super(m,{isRenderable:!0,ignoreBorder:!0}),this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const m=this.data,{width:M,height:z}=b(m.rect),W=this.svgFactory.create(M,z,!0);let G=[];for(const at of m.vertices){const jt=at.x-m.rect[0],Yt=m.rect[3]-at.y;G.push(jt+","+Yt)}G=G.join(" ");const it=this.#t=this.svgFactory.createElement(this.svgElementName);return it.setAttribute("points",G),it.setAttribute("stroke-width",m.borderStyle.width||1),it.setAttribute("stroke","transparent"),it.setAttribute("fill","transparent"),W.append(it),this.container.append(W),!m.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class Xt extends Ft{constructor(m){super(m),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class nt extends h{constructor(m){super(m,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}class Y extends h{#t=[];constructor(m){super(m,{isRenderable:!0,ignoreBorder:!0}),this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=c.AnnotationEditorType.INK}render(){this.container.classList.add(this.containerClassName);const m=this.data,{width:M,height:z}=b(m.rect),W=this.svgFactory.create(M,z,!0);for(const G of m.inkLists){let it=[];for(const jt of G){const Yt=jt.x-m.rect[0],Rt=m.rect[3]-jt.y;it.push(`${Yt},${Rt}`)}it=it.join(" ");const at=this.svgFactory.createElement(this.svgElementName);this.#t.push(at),at.setAttribute("points",it),at.setAttribute("stroke-width",m.borderStyle.width||1),at.setAttribute("stroke","transparent"),at.setAttribute("fill","transparent"),!m.popupRef&&this.hasPopupData&&this._createPopup(),W.append(at)}return this.container.append(W),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}f.InkAnnotationElement=Y;class k extends h{constructor(m){super(m,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this.container}}class S extends h{constructor(m){super(m,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),this.container}}class w extends h{constructor(m){super(m,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),this.container}}class y extends h{constructor(m){super(m,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),this.container}}class O extends h{constructor(m){super(m,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("stampAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}f.StampAnnotationElement=O;class H extends h{#t=null;constructor(m){super(m,{isRenderable:!0});const{filename:M,content:z}=this.data.file;this.filename=(0,_.getFilenameFromUrl)(M,!0),this.content=z,this.linkService.eventBus?.dispatch("fileattachmentannotation",{source:this,filename:M,content:z})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:m,data:M}=this;let z;M.hasAppearance||M.fillAlpha===0?z=document.createElement("div"):(z=document.createElement("img"),z.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(M.name)?"paperclip":"pushpin"}.svg`,M.fillAlpha&&M.fillAlpha<1&&(z.style=`filter: opacity(${Math.round(M.fillAlpha*100)}%);`)),z.addEventListener("dblclick",this.#e.bind(this)),this.#t=z;const{isMac:W}=c.FeatureTest.platform;return m.addEventListener("keydown",G=>{G.key==="Enter"&&(W?G.metaKey:G.ctrlKey)&&this.#e()}),!M.popupRef&&this.hasPopupData?this._createPopup():z.classList.add("popupTriggerArea"),m.append(z),m}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}#e(){this.downloadManager?.openOrDownloadData(this.container,this.content,this.filename)}}class J{#t=null;#e=null;#n=new Map;constructor({div:m,accessibilityManager:M,annotationCanvasMap:z,l10n:W,page:G,viewport:it}){this.div=m,this.#t=M,this.#e=z,this.l10n=W,this.page=G,this.viewport=it,this.zIndex=0,this.l10n||=U.NullL10n}#i(m,M){const z=m.firstChild||m;z.id=`${c.AnnotationPrefix}${M}`,this.div.append(m),this.#t?.moveElementInDOM(this.div,m,z,!1)}async render(m){const{annotations:M}=m,z=this.div;(0,_.setLayerDimensions)(z,this.viewport);const W=new Map,G={data:null,layer:z,linkService:m.linkService,downloadManager:m.downloadManager,imageResourcesPath:m.imageResourcesPath||"",renderForms:m.renderForms!==!1,svgFactory:new _.DOMSVGFactory,annotationStorage:m.annotationStorage||new B.AnnotationStorage,enableScripting:m.enableScripting===!0,hasJSActions:m.hasJSActions,fieldObjects:m.fieldObjects,parent:this,elements:null};for(const it of M){if(it.noHTML)continue;const at=it.annotationType===c.AnnotationType.POPUP;if(at){const Rt=W.get(it.id);if(!Rt)continue;G.elements=Rt}else{const{width:Rt,height:Nt}=b(it.rect);if(Rt<=0||Nt<=0)continue}G.data=it;const jt=g.create(G);if(!jt.isRenderable)continue;if(!at&&it.popupRef){const Rt=W.get(it.popupRef);Rt?Rt.push(jt):W.set(it.popupRef,[jt])}jt.annotationEditorType>0&&this.#n.set(jt.data.id,jt);const Yt=jt.render();it.hidden&&(Yt.style.visibility="hidden"),this.#i(Yt,it.id)}this.#o(),await this.l10n.translate(z)}update({viewport:m}){const M=this.div;this.viewport=m,(0,_.setLayerDimensions)(M,{rotation:m.rotation}),this.#o(),M.hidden=!1}#o(){if(!this.#e)return;const m=this.div;for(const[M,z]of this.#e){const W=m.querySelector(`[data-annotation-id="${M}"]`);if(!W)continue;const{firstChild:G}=W;G?G.nodeName==="CANVAS"?G.replaceWith(z):G.before(z):W.append(z)}this.#e.clear()}getEditableAnnotations(){return Array.from(this.#n.values())}getEditableAnnotation(m){return this.#n.get(m)}}f.AnnotationLayer=J}),((R,f)=>{Object.defineProperty(f,"__esModule",{value:!0}),f.ColorConverters=void 0;function D(B){return Math.floor(Math.max(0,Math.min(1,B))*255).toString(16).padStart(2,"0")}function c(B){return Math.max(0,Math.min(255,255*B))}class _{static CMYK_G([N,U,F,u]){return["G",1-Math.min(1,.3*N+.59*F+.11*U+u)]}static G_CMYK([N]){return["CMYK",0,0,0,1-N]}static G_RGB([N]){return["RGB",N,N,N]}static G_rgb([N]){return N=c(N),[N,N,N]}static G_HTML([N]){const U=D(N);return`#${U}${U}${U}`}static RGB_G([N,U,F]){return["G",.3*N+.59*U+.11*F]}static RGB_rgb(N){return N.map(c)}static RGB_HTML(N){return`#${N.map(D).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([N,U,F,u]){return["RGB",1-Math.min(1,N+u),1-Math.min(1,F+u),1-Math.min(1,U+u)]}static CMYK_rgb([N,U,F,u]){return[c(1-Math.min(1,N+u)),c(1-Math.min(1,F+u)),c(1-Math.min(1,U+u))]}static CMYK_HTML(N){const U=this.CMYK_RGB(N).slice(1);return this.RGB_HTML(U)}static RGB_CMYK([N,U,F]){const u=1-N,o=1-U,d=1-F,b=Math.min(u,o,d);return["CMYK",u,o,d,b]}}f.ColorConverters=_}),((R,f)=>{Object.defineProperty(f,"__esModule",{value:!0}),f.NullL10n=void 0,f.getL10nFallback=c;const D={of_pages:"of {{pagesCount}}",page_of_pages:"({{pageNumber}} of {{pagesCount}})",document_properties_kb:"{{size_kb}} KB ({{size_b}} bytes)",document_properties_mb:"{{size_mb}} MB ({{size_b}} bytes)",document_properties_date_string:"{{date}}, {{time}}",document_properties_page_size_unit_inches:"in",document_properties_page_size_unit_millimeters:"mm",document_properties_page_size_orientation_portrait:"portrait",document_properties_page_size_orientation_landscape:"landscape",document_properties_page_size_name_a3:"A3",document_properties_page_size_name_a4:"A4",document_properties_page_size_name_letter:"Letter",document_properties_page_size_name_legal:"Legal",document_properties_page_size_dimension_string:"{{width}}  {{height}} {{unit}} ({{orientation}})",document_properties_page_size_dimension_name_string:"{{width}}  {{height}} {{unit}} ({{name}}, {{orientation}})",document_properties_linearized_yes:"Yes",document_properties_linearized_no:"No",additional_layers:"Additional Layers",page_landmark:"Page {{page}}",thumb_page_title:"Page {{page}}",thumb_page_canvas:"Thumbnail of Page {{page}}",find_reached_top:"Reached top of document, continued from bottom",find_reached_bottom:"Reached end of document, continued from top","find_match_count[one]":"{{current}} of {{total}} match","find_match_count[other]":"{{current}} of {{total}} matches","find_match_count_limit[one]":"More than {{limit}} match","find_match_count_limit[other]":"More than {{limit}} matches",find_not_found:"Phrase not found",page_scale_width:"Page Width",page_scale_fit:"Page Fit",page_scale_auto:"Automatic Zoom",page_scale_actual:"Actual Size",page_scale_percent:"{{scale}}%",loading_error:"An error occurred while loading the PDF.",invalid_file_error:"Invalid or corrupted PDF file.",missing_file_error:"Missing PDF file.",unexpected_response_error:"Unexpected server response.",rendering_error:"An error occurred while rendering the page.",annotation_date_string:"{{date}}, {{time}}",printing_not_supported:"Warning: Printing is not fully supported by this browser.",printing_not_ready:"Warning: The PDF is not fully loaded for printing.",web_fonts_disabled:"Web fonts are disabled: unable to use embedded PDF fonts.",free_text2_default_content:"Start typing",editor_free_text2_aria_label:"Text Editor",editor_ink2_aria_label:"Draw Editor",editor_ink_canvas_aria_label:"User-created image",editor_alt_text_button_label:"Alt text",editor_alt_text_edit_button_label:"Edit alt text",editor_alt_text_decorative_tooltip:"Marked as decorative"};D.print_progress_percent="{{progress}}%";function c(N,U){switch(N){case"find_match_count":N=`find_match_count[${U.total===1?"one":"other"}]`;break;case"find_match_count_limit":N=`find_match_count_limit[${U.limit===1?"one":"other"}]`;break}return D[N]||""}function _(N,U){return U?N.replaceAll(/\{\{\s*(\w+)\s*\}\}/g,(F,u)=>u in U?U[u]:"{{"+u+"}}"):N}const B={async getLanguage(){return"en-us"},async getDirection(){return"ltr"},async get(N,U=null,F=c(N,U)){return _(F,U)},async translate(N){}};f.NullL10n=B}),((R,f,D)=>{Object.defineProperty(f,"__esModule",{value:!0}),f.XfaLayer=void 0;var c=D(25);class _{static setupStorage(N,U,F,u,o){const d=u.getValue(U,{value:null});switch(F.name){case"textarea":if(d.value!==null&&(N.textContent=d.value),o==="print")break;N.addEventListener("input",b=>{u.setValue(U,{value:b.target.value})});break;case"input":if(F.attributes.type==="radio"||F.attributes.type==="checkbox"){if(d.value===F.attributes.xfaOn?N.setAttribute("checked",!0):d.value===F.attributes.xfaOff&&N.removeAttribute("checked"),o==="print")break;N.addEventListener("change",b=>{u.setValue(U,{value:b.target.checked?b.target.getAttribute("xfaOn"):b.target.getAttribute("xfaOff")})})}else{if(d.value!==null&&N.setAttribute("value",d.value),o==="print")break;N.addEventListener("input",b=>{u.setValue(U,{value:b.target.value})})}break;case"select":if(d.value!==null){N.setAttribute("value",d.value);for(const b of F.children)b.attributes.value===d.value?b.attributes.selected=!0:b.attributes.hasOwnProperty("selected")&&delete b.attributes.selected}N.addEventListener("input",b=>{const g=b.target.options,h=g.selectedIndex===-1?"":g[g.selectedIndex].value;u.setValue(U,{value:h})});break}}static setAttributes({html:N,element:U,storage:F=null,intent:u,linkService:o}){const{attributes:d}=U,b=N instanceof HTMLAnchorElement;d.type==="radio"&&(d.name=`${d.name}-${u}`);for(const[g,h]of Object.entries(d))if(h!=null)switch(g){case"class":h.length&&N.setAttribute(g,h.join(" "));break;case"dataId":break;case"id":N.setAttribute("data-element-id",h);break;case"style":Object.assign(N.style,h);break;case"textContent":N.textContent=h;break;default:(!b||g!=="href"&&g!=="newWindow")&&N.setAttribute(g,h)}b&&o.addLinkAttributes(N,d.href,d.newWindow),F&&d.dataId&&this.setupStorage(N,d.dataId,U,F)}static render(N){const U=N.annotationStorage,F=N.linkService,u=N.xfaHtml,o=N.intent||"display",d=document.createElement(u.name);u.attributes&&this.setAttributes({html:d,element:u,intent:o,linkService:F});const b=[[u,-1,d]],g=N.div;if(g.append(d),N.viewport){const E=`matrix(${N.viewport.transform.join(",")})`;g.style.transform=E}o!=="richText"&&g.setAttribute("class","xfaLayer xfaFont");const h=[];for(;b.length>0;){const[E,C,x]=b.at(-1);if(C+1===E.children.length){b.pop();continue}const I=E.children[++b.at(-1)[1]];if(I===null)continue;const{name:Q}=I;if(Q==="#text"){const T=document.createTextNode(I.value);h.push(T),x.append(T);continue}const V=I?.attributes?.xmlns?document.createElementNS(I.attributes.xmlns,Q):document.createElement(Q);if(x.append(V),I.attributes&&this.setAttributes({html:V,element:I,storage:U,intent:o,linkService:F}),I.children&&I.children.length>0)b.push([I,-1,V]);else if(I.value){const T=document.createTextNode(I.value);c.XfaText.shouldBuildText(Q)&&h.push(T),V.append(T)}}for(const E of g.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))E.setAttribute("readOnly",!0);return{textDivs:h}}static update(N){const U=`matrix(${N.viewport.transform.join(",")})`;N.div.style.transform=U,N.div.hidden=!1}}f.XfaLayer=_}),((R,f,D)=>{Object.defineProperty(f,"__esModule",{value:!0}),f.InkEditor=void 0;var c=D(1),_=D(4),B=D(29),N=D(6),U=D(5);class F extends _.AnnotationEditor{#t=0;#e=0;#n=this.canvasPointermove.bind(this);#i=this.canvasPointerleave.bind(this);#o=this.canvasPointerup.bind(this);#r=this.canvasPointerdown.bind(this);#a=new Path2D;#l=!1;#c=!1;#s=!1;#f=null;#d=0;#h=0;#p=null;static _defaultColor=null;static _defaultOpacity=1;static _defaultThickness=1;static _type="ink";constructor(o){super({...o,name:"inkEditor"}),this.color=o.color||null,this.thickness=o.thickness||null,this.opacity=o.opacity||null,this.paths=[],this.bezierPath2D=[],this.allRawPaths=[],this.currentPath=[],this.scaleFactor=1,this.translationX=this.translationY=0,this.x=0,this.y=0,this._willKeepAspectRatio=!0}static initialize(o){_.AnnotationEditor.initialize(o,{strings:["editor_ink_canvas_aria_label","editor_ink2_aria_label"]})}static updateDefaultParams(o,d){switch(o){case c.AnnotationEditorParamsType.INK_THICKNESS:F._defaultThickness=d;break;case c.AnnotationEditorParamsType.INK_COLOR:F._defaultColor=d;break;case c.AnnotationEditorParamsType.INK_OPACITY:F._defaultOpacity=d/100;break}}updateParams(o,d){switch(o){case c.AnnotationEditorParamsType.INK_THICKNESS:this.#y(d);break;case c.AnnotationEditorParamsType.INK_COLOR:this.#g(d);break;case c.AnnotationEditorParamsType.INK_OPACITY:this.#m(d);break}}static get defaultPropertiesToUpdate(){return[[c.AnnotationEditorParamsType.INK_THICKNESS,F._defaultThickness],[c.AnnotationEditorParamsType.INK_COLOR,F._defaultColor||_.AnnotationEditor._defaultLineColor],[c.AnnotationEditorParamsType.INK_OPACITY,Math.round(F._defaultOpacity*100)]]}get propertiesToUpdate(){return[[c.AnnotationEditorParamsType.INK_THICKNESS,this.thickness||F._defaultThickness],[c.AnnotationEditorParamsType.INK_COLOR,this.color||F._defaultColor||_.AnnotationEditor._defaultLineColor],[c.AnnotationEditorParamsType.INK_OPACITY,Math.round(100*(this.opacity??F._defaultOpacity))]]}#y(o){const d=this.thickness;this.addCommands({cmd:()=>{this.thickness=o,this.#w()},undo:()=>{this.thickness=d,this.#w()},mustExec:!0,type:c.AnnotationEditorParamsType.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0})}#g(o){const d=this.color;this.addCommands({cmd:()=>{this.color=o,this.#v()},undo:()=>{this.color=d,this.#v()},mustExec:!0,type:c.AnnotationEditorParamsType.INK_COLOR,overwriteIfSameType:!0,keepUndo:!0})}#m(o){o/=100;const d=this.opacity;this.addCommands({cmd:()=>{this.opacity=o,this.#v()},undo:()=>{this.opacity=d,this.#v()},mustExec:!0,type:c.AnnotationEditorParamsType.INK_OPACITY,overwriteIfSameType:!0,keepUndo:!0})}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.canvas||(this.#C(),this.#M()),this.isAttachedToDOM||(this.parent.add(this),this.#b()),this.#w()))}remove(){this.canvas!==null&&(this.isEmpty()||this.commit(),this.canvas.width=this.canvas.height=0,this.canvas.remove(),this.canvas=null,this.#f.disconnect(),this.#f=null,super.remove())}setParent(o){!this.parent&&o?this._uiManager.removeShouldRescale(this):this.parent&&o===null&&this._uiManager.addShouldRescale(this),super.setParent(o)}onScaleChanging(){const[o,d]=this.parentDimensions,b=this.width*o,g=this.height*d;this.setDimensions(b,g)}enableEditMode(){this.#l||this.canvas===null||(super.enableEditMode(),this._isDraggable=!1,this.canvas.addEventListener("pointerdown",this.#r))}disableEditMode(){!this.isInEditMode()||this.canvas===null||(super.disableEditMode(),this._isDraggable=!this.isEmpty(),this.div.classList.remove("editing"),this.canvas.removeEventListener("pointerdown",this.#r))}onceAdded(){this._isDraggable=!this.isEmpty()}isEmpty(){return this.paths.length===0||this.paths.length===1&&this.paths[0].length===0}#u(){const{parentRotation:o,parentDimensions:[d,b]}=this;switch(o){case 90:return[0,b,b,d];case 180:return[d,b,d,b];case 270:return[d,0,b,d];default:return[0,0,d,b]}}#x(){const{ctx:o,color:d,opacity:b,thickness:g,parentScale:h,scaleFactor:E}=this;o.lineWidth=g*h/E,o.lineCap="round",o.lineJoin="round",o.miterLimit=10,o.strokeStyle=`${d}${(0,U.opacityToHex)(b)}`}#A(o,d){this.canvas.addEventListener("contextmenu",N.noContextMenu),this.canvas.addEventListener("pointerleave",this.#i),this.canvas.addEventListener("pointermove",this.#n),this.canvas.addEventListener("pointerup",this.#o),this.canvas.removeEventListener("pointerdown",this.#r),this.isEditing=!0,this.#s||(this.#s=!0,this.#b(),this.thickness||=F._defaultThickness,this.color||=F._defaultColor||_.AnnotationEditor._defaultLineColor,this.opacity??=F._defaultOpacity),this.currentPath.push([o,d]),this.#c=!1,this.#x(),this.#p=()=>{this.#O(),this.#p&&window.requestAnimationFrame(this.#p)},window.requestAnimationFrame(this.#p)}#E(o,d){const[b,g]=this.currentPath.at(-1);if(this.currentPath.length>1&&o===b&&d===g)return;const h=this.currentPath;let E=this.#a;if(h.push([o,d]),this.#c=!0,h.length<=2){E.moveTo(...h[0]),E.lineTo(o,d);return}h.length===3&&(this.#a=E=new Path2D,E.moveTo(...h[0])),this.#L(E,...h.at(-3),...h.at(-2),o,d)}#R(){if(this.currentPath.length===0)return;const o=this.currentPath.at(-1);this.#a.lineTo(...o)}#j(o,d){this.#p=null,o=Math.min(Math.max(o,0),this.canvas.width),d=Math.min(Math.max(d,0),this.canvas.height),this.#E(o,d),this.#R();let b;if(this.currentPath.length!==1)b=this.#P();else{const x=[o,d];b=[[x,x.slice(),x.slice(),x]]}const g=this.#a,h=this.currentPath;this.currentPath=[],this.#a=new Path2D;const E=()=>{this.allRawPaths.push(h),this.paths.push(b),this.bezierPath2D.push(g),this.rebuild()},C=()=>{this.allRawPaths.pop(),this.paths.pop(),this.bezierPath2D.pop(),this.paths.length===0?this.remove():(this.canvas||(this.#C(),this.#M()),this.#w())};this.addCommands({cmd:E,undo:C,mustExec:!0})}#O(){if(!this.#c)return;this.#c=!1;const o=Math.ceil(this.thickness*this.parentScale),d=this.currentPath.slice(-3),b=d.map(E=>E[0]),g=d.map(E=>E[1]);Math.min(...b)-o,Math.max(...b)+o,Math.min(...g)-o,Math.max(...g)+o;const{ctx:h}=this;h.save(),h.clearRect(0,0,this.canvas.width,this.canvas.height);for(const E of this.bezierPath2D)h.stroke(E);h.stroke(this.#a),h.restore()}#L(o,d,b,g,h,E,C){const x=(d+g)/2,I=(b+h)/2,Q=(g+E)/2,V=(h+C)/2;o.bezierCurveTo(x+2*(g-x)/3,I+2*(h-I)/3,Q+2*(g-Q)/3,V+2*(h-V)/3,Q,V)}#P(){const o=this.currentPath;if(o.length<=2)return[[o[0],o[0],o.at(-1),o.at(-1)]];const d=[];let b,[g,h]=o[0];for(b=1;b<o.length-2;b++){const[T,L]=o[b],[$,rt]=o[b+1],et=(T+$)/2,yt=(L+rt)/2,gt=[g+2*(T-g)/3,h+2*(L-h)/3],kt=[et+2*(T-et)/3,yt+2*(L-yt)/3];d.push([[g,h],gt,kt,[et,yt]]),[g,h]=[et,yt]}const[E,C]=o[b],[x,I]=o[b+1],Q=[g+2*(E-g)/3,h+2*(C-h)/3],V=[x+2*(E-x)/3,I+2*(C-I)/3];return d.push([[g,h],Q,V,[x,I]]),d}#v(){if(this.isEmpty()){this.#S();return}this.#x();const{canvas:o,ctx:d}=this;d.setTransform(1,0,0,1,0,0),d.clearRect(0,0,o.width,o.height),this.#S();for(const b of this.bezierPath2D)d.stroke(b)}commit(){this.#l||(super.commit(),this.isEditing=!1,this.disableEditMode(),this.setInForeground(),this.#l=!0,this.div.classList.add("disabled"),this.#w(!0),this.makeResizable(),this.parent.addInkEditorIfNeeded(!0),this.moveInDOM(),this.div.focus({preventScroll:!0}))}focusin(o){this._focusEventsAllowed&&(super.focusin(o),this.enableEditMode())}canvasPointerdown(o){o.button!==0||!this.isInEditMode()||this.#l||(this.setInForeground(),o.preventDefault(),o.type!=="mouse"&&this.div.focus(),this.#A(o.offsetX,o.offsetY))}canvasPointermove(o){o.preventDefault(),this.#E(o.offsetX,o.offsetY)}canvasPointerup(o){o.preventDefault(),this.#D(o)}canvasPointerleave(o){this.#D(o)}#D(o){this.canvas.removeEventListener("pointerleave",this.#i),this.canvas.removeEventListener("pointermove",this.#n),this.canvas.removeEventListener("pointerup",this.#o),this.canvas.addEventListener("pointerdown",this.#r),setTimeout(()=>{this.canvas.removeEventListener("contextmenu",N.noContextMenu)},10),this.#j(o.offsetX,o.offsetY),this.addToAnnotationStorage(),this.setInBackground()}#C(){this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=0,this.canvas.className="inkEditorCanvas",_.AnnotationEditor._l10nPromise.get("editor_ink_canvas_aria_label").then(o=>this.canvas?.setAttribute("aria-label",o)),this.div.append(this.canvas),this.ctx=this.canvas.getContext("2d")}#M(){this.#f=new ResizeObserver(o=>{const d=o[0].contentRect;d.width&&d.height&&this.setDimensions(d.width,d.height)}),this.#f.observe(this.div)}get isResizable(){return!this.isEmpty()&&this.#l}render(){if(this.div)return this.div;let o,d;this.width&&(o=this.x,d=this.y),super.render(),_.AnnotationEditor._l10nPromise.get("editor_ink2_aria_label").then(C=>this.div?.setAttribute("aria-label",C));const[b,g,h,E]=this.#u();if(this.setAt(b,g,0,0),this.setDims(h,E),this.#C(),this.width){const[C,x]=this.parentDimensions;this.setAspectRatio(this.width*C,this.height*x),this.setAt(o*C,d*x,this.width*C,this.height*x),this.#s=!0,this.#b(),this.setDims(this.width*C,this.height*x),this.#v(),this.div.classList.add("disabled")}else this.div.classList.add("editing"),this.enableEditMode();return this.#M(),this.div}#b(){if(!this.#s)return;const[o,d]=this.parentDimensions;this.canvas.width=Math.ceil(this.width*o),this.canvas.height=Math.ceil(this.height*d),this.#S()}setDimensions(o,d){const b=Math.round(o),g=Math.round(d);if(this.#d===b&&this.#h===g)return;this.#d=b,this.#h=g,this.canvas.style.visibility="hidden";const[h,E]=this.parentDimensions;this.width=o/h,this.height=d/E,this.fixAndSetPosition(),this.#l&&this.#T(o,d),this.#b(),this.#v(),this.canvas.style.visibility="visible",this.fixDims()}#T(o,d){const b=this.#N(),g=(o-b)/this.#e,h=(d-b)/this.#t;this.scaleFactor=Math.min(g,h)}#S(){const o=this.#N()/2;this.ctx.setTransform(this.scaleFactor,0,0,this.scaleFactor,this.translationX*this.scaleFactor+o,this.translationY*this.scaleFactor+o)}static#F(o){const d=new Path2D;for(let b=0,g=o.length;b<g;b++){const[h,E,C,x]=o[b];b===0&&d.moveTo(...h),d.bezierCurveTo(E[0],E[1],C[0],C[1],x[0],x[1])}return d}static#z(o,d,b){const[g,h,E,C]=d;switch(b){case 0:for(let x=0,I=o.length;x<I;x+=2)o[x]+=g,o[x+1]=C-o[x+1];break;case 90:for(let x=0,I=o.length;x<I;x+=2){const Q=o[x];o[x]=o[x+1]+g,o[x+1]=Q+h}break;case 180:for(let x=0,I=o.length;x<I;x+=2)o[x]=E-o[x],o[x+1]+=h;break;case 270:for(let x=0,I=o.length;x<I;x+=2){const Q=o[x];o[x]=E-o[x+1],o[x+1]=C-Q}break;default:throw new Error("Invalid rotation")}return o}static#B(o,d,b){const[g,h,E,C]=d;switch(b){case 0:for(let x=0,I=o.length;x<I;x+=2)o[x]-=g,o[x+1]=C-o[x+1];break;case 90:for(let x=0,I=o.length;x<I;x+=2){const Q=o[x];o[x]=o[x+1]-h,o[x+1]=Q-g}break;case 180:for(let x=0,I=o.length;x<I;x+=2)o[x]=E-o[x],o[x+1]-=h;break;case 270:for(let x=0,I=o.length;x<I;x+=2){const Q=o[x];o[x]=C-o[x+1],o[x+1]=E-Q}break;default:throw new Error("Invalid rotation")}return o}#I(o,d,b,g){const h=[],E=this.thickness/2,C=o*d+E,x=o*b+E;for(const I of this.paths){const Q=[],V=[];for(let T=0,L=I.length;T<L;T++){const[$,rt,et,yt]=I[T],gt=o*$[0]+C,kt=o*$[1]+x,At=o*rt[0]+C,Ft=o*rt[1]+x,Xt=o*et[0]+C,nt=o*et[1]+x,Y=o*yt[0]+C,k=o*yt[1]+x;T===0&&(Q.push(gt,kt),V.push(gt,kt)),Q.push(At,Ft,Xt,nt,Y,k),V.push(At,Ft),T===L-1&&V.push(Y,k)}h.push({bezier:F.#z(Q,g,this.rotation),points:F.#z(V,g,this.rotation)})}return h}#k(){let o=1/0,d=-1/0,b=1/0,g=-1/0;for(const h of this.paths)for(const[E,C,x,I]of h){const Q=c.Util.bezierBoundingBox(...E,...C,...x,...I);o=Math.min(o,Q[0]),b=Math.min(b,Q[1]),d=Math.max(d,Q[2]),g=Math.max(g,Q[3])}return[o,b,d,g]}#N(){return this.#l?Math.ceil(this.thickness*this.parentScale):0}#w(o=!1){if(this.isEmpty())return;if(!this.#l){this.#v();return}const d=this.#k(),b=this.#N();this.#e=Math.max(_.AnnotationEditor.MIN_SIZE,d[2]-d[0]),this.#t=Math.max(_.AnnotationEditor.MIN_SIZE,d[3]-d[1]);const g=Math.ceil(b+this.#e*this.scaleFactor),h=Math.ceil(b+this.#t*this.scaleFactor),[E,C]=this.parentDimensions;this.width=g/E,this.height=h/C,this.setAspectRatio(g,h);const x=this.translationX,I=this.translationY;this.translationX=-d[0],this.translationY=-d[1],this.#b(),this.#v(),this.#d=g,this.#h=h,this.setDims(g,h);const Q=o?b/this.scaleFactor/2:0;this.translate(x-this.translationX-Q,I-this.translationY-Q)}static deserialize(o,d,b){if(o instanceof B.InkAnnotationElement)return null;const g=super.deserialize(o,d,b);g.thickness=o.thickness,g.color=c.Util.makeHexColor(...o.color),g.opacity=o.opacity;const[h,E]=g.pageDimensions,C=g.width*h,x=g.height*E,I=g.parentScale,Q=o.thickness/2;g.#l=!0,g.#d=Math.round(C),g.#h=Math.round(x);const{paths:V,rect:T,rotation:L}=o;for(let{bezier:rt}of V){rt=F.#B(rt,T,L);const et=[];g.paths.push(et);let yt=I*(rt[0]-Q),gt=I*(rt[1]-Q);for(let At=2,Ft=rt.length;At<Ft;At+=6){const Xt=I*(rt[At]-Q),nt=I*(rt[At+1]-Q),Y=I*(rt[At+2]-Q),k=I*(rt[At+3]-Q),S=I*(rt[At+4]-Q),w=I*(rt[At+5]-Q);et.push([[yt,gt],[Xt,nt],[Y,k],[S,w]]),yt=S,gt=w}const kt=this.#F(et);g.bezierPath2D.push(kt)}const $=g.#k();return g.#e=Math.max(_.AnnotationEditor.MIN_SIZE,$[2]-$[0]),g.#t=Math.max(_.AnnotationEditor.MIN_SIZE,$[3]-$[1]),g.#T(C,x),g}serialize(){if(this.isEmpty())return null;const o=this.getRect(0,0),d=_.AnnotationEditor._colorManager.convert(this.ctx.strokeStyle);return{annotationType:c.AnnotationEditorType.INK,color:d,thickness:this.thickness,opacity:this.opacity,paths:this.#I(this.scaleFactor/this.parentScale,this.translationX,this.translationY,o),pageIndex:this.pageIndex,rect:o,rotation:this.rotation,structTreeParentId:this._structTreeParentId}}}f.InkEditor=F}),((R,f,D)=>{Object.defineProperty(f,"__esModule",{value:!0}),f.StampEditor=void 0;var c=D(1),_=D(4),B=D(6),N=D(29);class U extends _.AnnotationEditor{#t=null;#e=null;#n=null;#i=null;#o=null;#r=null;#a=null;#l=null;#c=!1;#s=!1;static _type="stamp";constructor(u){super({...u,name:"stampEditor"}),this.#i=u.bitmapUrl,this.#o=u.bitmapFile}static initialize(u){_.AnnotationEditor.initialize(u)}static get supportedTypes(){const u=["apng","avif","bmp","gif","jpeg","png","svg+xml","webp","x-icon"];return(0,c.shadow)(this,"supportedTypes",u.map(o=>`image/${o}`))}static get supportedTypesStr(){return(0,c.shadow)(this,"supportedTypesStr",this.supportedTypes.join(","))}static isHandlingMimeForPasting(u){return this.supportedTypes.includes(u)}static paste(u,o){o.pasteEditor(c.AnnotationEditorType.STAMP,{bitmapFile:u.getAsFile()})}#f(u,o=!1){if(!u){this.remove();return}this.#t=u.bitmap,o||(this.#e=u.id,this.#c=u.isSvg),this.#p()}#d(){this.#n=null,this._uiManager.enableWaiting(!1),this.#r&&this.div.focus()}#h(){if(this.#e){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(this.#e).then(o=>this.#f(o,!0)).finally(()=>this.#d());return}if(this.#i){const o=this.#i;this.#i=null,this._uiManager.enableWaiting(!0),this.#n=this._uiManager.imageManager.getFromUrl(o).then(d=>this.#f(d)).finally(()=>this.#d());return}if(this.#o){const o=this.#o;this.#o=null,this._uiManager.enableWaiting(!0),this.#n=this._uiManager.imageManager.getFromFile(o).then(d=>this.#f(d)).finally(()=>this.#d());return}const u=document.createElement("input");u.type="file",u.accept=U.supportedTypesStr,this.#n=new Promise(o=>{u.addEventListener("change",async()=>{if(!u.files||u.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const d=await this._uiManager.imageManager.getFromFile(u.files[0]);this.#f(d)}o()}),u.addEventListener("cancel",()=>{this.remove(),o()})}).finally(()=>this.#d()),u.click()}remove(){this.#e&&(this.#t=null,this._uiManager.imageManager.deleteId(this.#e),this.#r?.remove(),this.#r=null,this.#a?.disconnect(),this.#a=null),super.remove()}rebuild(){if(!this.parent){this.#e&&this.#h();return}super.rebuild(),this.div!==null&&(this.#e&&this.#h(),this.isAttachedToDOM||this.parent.add(this))}onceAdded(){this._isDraggable=!0,this.div.focus()}isEmpty(){return!(this.#n||this.#t||this.#i||this.#o)}get isResizable(){return!0}render(){if(this.div)return this.div;let u,o;if(this.width&&(u=this.x,o=this.y),super.render(),this.div.hidden=!0,this.#t?this.#p():this.#h(),this.width){const[d,b]=this.parentDimensions;this.setAt(u*d,o*b,this.width*d,this.height*b)}return this.div}#p(){const{div:u}=this;let{width:o,height:d}=this.#t;const[b,g]=this.pageDimensions,h=.75;if(this.width)o=this.width*b,d=this.height*g;else if(o>h*b||d>h*g){const I=Math.min(h*b/o,h*g/d);o*=I,d*=I}const[E,C]=this.parentDimensions;this.setDims(o*E/b,d*C/g),this._uiManager.enableWaiting(!1);const x=this.#r=document.createElement("canvas");u.append(x),u.hidden=!1,this.#m(o,d),this.#x(),this.#s||(this.parent.addUndoableEditor(this),this.#s=!0),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",subtype:this.editorType,data:{action:"inserted_image"}}}),this.addAltTextButton()}#y(u,o){const[d,b]=this.parentDimensions;this.width=u/d,this.height=o/b,this.setDims(u,o),this._initialOptions?.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,this.#l!==null&&clearTimeout(this.#l);const g=200;this.#l=setTimeout(()=>{this.#l=null,this.#m(u,o)},g)}#g(u,o){const{width:d,height:b}=this.#t;let g=d,h=b,E=this.#t;for(;g>2*u||h>2*o;){const C=g,x=h;g>2*u&&(g=g>=16384?Math.floor(g/2)-1:Math.ceil(g/2)),h>2*o&&(h=h>=16384?Math.floor(h/2)-1:Math.ceil(h/2));const I=new OffscreenCanvas(g,h);I.getContext("2d").drawImage(E,0,0,C,x,0,0,g,h),E=I.transferToImageBitmap()}return E}#m(u,o){u=Math.ceil(u),o=Math.ceil(o);const d=this.#r;if(!d||d.width===u&&d.height===o)return;d.width=u,d.height=o;const b=this.#c?this.#t:this.#g(u,o),g=d.getContext("2d");g.filter=this._uiManager.hcmFilter,g.drawImage(b,0,0,b.width,b.height,0,0,u,o)}#u(u){if(u){if(this.#c){const b=this._uiManager.imageManager.getSvgUrl(this.#e);if(b)return b}const o=document.createElement("canvas");return{width:o.width,height:o.height}=this.#t,o.getContext("2d").drawImage(this.#t,0,0),o.toDataURL()}if(this.#c){const[o,d]=this.pageDimensions,b=Math.round(this.width*o*B.PixelsPerInch.PDF_TO_CSS_UNITS),g=Math.round(this.height*d*B.PixelsPerInch.PDF_TO_CSS_UNITS),h=new OffscreenCanvas(b,g);return h.getContext("2d").drawImage(this.#t,0,0,this.#t.width,this.#t.height,0,0,b,g),h.transferToImageBitmap()}return structuredClone(this.#t)}#x(){this.#a=new ResizeObserver(u=>{const o=u[0].contentRect;o.width&&o.height&&this.#y(o.width,o.height)}),this.#a.observe(this.div)}static deserialize(u,o,d){if(u instanceof N.StampAnnotationElement)return null;const b=super.deserialize(u,o,d),{rect:g,bitmapUrl:h,bitmapId:E,isSvg:C,accessibilityData:x}=u;E&&d.imageManager.isValidId(E)?b.#e=E:b.#i=h,b.#c=C;const[I,Q]=b.pageDimensions;return b.width=(g[2]-g[0])/I,b.height=(g[3]-g[1])/Q,x&&(b.altTextData=x),b}serialize(u=!1,o=null){if(this.isEmpty())return null;const d={annotationType:c.AnnotationEditorType.STAMP,bitmapId:this.#e,pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:this.#c,structTreeParentId:this._structTreeParentId};if(u)return d.bitmapUrl=this.#u(!0),d.accessibilityData=this.altTextData,d;const{decorative:b,altText:g}=this.altTextData;if(!b&&g&&(d.accessibilityData={type:"Figure",alt:g}),o===null)return d;o.stamps||=new Map;const h=this.#c?(d.rect[2]-d.rect[0])*(d.rect[3]-d.rect[1]):null;if(!o.stamps.has(this.#e))o.stamps.set(this.#e,{area:h,serialized:d}),d.bitmap=this.#u(!1);else if(this.#c){const E=o.stamps.get(this.#e);h>E.area&&(E.area=h,E.serialized.bitmap.close(),E.serialized.bitmap=this.#u(!1))}return d}}f.StampEditor=U})],__webpack_module_cache__={};function __w_pdfjs_require__(R){var f=__webpack_module_cache__[R];if(f!==void 0)return f.exports;var D=__webpack_module_cache__[R]={exports:{}};return __webpack_modules__[R](D,D.exports,__w_pdfjs_require__),D.exports}var __webpack_exports__={};return(()=>{var R=__webpack_exports__;Object.defineProperty(R,"__esModule",{value:!0}),Object.defineProperty(R,"AbortException",{enumerable:!0,get:function(){return f.AbortException}}),Object.defineProperty(R,"AnnotationEditorLayer",{enumerable:!0,get:function(){return B.AnnotationEditorLayer}}),Object.defineProperty(R,"AnnotationEditorParamsType",{enumerable:!0,get:function(){return f.AnnotationEditorParamsType}}),Object.defineProperty(R,"AnnotationEditorType",{enumerable:!0,get:function(){return f.AnnotationEditorType}}),Object.defineProperty(R,"AnnotationEditorUIManager",{enumerable:!0,get:function(){return N.AnnotationEditorUIManager}}),Object.defineProperty(R,"AnnotationLayer",{enumerable:!0,get:function(){return U.AnnotationLayer}}),Object.defineProperty(R,"AnnotationMode",{enumerable:!0,get:function(){return f.AnnotationMode}}),Object.defineProperty(R,"CMapCompressionType",{enumerable:!0,get:function(){return f.CMapCompressionType}}),Object.defineProperty(R,"DOMSVGFactory",{enumerable:!0,get:function(){return c.DOMSVGFactory}}),Object.defineProperty(R,"FeatureTest",{enumerable:!0,get:function(){return f.FeatureTest}}),Object.defineProperty(R,"GlobalWorkerOptions",{enumerable:!0,get:function(){return F.GlobalWorkerOptions}}),Object.defineProperty(R,"ImageKind",{enumerable:!0,get:function(){return f.ImageKind}}),Object.defineProperty(R,"InvalidPDFException",{enumerable:!0,get:function(){return f.InvalidPDFException}}),Object.defineProperty(R,"MissingPDFException",{enumerable:!0,get:function(){return f.MissingPDFException}}),Object.defineProperty(R,"OPS",{enumerable:!0,get:function(){return f.OPS}}),Object.defineProperty(R,"PDFDataRangeTransport",{enumerable:!0,get:function(){return D.PDFDataRangeTransport}}),Object.defineProperty(R,"PDFDateString",{enumerable:!0,get:function(){return c.PDFDateString}}),Object.defineProperty(R,"PDFWorker",{enumerable:!0,get:function(){return D.PDFWorker}}),Object.defineProperty(R,"PasswordResponses",{enumerable:!0,get:function(){return f.PasswordResponses}}),Object.defineProperty(R,"PermissionFlag",{enumerable:!0,get:function(){return f.PermissionFlag}}),Object.defineProperty(R,"PixelsPerInch",{enumerable:!0,get:function(){return c.PixelsPerInch}}),Object.defineProperty(R,"PromiseCapability",{enumerable:!0,get:function(){return f.PromiseCapability}}),Object.defineProperty(R,"RenderingCancelledException",{enumerable:!0,get:function(){return c.RenderingCancelledException}}),Object.defineProperty(R,"SVGGraphics",{enumerable:!0,get:function(){return D.SVGGraphics}}),Object.defineProperty(R,"UnexpectedResponseException",{enumerable:!0,get:function(){return f.UnexpectedResponseException}}),Object.defineProperty(R,"Util",{enumerable:!0,get:function(){return f.Util}}),Object.defineProperty(R,"VerbosityLevel",{enumerable:!0,get:function(){return f.VerbosityLevel}}),Object.defineProperty(R,"XfaLayer",{enumerable:!0,get:function(){return u.XfaLayer}}),Object.defineProperty(R,"build",{enumerable:!0,get:function(){return D.build}}),Object.defineProperty(R,"createValidAbsoluteUrl",{enumerable:!0,get:function(){return f.createValidAbsoluteUrl}}),Object.defineProperty(R,"getDocument",{enumerable:!0,get:function(){return D.getDocument}}),Object.defineProperty(R,"getFilenameFromUrl",{enumerable:!0,get:function(){return c.getFilenameFromUrl}}),Object.defineProperty(R,"getPdfFilenameFromUrl",{enumerable:!0,get:function(){return c.getPdfFilenameFromUrl}}),Object.defineProperty(R,"getXfaPageViewport",{enumerable:!0,get:function(){return c.getXfaPageViewport}}),Object.defineProperty(R,"isDataScheme",{enumerable:!0,get:function(){return c.isDataScheme}}),Object.defineProperty(R,"isPdfFile",{enumerable:!0,get:function(){return c.isPdfFile}}),Object.defineProperty(R,"loadScript",{enumerable:!0,get:function(){return c.loadScript}}),Object.defineProperty(R,"noContextMenu",{enumerable:!0,get:function(){return c.noContextMenu}}),Object.defineProperty(R,"normalizeUnicode",{enumerable:!0,get:function(){return f.normalizeUnicode}}),Object.defineProperty(R,"renderTextLayer",{enumerable:!0,get:function(){return _.renderTextLayer}}),Object.defineProperty(R,"setLayerDimensions",{enumerable:!0,get:function(){return c.setLayerDimensions}}),Object.defineProperty(R,"shadow",{enumerable:!0,get:function(){return f.shadow}}),Object.defineProperty(R,"updateTextLayer",{enumerable:!0,get:function(){return _.updateTextLayer}}),Object.defineProperty(R,"version",{enumerable:!0,get:function(){return D.version}});var f=__w_pdfjs_require__(1),D=__w_pdfjs_require__(2),c=__w_pdfjs_require__(6),_=__w_pdfjs_require__(26),B=__w_pdfjs_require__(27),N=__w_pdfjs_require__(5),U=__w_pdfjs_require__(29),F=__w_pdfjs_require__(14),u=__w_pdfjs_require__(32)})(),__webpack_exports__})())})(pdf)),pdf.exports}var pdfExports=requirePdf();pdfExports.GlobalWorkerOptions.workerSrc="/pdf.worker.min.js";async function extractTextFromPDF(R){return(await extractTextFromPDFWithChapters(R)).text}async function extractTextFromPDFWithChapters(R){try{const f=await R.arrayBuffer(),D=await pdfExports.getDocument({data:f}).promise,c=D.numPages;let _="";const B=[];for(let U=1;U<=c;U++){const o=(await(await D.getPage(U)).getTextContent()).items.map(d=>d.str).join(" ").replace(/\s+/g," ").trim();B.push(o),_+=o+`

`}const N=detectChapters(B);return{text:_,numPages:c,chapters:N}}catch(f){throw console.error("PDF extraction error:",f),new Error("Failed to extract text from PDF. The file may be corrupted or password-protected.")}}function detectChapters(R){const f=[],D=[/Chapter\s+(\d+)[:\s]+(.+?)(?=\n|$)/i,/CHAPTER\s+(\d+)[:\s]+(.+?)(?=\n|$)/i,/^(\d+)\.\s+([A-Z][^.]+?)(?=\n|$)/m];let c=null,_="";for(let B=0;B<R.length;B++){const N=R[B];let U=!1;for(const F of D){const u=N.match(F);if(u){c&&(c.content=_.trim(),c.endPage=B,f.push(c)),c={number:parseInt(u[1],10)||f.length+1,title:u[2].trim(),content:"",startPage:B+1,endPage:B+1},_=N.substring(u.index+u[0].length),U=!0;break}}!U&&c&&(_+=`

`+N)}if(c&&(c.content=_.trim(),c.endPage=R.length,f.push(c)),f.length===0){const B=Math.ceil(R.length/4);for(let N=0;N<4;N++){const U=N*B,F=Math.min((N+1)*B,R.length);U<R.length&&f.push({number:N+1,title:`Section ${N+1}`,content:R.slice(U,F).join(`

`),startPage:U+1,endPage:F})}}return f}function PDFUpload({onUploadComplete:R}){const[f,D]=reactExports.useState(!1),[c,_]=reactExports.useState(!1),[B,N]=reactExports.useState(0),[U,F]=reactExports.useState(""),[u,o]=reactExports.useState(null),d=C=>{C.preventDefault(),D(!0)},b=()=>{D(!1)},g=async C=>{C.preventDefault(),D(!1);const x=Array.from(C.dataTransfer.files).filter(I=>I.type==="application/pdf");x.length>0&&await E(x[0])},h=async C=>{const x=C.target.files?.[0];x&&await E(x)},E=async C=>{_(!0),o(null),N(0);try{F("Extracting text from PDF..."),N(10);const x=await extractTextFromPDF(C);if(!x||x.length<100)throw new Error("Could not extract sufficient text from PDF. The file may be scanned images or encrypted.");F("Creating study material..."),N(30);const I=crypto.randomUUID(),Q={id:I,title:C.name.replace(".pdf",""),totalPages:x.length/3e3,uploadedAt:new Date,chapters:[],totalConcepts:0};await db.books.add(Q),F(" AI is deeply analyzing content..."),N(50);const V=await processPDFWithAI(x,{useELI5:!0,generateVisuals:!0,generateConceptMap:!0,difficulty:"beginner"});F("Saving chapters..."),N(70);const T=[];for(const L of V.chapters)L.bookId=I,await db.chapters.add(L),T.push(L.id);F("Building concept database..."),N(80);for(const L of V.concepts)await db.concepts.add(L);F("Creating flashcards & quizzes..."),N(90);for(const L of V.flashcards)await db.flashcards.add(L);for(const L of V.questions)await db.questions.add(L);F("Finalizing..."),N(95),await db.books.update(I,{chapters:T,totalConcepts:V.concepts.length,conceptMap:V.conceptMap}),await db.progress.add({id:crypto.randomUUID(),bookId:I,chaptersRead:[],conceptsMastered:[],flashcardsReviewed:0,quizzesTaken:0,averageScore:0,weakTopics:[],strongTopics:[],lastStudied:new Date,conceptProgress:V.concepts.map(L=>({conceptId:L.id,mastery:0,lastReviewed:new Date}))}),N(100),F("Complete!"),setTimeout(()=>{R(),_(!1)},500)}catch(x){o(x instanceof Error?x.message:"Failed to process PDF"),_(!1)}};return jsxRuntimeExports.jsxs("div",{className:"space-y-6",children:[jsxRuntimeExports.jsxs("div",{className:"glass rounded-2xl p-8 text-center",children:[jsxRuntimeExports.jsx("div",{className:"w-16 h-16 mx-auto mb-4 rounded-2xl bg-gradient-to-br from-violet-500 to-fuchsia-500 flex items-center justify-center shadow-lg shadow-violet-500/25",children:jsxRuntimeExports.jsx(Sparkles,{className:"w-8 h-8 text-white"})}),jsxRuntimeExports.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"Welcome to RE Study AI"}),jsxRuntimeExports.jsx("p",{className:"text-slate-400 max-w-md mx-auto",children:"Upload your real estate textbooks and let our AI create personalized study materials with ELI5 explanations, visual aids, and smart flashcards."})]}),jsxRuntimeExports.jsx("div",{onDragOver:d,onDragLeave:b,onDrop:g,className:`relative glass rounded-2xl p-8 text-center transition-all duration-300 ${f?"border-2 border-violet-500 bg-violet-500/10":"border-2 border-dashed border-white/20"} ${c?"pointer-events-none":""}`,children:c?jsxRuntimeExports.jsxs("div",{className:"py-8",children:[jsxRuntimeExports.jsxs("div",{className:"w-16 h-16 mx-auto mb-4 relative",children:[jsxRuntimeExports.jsxs("svg",{className:"w-16 h-16 transform -rotate-90",viewBox:"0 0 64 64",children:[jsxRuntimeExports.jsx("circle",{cx:"32",cy:"32",r:"28",fill:"none",stroke:"rgba(255,255,255,0.1)",strokeWidth:"4"}),jsxRuntimeExports.jsx("circle",{cx:"32",cy:"32",r:"28",fill:"none",stroke:"url(#gradient)",strokeWidth:"4",strokeDasharray:`${B*1.76} 176`,strokeLinecap:"round"}),jsxRuntimeExports.jsx("defs",{children:jsxRuntimeExports.jsxs("linearGradient",{id:"gradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[jsxRuntimeExports.jsx("stop",{offset:"0%",stopColor:"#8b5cf6"}),jsxRuntimeExports.jsx("stop",{offset:"100%",stopColor:"#d946ef"})]})})]}),jsxRuntimeExports.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:jsxRuntimeExports.jsxs("span",{className:"text-lg font-bold text-white",children:[B,"%"]})})]}),jsxRuntimeExports.jsx("p",{className:"text-violet-300 font-medium animate-pulse",children:U}),jsxRuntimeExports.jsx("p",{className:"text-slate-500 text-sm mt-2",children:"This may take a minute for large files"})]}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("div",{className:"w-16 h-16 mx-auto mb-4 rounded-2xl glass flex items-center justify-center",children:jsxRuntimeExports.jsx(Upload,{className:"w-8 h-8 text-violet-400"})}),jsxRuntimeExports.jsx("h3",{className:"text-xl font-semibold text-white mb-2",children:"Upload Your PDF"}),jsxRuntimeExports.jsx("p",{className:"text-slate-400 mb-6",children:"Drag and drop your real estate textbook, or click to browse"}),jsxRuntimeExports.jsxs("label",{className:"inline-flex items-center gap-2 px-6 py-3 bg-gradient-to-r from-violet-500 to-fuchsia-500 hover:from-violet-400 hover:to-fuchsia-400 text-white font-medium rounded-xl cursor-pointer transition-all shadow-lg shadow-violet-500/25",children:[jsxRuntimeExports.jsx(FileText,{className:"w-5 h-5"}),"Select PDF File",jsxRuntimeExports.jsx("input",{type:"file",accept:".pdf",onChange:h,className:"hidden"})]}),jsxRuntimeExports.jsx("p",{className:"text-slate-500 text-sm mt-4",children:"Supports PDF files up to 50MB"})]})}),u&&jsxRuntimeExports.jsx("div",{className:"glass rounded-xl p-4 bg-red-500/10 border border-red-500/30",children:jsxRuntimeExports.jsxs("div",{className:"flex items-start gap-3",children:[jsxRuntimeExports.jsx(CircleAlert,{className:"w-5 h-5 text-red-400 mt-0.5"}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{className:"text-red-300 font-medium",children:"Processing Error"}),jsxRuntimeExports.jsx("p",{className:"text-red-200/70 text-sm",children:u})]})]})}),jsxRuntimeExports.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[{icon:Zap,title:"Deep AI Analysis",desc:"Not just text extraction - true understanding with ELI5 explanations"},{icon:BookOpen,title:"Smart Flashcards",desc:"Auto-generated with analogies, examples, and spaced repetition"},{icon:CircleCheckBig,title:"Practice Quizzes",desc:"Scenario-based questions that teach while testing"}].map((C,x)=>jsxRuntimeExports.jsxs("div",{className:"glass rounded-xl p-4",children:[jsxRuntimeExports.jsx("div",{className:"w-10 h-10 rounded-xl bg-gradient-to-br from-violet-500/20 to-fuchsia-500/20 flex items-center justify-center mb-3",children:jsxRuntimeExports.jsx(C.icon,{className:"w-5 h-5 text-violet-400"})}),jsxRuntimeExports.jsx("h4",{className:"font-semibold text-white mb-1",children:C.title}),jsxRuntimeExports.jsx("p",{className:"text-slate-400 text-sm",children:C.desc})]},x))}),jsxRuntimeExports.jsxs("div",{className:"glass rounded-2xl p-6",children:[jsxRuntimeExports.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"How It Works"}),jsxRuntimeExports.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[{step:1,title:"Upload PDF",desc:"Drop your textbook or course material"},{step:2,title:"AI Reads",desc:"Our AI deeply analyzes every concept"},{step:3,title:"ELI5 Mode",desc:"Get simple explanations with analogies"},{step:4,title:"Study Smart",desc:"Flashcards, quizzes & progress tracking"}].map(C=>jsxRuntimeExports.jsxs("div",{className:"flex items-start gap-3",children:[jsxRuntimeExports.jsx("div",{className:"w-8 h-8 rounded-full bg-violet-500/20 flex items-center justify-center flex-shrink-0",children:jsxRuntimeExports.jsx("span",{className:"text-sm font-bold text-violet-400",children:C.step})}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h4",{className:"font-medium text-white text-sm",children:C.title}),jsxRuntimeExports.jsx("p",{className:"text-slate-500 text-xs",children:C.desc})]})]},C.step))})]})]})}function ChapterList({book:R,chapters:f,onChapterSelect:D}){const[c,_]=reactExports.useState(null),B=f.reduce((U,F)=>U+(F.concepts?.length||0),0),N=f.reduce((U,F)=>U+(F.readingTime||0),0);return jsxRuntimeExports.jsxs("div",{className:"space-y-6",children:[jsxRuntimeExports.jsx("div",{className:"glass rounded-2xl p-6",children:jsxRuntimeExports.jsxs("div",{className:"flex items-start gap-4",children:[jsxRuntimeExports.jsx("div",{className:"w-14 h-14 rounded-2xl bg-gradient-to-br from-violet-500 to-fuchsia-500 flex items-center justify-center shadow-lg shadow-violet-500/25 flex-shrink-0",children:jsxRuntimeExports.jsx(Book,{className:"w-7 h-7 text-white"})}),jsxRuntimeExports.jsxs("div",{className:"flex-1",children:[jsxRuntimeExports.jsx("h2",{className:"text-xl font-bold text-white mb-1",children:R.title}),jsxRuntimeExports.jsxs("div",{className:"flex flex-wrap gap-3 text-sm text-slate-400",children:[jsxRuntimeExports.jsxs("span",{className:"flex items-center gap-1",children:[jsxRuntimeExports.jsx(ChartColumn,{className:"w-4 h-4"}),f.length," chapters"]}),jsxRuntimeExports.jsxs("span",{className:"flex items-center gap-1",children:[jsxRuntimeExports.jsx(Lightbulb,{className:"w-4 h-4"}),B," concepts"]}),jsxRuntimeExports.jsxs("span",{className:"flex items-center gap-1",children:[jsxRuntimeExports.jsx(Clock,{className:"w-4 h-4"}),"~",N," min read"]})]})]})]})}),jsxRuntimeExports.jsx("div",{className:"grid grid-cols-1 gap-4",children:f.length===0?jsxRuntimeExports.jsxs("div",{className:"glass rounded-2xl p-8 text-center",children:[jsxRuntimeExports.jsx(Sparkles,{className:"w-12 h-12 mx-auto mb-3 text-slate-500"}),jsxRuntimeExports.jsx("p",{className:"text-slate-400",children:"No chapters found. Try uploading your PDF again."})]}):f.map((U,F)=>jsxRuntimeExports.jsx(ChapterCard,{chapter:U,index:F,isExpanded:c===U.id,onToggle:()=>_(c===U.id?null:U.id),onSelect:()=>D(U)},U.id))})]})}function ChapterCard({chapter:R,index:f,isExpanded:D,onToggle:c,onSelect:_}){const B=R.concepts?.length||0;return jsxRuntimeExports.jsxs("div",{className:`glass rounded-2xl overflow-hidden transition-all duration-300 ${D?"ring-2 ring-violet-500/50":""}`,children:[jsxRuntimeExports.jsx("div",{className:"p-5 cursor-pointer hover:bg-white/5 transition-colors",onClick:c,children:jsxRuntimeExports.jsxs("div",{className:"flex items-start gap-4",children:[jsxRuntimeExports.jsx("div",{className:"w-10 h-10 rounded-xl bg-gradient-to-br from-violet-500/20 to-fuchsia-500/20 flex items-center justify-center flex-shrink-0",children:jsxRuntimeExports.jsx("span",{className:"text-sm font-bold text-violet-400",children:f+1})}),jsxRuntimeExports.jsxs("div",{className:"flex-1",children:[jsxRuntimeExports.jsx("h3",{className:"font-semibold text-white mb-1",children:R.title}),R.eli5Summary&&jsxRuntimeExports.jsx("p",{className:"text-slate-400 text-sm line-clamp-2 mb-2",children:R.eli5Summary.oneSentence}),jsxRuntimeExports.jsxs("div",{className:"flex flex-wrap items-center gap-3 text-xs text-slate-500",children:[jsxRuntimeExports.jsxs("span",{className:"flex items-center gap-1",children:[jsxRuntimeExports.jsx(Lightbulb,{className:"w-3 h-3"}),B," concepts"]}),R.readingTime&&jsxRuntimeExports.jsxs("span",{className:"flex items-center gap-1",children:[jsxRuntimeExports.jsx(Clock,{className:"w-3 h-3"}),R.readingTime," min"]}),jsxRuntimeExports.jsx("span",{className:`px-2 py-0.5 rounded-full ${R.difficulty==="easy"?"bg-emerald-500/20 text-emerald-400":R.difficulty==="medium"?"bg-yellow-500/20 text-yellow-400":"bg-red-500/20 text-red-400"}`,children:R.difficulty})]})]}),jsxRuntimeExports.jsx(ChevronRight,{className:`w-5 h-5 text-slate-500 transition-transform duration-300 ${D?"rotate-90":""}`})]})}),D&&jsxRuntimeExports.jsx("div",{className:"px-5 pb-5 border-t border-white/10",children:jsxRuntimeExports.jsxs("div",{className:"pt-4 space-y-4",children:[R.eli5Summary&&jsxRuntimeExports.jsxs("div",{className:"bg-emerald-500/10 border border-emerald-500/30 rounded-xl p-4",children:[jsxRuntimeExports.jsx("p",{className:"text-sm text-emerald-400 font-medium mb-1",children:" ELI5 Summary"}),jsxRuntimeExports.jsx("p",{className:"text-emerald-100",children:R.eli5Summary.shortSummary})]}),jsxRuntimeExports.jsx("div",{className:"flex flex-wrap gap-2",children:R.topics?.map((N,U)=>jsxRuntimeExports.jsx("span",{className:"px-3 py-1 text-xs bg-white/5 rounded-full text-slate-400",children:N},U))}),jsxRuntimeExports.jsxs("button",{onClick:N=>{N.stopPropagation(),_()},className:"w-full py-3 bg-gradient-to-r from-violet-500 to-fuchsia-500 hover:from-violet-400 hover:to-fuchsia-400 text-white font-medium rounded-xl transition-all flex items-center justify-center gap-2",children:[jsxRuntimeExports.jsx(Sparkles,{className:"w-4 h-4"}),"Study This Chapter"]})]})})]})}const iconMap={Home:House,DollarSign,Scale,Users,Building,FileCheck,BookOpen,Lightbulb,Brain};function ChapterDetail({chapter:R,onBack:f,onStudyConcept:D,onTakeQuiz:c}){const[_,B]=reactExports.useState("overview"),[N,U]=reactExports.useState(null),[F,u]=reactExports.useState(!0);return jsxRuntimeExports.jsxs("div",{className:"space-y-6",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-4",children:[jsxRuntimeExports.jsx("button",{onClick:f,className:"p-2 glass rounded-xl hover:bg-white/10 transition-colors",children:jsxRuntimeExports.jsx(ArrowLeft,{className:"w-5 h-5 text-slate-300"})}),jsxRuntimeExports.jsxs("div",{className:"flex-1",children:[jsxRuntimeExports.jsx("h1",{className:"text-xl font-bold text-white",children:R.title}),jsxRuntimeExports.jsxs("p",{className:"text-sm text-slate-400",children:["Chapter ",R.number]})]})]}),jsxRuntimeExports.jsx("div",{className:"glass rounded-xl p-1 flex gap-1",children:[{key:!0,label:" Simple Mode (ELI5)",desc:"Easy explanations with analogies"},{key:!1,label:" Advanced Mode",desc:"Detailed technical content"}].map(o=>jsxRuntimeExports.jsxs("button",{onClick:()=>u(o.key),className:`flex-1 p-3 rounded-lg text-left transition-all ${F===o.key?"bg-gradient-to-r from-violet-500/20 to-fuchsia-500/20 border border-violet-500/30":"hover:bg-white/5"}`,children:[jsxRuntimeExports.jsx("p",{className:`font-medium ${F===o.key?"text-violet-300":"text-slate-400"}`,children:o.label}),jsxRuntimeExports.jsx("p",{className:"text-xs text-slate-500",children:o.desc})]},String(o.key)))}),jsxRuntimeExports.jsx("div",{className:"flex gap-2",children:[{key:"overview",label:"Overview",icon:BookOpen},{key:"concepts",label:`Concepts (${R.concepts?.length||0})`,icon:Lightbulb},{key:"visuals",label:"Visual Aids",icon:Brain}].map(o=>jsxRuntimeExports.jsxs("button",{onClick:()=>B(o.key),className:`flex items-center gap-2 px-4 py-2 rounded-xl transition-all ${_===o.key?"bg-violet-500/20 text-violet-300 border border-violet-500/30":"glass text-slate-400 hover:text-slate-200"}`,children:[jsxRuntimeExports.jsx(o.icon,{className:"w-4 h-4"}),o.label]},o.key))}),jsxRuntimeExports.jsxs("div",{className:"glass rounded-2xl p-6",children:[_==="overview"&&jsxRuntimeExports.jsx(OverviewTab,{chapter:R,eli5Mode:F,onTakeQuiz:c}),_==="concepts"&&jsxRuntimeExports.jsx(ConceptsTab,{chapter:R,eli5Mode:F,selectedConcept:N,onSelectConcept:U,onStudyConcept:D}),_==="visuals"&&jsxRuntimeExports.jsx(VisualsTab,{chapter:R})]})]})}function OverviewTab({chapter:R,eli5Mode:f,onTakeQuiz:D}){return jsxRuntimeExports.jsxs("div",{className:"space-y-6",children:[f&&R.eli5Summary?jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsxs("div",{className:"bg-gradient-to-r from-emerald-500/10 to-teal-500/10 border border-emerald-500/30 rounded-xl p-6",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[jsxRuntimeExports.jsx(Sparkles,{className:"w-5 h-5 text-emerald-400"}),jsxRuntimeExports.jsx("span",{className:"text-emerald-400 font-medium",children:"In One Sentence"})]}),jsxRuntimeExports.jsx("p",{className:"text-lg text-emerald-100",children:R.eli5Summary.oneSentence})]}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[jsxRuntimeExports.jsxs("div",{className:"glass rounded-xl p-5",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[jsxRuntimeExports.jsx(BookOpen,{className:"w-5 h-5 text-violet-400"}),jsxRuntimeExports.jsx("span",{className:"text-violet-300 font-medium",children:"What This Means"})]}),jsxRuntimeExports.jsx("p",{className:"text-slate-300",children:R.eli5Summary.shortSummary})]}),jsxRuntimeExports.jsxs("div",{className:"glass rounded-xl p-5",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[jsxRuntimeExports.jsx(CircleQuestionMark,{className:"w-5 h-5 text-fuchsia-400"}),jsxRuntimeExports.jsx("span",{className:"text-fuchsia-300 font-medium",children:"Why It Matters"})]}),jsxRuntimeExports.jsx("p",{className:"text-slate-300",children:R.eli5Summary.whyItMatters})]})]}),jsxRuntimeExports.jsxs("div",{className:"glass rounded-xl p-5",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[jsxRuntimeExports.jsx(CircleCheckBig,{className:"w-5 h-5 text-amber-400"}),jsxRuntimeExports.jsx("span",{className:"text-amber-300 font-medium",children:"Real World Connection"})]}),jsxRuntimeExports.jsx("p",{className:"text-slate-300",children:R.eli5Summary.realWorldConnection})]})]}):jsxRuntimeExports.jsx("div",{className:"space-y-4",children:jsxRuntimeExports.jsxs("div",{className:"prose prose-invert max-w-none",children:[jsxRuntimeExports.jsx("h3",{className:"text-white font-semibold",children:"Chapter Summary"}),jsxRuntimeExports.jsx("p",{className:"text-slate-300",children:R.summary||"No summary available."}),R.keyTerms&&R.keyTerms.length>0&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("h3",{className:"text-white font-semibold mt-6",children:"Key Terms"}),jsxRuntimeExports.jsx("dl",{className:"space-y-3",children:R.keyTerms.map((c,_)=>jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("dt",{className:"text-violet-300 font-medium",children:c.term}),jsxRuntimeExports.jsx("dd",{className:"text-slate-400",children:c.definition})]},_))})]})]})}),jsxRuntimeExports.jsxs("button",{onClick:D,className:"w-full py-4 bg-gradient-to-r from-violet-500 to-fuchsia-500 hover:from-violet-400 hover:to-fuchsia-400 text-white font-semibold rounded-xl transition-all flex items-center justify-center gap-2 shadow-lg shadow-violet-500/25",children:[jsxRuntimeExports.jsx(Brain,{className:"w-5 h-5"}),"Take Practice Quiz"]})]})}function ConceptsTab({chapter:R,eli5Mode:f,selectedConcept:D,onSelectConcept:c,onStudyConcept:_}){const B=R.concepts||[];return B.length===0?jsxRuntimeExports.jsxs("div",{className:"text-center py-8",children:[jsxRuntimeExports.jsx(Lightbulb,{className:"w-12 h-12 mx-auto mb-3 text-slate-500"}),jsxRuntimeExports.jsx("p",{className:"text-slate-400",children:"No concepts extracted from this chapter."})]}):D?jsxRuntimeExports.jsx(ConceptDetail,{concept:D,eli5Mode:f,onBack:()=>c(null),onStudy:()=>_(D)}):jsxRuntimeExports.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:B.map(N=>{const U=iconMap[N.icon]||Lightbulb;return jsxRuntimeExports.jsx("button",{onClick:()=>c(N),className:"glass rounded-xl p-5 text-left hover:bg-white/5 transition-all group",children:jsxRuntimeExports.jsxs("div",{className:"flex items-start gap-4",children:[jsxRuntimeExports.jsx("div",{className:`w-10 h-10 rounded-xl flex items-center justify-center flex-shrink-0 bg-${N.color}-500/20`,children:jsxRuntimeExports.jsx(U,{className:`w-5 h-5 text-${N.color}-400`})}),jsxRuntimeExports.jsxs("div",{className:"flex-1",children:[jsxRuntimeExports.jsx("h4",{className:"font-semibold text-white group-hover:text-violet-300 transition-colors",children:N.name}),jsxRuntimeExports.jsx("p",{className:"text-slate-400 text-sm mt-1 line-clamp-2",children:f?N.simpleExplanation:N.detailedExplanation}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 mt-3",children:[jsxRuntimeExports.jsx("span",{className:`px-2 py-0.5 text-xs rounded-full ${N.difficulty==="beginner"?"bg-emerald-500/20 text-emerald-400":N.difficulty==="intermediate"?"bg-yellow-500/20 text-yellow-400":"bg-red-500/20 text-red-400"}`,children:N.difficulty}),jsxRuntimeExports.jsx("span",{className:"text-xs text-slate-500",children:"Click to learn more "})]})]})]})},N.id)})})}function ConceptDetail({concept:R,eli5Mode:f,onBack:D,onStudy:c}){const _=iconMap[R.icon]||Lightbulb;return jsxRuntimeExports.jsxs("div",{className:"space-y-6",children:[jsxRuntimeExports.jsxs("button",{onClick:D,className:"flex items-center gap-2 text-slate-400 hover:text-white transition-colors",children:[jsxRuntimeExports.jsx(ChevronRight,{className:"w-4 h-4 rotate-180"}),"Back to concepts"]}),jsxRuntimeExports.jsxs("div",{className:"flex items-start gap-4",children:[jsxRuntimeExports.jsx("div",{className:`w-14 h-14 rounded-2xl flex items-center justify-center flex-shrink-0 bg-${R.color}-500/20`,children:jsxRuntimeExports.jsx(_,{className:`w-7 h-7 text-${R.color}-400`})}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h3",{className:"text-2xl font-bold text-white",children:R.name}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[jsxRuntimeExports.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${R.difficulty==="beginner"?"bg-emerald-500/20 text-emerald-400":R.difficulty==="intermediate"?"bg-yellow-500/20 text-yellow-400":"bg-red-500/20 text-red-400"}`,children:R.difficulty}),R.tags.map((B,N)=>jsxRuntimeExports.jsx("span",{className:"px-2 py-1 text-xs bg-white/5 rounded-full text-slate-400",children:B},N))]})]})]}),f?jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsxs("div",{className:"bg-emerald-500/10 border border-emerald-500/30 rounded-xl p-5",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[jsxRuntimeExports.jsx(Sparkles,{className:"w-5 h-5 text-emerald-400"}),jsxRuntimeExports.jsx("span",{className:"text-emerald-400 font-medium",children:"Simple Explanation"})]}),jsxRuntimeExports.jsx("p",{className:"text-emerald-100 text-lg",children:R.simpleExplanation})]}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[jsxRuntimeExports.jsxs("div",{className:"glass rounded-xl p-5",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[jsxRuntimeExports.jsx(BookOpen,{className:"w-5 h-5 text-violet-400"}),jsxRuntimeExports.jsx("span",{className:"text-violet-300 font-medium",children:"Analogy"})]}),jsxRuntimeExports.jsxs("p",{className:"text-slate-300 italic",children:['"',R.analogy,'"']})]}),jsxRuntimeExports.jsxs("div",{className:"glass rounded-xl p-5",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[jsxRuntimeExports.jsx(CircleCheckBig,{className:"w-5 h-5 text-amber-400"}),jsxRuntimeExports.jsx("span",{className:"text-amber-300 font-medium",children:"Real World Example"})]}),jsxRuntimeExports.jsx("p",{className:"text-slate-300",children:R.realWorldExample})]})]})]}):jsxRuntimeExports.jsxs("div",{className:"glass rounded-xl p-5",children:[jsxRuntimeExports.jsx("h4",{className:"text-violet-300 font-medium mb-3",children:"Detailed Explanation"}),jsxRuntimeExports.jsx("p",{className:"text-slate-300",children:R.detailedExplanation}),R.visualDescription&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("h4",{className:"text-violet-300 font-medium mt-4 mb-3",children:"Visual Description"}),jsxRuntimeExports.jsx("p",{className:"text-slate-400",children:R.visualDescription})]})]}),jsxRuntimeExports.jsxs("button",{onClick:c,className:"w-full py-4 bg-gradient-to-r from-violet-500 to-fuchsia-500 hover:from-violet-400 hover:to-fuchsia-400 text-white font-semibold rounded-xl transition-all flex items-center justify-center gap-2",children:[jsxRuntimeExports.jsx(Brain,{className:"w-5 h-5"}),"Study This Concept"]})]})}function VisualsTab({chapter:R}){const f=R.visualAids||[];return f.length===0?jsxRuntimeExports.jsxs("div",{className:"text-center py-8",children:[jsxRuntimeExports.jsx(Brain,{className:"w-12 h-12 mx-auto mb-3 text-slate-500"}),jsxRuntimeExports.jsx("p",{className:"text-slate-400",children:"No visual aids available for this chapter."})]}):jsxRuntimeExports.jsx("div",{className:"space-y-4",children:f.map(D=>jsxRuntimeExports.jsxs("div",{className:"glass rounded-xl p-5",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[jsxRuntimeExports.jsx(FileText,{className:"w-5 h-5 text-violet-400"}),jsxRuntimeExports.jsx("h4",{className:"font-semibold text-white",children:D.title})]}),jsxRuntimeExports.jsx("p",{className:"text-slate-400 text-sm mb-4",children:D.description}),jsxRuntimeExports.jsx("div",{className:"bg-slate-950/50 rounded-lg p-4 border border-white/5",children:jsxRuntimeExports.jsx("pre",{className:"text-xs text-slate-400 overflow-auto",children:JSON.stringify(D.data,null,2)})})]},D.id))})}function FlashcardView({initialConcept:R}){const[f,D]=reactExports.useState([]),[c,_]=reactExports.useState(0),[B,N]=reactExports.useState(!1),[U,F]=reactExports.useState(!0),[u,o]=reactExports.useState(!0),[d,b]=reactExports.useState(!1),[g,h]=reactExports.useState({correct:0,incorrect:0}),E=reactExports.useCallback(async()=>{o(!0);try{let T;R?T=await db.flashcards.where("conceptId").equals(R.id).toArray():T=await getDueFlashcards(),T.length===0&&(T=await db.flashcards.limit(20).toArray()),T=T.sort(()=>Math.random()-.5),D(T),_(0),N(!1),b(T.length===0)}catch(T){console.error("Error loading flashcards:",T)}finally{o(!1)}},[R]);reactExports.useEffect(()=>{E()},[E]);const C=()=>N(!B),x=async T=>{const L=f[c];T>=3?h($=>({...$,correct:$.correct+1})):h($=>({...$,incorrect:$.incorrect+1})),await updateFlashcardAfterReview(L.id,T),c<f.length-1?(_($=>$+1),N(!1)):b(!0)},I=()=>{_(0),N(!1),b(!1),h({correct:0,incorrect:0}),E()};if(u)return jsxRuntimeExports.jsx("div",{className:"flex items-center justify-center h-64",children:jsxRuntimeExports.jsxs("div",{className:"glass rounded-2xl p-8 text-center",children:[jsxRuntimeExports.jsx(Brain,{className:"w-12 h-12 mx-auto mb-3 text-violet-400 animate-pulse"}),jsxRuntimeExports.jsx("p",{className:"text-slate-400",children:"Loading flashcards..."})]})});if(d)return jsxRuntimeExports.jsx(StudyComplete,{stats:g,total:f.length,onRestart:I});if(f.length===0)return jsxRuntimeExports.jsxs("div",{className:"glass rounded-2xl p-8 text-center",children:[jsxRuntimeExports.jsx(Brain,{className:"w-16 h-16 mx-auto mb-4 text-slate-500"}),jsxRuntimeExports.jsx("h3",{className:"text-xl font-semibold text-white mb-2",children:"No Flashcards Yet"}),jsxRuntimeExports.jsx("p",{className:"text-slate-400 mb-4",children:"Upload a PDF to generate flashcards from your study material."})]});const Q=f[c],V=(c+1)/f.length*100;return jsxRuntimeExports.jsxs("div",{className:"space-y-6",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h2",{className:"text-xl font-bold text-white",children:R?`Studying: ${R.name}`:"Flashcard Review"}),jsxRuntimeExports.jsxs("p",{className:"text-sm text-slate-400",children:["Card ",c+1," of ",f.length]})]}),jsxRuntimeExports.jsxs("button",{onClick:()=>F(!U),className:`flex items-center gap-2 px-4 py-2 rounded-xl transition-all ${U?"bg-emerald-500/20 text-emerald-400 border border-emerald-500/30":"glass text-slate-400"}`,children:[jsxRuntimeExports.jsx(Sparkles,{className:"w-4 h-4"}),U?"ELI5 Mode":"Standard"]})]}),jsxRuntimeExports.jsx("div",{className:"glass rounded-full h-2 overflow-hidden",children:jsxRuntimeExports.jsx("div",{className:"h-full bg-gradient-to-r from-violet-500 to-fuchsia-500 transition-all duration-300",style:{width:`${V}%`}})}),jsxRuntimeExports.jsx("div",{className:"relative h-80 sm:h-96",children:jsxRuntimeExports.jsxs("div",{onClick:C,className:`absolute inset-0 glass rounded-2xl p-8 cursor-pointer transition-all duration-500 transform-gpu preserve-3d ${B?"rotate-y-180":""}`,style:{transformStyle:"preserve-3d"},children:[jsxRuntimeExports.jsxs("div",{className:"absolute inset-0 backface-hidden flex flex-col items-center justify-center p-8",style:{backfaceVisibility:"hidden"},children:[jsxRuntimeExports.jsx("div",{className:"w-12 h-12 rounded-xl bg-violet-500/20 flex items-center justify-center mb-4",children:jsxRuntimeExports.jsx(Brain,{className:"w-6 h-6 text-violet-400"})}),jsxRuntimeExports.jsx("p",{className:"text-2xl sm:text-3xl font-semibold text-white text-center",children:Q.front}),jsxRuntimeExports.jsx("p",{className:"text-slate-500 text-sm mt-6",children:"Click to reveal answer"})]}),jsxRuntimeExports.jsx("div",{className:"absolute inset-0 backface-hidden flex flex-col items-center justify-center p-8 rotate-y-180",style:{backfaceVisibility:"hidden",transform:"rotateY(180deg)"},children:U&&Q.eli5Explanation?jsxRuntimeExports.jsxs("div",{className:"text-center w-full max-h-full overflow-y-auto",children:[jsxRuntimeExports.jsx("div",{className:"w-12 h-12 rounded-xl bg-emerald-500/20 flex items-center justify-center mx-auto mb-4",children:jsxRuntimeExports.jsx(Sparkles,{className:"w-6 h-6 text-emerald-400"})}),jsxRuntimeExports.jsx("p",{className:"text-xl text-emerald-100 mb-4",children:Q.eli5Explanation}),Q.realWorldExample&&jsxRuntimeExports.jsxs("div",{className:"glass rounded-xl p-4 mt-4",children:[jsxRuntimeExports.jsx("p",{className:"text-sm text-amber-400 font-medium mb-1",children:" Real World Example"}),jsxRuntimeExports.jsx("p",{className:"text-slate-300 text-sm",children:Q.realWorldExample})]})]}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("div",{className:"w-12 h-12 rounded-xl bg-fuchsia-500/20 flex items-center justify-center mb-4",children:jsxRuntimeExports.jsx(Lightbulb,{className:"w-6 h-6 text-fuchsia-400"})}),jsxRuntimeExports.jsx("p",{className:"text-xl sm:text-2xl text-white text-center",children:Q.back})]})})]})}),B&&jsxRuntimeExports.jsx("div",{className:"grid grid-cols-4 gap-3",children:[{quality:1,label:"Again",color:"red",icon:CircleX},{quality:2,label:"Hard",color:"orange",icon:Zap},{quality:3,label:"Good",color:"blue",icon:CircleCheckBig},{quality:4,label:"Easy",color:"emerald",icon:CircleCheckBig}].map(({quality:T,label:L,color:$,icon:rt})=>jsxRuntimeExports.jsxs("button",{onClick:()=>x(T),className:`py-3 rounded-xl font-medium transition-all flex flex-col items-center gap-1 ${$==="red"?"bg-red-500/20 text-red-400 hover:bg-red-500/30 border border-red-500/30":$==="orange"?"bg-orange-500/20 text-orange-400 hover:bg-orange-500/30 border border-orange-500/30":$==="blue"?"bg-blue-500/20 text-blue-400 hover:bg-blue-500/30 border border-blue-500/30":"bg-emerald-500/20 text-emerald-400 hover:bg-emerald-500/30 border border-emerald-500/30"}`,children:[jsxRuntimeExports.jsx(rt,{className:"w-5 h-5"}),L]},T))}),!B&&jsxRuntimeExports.jsxs("button",{onClick:C,className:"w-full py-4 bg-gradient-to-r from-violet-500 to-fuchsia-500 hover:from-violet-400 hover:to-fuchsia-400 text-white font-semibold rounded-xl transition-all flex items-center justify-center gap-2",children:[jsxRuntimeExports.jsx(RotateCcw,{className:"w-5 h-5"}),"Show Answer"]}),jsxRuntimeExports.jsxs("div",{className:"glass rounded-xl p-4 flex items-center justify-center gap-8",children:[jsxRuntimeExports.jsxs("div",{className:"text-center",children:[jsxRuntimeExports.jsx("p",{className:"text-2xl font-bold text-emerald-400",children:g.correct}),jsxRuntimeExports.jsx("p",{className:"text-xs text-slate-500",children:"Correct"})]}),jsxRuntimeExports.jsx("div",{className:"w-px h-10 bg-white/10"}),jsxRuntimeExports.jsxs("div",{className:"text-center",children:[jsxRuntimeExports.jsx("p",{className:"text-2xl font-bold text-red-400",children:g.incorrect}),jsxRuntimeExports.jsx("p",{className:"text-xs text-slate-500",children:"To Review"})]}),jsxRuntimeExports.jsx("div",{className:"w-px h-10 bg-white/10"}),jsxRuntimeExports.jsxs("div",{className:"text-center",children:[jsxRuntimeExports.jsxs("p",{className:"text-2xl font-bold text-violet-400",children:[Math.round(g.correct/(g.correct+g.incorrect||1)*100),"%"]}),jsxRuntimeExports.jsx("p",{className:"text-xs text-slate-500",children:"Accuracy"})]})]})]})}function StudyComplete({stats:R,total:f,onRestart:D}){const c=Math.round(R.correct/(R.correct+R.incorrect||1)*100);return jsxRuntimeExports.jsxs("div",{className:"glass rounded-2xl p-8 text-center",children:[jsxRuntimeExports.jsx("div",{className:"w-20 h-20 mx-auto mb-6 rounded-2xl bg-gradient-to-br from-emerald-500 to-teal-500 flex items-center justify-center shadow-lg shadow-emerald-500/25",children:jsxRuntimeExports.jsx(CircleCheckBig,{className:"w-10 h-10 text-white"})}),jsxRuntimeExports.jsx("h3",{className:"text-2xl font-bold text-white mb-2",children:"Session Complete! "}),jsxRuntimeExports.jsxs("p",{className:"text-slate-400 mb-6",children:["You reviewed ",f," flashcards"]}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-8",children:[jsxRuntimeExports.jsxs("div",{className:"glass rounded-xl p-4",children:[jsxRuntimeExports.jsx("p",{className:"text-3xl font-bold text-emerald-400",children:R.correct}),jsxRuntimeExports.jsx("p",{className:"text-sm text-slate-500",children:"Correct"})]}),jsxRuntimeExports.jsxs("div",{className:"glass rounded-xl p-4",children:[jsxRuntimeExports.jsx("p",{className:"text-3xl font-bold text-red-400",children:R.incorrect}),jsxRuntimeExports.jsx("p",{className:"text-sm text-slate-500",children:"To Review"})]}),jsxRuntimeExports.jsxs("div",{className:"glass rounded-xl p-4",children:[jsxRuntimeExports.jsxs("p",{className:"text-3xl font-bold text-violet-400",children:[c,"%"]}),jsxRuntimeExports.jsx("p",{className:"text-sm text-slate-500",children:"Accuracy"})]})]}),jsxRuntimeExports.jsxs("button",{onClick:D,className:"px-8 py-4 bg-gradient-to-r from-violet-500 to-fuchsia-500 hover:from-violet-400 hover:to-fuchsia-400 text-white font-semibold rounded-xl transition-all flex items-center justify-center gap-2 mx-auto",children:[jsxRuntimeExports.jsx(RotateCcw,{className:"w-5 h-5"}),"Study More Cards"]})]})}function QuizView({selectedChapter:R}){const[f,D]=reactExports.useState([]),[c,_]=reactExports.useState(0),[B,N]=reactExports.useState(null),[U,F]=reactExports.useState(!1),[u,o]=reactExports.useState(!0),[d,b]=reactExports.useState(!0),[g,h]=reactExports.useState(!1),[E,C]=reactExports.useState([]),[x,I]=reactExports.useState(Date.now()),Q=reactExports.useCallback(async()=>{b(!0);try{let gt;R?gt=await db.questions.where("chapterId").equals(R.id).toArray():gt=await db.questions.limit(20).toArray(),gt=gt.sort(()=>Math.random()-.5).slice(0,10),D(gt),_(0),N(null),F(!1),h(gt.length===0),C([]),I(Date.now())}catch(gt){console.error("Error loading questions:",gt)}finally{b(!1)}},[R]);reactExports.useEffect(()=>{Q()},[Q]);const V=gt=>{U||N(gt)},T=async()=>{if(B===null)return;const gt=f[c],kt=B===gt.correctAnswer;C(At=>[...At,{questionId:gt.id,correct:kt,selected:B}]),F(!0)},L=()=>{c<f.length-1?(_(gt=>gt+1),N(null),F(!1)):$()},$=async()=>{const gt=E.filter(Ft=>Ft.correct).length,kt=Math.floor((Date.now()-x)/1e3),At={id:crypto.randomUUID(),date:new Date,chapterId:R?.id||"mixed",score:Math.round(gt/f.length*100),totalQuestions:f.length,correctAnswers:gt,timeSpent:kt,answers:E.map(Ft=>({questionId:Ft.questionId,selectedAnswer:Ft.selected,correct:Ft.correct,timeSpent:Math.floor(kt/f.length)})),weakAreas:[],conceptMastery:[]};await db.quizResults.add(At),h(!0)},rt=()=>{Q(),h(!1)};if(d)return jsxRuntimeExports.jsx("div",{className:"flex items-center justify-center h-64",children:jsxRuntimeExports.jsxs("div",{className:"glass rounded-2xl p-8 text-center",children:[jsxRuntimeExports.jsx(Brain,{className:"w-12 h-12 mx-auto mb-3 text-violet-400 animate-pulse"}),jsxRuntimeExports.jsx("p",{className:"text-slate-400",children:"Loading questions..."})]})});if(g){const gt=E.filter(kt=>kt.correct).length;return jsxRuntimeExports.jsx(QuizComplete,{score:Math.round(gt/f.length*100),correct:gt,total:f.length,timeSpent:Math.floor((Date.now()-x)/1e3),onRestart:rt})}if(f.length===0)return jsxRuntimeExports.jsxs("div",{className:"glass rounded-2xl p-8 text-center",children:[jsxRuntimeExports.jsx(Brain,{className:"w-16 h-16 mx-auto mb-4 text-slate-500"}),jsxRuntimeExports.jsx("h3",{className:"text-xl font-semibold text-white mb-2",children:"No Questions Yet"}),jsxRuntimeExports.jsx("p",{className:"text-slate-400",children:"Upload a PDF to generate practice questions."})]});const et=f[c],yt=(c+1)/f.length*100;return jsxRuntimeExports.jsxs("div",{className:"space-y-6",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h2",{className:"text-xl font-bold text-white",children:"Practice Quiz"}),jsxRuntimeExports.jsxs("p",{className:"text-sm text-slate-400",children:["Question ",c+1," of ",f.length]})]}),jsxRuntimeExports.jsxs("button",{onClick:()=>o(!u),className:`flex items-center gap-2 px-4 py-2 rounded-xl transition-all ${u?"bg-emerald-500/20 text-emerald-400 border border-emerald-500/30":"glass text-slate-400"}`,children:[jsxRuntimeExports.jsx(Sparkles,{className:"w-4 h-4"}),u?"ELI5 Mode":"Standard"]})]}),jsxRuntimeExports.jsx("div",{className:"glass rounded-full h-2 overflow-hidden",children:jsxRuntimeExports.jsx("div",{className:"h-full bg-gradient-to-r from-violet-500 to-fuchsia-500 transition-all duration-300",style:{width:`${yt}%`}})}),jsxRuntimeExports.jsxs("div",{className:"glass rounded-2xl p-6 sm:p-8",children:[jsxRuntimeExports.jsxs("div",{className:"mb-6",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[jsxRuntimeExports.jsx("span",{className:`px-3 py-1 text-xs rounded-full ${et.difficulty==="easy"?"bg-emerald-500/20 text-emerald-400":et.difficulty==="medium"?"bg-yellow-500/20 text-yellow-400":"bg-red-500/20 text-red-400"}`,children:et.difficulty}),jsxRuntimeExports.jsx("span",{className:"px-3 py-1 text-xs bg-white/5 rounded-full text-slate-400",children:et.topic})]}),jsxRuntimeExports.jsx("h3",{className:"text-xl sm:text-2xl font-semibold text-white",children:et.question})]}),jsxRuntimeExports.jsx("div",{className:"space-y-3",children:et.options.map((gt,kt)=>{let At="glass w-full p-4 rounded-xl text-left transition-all flex items-center gap-3 ";return U?kt===et.correctAnswer?At+="bg-emerald-500/20 border-emerald-500/50 text-emerald-100":kt===B?At+="bg-red-500/20 border-red-500/50 text-red-100":At+="opacity-50":B===kt?At+="bg-violet-500/20 border-violet-500/50 text-violet-100 ring-2 ring-violet-500":At+="hover:bg-white/5 text-slate-200",jsxRuntimeExports.jsxs("button",{onClick:()=>V(kt),disabled:U,className:At,children:[jsxRuntimeExports.jsx("span",{className:`w-8 h-8 rounded-lg flex items-center justify-center flex-shrink-0 text-sm font-semibold ${U?kt===et.correctAnswer?"bg-emerald-500 text-white":kt===B?"bg-red-500 text-white":"bg-white/10 text-slate-400":B===kt?"bg-violet-500 text-white":"bg-white/10 text-slate-400"}`,children:String.fromCharCode(65+kt)}),jsxRuntimeExports.jsx("span",{children:gt}),U&&kt===et.correctAnswer&&jsxRuntimeExports.jsx(CircleCheckBig,{className:"w-5 h-5 text-emerald-400 ml-auto"}),U&&kt===B&&kt!==et.correctAnswer&&jsxRuntimeExports.jsx(CircleX,{className:"w-5 h-5 text-red-400 ml-auto"})]},kt)})}),U&&jsxRuntimeExports.jsx("div",{className:"mt-6 space-y-4",children:jsxRuntimeExports.jsxs("div",{className:`rounded-xl p-5 ${B===et.correctAnswer?"bg-emerald-500/10 border border-emerald-500/30":"bg-yellow-500/10 border border-yellow-500/30"}`,children:[jsxRuntimeExports.jsx("div",{className:"flex items-center gap-2 mb-3",children:B===et.correctAnswer?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(CircleCheckBig,{className:"w-5 h-5 text-emerald-400"}),jsxRuntimeExports.jsx("span",{className:"text-emerald-400 font-medium",children:"Correct! "})]}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Lightbulb,{className:"w-5 h-5 text-yellow-400"}),jsxRuntimeExports.jsx("span",{className:"text-yellow-400 font-medium",children:"Learning Moment"})]})}),u&&et.eli5Explanation?jsxRuntimeExports.jsxs("div",{className:"space-y-3",children:[jsxRuntimeExports.jsx("p",{className:"text-emerald-100",children:et.eli5Explanation}),jsxRuntimeExports.jsxs("div",{className:"glass rounded-lg p-4",children:[jsxRuntimeExports.jsx("p",{className:"text-sm text-violet-300 font-medium mb-1",children:" Why this is correct:"}),jsxRuntimeExports.jsx("p",{className:"text-slate-300 text-sm",children:et.whyCorrect||et.explanation})]})]}):jsxRuntimeExports.jsx("p",{className:"text-slate-300",children:et.explanation})]})}),jsxRuntimeExports.jsx("div",{className:"mt-6",children:U?jsxRuntimeExports.jsxs("button",{onClick:L,className:"w-full py-4 bg-gradient-to-r from-violet-500 to-fuchsia-500 hover:from-violet-400 hover:to-fuchsia-400 text-white font-semibold rounded-xl transition-all flex items-center justify-center gap-2",children:[c<f.length-1?"Next Question":"Finish Quiz",jsxRuntimeExports.jsx(ArrowRight,{className:"w-5 h-5"})]}):jsxRuntimeExports.jsx("button",{onClick:T,disabled:B===null,className:"w-full py-4 bg-gradient-to-r from-violet-500 to-fuchsia-500 hover:from-violet-400 hover:to-fuchsia-400 disabled:opacity-50 disabled:cursor-not-allowed text-white font-semibold rounded-xl transition-all flex items-center justify-center gap-2",children:"Submit Answer"})})]})]})}function QuizComplete({score:R,correct:f,total:D,timeSpent:c,onRestart:_}){const N=R>=90?{text:"Outstanding! ",color:"text-emerald-400",bg:"from-emerald-500 to-teal-500"}:R>=70?{text:"Great job! ",color:"text-violet-400",bg:"from-violet-500 to-fuchsia-500"}:R>=50?{text:"Good effort! ",color:"text-yellow-400",bg:"from-yellow-500 to-orange-500"}:{text:"Keep practicing! ",color:"text-orange-400",bg:"from-orange-500 to-red-500"},U=Math.floor(c/60),F=c%60;return jsxRuntimeExports.jsxs("div",{className:"glass rounded-2xl p-8 text-center",children:[jsxRuntimeExports.jsx("div",{className:`w-24 h-24 mx-auto mb-6 rounded-2xl bg-gradient-to-br ${N.bg} flex items-center justify-center shadow-lg`,children:jsxRuntimeExports.jsx(Trophy,{className:"w-12 h-12 text-white"})}),jsxRuntimeExports.jsx("h3",{className:`text-2xl font-bold mb-2 ${N.color}`,children:N.text}),jsxRuntimeExports.jsx("p",{className:"text-slate-400 mb-6",children:"Quiz Complete!"}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-8",children:[jsxRuntimeExports.jsxs("div",{className:"glass rounded-xl p-4",children:[jsxRuntimeExports.jsxs("p",{className:"text-3xl font-bold text-violet-400",children:[R,"%"]}),jsxRuntimeExports.jsx("p",{className:"text-sm text-slate-500",children:"Score"})]}),jsxRuntimeExports.jsxs("div",{className:"glass rounded-xl p-4",children:[jsxRuntimeExports.jsx("p",{className:"text-3xl font-bold text-emerald-400",children:f}),jsxRuntimeExports.jsx("p",{className:"text-sm text-slate-500",children:"Correct"})]}),jsxRuntimeExports.jsxs("div",{className:"glass rounded-xl p-4",children:[jsxRuntimeExports.jsx("p",{className:"text-3xl font-bold text-red-400",children:D-f}),jsxRuntimeExports.jsx("p",{className:"text-sm text-slate-500",children:"Incorrect"})]}),jsxRuntimeExports.jsxs("div",{className:"glass rounded-xl p-4",children:[jsxRuntimeExports.jsxs("p",{className:"text-3xl font-bold text-amber-400",children:[U,":",F.toString().padStart(2,"0")]}),jsxRuntimeExports.jsx("p",{className:"text-sm text-slate-500",children:"Time"})]})]}),jsxRuntimeExports.jsxs("button",{onClick:_,className:"px-8 py-4 bg-gradient-to-r from-violet-500 to-fuchsia-500 hover:from-violet-400 hover:to-fuchsia-400 text-white font-semibold rounded-xl transition-all flex items-center justify-center gap-2 mx-auto",children:[jsxRuntimeExports.jsx(RotateCcw,{className:"w-5 h-5"}),"Take Another Quiz"]})]})}function StudySchedule(){const[R,f]=reactExports.useState(null),[D,c]=reactExports.useState(""),[_,B]=reactExports.useState(!1);reactExports.useEffect(()=>{N()},[]);const N=async()=>{const g=await db.studySchedules.toArray();g.length>0&&f(g[0])},U=async()=>{if(!D)return;B(!0);const g=new Date(D),h=new Date,E=Math.ceil((g.getTime()-h.getTime())/(1e3*60*60*24)),C=[],x=await db.chapters.toArray(),I=await db.concepts.toArray(),Q=Math.ceil(x.length/Math.max(E,1));for(let T=0;T<E;T++){const L=new Date(h);L.setDate(L.getDate()+T);const $=T*Q,rt=x.slice($,$+Q),et=I.filter(yt=>rt.some(gt=>gt.concepts?.some(kt=>kt.id===yt.id)));C.push({date:L,chapters:rt.map(yt=>yt.id),concepts:et.map(yt=>yt.id),flashcards:10,quizQuestions:5,completed:!1,eli5Mode:!0})}const V={id:crypto.randomUUID(),examDate:g,dailyGoals:C,createdAt:new Date,focusAreas:[],weakConcepts:[]};await db.studySchedules.add(V),f(V),B(!1)},F=async g=>{if(!R)return;const h=[...R.dailyGoals];h[g].completed=!h[g].completed,await db.studySchedules.update(R.id,{dailyGoals:h}),f({...R,dailyGoals:h})};if(!R)return jsxRuntimeExports.jsx("div",{className:"space-y-6",children:jsxRuntimeExports.jsxs("div",{className:"glass rounded-2xl p-8 text-center",children:[jsxRuntimeExports.jsx("div",{className:"w-16 h-16 mx-auto mb-4 rounded-2xl bg-gradient-to-br from-violet-500 to-fuchsia-500 flex items-center justify-center",children:jsxRuntimeExports.jsx(Calendar,{className:"w-8 h-8 text-white"})}),jsxRuntimeExports.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"Create Study Plan"}),jsxRuntimeExports.jsx("p",{className:"text-slate-400 mb-6",children:"Set your exam date and we'll create a personalized study schedule"}),jsxRuntimeExports.jsxs("div",{className:"max-w-sm mx-auto",children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2 text-left",children:"Exam Date"}),jsxRuntimeExports.jsx("input",{type:"date",value:D,onChange:g=>c(g.target.value),className:"w-full px-4 py-3 glass border border-white/10 rounded-xl text-white mb-4"}),jsxRuntimeExports.jsx("button",{onClick:U,disabled:!D||_,className:"w-full py-3 bg-gradient-to-r from-violet-500 to-fuchsia-500 hover:from-violet-400 hover:to-fuchsia-400 disabled:opacity-50 text-white font-medium rounded-xl transition-all flex items-center justify-center gap-2",children:_?jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:"Creating..."}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Sparkles,{className:"w-4 h-4"})," Generate Schedule"]})})]})]})});const u=new Date,o=Math.ceil((new Date(R.examDate).getTime()-u.getTime())/(1e3*60*60*24)),d=R.dailyGoals.filter(g=>g.completed).length,b=d/R.dailyGoals.length*100;return jsxRuntimeExports.jsxs("div",{className:"space-y-6",children:[jsxRuntimeExports.jsxs("div",{className:"glass rounded-2xl p-6",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-4",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h2",{className:"text-2xl font-bold text-white",children:"Study Schedule"}),jsxRuntimeExports.jsxs("p",{className:"text-slate-400",children:["Exam in ",o," days  ",d,"/",R.dailyGoals.length," days completed"]})]}),jsxRuntimeExports.jsxs("div",{className:"glass rounded-xl px-4 py-2",children:[jsxRuntimeExports.jsxs("span",{className:"text-2xl font-bold text-violet-400",children:[Math.round(b),"%"]}),jsxRuntimeExports.jsx("span",{className:"text-slate-500 text-sm ml-2",children:"complete"})]})]}),jsxRuntimeExports.jsx("div",{className:"mt-4 glass rounded-full h-2 overflow-hidden",children:jsxRuntimeExports.jsx("div",{className:"h-full bg-gradient-to-r from-violet-500 to-fuchsia-500 transition-all",style:{width:`${b}%`}})})]}),jsxRuntimeExports.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:R.dailyGoals.slice(0,14).map((g,h)=>{const E=new Date(g.date).toDateString()===u.toDateString(),C=new Date(g.date)<u;return jsxRuntimeExports.jsxs("div",{className:`glass rounded-xl p-4 transition-all ${g.completed?"opacity-50":""} ${E?"ring-2 ring-violet-500/50":""}`,children:[jsxRuntimeExports.jsxs("div",{className:"flex items-start justify-between mb-3",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{className:`font-semibold ${E?"text-violet-300":"text-white"}`,children:E?"Today":new Date(g.date).toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric"})}),C&&!g.completed&&jsxRuntimeExports.jsxs("span",{className:"text-xs text-red-400 flex items-center gap-1",children:[jsxRuntimeExports.jsx(CircleAlert,{className:"w-3 h-3"})," Missed"]})]}),jsxRuntimeExports.jsx("button",{onClick:()=>F(h),className:`w-6 h-6 rounded-full border-2 flex items-center justify-center transition-all ${g.completed?"bg-emerald-500 border-emerald-500":"border-slate-500 hover:border-violet-500"}`,children:g.completed&&jsxRuntimeExports.jsx(CircleCheckBig,{className:"w-4 h-4 text-white"})})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-1 text-sm text-slate-400",children:[jsxRuntimeExports.jsxs("p",{children:[g.chapters.length," chapters"]}),jsxRuntimeExports.jsxs("p",{children:[g.flashcards," flashcards"]}),jsxRuntimeExports.jsxs("p",{children:[g.quizQuestions," quiz questions"]})]})]},h)})})]})}function ProgressDashboard({bookId:R}){const[f,D]=reactExports.useState({totalFlashcards:0,dueFlashcards:0,totalQuestions:0,averageScore:0,studyStreak:0,conceptsMastered:0,totalConcepts:0}),[c,_]=reactExports.useState([]),[B,N]=reactExports.useState(!0);reactExports.useEffect(()=>{U()},[R]);const U=async()=>{N(!0);const[F,u]=await Promise.all([getStudyStats(R),db.quizResults.orderBy("date").reverse().limit(10).toArray()]);D(F),_(u),N(!1)};return B?jsxRuntimeExports.jsx("div",{className:"flex items-center justify-center h-64",children:jsxRuntimeExports.jsx("div",{className:"glass rounded-2xl p-8",children:jsxRuntimeExports.jsx(ChartColumn,{className:"w-8 h-8 text-violet-400 animate-pulse"})})}):jsxRuntimeExports.jsxs("div",{className:"space-y-6",children:[jsxRuntimeExports.jsx("div",{className:"glass rounded-2xl p-6",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-4",children:[jsxRuntimeExports.jsx("div",{className:"w-14 h-14 rounded-2xl bg-gradient-to-br from-violet-500 to-fuchsia-500 flex items-center justify-center",children:jsxRuntimeExports.jsx(Target,{className:"w-7 h-7 text-white"})}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h2",{className:"text-2xl font-bold text-white",children:"Your Progress"}),jsxRuntimeExports.jsx("p",{className:"text-slate-400",children:"Track your learning journey"})]})]})}),jsxRuntimeExports.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[{label:"Flashcards",value:f.totalFlashcards,icon:Brain,color:"violet"},{label:"Due Today",value:f.dueFlashcards,icon:Clock,color:"amber"},{label:"Quiz Avg",value:`${f.averageScore}%`,icon:TrendingUp,color:"emerald"},{label:"Streak",value:`${f.studyStreak} days`,icon:Zap,color:"fuchsia"}].map(F=>jsxRuntimeExports.jsxs("div",{className:"glass rounded-xl p-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[jsxRuntimeExports.jsx(F.icon,{className:`w-4 h-4 text-${F.color}-400`}),jsxRuntimeExports.jsx("span",{className:"text-slate-500 text-sm",children:F.label})]}),jsxRuntimeExports.jsx("p",{className:`text-2xl font-bold text-${F.color}-400`,children:F.value})]},F.label))}),jsxRuntimeExports.jsxs("div",{className:"glass rounded-2xl p-6",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mb-4",children:[jsxRuntimeExports.jsx("h3",{className:"text-lg font-semibold text-white",children:"Concept Mastery"}),jsxRuntimeExports.jsxs("span",{className:"text-sm text-slate-400",children:[f.conceptsMastered,"/",f.totalConcepts," mastered"]})]}),jsxRuntimeExports.jsx("div",{className:"glass rounded-full h-3 overflow-hidden mb-4",children:jsxRuntimeExports.jsx("div",{className:"h-full bg-gradient-to-r from-violet-500 to-fuchsia-500 transition-all",style:{width:`${f.totalConcepts>0?f.conceptsMastered/f.totalConcepts*100:0}%`}})}),f.conceptsMastered===0&&f.totalConcepts===0?jsxRuntimeExports.jsxs("div",{className:"text-center py-8",children:[jsxRuntimeExports.jsx(BookOpen,{className:"w-12 h-12 mx-auto mb-3 text-slate-500"}),jsxRuntimeExports.jsx("p",{className:"text-slate-400",children:"Upload study material to track concept mastery"})]}):jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[jsxRuntimeExports.jsxs("div",{className:"text-center",children:[jsxRuntimeExports.jsx("p",{className:"text-2xl font-bold text-emerald-400",children:f.conceptsMastered}),jsxRuntimeExports.jsx("p",{className:"text-xs text-slate-500",children:"Mastered"})]}),jsxRuntimeExports.jsxs("div",{className:"text-center",children:[jsxRuntimeExports.jsx("p",{className:"text-2xl font-bold text-yellow-400",children:Math.max(0,f.totalConcepts-f.conceptsMastered)}),jsxRuntimeExports.jsx("p",{className:"text-xs text-slate-500",children:"Learning"})]}),jsxRuntimeExports.jsxs("div",{className:"text-center",children:[jsxRuntimeExports.jsx("p",{className:"text-2xl font-bold text-violet-400",children:f.totalQuestions}),jsxRuntimeExports.jsx("p",{className:"text-xs text-slate-500",children:"Questions"})]})]})]}),jsxRuntimeExports.jsxs("div",{className:"glass rounded-2xl p-6",children:[jsxRuntimeExports.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Recent Quiz Results"}),c.length===0?jsxRuntimeExports.jsxs("div",{className:"text-center py-8",children:[jsxRuntimeExports.jsx(CircleCheckBig,{className:"w-12 h-12 mx-auto mb-3 text-slate-500"}),jsxRuntimeExports.jsx("p",{className:"text-slate-400",children:"No quizzes taken yet. Start practicing!"})]}):jsxRuntimeExports.jsx("div",{className:"space-y-3",children:c.map(F=>jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between p-4 glass rounded-xl",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsx("div",{className:`w-10 h-10 rounded-xl flex items-center justify-center ${F.score>=80?"bg-emerald-500/20":F.score>=60?"bg-yellow-500/20":"bg-red-500/20"}`,children:jsxRuntimeExports.jsx(CircleCheckBig,{className:`w-5 h-5 ${F.score>=80?"text-emerald-400":F.score>=60?"text-yellow-400":"text-red-400"}`})}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("p",{className:"font-medium text-white",children:["Quiz on ",new Date(F.date).toLocaleDateString()]}),jsxRuntimeExports.jsxs("p",{className:"text-sm text-slate-400",children:[F.correctAnswers,"/",F.totalQuestions," correct  ",Math.floor(F.timeSpent/60),"m ",F.timeSpent%60,"s"]})]})]}),jsxRuntimeExports.jsxs("span",{className:`text-lg font-bold ${F.score>=80?"text-emerald-400":F.score>=60?"text-yellow-400":"text-red-400"}`,children:[F.score,"%"]})]},F.id))})]})]})}function APIKeySetup({onComplete:R,onSkip:f}){const[D,c]=reactExports.useState(""),[_,B]=reactExports.useState(!1),[N,U]=reactExports.useState(!1),[F,u]=reactExports.useState(null),o=async()=>{if(!D.trim()){u("Please enter an API key");return}B(!0),u(null);try{if((await fetch("https://api.tavily.com/search",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({api_key:D.trim(),query:"test",max_results:1})})).status===401){u("Invalid API key. Please check and try again."),B(!1);return}setApiKey(D.trim()),R()}catch{setApiKey(D.trim()),R()}finally{B(!1)}},d=()=>{f&&f()};return jsxRuntimeExports.jsx("div",{className:"min-h-screen flex items-center justify-center p-4",children:jsxRuntimeExports.jsxs("div",{className:"w-full max-w-md",children:[jsxRuntimeExports.jsxs("div",{className:"glass rounded-2xl p-8",children:[jsxRuntimeExports.jsxs("div",{className:"text-center mb-8",children:[jsxRuntimeExports.jsx("div",{className:"w-16 h-16 mx-auto mb-4 rounded-2xl bg-gradient-to-br from-violet-500 to-fuchsia-500 flex items-center justify-center shadow-lg shadow-violet-500/25",children:jsxRuntimeExports.jsx(Key,{className:"w-8 h-8 text-white"})}),jsxRuntimeExports.jsx("h1",{className:"text-2xl font-bold text-white mb-2",children:"API Key Setup"}),jsxRuntimeExports.jsx("p",{className:"text-slate-400",children:"Connect to Tavily AI for enhanced study features"})]}),jsxRuntimeExports.jsx("div",{className:"space-y-3 mb-6",children:["Deep AI content analysis with ELI5 explanations","Smart flashcard generation with analogies","Market analysis and comps reports","Scenario-based practice questions"].map((b,g)=>jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3 text-slate-300",children:[jsxRuntimeExports.jsx(CircleCheckBig,{className:"w-5 h-5 text-emerald-400 flex-shrink-0"}),jsxRuntimeExports.jsx("span",{className:"text-sm",children:b})]},g))}),jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Tavily API Key"}),jsxRuntimeExports.jsxs("div",{className:"relative",children:[jsxRuntimeExports.jsx("input",{type:N?"text":"password",value:D,onChange:b=>c(b.target.value),placeholder:"tvly-...",className:"w-full px-4 py-3 glass border border-white/10 rounded-xl text-white placeholder-slate-500 focus:ring-2 focus:ring-violet-500/50 pr-24"}),jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>U(!N),className:"absolute right-3 top-1/2 -translate-y-1/2 text-slate-400 hover:text-white text-sm",children:N?"Hide":"Show"})]}),jsxRuntimeExports.jsx("p",{className:"text-xs text-slate-500 mt-2",children:"Your key is stored only in your browser's localStorage."})]}),F&&jsxRuntimeExports.jsxs("div",{className:"p-3 bg-red-500/10 border border-red-500/30 rounded-xl flex items-center gap-2 text-red-300",children:[jsxRuntimeExports.jsx(TriangleAlert,{className:"w-4 h-4"}),jsxRuntimeExports.jsx("span",{className:"text-sm",children:F})]}),jsxRuntimeExports.jsx("button",{onClick:o,disabled:_||!D.trim(),className:"w-full py-3 bg-gradient-to-r from-violet-500 to-fuchsia-500 hover:from-violet-400 hover:to-fuchsia-400 disabled:opacity-50 text-white font-medium rounded-xl transition-all flex items-center justify-center gap-2",children:_?jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:"Verifying..."}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Sparkles,{className:"w-4 h-4"})," Connect"]})}),f&&jsxRuntimeExports.jsx("button",{onClick:d,className:"w-full py-3 glass hover:bg-white/5 text-slate-400 font-medium rounded-xl transition-all",children:"Skip for now"})]}),jsxRuntimeExports.jsxs("div",{className:"mt-6 pt-6 border-t border-white/10 text-center",children:[jsxRuntimeExports.jsx("p",{className:"text-sm text-slate-400 mb-2",children:"Don't have an API key?"}),jsxRuntimeExports.jsxs("a",{href:"https://tavily.com",target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-1 text-violet-400 hover:text-violet-300 transition-colors",children:["Get one free at Tavily",jsxRuntimeExports.jsx(ExternalLink,{className:"w-4 h-4"})]})]})]}),jsxRuntimeExports.jsxs("div",{className:"mt-4 flex items-start gap-2 text-slate-500 text-xs",children:[jsxRuntimeExports.jsx(Shield,{className:"w-4 h-4 flex-shrink-0 mt-0.5"}),jsxRuntimeExports.jsx("p",{children:"Your API key never leaves your browser. It's stored securely in localStorage and used only for direct API calls to Tavily."})]})]})})}function BrainTest(){const[R,f]=reactExports.useState(!1),[D,c]=reactExports.useState(""),[_,B]=reactExports.useState(null),[N,U]=reactExports.useState(null),F=async()=>{f(!0),c("Initializing Brain..."),U(null);try{const u=`test-book-${Date.now()}`;console.log("Starting Brain Test...");const o=await processPDFWithAI(SAMPLE_TEXT,{useELI5:!0,generateVisuals:!0});console.log("Brain Processing Complete:",o),await db.books.add({id:u,title:"Brain Test - Real Estate Fundamentals",uploadedAt:new Date,totalChapters:o.chapters.length,totalConcepts:o.concepts.length});for(const d of o.chapters)await db.chapters.add(d);for(const d of o.concepts)await db.concepts.add(d);for(const d of o.flashcards)await db.flashcards.add(d);B(o),c("Complete!")}catch(u){console.error("Brain Test Error:",u),U(u instanceof Error?u.message:"Unknown error")}finally{f(!1)}};return jsxRuntimeExports.jsxs("div",{className:"space-y-6",children:[jsxRuntimeExports.jsx("div",{className:"text-center space-y-4",children:jsxRuntimeExports.jsxs("div",{className:"inline-flex items-center gap-3 px-6 py-3 glass rounded-2xl border border-violet-500/30",children:[jsxRuntimeExports.jsx(Brain,{className:"w-8 h-8 text-violet-400"}),jsxRuntimeExports.jsx("h1",{className:"text-3xl font-bold bg-gradient-to-r from-violet-400 to-fuchsia-400 bg-clip-text text-transparent",children:"Brain V3 Test Lab"})]})}),jsxRuntimeExports.jsxs("div",{className:"glass rounded-2xl p-6",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[jsxRuntimeExports.jsx(FileText,{className:"w-5 h-5 text-emerald-400"}),jsxRuntimeExports.jsx("h2",{className:"text-xl font-semibold",children:"Test Input"})]}),jsxRuntimeExports.jsxs("div",{className:"p-4 bg-slate-800/50 rounded-xl font-mono text-sm text-slate-400 max-h-64 overflow-auto",children:[SAMPLE_TEXT.substring(0,500),"..."]}),jsxRuntimeExports.jsxs("div",{className:"mt-4 flex items-center justify-between",children:[jsxRuntimeExports.jsxs("span",{className:"text-sm text-slate-500",children:[SAMPLE_TEXT.length.toLocaleString()," characters"]}),jsxRuntimeExports.jsx("button",{onClick:F,disabled:R,className:"px-6 py-3 bg-gradient-to-r from-violet-500 to-fuchsia-500 hover:from-violet-400 hover:to-fuchsia-400 disabled:opacity-50 text-white font-medium rounded-xl transition-all flex items-center gap-2",children:R?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(LoaderCircle,{className:"w-5 h-5 animate-spin"})," Processing..."]}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Zap,{className:"w-5 h-5"})," Run Brain Test"]})})]})]}),R&&jsxRuntimeExports.jsx("div",{className:"glass rounded-2xl p-6 text-center",children:jsxRuntimeExports.jsxs("div",{className:"inline-flex items-center gap-3 text-violet-400",children:[jsxRuntimeExports.jsx(LoaderCircle,{className:"w-6 h-6 animate-spin"}),jsxRuntimeExports.jsx("span",{children:D})]})}),N&&jsxRuntimeExports.jsx("div",{className:"glass rounded-2xl p-6 bg-red-500/10 border border-red-500/30 text-red-400",children:N}),_&&jsxRuntimeExports.jsxs("div",{className:"space-y-6",children:[jsxRuntimeExports.jsxs("div",{className:"glass rounded-2xl p-6",children:[jsxRuntimeExports.jsxs("h2",{className:"text-xl font-semibold mb-4 flex items-center gap-2",children:[jsxRuntimeExports.jsx(CircleCheckBig,{className:"w-5 h-5 text-emerald-400"}),"Processing Complete!"]}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[jsxRuntimeExports.jsx(StatCard,{icon:FileText,label:"Chapters",value:_.chapters.length,color:"blue"}),jsxRuntimeExports.jsx(StatCard,{icon:Lightbulb,label:"Concepts",value:_.concepts.length,color:"yellow"}),jsxRuntimeExports.jsx(StatCard,{icon:Sparkles,label:"Flashcards",value:_.flashcards.length,color:"purple"}),jsxRuntimeExports.jsx(StatCard,{icon:Clock,label:"Visuals",value:_.visualAids.length,color:"emerald"})]})]}),_.chapters.map(u=>jsxRuntimeExports.jsxs("div",{className:"glass rounded-2xl p-6",children:[jsxRuntimeExports.jsx("h3",{className:"font-semibold text-lg mb-2",children:u.title}),u.eli5Summary&&jsxRuntimeExports.jsxs("div",{className:"p-4 bg-gradient-to-r from-violet-500/10 to-fuchsia-500/10 rounded-lg border border-violet-500/20",children:[jsxRuntimeExports.jsx("p",{className:"text-sm font-medium text-violet-400 mb-2",children:"ELI5 Summary"}),jsxRuntimeExports.jsx("p",{className:"text-slate-200",children:u.eli5Summary.oneSentence}),jsxRuntimeExports.jsx("p",{className:"text-slate-400 text-sm mt-2",children:u.eli5Summary.shortSummary})]})]},u.id))]})]})}function StatCard({icon:R,label:f,value:D,color:c}){const _={blue:"from-blue-500/20 to-cyan-500/20 text-blue-400",yellow:"from-yellow-500/20 to-orange-500/20 text-yellow-400",purple:"from-violet-500/20 to-fuchsia-500/20 text-violet-400",emerald:"from-emerald-500/20 to-teal-500/20 text-emerald-400"};return jsxRuntimeExports.jsxs("div",{className:`glass rounded-xl p-4 bg-gradient-to-br ${_[c]} border border-white/5`,children:[jsxRuntimeExports.jsx(R,{className:"w-6 h-6 mb-2"}),jsxRuntimeExports.jsx("p",{className:"text-3xl font-bold",children:D}),jsxRuntimeExports.jsx("p",{className:"text-sm opacity-80",children:f})]})}const SAMPLE_TEXT=`Chapter 1: Understanding Real Property

Real property is a fundamental concept in real estate. It includes land and everything permanently attached to it. When you buy real property, you are not just buying dirt - you are buying the land PLUS everything that is attached to it.

Real property includes the land itself, any buildings or structures on the land, and even natural things that are attached like trees and minerals underground.

Chapter 2: Personal Property vs Real Property

Personal property is different from real property. Personal property includes anything you can move around. Your furniture, your car, your clothes, and your television are all personal property.

The key difference is movability. If you can pick it up and take it with you, it is personal property. If it is stuck to the land, it is real property.

Chapter 3: What is a Fixture?

A fixture is something that started as personal property but became so permanently attached to real property that it is now considered part of the real estate.

Think about a chandelier. You can buy a chandelier at a store - at that point, it is personal property. But once you install it and attach it to the ceiling of your house, it becomes a fixture.

Chapter 4: Joint Tenancy

Joint tenancy is when two or more people own property together with equal shares, and if one person dies, their share automatically goes to the surviving owners.

Tenancy in common is different - people can own different percentages, and when one person dies, their share goes to their heirs.`;function App(){const[R,f]=reactExports.useState("books"),[D,c]=reactExports.useState([]),[_,B]=reactExports.useState(null),[N,U]=reactExports.useState(null),[F,u]=reactExports.useState(null),[o,d]=reactExports.useState([]),[b,g]=reactExports.useState(!1),[h,E]=reactExports.useState(!1),[C,x]=reactExports.useState(!1);reactExports.useEffect(()=>{I(),"serviceWorker"in navigator&&navigator.serviceWorker.register("/sw.js").catch(console.error);const At=setTimeout(()=>{E(!hasApiKey())},500);return()=>clearTimeout(At)},[]);const I=async()=>{x(!0);const At=await db.books.toArray();c(At),x(!1)},Q=async At=>{x(!0);const Ft=await db.chapters.where("bookId").equals(At).sortBy("number");d(Ft),x(!1)},V=async At=>{B(At),await Q(At.id),f("books"),U(null)},T=At=>{U(At),f("chapter")},L=async()=>{await I();const At=await db.books.orderBy("uploadedAt").last();At&&V(At)},$=()=>E(!1),rt=()=>E(!1),et=()=>{E(!0),g(!1)},yt=At=>{u(At),f("flashcards")},gt=()=>{switch(R){case"books":return _?jsxRuntimeExports.jsx(ChapterList,{book:_,chapters:o,onChapterSelect:T,onChaptersUpdated:Q}):jsxRuntimeExports.jsx(PDFUpload,{onUploadComplete:L});case"chapter":return N?jsxRuntimeExports.jsx(ChapterDetail,{chapter:N,onBack:()=>f("books"),onStudyConcept:yt,onTakeQuiz:()=>f("quiz")}):jsxRuntimeExports.jsx(PDFUpload,{onUploadComplete:L});case"flashcards":return jsxRuntimeExports.jsx(FlashcardView,{initialConcept:F});case"quiz":return jsxRuntimeExports.jsx(QuizView,{chapters:o,selectedChapter:N});case"schedule":return jsxRuntimeExports.jsx(StudySchedule,{});case"progress":return jsxRuntimeExports.jsx(ProgressDashboard,{bookId:_?.id});case"market-analysis":return jsxRuntimeExports.jsx(MarketAnalysisView,{});case"comps":return jsxRuntimeExports.jsx(CompsReportView,{});case"brain-test":return jsxRuntimeExports.jsx(BrainTest,{});default:return jsxRuntimeExports.jsx(PDFUpload,{onUploadComplete:L})}};if(h)return jsxRuntimeExports.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-950 via-slate-900 to-slate-950",children:jsxRuntimeExports.jsx(APIKeySetup,{onComplete:$,onSkip:rt})});const kt=[{view:"books",label:"Study Material",icon:BookOpen},{view:"flashcards",label:"Flashcards",icon:Brain},{view:"quiz",label:"Practice Quiz",icon:FileSearch},{view:"schedule",label:"Study Plan",icon:Calendar},{view:"progress",label:"Progress",icon:ChartColumn}];return jsxRuntimeExports.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-950 via-slate-900 to-slate-950 text-slate-100",children:[jsxRuntimeExports.jsx("header",{className:"sticky top-0 z-50 glass border-b border-white/10",children:jsxRuntimeExports.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between h-16",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-4",children:[jsxRuntimeExports.jsx("button",{onClick:()=>g(!b),className:"lg:hidden p-2 rounded-xl glass hover:bg-white/10 transition-colors",children:b?jsxRuntimeExports.jsx(X,{className:"w-5 h-5"}):jsxRuntimeExports.jsx(Menu,{className:"w-5 h-5"})}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsx("div",{className:"w-10 h-10 rounded-xl bg-gradient-to-br from-violet-500 to-fuchsia-500 flex items-center justify-center shadow-lg shadow-violet-500/25",children:jsxRuntimeExports.jsx(Sparkles,{className:"w-5 h-5 text-white"})}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h1",{className:"text-lg font-bold bg-gradient-to-r from-white to-slate-400 bg-clip-text text-transparent",children:"RE Study AI"}),jsxRuntimeExports.jsx("p",{className:"text-xs text-slate-400",children:"Deep Learning Assistant"})]})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[D.length>0&&jsxRuntimeExports.jsxs("select",{value:_?.id||"",onChange:At=>{const Ft=D.find(Xt=>Xt.id===At.target.value);Ft&&V(Ft)},className:"hidden sm:block text-sm glass border border-white/10 rounded-xl px-4 py-2 text-slate-200 focus:ring-2 focus:ring-violet-500/50 focus:border-transparent min-w-[200px]",children:[jsxRuntimeExports.jsx("option",{value:"",className:"bg-slate-900",children:"Select material..."}),D.map(At=>jsxRuntimeExports.jsx("option",{value:At.id,className:"bg-slate-900",children:At.title},At.id))]}),jsxRuntimeExports.jsx("button",{onClick:et,className:`p-2 rounded-xl glass hover:bg-white/10 transition-colors ${hasApiKey()?"text-emerald-400":"text-amber-400"}`,title:"API Key Settings",children:jsxRuntimeExports.jsx(Key,{className:"w-5 h-5"})})]})]})})}),jsxRuntimeExports.jsxs("div",{className:"flex",children:[jsxRuntimeExports.jsxs("aside",{className:`fixed inset-y-0 left-0 z-40 w-72 glass-dark border-r border-white/10 transform transition-transform duration-300 ease-out lg:translate-x-0 lg:static lg:h-[calc(100vh-4rem)] ${b?"translate-x-0":"-translate-x-full"}`,children:[jsxRuntimeExports.jsxs("nav",{className:"p-4 space-y-2",children:[kt.map(At=>{const Ft=At.icon,Xt=R===At.view||At.view==="books"&&R==="chapter";return jsxRuntimeExports.jsxs("button",{onClick:()=>{f(At.view),g(!1)},className:`w-full flex items-center gap-3 px-4 py-3 rounded-xl text-sm font-medium transition-all duration-200 ${Xt?"bg-gradient-to-r from-violet-500/20 to-fuchsia-500/20 text-violet-300 border border-violet-500/30":"text-slate-400 hover:bg-white/5 hover:text-slate-200"}`,children:[jsxRuntimeExports.jsx(Ft,{className:`w-5 h-5 ${Xt?"text-violet-400":""}`}),At.label]},At.view)}),jsxRuntimeExports.jsxs("div",{className:"pt-4 mt-4 border-t border-white/10",children:[jsxRuntimeExports.jsx("p",{className:"px-4 text-xs font-semibold text-slate-500 uppercase tracking-wider mb-3",children:"AI Tools"}),jsxRuntimeExports.jsxs("button",{onClick:()=>{f("market-analysis"),g(!1)},className:`w-full flex items-center gap-3 px-4 py-3 rounded-xl text-sm font-medium transition-all duration-200 ${R==="market-analysis"?"bg-gradient-to-r from-emerald-500/20 to-teal-500/20 text-emerald-300 border border-emerald-500/30":"text-slate-400 hover:bg-white/5 hover:text-slate-200"}`,children:[jsxRuntimeExports.jsx(TrendingUp,{className:"w-5 h-5"}),"Market Analysis"]}),jsxRuntimeExports.jsxs("button",{onClick:()=>{f("comps"),g(!1)},className:`w-full flex items-center gap-3 px-4 py-3 rounded-xl text-sm font-medium transition-all duration-200 ${R==="comps"?"bg-gradient-to-r from-emerald-500/20 to-teal-500/20 text-emerald-300 border border-emerald-500/30":"text-slate-400 hover:bg-white/5 hover:text-slate-200"}`,children:[jsxRuntimeExports.jsx(House,{className:"w-5 h-5"}),"Comps Report"]}),jsxRuntimeExports.jsxs("button",{onClick:()=>{f("brain-test"),g(!1)},className:`w-full flex items-center gap-3 px-4 py-3 rounded-xl text-sm font-medium transition-all duration-200 ${R==="brain-test"?"bg-gradient-to-r from-violet-500/20 to-fuchsia-500/20 text-violet-300 border border-violet-500/30":"text-slate-400 hover:bg-white/5 hover:text-slate-200"}`,children:[jsxRuntimeExports.jsx(Brain,{className:"w-5 h-5"}),"Brain Test "]})]})]}),jsxRuntimeExports.jsx("div",{className:"absolute bottom-0 left-0 right-0 p-4 border-t border-white/10",children:jsxRuntimeExports.jsxs("div",{className:"glass rounded-xl p-3 space-y-2",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 text-xs text-slate-400",children:[jsxRuntimeExports.jsx("span",{className:`w-2 h-2 rounded-full ${hasApiKey()?"bg-emerald-400 animate-pulse":"bg-amber-400"}`}),hasApiKey()?"AI Connected":"Offline Mode"]}),jsxRuntimeExports.jsx("p",{className:"text-xs text-slate-500",children:"Real Estate Study Assistant v2.0"})]})})]}),b&&jsxRuntimeExports.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-30 lg:hidden",onClick:()=>g(!1)}),jsxRuntimeExports.jsx("main",{className:"flex-1 min-h-[calc(100vh-4rem)] p-4 sm:p-6 lg:p-8",children:jsxRuntimeExports.jsx("div",{className:"max-w-6xl mx-auto",children:C?jsxRuntimeExports.jsx("div",{className:"flex items-center justify-center h-64",children:jsxRuntimeExports.jsxs("div",{className:"glass rounded-2xl p-8 flex flex-col items-center gap-4",children:[jsxRuntimeExports.jsx("div",{className:"w-12 h-12 border-4 border-violet-500/30 border-t-violet-500 rounded-full animate-spin"}),jsxRuntimeExports.jsx("p",{className:"text-slate-400",children:"Loading your study material..."})]})}):gt()})})]})]})}function MarketAnalysisView(){const[R,f]=reactExports.useState(""),[D,c]=reactExports.useState(""),[_,B]=reactExports.useState(!1),[N,U]=reactExports.useState(null),[F,u]=reactExports.useState(null),o=async()=>{if(R.trim()){B(!0),u(null);try{const{getMarketAnalysis:d}=await __vitePreload(async()=>{const{getMarketAnalysis:g}=await Promise.resolve().then(()=>ai);return{getMarketAnalysis:g}},void 0),b=await d(R,D);U(b)}catch(d){u(d instanceof Error?d.message:"Failed to analyze market")}finally{B(!1)}}};return jsxRuntimeExports.jsxs("div",{className:"space-y-6",children:[jsxRuntimeExports.jsxs("div",{className:"glass rounded-2xl p-6",children:[jsxRuntimeExports.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"Market Analysis"}),jsxRuntimeExports.jsx("p",{className:"text-slate-400 mb-6",children:"Get AI-powered market insights for any location"}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[jsxRuntimeExports.jsxs("div",{className:"md:col-span-2",children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Location"}),jsxRuntimeExports.jsx("input",{type:"text",value:R,onChange:d=>f(d.target.value),placeholder:"e.g., Austin, TX or Miami-Dade County",className:"w-full px-4 py-3 glass border border-white/10 rounded-xl text-white placeholder-slate-500 focus:ring-2 focus:ring-violet-500/50 focus:border-transparent"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Property Type"}),jsxRuntimeExports.jsxs("select",{value:D,onChange:d=>c(d.target.value),className:"w-full px-4 py-3 glass border border-white/10 rounded-xl text-white focus:ring-2 focus:ring-violet-500/50 focus:border-transparent",children:[jsxRuntimeExports.jsx("option",{value:"",className:"bg-slate-900",children:"All Types"}),jsxRuntimeExports.jsx("option",{value:"single-family",className:"bg-slate-900",children:"Single Family"}),jsxRuntimeExports.jsx("option",{value:"condo",className:"bg-slate-900",children:"Condo"}),jsxRuntimeExports.jsx("option",{value:"townhouse",className:"bg-slate-900",children:"Townhouse"}),jsxRuntimeExports.jsx("option",{value:"multi-family",className:"bg-slate-900",children:"Multi-Family"})]})]})]}),jsxRuntimeExports.jsx("button",{onClick:o,disabled:_||!R.trim(),className:"px-6 py-3 bg-gradient-to-r from-violet-500 to-fuchsia-500 hover:from-violet-400 hover:to-fuchsia-400 disabled:opacity-50 disabled:cursor-not-allowed text-white font-medium rounded-xl transition-all flex items-center gap-2 shadow-lg shadow-violet-500/25",children:_?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("div",{className:"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"})," Analyzing..."]}):"Analyze Market"}),F&&jsxRuntimeExports.jsx("div",{className:"mt-4 p-4 bg-red-500/10 border border-red-500/30 rounded-xl text-red-300",children:F})]}),N&&jsxRuntimeExports.jsxs("div",{className:"glass rounded-2xl p-6 space-y-6",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h3",{className:"text-xl font-semibold text-white mb-2",children:"Market Insights"}),jsxRuntimeExports.jsx("p",{className:"text-slate-300",children:N.summary}),N.eli5Summary&&jsxRuntimeExports.jsxs("div",{className:"mt-4 p-4 bg-emerald-500/10 border border-emerald-500/30 rounded-xl",children:[jsxRuntimeExports.jsx("p",{className:"text-sm text-emerald-400 font-medium mb-1",children:" Simple Explanation"}),jsxRuntimeExports.jsx("p",{className:"text-emerald-100",children:N.eli5Summary})]})]}),jsxRuntimeExports.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:N.marketTrends.map((d,b)=>jsxRuntimeExports.jsxs("div",{className:"glass rounded-xl p-4",children:[jsxRuntimeExports.jsx("p",{className:"text-sm text-slate-400",children:d.trend}),jsxRuntimeExports.jsx("div",{className:"flex items-center gap-2 mt-1",children:jsxRuntimeExports.jsxs("span",{className:`text-2xl font-bold ${d.direction==="up"?"text-emerald-400":d.direction==="down"?"text-red-400":"text-slate-400"}`,children:[d.direction==="up"?"":d.direction==="down"?"":"",d.percentage!==void 0?` ${d.percentage}%`:""]})}),d.explanation&&jsxRuntimeExports.jsx("p",{className:"text-xs text-slate-500 mt-2",children:d.explanation})]},b))}),N.keyInsights?.length>0&&jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h4",{className:"font-semibold text-white mb-3",children:"Key Takeaways"}),jsxRuntimeExports.jsx("ul",{className:"space-y-2",children:N.keyInsights.map((d,b)=>jsxRuntimeExports.jsxs("li",{className:"flex items-start gap-2 text-slate-300",children:[jsxRuntimeExports.jsx("span",{className:"text-violet-400 mt-1",children:""}),d]},b))})]})]})]})}function CompsReportView(){const[R,f]=reactExports.useState({address:"",city:"",state:"",zipCode:"",propertyType:"single-family",bedrooms:"",bathrooms:"",sqft:""}),[D,c]=reactExports.useState(!1),[_,B]=reactExports.useState(null),[N,U]=reactExports.useState(null),F=async u=>{u.preventDefault(),c(!0),U(null);try{const{getCompsReport:o}=await __vitePreload(async()=>{const{getCompsReport:b}=await Promise.resolve().then(()=>ai);return{getCompsReport:b}},void 0),d=await o({address:R.address,city:R.city,state:R.state,zipCode:R.zipCode,propertyType:R.propertyType,bedrooms:R.bedrooms?parseInt(R.bedrooms):void 0,bathrooms:R.bathrooms?parseFloat(R.bathrooms):void 0,sqft:R.sqft?parseInt(R.sqft):void 0});B(d)}catch(o){U(o instanceof Error?o.message:"Failed to generate comps report")}finally{c(!1)}};return jsxRuntimeExports.jsxs("div",{className:"space-y-6",children:[jsxRuntimeExports.jsxs("div",{className:"glass rounded-2xl p-6",children:[jsxRuntimeExports.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"Comparative Market Analysis"}),jsxRuntimeExports.jsx("p",{className:"text-slate-400 mb-6",children:"Generate property valuation analysis"}),jsxRuntimeExports.jsxs("form",{onSubmit:F,className:"space-y-4",children:[jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[jsxRuntimeExports.jsxs("div",{className:"md:col-span-2",children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Property Address *"}),jsxRuntimeExports.jsx("input",{type:"text",required:!0,value:R.address,onChange:u=>f({...R,address:u.target.value}),placeholder:"123 Main Street",className:"w-full px-4 py-3 glass border border-white/10 rounded-xl text-white placeholder-slate-500 focus:ring-2 focus:ring-violet-500/50"})]}),["city","state","zipCode"].map(u=>jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2 capitalize",children:u==="zipCode"?"ZIP Code":u}),jsxRuntimeExports.jsx("input",{type:"text",value:R[u],onChange:o=>f({...R,[u]:o.target.value}),className:"w-full px-4 py-3 glass border border-white/10 rounded-xl text-white focus:ring-2 focus:ring-violet-500/50"})]},u)),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Property Type"}),jsxRuntimeExports.jsx("select",{value:R.propertyType,onChange:u=>f({...R,propertyType:u.target.value}),className:"w-full px-4 py-3 glass border border-white/10 rounded-xl text-white focus:ring-2 focus:ring-violet-500/50",children:["single-family","condo","townhouse","multi-family","commercial"].map(u=>jsxRuntimeExports.jsx("option",{value:u,className:"bg-slate-900 capitalize",children:u.replace("-"," ")},u))})]}),[{key:"bedrooms",label:"Bedrooms",type:"number"},{key:"bathrooms",label:"Bathrooms",type:"number",step:"0.5"},{key:"sqft",label:"Square Feet",type:"number"}].map(({key:u,label:o,type:d,step:b})=>jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:o}),jsxRuntimeExports.jsx("input",{type:d,step:b,value:R[u],onChange:g=>f({...R,[u]:g.target.value}),className:"w-full px-4 py-3 glass border border-white/10 rounded-xl text-white focus:ring-2 focus:ring-violet-500/50"})]},u))]}),jsxRuntimeExports.jsx("button",{type:"submit",disabled:D||!R.address.trim(),className:"px-6 py-3 bg-gradient-to-r from-emerald-500 to-teal-500 hover:from-emerald-400 hover:to-teal-400 disabled:opacity-50 text-white font-medium rounded-xl transition-all flex items-center gap-2",children:D?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("div",{className:"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"})," Generating..."]}):"Generate Comps Report"})]}),N&&jsxRuntimeExports.jsx("div",{className:"mt-4 p-4 bg-red-500/10 border border-red-500/30 rounded-xl text-red-300",children:N})]}),_&&jsxRuntimeExports.jsxs("div",{className:"glass rounded-2xl p-6 space-y-6",children:[jsxRuntimeExports.jsxs("div",{className:"bg-gradient-to-r from-violet-500/20 to-fuchsia-500/20 rounded-xl p-6 border border-violet-500/30",children:[jsxRuntimeExports.jsx("h3",{className:"text-lg font-semibold text-violet-300 mb-2",children:"Subject Property"}),jsxRuntimeExports.jsx("p",{className:"text-slate-200",children:_.subjectProperty.address}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-4 mt-3",children:[jsxRuntimeExports.jsxs("span",{className:"text-3xl font-bold text-white",children:["$",_.subjectProperty.estimatedValue.toLocaleString()]}),jsxRuntimeExports.jsxs("span",{className:`px-3 py-1 rounded-full text-sm ${_.subjectProperty.confidence==="high"?"bg-emerald-500/20 text-emerald-300":_.subjectProperty.confidence==="medium"?"bg-yellow-500/20 text-yellow-300":"bg-slate-500/20 text-slate-300"}`,children:[_.subjectProperty.confidence," confidence"]})]})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h4",{className:"font-semibold text-white mb-4",children:"Comparable Sales"}),jsxRuntimeExports.jsx("div",{className:"space-y-3",children:_.comparables.map((u,o)=>jsxRuntimeExports.jsx("div",{className:"glass rounded-xl p-4",children:jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-start",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{className:"font-medium text-white",children:u.address}),jsxRuntimeExports.jsxs("p",{className:"text-sm text-slate-400",children:[u.bedrooms," bed  ",u.bathrooms," bath  ",u.sqft.toLocaleString()," sqft"]})]}),jsxRuntimeExports.jsxs("div",{className:"text-right",children:[jsxRuntimeExports.jsxs("p",{className:"font-semibold text-white",children:["$",u.salePrice.toLocaleString()]}),jsxRuntimeExports.jsx("p",{className:"text-xs text-slate-500",children:u.saleDate})]})]})},o))})]})]})]})}ReactDOM.createRoot(document.getElementById("root")).render(jsxRuntimeExports.jsx(React.StrictMode,{children:jsxRuntimeExports.jsx(App,{})}));
//# sourceMappingURL=index-noFolUV6.js.map
