(function(){const u=document.createElement("link").relList;if(u&&u.supports&&u.supports("modulepreload"))return;for(const E of document.querySelectorAll('link[rel="modulepreload"]'))o(E);new MutationObserver(E=>{for(const O of E)if(O.type==="childList")for(const D of O.addedNodes)D.tagName==="LINK"&&D.rel==="modulepreload"&&o(D)}).observe(document,{childList:!0,subtree:!0});function M(E){const O={};return E.integrity&&(O.integrity=E.integrity),E.referrerPolicy&&(O.referrerPolicy=E.referrerPolicy),E.crossOrigin==="use-credentials"?O.credentials="include":E.crossOrigin==="anonymous"?O.credentials="omit":O.credentials="same-origin",O}function o(E){if(E.ep)return;E.ep=!0;const O=M(E);fetch(E.href,O)}})();var commonjsGlobal=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function getDefaultExportFromCjs(_){return _&&_.__esModule&&Object.prototype.hasOwnProperty.call(_,"default")?_.default:_}function getAugmentedNamespace(_){if(Object.prototype.hasOwnProperty.call(_,"__esModule"))return _;var u=_.default;if(typeof u=="function"){var M=function o(){var E=!1;try{E=this instanceof o}catch{}return E?Reflect.construct(u,arguments,this.constructor):u.apply(this,arguments)};M.prototype=u.prototype}else M={};return Object.defineProperty(M,"__esModule",{value:!0}),Object.keys(_).forEach(function(o){var E=Object.getOwnPropertyDescriptor(_,o);Object.defineProperty(M,o,E.get?E:{enumerable:!0,get:function(){return _[o]}})}),M}var jsxRuntime={exports:{}},reactJsxRuntime_production={};var hasRequiredReactJsxRuntime_production;function requireReactJsxRuntime_production(){if(hasRequiredReactJsxRuntime_production)return reactJsxRuntime_production;hasRequiredReactJsxRuntime_production=1;var _=Symbol.for("react.transitional.element"),u=Symbol.for("react.fragment");function M(o,E,O){var D=null;if(O!==void 0&&(D=""+O),E.key!==void 0&&(D=""+E.key),"key"in E){O={};for(var B in E)B!=="key"&&(O[B]=E[B])}else O=E;return E=O.ref,{$$typeof:_,type:o,key:D,ref:E!==void 0?E:null,props:O}}return reactJsxRuntime_production.Fragment=u,reactJsxRuntime_production.jsx=M,reactJsxRuntime_production.jsxs=M,reactJsxRuntime_production}var hasRequiredJsxRuntime;function requireJsxRuntime(){return hasRequiredJsxRuntime||(hasRequiredJsxRuntime=1,jsxRuntime.exports=requireReactJsxRuntime_production()),jsxRuntime.exports}var jsxRuntimeExports=requireJsxRuntime(),react={exports:{}},react_production={};var hasRequiredReact_production;function requireReact_production(){if(hasRequiredReact_production)return react_production;hasRequiredReact_production=1;var _=Symbol.for("react.transitional.element"),u=Symbol.for("react.portal"),M=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),E=Symbol.for("react.profiler"),O=Symbol.for("react.consumer"),D=Symbol.for("react.context"),B=Symbol.for("react.forward_ref"),F=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),l=Symbol.for("react.lazy"),h=Symbol.for("react.activity"),b=Symbol.iterator;function y(g){return g===null||typeof g!="object"?null:(g=b&&g[b]||g["@@iterator"],typeof g=="function"?g:null)}var f={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},A=Object.assign,j={};function x(g,L,H){this.props=g,this.context=L,this.refs=j,this.updater=H||f}x.prototype.isReactComponent={},x.prototype.setState=function(g,L){if(typeof g!="object"&&typeof g!="function"&&g!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,g,L,"setState")},x.prototype.forceUpdate=function(g){this.updater.enqueueForceUpdate(this,g,"forceUpdate")};function U(){}U.prototype=x.prototype;function Z(g,L,H){this.props=g,this.context=L,this.refs=j,this.updater=H||f}var V=Z.prototype=new U;V.constructor=Z,A(V,x.prototype),V.isPureReactComponent=!0;var T=Array.isArray;function z(){}var $={H:null,A:null,T:null,S:null},rt=Object.prototype.hasOwnProperty;function et(g,L,H){var J=H.ref;return{$$typeof:_,type:g,key:L,ref:J!==void 0?J:null,props:H}}function yt(g,L){return et(g.type,L,g.props)}function gt(g){return typeof g=="object"&&g!==null&&g.$$typeof===_}function kt(g){var L={"=":"=0",":":"=2"};return"$"+g.replace(/[=:]/g,function(H){return L[H]})}var At=/\/+/g;function Ft(g,L){return typeof g=="object"&&g!==null&&g.key!=null?kt(""+g.key):L.toString(36)}function Kt(g){switch(g.status){case"fulfilled":return g.value;case"rejected":throw g.reason;default:switch(typeof g.status=="string"?g.then(z,z):(g.status="pending",g.then(function(L){g.status==="pending"&&(g.status="fulfilled",g.value=L)},function(L){g.status==="pending"&&(g.status="rejected",g.reason=L)})),g.status){case"fulfilled":return g.value;case"rejected":throw g.reason}}throw g}function nt(g,L,H,J,K){var m=typeof g;(m==="undefined"||m==="boolean")&&(g=null);var k=!1;if(g===null)k=!0;else switch(m){case"bigint":case"string":case"number":k=!0;break;case"object":switch(g.$$typeof){case _:case u:k=!0;break;case l:return k=g._init,nt(k(g._payload),L,H,J,K)}}if(k)return K=K(g),k=J===""?"."+Ft(g,0):J,T(K)?(H="",k!=null&&(H=k.replace(At,"$&/")+"/"),nt(K,L,H,"",function(G){return G})):K!=null&&(gt(K)&&(K=yt(K,H+(K.key==null||g&&g.key===K.key?"":(""+K.key).replace(At,"$&/")+"/")+k)),L.push(K)),1;k=0;var I=J===""?".":J+":";if(T(g))for(var W=0;W<g.length;W++)J=g[W],m=I+Ft(J,W),k+=nt(J,L,H,m,K);else if(W=y(g),typeof W=="function")for(g=W.call(g),W=0;!(J=g.next()).done;)J=J.value,m=I+Ft(J,W++),k+=nt(J,L,H,m,K);else if(m==="object"){if(typeof g.then=="function")return nt(Kt(g),L,H,J,K);throw L=String(g),Error("Objects are not valid as a React child (found: "+(L==="[object Object]"?"object with keys {"+Object.keys(g).join(", ")+"}":L)+"). If you meant to render a collection of children, use an array instead.")}return k}function Y(g,L,H){if(g==null)return g;var J=[],K=0;return nt(g,J,"","",function(m){return L.call(H,m,K++)}),J}function N(g){if(g._status===-1){var L=g._result;L=L(),L.then(function(H){(g._status===0||g._status===-1)&&(g._status=1,g._result=H)},function(H){(g._status===0||g._status===-1)&&(g._status=2,g._result=H)}),g._status===-1&&(g._status=0,g._result=L)}if(g._status===1)return g._result.default;throw g._result}var w=typeof reportError=="function"?reportError:function(g){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var L=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof g=="object"&&g!==null&&typeof g.message=="string"?String(g.message):String(g),error:g});if(!window.dispatchEvent(L))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",g);return}console.error(g)},R={map:Y,forEach:function(g,L,H){Y(g,function(){L.apply(this,arguments)},H)},count:function(g){var L=0;return Y(g,function(){L++}),L},toArray:function(g){return Y(g,function(L){return L})||[]},only:function(g){if(!gt(g))throw Error("React.Children.only expected to receive a single React element child.");return g}};return react_production.Activity=h,react_production.Children=R,react_production.Component=x,react_production.Fragment=M,react_production.Profiler=E,react_production.PureComponent=Z,react_production.StrictMode=o,react_production.Suspense=F,react_production.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=$,react_production.__COMPILER_RUNTIME={__proto__:null,c:function(g){return $.H.useMemoCache(g)}},react_production.cache=function(g){return function(){return g.apply(null,arguments)}},react_production.cacheSignal=function(){return null},react_production.cloneElement=function(g,L,H){if(g==null)throw Error("The argument must be a React element, but you passed "+g+".");var J=A({},g.props),K=g.key;if(L!=null)for(m in L.key!==void 0&&(K=""+L.key),L)!rt.call(L,m)||m==="key"||m==="__self"||m==="__source"||m==="ref"&&L.ref===void 0||(J[m]=L[m]);var m=arguments.length-2;if(m===1)J.children=H;else if(1<m){for(var k=Array(m),I=0;I<m;I++)k[I]=arguments[I+2];J.children=k}return et(g.type,K,J)},react_production.createContext=function(g){return g={$$typeof:D,_currentValue:g,_currentValue2:g,_threadCount:0,Provider:null,Consumer:null},g.Provider=g,g.Consumer={$$typeof:O,_context:g},g},react_production.createElement=function(g,L,H){var J,K={},m=null;if(L!=null)for(J in L.key!==void 0&&(m=""+L.key),L)rt.call(L,J)&&J!=="key"&&J!=="__self"&&J!=="__source"&&(K[J]=L[J]);var k=arguments.length-2;if(k===1)K.children=H;else if(1<k){for(var I=Array(k),W=0;W<k;W++)I[W]=arguments[W+2];K.children=I}if(g&&g.defaultProps)for(J in k=g.defaultProps,k)K[J]===void 0&&(K[J]=k[J]);return et(g,m,K)},react_production.createRef=function(){return{current:null}},react_production.forwardRef=function(g){return{$$typeof:B,render:g}},react_production.isValidElement=gt,react_production.lazy=function(g){return{$$typeof:l,_payload:{_status:-1,_result:g},_init:N}},react_production.memo=function(g,L){return{$$typeof:d,type:g,compare:L===void 0?null:L}},react_production.startTransition=function(g){var L=$.T,H={};$.T=H;try{var J=g(),K=$.S;K!==null&&K(H,J),typeof J=="object"&&J!==null&&typeof J.then=="function"&&J.then(z,w)}catch(m){w(m)}finally{L!==null&&H.types!==null&&(L.types=H.types),$.T=L}},react_production.unstable_useCacheRefresh=function(){return $.H.useCacheRefresh()},react_production.use=function(g){return $.H.use(g)},react_production.useActionState=function(g,L,H){return $.H.useActionState(g,L,H)},react_production.useCallback=function(g,L){return $.H.useCallback(g,L)},react_production.useContext=function(g){return $.H.useContext(g)},react_production.useDebugValue=function(){},react_production.useDeferredValue=function(g,L){return $.H.useDeferredValue(g,L)},react_production.useEffect=function(g,L){return $.H.useEffect(g,L)},react_production.useEffectEvent=function(g){return $.H.useEffectEvent(g)},react_production.useId=function(){return $.H.useId()},react_production.useImperativeHandle=function(g,L,H){return $.H.useImperativeHandle(g,L,H)},react_production.useInsertionEffect=function(g,L){return $.H.useInsertionEffect(g,L)},react_production.useLayoutEffect=function(g,L){return $.H.useLayoutEffect(g,L)},react_production.useMemo=function(g,L){return $.H.useMemo(g,L)},react_production.useOptimistic=function(g,L){return $.H.useOptimistic(g,L)},react_production.useReducer=function(g,L,H){return $.H.useReducer(g,L,H)},react_production.useRef=function(g){return $.H.useRef(g)},react_production.useState=function(g){return $.H.useState(g)},react_production.useSyncExternalStore=function(g,L,H){return $.H.useSyncExternalStore(g,L,H)},react_production.useTransition=function(){return $.H.useTransition()},react_production.version="19.2.4",react_production}var hasRequiredReact;function requireReact(){return hasRequiredReact||(hasRequiredReact=1,react.exports=requireReact_production()),react.exports}var reactExports=requireReact();const React=getDefaultExportFromCjs(reactExports);var client={exports:{}},reactDomClient_production={},scheduler={exports:{}},scheduler_production={};var hasRequiredScheduler_production;function requireScheduler_production(){return hasRequiredScheduler_production||(hasRequiredScheduler_production=1,(function(_){function u(nt,Y){var N=nt.length;nt.push(Y);t:for(;0<N;){var w=N-1>>>1,R=nt[w];if(0<E(R,Y))nt[w]=Y,nt[N]=R,N=w;else break t}}function M(nt){return nt.length===0?null:nt[0]}function o(nt){if(nt.length===0)return null;var Y=nt[0],N=nt.pop();if(N!==Y){nt[0]=N;t:for(var w=0,R=nt.length,g=R>>>1;w<g;){var L=2*(w+1)-1,H=nt[L],J=L+1,K=nt[J];if(0>E(H,N))J<R&&0>E(K,H)?(nt[w]=K,nt[J]=N,w=J):(nt[w]=H,nt[L]=N,w=L);else if(J<R&&0>E(K,N))nt[w]=K,nt[J]=N,w=J;else break t}}return Y}function E(nt,Y){var N=nt.sortIndex-Y.sortIndex;return N!==0?N:nt.id-Y.id}if(_.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var O=performance;_.unstable_now=function(){return O.now()}}else{var D=Date,B=D.now();_.unstable_now=function(){return D.now()-B}}var F=[],d=[],l=1,h=null,b=3,y=!1,f=!1,A=!1,j=!1,x=typeof setTimeout=="function"?setTimeout:null,U=typeof clearTimeout=="function"?clearTimeout:null,Z=typeof setImmediate<"u"?setImmediate:null;function V(nt){for(var Y=M(d);Y!==null;){if(Y.callback===null)o(d);else if(Y.startTime<=nt)o(d),Y.sortIndex=Y.expirationTime,u(F,Y);else break;Y=M(d)}}function T(nt){if(A=!1,V(nt),!f)if(M(F)!==null)f=!0,z||(z=!0,kt());else{var Y=M(d);Y!==null&&Kt(T,Y.startTime-nt)}}var z=!1,$=-1,rt=5,et=-1;function yt(){return j?!0:!(_.unstable_now()-et<rt)}function gt(){if(j=!1,z){var nt=_.unstable_now();et=nt;var Y=!0;try{t:{f=!1,A&&(A=!1,U($),$=-1),y=!0;var N=b;try{e:{for(V(nt),h=M(F);h!==null&&!(h.expirationTime>nt&&yt());){var w=h.callback;if(typeof w=="function"){h.callback=null,b=h.priorityLevel;var R=w(h.expirationTime<=nt);if(nt=_.unstable_now(),typeof R=="function"){h.callback=R,V(nt),Y=!0;break e}h===M(F)&&o(F),V(nt)}else o(F);h=M(F)}if(h!==null)Y=!0;else{var g=M(d);g!==null&&Kt(T,g.startTime-nt),Y=!1}}break t}finally{h=null,b=N,y=!1}Y=void 0}}finally{Y?kt():z=!1}}}var kt;if(typeof Z=="function")kt=function(){Z(gt)};else if(typeof MessageChannel<"u"){var At=new MessageChannel,Ft=At.port2;At.port1.onmessage=gt,kt=function(){Ft.postMessage(null)}}else kt=function(){x(gt,0)};function Kt(nt,Y){$=x(function(){nt(_.unstable_now())},Y)}_.unstable_IdlePriority=5,_.unstable_ImmediatePriority=1,_.unstable_LowPriority=4,_.unstable_NormalPriority=3,_.unstable_Profiling=null,_.unstable_UserBlockingPriority=2,_.unstable_cancelCallback=function(nt){nt.callback=null},_.unstable_forceFrameRate=function(nt){0>nt||125<nt?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):rt=0<nt?Math.floor(1e3/nt):5},_.unstable_getCurrentPriorityLevel=function(){return b},_.unstable_next=function(nt){switch(b){case 1:case 2:case 3:var Y=3;break;default:Y=b}var N=b;b=Y;try{return nt()}finally{b=N}},_.unstable_requestPaint=function(){j=!0},_.unstable_runWithPriority=function(nt,Y){switch(nt){case 1:case 2:case 3:case 4:case 5:break;default:nt=3}var N=b;b=nt;try{return Y()}finally{b=N}},_.unstable_scheduleCallback=function(nt,Y,N){var w=_.unstable_now();switch(typeof N=="object"&&N!==null?(N=N.delay,N=typeof N=="number"&&0<N?w+N:w):N=w,nt){case 1:var R=-1;break;case 2:R=250;break;case 5:R=1073741823;break;case 4:R=1e4;break;default:R=5e3}return R=N+R,nt={id:l++,callback:Y,priorityLevel:nt,startTime:N,expirationTime:R,sortIndex:-1},N>w?(nt.sortIndex=N,u(d,nt),M(F)===null&&nt===M(d)&&(A?(U($),$=-1):A=!0,Kt(T,N-w))):(nt.sortIndex=R,u(F,nt),f||y||(f=!0,z||(z=!0,kt()))),nt},_.unstable_shouldYield=yt,_.unstable_wrapCallback=function(nt){var Y=b;return function(){var N=b;b=Y;try{return nt.apply(this,arguments)}finally{b=N}}}})(scheduler_production)),scheduler_production}var hasRequiredScheduler;function requireScheduler(){return hasRequiredScheduler||(hasRequiredScheduler=1,scheduler.exports=requireScheduler_production()),scheduler.exports}var reactDom={exports:{}},reactDom_production={};var hasRequiredReactDom_production;function requireReactDom_production(){if(hasRequiredReactDom_production)return reactDom_production;hasRequiredReactDom_production=1;var _=requireReact();function u(F){var d="https://react.dev/errors/"+F;if(1<arguments.length){d+="?args[]="+encodeURIComponent(arguments[1]);for(var l=2;l<arguments.length;l++)d+="&args[]="+encodeURIComponent(arguments[l])}return"Minified React error #"+F+"; visit "+d+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function M(){}var o={d:{f:M,r:function(){throw Error(u(522))},D:M,C:M,L:M,m:M,X:M,S:M,M},p:0,findDOMNode:null},E=Symbol.for("react.portal");function O(F,d,l){var h=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:E,key:h==null?null:""+h,children:F,containerInfo:d,implementation:l}}var D=_.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function B(F,d){if(F==="font")return"";if(typeof d=="string")return d==="use-credentials"?d:""}return reactDom_production.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=o,reactDom_production.createPortal=function(F,d){var l=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!d||d.nodeType!==1&&d.nodeType!==9&&d.nodeType!==11)throw Error(u(299));return O(F,d,null,l)},reactDom_production.flushSync=function(F){var d=D.T,l=o.p;try{if(D.T=null,o.p=2,F)return F()}finally{D.T=d,o.p=l,o.d.f()}},reactDom_production.preconnect=function(F,d){typeof F=="string"&&(d?(d=d.crossOrigin,d=typeof d=="string"?d==="use-credentials"?d:"":void 0):d=null,o.d.C(F,d))},reactDom_production.prefetchDNS=function(F){typeof F=="string"&&o.d.D(F)},reactDom_production.preinit=function(F,d){if(typeof F=="string"&&d&&typeof d.as=="string"){var l=d.as,h=B(l,d.crossOrigin),b=typeof d.integrity=="string"?d.integrity:void 0,y=typeof d.fetchPriority=="string"?d.fetchPriority:void 0;l==="style"?o.d.S(F,typeof d.precedence=="string"?d.precedence:void 0,{crossOrigin:h,integrity:b,fetchPriority:y}):l==="script"&&o.d.X(F,{crossOrigin:h,integrity:b,fetchPriority:y,nonce:typeof d.nonce=="string"?d.nonce:void 0})}},reactDom_production.preinitModule=function(F,d){if(typeof F=="string")if(typeof d=="object"&&d!==null){if(d.as==null||d.as==="script"){var l=B(d.as,d.crossOrigin);o.d.M(F,{crossOrigin:l,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0})}}else d==null&&o.d.M(F)},reactDom_production.preload=function(F,d){if(typeof F=="string"&&typeof d=="object"&&d!==null&&typeof d.as=="string"){var l=d.as,h=B(l,d.crossOrigin);o.d.L(F,l,{crossOrigin:h,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0,type:typeof d.type=="string"?d.type:void 0,fetchPriority:typeof d.fetchPriority=="string"?d.fetchPriority:void 0,referrerPolicy:typeof d.referrerPolicy=="string"?d.referrerPolicy:void 0,imageSrcSet:typeof d.imageSrcSet=="string"?d.imageSrcSet:void 0,imageSizes:typeof d.imageSizes=="string"?d.imageSizes:void 0,media:typeof d.media=="string"?d.media:void 0})}},reactDom_production.preloadModule=function(F,d){if(typeof F=="string")if(d){var l=B(d.as,d.crossOrigin);o.d.m(F,{as:typeof d.as=="string"&&d.as!=="script"?d.as:void 0,crossOrigin:l,integrity:typeof d.integrity=="string"?d.integrity:void 0})}else o.d.m(F)},reactDom_production.requestFormReset=function(F){o.d.r(F)},reactDom_production.unstable_batchedUpdates=function(F,d){return F(d)},reactDom_production.useFormState=function(F,d,l){return D.H.useFormState(F,d,l)},reactDom_production.useFormStatus=function(){return D.H.useHostTransitionStatus()},reactDom_production.version="19.2.4",reactDom_production}var hasRequiredReactDom;function requireReactDom(){if(hasRequiredReactDom)return reactDom.exports;hasRequiredReactDom=1;function _(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(_)}catch(u){console.error(u)}}return _(),reactDom.exports=requireReactDom_production(),reactDom.exports}var hasRequiredReactDomClient_production;function requireReactDomClient_production(){if(hasRequiredReactDomClient_production)return reactDomClient_production;hasRequiredReactDomClient_production=1;var _=requireScheduler(),u=requireReact(),M=requireReactDom();function o(t){var e="https://react.dev/errors/"+t;if(1<arguments.length){e+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function E(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function O(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,(e.flags&4098)!==0&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function D(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function B(t){if(t.tag===31){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function F(t){if(O(t)!==t)throw Error(o(188))}function d(t){var e=t.alternate;if(!e){if(e=O(t),e===null)throw Error(o(188));return e!==t?null:t}for(var n=t,i=e;;){var a=n.return;if(a===null)break;var r=a.alternate;if(r===null){if(i=a.return,i!==null){n=i;continue}break}if(a.child===r.child){for(r=a.child;r;){if(r===n)return F(a),t;if(r===i)return F(a),e;r=r.sibling}throw Error(o(188))}if(n.return!==i.return)n=a,i=r;else{for(var S=!1,q=a.child;q;){if(q===n){S=!0,n=a,i=r;break}if(q===i){S=!0,i=a,n=r;break}q=q.sibling}if(!S){for(q=r.child;q;){if(q===n){S=!0,n=r,i=a;break}if(q===i){S=!0,i=r,n=a;break}q=q.sibling}if(!S)throw Error(o(189))}}if(n.alternate!==i)throw Error(o(190))}if(n.tag!==3)throw Error(o(188));return n.stateNode.current===n?t:e}function l(t){var e=t.tag;if(e===5||e===26||e===27||e===6)return t;for(t=t.child;t!==null;){if(e=l(t),e!==null)return e;t=t.sibling}return null}var h=Object.assign,b=Symbol.for("react.element"),y=Symbol.for("react.transitional.element"),f=Symbol.for("react.portal"),A=Symbol.for("react.fragment"),j=Symbol.for("react.strict_mode"),x=Symbol.for("react.profiler"),U=Symbol.for("react.consumer"),Z=Symbol.for("react.context"),V=Symbol.for("react.forward_ref"),T=Symbol.for("react.suspense"),z=Symbol.for("react.suspense_list"),$=Symbol.for("react.memo"),rt=Symbol.for("react.lazy"),et=Symbol.for("react.activity"),yt=Symbol.for("react.memo_cache_sentinel"),gt=Symbol.iterator;function kt(t){return t===null||typeof t!="object"?null:(t=gt&&t[gt]||t["@@iterator"],typeof t=="function"?t:null)}var At=Symbol.for("react.client.reference");function Ft(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===At?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case A:return"Fragment";case x:return"Profiler";case j:return"StrictMode";case T:return"Suspense";case z:return"SuspenseList";case et:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case f:return"Portal";case Z:return t.displayName||"Context";case U:return(t._context.displayName||"Context")+".Consumer";case V:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case $:return e=t.displayName||null,e!==null?e:Ft(t.type)||"Memo";case rt:e=t._payload,t=t._init;try{return Ft(t(e))}catch{}}return null}var Kt=Array.isArray,nt=u.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Y=M.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,N={pending:!1,data:null,method:null,action:null},w=[],R=-1;function g(t){return{current:t}}function L(t){0>R||(t.current=w[R],w[R]=null,R--)}function H(t,e){R++,w[R]=t.current,t.current=e}var J=g(null),K=g(null),m=g(null),k=g(null);function I(t,e){switch(H(m,e),H(K,t),H(J,null),e.nodeType){case 9:case 11:t=(t=e.documentElement)&&(t=t.namespaceURI)?kh(t):0;break;default:if(t=e.tagName,e=e.namespaceURI)e=kh(e),t=Dh(e,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}L(J),H(J,t)}function W(){L(J),L(K),L(m)}function G(t){t.memoizedState!==null&&H(k,t);var e=J.current,n=Dh(e,t.type);e!==n&&(H(K,t),H(J,n))}function it(t){K.current===t&&(L(J),L(K)),k.current===t&&(L(k),Jr._currentValue=N)}var at,Ct;function Yt(t){if(at===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);at=e&&e[1]||"",Ct=-1<n.stack.indexOf(`
    at`)?" (<anonymous>)":-1<n.stack.indexOf("@")?"@unknown:0:0":""}return`
`+at+t+Ct}var Rt=!1;function Dt(t,e){if(!t||Rt)return"";Rt=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var i={DetermineComponentFrameRoot:function(){try{if(e){var Bt=function(){throw Error()};if(Object.defineProperty(Bt.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Bt,[])}catch(Mt){var jt=Mt}Reflect.construct(t,[],Bt)}else{try{Bt.call()}catch(Mt){jt=Mt}t.call(Bt.prototype)}}else{try{throw Error()}catch(Mt){jt=Mt}(Bt=t())&&typeof Bt.catch=="function"&&Bt.catch(function(){})}}catch(Mt){if(Mt&&jt&&typeof Mt.stack=="string")return[Mt.stack,jt.stack]}return[null,null]}};i.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var a=Object.getOwnPropertyDescriptor(i.DetermineComponentFrameRoot,"name");a&&a.configurable&&Object.defineProperty(i.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var r=i.DetermineComponentFrameRoot(),S=r[0],q=r[1];if(S&&q){var ot=S.split(`
`),wt=q.split(`
`);for(a=i=0;i<ot.length&&!ot[i].includes("DetermineComponentFrameRoot");)i++;for(;a<wt.length&&!wt[a].includes("DetermineComponentFrameRoot");)a++;if(i===ot.length||a===wt.length)for(i=ot.length-1,a=wt.length-1;1<=i&&0<=a&&ot[i]!==wt[a];)a--;for(;1<=i&&0<=a;i--,a--)if(ot[i]!==wt[a]){if(i!==1||a!==1)do if(i--,a--,0>a||ot[i]!==wt[a]){var Ot=`
`+ot[i].replace(" at new "," at ");return t.displayName&&Ot.includes("<anonymous>")&&(Ot=Ot.replace("<anonymous>",t.displayName)),Ot}while(1<=i&&0<=a);break}}}finally{Rt=!1,Error.prepareStackTrace=n}return(n=t?t.displayName||t.name:"")?Yt(n):""}function Pt(t,e){switch(t.tag){case 26:case 27:case 5:return Yt(t.type);case 16:return Yt("Lazy");case 13:return t.child!==e&&e!==null?Yt("Suspense Fallback"):Yt("Suspense");case 19:return Yt("SuspenseList");case 0:case 15:return Dt(t.type,!1);case 11:return Dt(t.type.render,!1);case 1:return Dt(t.type,!0);case 31:return Yt("Activity");default:return""}}function Lt(t){try{var e="",n=null;do e+=Pt(t,n),n=t,t=t.return;while(t);return e}catch(i){return`
Error generating stack: `+i.message+`
`+i.stack}}var Ut=Object.prototype.hasOwnProperty,Qt=_.unstable_scheduleCallback,$t=_.unstable_cancelCallback,se=_.unstable_shouldYield,le=_.unstable_requestPaint,oe=_.unstable_now,_e=_.unstable_getCurrentPriorityLevel,je=_.unstable_ImmediatePriority,Ue=_.unstable_UserBlockingPriority,Cn=_.unstable_NormalPriority,We=_.unstable_LowPriority,En=_.unstable_IdlePriority,xi=_.log,ui=_.unstable_setDisableYieldValue,Qn=null,It=null;function vt(t){if(typeof xi=="function"&&ui(t),It&&typeof It.setStrictMode=="function")try{It.setStrictMode(Qn,t)}catch{}}var st=Math.clz32?Math.clz32:Ye,Jt=Math.log,me=Math.LN2;function Ye(t){return t>>>=0,t===0?32:31-(Jt(t)/me|0)|0}var Xt=256,jn=262144,Nn=4194304;function cn(t){var e=t&42;if(e!==0)return e;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return t&261888;case 262144:case 524288:case 1048576:case 2097152:return t&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function Qe(t,e,n){var i=t.pendingLanes;if(i===0)return 0;var a=0,r=t.suspendedLanes,S=t.pingedLanes;t=t.warmLanes;var q=i&134217727;return q!==0?(i=q&~r,i!==0?a=cn(i):(S&=q,S!==0?a=cn(S):n||(n=q&~t,n!==0&&(a=cn(n))))):(q=i&~r,q!==0?a=cn(q):S!==0?a=cn(S):n||(n=i&~t,n!==0&&(a=cn(n)))),a===0?0:e!==0&&e!==a&&(e&r)===0&&(r=a&-a,n=e&-e,r>=n||r===32&&(n&4194048)!==0)?e:a}function An(t,e){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&e)===0}function Zn(t,e){switch(t){case 1:case 2:case 4:case 8:case 64:return e+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ni(){var t=Nn;return Nn<<=1,(Nn&62914560)===0&&(Nn=4194304),t}function ke(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function gn(t,e){t.pendingLanes|=e,e!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function vi(t,e,n,i,a,r){var S=t.pendingLanes;t.pendingLanes=n,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=n,t.entangledLanes&=n,t.errorRecoveryDisabledLanes&=n,t.shellSuspendCounter=0;var q=t.entanglements,ot=t.expirationTimes,wt=t.hiddenUpdates;for(n=S&~n;0<n;){var Ot=31-st(n),Bt=1<<Ot;q[Ot]=0,ot[Ot]=-1;var jt=wt[Ot];if(jt!==null)for(wt[Ot]=null,Ot=0;Ot<jt.length;Ot++){var Mt=jt[Ot];Mt!==null&&(Mt.lane&=-536870913)}n&=~Bt}i!==0&&di(t,i,0),r!==0&&a===0&&t.tag!==0&&(t.suspendedLanes|=r&~(S&~e))}function di(t,e,n){t.pendingLanes|=e,t.suspendedLanes&=~e;var i=31-st(e);t.entangledLanes|=e,t.entanglements[i]=t.entanglements[i]|1073741824|n&261930}function Re(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var i=31-st(n),a=1<<i;a&e|t[i]&e&&(t[i]|=e),n&=~a}}function Ie(t,e){var n=e&-e;return n=(n&42)!==0?1:un(n),(n&(t.suspendedLanes|e))!==0?0:n}function un(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function On(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function hi(){var t=Y.p;return t!==0?t:(t=window.event,t===void 0?32:ef(t.type))}function Us(t,e){var n=Y.p;try{return Y.p=t,e()}finally{Y.p=n}}var bi=Math.random().toString(36).slice(2),qe="__reactFiber$"+bi,$e="__reactProps$"+bi,Mn="__reactContainer$"+bi,os="__reactEvents$"+bi,ml="__reactListeners$"+bi,_i="__reactHandles$"+bi,sr="__reactResources$"+bi,Un="__reactMarker$"+bi;function fa(t){delete t[qe],delete t[$e],delete t[os],delete t[ml],delete t[_i]}function Ei(t){var e=t[qe];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Mn]||n[qe]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Ih(t);t!==null;){if(n=t[qe])return n;t=Ih(t)}return e}t=n,n=t.parentNode}return null}function Oe(t){if(t=t[qe]||t[Mn]){var e=t.tag;if(e===5||e===6||e===13||e===31||e===26||e===27||e===3)return t}return null}function qn(t){var e=t.tag;if(e===5||e===26||e===27||e===6)return t.stateNode;throw Error(o(33))}function Sn(t){var e=t[sr];return e||(e=t[sr]={hoistableStyles:new Map,hoistableScripts:new Map}),e}function tn(t){t[Un]=!0}var Oi=new Set,qs={};function fi(t,e){Ai(t,e),Ai(t+"Capture",e)}function Ai(t,e){for(qs[t]=e,t=0;t<e.length;t++)Oi.add(e[t])}var Li=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),ar={},Hs={};function no(t){return Ut.call(Hs,t)?!0:Ut.call(ar,t)?!1:Li.test(t)?Hs[t]=!0:(ar[t]=!0,!1)}function pe(t,e,n){if(no(e))if(n===null)t.removeAttribute(e);else{switch(typeof n){case"undefined":case"function":case"symbol":t.removeAttribute(e);return;case"boolean":var i=e.toLowerCase().slice(0,5);if(i!=="data-"&&i!=="aria-"){t.removeAttribute(e);return}}t.setAttribute(e,""+n)}}function Gs(t,e,n){if(n===null)t.removeAttribute(e);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(e);return}t.setAttribute(e,""+n)}}function Jn(t,e,n,i){if(i===null)t.removeAttribute(n);else{switch(typeof i){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(n);return}t.setAttributeNS(e,n,""+i)}}function yn(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function ls(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function io(t,e,n){var i=Object.getOwnPropertyDescriptor(t.constructor.prototype,e);if(!t.hasOwnProperty(e)&&typeof i<"u"&&typeof i.get=="function"&&typeof i.set=="function"){var a=i.get,r=i.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return a.call(this)},set:function(S){n=""+S,r.call(this,S)}}),Object.defineProperty(t,e,{enumerable:i.enumerable}),{getValue:function(){return n},setValue:function(S){n=""+S},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function pa(t){if(!t._valueTracker){var e=ls(t)?"checked":"value";t._valueTracker=io(t,e,""+t[e])}}function rr(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),i="";return t&&(i=ls(t)?t.checked?"true":"false":t.value),t=i,t!==n?(e.setValue(t),!0):!1}function Te(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var Ks=/[\n"\\]/g;function hn(t){return t.replace(Ks,function(e){return"\\"+e.charCodeAt(0).toString(16)+" "})}function Si(t,e,n,i,a,r,S,q){t.name="",S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"?t.type=S:t.removeAttribute("type"),e!=null?S==="number"?(e===0&&t.value===""||t.value!=e)&&(t.value=""+yn(e)):t.value!==""+yn(e)&&(t.value=""+yn(e)):S!=="submit"&&S!=="reset"||t.removeAttribute("value"),e!=null?Xs(t,S,yn(e)):n!=null?Xs(t,S,yn(n)):i!=null&&t.removeAttribute("value"),a==null&&r!=null&&(t.defaultChecked=!!r),a!=null&&(t.checked=a&&typeof a!="function"&&typeof a!="symbol"),q!=null&&typeof q!="function"&&typeof q!="symbol"&&typeof q!="boolean"?t.name=""+yn(q):t.removeAttribute("name")}function ma(t,e,n,i,a,r,S,q){if(r!=null&&typeof r!="function"&&typeof r!="symbol"&&typeof r!="boolean"&&(t.type=r),e!=null||n!=null){if(!(r!=="submit"&&r!=="reset"||e!=null)){pa(t);return}n=n!=null?""+yn(n):"",e=e!=null?""+yn(e):n,q||e===t.value||(t.value=e),t.defaultValue=e}i=i??a,i=typeof i!="function"&&typeof i!="symbol"&&!!i,t.checked=q?t.checked:!!i,t.defaultChecked=!!i,S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"&&(t.name=S),pa(t)}function Xs(t,e,n){e==="number"&&Te(t.ownerDocument)===t||t.defaultValue===""+n||(t.defaultValue=""+n)}function pi(t,e,n,i){if(t=t.options,e){e={};for(var a=0;a<n.length;a++)e["$"+n[a]]=!0;for(n=0;n<t.length;n++)a=e.hasOwnProperty("$"+t[n].value),t[n].selected!==a&&(t[n].selected=a),a&&i&&(t[n].defaultSelected=!0)}else{for(n=""+yn(n),e=null,a=0;a<t.length;a++){if(t[a].value===n){t[a].selected=!0,i&&(t[a].defaultSelected=!0);return}e!==null||t[a].disabled||(e=t[a])}e!==null&&(e.selected=!0)}}function or(t,e,n){if(e!=null&&(e=""+yn(e),e!==t.value&&(t.value=e),n==null)){t.defaultValue!==e&&(t.defaultValue=e);return}t.defaultValue=n!=null?""+yn(n):""}function Ys(t,e,n,i){if(e==null){if(i!=null){if(n!=null)throw Error(o(92));if(Kt(i)){if(1<i.length)throw Error(o(93));i=i[0]}n=i}n==null&&(n=""),e=n}n=yn(e),t.defaultValue=n,i=t.textContent,i===n&&i!==""&&i!==null&&(t.value=i),pa(t)}function Pi(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var gl=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Ee(t,e,n){var i=e.indexOf("--")===0;n==null||typeof n=="boolean"||n===""?i?t.setProperty(e,""):e==="float"?t.cssFloat="":t[e]="":i?t.setProperty(e,n):typeof n!="number"||n===0||gl.has(e)?e==="float"?t.cssFloat=n:t[e]=(""+n).trim():t[e]=n+"px"}function lr(t,e,n){if(e!=null&&typeof e!="object")throw Error(o(62));if(t=t.style,n!=null){for(var i in n)!n.hasOwnProperty(i)||e!=null&&e.hasOwnProperty(i)||(i.indexOf("--")===0?t.setProperty(i,""):i==="float"?t.cssFloat="":t[i]="");for(var a in e)i=e[a],e.hasOwnProperty(a)&&n[a]!==i&&Ee(t,a,i)}else for(var r in e)e.hasOwnProperty(r)&&Ee(t,r,e[r])}function cr(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var yl=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),kn=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function mi(t){return kn.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}function Ln(){}var $n=null;function ga(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Fi=null,He=null;function Hn(t){var e=Oe(t);if(e&&(t=e.stateNode)){var n=t[$e]||null;t:switch(t=e.stateNode,e.type){case"input":if(Si(t,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll('input[name="'+hn(""+e)+'"][type="radio"]'),e=0;e<n.length;e++){var i=n[e];if(i!==t&&i.form===t.form){var a=i[$e]||null;if(!a)throw Error(o(90));Si(i,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name)}}for(e=0;e<n.length;e++)i=n[e],i.form===t.form&&rr(i)}break t;case"textarea":or(t,n.value,n.defaultValue);break t;case"select":e=n.value,e!=null&&pi(t,!!n.multiple,e,!1)}}}var zi=!1;function cs(t,e,n){if(zi)return t(e,n);zi=!0;try{var i=t(e);return i}finally{if(zi=!1,(Fi!==null||He!==null)&&(Yo(),Fi&&(e=Fi,t=He,He=Fi=null,Hn(e),t)))for(e=0;e<t.length;e++)Hn(t[e])}}function Ii(t,e){var n=t.stateNode;if(n===null)return null;var i=n[$e]||null;if(i===null)return null;n=i[e];t:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(t=t.type,i=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!i;break t;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(o(231,e,typeof n));return n}var fn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ur=!1;if(fn)try{var wn={};Object.defineProperty(wn,"passive",{get:function(){ur=!0}}),window.addEventListener("test",wn,wn),window.removeEventListener("test",wn,wn)}catch{ur=!1}var ti=null,ya=null,us=null;function ds(){if(us)return us;var t,e=ya,n=e.length,i,a="value"in ti?ti.value:ti.textContent,r=a.length;for(t=0;t<n&&e[t]===a[t];t++);var S=n-t;for(i=1;i<=S&&e[n-i]===a[r-i];i++);return us=a.slice(t,1<i?1-i:void 0)}function hs(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Vs(){return!0}function so(){return!1}function sn(t){function e(n,i,a,r,S){this._reactName=n,this._targetInst=a,this.type=i,this.nativeEvent=r,this.target=S,this.currentTarget=null;for(var q in t)t.hasOwnProperty(q)&&(n=t[q],this[q]=n?n(r):r[q]);return this.isDefaultPrevented=(r.defaultPrevented!=null?r.defaultPrevented:r.returnValue===!1)?Vs:so,this.isPropagationStopped=so,this}return h(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Vs)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Vs)},persist:function(){},isPersistent:Vs}),e}var Bi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},xa=sn(Bi),wi=h({},Bi,{view:0,detail:0}),va=sn(wi),Ws,dr,Qs,ba=h({},wi,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ui,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Qs&&(Qs&&t.type==="mousemove"?(Ws=t.screenX-Qs.screenX,dr=t.screenY-Qs.screenY):dr=Ws=0,Qs=t),Ws)},movementY:function(t){return"movementY"in t?t.movementY:dr}}),_a=sn(ba),hr=h({},ba,{dataTransfer:0}),ao=sn(hr),Ea=h({},wi,{relatedTarget:0}),fs=sn(Ea),Aa=h({},Bi,{animationName:0,elapsedTime:0,pseudoElement:0}),ro=sn(Aa),xl=h({},Bi,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),ps=sn(xl),fr=h({},Bi,{data:0}),Sa=sn(fr),pr={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},mr={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},pn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Zs(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=pn[t])?!!e[t]:!1}function Ui(){return Zs}var oo=h({},wi,{key:function(t){if(t.key){var e=pr[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=hs(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?mr[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ui,charCode:function(t){return t.type==="keypress"?hs(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?hs(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),wa=sn(oo),lo=h({},ba,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),gr=sn(lo),Ra=h({},wi,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ui}),yr=sn(Ra),qi=h({},Bi,{propertyName:0,elapsedTime:0,pseudoElement:0}),xr=sn(qi),vr=h({},ba,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Ta=sn(vr),br=h({},Bi,{newState:0,oldState:0}),co=sn(br),vl=[9,13,27,32],Js=fn&&"CompositionEvent"in window,Ri=null;fn&&"documentMode"in document&&(Ri=document.documentMode);var bl=fn&&"TextEvent"in window&&!Ri,Ca=fn&&(!Js||Ri&&8<Ri&&11>=Ri),ja=" ",uo=!1;function _r(t,e){switch(t){case"keyup":return vl.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ho(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Hi=!1;function fo(t,e){switch(t){case"compositionend":return ho(e);case"keypress":return e.which!==32?null:(uo=!0,ja);case"textInput":return t=e.data,t===ja&&uo?null:t;default:return null}}function _l(t,e){if(Hi)return t==="compositionend"||!Js&&_r(t,e)?(t=ds(),us=ya=ti=null,Hi=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Ca&&e.locale!=="ko"?null:e.data;default:return null}}var po={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ma(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!po[t.type]:e==="textarea"}function Er(t,e,n,i){Fi?He?He.push(i):He=[i]:Fi=i,e=tl(e,"onChange"),0<e.length&&(n=new xa("onChange","change",null,n,i),t.push({event:n,listeners:e}))}var ms=null,$s=null;function El(t){wh(t,0)}function ka(t){var e=qn(t);if(rr(e))return t}function ta(t,e){if(t==="change")return e}var ei=!1;if(fn){var Ge;if(fn){var gs="oninput"in document;if(!gs){var Gi=document.createElement("div");Gi.setAttribute("oninput","return;"),gs=typeof Gi.oninput=="function"}Ge=gs}else Ge=!1;ei=Ge&&(!document.documentMode||9<document.documentMode)}function mo(){ms&&(ms.detachEvent("onpropertychange",Da),$s=ms=null)}function Da(t){if(t.propertyName==="value"&&ka($s)){var e=[];Er(e,$s,t,ga(t)),cs(El,e)}}function go(t,e,n){t==="focusin"?(mo(),ms=e,$s=n,ms.attachEvent("onpropertychange",Da)):t==="focusout"&&mo()}function Ki(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return ka($s)}function Ar(t,e){if(t==="click")return ka(e)}function ys(t,e){if(t==="input"||t==="change")return ka(e)}function Ti(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Rn=typeof Object.is=="function"?Object.is:Ti;function s(t,e){if(Rn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),i=Object.keys(e);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var a=n[i];if(!Ut.call(e,a)||!Rn(t[a],e[a]))return!1}return!0}function c(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function p(t,e){var n=c(t);t=0;for(var i;n;){if(n.nodeType===3){if(i=t+n.textContent.length,t<=e&&i>=e)return{node:n,offset:e-t};t=i}t:{for(;n;){if(n.nextSibling){n=n.nextSibling;break t}n=n.parentNode}n=void 0}n=c(n)}}function v(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?v(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function C(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var e=Te(t.document);e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Te(t.document)}return e}function P(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}var Q=fn&&"documentMode"in document&&11>=document.documentMode,tt=null,ct=null,bt=null,ut=!1;function lt(t,e,n){var i=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;ut||tt==null||tt!==Te(i)||(i=tt,"selectionStart"in i&&P(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),bt&&s(bt,i)||(bt=i,i=tl(ct,"onSelect"),0<i.length&&(e=new xa("onSelect","select",null,e,n),t.push({event:e,listeners:i}),e.target=tt)))}function ft(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var mt={animationend:ft("Animation","AnimationEnd"),animationiteration:ft("Animation","AnimationIteration"),animationstart:ft("Animation","AnimationStart"),transitionrun:ft("Transition","TransitionRun"),transitionstart:ft("Transition","TransitionStart"),transitioncancel:ft("Transition","TransitionCancel"),transitionend:ft("Transition","TransitionEnd")},dt={},ht={};fn&&(ht=document.createElement("div").style,"AnimationEvent"in window||(delete mt.animationend.animation,delete mt.animationiteration.animation,delete mt.animationstart.animation),"TransitionEvent"in window||delete mt.transitionend.transition);function Et(t){if(dt[t])return dt[t];if(!mt[t])return t;var e=mt[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in ht)return dt[t]=e[n];return t}var Tt=Et("animationend"),_t=Et("animationiteration"),Nt=Et("animationstart"),qt=Et("transitionrun"),Vt=Et("transitionstart"),Wt=Et("transitioncancel"),Ht=Et("transitionend"),te=new Map,Zt="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Zt.push("scrollEnd");function Gt(t,e){te.set(t,e),fi(e,[t])}var ee=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var e=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(e))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)},ue=[],ge=0,ae=0;function de(){for(var t=ge,e=ae=ge=0;e<t;){var n=ue[e];ue[e++]=null;var i=ue[e];ue[e++]=null;var a=ue[e];ue[e++]=null;var r=ue[e];if(ue[e++]=null,i!==null&&a!==null){var S=i.pending;S===null?a.next=a:(a.next=S.next,S.next=a),i.pending=a}r!==0&&Ci(n,a,r)}}function Le(t,e,n,i){ue[ge++]=t,ue[ge++]=e,ue[ge++]=n,ue[ge++]=i,ae|=i,t.lanes|=i,t=t.alternate,t!==null&&(t.lanes|=i)}function Tn(t,e,n,i){return Le(t,e,n,i),xs(t)}function Me(t,e){return Le(t,null,null,e),xs(t)}function Ci(t,e,n){t.lanes|=n;var i=t.alternate;i!==null&&(i.lanes|=n);for(var a=!1,r=t.return;r!==null;)r.childLanes|=n,i=r.alternate,i!==null&&(i.childLanes|=n),r.tag===22&&(t=r.stateNode,t===null||t._visibility&1||(a=!0)),t=r,r=r.return;return t.tag===3?(r=t.stateNode,a&&e!==null&&(a=31-st(n),t=r.hiddenUpdates,i=t[a],i===null?t[a]=[e]:i.push(e),e.lane=n|536870912),r):null}function xs(t){if(50<Kr)throw Kr=0,kc=null,Error(o(185));for(var e=t.return;e!==null;)t=e,e=t.return;return t.tag===3?t.stateNode:null}var Na={};function cf(t,e,n,i){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Gn(t,e,n,i){return new cf(t,e,n,i)}function Al(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Xi(t,e){var n=t.alternate;return n===null?(n=Gn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&65011712,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n.refCleanup=t.refCleanup,n}function ou(t,e){t.flags&=65011714;var n=t.alternate;return n===null?(t.childLanes=0,t.lanes=e,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=n.childLanes,t.lanes=n.lanes,t.child=n.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=n.memoizedProps,t.memoizedState=n.memoizedState,t.updateQueue=n.updateQueue,t.type=n.type,e=n.dependencies,t.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),t}function yo(t,e,n,i,a,r){var S=0;if(i=t,typeof t=="function")Al(t)&&(S=1);else if(typeof t=="string")S=pp(t,n,J.current)?26:t==="html"||t==="head"||t==="body"?27:5;else t:switch(t){case et:return t=Gn(31,n,e,a),t.elementType=et,t.lanes=r,t;case A:return ea(n.children,a,r,e);case j:S=8,a|=24;break;case x:return t=Gn(12,n,e,a|2),t.elementType=x,t.lanes=r,t;case T:return t=Gn(13,n,e,a),t.elementType=T,t.lanes=r,t;case z:return t=Gn(19,n,e,a),t.elementType=z,t.lanes=r,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Z:S=10;break t;case U:S=9;break t;case V:S=11;break t;case $:S=14;break t;case rt:S=16,i=null;break t}S=29,n=Error(o(130,t===null?"null":typeof t,"")),i=null}return e=Gn(S,n,e,a),e.elementType=t,e.type=i,e.lanes=r,e}function ea(t,e,n,i){return t=Gn(7,t,i,e),t.lanes=n,t}function Sl(t,e,n){return t=Gn(6,t,null,e),t.lanes=n,t}function lu(t){var e=Gn(18,null,null,0);return e.stateNode=t,e}function wl(t,e,n){return e=Gn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}var cu=new WeakMap;function ni(t,e){if(typeof t=="object"&&t!==null){var n=cu.get(t);return n!==void 0?n:(e={value:t,source:e,stack:Lt(e)},cu.set(t,e),e)}return{value:t,source:e,stack:Lt(e)}}var Oa=[],La=0,xo=null,Sr=0,ii=[],si=0,vs=null,ji=1,Mi="";function Yi(t,e){Oa[La++]=Sr,Oa[La++]=xo,xo=t,Sr=e}function uu(t,e,n){ii[si++]=ji,ii[si++]=Mi,ii[si++]=vs,vs=t;var i=ji;t=Mi;var a=32-st(i)-1;i&=~(1<<a),n+=1;var r=32-st(e)+a;if(30<r){var S=a-a%5;r=(i&(1<<S)-1).toString(32),i>>=S,a-=S,ji=1<<32-st(e)+a|n<<a|i,Mi=r+t}else ji=1<<r|n<<a|i,Mi=t}function Rl(t){t.return!==null&&(Yi(t,1),uu(t,1,0))}function Tl(t){for(;t===xo;)xo=Oa[--La],Oa[La]=null,Sr=Oa[--La],Oa[La]=null;for(;t===vs;)vs=ii[--si],ii[si]=null,Mi=ii[--si],ii[si]=null,ji=ii[--si],ii[si]=null}function du(t,e){ii[si++]=ji,ii[si++]=Mi,ii[si++]=vs,ji=e.id,Mi=e.overflow,vs=t}var xn=null,Ke=null,Ae=!1,bs=null,ri=!1,Cl=Error(o(519));function _s(t){var e=Error(o(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw wr(ni(e,t)),Cl}function hu(t){var e=t.stateNode,n=t.type,i=t.memoizedProps;switch(e[qe]=t,e[$e]=i,n){case"dialog":xe("cancel",e),xe("close",e);break;case"iframe":case"object":case"embed":xe("load",e);break;case"video":case"audio":for(n=0;n<Yr.length;n++)xe(Yr[n],e);break;case"source":xe("error",e);break;case"img":case"image":case"link":xe("error",e),xe("load",e);break;case"details":xe("toggle",e);break;case"input":xe("invalid",e),ma(e,i.value,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name,!0);break;case"select":xe("invalid",e);break;case"textarea":xe("invalid",e),Ys(e,i.value,i.defaultValue,i.children)}n=i.children,typeof n!="string"&&typeof n!="number"&&typeof n!="bigint"||e.textContent===""+n||i.suppressHydrationWarning===!0||jh(e.textContent,n)?(i.popover!=null&&(xe("beforetoggle",e),xe("toggle",e)),i.onScroll!=null&&xe("scroll",e),i.onScrollEnd!=null&&xe("scrollend",e),i.onClick!=null&&(e.onclick=Ln),e=!0):e=!1,e||_s(t,!0)}function fu(t){for(xn=t.return;xn;)switch(xn.tag){case 5:case 31:case 13:ri=!1;return;case 27:case 3:ri=!0;return;default:xn=xn.return}}function Pa(t){if(t!==xn)return!1;if(!Ae)return fu(t),Ae=!0,!1;var e=t.tag,n;if((n=e!==3&&e!==27)&&((n=e===5)&&(n=t.type,n=!(n!=="form"&&n!=="button")||Xc(t.type,t.memoizedProps)),n=!n),n&&Ke&&_s(t),fu(t),e===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(o(317));Ke=zh(t)}else if(e===31){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(o(317));Ke=zh(t)}else e===27?(e=Ke,Ls(t.type)?(t=Zc,Zc=null,Ke=t):Ke=e):Ke=xn?li(t.stateNode.nextSibling):null;return!0}function na(){Ke=xn=null,Ae=!1}function jl(){var t=bs;return t!==null&&(In===null?In=t:In.push.apply(In,t),bs=null),t}function wr(t){bs===null?bs=[t]:bs.push(t)}var Ml=g(null),ia=null,Vi=null;function Es(t,e,n){H(Ml,e._currentValue),e._currentValue=n}function Wi(t){t._currentValue=Ml.current,L(Ml)}function kl(t,e,n){for(;t!==null;){var i=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,i!==null&&(i.childLanes|=e)):i!==null&&(i.childLanes&e)!==e&&(i.childLanes|=e),t===n)break;t=t.return}}function Dl(t,e,n,i){var a=t.child;for(a!==null&&(a.return=t);a!==null;){var r=a.dependencies;if(r!==null){var S=a.child;r=r.firstContext;t:for(;r!==null;){var q=r;r=a;for(var ot=0;ot<e.length;ot++)if(q.context===e[ot]){r.lanes|=n,q=r.alternate,q!==null&&(q.lanes|=n),kl(r.return,n,t),i||(S=null);break t}r=q.next}}else if(a.tag===18){if(S=a.return,S===null)throw Error(o(341));S.lanes|=n,r=S.alternate,r!==null&&(r.lanes|=n),kl(S,n,t),S=null}else S=a.child;if(S!==null)S.return=a;else for(S=a;S!==null;){if(S===t){S=null;break}if(a=S.sibling,a!==null){a.return=S.return,S=a;break}S=S.return}a=S}}function Fa(t,e,n,i){t=null;for(var a=e,r=!1;a!==null;){if(!r){if((a.flags&524288)!==0)r=!0;else if((a.flags&262144)!==0)break}if(a.tag===10){var S=a.alternate;if(S===null)throw Error(o(387));if(S=S.memoizedProps,S!==null){var q=a.type;Rn(a.pendingProps.value,S.value)||(t!==null?t.push(q):t=[q])}}else if(a===k.current){if(S=a.alternate,S===null)throw Error(o(387));S.memoizedState.memoizedState!==a.memoizedState.memoizedState&&(t!==null?t.push(Jr):t=[Jr])}a=a.return}t!==null&&Dl(e,t,n,i),e.flags|=262144}function vo(t){for(t=t.firstContext;t!==null;){if(!Rn(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function sa(t){ia=t,Vi=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function vn(t){return pu(ia,t)}function bo(t,e){return ia===null&&sa(t),pu(t,e)}function pu(t,e){var n=e._currentValue;if(e={context:e,memoizedValue:n,next:null},Vi===null){if(t===null)throw Error(o(308));Vi=e,t.dependencies={lanes:0,firstContext:e},t.flags|=524288}else Vi=Vi.next=e;return n}var uf=typeof AbortController<"u"?AbortController:function(){var t=[],e=this.signal={aborted:!1,addEventListener:function(n,i){t.push(i)}};this.abort=function(){e.aborted=!0,t.forEach(function(n){return n()})}},df=_.unstable_scheduleCallback,hf=_.unstable_NormalPriority,an={$$typeof:Z,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Nl(){return{controller:new uf,data:new Map,refCount:0}}function Rr(t){t.refCount--,t.refCount===0&&df(hf,function(){t.controller.abort()})}var Tr=null,Ol=0,za=0,Ia=null;function ff(t,e){if(Tr===null){var n=Tr=[];Ol=0,za=Fc(),Ia={status:"pending",value:void 0,then:function(i){n.push(i)}}}return Ol++,e.then(mu,mu),e}function mu(){if(--Ol===0&&Tr!==null){Ia!==null&&(Ia.status="fulfilled");var t=Tr;Tr=null,za=0,Ia=null;for(var e=0;e<t.length;e++)(0,t[e])()}}function pf(t,e){var n=[],i={status:"pending",value:null,reason:null,then:function(a){n.push(a)}};return t.then(function(){i.status="fulfilled",i.value=e;for(var a=0;a<n.length;a++)(0,n[a])(e)},function(a){for(i.status="rejected",i.reason=a,a=0;a<n.length;a++)(0,n[a])(void 0)}),i}var gu=nt.S;nt.S=function(t,e){$d=oe(),typeof e=="object"&&e!==null&&typeof e.then=="function"&&ff(t,e),gu!==null&&gu(t,e)};var aa=g(null);function Ll(){var t=aa.current;return t!==null?t:Be.pooledCache}function _o(t,e){e===null?H(aa,aa.current):H(aa,e.pool)}function yu(){var t=Ll();return t===null?null:{parent:an._currentValue,pool:t}}var Ba=Error(o(460)),Pl=Error(o(474)),Eo=Error(o(542)),Ao={then:function(){}};function xu(t){return t=t.status,t==="fulfilled"||t==="rejected"}function vu(t,e,n){switch(n=t[n],n===void 0?t.push(e):n!==e&&(e.then(Ln,Ln),e=n),e.status){case"fulfilled":return e.value;case"rejected":throw t=e.reason,_u(t),t;default:if(typeof e.status=="string")e.then(Ln,Ln);else{if(t=Be,t!==null&&100<t.shellSuspendCounter)throw Error(o(482));t=e,t.status="pending",t.then(function(i){if(e.status==="pending"){var a=e;a.status="fulfilled",a.value=i}},function(i){if(e.status==="pending"){var a=e;a.status="rejected",a.reason=i}})}switch(e.status){case"fulfilled":return e.value;case"rejected":throw t=e.reason,_u(t),t}throw oa=e,Ba}}function ra(t){try{var e=t._init;return e(t._payload)}catch(n){throw n!==null&&typeof n=="object"&&typeof n.then=="function"?(oa=n,Ba):n}}var oa=null;function bu(){if(oa===null)throw Error(o(459));var t=oa;return oa=null,t}function _u(t){if(t===Ba||t===Eo)throw Error(o(483))}var Ua=null,Cr=0;function So(t){var e=Cr;return Cr+=1,Ua===null&&(Ua=[]),vu(Ua,t,e)}function jr(t,e){e=e.props.ref,t.ref=e!==void 0?e:null}function wo(t,e){throw e.$$typeof===b?Error(o(525)):(t=Object.prototype.toString.call(e),Error(o(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)))}function Eu(t){function e(xt,pt){if(t){var St=xt.deletions;St===null?(xt.deletions=[pt],xt.flags|=16):St.push(pt)}}function n(xt,pt){if(!t)return null;for(;pt!==null;)e(xt,pt),pt=pt.sibling;return null}function i(xt){for(var pt=new Map;xt!==null;)xt.key!==null?pt.set(xt.key,xt):pt.set(xt.index,xt),xt=xt.sibling;return pt}function a(xt,pt){return xt=Xi(xt,pt),xt.index=0,xt.sibling=null,xt}function r(xt,pt,St){return xt.index=St,t?(St=xt.alternate,St!==null?(St=St.index,St<pt?(xt.flags|=67108866,pt):St):(xt.flags|=67108866,pt)):(xt.flags|=1048576,pt)}function S(xt){return t&&xt.alternate===null&&(xt.flags|=67108866),xt}function q(xt,pt,St,zt){return pt===null||pt.tag!==6?(pt=Sl(St,xt.mode,zt),pt.return=xt,pt):(pt=a(pt,St),pt.return=xt,pt)}function ot(xt,pt,St,zt){var re=St.type;return re===A?Ot(xt,pt,St.props.children,zt,St.key):pt!==null&&(pt.elementType===re||typeof re=="object"&&re!==null&&re.$$typeof===rt&&ra(re)===pt.type)?(pt=a(pt,St.props),jr(pt,St),pt.return=xt,pt):(pt=yo(St.type,St.key,St.props,null,xt.mode,zt),jr(pt,St),pt.return=xt,pt)}function wt(xt,pt,St,zt){return pt===null||pt.tag!==4||pt.stateNode.containerInfo!==St.containerInfo||pt.stateNode.implementation!==St.implementation?(pt=wl(St,xt.mode,zt),pt.return=xt,pt):(pt=a(pt,St.children||[]),pt.return=xt,pt)}function Ot(xt,pt,St,zt,re){return pt===null||pt.tag!==7?(pt=ea(St,xt.mode,zt,re),pt.return=xt,pt):(pt=a(pt,St),pt.return=xt,pt)}function Bt(xt,pt,St){if(typeof pt=="string"&&pt!==""||typeof pt=="number"||typeof pt=="bigint")return pt=Sl(""+pt,xt.mode,St),pt.return=xt,pt;if(typeof pt=="object"&&pt!==null){switch(pt.$$typeof){case y:return St=yo(pt.type,pt.key,pt.props,null,xt.mode,St),jr(St,pt),St.return=xt,St;case f:return pt=wl(pt,xt.mode,St),pt.return=xt,pt;case rt:return pt=ra(pt),Bt(xt,pt,St)}if(Kt(pt)||kt(pt))return pt=ea(pt,xt.mode,St,null),pt.return=xt,pt;if(typeof pt.then=="function")return Bt(xt,So(pt),St);if(pt.$$typeof===Z)return Bt(xt,bo(xt,pt),St);wo(xt,pt)}return null}function jt(xt,pt,St,zt){var re=pt!==null?pt.key:null;if(typeof St=="string"&&St!==""||typeof St=="number"||typeof St=="bigint")return re!==null?null:q(xt,pt,""+St,zt);if(typeof St=="object"&&St!==null){switch(St.$$typeof){case y:return St.key===re?ot(xt,pt,St,zt):null;case f:return St.key===re?wt(xt,pt,St,zt):null;case rt:return St=ra(St),jt(xt,pt,St,zt)}if(Kt(St)||kt(St))return re!==null?null:Ot(xt,pt,St,zt,null);if(typeof St.then=="function")return jt(xt,pt,So(St),zt);if(St.$$typeof===Z)return jt(xt,pt,bo(xt,St),zt);wo(xt,St)}return null}function Mt(xt,pt,St,zt,re){if(typeof zt=="string"&&zt!==""||typeof zt=="number"||typeof zt=="bigint")return xt=xt.get(St)||null,q(pt,xt,""+zt,re);if(typeof zt=="object"&&zt!==null){switch(zt.$$typeof){case y:return xt=xt.get(zt.key===null?St:zt.key)||null,ot(pt,xt,zt,re);case f:return xt=xt.get(zt.key===null?St:zt.key)||null,wt(pt,xt,zt,re);case rt:return zt=ra(zt),Mt(xt,pt,St,zt,re)}if(Kt(zt)||kt(zt))return xt=xt.get(St)||null,Ot(pt,xt,zt,re,null);if(typeof zt.then=="function")return Mt(xt,pt,St,So(zt),re);if(zt.$$typeof===Z)return Mt(xt,pt,St,bo(pt,zt),re);wo(pt,zt)}return null}function ne(xt,pt,St,zt){for(var re=null,Se=null,ie=pt,fe=pt=0,be=null;ie!==null&&fe<St.length;fe++){ie.index>fe?(be=ie,ie=null):be=ie.sibling;var we=jt(xt,ie,St[fe],zt);if(we===null){ie===null&&(ie=be);break}t&&ie&&we.alternate===null&&e(xt,ie),pt=r(we,pt,fe),Se===null?re=we:Se.sibling=we,Se=we,ie=be}if(fe===St.length)return n(xt,ie),Ae&&Yi(xt,fe),re;if(ie===null){for(;fe<St.length;fe++)ie=Bt(xt,St[fe],zt),ie!==null&&(pt=r(ie,pt,fe),Se===null?re=ie:Se.sibling=ie,Se=ie);return Ae&&Yi(xt,fe),re}for(ie=i(ie);fe<St.length;fe++)be=Mt(ie,xt,fe,St[fe],zt),be!==null&&(t&&be.alternate!==null&&ie.delete(be.key===null?fe:be.key),pt=r(be,pt,fe),Se===null?re=be:Se.sibling=be,Se=be);return t&&ie.forEach(function(Bs){return e(xt,Bs)}),Ae&&Yi(xt,fe),re}function ce(xt,pt,St,zt){if(St==null)throw Error(o(151));for(var re=null,Se=null,ie=pt,fe=pt=0,be=null,we=St.next();ie!==null&&!we.done;fe++,we=St.next()){ie.index>fe?(be=ie,ie=null):be=ie.sibling;var Bs=jt(xt,ie,we.value,zt);if(Bs===null){ie===null&&(ie=be);break}t&&ie&&Bs.alternate===null&&e(xt,ie),pt=r(Bs,pt,fe),Se===null?re=Bs:Se.sibling=Bs,Se=Bs,ie=be}if(we.done)return n(xt,ie),Ae&&Yi(xt,fe),re;if(ie===null){for(;!we.done;fe++,we=St.next())we=Bt(xt,we.value,zt),we!==null&&(pt=r(we,pt,fe),Se===null?re=we:Se.sibling=we,Se=we);return Ae&&Yi(xt,fe),re}for(ie=i(ie);!we.done;fe++,we=St.next())we=Mt(ie,xt,fe,we.value,zt),we!==null&&(t&&we.alternate!==null&&ie.delete(we.key===null?fe:we.key),pt=r(we,pt,fe),Se===null?re=we:Se.sibling=we,Se=we);return t&&ie.forEach(function(wp){return e(xt,wp)}),Ae&&Yi(xt,fe),re}function ze(xt,pt,St,zt){if(typeof St=="object"&&St!==null&&St.type===A&&St.key===null&&(St=St.props.children),typeof St=="object"&&St!==null){switch(St.$$typeof){case y:t:{for(var re=St.key;pt!==null;){if(pt.key===re){if(re=St.type,re===A){if(pt.tag===7){n(xt,pt.sibling),zt=a(pt,St.props.children),zt.return=xt,xt=zt;break t}}else if(pt.elementType===re||typeof re=="object"&&re!==null&&re.$$typeof===rt&&ra(re)===pt.type){n(xt,pt.sibling),zt=a(pt,St.props),jr(zt,St),zt.return=xt,xt=zt;break t}n(xt,pt);break}else e(xt,pt);pt=pt.sibling}St.type===A?(zt=ea(St.props.children,xt.mode,zt,St.key),zt.return=xt,xt=zt):(zt=yo(St.type,St.key,St.props,null,xt.mode,zt),jr(zt,St),zt.return=xt,xt=zt)}return S(xt);case f:t:{for(re=St.key;pt!==null;){if(pt.key===re)if(pt.tag===4&&pt.stateNode.containerInfo===St.containerInfo&&pt.stateNode.implementation===St.implementation){n(xt,pt.sibling),zt=a(pt,St.children||[]),zt.return=xt,xt=zt;break t}else{n(xt,pt);break}else e(xt,pt);pt=pt.sibling}zt=wl(St,xt.mode,zt),zt.return=xt,xt=zt}return S(xt);case rt:return St=ra(St),ze(xt,pt,St,zt)}if(Kt(St))return ne(xt,pt,St,zt);if(kt(St)){if(re=kt(St),typeof re!="function")throw Error(o(150));return St=re.call(St),ce(xt,pt,St,zt)}if(typeof St.then=="function")return ze(xt,pt,So(St),zt);if(St.$$typeof===Z)return ze(xt,pt,bo(xt,St),zt);wo(xt,St)}return typeof St=="string"&&St!==""||typeof St=="number"||typeof St=="bigint"?(St=""+St,pt!==null&&pt.tag===6?(n(xt,pt.sibling),zt=a(pt,St),zt.return=xt,xt=zt):(n(xt,pt),zt=Sl(St,xt.mode,zt),zt.return=xt,xt=zt),S(xt)):n(xt,pt)}return function(xt,pt,St,zt){try{Cr=0;var re=ze(xt,pt,St,zt);return Ua=null,re}catch(ie){if(ie===Ba||ie===Eo)throw ie;var Se=Gn(29,ie,null,xt.mode);return Se.lanes=zt,Se.return=xt,Se}}}var la=Eu(!0),Au=Eu(!1),As=!1;function Fl(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function zl(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function Ss(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function ws(t,e,n){var i=t.updateQueue;if(i===null)return null;if(i=i.shared,(Ce&2)!==0){var a=i.pending;return a===null?e.next=e:(e.next=a.next,a.next=e),i.pending=e,e=xs(t),Ci(t,null,n),e}return Le(t,i,e,n),xs(t)}function Mr(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194048)!==0)){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,Re(t,n)}}function Il(t,e){var n=t.updateQueue,i=t.alternate;if(i!==null&&(i=i.updateQueue,n===i)){var a=null,r=null;if(n=n.firstBaseUpdate,n!==null){do{var S={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};r===null?a=r=S:r=r.next=S,n=n.next}while(n!==null);r===null?a=r=e:r=r.next=e}else a=r=e;n={baseState:i.baseState,firstBaseUpdate:a,lastBaseUpdate:r,shared:i.shared,callbacks:i.callbacks},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}var Bl=!1;function kr(){if(Bl){var t=Ia;if(t!==null)throw t}}function Dr(t,e,n,i){Bl=!1;var a=t.updateQueue;As=!1;var r=a.firstBaseUpdate,S=a.lastBaseUpdate,q=a.shared.pending;if(q!==null){a.shared.pending=null;var ot=q,wt=ot.next;ot.next=null,S===null?r=wt:S.next=wt,S=ot;var Ot=t.alternate;Ot!==null&&(Ot=Ot.updateQueue,q=Ot.lastBaseUpdate,q!==S&&(q===null?Ot.firstBaseUpdate=wt:q.next=wt,Ot.lastBaseUpdate=ot))}if(r!==null){var Bt=a.baseState;S=0,Ot=wt=ot=null,q=r;do{var jt=q.lane&-536870913,Mt=jt!==q.lane;if(Mt?(ve&jt)===jt:(i&jt)===jt){jt!==0&&jt===za&&(Bl=!0),Ot!==null&&(Ot=Ot.next={lane:0,tag:q.tag,payload:q.payload,callback:null,next:null});t:{var ne=t,ce=q;jt=e;var ze=n;switch(ce.tag){case 1:if(ne=ce.payload,typeof ne=="function"){Bt=ne.call(ze,Bt,jt);break t}Bt=ne;break t;case 3:ne.flags=ne.flags&-65537|128;case 0:if(ne=ce.payload,jt=typeof ne=="function"?ne.call(ze,Bt,jt):ne,jt==null)break t;Bt=h({},Bt,jt);break t;case 2:As=!0}}jt=q.callback,jt!==null&&(t.flags|=64,Mt&&(t.flags|=8192),Mt=a.callbacks,Mt===null?a.callbacks=[jt]:Mt.push(jt))}else Mt={lane:jt,tag:q.tag,payload:q.payload,callback:q.callback,next:null},Ot===null?(wt=Ot=Mt,ot=Bt):Ot=Ot.next=Mt,S|=jt;if(q=q.next,q===null){if(q=a.shared.pending,q===null)break;Mt=q,q=Mt.next,Mt.next=null,a.lastBaseUpdate=Mt,a.shared.pending=null}}while(!0);Ot===null&&(ot=Bt),a.baseState=ot,a.firstBaseUpdate=wt,a.lastBaseUpdate=Ot,r===null&&(a.shared.lanes=0),Ms|=S,t.lanes=S,t.memoizedState=Bt}}function Su(t,e){if(typeof t!="function")throw Error(o(191,t));t.call(e)}function wu(t,e){var n=t.callbacks;if(n!==null)for(t.callbacks=null,t=0;t<n.length;t++)Su(n[t],e)}var qa=g(null),Ro=g(0);function Ru(t,e){t=ss,H(Ro,t),H(qa,e),ss=t|e.baseLanes}function Ul(){H(Ro,ss),H(qa,qa.current)}function ql(){ss=Ro.current,L(qa),L(Ro)}var Kn=g(null),oi=null;function Rs(t){var e=t.alternate;H(en,en.current&1),H(Kn,t),oi===null&&(e===null||qa.current!==null||e.memoizedState!==null)&&(oi=t)}function Hl(t){H(en,en.current),H(Kn,t),oi===null&&(oi=t)}function Tu(t){t.tag===22?(H(en,en.current),H(Kn,t),oi===null&&(oi=t)):Ts()}function Ts(){H(en,en.current),H(Kn,Kn.current)}function Xn(t){L(Kn),oi===t&&(oi=null),L(en)}var en=g(0);function To(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||Wc(n)||Qc(n)))return e}else if(e.tag===19&&(e.memoizedProps.revealOrder==="forwards"||e.memoizedProps.revealOrder==="backwards"||e.memoizedProps.revealOrder==="unstable_legacy-backwards"||e.memoizedProps.revealOrder==="together")){if((e.flags&128)!==0)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Qi=0,he=null,Pe=null,rn=null,Co=!1,Ha=!1,ca=!1,jo=0,Nr=0,Ga=null,mf=0;function Ze(){throw Error(o(321))}function Gl(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Rn(t[n],e[n]))return!1;return!0}function Kl(t,e,n,i,a,r){return Qi=r,he=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,nt.H=t===null||t.memoizedState===null?ud:rc,ca=!1,r=n(i,a),ca=!1,Ha&&(r=ju(e,n,i,a)),Cu(t),r}function Cu(t){nt.H=Pr;var e=Pe!==null&&Pe.next!==null;if(Qi=0,rn=Pe=he=null,Co=!1,Nr=0,Ga=null,e)throw Error(o(300));t===null||on||(t=t.dependencies,t!==null&&vo(t)&&(on=!0))}function ju(t,e,n,i){he=t;var a=0;do{if(Ha&&(Ga=null),Nr=0,Ha=!1,25<=a)throw Error(o(301));if(a+=1,rn=Pe=null,t.updateQueue!=null){var r=t.updateQueue;r.lastEffect=null,r.events=null,r.stores=null,r.memoCache!=null&&(r.memoCache.index=0)}nt.H=dd,r=e(n,i)}while(Ha);return r}function gf(){var t=nt.H,e=t.useState()[0];return e=typeof e.then=="function"?Or(e):e,t=t.useState()[0],(Pe!==null?Pe.memoizedState:null)!==t&&(he.flags|=1024),e}function Xl(){var t=jo!==0;return jo=0,t}function Yl(t,e,n){e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~n}function Vl(t){if(Co){for(t=t.memoizedState;t!==null;){var e=t.queue;e!==null&&(e.pending=null),t=t.next}Co=!1}Qi=0,rn=Pe=he=null,Ha=!1,Nr=jo=0,Ga=null}function Dn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return rn===null?he.memoizedState=rn=t:rn=rn.next=t,rn}function nn(){if(Pe===null){var t=he.alternate;t=t!==null?t.memoizedState:null}else t=Pe.next;var e=rn===null?he.memoizedState:rn.next;if(e!==null)rn=e,Pe=t;else{if(t===null)throw he.alternate===null?Error(o(467)):Error(o(310));Pe=t,t={memoizedState:Pe.memoizedState,baseState:Pe.baseState,baseQueue:Pe.baseQueue,queue:Pe.queue,next:null},rn===null?he.memoizedState=rn=t:rn=rn.next=t}return rn}function Mo(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Or(t){var e=Nr;return Nr+=1,Ga===null&&(Ga=[]),t=vu(Ga,t,e),e=he,(rn===null?e.memoizedState:rn.next)===null&&(e=e.alternate,nt.H=e===null||e.memoizedState===null?ud:rc),t}function ko(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return Or(t);if(t.$$typeof===Z)return vn(t)}throw Error(o(438,String(t)))}function Wl(t){var e=null,n=he.updateQueue;if(n!==null&&(e=n.memoCache),e==null){var i=he.alternate;i!==null&&(i=i.updateQueue,i!==null&&(i=i.memoCache,i!=null&&(e={data:i.data.map(function(a){return a.slice()}),index:0})))}if(e==null&&(e={data:[],index:0}),n===null&&(n=Mo(),he.updateQueue=n),n.memoCache=e,n=e.data[e.index],n===void 0)for(n=e.data[e.index]=Array(t),i=0;i<t;i++)n[i]=yt;return e.index++,n}function Zi(t,e){return typeof e=="function"?e(t):e}function Do(t){var e=nn();return Ql(e,Pe,t)}function Ql(t,e,n){var i=t.queue;if(i===null)throw Error(o(311));i.lastRenderedReducer=n;var a=t.baseQueue,r=i.pending;if(r!==null){if(a!==null){var S=a.next;a.next=r.next,r.next=S}e.baseQueue=a=r,i.pending=null}if(r=t.baseState,a===null)t.memoizedState=r;else{e=a.next;var q=S=null,ot=null,wt=e,Ot=!1;do{var Bt=wt.lane&-536870913;if(Bt!==wt.lane?(ve&Bt)===Bt:(Qi&Bt)===Bt){var jt=wt.revertLane;if(jt===0)ot!==null&&(ot=ot.next={lane:0,revertLane:0,gesture:null,action:wt.action,hasEagerState:wt.hasEagerState,eagerState:wt.eagerState,next:null}),Bt===za&&(Ot=!0);else if((Qi&jt)===jt){wt=wt.next,jt===za&&(Ot=!0);continue}else Bt={lane:0,revertLane:wt.revertLane,gesture:null,action:wt.action,hasEagerState:wt.hasEagerState,eagerState:wt.eagerState,next:null},ot===null?(q=ot=Bt,S=r):ot=ot.next=Bt,he.lanes|=jt,Ms|=jt;Bt=wt.action,ca&&n(r,Bt),r=wt.hasEagerState?wt.eagerState:n(r,Bt)}else jt={lane:Bt,revertLane:wt.revertLane,gesture:wt.gesture,action:wt.action,hasEagerState:wt.hasEagerState,eagerState:wt.eagerState,next:null},ot===null?(q=ot=jt,S=r):ot=ot.next=jt,he.lanes|=Bt,Ms|=Bt;wt=wt.next}while(wt!==null&&wt!==e);if(ot===null?S=r:ot.next=q,!Rn(r,t.memoizedState)&&(on=!0,Ot&&(n=Ia,n!==null)))throw n;t.memoizedState=r,t.baseState=S,t.baseQueue=ot,i.lastRenderedState=r}return a===null&&(i.lanes=0),[t.memoizedState,i.dispatch]}function Zl(t){var e=nn(),n=e.queue;if(n===null)throw Error(o(311));n.lastRenderedReducer=t;var i=n.dispatch,a=n.pending,r=e.memoizedState;if(a!==null){n.pending=null;var S=a=a.next;do r=t(r,S.action),S=S.next;while(S!==a);Rn(r,e.memoizedState)||(on=!0),e.memoizedState=r,e.baseQueue===null&&(e.baseState=r),n.lastRenderedState=r}return[r,i]}function Mu(t,e,n){var i=he,a=nn(),r=Ae;if(r){if(n===void 0)throw Error(o(407));n=n()}else n=e();var S=!Rn((Pe||a).memoizedState,n);if(S&&(a.memoizedState=n,on=!0),a=a.queue,tc(Nu.bind(null,i,a,t),[t]),a.getSnapshot!==e||S||rn!==null&&rn.memoizedState.tag&1){if(i.flags|=2048,Ka(9,{destroy:void 0},Du.bind(null,i,a,n,e),null),Be===null)throw Error(o(349));r||(Qi&127)!==0||ku(i,e,n)}return n}function ku(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=he.updateQueue,e===null?(e=Mo(),he.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function Du(t,e,n,i){e.value=n,e.getSnapshot=i,Ou(e)&&Lu(t)}function Nu(t,e,n){return n(function(){Ou(e)&&Lu(t)})}function Ou(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Rn(t,n)}catch{return!0}}function Lu(t){var e=Me(t,2);e!==null&&Bn(e,t,2)}function Jl(t){var e=Dn();if(typeof t=="function"){var n=t;if(t=n(),ca){vt(!0);try{n()}finally{vt(!1)}}}return e.memoizedState=e.baseState=t,e.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Zi,lastRenderedState:t},e}function Pu(t,e,n,i){return t.baseState=n,Ql(t,Pe,typeof i=="function"?i:Zi)}function yf(t,e,n,i,a){if(Lo(t))throw Error(o(485));if(t=e.action,t!==null){var r={payload:a,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(S){r.listeners.push(S)}};nt.T!==null?n(!0):r.isTransition=!1,i(r),n=e.pending,n===null?(r.next=e.pending=r,Fu(e,r)):(r.next=n.next,e.pending=n.next=r)}}function Fu(t,e){var n=e.action,i=e.payload,a=t.state;if(e.isTransition){var r=nt.T,S={};nt.T=S;try{var q=n(a,i),ot=nt.S;ot!==null&&ot(S,q),zu(t,e,q)}catch(wt){$l(t,e,wt)}finally{r!==null&&S.types!==null&&(r.types=S.types),nt.T=r}}else try{r=n(a,i),zu(t,e,r)}catch(wt){$l(t,e,wt)}}function zu(t,e,n){n!==null&&typeof n=="object"&&typeof n.then=="function"?n.then(function(i){Iu(t,e,i)},function(i){return $l(t,e,i)}):Iu(t,e,n)}function Iu(t,e,n){e.status="fulfilled",e.value=n,Bu(e),t.state=n,e=t.pending,e!==null&&(n=e.next,n===e?t.pending=null:(n=n.next,e.next=n,Fu(t,n)))}function $l(t,e,n){var i=t.pending;if(t.pending=null,i!==null){i=i.next;do e.status="rejected",e.reason=n,Bu(e),e=e.next;while(e!==i)}t.action=null}function Bu(t){t=t.listeners;for(var e=0;e<t.length;e++)(0,t[e])()}function Uu(t,e){return e}function qu(t,e){if(Ae){var n=Be.formState;if(n!==null){t:{var i=he;if(Ae){if(Ke){e:{for(var a=Ke,r=ri;a.nodeType!==8;){if(!r){a=null;break e}if(a=li(a.nextSibling),a===null){a=null;break e}}r=a.data,a=r==="F!"||r==="F"?a:null}if(a){Ke=li(a.nextSibling),i=a.data==="F!";break t}}_s(i)}i=!1}i&&(e=n[0])}}return n=Dn(),n.memoizedState=n.baseState=e,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Uu,lastRenderedState:e},n.queue=i,n=od.bind(null,he,i),i.dispatch=n,i=Jl(!1),r=ac.bind(null,he,!1,i.queue),i=Dn(),a={state:e,dispatch:null,action:t,pending:null},i.queue=a,n=yf.bind(null,he,a,r,n),a.dispatch=n,i.memoizedState=t,[e,n,!1]}function Hu(t){var e=nn();return Gu(e,Pe,t)}function Gu(t,e,n){if(e=Ql(t,e,Uu)[0],t=Do(Zi)[0],typeof e=="object"&&e!==null&&typeof e.then=="function")try{var i=Or(e)}catch(S){throw S===Ba?Eo:S}else i=e;e=nn();var a=e.queue,r=a.dispatch;return n!==e.memoizedState&&(he.flags|=2048,Ka(9,{destroy:void 0},xf.bind(null,a,n),null)),[i,r,t]}function xf(t,e){t.action=e}function Ku(t){var e=nn(),n=Pe;if(n!==null)return Gu(e,n,t);nn(),e=e.memoizedState,n=nn();var i=n.queue.dispatch;return n.memoizedState=t,[e,i,!1]}function Ka(t,e,n,i){return t={tag:t,create:n,deps:i,inst:e,next:null},e=he.updateQueue,e===null&&(e=Mo(),he.updateQueue=e),n=e.lastEffect,n===null?e.lastEffect=t.next=t:(i=n.next,n.next=t,t.next=i,e.lastEffect=t),t}function Xu(){return nn().memoizedState}function No(t,e,n,i){var a=Dn();he.flags|=t,a.memoizedState=Ka(1|e,{destroy:void 0},n,i===void 0?null:i)}function Oo(t,e,n,i){var a=nn();i=i===void 0?null:i;var r=a.memoizedState.inst;Pe!==null&&i!==null&&Gl(i,Pe.memoizedState.deps)?a.memoizedState=Ka(e,r,n,i):(he.flags|=t,a.memoizedState=Ka(1|e,r,n,i))}function Yu(t,e){No(8390656,8,t,e)}function tc(t,e){Oo(2048,8,t,e)}function vf(t){he.flags|=4;var e=he.updateQueue;if(e===null)e=Mo(),he.updateQueue=e,e.events=[t];else{var n=e.events;n===null?e.events=[t]:n.push(t)}}function Vu(t){var e=nn().memoizedState;return vf({ref:e,nextImpl:t}),function(){if((Ce&2)!==0)throw Error(o(440));return e.impl.apply(void 0,arguments)}}function Wu(t,e){return Oo(4,2,t,e)}function Qu(t,e){return Oo(4,4,t,e)}function Zu(t,e){if(typeof e=="function"){t=t();var n=e(t);return function(){typeof n=="function"?n():e(null)}}if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Ju(t,e,n){n=n!=null?n.concat([t]):null,Oo(4,4,Zu.bind(null,e,t),n)}function ec(){}function $u(t,e){var n=nn();e=e===void 0?null:e;var i=n.memoizedState;return e!==null&&Gl(e,i[1])?i[0]:(n.memoizedState=[t,e],t)}function td(t,e){var n=nn();e=e===void 0?null:e;var i=n.memoizedState;if(e!==null&&Gl(e,i[1]))return i[0];if(i=t(),ca){vt(!0);try{t()}finally{vt(!1)}}return n.memoizedState=[i,e],i}function nc(t,e,n){return n===void 0||(Qi&1073741824)!==0&&(ve&261930)===0?t.memoizedState=e:(t.memoizedState=n,t=eh(),he.lanes|=t,Ms|=t,n)}function ed(t,e,n,i){return Rn(n,e)?n:qa.current!==null?(t=nc(t,n,i),Rn(t,e)||(on=!0),t):(Qi&42)===0||(Qi&1073741824)!==0&&(ve&261930)===0?(on=!0,t.memoizedState=n):(t=eh(),he.lanes|=t,Ms|=t,e)}function nd(t,e,n,i,a){var r=Y.p;Y.p=r!==0&&8>r?r:8;var S=nt.T,q={};nt.T=q,ac(t,!1,e,n);try{var ot=a(),wt=nt.S;if(wt!==null&&wt(q,ot),ot!==null&&typeof ot=="object"&&typeof ot.then=="function"){var Ot=pf(ot,i);Lr(t,e,Ot,Wn(t))}else Lr(t,e,i,Wn(t))}catch(Bt){Lr(t,e,{then:function(){},status:"rejected",reason:Bt},Wn())}finally{Y.p=r,S!==null&&q.types!==null&&(S.types=q.types),nt.T=S}}function bf(){}function ic(t,e,n,i){if(t.tag!==5)throw Error(o(476));var a=id(t).queue;nd(t,a,e,N,n===null?bf:function(){return sd(t),n(i)})}function id(t){var e=t.memoizedState;if(e!==null)return e;e={memoizedState:N,baseState:N,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Zi,lastRenderedState:N},next:null};var n={};return e.next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Zi,lastRenderedState:n},next:null},t.memoizedState=e,t=t.alternate,t!==null&&(t.memoizedState=e),e}function sd(t){var e=id(t);e.next===null&&(e=t.alternate.memoizedState),Lr(t,e.next.queue,{},Wn())}function sc(){return vn(Jr)}function ad(){return nn().memoizedState}function rd(){return nn().memoizedState}function _f(t){for(var e=t.return;e!==null;){switch(e.tag){case 24:case 3:var n=Wn();t=Ss(n);var i=ws(e,t,n);i!==null&&(Bn(i,e,n),Mr(i,e,n)),e={cache:Nl()},t.payload=e;return}e=e.return}}function Ef(t,e,n){var i=Wn();n={lane:i,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null},Lo(t)?ld(e,n):(n=Tn(t,e,n,i),n!==null&&(Bn(n,t,i),cd(n,e,i)))}function od(t,e,n){var i=Wn();Lr(t,e,n,i)}function Lr(t,e,n,i){var a={lane:i,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null};if(Lo(t))ld(e,a);else{var r=t.alternate;if(t.lanes===0&&(r===null||r.lanes===0)&&(r=e.lastRenderedReducer,r!==null))try{var S=e.lastRenderedState,q=r(S,n);if(a.hasEagerState=!0,a.eagerState=q,Rn(q,S))return Le(t,e,a,0),Be===null&&de(),!1}catch{}if(n=Tn(t,e,a,i),n!==null)return Bn(n,t,i),cd(n,e,i),!0}return!1}function ac(t,e,n,i){if(i={lane:2,revertLane:Fc(),gesture:null,action:i,hasEagerState:!1,eagerState:null,next:null},Lo(t)){if(e)throw Error(o(479))}else e=Tn(t,n,i,2),e!==null&&Bn(e,t,2)}function Lo(t){var e=t.alternate;return t===he||e!==null&&e===he}function ld(t,e){Ha=Co=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function cd(t,e,n){if((n&4194048)!==0){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,Re(t,n)}}var Pr={readContext:vn,use:ko,useCallback:Ze,useContext:Ze,useEffect:Ze,useImperativeHandle:Ze,useLayoutEffect:Ze,useInsertionEffect:Ze,useMemo:Ze,useReducer:Ze,useRef:Ze,useState:Ze,useDebugValue:Ze,useDeferredValue:Ze,useTransition:Ze,useSyncExternalStore:Ze,useId:Ze,useHostTransitionStatus:Ze,useFormState:Ze,useActionState:Ze,useOptimistic:Ze,useMemoCache:Ze,useCacheRefresh:Ze};Pr.useEffectEvent=Ze;var ud={readContext:vn,use:ko,useCallback:function(t,e){return Dn().memoizedState=[t,e===void 0?null:e],t},useContext:vn,useEffect:Yu,useImperativeHandle:function(t,e,n){n=n!=null?n.concat([t]):null,No(4194308,4,Zu.bind(null,e,t),n)},useLayoutEffect:function(t,e){return No(4194308,4,t,e)},useInsertionEffect:function(t,e){No(4,2,t,e)},useMemo:function(t,e){var n=Dn();e=e===void 0?null:e;var i=t();if(ca){vt(!0);try{t()}finally{vt(!1)}}return n.memoizedState=[i,e],i},useReducer:function(t,e,n){var i=Dn();if(n!==void 0){var a=n(e);if(ca){vt(!0);try{n(e)}finally{vt(!1)}}}else a=e;return i.memoizedState=i.baseState=a,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:a},i.queue=t,t=t.dispatch=Ef.bind(null,he,t),[i.memoizedState,t]},useRef:function(t){var e=Dn();return t={current:t},e.memoizedState=t},useState:function(t){t=Jl(t);var e=t.queue,n=od.bind(null,he,e);return e.dispatch=n,[t.memoizedState,n]},useDebugValue:ec,useDeferredValue:function(t,e){var n=Dn();return nc(n,t,e)},useTransition:function(){var t=Jl(!1);return t=nd.bind(null,he,t.queue,!0,!1),Dn().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,e,n){var i=he,a=Dn();if(Ae){if(n===void 0)throw Error(o(407));n=n()}else{if(n=e(),Be===null)throw Error(o(349));(ve&127)!==0||ku(i,e,n)}a.memoizedState=n;var r={value:n,getSnapshot:e};return a.queue=r,Yu(Nu.bind(null,i,r,t),[t]),i.flags|=2048,Ka(9,{destroy:void 0},Du.bind(null,i,r,n,e),null),n},useId:function(){var t=Dn(),e=Be.identifierPrefix;if(Ae){var n=Mi,i=ji;n=(i&~(1<<32-st(i)-1)).toString(32)+n,e="_"+e+"R_"+n,n=jo++,0<n&&(e+="H"+n.toString(32)),e+="_"}else n=mf++,e="_"+e+"r_"+n.toString(32)+"_";return t.memoizedState=e},useHostTransitionStatus:sc,useFormState:qu,useActionState:qu,useOptimistic:function(t){var e=Dn();e.memoizedState=e.baseState=t;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return e.queue=n,e=ac.bind(null,he,!0,n),n.dispatch=e,[t,e]},useMemoCache:Wl,useCacheRefresh:function(){return Dn().memoizedState=_f.bind(null,he)},useEffectEvent:function(t){var e=Dn(),n={impl:t};return e.memoizedState=n,function(){if((Ce&2)!==0)throw Error(o(440));return n.impl.apply(void 0,arguments)}}},rc={readContext:vn,use:ko,useCallback:$u,useContext:vn,useEffect:tc,useImperativeHandle:Ju,useInsertionEffect:Wu,useLayoutEffect:Qu,useMemo:td,useReducer:Do,useRef:Xu,useState:function(){return Do(Zi)},useDebugValue:ec,useDeferredValue:function(t,e){var n=nn();return ed(n,Pe.memoizedState,t,e)},useTransition:function(){var t=Do(Zi)[0],e=nn().memoizedState;return[typeof t=="boolean"?t:Or(t),e]},useSyncExternalStore:Mu,useId:ad,useHostTransitionStatus:sc,useFormState:Hu,useActionState:Hu,useOptimistic:function(t,e){var n=nn();return Pu(n,Pe,t,e)},useMemoCache:Wl,useCacheRefresh:rd};rc.useEffectEvent=Vu;var dd={readContext:vn,use:ko,useCallback:$u,useContext:vn,useEffect:tc,useImperativeHandle:Ju,useInsertionEffect:Wu,useLayoutEffect:Qu,useMemo:td,useReducer:Zl,useRef:Xu,useState:function(){return Zl(Zi)},useDebugValue:ec,useDeferredValue:function(t,e){var n=nn();return Pe===null?nc(n,t,e):ed(n,Pe.memoizedState,t,e)},useTransition:function(){var t=Zl(Zi)[0],e=nn().memoizedState;return[typeof t=="boolean"?t:Or(t),e]},useSyncExternalStore:Mu,useId:ad,useHostTransitionStatus:sc,useFormState:Ku,useActionState:Ku,useOptimistic:function(t,e){var n=nn();return Pe!==null?Pu(n,Pe,t,e):(n.baseState=t,[t,n.queue.dispatch])},useMemoCache:Wl,useCacheRefresh:rd};dd.useEffectEvent=Vu;function oc(t,e,n,i){e=t.memoizedState,n=n(i,e),n=n==null?e:h({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var lc={enqueueSetState:function(t,e,n){t=t._reactInternals;var i=Wn(),a=Ss(i);a.payload=e,n!=null&&(a.callback=n),e=ws(t,a,i),e!==null&&(Bn(e,t,i),Mr(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var i=Wn(),a=Ss(i);a.tag=1,a.payload=e,n!=null&&(a.callback=n),e=ws(t,a,i),e!==null&&(Bn(e,t,i),Mr(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Wn(),i=Ss(n);i.tag=2,e!=null&&(i.callback=e),e=ws(t,i,n),e!==null&&(Bn(e,t,n),Mr(e,t,n))}};function hd(t,e,n,i,a,r,S){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(i,r,S):e.prototype&&e.prototype.isPureReactComponent?!s(n,i)||!s(a,r):!0}function fd(t,e,n,i){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,i),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,i),e.state!==t&&lc.enqueueReplaceState(e,e.state,null)}function ua(t,e){var n=e;if("ref"in e){n={};for(var i in e)i!=="ref"&&(n[i]=e[i])}if(t=t.defaultProps){n===e&&(n=h({},n));for(var a in t)n[a]===void 0&&(n[a]=t[a])}return n}function pd(t){ee(t)}function md(t){console.error(t)}function gd(t){ee(t)}function Po(t,e){try{var n=t.onUncaughtError;n(e.value,{componentStack:e.stack})}catch(i){setTimeout(function(){throw i})}}function yd(t,e,n){try{var i=t.onCaughtError;i(n.value,{componentStack:n.stack,errorBoundary:e.tag===1?e.stateNode:null})}catch(a){setTimeout(function(){throw a})}}function cc(t,e,n){return n=Ss(n),n.tag=3,n.payload={element:null},n.callback=function(){Po(t,e)},n}function xd(t){return t=Ss(t),t.tag=3,t}function vd(t,e,n,i){var a=n.type.getDerivedStateFromError;if(typeof a=="function"){var r=i.value;t.payload=function(){return a(r)},t.callback=function(){yd(e,n,i)}}var S=n.stateNode;S!==null&&typeof S.componentDidCatch=="function"&&(t.callback=function(){yd(e,n,i),typeof a!="function"&&(ks===null?ks=new Set([this]):ks.add(this));var q=i.stack;this.componentDidCatch(i.value,{componentStack:q!==null?q:""})})}function Af(t,e,n,i,a){if(n.flags|=32768,i!==null&&typeof i=="object"&&typeof i.then=="function"){if(e=n.alternate,e!==null&&Fa(e,n,a,!0),n=Kn.current,n!==null){switch(n.tag){case 31:case 13:return oi===null?Vo():n.alternate===null&&Je===0&&(Je=3),n.flags&=-257,n.flags|=65536,n.lanes=a,i===Ao?n.flags|=16384:(e=n.updateQueue,e===null?n.updateQueue=new Set([i]):e.add(i),Oc(t,i,a)),!1;case 22:return n.flags|=65536,i===Ao?n.flags|=16384:(e=n.updateQueue,e===null?(e={transitions:null,markerInstances:null,retryQueue:new Set([i])},n.updateQueue=e):(n=e.retryQueue,n===null?e.retryQueue=new Set([i]):n.add(i)),Oc(t,i,a)),!1}throw Error(o(435,n.tag))}return Oc(t,i,a),Vo(),!1}if(Ae)return e=Kn.current,e!==null?((e.flags&65536)===0&&(e.flags|=256),e.flags|=65536,e.lanes=a,i!==Cl&&(t=Error(o(422),{cause:i}),wr(ni(t,n)))):(i!==Cl&&(e=Error(o(423),{cause:i}),wr(ni(e,n))),t=t.current.alternate,t.flags|=65536,a&=-a,t.lanes|=a,i=ni(i,n),a=cc(t.stateNode,i,a),Il(t,a),Je!==4&&(Je=2)),!1;var r=Error(o(520),{cause:i});if(r=ni(r,n),Gr===null?Gr=[r]:Gr.push(r),Je!==4&&(Je=2),e===null)return!0;i=ni(i,n),n=e;do{switch(n.tag){case 3:return n.flags|=65536,t=a&-a,n.lanes|=t,t=cc(n.stateNode,i,t),Il(n,t),!1;case 1:if(e=n.type,r=n.stateNode,(n.flags&128)===0&&(typeof e.getDerivedStateFromError=="function"||r!==null&&typeof r.componentDidCatch=="function"&&(ks===null||!ks.has(r))))return n.flags|=65536,a&=-a,n.lanes|=a,a=xd(a),vd(a,t,n,i),Il(n,a),!1}n=n.return}while(n!==null);return!1}var uc=Error(o(461)),on=!1;function bn(t,e,n,i){e.child=t===null?Au(e,null,n,i):la(e,t.child,n,i)}function bd(t,e,n,i,a){n=n.render;var r=e.ref;if("ref"in i){var S={};for(var q in i)q!=="ref"&&(S[q]=i[q])}else S=i;return sa(e),i=Kl(t,e,n,S,r,a),q=Xl(),t!==null&&!on?(Yl(t,e,a),Ji(t,e,a)):(Ae&&q&&Rl(e),e.flags|=1,bn(t,e,i,a),e.child)}function _d(t,e,n,i,a){if(t===null){var r=n.type;return typeof r=="function"&&!Al(r)&&r.defaultProps===void 0&&n.compare===null?(e.tag=15,e.type=r,Ed(t,e,r,i,a)):(t=yo(n.type,null,i,e,e.mode,a),t.ref=e.ref,t.return=e,e.child=t)}if(r=t.child,!xc(t,a)){var S=r.memoizedProps;if(n=n.compare,n=n!==null?n:s,n(S,i)&&t.ref===e.ref)return Ji(t,e,a)}return e.flags|=1,t=Xi(r,i),t.ref=e.ref,t.return=e,e.child=t}function Ed(t,e,n,i,a){if(t!==null){var r=t.memoizedProps;if(s(r,i)&&t.ref===e.ref)if(on=!1,e.pendingProps=i=r,xc(t,a))(t.flags&131072)!==0&&(on=!0);else return e.lanes=t.lanes,Ji(t,e,a)}return dc(t,e,n,i,a)}function Ad(t,e,n,i){var a=i.children,r=t!==null?t.memoizedState:null;if(t===null&&e.stateNode===null&&(e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),i.mode==="hidden"){if((e.flags&128)!==0){if(r=r!==null?r.baseLanes|n:n,t!==null){for(i=e.child=t.child,a=0;i!==null;)a=a|i.lanes|i.childLanes,i=i.sibling;i=a&~r}else i=0,e.child=null;return Sd(t,e,r,n,i)}if((n&536870912)!==0)e.memoizedState={baseLanes:0,cachePool:null},t!==null&&_o(e,r!==null?r.cachePool:null),r!==null?Ru(e,r):Ul(),Tu(e);else return i=e.lanes=536870912,Sd(t,e,r!==null?r.baseLanes|n:n,n,i)}else r!==null?(_o(e,r.cachePool),Ru(e,r),Ts(),e.memoizedState=null):(t!==null&&_o(e,null),Ul(),Ts());return bn(t,e,a,n),e.child}function Fr(t,e){return t!==null&&t.tag===22||e.stateNode!==null||(e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),e.sibling}function Sd(t,e,n,i,a){var r=Ll();return r=r===null?null:{parent:an._currentValue,pool:r},e.memoizedState={baseLanes:n,cachePool:r},t!==null&&_o(e,null),Ul(),Tu(e),t!==null&&Fa(t,e,i,!0),e.childLanes=a,null}function Fo(t,e){return e=Io({mode:e.mode,children:e.children},t.mode),e.ref=t.ref,t.child=e,e.return=t,e}function wd(t,e,n){return la(e,t.child,null,n),t=Fo(e,e.pendingProps),t.flags|=2,Xn(e),e.memoizedState=null,t}function Sf(t,e,n){var i=e.pendingProps,a=(e.flags&128)!==0;if(e.flags&=-129,t===null){if(Ae){if(i.mode==="hidden")return t=Fo(e,i),e.lanes=536870912,Fr(null,t);if(Hl(e),(t=Ke)?(t=Fh(t,ri),t=t!==null&&t.data==="&"?t:null,t!==null&&(e.memoizedState={dehydrated:t,treeContext:vs!==null?{id:ji,overflow:Mi}:null,retryLane:536870912,hydrationErrors:null},n=lu(t),n.return=e,e.child=n,xn=e,Ke=null)):t=null,t===null)throw _s(e);return e.lanes=536870912,null}return Fo(e,i)}var r=t.memoizedState;if(r!==null){var S=r.dehydrated;if(Hl(e),a)if(e.flags&256)e.flags&=-257,e=wd(t,e,n);else if(e.memoizedState!==null)e.child=t.child,e.flags|=128,e=null;else throw Error(o(558));else if(on||Fa(t,e,n,!1),a=(n&t.childLanes)!==0,on||a){if(i=Be,i!==null&&(S=Ie(i,n),S!==0&&S!==r.retryLane))throw r.retryLane=S,Me(t,S),Bn(i,t,S),uc;Vo(),e=wd(t,e,n)}else t=r.treeContext,Ke=li(S.nextSibling),xn=e,Ae=!0,bs=null,ri=!1,t!==null&&du(e,t),e=Fo(e,i),e.flags|=4096;return e}return t=Xi(t.child,{mode:i.mode,children:i.children}),t.ref=e.ref,e.child=t,t.return=e,t}function zo(t,e){var n=e.ref;if(n===null)t!==null&&t.ref!==null&&(e.flags|=4194816);else{if(typeof n!="function"&&typeof n!="object")throw Error(o(284));(t===null||t.ref!==n)&&(e.flags|=4194816)}}function dc(t,e,n,i,a){return sa(e),n=Kl(t,e,n,i,void 0,a),i=Xl(),t!==null&&!on?(Yl(t,e,a),Ji(t,e,a)):(Ae&&i&&Rl(e),e.flags|=1,bn(t,e,n,a),e.child)}function Rd(t,e,n,i,a,r){return sa(e),e.updateQueue=null,n=ju(e,i,n,a),Cu(t),i=Xl(),t!==null&&!on?(Yl(t,e,r),Ji(t,e,r)):(Ae&&i&&Rl(e),e.flags|=1,bn(t,e,n,r),e.child)}function Td(t,e,n,i,a){if(sa(e),e.stateNode===null){var r=Na,S=n.contextType;typeof S=="object"&&S!==null&&(r=vn(S)),r=new n(i,r),e.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,r.updater=lc,e.stateNode=r,r._reactInternals=e,r=e.stateNode,r.props=i,r.state=e.memoizedState,r.refs={},Fl(e),S=n.contextType,r.context=typeof S=="object"&&S!==null?vn(S):Na,r.state=e.memoizedState,S=n.getDerivedStateFromProps,typeof S=="function"&&(oc(e,n,S,i),r.state=e.memoizedState),typeof n.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(S=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),S!==r.state&&lc.enqueueReplaceState(r,r.state,null),Dr(e,i,r,a),kr(),r.state=e.memoizedState),typeof r.componentDidMount=="function"&&(e.flags|=4194308),i=!0}else if(t===null){r=e.stateNode;var q=e.memoizedProps,ot=ua(n,q);r.props=ot;var wt=r.context,Ot=n.contextType;S=Na,typeof Ot=="object"&&Ot!==null&&(S=vn(Ot));var Bt=n.getDerivedStateFromProps;Ot=typeof Bt=="function"||typeof r.getSnapshotBeforeUpdate=="function",q=e.pendingProps!==q,Ot||typeof r.UNSAFE_componentWillReceiveProps!="function"&&typeof r.componentWillReceiveProps!="function"||(q||wt!==S)&&fd(e,r,i,S),As=!1;var jt=e.memoizedState;r.state=jt,Dr(e,i,r,a),kr(),wt=e.memoizedState,q||jt!==wt||As?(typeof Bt=="function"&&(oc(e,n,Bt,i),wt=e.memoizedState),(ot=As||hd(e,n,ot,i,jt,wt,S))?(Ot||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount()),typeof r.componentDidMount=="function"&&(e.flags|=4194308)):(typeof r.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=i,e.memoizedState=wt),r.props=i,r.state=wt,r.context=S,i=ot):(typeof r.componentDidMount=="function"&&(e.flags|=4194308),i=!1)}else{r=e.stateNode,zl(t,e),S=e.memoizedProps,Ot=ua(n,S),r.props=Ot,Bt=e.pendingProps,jt=r.context,wt=n.contextType,ot=Na,typeof wt=="object"&&wt!==null&&(ot=vn(wt)),q=n.getDerivedStateFromProps,(wt=typeof q=="function"||typeof r.getSnapshotBeforeUpdate=="function")||typeof r.UNSAFE_componentWillReceiveProps!="function"&&typeof r.componentWillReceiveProps!="function"||(S!==Bt||jt!==ot)&&fd(e,r,i,ot),As=!1,jt=e.memoizedState,r.state=jt,Dr(e,i,r,a),kr();var Mt=e.memoizedState;S!==Bt||jt!==Mt||As||t!==null&&t.dependencies!==null&&vo(t.dependencies)?(typeof q=="function"&&(oc(e,n,q,i),Mt=e.memoizedState),(Ot=As||hd(e,n,Ot,i,jt,Mt,ot)||t!==null&&t.dependencies!==null&&vo(t.dependencies))?(wt||typeof r.UNSAFE_componentWillUpdate!="function"&&typeof r.componentWillUpdate!="function"||(typeof r.componentWillUpdate=="function"&&r.componentWillUpdate(i,Mt,ot),typeof r.UNSAFE_componentWillUpdate=="function"&&r.UNSAFE_componentWillUpdate(i,Mt,ot)),typeof r.componentDidUpdate=="function"&&(e.flags|=4),typeof r.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof r.componentDidUpdate!="function"||S===t.memoizedProps&&jt===t.memoizedState||(e.flags|=4),typeof r.getSnapshotBeforeUpdate!="function"||S===t.memoizedProps&&jt===t.memoizedState||(e.flags|=1024),e.memoizedProps=i,e.memoizedState=Mt),r.props=i,r.state=Mt,r.context=ot,i=Ot):(typeof r.componentDidUpdate!="function"||S===t.memoizedProps&&jt===t.memoizedState||(e.flags|=4),typeof r.getSnapshotBeforeUpdate!="function"||S===t.memoizedProps&&jt===t.memoizedState||(e.flags|=1024),i=!1)}return r=i,zo(t,e),i=(e.flags&128)!==0,r||i?(r=e.stateNode,n=i&&typeof n.getDerivedStateFromError!="function"?null:r.render(),e.flags|=1,t!==null&&i?(e.child=la(e,t.child,null,a),e.child=la(e,null,n,a)):bn(t,e,n,a),e.memoizedState=r.state,t=e.child):t=Ji(t,e,a),t}function Cd(t,e,n,i){return na(),e.flags|=256,bn(t,e,n,i),e.child}var hc={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function fc(t){return{baseLanes:t,cachePool:yu()}}function pc(t,e,n){return t=t!==null?t.childLanes&~n:0,e&&(t|=Vn),t}function jd(t,e,n){var i=e.pendingProps,a=!1,r=(e.flags&128)!==0,S;if((S=r)||(S=t!==null&&t.memoizedState===null?!1:(en.current&2)!==0),S&&(a=!0,e.flags&=-129),S=(e.flags&32)!==0,e.flags&=-33,t===null){if(Ae){if(a?Rs(e):Ts(),(t=Ke)?(t=Fh(t,ri),t=t!==null&&t.data!=="&"?t:null,t!==null&&(e.memoizedState={dehydrated:t,treeContext:vs!==null?{id:ji,overflow:Mi}:null,retryLane:536870912,hydrationErrors:null},n=lu(t),n.return=e,e.child=n,xn=e,Ke=null)):t=null,t===null)throw _s(e);return Qc(t)?e.lanes=32:e.lanes=536870912,null}var q=i.children;return i=i.fallback,a?(Ts(),a=e.mode,q=Io({mode:"hidden",children:q},a),i=ea(i,a,n,null),q.return=e,i.return=e,q.sibling=i,e.child=q,i=e.child,i.memoizedState=fc(n),i.childLanes=pc(t,S,n),e.memoizedState=hc,Fr(null,i)):(Rs(e),mc(e,q))}var ot=t.memoizedState;if(ot!==null&&(q=ot.dehydrated,q!==null)){if(r)e.flags&256?(Rs(e),e.flags&=-257,e=gc(t,e,n)):e.memoizedState!==null?(Ts(),e.child=t.child,e.flags|=128,e=null):(Ts(),q=i.fallback,a=e.mode,i=Io({mode:"visible",children:i.children},a),q=ea(q,a,n,null),q.flags|=2,i.return=e,q.return=e,i.sibling=q,e.child=i,la(e,t.child,null,n),i=e.child,i.memoizedState=fc(n),i.childLanes=pc(t,S,n),e.memoizedState=hc,e=Fr(null,i));else if(Rs(e),Qc(q)){if(S=q.nextSibling&&q.nextSibling.dataset,S)var wt=S.dgst;S=wt,i=Error(o(419)),i.stack="",i.digest=S,wr({value:i,source:null,stack:null}),e=gc(t,e,n)}else if(on||Fa(t,e,n,!1),S=(n&t.childLanes)!==0,on||S){if(S=Be,S!==null&&(i=Ie(S,n),i!==0&&i!==ot.retryLane))throw ot.retryLane=i,Me(t,i),Bn(S,t,i),uc;Wc(q)||Vo(),e=gc(t,e,n)}else Wc(q)?(e.flags|=192,e.child=t.child,e=null):(t=ot.treeContext,Ke=li(q.nextSibling),xn=e,Ae=!0,bs=null,ri=!1,t!==null&&du(e,t),e=mc(e,i.children),e.flags|=4096);return e}return a?(Ts(),q=i.fallback,a=e.mode,ot=t.child,wt=ot.sibling,i=Xi(ot,{mode:"hidden",children:i.children}),i.subtreeFlags=ot.subtreeFlags&65011712,wt!==null?q=Xi(wt,q):(q=ea(q,a,n,null),q.flags|=2),q.return=e,i.return=e,i.sibling=q,e.child=i,Fr(null,i),i=e.child,q=t.child.memoizedState,q===null?q=fc(n):(a=q.cachePool,a!==null?(ot=an._currentValue,a=a.parent!==ot?{parent:ot,pool:ot}:a):a=yu(),q={baseLanes:q.baseLanes|n,cachePool:a}),i.memoizedState=q,i.childLanes=pc(t,S,n),e.memoizedState=hc,Fr(t.child,i)):(Rs(e),n=t.child,t=n.sibling,n=Xi(n,{mode:"visible",children:i.children}),n.return=e,n.sibling=null,t!==null&&(S=e.deletions,S===null?(e.deletions=[t],e.flags|=16):S.push(t)),e.child=n,e.memoizedState=null,n)}function mc(t,e){return e=Io({mode:"visible",children:e},t.mode),e.return=t,t.child=e}function Io(t,e){return t=Gn(22,t,null,e),t.lanes=0,t}function gc(t,e,n){return la(e,t.child,null,n),t=mc(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function Md(t,e,n){t.lanes|=e;var i=t.alternate;i!==null&&(i.lanes|=e),kl(t.return,e,n)}function yc(t,e,n,i,a,r){var S=t.memoizedState;S===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:a,treeForkCount:r}:(S.isBackwards=e,S.rendering=null,S.renderingStartTime=0,S.last=i,S.tail=n,S.tailMode=a,S.treeForkCount=r)}function kd(t,e,n){var i=e.pendingProps,a=i.revealOrder,r=i.tail;i=i.children;var S=en.current,q=(S&2)!==0;if(q?(S=S&1|2,e.flags|=128):S&=1,H(en,S),bn(t,e,i,n),i=Ae?Sr:0,!q&&t!==null&&(t.flags&128)!==0)t:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Md(t,n,e);else if(t.tag===19)Md(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break t;for(;t.sibling===null;){if(t.return===null||t.return===e)break t;t=t.return}t.sibling.return=t.return,t=t.sibling}switch(a){case"forwards":for(n=e.child,a=null;n!==null;)t=n.alternate,t!==null&&To(t)===null&&(a=n),n=n.sibling;n=a,n===null?(a=e.child,e.child=null):(a=n.sibling,n.sibling=null),yc(e,!1,a,n,r,i);break;case"backwards":case"unstable_legacy-backwards":for(n=null,a=e.child,e.child=null;a!==null;){if(t=a.alternate,t!==null&&To(t)===null){e.child=a;break}t=a.sibling,a.sibling=n,n=a,a=t}yc(e,!0,n,null,r,i);break;case"together":yc(e,!1,null,null,void 0,i);break;default:e.memoizedState=null}return e.child}function Ji(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Ms|=e.lanes,(n&e.childLanes)===0)if(t!==null){if(Fa(t,e,n,!1),(n&e.childLanes)===0)return null}else return null;if(t!==null&&e.child!==t.child)throw Error(o(153));if(e.child!==null){for(t=e.child,n=Xi(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Xi(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function xc(t,e){return(t.lanes&e)!==0?!0:(t=t.dependencies,!!(t!==null&&vo(t)))}function wf(t,e,n){switch(e.tag){case 3:I(e,e.stateNode.containerInfo),Es(e,an,t.memoizedState.cache),na();break;case 27:case 5:G(e);break;case 4:I(e,e.stateNode.containerInfo);break;case 10:Es(e,e.type,e.memoizedProps.value);break;case 31:if(e.memoizedState!==null)return e.flags|=128,Hl(e),null;break;case 13:var i=e.memoizedState;if(i!==null)return i.dehydrated!==null?(Rs(e),e.flags|=128,null):(n&e.child.childLanes)!==0?jd(t,e,n):(Rs(e),t=Ji(t,e,n),t!==null?t.sibling:null);Rs(e);break;case 19:var a=(t.flags&128)!==0;if(i=(n&e.childLanes)!==0,i||(Fa(t,e,n,!1),i=(n&e.childLanes)!==0),a){if(i)return kd(t,e,n);e.flags|=128}if(a=e.memoizedState,a!==null&&(a.rendering=null,a.tail=null,a.lastEffect=null),H(en,en.current),i)break;return null;case 22:return e.lanes=0,Ad(t,e,n,e.pendingProps);case 24:Es(e,an,t.memoizedState.cache)}return Ji(t,e,n)}function Dd(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps)on=!0;else{if(!xc(t,n)&&(e.flags&128)===0)return on=!1,wf(t,e,n);on=(t.flags&131072)!==0}else on=!1,Ae&&(e.flags&1048576)!==0&&uu(e,Sr,e.index);switch(e.lanes=0,e.tag){case 16:t:{var i=e.pendingProps;if(t=ra(e.elementType),e.type=t,typeof t=="function")Al(t)?(i=ua(t,i),e.tag=1,e=Td(null,e,t,i,n)):(e.tag=0,e=dc(null,e,t,i,n));else{if(t!=null){var a=t.$$typeof;if(a===V){e.tag=11,e=bd(null,e,t,i,n);break t}else if(a===$){e.tag=14,e=_d(null,e,t,i,n);break t}}throw e=Ft(t)||t,Error(o(306,e,""))}}return e;case 0:return dc(t,e,e.type,e.pendingProps,n);case 1:return i=e.type,a=ua(i,e.pendingProps),Td(t,e,i,a,n);case 3:t:{if(I(e,e.stateNode.containerInfo),t===null)throw Error(o(387));i=e.pendingProps;var r=e.memoizedState;a=r.element,zl(t,e),Dr(e,i,null,n);var S=e.memoizedState;if(i=S.cache,Es(e,an,i),i!==r.cache&&Dl(e,[an],n,!0),kr(),i=S.element,r.isDehydrated)if(r={element:i,isDehydrated:!1,cache:S.cache},e.updateQueue.baseState=r,e.memoizedState=r,e.flags&256){e=Cd(t,e,i,n);break t}else if(i!==a){a=ni(Error(o(424)),e),wr(a),e=Cd(t,e,i,n);break t}else for(t=e.stateNode.containerInfo,t.nodeType===9?t=t.body:t=t.nodeName==="HTML"?t.ownerDocument.body:t,Ke=li(t.firstChild),xn=e,Ae=!0,bs=null,ri=!0,n=Au(e,null,i,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(na(),i===a){e=Ji(t,e,n);break t}bn(t,e,i,n)}e=e.child}return e;case 26:return zo(t,e),t===null?(n=Hh(e.type,null,e.pendingProps,null))?e.memoizedState=n:Ae||(n=e.type,t=e.pendingProps,i=el(m.current).createElement(n),i[qe]=e,i[$e]=t,_n(i,n,t),tn(i),e.stateNode=i):e.memoizedState=Hh(e.type,t.memoizedProps,e.pendingProps,t.memoizedState),null;case 27:return G(e),t===null&&Ae&&(i=e.stateNode=Bh(e.type,e.pendingProps,m.current),xn=e,ri=!0,a=Ke,Ls(e.type)?(Zc=a,Ke=li(i.firstChild)):Ke=a),bn(t,e,e.pendingProps.children,n),zo(t,e),t===null&&(e.flags|=4194304),e.child;case 5:return t===null&&Ae&&((a=i=Ke)&&(i=ep(i,e.type,e.pendingProps,ri),i!==null?(e.stateNode=i,xn=e,Ke=li(i.firstChild),ri=!1,a=!0):a=!1),a||_s(e)),G(e),a=e.type,r=e.pendingProps,S=t!==null?t.memoizedProps:null,i=r.children,Xc(a,r)?i=null:S!==null&&Xc(a,S)&&(e.flags|=32),e.memoizedState!==null&&(a=Kl(t,e,gf,null,null,n),Jr._currentValue=a),zo(t,e),bn(t,e,i,n),e.child;case 6:return t===null&&Ae&&((t=n=Ke)&&(n=np(n,e.pendingProps,ri),n!==null?(e.stateNode=n,xn=e,Ke=null,t=!0):t=!1),t||_s(e)),null;case 13:return jd(t,e,n);case 4:return I(e,e.stateNode.containerInfo),i=e.pendingProps,t===null?e.child=la(e,null,i,n):bn(t,e,i,n),e.child;case 11:return bd(t,e,e.type,e.pendingProps,n);case 7:return bn(t,e,e.pendingProps,n),e.child;case 8:return bn(t,e,e.pendingProps.children,n),e.child;case 12:return bn(t,e,e.pendingProps.children,n),e.child;case 10:return i=e.pendingProps,Es(e,e.type,i.value),bn(t,e,i.children,n),e.child;case 9:return a=e.type._context,i=e.pendingProps.children,sa(e),a=vn(a),i=i(a),e.flags|=1,bn(t,e,i,n),e.child;case 14:return _d(t,e,e.type,e.pendingProps,n);case 15:return Ed(t,e,e.type,e.pendingProps,n);case 19:return kd(t,e,n);case 31:return Sf(t,e,n);case 22:return Ad(t,e,n,e.pendingProps);case 24:return sa(e),i=vn(an),t===null?(a=Ll(),a===null&&(a=Be,r=Nl(),a.pooledCache=r,r.refCount++,r!==null&&(a.pooledCacheLanes|=n),a=r),e.memoizedState={parent:i,cache:a},Fl(e),Es(e,an,a)):((t.lanes&n)!==0&&(zl(t,e),Dr(e,null,null,n),kr()),a=t.memoizedState,r=e.memoizedState,a.parent!==i?(a={parent:i,cache:i},e.memoizedState=a,e.lanes===0&&(e.memoizedState=e.updateQueue.baseState=a),Es(e,an,i)):(i=r.cache,Es(e,an,i),i!==a.cache&&Dl(e,[an],n,!0))),bn(t,e,e.pendingProps.children,n),e.child;case 29:throw e.pendingProps}throw Error(o(156,e.tag))}function $i(t){t.flags|=4}function vc(t,e,n,i,a){if((e=(t.mode&32)!==0)&&(e=!1),e){if(t.flags|=16777216,(a&335544128)===a)if(t.stateNode.complete)t.flags|=8192;else if(ah())t.flags|=8192;else throw oa=Ao,Pl}else t.flags&=-16777217}function Nd(t,e){if(e.type!=="stylesheet"||(e.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!Vh(e))if(ah())t.flags|=8192;else throw oa=Ao,Pl}function Bo(t,e){e!==null&&(t.flags|=4),t.flags&16384&&(e=t.tag!==22?Ni():536870912,t.lanes|=e,Wa|=e)}function zr(t,e){if(!Ae)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:i.sibling=null}}function Xe(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,i=0;if(e)for(var a=t.child;a!==null;)n|=a.lanes|a.childLanes,i|=a.subtreeFlags&65011712,i|=a.flags&65011712,a.return=t,a=a.sibling;else for(a=t.child;a!==null;)n|=a.lanes|a.childLanes,i|=a.subtreeFlags,i|=a.flags,a.return=t,a=a.sibling;return t.subtreeFlags|=i,t.childLanes=n,e}function Rf(t,e,n){var i=e.pendingProps;switch(Tl(e),e.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Xe(e),null;case 1:return Xe(e),null;case 3:return n=e.stateNode,i=null,t!==null&&(i=t.memoizedState.cache),e.memoizedState.cache!==i&&(e.flags|=2048),Wi(an),W(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(t===null||t.child===null)&&(Pa(e)?$i(e):t===null||t.memoizedState.isDehydrated&&(e.flags&256)===0||(e.flags|=1024,jl())),Xe(e),null;case 26:var a=e.type,r=e.memoizedState;return t===null?($i(e),r!==null?(Xe(e),Nd(e,r)):(Xe(e),vc(e,a,null,i,n))):r?r!==t.memoizedState?($i(e),Xe(e),Nd(e,r)):(Xe(e),e.flags&=-16777217):(t=t.memoizedProps,t!==i&&$i(e),Xe(e),vc(e,a,t,i,n)),null;case 27:if(it(e),n=m.current,a=e.type,t!==null&&e.stateNode!=null)t.memoizedProps!==i&&$i(e);else{if(!i){if(e.stateNode===null)throw Error(o(166));return Xe(e),null}t=J.current,Pa(e)?hu(e):(t=Bh(a,i,n),e.stateNode=t,$i(e))}return Xe(e),null;case 5:if(it(e),a=e.type,t!==null&&e.stateNode!=null)t.memoizedProps!==i&&$i(e);else{if(!i){if(e.stateNode===null)throw Error(o(166));return Xe(e),null}if(r=J.current,Pa(e))hu(e);else{var S=el(m.current);switch(r){case 1:r=S.createElementNS("http://www.w3.org/2000/svg",a);break;case 2:r=S.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;default:switch(a){case"svg":r=S.createElementNS("http://www.w3.org/2000/svg",a);break;case"math":r=S.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;case"script":r=S.createElement("div"),r.innerHTML="<script><\/script>",r=r.removeChild(r.firstChild);break;case"select":r=typeof i.is=="string"?S.createElement("select",{is:i.is}):S.createElement("select"),i.multiple?r.multiple=!0:i.size&&(r.size=i.size);break;default:r=typeof i.is=="string"?S.createElement(a,{is:i.is}):S.createElement(a)}}r[qe]=e,r[$e]=i;t:for(S=e.child;S!==null;){if(S.tag===5||S.tag===6)r.appendChild(S.stateNode);else if(S.tag!==4&&S.tag!==27&&S.child!==null){S.child.return=S,S=S.child;continue}if(S===e)break t;for(;S.sibling===null;){if(S.return===null||S.return===e)break t;S=S.return}S.sibling.return=S.return,S=S.sibling}e.stateNode=r;t:switch(_n(r,a,i),a){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break t;case"img":i=!0;break t;default:i=!1}i&&$i(e)}}return Xe(e),vc(e,e.type,t===null?null:t.memoizedProps,e.pendingProps,n),null;case 6:if(t&&e.stateNode!=null)t.memoizedProps!==i&&$i(e);else{if(typeof i!="string"&&e.stateNode===null)throw Error(o(166));if(t=m.current,Pa(e)){if(t=e.stateNode,n=e.memoizedProps,i=null,a=xn,a!==null)switch(a.tag){case 27:case 5:i=a.memoizedProps}t[qe]=e,t=!!(t.nodeValue===n||i!==null&&i.suppressHydrationWarning===!0||jh(t.nodeValue,n)),t||_s(e,!0)}else t=el(t).createTextNode(i),t[qe]=e,e.stateNode=t}return Xe(e),null;case 31:if(n=e.memoizedState,t===null||t.memoizedState!==null){if(i=Pa(e),n!==null){if(t===null){if(!i)throw Error(o(318));if(t=e.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(o(557));t[qe]=e}else na(),(e.flags&128)===0&&(e.memoizedState=null),e.flags|=4;Xe(e),t=!1}else n=jl(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=n),t=!0;if(!t)return e.flags&256?(Xn(e),e):(Xn(e),null);if((e.flags&128)!==0)throw Error(o(558))}return Xe(e),null;case 13:if(i=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(a=Pa(e),i!==null&&i.dehydrated!==null){if(t===null){if(!a)throw Error(o(318));if(a=e.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(o(317));a[qe]=e}else na(),(e.flags&128)===0&&(e.memoizedState=null),e.flags|=4;Xe(e),a=!1}else a=jl(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=a),a=!0;if(!a)return e.flags&256?(Xn(e),e):(Xn(e),null)}return Xn(e),(e.flags&128)!==0?(e.lanes=n,e):(n=i!==null,t=t!==null&&t.memoizedState!==null,n&&(i=e.child,a=null,i.alternate!==null&&i.alternate.memoizedState!==null&&i.alternate.memoizedState.cachePool!==null&&(a=i.alternate.memoizedState.cachePool.pool),r=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(r=i.memoizedState.cachePool.pool),r!==a&&(i.flags|=2048)),n!==t&&n&&(e.child.flags|=8192),Bo(e,e.updateQueue),Xe(e),null);case 4:return W(),t===null&&Uc(e.stateNode.containerInfo),Xe(e),null;case 10:return Wi(e.type),Xe(e),null;case 19:if(L(en),i=e.memoizedState,i===null)return Xe(e),null;if(a=(e.flags&128)!==0,r=i.rendering,r===null)if(a)zr(i,!1);else{if(Je!==0||t!==null&&(t.flags&128)!==0)for(t=e.child;t!==null;){if(r=To(t),r!==null){for(e.flags|=128,zr(i,!1),t=r.updateQueue,e.updateQueue=t,Bo(e,t),e.subtreeFlags=0,t=n,n=e.child;n!==null;)ou(n,t),n=n.sibling;return H(en,en.current&1|2),Ae&&Yi(e,i.treeForkCount),e.child}t=t.sibling}i.tail!==null&&oe()>Ko&&(e.flags|=128,a=!0,zr(i,!1),e.lanes=4194304)}else{if(!a)if(t=To(r),t!==null){if(e.flags|=128,a=!0,t=t.updateQueue,e.updateQueue=t,Bo(e,t),zr(i,!0),i.tail===null&&i.tailMode==="hidden"&&!r.alternate&&!Ae)return Xe(e),null}else 2*oe()-i.renderingStartTime>Ko&&n!==536870912&&(e.flags|=128,a=!0,zr(i,!1),e.lanes=4194304);i.isBackwards?(r.sibling=e.child,e.child=r):(t=i.last,t!==null?t.sibling=r:e.child=r,i.last=r)}return i.tail!==null?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=oe(),t.sibling=null,n=en.current,H(en,a?n&1|2:n&1),Ae&&Yi(e,i.treeForkCount),t):(Xe(e),null);case 22:case 23:return Xn(e),ql(),i=e.memoizedState!==null,t!==null?t.memoizedState!==null!==i&&(e.flags|=8192):i&&(e.flags|=8192),i?(n&536870912)!==0&&(e.flags&128)===0&&(Xe(e),e.subtreeFlags&6&&(e.flags|=8192)):Xe(e),n=e.updateQueue,n!==null&&Bo(e,n.retryQueue),n=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(n=t.memoizedState.cachePool.pool),i=null,e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(i=e.memoizedState.cachePool.pool),i!==n&&(e.flags|=2048),t!==null&&L(aa),null;case 24:return n=null,t!==null&&(n=t.memoizedState.cache),e.memoizedState.cache!==n&&(e.flags|=2048),Wi(an),Xe(e),null;case 25:return null;case 30:return null}throw Error(o(156,e.tag))}function Tf(t,e){switch(Tl(e),e.tag){case 1:return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Wi(an),W(),t=e.flags,(t&65536)!==0&&(t&128)===0?(e.flags=t&-65537|128,e):null;case 26:case 27:case 5:return it(e),null;case 31:if(e.memoizedState!==null){if(Xn(e),e.alternate===null)throw Error(o(340));na()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 13:if(Xn(e),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(o(340));na()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return L(en),null;case 4:return W(),null;case 10:return Wi(e.type),null;case 22:case 23:return Xn(e),ql(),t!==null&&L(aa),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 24:return Wi(an),null;case 25:return null;default:return null}}function Od(t,e){switch(Tl(e),e.tag){case 3:Wi(an),W();break;case 26:case 27:case 5:it(e);break;case 4:W();break;case 31:e.memoizedState!==null&&Xn(e);break;case 13:Xn(e);break;case 19:L(en);break;case 10:Wi(e.type);break;case 22:case 23:Xn(e),ql(),t!==null&&L(aa);break;case 24:Wi(an)}}function Ir(t,e){try{var n=e.updateQueue,i=n!==null?n.lastEffect:null;if(i!==null){var a=i.next;n=a;do{if((n.tag&t)===t){i=void 0;var r=n.create,S=n.inst;i=r(),S.destroy=i}n=n.next}while(n!==a)}}catch(q){Ne(e,e.return,q)}}function Cs(t,e,n){try{var i=e.updateQueue,a=i!==null?i.lastEffect:null;if(a!==null){var r=a.next;i=r;do{if((i.tag&t)===t){var S=i.inst,q=S.destroy;if(q!==void 0){S.destroy=void 0,a=e;var ot=n,wt=q;try{wt()}catch(Ot){Ne(a,ot,Ot)}}}i=i.next}while(i!==r)}}catch(Ot){Ne(e,e.return,Ot)}}function Ld(t){var e=t.updateQueue;if(e!==null){var n=t.stateNode;try{wu(e,n)}catch(i){Ne(t,t.return,i)}}}function Pd(t,e,n){n.props=ua(t.type,t.memoizedProps),n.state=t.memoizedState;try{n.componentWillUnmount()}catch(i){Ne(t,e,i)}}function Br(t,e){try{var n=t.ref;if(n!==null){switch(t.tag){case 26:case 27:case 5:var i=t.stateNode;break;case 30:i=t.stateNode;break;default:i=t.stateNode}typeof n=="function"?t.refCleanup=n(i):n.current=i}}catch(a){Ne(t,e,a)}}function ki(t,e){var n=t.ref,i=t.refCleanup;if(n!==null)if(typeof i=="function")try{i()}catch(a){Ne(t,e,a)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof n=="function")try{n(null)}catch(a){Ne(t,e,a)}else n.current=null}function Fd(t){var e=t.type,n=t.memoizedProps,i=t.stateNode;try{t:switch(e){case"button":case"input":case"select":case"textarea":n.autoFocus&&i.focus();break t;case"img":n.src?i.src=n.src:n.srcSet&&(i.srcset=n.srcSet)}}catch(a){Ne(t,t.return,a)}}function bc(t,e,n){try{var i=t.stateNode;Wf(i,t.type,n,e),i[$e]=e}catch(a){Ne(t,t.return,a)}}function zd(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&Ls(t.type)||t.tag===4}function _c(t){t:for(;;){for(;t.sibling===null;){if(t.return===null||zd(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&Ls(t.type)||t.flags&2||t.child===null||t.tag===4)continue t;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Ec(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n).insertBefore(t,e):(e=n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,e.appendChild(t),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Ln));else if(i!==4&&(i===27&&Ls(t.type)&&(n=t.stateNode,e=null),t=t.child,t!==null))for(Ec(t,e,n),t=t.sibling;t!==null;)Ec(t,e,n),t=t.sibling}function Uo(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(i!==4&&(i===27&&Ls(t.type)&&(n=t.stateNode),t=t.child,t!==null))for(Uo(t,e,n),t=t.sibling;t!==null;)Uo(t,e,n),t=t.sibling}function Id(t){var e=t.stateNode,n=t.memoizedProps;try{for(var i=t.type,a=e.attributes;a.length;)e.removeAttributeNode(a[0]);_n(e,i,n),e[qe]=t,e[$e]=n}catch(r){Ne(t,t.return,r)}}var ts=!1,ln=!1,Ac=!1,Bd=typeof WeakSet=="function"?WeakSet:Set,mn=null;function Cf(t,e){if(t=t.containerInfo,Gc=ll,t=C(t),P(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else t:{n=(n=t.ownerDocument)&&n.defaultView||window;var i=n.getSelection&&n.getSelection();if(i&&i.rangeCount!==0){n=i.anchorNode;var a=i.anchorOffset,r=i.focusNode;i=i.focusOffset;try{n.nodeType,r.nodeType}catch{n=null;break t}var S=0,q=-1,ot=-1,wt=0,Ot=0,Bt=t,jt=null;e:for(;;){for(var Mt;Bt!==n||a!==0&&Bt.nodeType!==3||(q=S+a),Bt!==r||i!==0&&Bt.nodeType!==3||(ot=S+i),Bt.nodeType===3&&(S+=Bt.nodeValue.length),(Mt=Bt.firstChild)!==null;)jt=Bt,Bt=Mt;for(;;){if(Bt===t)break e;if(jt===n&&++wt===a&&(q=S),jt===r&&++Ot===i&&(ot=S),(Mt=Bt.nextSibling)!==null)break;Bt=jt,jt=Bt.parentNode}Bt=Mt}n=q===-1||ot===-1?null:{start:q,end:ot}}else n=null}n=n||{start:0,end:0}}else n=null;for(Kc={focusedElem:t,selectionRange:n},ll=!1,mn=e;mn!==null;)if(e=mn,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,mn=t;else for(;mn!==null;){switch(e=mn,r=e.alternate,t=e.flags,e.tag){case 0:if((t&4)!==0&&(t=e.updateQueue,t=t!==null?t.events:null,t!==null))for(n=0;n<t.length;n++)a=t[n],a.ref.impl=a.nextImpl;break;case 11:case 15:break;case 1:if((t&1024)!==0&&r!==null){t=void 0,n=e,a=r.memoizedProps,r=r.memoizedState,i=n.stateNode;try{var ne=ua(n.type,a);t=i.getSnapshotBeforeUpdate(ne,r),i.__reactInternalSnapshotBeforeUpdate=t}catch(ce){Ne(n,n.return,ce)}}break;case 3:if((t&1024)!==0){if(t=e.stateNode.containerInfo,n=t.nodeType,n===9)Vc(t);else if(n===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":Vc(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(o(163))}if(t=e.sibling,t!==null){t.return=e.return,mn=t;break}mn=e.return}}function Ud(t,e,n){var i=n.flags;switch(n.tag){case 0:case 11:case 15:ns(t,n),i&4&&Ir(5,n);break;case 1:if(ns(t,n),i&4)if(t=n.stateNode,e===null)try{t.componentDidMount()}catch(S){Ne(n,n.return,S)}else{var a=ua(n.type,e.memoizedProps);e=e.memoizedState;try{t.componentDidUpdate(a,e,t.__reactInternalSnapshotBeforeUpdate)}catch(S){Ne(n,n.return,S)}}i&64&&Ld(n),i&512&&Br(n,n.return);break;case 3:if(ns(t,n),i&64&&(t=n.updateQueue,t!==null)){if(e=null,n.child!==null)switch(n.child.tag){case 27:case 5:e=n.child.stateNode;break;case 1:e=n.child.stateNode}try{wu(t,e)}catch(S){Ne(n,n.return,S)}}break;case 27:e===null&&i&4&&Id(n);case 26:case 5:ns(t,n),e===null&&i&4&&Fd(n),i&512&&Br(n,n.return);break;case 12:ns(t,n);break;case 31:ns(t,n),i&4&&Gd(t,n);break;case 13:ns(t,n),i&4&&Kd(t,n),i&64&&(t=n.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(n=Ff.bind(null,n),ip(t,n))));break;case 22:if(i=n.memoizedState!==null||ts,!i){e=e!==null&&e.memoizedState!==null||ln,a=ts;var r=ln;ts=i,(ln=e)&&!r?is(t,n,(n.subtreeFlags&8772)!==0):ns(t,n),ts=a,ln=r}break;case 30:break;default:ns(t,n)}}function qd(t){var e=t.alternate;e!==null&&(t.alternate=null,qd(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&fa(e)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var Ve=null,Pn=!1;function es(t,e,n){for(n=n.child;n!==null;)Hd(t,e,n),n=n.sibling}function Hd(t,e,n){if(It&&typeof It.onCommitFiberUnmount=="function")try{It.onCommitFiberUnmount(Qn,n)}catch{}switch(n.tag){case 26:ln||ki(n,e),es(t,e,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode,n.parentNode.removeChild(n));break;case 27:ln||ki(n,e);var i=Ve,a=Pn;Ls(n.type)&&(Ve=n.stateNode,Pn=!1),es(t,e,n),Wr(n.stateNode),Ve=i,Pn=a;break;case 5:ln||ki(n,e);case 6:if(i=Ve,a=Pn,Ve=null,es(t,e,n),Ve=i,Pn=a,Ve!==null)if(Pn)try{(Ve.nodeType===9?Ve.body:Ve.nodeName==="HTML"?Ve.ownerDocument.body:Ve).removeChild(n.stateNode)}catch(r){Ne(n,e,r)}else try{Ve.removeChild(n.stateNode)}catch(r){Ne(n,e,r)}break;case 18:Ve!==null&&(Pn?(t=Ve,Lh(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,n.stateNode),ir(t)):Lh(Ve,n.stateNode));break;case 4:i=Ve,a=Pn,Ve=n.stateNode.containerInfo,Pn=!0,es(t,e,n),Ve=i,Pn=a;break;case 0:case 11:case 14:case 15:Cs(2,n,e),ln||Cs(4,n,e),es(t,e,n);break;case 1:ln||(ki(n,e),i=n.stateNode,typeof i.componentWillUnmount=="function"&&Pd(n,e,i)),es(t,e,n);break;case 21:es(t,e,n);break;case 22:ln=(i=ln)||n.memoizedState!==null,es(t,e,n),ln=i;break;default:es(t,e,n)}}function Gd(t,e){if(e.memoizedState===null&&(t=e.alternate,t!==null&&(t=t.memoizedState,t!==null))){t=t.dehydrated;try{ir(t)}catch(n){Ne(e,e.return,n)}}}function Kd(t,e){if(e.memoizedState===null&&(t=e.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{ir(t)}catch(n){Ne(e,e.return,n)}}function jf(t){switch(t.tag){case 31:case 13:case 19:var e=t.stateNode;return e===null&&(e=t.stateNode=new Bd),e;case 22:return t=t.stateNode,e=t._retryCache,e===null&&(e=t._retryCache=new Bd),e;default:throw Error(o(435,t.tag))}}function qo(t,e){var n=jf(t);e.forEach(function(i){if(!n.has(i)){n.add(i);var a=zf.bind(null,t,i);i.then(a,a)}})}function Fn(t,e){var n=e.deletions;if(n!==null)for(var i=0;i<n.length;i++){var a=n[i],r=t,S=e,q=S;t:for(;q!==null;){switch(q.tag){case 27:if(Ls(q.type)){Ve=q.stateNode,Pn=!1;break t}break;case 5:Ve=q.stateNode,Pn=!1;break t;case 3:case 4:Ve=q.stateNode.containerInfo,Pn=!0;break t}q=q.return}if(Ve===null)throw Error(o(160));Hd(r,S,a),Ve=null,Pn=!1,r=a.alternate,r!==null&&(r.return=null),a.return=null}if(e.subtreeFlags&13886)for(e=e.child;e!==null;)Xd(e,t),e=e.sibling}var gi=null;function Xd(t,e){var n=t.alternate,i=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:Fn(e,t),zn(t),i&4&&(Cs(3,t,t.return),Ir(3,t),Cs(5,t,t.return));break;case 1:Fn(e,t),zn(t),i&512&&(ln||n===null||ki(n,n.return)),i&64&&ts&&(t=t.updateQueue,t!==null&&(i=t.callbacks,i!==null&&(n=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=n===null?i:n.concat(i))));break;case 26:var a=gi;if(Fn(e,t),zn(t),i&512&&(ln||n===null||ki(n,n.return)),i&4){var r=n!==null?n.memoizedState:null;if(i=t.memoizedState,n===null)if(i===null)if(t.stateNode===null){t:{i=t.type,n=t.memoizedProps,a=a.ownerDocument||a;e:switch(i){case"title":r=a.getElementsByTagName("title")[0],(!r||r[Un]||r[qe]||r.namespaceURI==="http://www.w3.org/2000/svg"||r.hasAttribute("itemprop"))&&(r=a.createElement(i),a.head.insertBefore(r,a.querySelector("head > title"))),_n(r,i,n),r[qe]=t,tn(r),i=r;break t;case"link":var S=Xh("link","href",a).get(i+(n.href||""));if(S){for(var q=0;q<S.length;q++)if(r=S[q],r.getAttribute("href")===(n.href==null||n.href===""?null:n.href)&&r.getAttribute("rel")===(n.rel==null?null:n.rel)&&r.getAttribute("title")===(n.title==null?null:n.title)&&r.getAttribute("crossorigin")===(n.crossOrigin==null?null:n.crossOrigin)){S.splice(q,1);break e}}r=a.createElement(i),_n(r,i,n),a.head.appendChild(r);break;case"meta":if(S=Xh("meta","content",a).get(i+(n.content||""))){for(q=0;q<S.length;q++)if(r=S[q],r.getAttribute("content")===(n.content==null?null:""+n.content)&&r.getAttribute("name")===(n.name==null?null:n.name)&&r.getAttribute("property")===(n.property==null?null:n.property)&&r.getAttribute("http-equiv")===(n.httpEquiv==null?null:n.httpEquiv)&&r.getAttribute("charset")===(n.charSet==null?null:n.charSet)){S.splice(q,1);break e}}r=a.createElement(i),_n(r,i,n),a.head.appendChild(r);break;default:throw Error(o(468,i))}r[qe]=t,tn(r),i=r}t.stateNode=i}else Yh(a,t.type,t.stateNode);else t.stateNode=Kh(a,i,t.memoizedProps);else r!==i?(r===null?n.stateNode!==null&&(n=n.stateNode,n.parentNode.removeChild(n)):r.count--,i===null?Yh(a,t.type,t.stateNode):Kh(a,i,t.memoizedProps)):i===null&&t.stateNode!==null&&bc(t,t.memoizedProps,n.memoizedProps)}break;case 27:Fn(e,t),zn(t),i&512&&(ln||n===null||ki(n,n.return)),n!==null&&i&4&&bc(t,t.memoizedProps,n.memoizedProps);break;case 5:if(Fn(e,t),zn(t),i&512&&(ln||n===null||ki(n,n.return)),t.flags&32){a=t.stateNode;try{Pi(a,"")}catch(ne){Ne(t,t.return,ne)}}i&4&&t.stateNode!=null&&(a=t.memoizedProps,bc(t,a,n!==null?n.memoizedProps:a)),i&1024&&(Ac=!0);break;case 6:if(Fn(e,t),zn(t),i&4){if(t.stateNode===null)throw Error(o(162));i=t.memoizedProps,n=t.stateNode;try{n.nodeValue=i}catch(ne){Ne(t,t.return,ne)}}break;case 3:if(sl=null,a=gi,gi=nl(e.containerInfo),Fn(e,t),gi=a,zn(t),i&4&&n!==null&&n.memoizedState.isDehydrated)try{ir(e.containerInfo)}catch(ne){Ne(t,t.return,ne)}Ac&&(Ac=!1,Yd(t));break;case 4:i=gi,gi=nl(t.stateNode.containerInfo),Fn(e,t),zn(t),gi=i;break;case 12:Fn(e,t),zn(t);break;case 31:Fn(e,t),zn(t),i&4&&(i=t.updateQueue,i!==null&&(t.updateQueue=null,qo(t,i)));break;case 13:Fn(e,t),zn(t),t.child.flags&8192&&t.memoizedState!==null!=(n!==null&&n.memoizedState!==null)&&(Go=oe()),i&4&&(i=t.updateQueue,i!==null&&(t.updateQueue=null,qo(t,i)));break;case 22:a=t.memoizedState!==null;var ot=n!==null&&n.memoizedState!==null,wt=ts,Ot=ln;if(ts=wt||a,ln=Ot||ot,Fn(e,t),ln=Ot,ts=wt,zn(t),i&8192)t:for(e=t.stateNode,e._visibility=a?e._visibility&-2:e._visibility|1,a&&(n===null||ot||ts||ln||da(t)),n=null,e=t;;){if(e.tag===5||e.tag===26){if(n===null){ot=n=e;try{if(r=ot.stateNode,a)S=r.style,typeof S.setProperty=="function"?S.setProperty("display","none","important"):S.display="none";else{q=ot.stateNode;var Bt=ot.memoizedProps.style,jt=Bt!=null&&Bt.hasOwnProperty("display")?Bt.display:null;q.style.display=jt==null||typeof jt=="boolean"?"":(""+jt).trim()}}catch(ne){Ne(ot,ot.return,ne)}}}else if(e.tag===6){if(n===null){ot=e;try{ot.stateNode.nodeValue=a?"":ot.memoizedProps}catch(ne){Ne(ot,ot.return,ne)}}}else if(e.tag===18){if(n===null){ot=e;try{var Mt=ot.stateNode;a?Ph(Mt,!0):Ph(ot.stateNode,!1)}catch(ne){Ne(ot,ot.return,ne)}}}else if((e.tag!==22&&e.tag!==23||e.memoizedState===null||e===t)&&e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break t;for(;e.sibling===null;){if(e.return===null||e.return===t)break t;n===e&&(n=null),e=e.return}n===e&&(n=null),e.sibling.return=e.return,e=e.sibling}i&4&&(i=t.updateQueue,i!==null&&(n=i.retryQueue,n!==null&&(i.retryQueue=null,qo(t,n))));break;case 19:Fn(e,t),zn(t),i&4&&(i=t.updateQueue,i!==null&&(t.updateQueue=null,qo(t,i)));break;case 30:break;case 21:break;default:Fn(e,t),zn(t)}}function zn(t){var e=t.flags;if(e&2){try{for(var n,i=t.return;i!==null;){if(zd(i)){n=i;break}i=i.return}if(n==null)throw Error(o(160));switch(n.tag){case 27:var a=n.stateNode,r=_c(t);Uo(t,r,a);break;case 5:var S=n.stateNode;n.flags&32&&(Pi(S,""),n.flags&=-33);var q=_c(t);Uo(t,q,S);break;case 3:case 4:var ot=n.stateNode.containerInfo,wt=_c(t);Ec(t,wt,ot);break;default:throw Error(o(161))}}catch(Ot){Ne(t,t.return,Ot)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function Yd(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var e=t;Yd(e),e.tag===5&&e.flags&1024&&e.stateNode.reset(),t=t.sibling}}function ns(t,e){if(e.subtreeFlags&8772)for(e=e.child;e!==null;)Ud(t,e.alternate,e),e=e.sibling}function da(t){for(t=t.child;t!==null;){var e=t;switch(e.tag){case 0:case 11:case 14:case 15:Cs(4,e,e.return),da(e);break;case 1:ki(e,e.return);var n=e.stateNode;typeof n.componentWillUnmount=="function"&&Pd(e,e.return,n),da(e);break;case 27:Wr(e.stateNode);case 26:case 5:ki(e,e.return),da(e);break;case 22:e.memoizedState===null&&da(e);break;case 30:da(e);break;default:da(e)}t=t.sibling}}function is(t,e,n){for(n=n&&(e.subtreeFlags&8772)!==0,e=e.child;e!==null;){var i=e.alternate,a=t,r=e,S=r.flags;switch(r.tag){case 0:case 11:case 15:is(a,r,n),Ir(4,r);break;case 1:if(is(a,r,n),i=r,a=i.stateNode,typeof a.componentDidMount=="function")try{a.componentDidMount()}catch(wt){Ne(i,i.return,wt)}if(i=r,a=i.updateQueue,a!==null){var q=i.stateNode;try{var ot=a.shared.hiddenCallbacks;if(ot!==null)for(a.shared.hiddenCallbacks=null,a=0;a<ot.length;a++)Su(ot[a],q)}catch(wt){Ne(i,i.return,wt)}}n&&S&64&&Ld(r),Br(r,r.return);break;case 27:Id(r);case 26:case 5:is(a,r,n),n&&i===null&&S&4&&Fd(r),Br(r,r.return);break;case 12:is(a,r,n);break;case 31:is(a,r,n),n&&S&4&&Gd(a,r);break;case 13:is(a,r,n),n&&S&4&&Kd(a,r);break;case 22:r.memoizedState===null&&is(a,r,n),Br(r,r.return);break;case 30:break;default:is(a,r,n)}e=e.sibling}}function Sc(t,e){var n=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(n=t.memoizedState.cachePool.pool),t=null,e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(t=e.memoizedState.cachePool.pool),t!==n&&(t!=null&&t.refCount++,n!=null&&Rr(n))}function wc(t,e){t=null,e.alternate!==null&&(t=e.alternate.memoizedState.cache),e=e.memoizedState.cache,e!==t&&(e.refCount++,t!=null&&Rr(t))}function yi(t,e,n,i){if(e.subtreeFlags&10256)for(e=e.child;e!==null;)Vd(t,e,n,i),e=e.sibling}function Vd(t,e,n,i){var a=e.flags;switch(e.tag){case 0:case 11:case 15:yi(t,e,n,i),a&2048&&Ir(9,e);break;case 1:yi(t,e,n,i);break;case 3:yi(t,e,n,i),a&2048&&(t=null,e.alternate!==null&&(t=e.alternate.memoizedState.cache),e=e.memoizedState.cache,e!==t&&(e.refCount++,t!=null&&Rr(t)));break;case 12:if(a&2048){yi(t,e,n,i),t=e.stateNode;try{var r=e.memoizedProps,S=r.id,q=r.onPostCommit;typeof q=="function"&&q(S,e.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(ot){Ne(e,e.return,ot)}}else yi(t,e,n,i);break;case 31:yi(t,e,n,i);break;case 13:yi(t,e,n,i);break;case 23:break;case 22:r=e.stateNode,S=e.alternate,e.memoizedState!==null?r._visibility&2?yi(t,e,n,i):Ur(t,e):r._visibility&2?yi(t,e,n,i):(r._visibility|=2,Xa(t,e,n,i,(e.subtreeFlags&10256)!==0||!1)),a&2048&&Sc(S,e);break;case 24:yi(t,e,n,i),a&2048&&wc(e.alternate,e);break;default:yi(t,e,n,i)}}function Xa(t,e,n,i,a){for(a=a&&((e.subtreeFlags&10256)!==0||!1),e=e.child;e!==null;){var r=t,S=e,q=n,ot=i,wt=S.flags;switch(S.tag){case 0:case 11:case 15:Xa(r,S,q,ot,a),Ir(8,S);break;case 23:break;case 22:var Ot=S.stateNode;S.memoizedState!==null?Ot._visibility&2?Xa(r,S,q,ot,a):Ur(r,S):(Ot._visibility|=2,Xa(r,S,q,ot,a)),a&&wt&2048&&Sc(S.alternate,S);break;case 24:Xa(r,S,q,ot,a),a&&wt&2048&&wc(S.alternate,S);break;default:Xa(r,S,q,ot,a)}e=e.sibling}}function Ur(t,e){if(e.subtreeFlags&10256)for(e=e.child;e!==null;){var n=t,i=e,a=i.flags;switch(i.tag){case 22:Ur(n,i),a&2048&&Sc(i.alternate,i);break;case 24:Ur(n,i),a&2048&&wc(i.alternate,i);break;default:Ur(n,i)}e=e.sibling}}var qr=8192;function Ya(t,e,n){if(t.subtreeFlags&qr)for(t=t.child;t!==null;)Wd(t,e,n),t=t.sibling}function Wd(t,e,n){switch(t.tag){case 26:Ya(t,e,n),t.flags&qr&&t.memoizedState!==null&&mp(n,gi,t.memoizedState,t.memoizedProps);break;case 5:Ya(t,e,n);break;case 3:case 4:var i=gi;gi=nl(t.stateNode.containerInfo),Ya(t,e,n),gi=i;break;case 22:t.memoizedState===null&&(i=t.alternate,i!==null&&i.memoizedState!==null?(i=qr,qr=16777216,Ya(t,e,n),qr=i):Ya(t,e,n));break;default:Ya(t,e,n)}}function Qd(t){var e=t.alternate;if(e!==null&&(t=e.child,t!==null)){e.child=null;do e=t.sibling,t.sibling=null,t=e;while(t!==null)}}function Hr(t){var e=t.deletions;if((t.flags&16)!==0){if(e!==null)for(var n=0;n<e.length;n++){var i=e[n];mn=i,Jd(i,t)}Qd(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)Zd(t),t=t.sibling}function Zd(t){switch(t.tag){case 0:case 11:case 15:Hr(t),t.flags&2048&&Cs(9,t,t.return);break;case 3:Hr(t);break;case 12:Hr(t);break;case 22:var e=t.stateNode;t.memoizedState!==null&&e._visibility&2&&(t.return===null||t.return.tag!==13)?(e._visibility&=-3,Ho(t)):Hr(t);break;default:Hr(t)}}function Ho(t){var e=t.deletions;if((t.flags&16)!==0){if(e!==null)for(var n=0;n<e.length;n++){var i=e[n];mn=i,Jd(i,t)}Qd(t)}for(t=t.child;t!==null;){switch(e=t,e.tag){case 0:case 11:case 15:Cs(8,e,e.return),Ho(e);break;case 22:n=e.stateNode,n._visibility&2&&(n._visibility&=-3,Ho(e));break;default:Ho(e)}t=t.sibling}}function Jd(t,e){for(;mn!==null;){var n=mn;switch(n.tag){case 0:case 11:case 15:Cs(8,n,e);break;case 23:case 22:if(n.memoizedState!==null&&n.memoizedState.cachePool!==null){var i=n.memoizedState.cachePool.pool;i!=null&&i.refCount++}break;case 24:Rr(n.memoizedState.cache)}if(i=n.child,i!==null)i.return=n,mn=i;else t:for(n=t;mn!==null;){i=mn;var a=i.sibling,r=i.return;if(qd(i),i===n){mn=null;break t}if(a!==null){a.return=r,mn=a;break t}mn=r}}}var Mf={getCacheForType:function(t){var e=vn(an),n=e.data.get(t);return n===void 0&&(n=t(),e.data.set(t,n)),n},cacheSignal:function(){return vn(an).controller.signal}},kf=typeof WeakMap=="function"?WeakMap:Map,Ce=0,Be=null,ye=null,ve=0,De=0,Yn=null,js=!1,Va=!1,Rc=!1,ss=0,Je=0,Ms=0,ha=0,Tc=0,Vn=0,Wa=0,Gr=null,In=null,Cc=!1,Go=0,$d=0,Ko=1/0,Xo=null,ks=null,dn=0,Ds=null,Qa=null,as=0,jc=0,Mc=null,th=null,Kr=0,kc=null;function Wn(){return(Ce&2)!==0&&ve!==0?ve&-ve:nt.T!==null?Fc():hi()}function eh(){if(Vn===0)if((ve&536870912)===0||Ae){var t=jn;jn<<=1,(jn&3932160)===0&&(jn=262144),Vn=t}else Vn=536870912;return t=Kn.current,t!==null&&(t.flags|=32),Vn}function Bn(t,e,n){(t===Be&&(De===2||De===9)||t.cancelPendingCommit!==null)&&(Za(t,0),Ns(t,ve,Vn,!1)),gn(t,n),((Ce&2)===0||t!==Be)&&(t===Be&&((Ce&2)===0&&(ha|=n),Je===4&&Ns(t,ve,Vn,!1)),Di(t))}function nh(t,e,n){if((Ce&6)!==0)throw Error(o(327));var i=!n&&(e&127)===0&&(e&t.expiredLanes)===0||An(t,e),a=i?Of(t,e):Nc(t,e,!0),r=i;do{if(a===0){Va&&!i&&Ns(t,e,0,!1);break}else{if(n=t.current.alternate,r&&!Df(n)){a=Nc(t,e,!1),r=!1;continue}if(a===2){if(r=e,t.errorRecoveryDisabledLanes&r)var S=0;else S=t.pendingLanes&-536870913,S=S!==0?S:S&536870912?536870912:0;if(S!==0){e=S;t:{var q=t;a=Gr;var ot=q.current.memoizedState.isDehydrated;if(ot&&(Za(q,S).flags|=256),S=Nc(q,S,!1),S!==2){if(Rc&&!ot){q.errorRecoveryDisabledLanes|=r,ha|=r,a=4;break t}r=In,In=a,r!==null&&(In===null?In=r:In.push.apply(In,r))}a=S}if(r=!1,a!==2)continue}}if(a===1){Za(t,0),Ns(t,e,0,!0);break}t:{switch(i=t,r=a,r){case 0:case 1:throw Error(o(345));case 4:if((e&4194048)!==e)break;case 6:Ns(i,e,Vn,!js);break t;case 2:In=null;break;case 3:case 5:break;default:throw Error(o(329))}if((e&62914560)===e&&(a=Go+300-oe(),10<a)){if(Ns(i,e,Vn,!js),Qe(i,0,!0)!==0)break t;as=e,i.timeoutHandle=Nh(ih.bind(null,i,n,In,Xo,Cc,e,Vn,ha,Wa,js,r,"Throttled",-0,0),a);break t}ih(i,n,In,Xo,Cc,e,Vn,ha,Wa,js,r,null,-0,0)}}break}while(!0);Di(t)}function ih(t,e,n,i,a,r,S,q,ot,wt,Ot,Bt,jt,Mt){if(t.timeoutHandle=-1,Bt=e.subtreeFlags,Bt&8192||(Bt&16785408)===16785408){Bt={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Ln},Wd(e,r,Bt);var ne=(r&62914560)===r?Go-oe():(r&4194048)===r?$d-oe():0;if(ne=gp(Bt,ne),ne!==null){as=r,t.cancelPendingCommit=ne(dh.bind(null,t,e,r,n,i,a,S,q,ot,Ot,Bt,null,jt,Mt)),Ns(t,r,S,!wt);return}}dh(t,e,r,n,i,a,S,q,ot)}function Df(t){for(var e=t;;){var n=e.tag;if((n===0||n===11||n===15)&&e.flags&16384&&(n=e.updateQueue,n!==null&&(n=n.stores,n!==null)))for(var i=0;i<n.length;i++){var a=n[i],r=a.getSnapshot;a=a.value;try{if(!Rn(r(),a))return!1}catch{return!1}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Ns(t,e,n,i){e&=~Tc,e&=~ha,t.suspendedLanes|=e,t.pingedLanes&=~e,i&&(t.warmLanes|=e),i=t.expirationTimes;for(var a=e;0<a;){var r=31-st(a),S=1<<r;i[r]=-1,a&=~S}n!==0&&di(t,n,e)}function Yo(){return(Ce&6)===0?(Xr(0),!1):!0}function Dc(){if(ye!==null){if(De===0)var t=ye.return;else t=ye,Vi=ia=null,Vl(t),Ua=null,Cr=0,t=ye;for(;t!==null;)Od(t.alternate,t),t=t.return;ye=null}}function Za(t,e){var n=t.timeoutHandle;n!==-1&&(t.timeoutHandle=-1,Jf(n)),n=t.cancelPendingCommit,n!==null&&(t.cancelPendingCommit=null,n()),as=0,Dc(),Be=t,ye=n=Xi(t.current,null),ve=e,De=0,Yn=null,js=!1,Va=An(t,e),Rc=!1,Wa=Vn=Tc=ha=Ms=Je=0,In=Gr=null,Cc=!1,(e&8)!==0&&(e|=e&32);var i=t.entangledLanes;if(i!==0)for(t=t.entanglements,i&=e;0<i;){var a=31-st(i),r=1<<a;e|=t[a],i&=~r}return ss=e,de(),n}function sh(t,e){he=null,nt.H=Pr,e===Ba||e===Eo?(e=bu(),De=3):e===Pl?(e=bu(),De=4):De=e===uc?8:e!==null&&typeof e=="object"&&typeof e.then=="function"?6:1,Yn=e,ye===null&&(Je=1,Po(t,ni(e,t.current)))}function ah(){var t=Kn.current;return t===null?!0:(ve&4194048)===ve?oi===null:(ve&62914560)===ve||(ve&536870912)!==0?t===oi:!1}function rh(){var t=nt.H;return nt.H=Pr,t===null?Pr:t}function oh(){var t=nt.A;return nt.A=Mf,t}function Vo(){Je=4,js||(ve&4194048)!==ve&&Kn.current!==null||(Va=!0),(Ms&134217727)===0&&(ha&134217727)===0||Be===null||Ns(Be,ve,Vn,!1)}function Nc(t,e,n){var i=Ce;Ce|=2;var a=rh(),r=oh();(Be!==t||ve!==e)&&(Xo=null,Za(t,e)),e=!1;var S=Je;t:do try{if(De!==0&&ye!==null){var q=ye,ot=Yn;switch(De){case 8:Dc(),S=6;break t;case 3:case 2:case 9:case 6:Kn.current===null&&(e=!0);var wt=De;if(De=0,Yn=null,Ja(t,q,ot,wt),n&&Va){S=0;break t}break;default:wt=De,De=0,Yn=null,Ja(t,q,ot,wt)}}Nf(),S=Je;break}catch(Ot){sh(t,Ot)}while(!0);return e&&t.shellSuspendCounter++,Vi=ia=null,Ce=i,nt.H=a,nt.A=r,ye===null&&(Be=null,ve=0,de()),S}function Nf(){for(;ye!==null;)lh(ye)}function Of(t,e){var n=Ce;Ce|=2;var i=rh(),a=oh();Be!==t||ve!==e?(Xo=null,Ko=oe()+500,Za(t,e)):Va=An(t,e);t:do try{if(De!==0&&ye!==null){e=ye;var r=Yn;e:switch(De){case 1:De=0,Yn=null,Ja(t,e,r,1);break;case 2:case 9:if(xu(r)){De=0,Yn=null,ch(e);break}e=function(){De!==2&&De!==9||Be!==t||(De=7),Di(t)},r.then(e,e);break t;case 3:De=7;break t;case 4:De=5;break t;case 7:xu(r)?(De=0,Yn=null,ch(e)):(De=0,Yn=null,Ja(t,e,r,7));break;case 5:var S=null;switch(ye.tag){case 26:S=ye.memoizedState;case 5:case 27:var q=ye;if(S?Vh(S):q.stateNode.complete){De=0,Yn=null;var ot=q.sibling;if(ot!==null)ye=ot;else{var wt=q.return;wt!==null?(ye=wt,Wo(wt)):ye=null}break e}}De=0,Yn=null,Ja(t,e,r,5);break;case 6:De=0,Yn=null,Ja(t,e,r,6);break;case 8:Dc(),Je=6;break t;default:throw Error(o(462))}}Lf();break}catch(Ot){sh(t,Ot)}while(!0);return Vi=ia=null,nt.H=i,nt.A=a,Ce=n,ye!==null?0:(Be=null,ve=0,de(),Je)}function Lf(){for(;ye!==null&&!se();)lh(ye)}function lh(t){var e=Dd(t.alternate,t,ss);t.memoizedProps=t.pendingProps,e===null?Wo(t):ye=e}function ch(t){var e=t,n=e.alternate;switch(e.tag){case 15:case 0:e=Rd(n,e,e.pendingProps,e.type,void 0,ve);break;case 11:e=Rd(n,e,e.pendingProps,e.type.render,e.ref,ve);break;case 5:Vl(e);default:Od(n,e),e=ye=ou(e,ss),e=Dd(n,e,ss)}t.memoizedProps=t.pendingProps,e===null?Wo(t):ye=e}function Ja(t,e,n,i){Vi=ia=null,Vl(e),Ua=null,Cr=0;var a=e.return;try{if(Af(t,a,e,n,ve)){Je=1,Po(t,ni(n,t.current)),ye=null;return}}catch(r){if(a!==null)throw ye=a,r;Je=1,Po(t,ni(n,t.current)),ye=null;return}e.flags&32768?(Ae||i===1?t=!0:Va||(ve&536870912)!==0?t=!1:(js=t=!0,(i===2||i===9||i===3||i===6)&&(i=Kn.current,i!==null&&i.tag===13&&(i.flags|=16384))),uh(e,t)):Wo(e)}function Wo(t){var e=t;do{if((e.flags&32768)!==0){uh(e,js);return}t=e.return;var n=Rf(e.alternate,e,ss);if(n!==null){ye=n;return}if(e=e.sibling,e!==null){ye=e;return}ye=e=t}while(e!==null);Je===0&&(Je=5)}function uh(t,e){do{var n=Tf(t.alternate,t);if(n!==null){n.flags&=32767,ye=n;return}if(n=t.return,n!==null&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!e&&(t=t.sibling,t!==null)){ye=t;return}ye=t=n}while(t!==null);Je=6,ye=null}function dh(t,e,n,i,a,r,S,q,ot){t.cancelPendingCommit=null;do Qo();while(dn!==0);if((Ce&6)!==0)throw Error(o(327));if(e!==null){if(e===t.current)throw Error(o(177));if(r=e.lanes|e.childLanes,r|=ae,vi(t,n,r,S,q,ot),t===Be&&(ye=Be=null,ve=0),Qa=e,Ds=t,as=n,jc=r,Mc=a,th=i,(e.subtreeFlags&10256)!==0||(e.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,If(Cn,function(){return gh(),null})):(t.callbackNode=null,t.callbackPriority=0),i=(e.flags&13878)!==0,(e.subtreeFlags&13878)!==0||i){i=nt.T,nt.T=null,a=Y.p,Y.p=2,S=Ce,Ce|=4;try{Cf(t,e,n)}finally{Ce=S,Y.p=a,nt.T=i}}dn=1,hh(),fh(),ph()}}function hh(){if(dn===1){dn=0;var t=Ds,e=Qa,n=(e.flags&13878)!==0;if((e.subtreeFlags&13878)!==0||n){n=nt.T,nt.T=null;var i=Y.p;Y.p=2;var a=Ce;Ce|=4;try{Xd(e,t);var r=Kc,S=C(t.containerInfo),q=r.focusedElem,ot=r.selectionRange;if(S!==q&&q&&q.ownerDocument&&v(q.ownerDocument.documentElement,q)){if(ot!==null&&P(q)){var wt=ot.start,Ot=ot.end;if(Ot===void 0&&(Ot=wt),"selectionStart"in q)q.selectionStart=wt,q.selectionEnd=Math.min(Ot,q.value.length);else{var Bt=q.ownerDocument||document,jt=Bt&&Bt.defaultView||window;if(jt.getSelection){var Mt=jt.getSelection(),ne=q.textContent.length,ce=Math.min(ot.start,ne),ze=ot.end===void 0?ce:Math.min(ot.end,ne);!Mt.extend&&ce>ze&&(S=ze,ze=ce,ce=S);var xt=p(q,ce),pt=p(q,ze);if(xt&&pt&&(Mt.rangeCount!==1||Mt.anchorNode!==xt.node||Mt.anchorOffset!==xt.offset||Mt.focusNode!==pt.node||Mt.focusOffset!==pt.offset)){var St=Bt.createRange();St.setStart(xt.node,xt.offset),Mt.removeAllRanges(),ce>ze?(Mt.addRange(St),Mt.extend(pt.node,pt.offset)):(St.setEnd(pt.node,pt.offset),Mt.addRange(St))}}}}for(Bt=[],Mt=q;Mt=Mt.parentNode;)Mt.nodeType===1&&Bt.push({element:Mt,left:Mt.scrollLeft,top:Mt.scrollTop});for(typeof q.focus=="function"&&q.focus(),q=0;q<Bt.length;q++){var zt=Bt[q];zt.element.scrollLeft=zt.left,zt.element.scrollTop=zt.top}}ll=!!Gc,Kc=Gc=null}finally{Ce=a,Y.p=i,nt.T=n}}t.current=e,dn=2}}function fh(){if(dn===2){dn=0;var t=Ds,e=Qa,n=(e.flags&8772)!==0;if((e.subtreeFlags&8772)!==0||n){n=nt.T,nt.T=null;var i=Y.p;Y.p=2;var a=Ce;Ce|=4;try{Ud(t,e.alternate,e)}finally{Ce=a,Y.p=i,nt.T=n}}dn=3}}function ph(){if(dn===4||dn===3){dn=0,le();var t=Ds,e=Qa,n=as,i=th;(e.subtreeFlags&10256)!==0||(e.flags&10256)!==0?dn=5:(dn=0,Qa=Ds=null,mh(t,t.pendingLanes));var a=t.pendingLanes;if(a===0&&(ks=null),On(n),e=e.stateNode,It&&typeof It.onCommitFiberRoot=="function")try{It.onCommitFiberRoot(Qn,e,void 0,(e.current.flags&128)===128)}catch{}if(i!==null){e=nt.T,a=Y.p,Y.p=2,nt.T=null;try{for(var r=t.onRecoverableError,S=0;S<i.length;S++){var q=i[S];r(q.value,{componentStack:q.stack})}}finally{nt.T=e,Y.p=a}}(as&3)!==0&&Qo(),Di(t),a=t.pendingLanes,(n&261930)!==0&&(a&42)!==0?t===kc?Kr++:(Kr=0,kc=t):Kr=0,Xr(0)}}function mh(t,e){(t.pooledCacheLanes&=e)===0&&(e=t.pooledCache,e!=null&&(t.pooledCache=null,Rr(e)))}function Qo(){return hh(),fh(),ph(),gh()}function gh(){if(dn!==5)return!1;var t=Ds,e=jc;jc=0;var n=On(as),i=nt.T,a=Y.p;try{Y.p=32>n?32:n,nt.T=null,n=Mc,Mc=null;var r=Ds,S=as;if(dn=0,Qa=Ds=null,as=0,(Ce&6)!==0)throw Error(o(331));var q=Ce;if(Ce|=4,Zd(r.current),Vd(r,r.current,S,n),Ce=q,Xr(0,!1),It&&typeof It.onPostCommitFiberRoot=="function")try{It.onPostCommitFiberRoot(Qn,r)}catch{}return!0}finally{Y.p=a,nt.T=i,mh(t,e)}}function yh(t,e,n){e=ni(n,e),e=cc(t.stateNode,e,2),t=ws(t,e,2),t!==null&&(gn(t,2),Di(t))}function Ne(t,e,n){if(t.tag===3)yh(t,t,n);else for(;e!==null;){if(e.tag===3){yh(e,t,n);break}else if(e.tag===1){var i=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(ks===null||!ks.has(i))){t=ni(n,t),n=xd(2),i=ws(e,n,2),i!==null&&(vd(n,i,e,t),gn(i,2),Di(i));break}}e=e.return}}function Oc(t,e,n){var i=t.pingCache;if(i===null){i=t.pingCache=new kf;var a=new Set;i.set(e,a)}else a=i.get(e),a===void 0&&(a=new Set,i.set(e,a));a.has(n)||(Rc=!0,a.add(n),t=Pf.bind(null,t,e,n),e.then(t,t))}function Pf(t,e,n){var i=t.pingCache;i!==null&&i.delete(e),t.pingedLanes|=t.suspendedLanes&n,t.warmLanes&=~n,Be===t&&(ve&n)===n&&(Je===4||Je===3&&(ve&62914560)===ve&&300>oe()-Go?(Ce&2)===0&&Za(t,0):Tc|=n,Wa===ve&&(Wa=0)),Di(t)}function xh(t,e){e===0&&(e=Ni()),t=Me(t,e),t!==null&&(gn(t,e),Di(t))}function Ff(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),xh(t,n)}function zf(t,e){var n=0;switch(t.tag){case 31:case 13:var i=t.stateNode,a=t.memoizedState;a!==null&&(n=a.retryLane);break;case 19:i=t.stateNode;break;case 22:i=t.stateNode._retryCache;break;default:throw Error(o(314))}i!==null&&i.delete(e),xh(t,n)}function If(t,e){return Qt(t,e)}var Zo=null,$a=null,Lc=!1,Jo=!1,Pc=!1,Os=0;function Di(t){t!==$a&&t.next===null&&($a===null?Zo=$a=t:$a=$a.next=t),Jo=!0,Lc||(Lc=!0,Uf())}function Xr(t,e){if(!Pc&&Jo){Pc=!0;do for(var n=!1,i=Zo;i!==null;){if(t!==0){var a=i.pendingLanes;if(a===0)var r=0;else{var S=i.suspendedLanes,q=i.pingedLanes;r=(1<<31-st(42|t)+1)-1,r&=a&~(S&~q),r=r&201326741?r&201326741|1:r?r|2:0}r!==0&&(n=!0,Eh(i,r))}else r=ve,r=Qe(i,i===Be?r:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),(r&3)===0||An(i,r)||(n=!0,Eh(i,r));i=i.next}while(n);Pc=!1}}function Bf(){vh()}function vh(){Jo=Lc=!1;var t=0;Os!==0&&Zf()&&(t=Os);for(var e=oe(),n=null,i=Zo;i!==null;){var a=i.next,r=bh(i,e);r===0?(i.next=null,n===null?Zo=a:n.next=a,a===null&&($a=n)):(n=i,(t!==0||(r&3)!==0)&&(Jo=!0)),i=a}dn!==0&&dn!==5||Xr(t),Os!==0&&(Os=0)}function bh(t,e){for(var n=t.suspendedLanes,i=t.pingedLanes,a=t.expirationTimes,r=t.pendingLanes&-62914561;0<r;){var S=31-st(r),q=1<<S,ot=a[S];ot===-1?((q&n)===0||(q&i)!==0)&&(a[S]=Zn(q,e)):ot<=e&&(t.expiredLanes|=q),r&=~q}if(e=Be,n=ve,n=Qe(t,t===e?n:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),i=t.callbackNode,n===0||t===e&&(De===2||De===9)||t.cancelPendingCommit!==null)return i!==null&&i!==null&&$t(i),t.callbackNode=null,t.callbackPriority=0;if((n&3)===0||An(t,n)){if(e=n&-n,e===t.callbackPriority)return e;switch(i!==null&&$t(i),On(n)){case 2:case 8:n=Ue;break;case 32:n=Cn;break;case 268435456:n=En;break;default:n=Cn}return i=_h.bind(null,t),n=Qt(n,i),t.callbackPriority=e,t.callbackNode=n,e}return i!==null&&i!==null&&$t(i),t.callbackPriority=2,t.callbackNode=null,2}function _h(t,e){if(dn!==0&&dn!==5)return t.callbackNode=null,t.callbackPriority=0,null;var n=t.callbackNode;if(Qo()&&t.callbackNode!==n)return null;var i=ve;return i=Qe(t,t===Be?i:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),i===0?null:(nh(t,i,e),bh(t,oe()),t.callbackNode!=null&&t.callbackNode===n?_h.bind(null,t):null)}function Eh(t,e){if(Qo())return null;nh(t,e,!0)}function Uf(){$f(function(){(Ce&6)!==0?Qt(je,Bf):vh()})}function Fc(){if(Os===0){var t=za;t===0&&(t=Xt,Xt<<=1,(Xt&261888)===0&&(Xt=256)),Os=t}return Os}function Ah(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:mi(""+t)}function Sh(t,e){var n=e.ownerDocument.createElement("input");return n.name=e.name,n.value=e.value,t.id&&n.setAttribute("form",t.id),e.parentNode.insertBefore(n,e),t=new FormData(t),n.parentNode.removeChild(n),t}function qf(t,e,n,i,a){if(e==="submit"&&n&&n.stateNode===a){var r=Ah((a[$e]||null).action),S=i.submitter;S&&(e=(e=S[$e]||null)?Ah(e.formAction):S.getAttribute("formAction"),e!==null&&(r=e,S=null));var q=new xa("action","action",null,i,a);t.push({event:q,listeners:[{instance:null,listener:function(){if(i.defaultPrevented){if(Os!==0){var ot=S?Sh(a,S):new FormData(a);ic(n,{pending:!0,data:ot,method:a.method,action:r},null,ot)}}else typeof r=="function"&&(q.preventDefault(),ot=S?Sh(a,S):new FormData(a),ic(n,{pending:!0,data:ot,method:a.method,action:r},r,ot))},currentTarget:a}]})}}for(var zc=0;zc<Zt.length;zc++){var Ic=Zt[zc],Hf=Ic.toLowerCase(),Gf=Ic[0].toUpperCase()+Ic.slice(1);Gt(Hf,"on"+Gf)}Gt(Tt,"onAnimationEnd"),Gt(_t,"onAnimationIteration"),Gt(Nt,"onAnimationStart"),Gt("dblclick","onDoubleClick"),Gt("focusin","onFocus"),Gt("focusout","onBlur"),Gt(qt,"onTransitionRun"),Gt(Vt,"onTransitionStart"),Gt(Wt,"onTransitionCancel"),Gt(Ht,"onTransitionEnd"),Ai("onMouseEnter",["mouseout","mouseover"]),Ai("onMouseLeave",["mouseout","mouseover"]),Ai("onPointerEnter",["pointerout","pointerover"]),Ai("onPointerLeave",["pointerout","pointerover"]),fi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),fi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),fi("onBeforeInput",["compositionend","keypress","textInput","paste"]),fi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),fi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),fi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Yr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Kf=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Yr));function wh(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var i=t[n],a=i.event;i=i.listeners;t:{var r=void 0;if(e)for(var S=i.length-1;0<=S;S--){var q=i[S],ot=q.instance,wt=q.currentTarget;if(q=q.listener,ot!==r&&a.isPropagationStopped())break t;r=q,a.currentTarget=wt;try{r(a)}catch(Ot){ee(Ot)}a.currentTarget=null,r=ot}else for(S=0;S<i.length;S++){if(q=i[S],ot=q.instance,wt=q.currentTarget,q=q.listener,ot!==r&&a.isPropagationStopped())break t;r=q,a.currentTarget=wt;try{r(a)}catch(Ot){ee(Ot)}a.currentTarget=null,r=ot}}}}function xe(t,e){var n=e[os];n===void 0&&(n=e[os]=new Set);var i=t+"__bubble";n.has(i)||(Rh(e,t,2,!1),n.add(i))}function Bc(t,e,n){var i=0;e&&(i|=4),Rh(n,t,i,e)}var $o="_reactListening"+Math.random().toString(36).slice(2);function Uc(t){if(!t[$o]){t[$o]=!0,Oi.forEach(function(n){n!=="selectionchange"&&(Kf.has(n)||Bc(n,!1,t),Bc(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[$o]||(e[$o]=!0,Bc("selectionchange",!1,e))}}function Rh(t,e,n,i){switch(ef(e)){case 2:var a=vp;break;case 8:a=bp;break;default:a=nu}n=a.bind(null,e,n,t),a=void 0,!ur||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(a=!0),i?a!==void 0?t.addEventListener(e,n,{capture:!0,passive:a}):t.addEventListener(e,n,!0):a!==void 0?t.addEventListener(e,n,{passive:a}):t.addEventListener(e,n,!1)}function qc(t,e,n,i,a){var r=i;if((e&1)===0&&(e&2)===0&&i!==null)t:for(;;){if(i===null)return;var S=i.tag;if(S===3||S===4){var q=i.stateNode.containerInfo;if(q===a)break;if(S===4)for(S=i.return;S!==null;){var ot=S.tag;if((ot===3||ot===4)&&S.stateNode.containerInfo===a)return;S=S.return}for(;q!==null;){if(S=Ei(q),S===null)return;if(ot=S.tag,ot===5||ot===6||ot===26||ot===27){i=r=S;continue t}q=q.parentNode}}i=i.return}cs(function(){var wt=r,Ot=ga(n),Bt=[];t:{var jt=te.get(t);if(jt!==void 0){var Mt=xa,ne=t;switch(t){case"keypress":if(hs(n)===0)break t;case"keydown":case"keyup":Mt=wa;break;case"focusin":ne="focus",Mt=fs;break;case"focusout":ne="blur",Mt=fs;break;case"beforeblur":case"afterblur":Mt=fs;break;case"click":if(n.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Mt=_a;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Mt=ao;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Mt=yr;break;case Tt:case _t:case Nt:Mt=ro;break;case Ht:Mt=xr;break;case"scroll":case"scrollend":Mt=va;break;case"wheel":Mt=Ta;break;case"copy":case"cut":case"paste":Mt=ps;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Mt=gr;break;case"toggle":case"beforetoggle":Mt=co}var ce=(e&4)!==0,ze=!ce&&(t==="scroll"||t==="scrollend"),xt=ce?jt!==null?jt+"Capture":null:jt;ce=[];for(var pt=wt,St;pt!==null;){var zt=pt;if(St=zt.stateNode,zt=zt.tag,zt!==5&&zt!==26&&zt!==27||St===null||xt===null||(zt=Ii(pt,xt),zt!=null&&ce.push(Vr(pt,zt,St))),ze)break;pt=pt.return}0<ce.length&&(jt=new Mt(jt,ne,null,n,Ot),Bt.push({event:jt,listeners:ce}))}}if((e&7)===0){t:{if(jt=t==="mouseover"||t==="pointerover",Mt=t==="mouseout"||t==="pointerout",jt&&n!==$n&&(ne=n.relatedTarget||n.fromElement)&&(Ei(ne)||ne[Mn]))break t;if((Mt||jt)&&(jt=Ot.window===Ot?Ot:(jt=Ot.ownerDocument)?jt.defaultView||jt.parentWindow:window,Mt?(ne=n.relatedTarget||n.toElement,Mt=wt,ne=ne?Ei(ne):null,ne!==null&&(ze=O(ne),ce=ne.tag,ne!==ze||ce!==5&&ce!==27&&ce!==6)&&(ne=null)):(Mt=null,ne=wt),Mt!==ne)){if(ce=_a,zt="onMouseLeave",xt="onMouseEnter",pt="mouse",(t==="pointerout"||t==="pointerover")&&(ce=gr,zt="onPointerLeave",xt="onPointerEnter",pt="pointer"),ze=Mt==null?jt:qn(Mt),St=ne==null?jt:qn(ne),jt=new ce(zt,pt+"leave",Mt,n,Ot),jt.target=ze,jt.relatedTarget=St,zt=null,Ei(Ot)===wt&&(ce=new ce(xt,pt+"enter",ne,n,Ot),ce.target=St,ce.relatedTarget=ze,zt=ce),ze=zt,Mt&&ne)e:{for(ce=Xf,xt=Mt,pt=ne,St=0,zt=xt;zt;zt=ce(zt))St++;zt=0;for(var re=pt;re;re=ce(re))zt++;for(;0<St-zt;)xt=ce(xt),St--;for(;0<zt-St;)pt=ce(pt),zt--;for(;St--;){if(xt===pt||pt!==null&&xt===pt.alternate){ce=xt;break e}xt=ce(xt),pt=ce(pt)}ce=null}else ce=null;Mt!==null&&Th(Bt,jt,Mt,ce,!1),ne!==null&&ze!==null&&Th(Bt,ze,ne,ce,!0)}}t:{if(jt=wt?qn(wt):window,Mt=jt.nodeName&&jt.nodeName.toLowerCase(),Mt==="select"||Mt==="input"&&jt.type==="file")var Se=ta;else if(Ma(jt))if(ei)Se=ys;else{Se=Ki;var ie=go}else Mt=jt.nodeName,!Mt||Mt.toLowerCase()!=="input"||jt.type!=="checkbox"&&jt.type!=="radio"?wt&&cr(wt.elementType)&&(Se=ta):Se=Ar;if(Se&&(Se=Se(t,wt))){Er(Bt,Se,n,Ot);break t}ie&&ie(t,jt,wt),t==="focusout"&&wt&&jt.type==="number"&&wt.memoizedProps.value!=null&&Xs(jt,"number",jt.value)}switch(ie=wt?qn(wt):window,t){case"focusin":(Ma(ie)||ie.contentEditable==="true")&&(tt=ie,ct=wt,bt=null);break;case"focusout":bt=ct=tt=null;break;case"mousedown":ut=!0;break;case"contextmenu":case"mouseup":case"dragend":ut=!1,lt(Bt,n,Ot);break;case"selectionchange":if(Q)break;case"keydown":case"keyup":lt(Bt,n,Ot)}var fe;if(Js)t:{switch(t){case"compositionstart":var be="onCompositionStart";break t;case"compositionend":be="onCompositionEnd";break t;case"compositionupdate":be="onCompositionUpdate";break t}be=void 0}else Hi?_r(t,n)&&(be="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(be="onCompositionStart");be&&(Ca&&n.locale!=="ko"&&(Hi||be!=="onCompositionStart"?be==="onCompositionEnd"&&Hi&&(fe=ds()):(ti=Ot,ya="value"in ti?ti.value:ti.textContent,Hi=!0)),ie=tl(wt,be),0<ie.length&&(be=new Sa(be,t,null,n,Ot),Bt.push({event:be,listeners:ie}),fe?be.data=fe:(fe=ho(n),fe!==null&&(be.data=fe)))),(fe=bl?fo(t,n):_l(t,n))&&(be=tl(wt,"onBeforeInput"),0<be.length&&(ie=new Sa("onBeforeInput","beforeinput",null,n,Ot),Bt.push({event:ie,listeners:be}),ie.data=fe)),qf(Bt,t,wt,n,Ot)}wh(Bt,e)})}function Vr(t,e,n){return{instance:t,listener:e,currentTarget:n}}function tl(t,e){for(var n=e+"Capture",i=[];t!==null;){var a=t,r=a.stateNode;if(a=a.tag,a!==5&&a!==26&&a!==27||r===null||(a=Ii(t,n),a!=null&&i.unshift(Vr(t,a,r)),a=Ii(t,e),a!=null&&i.push(Vr(t,a,r))),t.tag===3)return i;t=t.return}return[]}function Xf(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function Th(t,e,n,i,a){for(var r=e._reactName,S=[];n!==null&&n!==i;){var q=n,ot=q.alternate,wt=q.stateNode;if(q=q.tag,ot!==null&&ot===i)break;q!==5&&q!==26&&q!==27||wt===null||(ot=wt,a?(wt=Ii(n,r),wt!=null&&S.unshift(Vr(n,wt,ot))):a||(wt=Ii(n,r),wt!=null&&S.push(Vr(n,wt,ot)))),n=n.return}S.length!==0&&t.push({event:e,listeners:S})}var Yf=/\r\n?/g,Vf=/\u0000|\uFFFD/g;function Ch(t){return(typeof t=="string"?t:""+t).replace(Yf,`
`).replace(Vf,"")}function jh(t,e){return e=Ch(e),Ch(t)===e}function Fe(t,e,n,i,a,r){switch(n){case"children":typeof i=="string"?e==="body"||e==="textarea"&&i===""||Pi(t,i):(typeof i=="number"||typeof i=="bigint")&&e!=="body"&&Pi(t,""+i);break;case"className":Gs(t,"class",i);break;case"tabIndex":Gs(t,"tabindex",i);break;case"dir":case"role":case"viewBox":case"width":case"height":Gs(t,n,i);break;case"style":lr(t,i,r);break;case"data":if(e!=="object"){Gs(t,"data",i);break}case"src":case"href":if(i===""&&(e!=="a"||n!=="href")){t.removeAttribute(n);break}if(i==null||typeof i=="function"||typeof i=="symbol"||typeof i=="boolean"){t.removeAttribute(n);break}i=mi(""+i),t.setAttribute(n,i);break;case"action":case"formAction":if(typeof i=="function"){t.setAttribute(n,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof r=="function"&&(n==="formAction"?(e!=="input"&&Fe(t,e,"name",a.name,a,null),Fe(t,e,"formEncType",a.formEncType,a,null),Fe(t,e,"formMethod",a.formMethod,a,null),Fe(t,e,"formTarget",a.formTarget,a,null)):(Fe(t,e,"encType",a.encType,a,null),Fe(t,e,"method",a.method,a,null),Fe(t,e,"target",a.target,a,null)));if(i==null||typeof i=="symbol"||typeof i=="boolean"){t.removeAttribute(n);break}i=mi(""+i),t.setAttribute(n,i);break;case"onClick":i!=null&&(t.onclick=Ln);break;case"onScroll":i!=null&&xe("scroll",t);break;case"onScrollEnd":i!=null&&xe("scrollend",t);break;case"dangerouslySetInnerHTML":if(i!=null){if(typeof i!="object"||!("__html"in i))throw Error(o(61));if(n=i.__html,n!=null){if(a.children!=null)throw Error(o(60));t.innerHTML=n}}break;case"multiple":t.multiple=i&&typeof i!="function"&&typeof i!="symbol";break;case"muted":t.muted=i&&typeof i!="function"&&typeof i!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(i==null||typeof i=="function"||typeof i=="boolean"||typeof i=="symbol"){t.removeAttribute("xlink:href");break}n=mi(""+i),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",n);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":i!=null&&typeof i!="function"&&typeof i!="symbol"?t.setAttribute(n,""+i):t.removeAttribute(n);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":i&&typeof i!="function"&&typeof i!="symbol"?t.setAttribute(n,""):t.removeAttribute(n);break;case"capture":case"download":i===!0?t.setAttribute(n,""):i!==!1&&i!=null&&typeof i!="function"&&typeof i!="symbol"?t.setAttribute(n,i):t.removeAttribute(n);break;case"cols":case"rows":case"size":case"span":i!=null&&typeof i!="function"&&typeof i!="symbol"&&!isNaN(i)&&1<=i?t.setAttribute(n,i):t.removeAttribute(n);break;case"rowSpan":case"start":i==null||typeof i=="function"||typeof i=="symbol"||isNaN(i)?t.removeAttribute(n):t.setAttribute(n,i);break;case"popover":xe("beforetoggle",t),xe("toggle",t),pe(t,"popover",i);break;case"xlinkActuate":Jn(t,"http://www.w3.org/1999/xlink","xlink:actuate",i);break;case"xlinkArcrole":Jn(t,"http://www.w3.org/1999/xlink","xlink:arcrole",i);break;case"xlinkRole":Jn(t,"http://www.w3.org/1999/xlink","xlink:role",i);break;case"xlinkShow":Jn(t,"http://www.w3.org/1999/xlink","xlink:show",i);break;case"xlinkTitle":Jn(t,"http://www.w3.org/1999/xlink","xlink:title",i);break;case"xlinkType":Jn(t,"http://www.w3.org/1999/xlink","xlink:type",i);break;case"xmlBase":Jn(t,"http://www.w3.org/XML/1998/namespace","xml:base",i);break;case"xmlLang":Jn(t,"http://www.w3.org/XML/1998/namespace","xml:lang",i);break;case"xmlSpace":Jn(t,"http://www.w3.org/XML/1998/namespace","xml:space",i);break;case"is":pe(t,"is",i);break;case"innerText":case"textContent":break;default:(!(2<n.length)||n[0]!=="o"&&n[0]!=="O"||n[1]!=="n"&&n[1]!=="N")&&(n=yl.get(n)||n,pe(t,n,i))}}function Hc(t,e,n,i,a,r){switch(n){case"style":lr(t,i,r);break;case"dangerouslySetInnerHTML":if(i!=null){if(typeof i!="object"||!("__html"in i))throw Error(o(61));if(n=i.__html,n!=null){if(a.children!=null)throw Error(o(60));t.innerHTML=n}}break;case"children":typeof i=="string"?Pi(t,i):(typeof i=="number"||typeof i=="bigint")&&Pi(t,""+i);break;case"onScroll":i!=null&&xe("scroll",t);break;case"onScrollEnd":i!=null&&xe("scrollend",t);break;case"onClick":i!=null&&(t.onclick=Ln);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!qs.hasOwnProperty(n))t:{if(n[0]==="o"&&n[1]==="n"&&(a=n.endsWith("Capture"),e=n.slice(2,a?n.length-7:void 0),r=t[$e]||null,r=r!=null?r[n]:null,typeof r=="function"&&t.removeEventListener(e,r,a),typeof i=="function")){typeof r!="function"&&r!==null&&(n in t?t[n]=null:t.hasAttribute(n)&&t.removeAttribute(n)),t.addEventListener(e,i,a);break t}n in t?t[n]=i:i===!0?t.setAttribute(n,""):pe(t,n,i)}}}function _n(t,e,n){switch(e){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":xe("error",t),xe("load",t);var i=!1,a=!1,r;for(r in n)if(n.hasOwnProperty(r)){var S=n[r];if(S!=null)switch(r){case"src":i=!0;break;case"srcSet":a=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(o(137,e));default:Fe(t,e,r,S,n,null)}}a&&Fe(t,e,"srcSet",n.srcSet,n,null),i&&Fe(t,e,"src",n.src,n,null);return;case"input":xe("invalid",t);var q=r=S=a=null,ot=null,wt=null;for(i in n)if(n.hasOwnProperty(i)){var Ot=n[i];if(Ot!=null)switch(i){case"name":a=Ot;break;case"type":S=Ot;break;case"checked":ot=Ot;break;case"defaultChecked":wt=Ot;break;case"value":r=Ot;break;case"defaultValue":q=Ot;break;case"children":case"dangerouslySetInnerHTML":if(Ot!=null)throw Error(o(137,e));break;default:Fe(t,e,i,Ot,n,null)}}ma(t,r,q,ot,wt,S,a,!1);return;case"select":xe("invalid",t),i=S=r=null;for(a in n)if(n.hasOwnProperty(a)&&(q=n[a],q!=null))switch(a){case"value":r=q;break;case"defaultValue":S=q;break;case"multiple":i=q;default:Fe(t,e,a,q,n,null)}e=r,n=S,t.multiple=!!i,e!=null?pi(t,!!i,e,!1):n!=null&&pi(t,!!i,n,!0);return;case"textarea":xe("invalid",t),r=a=i=null;for(S in n)if(n.hasOwnProperty(S)&&(q=n[S],q!=null))switch(S){case"value":i=q;break;case"defaultValue":a=q;break;case"children":r=q;break;case"dangerouslySetInnerHTML":if(q!=null)throw Error(o(91));break;default:Fe(t,e,S,q,n,null)}Ys(t,i,a,r);return;case"option":for(ot in n)n.hasOwnProperty(ot)&&(i=n[ot],i!=null)&&(ot==="selected"?t.selected=i&&typeof i!="function"&&typeof i!="symbol":Fe(t,e,ot,i,n,null));return;case"dialog":xe("beforetoggle",t),xe("toggle",t),xe("cancel",t),xe("close",t);break;case"iframe":case"object":xe("load",t);break;case"video":case"audio":for(i=0;i<Yr.length;i++)xe(Yr[i],t);break;case"image":xe("error",t),xe("load",t);break;case"details":xe("toggle",t);break;case"embed":case"source":case"link":xe("error",t),xe("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(wt in n)if(n.hasOwnProperty(wt)&&(i=n[wt],i!=null))switch(wt){case"children":case"dangerouslySetInnerHTML":throw Error(o(137,e));default:Fe(t,e,wt,i,n,null)}return;default:if(cr(e)){for(Ot in n)n.hasOwnProperty(Ot)&&(i=n[Ot],i!==void 0&&Hc(t,e,Ot,i,n,void 0));return}}for(q in n)n.hasOwnProperty(q)&&(i=n[q],i!=null&&Fe(t,e,q,i,n,null))}function Wf(t,e,n,i){switch(e){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var a=null,r=null,S=null,q=null,ot=null,wt=null,Ot=null;for(Mt in n){var Bt=n[Mt];if(n.hasOwnProperty(Mt)&&Bt!=null)switch(Mt){case"checked":break;case"value":break;case"defaultValue":ot=Bt;default:i.hasOwnProperty(Mt)||Fe(t,e,Mt,null,i,Bt)}}for(var jt in i){var Mt=i[jt];if(Bt=n[jt],i.hasOwnProperty(jt)&&(Mt!=null||Bt!=null))switch(jt){case"type":r=Mt;break;case"name":a=Mt;break;case"checked":wt=Mt;break;case"defaultChecked":Ot=Mt;break;case"value":S=Mt;break;case"defaultValue":q=Mt;break;case"children":case"dangerouslySetInnerHTML":if(Mt!=null)throw Error(o(137,e));break;default:Mt!==Bt&&Fe(t,e,jt,Mt,i,Bt)}}Si(t,S,q,ot,wt,Ot,r,a);return;case"select":Mt=S=q=jt=null;for(r in n)if(ot=n[r],n.hasOwnProperty(r)&&ot!=null)switch(r){case"value":break;case"multiple":Mt=ot;default:i.hasOwnProperty(r)||Fe(t,e,r,null,i,ot)}for(a in i)if(r=i[a],ot=n[a],i.hasOwnProperty(a)&&(r!=null||ot!=null))switch(a){case"value":jt=r;break;case"defaultValue":q=r;break;case"multiple":S=r;default:r!==ot&&Fe(t,e,a,r,i,ot)}e=q,n=S,i=Mt,jt!=null?pi(t,!!n,jt,!1):!!i!=!!n&&(e!=null?pi(t,!!n,e,!0):pi(t,!!n,n?[]:"",!1));return;case"textarea":Mt=jt=null;for(q in n)if(a=n[q],n.hasOwnProperty(q)&&a!=null&&!i.hasOwnProperty(q))switch(q){case"value":break;case"children":break;default:Fe(t,e,q,null,i,a)}for(S in i)if(a=i[S],r=n[S],i.hasOwnProperty(S)&&(a!=null||r!=null))switch(S){case"value":jt=a;break;case"defaultValue":Mt=a;break;case"children":break;case"dangerouslySetInnerHTML":if(a!=null)throw Error(o(91));break;default:a!==r&&Fe(t,e,S,a,i,r)}or(t,jt,Mt);return;case"option":for(var ne in n)jt=n[ne],n.hasOwnProperty(ne)&&jt!=null&&!i.hasOwnProperty(ne)&&(ne==="selected"?t.selected=!1:Fe(t,e,ne,null,i,jt));for(ot in i)jt=i[ot],Mt=n[ot],i.hasOwnProperty(ot)&&jt!==Mt&&(jt!=null||Mt!=null)&&(ot==="selected"?t.selected=jt&&typeof jt!="function"&&typeof jt!="symbol":Fe(t,e,ot,jt,i,Mt));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var ce in n)jt=n[ce],n.hasOwnProperty(ce)&&jt!=null&&!i.hasOwnProperty(ce)&&Fe(t,e,ce,null,i,jt);for(wt in i)if(jt=i[wt],Mt=n[wt],i.hasOwnProperty(wt)&&jt!==Mt&&(jt!=null||Mt!=null))switch(wt){case"children":case"dangerouslySetInnerHTML":if(jt!=null)throw Error(o(137,e));break;default:Fe(t,e,wt,jt,i,Mt)}return;default:if(cr(e)){for(var ze in n)jt=n[ze],n.hasOwnProperty(ze)&&jt!==void 0&&!i.hasOwnProperty(ze)&&Hc(t,e,ze,void 0,i,jt);for(Ot in i)jt=i[Ot],Mt=n[Ot],!i.hasOwnProperty(Ot)||jt===Mt||jt===void 0&&Mt===void 0||Hc(t,e,Ot,jt,i,Mt);return}}for(var xt in n)jt=n[xt],n.hasOwnProperty(xt)&&jt!=null&&!i.hasOwnProperty(xt)&&Fe(t,e,xt,null,i,jt);for(Bt in i)jt=i[Bt],Mt=n[Bt],!i.hasOwnProperty(Bt)||jt===Mt||jt==null&&Mt==null||Fe(t,e,Bt,jt,i,Mt)}function Mh(t){switch(t){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function Qf(){if(typeof performance.getEntriesByType=="function"){for(var t=0,e=0,n=performance.getEntriesByType("resource"),i=0;i<n.length;i++){var a=n[i],r=a.transferSize,S=a.initiatorType,q=a.duration;if(r&&q&&Mh(S)){for(S=0,q=a.responseEnd,i+=1;i<n.length;i++){var ot=n[i],wt=ot.startTime;if(wt>q)break;var Ot=ot.transferSize,Bt=ot.initiatorType;Ot&&Mh(Bt)&&(ot=ot.responseEnd,S+=Ot*(ot<q?1:(q-wt)/(ot-wt)))}if(--i,e+=8*(r+S)/(a.duration/1e3),t++,10<t)break}}if(0<t)return e/t/1e6}return navigator.connection&&(t=navigator.connection.downlink,typeof t=="number")?t:5}var Gc=null,Kc=null;function el(t){return t.nodeType===9?t:t.ownerDocument}function kh(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Dh(t,e){if(t===0)switch(e){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&e==="foreignObject"?0:t}function Xc(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.children=="bigint"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Yc=null;function Zf(){var t=window.event;return t&&t.type==="popstate"?t===Yc?!1:(Yc=t,!0):(Yc=null,!1)}var Nh=typeof setTimeout=="function"?setTimeout:void 0,Jf=typeof clearTimeout=="function"?clearTimeout:void 0,Oh=typeof Promise=="function"?Promise:void 0,$f=typeof queueMicrotask=="function"?queueMicrotask:typeof Oh<"u"?function(t){return Oh.resolve(null).then(t).catch(tp)}:Nh;function tp(t){setTimeout(function(){throw t})}function Ls(t){return t==="head"}function Lh(t,e){var n=e,i=0;do{var a=n.nextSibling;if(t.removeChild(n),a&&a.nodeType===8)if(n=a.data,n==="/$"||n==="/&"){if(i===0){t.removeChild(a),ir(e);return}i--}else if(n==="$"||n==="$?"||n==="$~"||n==="$!"||n==="&")i++;else if(n==="html")Wr(t.ownerDocument.documentElement);else if(n==="head"){n=t.ownerDocument.head,Wr(n);for(var r=n.firstChild;r;){var S=r.nextSibling,q=r.nodeName;r[Un]||q==="SCRIPT"||q==="STYLE"||q==="LINK"&&r.rel.toLowerCase()==="stylesheet"||n.removeChild(r),r=S}}else n==="body"&&Wr(t.ownerDocument.body);n=a}while(n);ir(e)}function Ph(t,e){var n=t;t=0;do{var i=n.nextSibling;if(n.nodeType===1?e?(n._stashedDisplay=n.style.display,n.style.display="none"):(n.style.display=n._stashedDisplay||"",n.getAttribute("style")===""&&n.removeAttribute("style")):n.nodeType===3&&(e?(n._stashedText=n.nodeValue,n.nodeValue=""):n.nodeValue=n._stashedText||""),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(t===0)break;t--}else n!=="$"&&n!=="$?"&&n!=="$~"&&n!=="$!"||t++;n=i}while(n)}function Vc(t){var e=t.firstChild;for(e&&e.nodeType===10&&(e=e.nextSibling);e;){var n=e;switch(e=e.nextSibling,n.nodeName){case"HTML":case"HEAD":case"BODY":Vc(n),fa(n);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(n.rel.toLowerCase()==="stylesheet")continue}t.removeChild(n)}}function ep(t,e,n,i){for(;t.nodeType===1;){var a=n;if(t.nodeName.toLowerCase()!==e.toLowerCase()){if(!i&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(i){if(!t[Un])switch(e){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(r=t.getAttribute("rel"),r==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(r!==a.rel||t.getAttribute("href")!==(a.href==null||a.href===""?null:a.href)||t.getAttribute("crossorigin")!==(a.crossOrigin==null?null:a.crossOrigin)||t.getAttribute("title")!==(a.title==null?null:a.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(r=t.getAttribute("src"),(r!==(a.src==null?null:a.src)||t.getAttribute("type")!==(a.type==null?null:a.type)||t.getAttribute("crossorigin")!==(a.crossOrigin==null?null:a.crossOrigin))&&r&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(e==="input"&&t.type==="hidden"){var r=a.name==null?null:""+a.name;if(a.type==="hidden"&&t.getAttribute("name")===r)return t}else return t;if(t=li(t.nextSibling),t===null)break}return null}function np(t,e,n){if(e==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!n||(t=li(t.nextSibling),t===null))return null;return t}function Fh(t,e){for(;t.nodeType!==8;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!e||(t=li(t.nextSibling),t===null))return null;return t}function Wc(t){return t.data==="$?"||t.data==="$~"}function Qc(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState!=="loading"}function ip(t,e){var n=t.ownerDocument;if(t.data==="$~")t._reactRetry=e;else if(t.data!=="$?"||n.readyState!=="loading")e();else{var i=function(){e(),n.removeEventListener("DOMContentLoaded",i)};n.addEventListener("DOMContentLoaded",i),t._reactRetry=i}}function li(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?"||e==="$~"||e==="&"||e==="F!"||e==="F")break;if(e==="/$"||e==="/&")return null}}return t}var Zc=null;function zh(t){t=t.nextSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"||n==="/&"){if(e===0)return li(t.nextSibling);e--}else n!=="$"&&n!=="$!"&&n!=="$?"&&n!=="$~"&&n!=="&"||e++}t=t.nextSibling}return null}function Ih(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"||n==="$~"||n==="&"){if(e===0)return t;e--}else n!=="/$"&&n!=="/&"||e++}t=t.previousSibling}return null}function Bh(t,e,n){switch(e=el(n),t){case"html":if(t=e.documentElement,!t)throw Error(o(452));return t;case"head":if(t=e.head,!t)throw Error(o(453));return t;case"body":if(t=e.body,!t)throw Error(o(454));return t;default:throw Error(o(451))}}function Wr(t){for(var e=t.attributes;e.length;)t.removeAttributeNode(e[0]);fa(t)}var ci=new Map,Uh=new Set;function nl(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var rs=Y.d;Y.d={f:sp,r:ap,D:rp,C:op,L:lp,m:cp,X:dp,S:up,M:hp};function sp(){var t=rs.f(),e=Yo();return t||e}function ap(t){var e=Oe(t);e!==null&&e.tag===5&&e.type==="form"?sd(e):rs.r(t)}var tr=typeof document>"u"?null:document;function qh(t,e,n){var i=tr;if(i&&typeof e=="string"&&e){var a=hn(e);a='link[rel="'+t+'"][href="'+a+'"]',typeof n=="string"&&(a+='[crossorigin="'+n+'"]'),Uh.has(a)||(Uh.add(a),t={rel:t,crossOrigin:n,href:e},i.querySelector(a)===null&&(e=i.createElement("link"),_n(e,"link",t),tn(e),i.head.appendChild(e)))}}function rp(t){rs.D(t),qh("dns-prefetch",t,null)}function op(t,e){rs.C(t,e),qh("preconnect",t,e)}function lp(t,e,n){rs.L(t,e,n);var i=tr;if(i&&t&&e){var a='link[rel="preload"][as="'+hn(e)+'"]';e==="image"&&n&&n.imageSrcSet?(a+='[imagesrcset="'+hn(n.imageSrcSet)+'"]',typeof n.imageSizes=="string"&&(a+='[imagesizes="'+hn(n.imageSizes)+'"]')):a+='[href="'+hn(t)+'"]';var r=a;switch(e){case"style":r=er(t);break;case"script":r=nr(t)}ci.has(r)||(t=h({rel:"preload",href:e==="image"&&n&&n.imageSrcSet?void 0:t,as:e},n),ci.set(r,t),i.querySelector(a)!==null||e==="style"&&i.querySelector(Qr(r))||e==="script"&&i.querySelector(Zr(r))||(e=i.createElement("link"),_n(e,"link",t),tn(e),i.head.appendChild(e)))}}function cp(t,e){rs.m(t,e);var n=tr;if(n&&t){var i=e&&typeof e.as=="string"?e.as:"script",a='link[rel="modulepreload"][as="'+hn(i)+'"][href="'+hn(t)+'"]',r=a;switch(i){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":r=nr(t)}if(!ci.has(r)&&(t=h({rel:"modulepreload",href:t},e),ci.set(r,t),n.querySelector(a)===null)){switch(i){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(n.querySelector(Zr(r)))return}i=n.createElement("link"),_n(i,"link",t),tn(i),n.head.appendChild(i)}}}function up(t,e,n){rs.S(t,e,n);var i=tr;if(i&&t){var a=Sn(i).hoistableStyles,r=er(t);e=e||"default";var S=a.get(r);if(!S){var q={loading:0,preload:null};if(S=i.querySelector(Qr(r)))q.loading=5;else{t=h({rel:"stylesheet",href:t,"data-precedence":e},n),(n=ci.get(r))&&Jc(t,n);var ot=S=i.createElement("link");tn(ot),_n(ot,"link",t),ot._p=new Promise(function(wt,Ot){ot.onload=wt,ot.onerror=Ot}),ot.addEventListener("load",function(){q.loading|=1}),ot.addEventListener("error",function(){q.loading|=2}),q.loading|=4,il(S,e,i)}S={type:"stylesheet",instance:S,count:1,state:q},a.set(r,S)}}}function dp(t,e){rs.X(t,e);var n=tr;if(n&&t){var i=Sn(n).hoistableScripts,a=nr(t),r=i.get(a);r||(r=n.querySelector(Zr(a)),r||(t=h({src:t,async:!0},e),(e=ci.get(a))&&$c(t,e),r=n.createElement("script"),tn(r),_n(r,"link",t),n.head.appendChild(r)),r={type:"script",instance:r,count:1,state:null},i.set(a,r))}}function hp(t,e){rs.M(t,e);var n=tr;if(n&&t){var i=Sn(n).hoistableScripts,a=nr(t),r=i.get(a);r||(r=n.querySelector(Zr(a)),r||(t=h({src:t,async:!0,type:"module"},e),(e=ci.get(a))&&$c(t,e),r=n.createElement("script"),tn(r),_n(r,"link",t),n.head.appendChild(r)),r={type:"script",instance:r,count:1,state:null},i.set(a,r))}}function Hh(t,e,n,i){var a=(a=m.current)?nl(a):null;if(!a)throw Error(o(446));switch(t){case"meta":case"title":return null;case"style":return typeof n.precedence=="string"&&typeof n.href=="string"?(e=er(n.href),n=Sn(a).hoistableStyles,i=n.get(e),i||(i={type:"style",instance:null,count:0,state:null},n.set(e,i)),i):{type:"void",instance:null,count:0,state:null};case"link":if(n.rel==="stylesheet"&&typeof n.href=="string"&&typeof n.precedence=="string"){t=er(n.href);var r=Sn(a).hoistableStyles,S=r.get(t);if(S||(a=a.ownerDocument||a,S={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},r.set(t,S),(r=a.querySelector(Qr(t)))&&!r._p&&(S.instance=r,S.state.loading=5),ci.has(t)||(n={rel:"preload",as:"style",href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},ci.set(t,n),r||fp(a,t,n,S.state))),e&&i===null)throw Error(o(528,""));return S}if(e&&i!==null)throw Error(o(529,""));return null;case"script":return e=n.async,n=n.src,typeof n=="string"&&e&&typeof e!="function"&&typeof e!="symbol"?(e=nr(n),n=Sn(a).hoistableScripts,i=n.get(e),i||(i={type:"script",instance:null,count:0,state:null},n.set(e,i)),i):{type:"void",instance:null,count:0,state:null};default:throw Error(o(444,t))}}function er(t){return'href="'+hn(t)+'"'}function Qr(t){return'link[rel="stylesheet"]['+t+"]"}function Gh(t){return h({},t,{"data-precedence":t.precedence,precedence:null})}function fp(t,e,n,i){t.querySelector('link[rel="preload"][as="style"]['+e+"]")?i.loading=1:(e=t.createElement("link"),i.preload=e,e.addEventListener("load",function(){return i.loading|=1}),e.addEventListener("error",function(){return i.loading|=2}),_n(e,"link",n),tn(e),t.head.appendChild(e))}function nr(t){return'[src="'+hn(t)+'"]'}function Zr(t){return"script[async]"+t}function Kh(t,e,n){if(e.count++,e.instance===null)switch(e.type){case"style":var i=t.querySelector('style[data-href~="'+hn(n.href)+'"]');if(i)return e.instance=i,tn(i),i;var a=h({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return i=(t.ownerDocument||t).createElement("style"),tn(i),_n(i,"style",a),il(i,n.precedence,t),e.instance=i;case"stylesheet":a=er(n.href);var r=t.querySelector(Qr(a));if(r)return e.state.loading|=4,e.instance=r,tn(r),r;i=Gh(n),(a=ci.get(a))&&Jc(i,a),r=(t.ownerDocument||t).createElement("link"),tn(r);var S=r;return S._p=new Promise(function(q,ot){S.onload=q,S.onerror=ot}),_n(r,"link",i),e.state.loading|=4,il(r,n.precedence,t),e.instance=r;case"script":return r=nr(n.src),(a=t.querySelector(Zr(r)))?(e.instance=a,tn(a),a):(i=n,(a=ci.get(r))&&(i=h({},n),$c(i,a)),t=t.ownerDocument||t,a=t.createElement("script"),tn(a),_n(a,"link",i),t.head.appendChild(a),e.instance=a);case"void":return null;default:throw Error(o(443,e.type))}else e.type==="stylesheet"&&(e.state.loading&4)===0&&(i=e.instance,e.state.loading|=4,il(i,n.precedence,t));return e.instance}function il(t,e,n){for(var i=n.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),a=i.length?i[i.length-1]:null,r=a,S=0;S<i.length;S++){var q=i[S];if(q.dataset.precedence===e)r=q;else if(r!==a)break}r?r.parentNode.insertBefore(t,r.nextSibling):(e=n.nodeType===9?n.head:n,e.insertBefore(t,e.firstChild))}function Jc(t,e){t.crossOrigin==null&&(t.crossOrigin=e.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=e.referrerPolicy),t.title==null&&(t.title=e.title)}function $c(t,e){t.crossOrigin==null&&(t.crossOrigin=e.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=e.referrerPolicy),t.integrity==null&&(t.integrity=e.integrity)}var sl=null;function Xh(t,e,n){if(sl===null){var i=new Map,a=sl=new Map;a.set(n,i)}else a=sl,i=a.get(n),i||(i=new Map,a.set(n,i));if(i.has(t))return i;for(i.set(t,null),n=n.getElementsByTagName(t),a=0;a<n.length;a++){var r=n[a];if(!(r[Un]||r[qe]||t==="link"&&r.getAttribute("rel")==="stylesheet")&&r.namespaceURI!=="http://www.w3.org/2000/svg"){var S=r.getAttribute(e)||"";S=t+S;var q=i.get(S);q?q.push(r):i.set(S,[r])}}return i}function Yh(t,e,n){t=t.ownerDocument||t,t.head.insertBefore(n,e==="title"?t.querySelector("head > title"):null)}function pp(t,e,n){if(n===1||e.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof e.precedence!="string"||typeof e.href!="string"||e.href==="")break;return!0;case"link":if(typeof e.rel!="string"||typeof e.href!="string"||e.href===""||e.onLoad||e.onError)break;return e.rel==="stylesheet"?(t=e.disabled,typeof e.precedence=="string"&&t==null):!0;case"script":if(e.async&&typeof e.async!="function"&&typeof e.async!="symbol"&&!e.onLoad&&!e.onError&&e.src&&typeof e.src=="string")return!0}return!1}function Vh(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}function mp(t,e,n,i){if(n.type==="stylesheet"&&(typeof i.media!="string"||matchMedia(i.media).matches!==!1)&&(n.state.loading&4)===0){if(n.instance===null){var a=er(i.href),r=e.querySelector(Qr(a));if(r){e=r._p,e!==null&&typeof e=="object"&&typeof e.then=="function"&&(t.count++,t=al.bind(t),e.then(t,t)),n.state.loading|=4,n.instance=r,tn(r);return}r=e.ownerDocument||e,i=Gh(i),(a=ci.get(a))&&Jc(i,a),r=r.createElement("link"),tn(r);var S=r;S._p=new Promise(function(q,ot){S.onload=q,S.onerror=ot}),_n(r,"link",i),n.instance=r}t.stylesheets===null&&(t.stylesheets=new Map),t.stylesheets.set(n,e),(e=n.state.preload)&&(n.state.loading&3)===0&&(t.count++,n=al.bind(t),e.addEventListener("load",n),e.addEventListener("error",n))}}var tu=0;function gp(t,e){return t.stylesheets&&t.count===0&&ol(t,t.stylesheets),0<t.count||0<t.imgCount?function(n){var i=setTimeout(function(){if(t.stylesheets&&ol(t,t.stylesheets),t.unsuspend){var r=t.unsuspend;t.unsuspend=null,r()}},6e4+e);0<t.imgBytes&&tu===0&&(tu=62500*Qf());var a=setTimeout(function(){if(t.waitingForImages=!1,t.count===0&&(t.stylesheets&&ol(t,t.stylesheets),t.unsuspend)){var r=t.unsuspend;t.unsuspend=null,r()}},(t.imgBytes>tu?50:800)+e);return t.unsuspend=n,function(){t.unsuspend=null,clearTimeout(i),clearTimeout(a)}}:null}function al(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)ol(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var rl=null;function ol(t,e){t.stylesheets=null,t.unsuspend!==null&&(t.count++,rl=new Map,e.forEach(yp,t),rl=null,al.call(t))}function yp(t,e){if(!(e.state.loading&4)){var n=rl.get(t);if(n)var i=n.get(null);else{n=new Map,rl.set(t,n);for(var a=t.querySelectorAll("link[data-precedence],style[data-precedence]"),r=0;r<a.length;r++){var S=a[r];(S.nodeName==="LINK"||S.getAttribute("media")!=="not all")&&(n.set(S.dataset.precedence,S),i=S)}i&&n.set(null,i)}a=e.instance,S=a.getAttribute("data-precedence"),r=n.get(S)||i,r===i&&n.set(null,a),n.set(S,a),this.count++,i=al.bind(this),a.addEventListener("load",i),a.addEventListener("error",i),r?r.parentNode.insertBefore(a,r.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(a,t.firstChild)),e.state.loading|=4}}var Jr={$$typeof:Z,Provider:null,Consumer:null,_currentValue:N,_currentValue2:N,_threadCount:0};function xp(t,e,n,i,a,r,S,q,ot){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=ke(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ke(0),this.hiddenUpdates=ke(null),this.identifierPrefix=i,this.onUncaughtError=a,this.onCaughtError=r,this.onRecoverableError=S,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=ot,this.incompleteTransitions=new Map}function Wh(t,e,n,i,a,r,S,q,ot,wt,Ot,Bt){return t=new xp(t,e,n,S,ot,wt,Ot,Bt,q),e=1,r===!0&&(e|=24),r=Gn(3,null,null,e),t.current=r,r.stateNode=t,e=Nl(),e.refCount++,t.pooledCache=e,e.refCount++,r.memoizedState={element:i,isDehydrated:n,cache:e},Fl(r),t}function Qh(t){return t?(t=Na,t):Na}function Zh(t,e,n,i,a,r){a=Qh(a),i.context===null?i.context=a:i.pendingContext=a,i=Ss(e),i.payload={element:n},r=r===void 0?null:r,r!==null&&(i.callback=r),n=ws(t,i,e),n!==null&&(Bn(n,t,e),Mr(n,t,e))}function Jh(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function eu(t,e){Jh(t,e),(t=t.alternate)&&Jh(t,e)}function $h(t){if(t.tag===13||t.tag===31){var e=Me(t,67108864);e!==null&&Bn(e,t,67108864),eu(t,67108864)}}function tf(t){if(t.tag===13||t.tag===31){var e=Wn();e=un(e);var n=Me(t,e);n!==null&&Bn(n,t,e),eu(t,e)}}var ll=!0;function vp(t,e,n,i){var a=nt.T;nt.T=null;var r=Y.p;try{Y.p=2,nu(t,e,n,i)}finally{Y.p=r,nt.T=a}}function bp(t,e,n,i){var a=nt.T;nt.T=null;var r=Y.p;try{Y.p=8,nu(t,e,n,i)}finally{Y.p=r,nt.T=a}}function nu(t,e,n,i){if(ll){var a=iu(i);if(a===null)qc(t,e,i,cl,n),nf(t,i);else if(Ep(a,t,e,n,i))i.stopPropagation();else if(nf(t,i),e&4&&-1<_p.indexOf(t)){for(;a!==null;){var r=Oe(a);if(r!==null)switch(r.tag){case 3:if(r=r.stateNode,r.current.memoizedState.isDehydrated){var S=cn(r.pendingLanes);if(S!==0){var q=r;for(q.pendingLanes|=2,q.entangledLanes|=2;S;){var ot=1<<31-st(S);q.entanglements[1]|=ot,S&=~ot}Di(r),(Ce&6)===0&&(Ko=oe()+500,Xr(0))}}break;case 31:case 13:q=Me(r,2),q!==null&&Bn(q,r,2),Yo(),eu(r,2)}if(r=iu(i),r===null&&qc(t,e,i,cl,n),r===a)break;a=r}a!==null&&i.stopPropagation()}else qc(t,e,i,null,n)}}function iu(t){return t=ga(t),su(t)}var cl=null;function su(t){if(cl=null,t=Ei(t),t!==null){var e=O(t);if(e===null)t=null;else{var n=e.tag;if(n===13){if(t=D(e),t!==null)return t;t=null}else if(n===31){if(t=B(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null)}}return cl=t,null}function ef(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(_e()){case je:return 2;case Ue:return 8;case Cn:case We:return 32;case En:return 268435456;default:return 32}default:return 32}}var au=!1,Ps=null,Fs=null,zs=null,$r=new Map,to=new Map,Is=[],_p="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function nf(t,e){switch(t){case"focusin":case"focusout":Ps=null;break;case"dragenter":case"dragleave":Fs=null;break;case"mouseover":case"mouseout":zs=null;break;case"pointerover":case"pointerout":$r.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":to.delete(e.pointerId)}}function eo(t,e,n,i,a,r){return t===null||t.nativeEvent!==r?(t={blockedOn:e,domEventName:n,eventSystemFlags:i,nativeEvent:r,targetContainers:[a]},e!==null&&(e=Oe(e),e!==null&&$h(e)),t):(t.eventSystemFlags|=i,e=t.targetContainers,a!==null&&e.indexOf(a)===-1&&e.push(a),t)}function Ep(t,e,n,i,a){switch(e){case"focusin":return Ps=eo(Ps,t,e,n,i,a),!0;case"dragenter":return Fs=eo(Fs,t,e,n,i,a),!0;case"mouseover":return zs=eo(zs,t,e,n,i,a),!0;case"pointerover":var r=a.pointerId;return $r.set(r,eo($r.get(r)||null,t,e,n,i,a)),!0;case"gotpointercapture":return r=a.pointerId,to.set(r,eo(to.get(r)||null,t,e,n,i,a)),!0}return!1}function sf(t){var e=Ei(t.target);if(e!==null){var n=O(e);if(n!==null){if(e=n.tag,e===13){if(e=D(n),e!==null){t.blockedOn=e,Us(t.priority,function(){tf(n)});return}}else if(e===31){if(e=B(n),e!==null){t.blockedOn=e,Us(t.priority,function(){tf(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function ul(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=iu(t.nativeEvent);if(n===null){n=t.nativeEvent;var i=new n.constructor(n.type,n);$n=i,n.target.dispatchEvent(i),$n=null}else return e=Oe(n),e!==null&&$h(e),t.blockedOn=n,!1;e.shift()}return!0}function af(t,e,n){ul(t)&&n.delete(e)}function Ap(){au=!1,Ps!==null&&ul(Ps)&&(Ps=null),Fs!==null&&ul(Fs)&&(Fs=null),zs!==null&&ul(zs)&&(zs=null),$r.forEach(af),to.forEach(af)}function dl(t,e){t.blockedOn===e&&(t.blockedOn=null,au||(au=!0,_.unstable_scheduleCallback(_.unstable_NormalPriority,Ap)))}var hl=null;function rf(t){hl!==t&&(hl=t,_.unstable_scheduleCallback(_.unstable_NormalPriority,function(){hl===t&&(hl=null);for(var e=0;e<t.length;e+=3){var n=t[e],i=t[e+1],a=t[e+2];if(typeof i!="function"){if(su(i||n)===null)continue;break}var r=Oe(n);r!==null&&(t.splice(e,3),e-=3,ic(r,{pending:!0,data:a,method:n.method,action:i},i,a))}}))}function ir(t){function e(ot){return dl(ot,t)}Ps!==null&&dl(Ps,t),Fs!==null&&dl(Fs,t),zs!==null&&dl(zs,t),$r.forEach(e),to.forEach(e);for(var n=0;n<Is.length;n++){var i=Is[n];i.blockedOn===t&&(i.blockedOn=null)}for(;0<Is.length&&(n=Is[0],n.blockedOn===null);)sf(n),n.blockedOn===null&&Is.shift();if(n=(t.ownerDocument||t).$$reactFormReplay,n!=null)for(i=0;i<n.length;i+=3){var a=n[i],r=n[i+1],S=a[$e]||null;if(typeof r=="function")S||rf(n);else if(S){var q=null;if(r&&r.hasAttribute("formAction")){if(a=r,S=r[$e]||null)q=S.formAction;else if(su(a)!==null)continue}else q=S.action;typeof q=="function"?n[i+1]=q:(n.splice(i,3),i-=3),rf(n)}}}function of(){function t(r){r.canIntercept&&r.info==="react-transition"&&r.intercept({handler:function(){return new Promise(function(S){return a=S})},focusReset:"manual",scroll:"manual"})}function e(){a!==null&&(a(),a=null),i||setTimeout(n,20)}function n(){if(!i&&!navigation.transition){var r=navigation.currentEntry;r&&r.url!=null&&navigation.navigate(r.url,{state:r.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var i=!1,a=null;return navigation.addEventListener("navigate",t),navigation.addEventListener("navigatesuccess",e),navigation.addEventListener("navigateerror",e),setTimeout(n,100),function(){i=!0,navigation.removeEventListener("navigate",t),navigation.removeEventListener("navigatesuccess",e),navigation.removeEventListener("navigateerror",e),a!==null&&(a(),a=null)}}}function ru(t){this._internalRoot=t}fl.prototype.render=ru.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(o(409));var n=e.current,i=Wn();Zh(n,i,t,e,null,null)},fl.prototype.unmount=ru.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Zh(t.current,2,null,t,null,null),Yo(),e[Mn]=null}};function fl(t){this._internalRoot=t}fl.prototype.unstable_scheduleHydration=function(t){if(t){var e=hi();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Is.length&&e!==0&&e<Is[n].priority;n++);Is.splice(n,0,t),n===0&&sf(t)}};var lf=u.version;if(lf!=="19.2.4")throw Error(o(527,lf,"19.2.4"));Y.findDOMNode=function(t){var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(o(188)):(t=Object.keys(t).join(","),Error(o(268,t)));return t=d(e),t=t!==null?l(t):null,t=t===null?null:t.stateNode,t};var Sp={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:nt,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var pl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!pl.isDisabled&&pl.supportsFiber)try{Qn=pl.inject(Sp),It=pl}catch{}}return reactDomClient_production.createRoot=function(t,e){if(!E(t))throw Error(o(299));var n=!1,i="",a=pd,r=md,S=gd;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(i=e.identifierPrefix),e.onUncaughtError!==void 0&&(a=e.onUncaughtError),e.onCaughtError!==void 0&&(r=e.onCaughtError),e.onRecoverableError!==void 0&&(S=e.onRecoverableError)),e=Wh(t,1,!1,null,null,n,i,null,a,r,S,of),t[Mn]=e.current,Uc(t),new ru(e)},reactDomClient_production.hydrateRoot=function(t,e,n){if(!E(t))throw Error(o(299));var i=!1,a="",r=pd,S=md,q=gd,ot=null;return n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(a=n.identifierPrefix),n.onUncaughtError!==void 0&&(r=n.onUncaughtError),n.onCaughtError!==void 0&&(S=n.onCaughtError),n.onRecoverableError!==void 0&&(q=n.onRecoverableError),n.formState!==void 0&&(ot=n.formState)),e=Wh(t,1,!0,e,n??null,i,a,ot,r,S,q,of),e.context=Qh(null),n=e.current,i=Wn(),i=un(i),a=Ss(i),a.callback=null,ws(n,a,i),n=i,e.current.lanes=n,gn(e,n),Di(e),t[Mn]=e.current,Uc(t),new fl(e)},reactDomClient_production.version="19.2.4",reactDomClient_production}var hasRequiredClient;function requireClient(){if(hasRequiredClient)return client.exports;hasRequiredClient=1;function _(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(_)}catch(u){console.error(u)}}return _(),client.exports=requireReactDomClient_production(),client.exports}var clientExports=requireClient();const ReactDOM=getDefaultExportFromCjs(clientExports),scriptRel="modulepreload",assetsURL=function(_){return"/"+_},seen={},__vitePreload=function(u,M,o){let E=Promise.resolve();if(M&&M.length>0){let d=function(l){return Promise.all(l.map(h=>Promise.resolve(h).then(b=>({status:"fulfilled",value:b}),b=>({status:"rejected",reason:b}))))};var D=d;document.getElementsByTagName("link");const B=document.querySelector("meta[property=csp-nonce]"),F=B?.nonce||B?.getAttribute("nonce");E=d(M.map(l=>{if(l=assetsURL(l),l in seen)return;seen[l]=!0;const h=l.endsWith(".css"),b=h?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${b}`))return;const y=document.createElement("link");if(y.rel=h?"stylesheet":scriptRel,h||(y.as="script"),y.crossOrigin="",y.href=l,F&&y.setAttribute("nonce",F),document.head.appendChild(y),h)return new Promise((f,A)=>{y.addEventListener("load",f),y.addEventListener("error",()=>A(new Error(`Unable to preload CSS for ${l}`)))})}))}function O(B){const F=new Event("vite:preloadError",{cancelable:!0});if(F.payload=B,window.dispatchEvent(F),!F.defaultPrevented)throw B}return E.then(B=>{for(const F of B||[])F.status==="rejected"&&O(F.reason);return u().catch(O)})};const mergeClasses=(..._)=>_.filter((u,M,o)=>!!u&&u.trim()!==""&&o.indexOf(u)===M).join(" ").trim();const toKebabCase=_=>_.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase();const toCamelCase=_=>_.replace(/^([A-Z])|[\s-_]+(\w)/g,(u,M,o)=>o?o.toUpperCase():M.toLowerCase());const toPascalCase=_=>{const u=toCamelCase(_);return u.charAt(0).toUpperCase()+u.slice(1)};var defaultAttributes={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const hasA11yProp=_=>{for(const u in _)if(u.startsWith("aria-")||u==="role"||u==="title")return!0;return!1};const Icon=reactExports.forwardRef(({color:_="currentColor",size:u=24,strokeWidth:M=2,absoluteStrokeWidth:o,className:E="",children:O,iconNode:D,...B},F)=>reactExports.createElement("svg",{ref:F,...defaultAttributes,width:u,height:u,stroke:_,strokeWidth:o?Number(M)*24/Number(u):M,className:mergeClasses("lucide",E),...!O&&!hasA11yProp(B)&&{"aria-hidden":"true"},...B},[...D.map(([d,l])=>reactExports.createElement(d,l)),...Array.isArray(O)?O:[O]]));const createLucideIcon=(_,u)=>{const M=reactExports.forwardRef(({className:o,...E},O)=>reactExports.createElement(Icon,{ref:O,iconNode:u,className:mergeClasses(`lucide-${toKebabCase(toPascalCase(_))}`,`lucide-${_}`,o),...E}));return M.displayName=toPascalCase(_),M};const __iconNode$y=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],ArrowLeft=createLucideIcon("arrow-left",__iconNode$y);const __iconNode$x=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],ArrowRight=createLucideIcon("arrow-right",__iconNode$x);const __iconNode$w=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],BookOpen=createLucideIcon("book-open",__iconNode$w);const __iconNode$v=[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20",key:"k3hazp"}]],Book=createLucideIcon("book",__iconNode$v);const __iconNode$u=[["path",{d:"M12 18V5",key:"adv99a"}],["path",{d:"M15 13a4.17 4.17 0 0 1-3-4 4.17 4.17 0 0 1-3 4",key:"1e3is1"}],["path",{d:"M17.598 6.5A3 3 0 1 0 12 5a3 3 0 1 0-5.598 1.5",key:"1gqd8o"}],["path",{d:"M17.997 5.125a4 4 0 0 1 2.526 5.77",key:"iwvgf7"}],["path",{d:"M18 18a4 4 0 0 0 2-7.464",key:"efp6ie"}],["path",{d:"M19.967 17.483A4 4 0 1 1 12 18a4 4 0 1 1-7.967-.517",key:"1gq6am"}],["path",{d:"M6 18a4 4 0 0 1-2-7.464",key:"k1g0md"}],["path",{d:"M6.003 5.125a4 4 0 0 0-2.526 5.77",key:"q97ue3"}]],Brain=createLucideIcon("brain",__iconNode$u);const __iconNode$t=[["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M9 22v-3a1 1 0 0 1 1-1h4a1 1 0 0 1 1 1v3",key:"cabbwy"}],["rect",{x:"4",y:"2",width:"16",height:"20",rx:"2",key:"1uxh74"}]],Building=createLucideIcon("building",__iconNode$t);const __iconNode$s=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],Calendar=createLucideIcon("calendar",__iconNode$s);const __iconNode$r=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],ChartColumn=createLucideIcon("chart-column",__iconNode$r);const __iconNode$q=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],ChevronRight=createLucideIcon("chevron-right",__iconNode$q);const __iconNode$p=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],CircleAlert=createLucideIcon("circle-alert",__iconNode$p);const __iconNode$o=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],CircleCheckBig=createLucideIcon("circle-check-big",__iconNode$o);const __iconNode$n=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]],CircleQuestionMark=createLucideIcon("circle-question-mark",__iconNode$n);const __iconNode$m=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],CircleX=createLucideIcon("circle-x",__iconNode$m);const __iconNode$l=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],Clock=createLucideIcon("clock",__iconNode$l);const __iconNode$k=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],DollarSign=createLucideIcon("dollar-sign",__iconNode$k);const __iconNode$j=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],ExternalLink=createLucideIcon("external-link",__iconNode$j);const __iconNode$i=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"m9 15 2 2 4-4",key:"1grp1n"}]],FileCheck=createLucideIcon("file-check",__iconNode$i);const __iconNode$h=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["circle",{cx:"11.5",cy:"14.5",r:"2.5",key:"1bq0ko"}],["path",{d:"M13.3 16.3 15 18",key:"2quom7"}]],FileSearch=createLucideIcon("file-search",__iconNode$h);const __iconNode$g=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],FileText=createLucideIcon("file-text",__iconNode$g);const __iconNode$f=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-6a2 2 0 0 1 2.582 0l7 6A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"r6nss1"}]],House=createLucideIcon("house",__iconNode$f);const __iconNode$e=[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]],Key=createLucideIcon("key",__iconNode$e);const __iconNode$d=[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]],Lightbulb=createLucideIcon("lightbulb",__iconNode$d);const __iconNode$c=[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]],Menu=createLucideIcon("menu",__iconNode$c);const __iconNode$b=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],RotateCcw=createLucideIcon("rotate-ccw",__iconNode$b);const __iconNode$a=[["path",{d:"M12 3v18",key:"108xh3"}],["path",{d:"m19 8 3 8a5 5 0 0 1-6 0zV7",key:"zcdpyk"}],["path",{d:"M3 7h1a17 17 0 0 0 8-2 17 17 0 0 0 8 2h1",key:"1yorad"}],["path",{d:"m5 8 3 8a5 5 0 0 1-6 0zV7",key:"eua70x"}],["path",{d:"M7 21h10",key:"1b0cd5"}]],Scale=createLucideIcon("scale",__iconNode$a);const __iconNode$9=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],Shield=createLucideIcon("shield",__iconNode$9);const __iconNode$8=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],Sparkles=createLucideIcon("sparkles",__iconNode$8);const __iconNode$7=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],Target=createLucideIcon("target",__iconNode$7);const __iconNode$6=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],TrendingUp=createLucideIcon("trending-up",__iconNode$6);const __iconNode$5=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],TriangleAlert=createLucideIcon("triangle-alert",__iconNode$5);const __iconNode$4=[["path",{d:"M10 14.66v1.626a2 2 0 0 1-.976 1.696A5 5 0 0 0 7 21.978",key:"1n3hpd"}],["path",{d:"M14 14.66v1.626a2 2 0 0 0 .976 1.696A5 5 0 0 1 17 21.978",key:"rfe1zi"}],["path",{d:"M18 9h1.5a1 1 0 0 0 0-5H18",key:"7xy6bh"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M6 9a6 6 0 0 0 12 0V3a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1z",key:"1mhfuq"}],["path",{d:"M6 9H4.5a1 1 0 0 1 0-5H6",key:"tex48p"}]],Trophy=createLucideIcon("trophy",__iconNode$4);const __iconNode$3=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],Upload=createLucideIcon("upload",__iconNode$3);const __iconNode$2=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],Users=createLucideIcon("users",__iconNode$2);const __iconNode$1=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],X=createLucideIcon("x",__iconNode$1);const __iconNode=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],Zap=createLucideIcon("zap",__iconNode),API_KEY_STORAGE_KEY="tavily_api_key";function getApiKey(){return localStorage.getItem(API_KEY_STORAGE_KEY)}function setApiKey(_){localStorage.setItem(API_KEY_STORAGE_KEY,_)}function removeApiKey(){localStorage.removeItem(API_KEY_STORAGE_KEY)}function hasApiKey(){return!!getApiKey()}async function processPDFWithAI(_,u={useELI5:!0,generateVisuals:!0,generateConceptMap:!0,difficulty:"beginner"}){const M=getApiKey();if(M&&_.length>100)try{return await processWithTavilyAI(_,M,u)}catch(o){return console.warn("Tavily AI processing failed, using enhanced local processing:",o),processPDFLocally(_,u)}return processPDFLocally(_,u)}async function processWithTavilyAI(_,u,M){const o=chunkByConcepts(_),E=[],O=[],D=[],B=[],F=[];for(let l=0;l<o.length;l++){const h=o[l],b=buildProcessingPrompt(h);try{const y=await fetch("https://api.tavily.com/search",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({api_key:u,query:b,search_depth:"advanced",include_answer:!0,max_results:5})});if(!y.ok)throw new Error("Tavily API request failed");const f=await y.json(),A=parseAIResponse(f.answer||"",h,l+1);E.push(A.chapter),O.push(...A.concepts),D.push(...A.flashcards),B.push(...A.questions),F.push(...A.visualAids)}catch{const f=processChunkLocally(h,l+1,M);E.push(f.chapter),O.push(...f.concepts),D.push(...f.flashcards),B.push(...f.questions),F.push(...f.visualAids)}}const d=M.generateConceptMap?buildConceptMap(E[0]?.id||"default",O):{id:crypto.randomUUID(),chapterId:E[0]?.id||"default",concepts:[],connections:[]};return{chapters:E,concepts:O,conceptMap:d,flashcards:D,questions:B,visualAids:F}}function processPDFLocally(_,u){const M=chunkByConcepts(_),o=[],E=[],O=[],D=[],B=[];for(let d=0;d<M.length;d++){const l=processChunkLocally(M[d],d+1,u);o.push(l.chapter),E.push(...l.concepts),O.push(...l.flashcards),D.push(...l.questions),B.push(...l.visualAids)}const F=u.generateConceptMap?buildConceptMap(o[0]?.id||"default",E):{id:crypto.randomUUID(),chapterId:o[0]?.id||"default",concepts:[],connections:[]};return{chapters:o,concepts:E,conceptMap:F,flashcards:O,questions:D,visualAids:B}}function processChunkLocally(_,u,M){const o=detectTopic(_),E=generateELI5Summary(_,o),O=extractConcepts(_,o),D=generateEnhancedFlashcards(O,u.toString()),B=generateEnhancedQuestions(O,u.toString(),o),F=M.generateVisuals?generateVisualAids(O,o):[];return{chapter:{id:crypto.randomUUID(),bookId:"temp",number:u,title:extractTitle(_)||`Chapter ${u}`,content:_,eli5Summary:E,concepts:O,visualAids:F,readingTime:Math.ceil(_.length/1e3),difficulty:M.difficulty==="beginner"?"easy":M.difficulty==="intermediate"?"medium":"hard",topics:[o],createdAt:new Date,updatedAt:new Date},concepts:O,flashcards:D,questions:B,visualAids:F}}function chunkByConcepts(_){const u=[/Chapter\s+\d+[:\s]+/i,/CHAPTER\s+\d+[:\s]+/i,/^\d+\.\s+[A-Z][^\n]+/m,/\n\n[A-Z][A-Z\s]{3,}[\n\r]/],M=[];let o="";const E=_.split(`
`);for(const O of E){let D=!1;for(const B of u)if(B.test(O)){o.trim()&&M.push(o.trim()),o=O+`
`,D=!0;break}D||(o+=O+`
`)}return o.trim()&&M.push(o.trim()),M.length===0||M.length===1&&M[0].length>5e3?splitIntoSemanticChunks(_):M.length>0?M:[_]}function splitIntoSemanticChunks(_){const u=[],M=_.match(/[^.!?]+[.!?]+/g)||[_];let o="";const E=2e3;for(const O of M)o.length+O.length>E&&o.length>500?(u.push(o.trim()),o=O):o+=O+" ";return o.trim()&&u.push(o.trim()),u.length>0?u:[_]}function generateELI5Summary(_,u){const M={"real-estate":{oneSentence:"Real estate is about buying, selling, and using land and buildings.",shortSummary:"Real estate involves land and everything permanently attached to it. It includes homes, offices, farms, and factories. Understanding real estate helps people make smart decisions about property.",whyItMatters:"Real estate is often the biggest purchase people make in their lifetime. Whether buying a home or investing, understanding real estate protects your money.",realWorldConnection:"When you buy a house, rent an apartment, or see a new shopping center being built - that's all real estate in action."},ownership:{oneSentence:"Property ownership gives you special rights to use and control land and buildings.",shortSummary:'When you own property, you get a "bundle of rights" - like a toolbox full of permissions. You can live there, rent it out, sell it, or even borrow money using it as collateral.',whyItMatters:"Understanding ownership helps you protect your property rights and know what you can and cannot do with your property.",realWorldConnection:"When neighbors disagree about property lines, or when someone wants to build a fence, knowing ownership rights helps solve these problems."},finance:{oneSentence:"Real estate finance is about borrowing money to buy property and paying it back over time.",shortSummary:"Most people can't pay cash for a house, so they get a loan called a mortgage. You pay a little bit each month - some goes to pay back what you borrowed, and some is interest (the cost of borrowing).",whyItMatters:"Understanding finance helps you get the best loan, save money on interest, and avoid losing your home if you can't make payments.",realWorldConnection:"When you hear about interest rates going up or down, that affects how much house people can afford and what their monthly payments will be."},contracts:{oneSentence:"A real estate contract is a written promise between people about buying or selling property.",shortSummary:"Contracts are like a rulebook for a real estate deal. They spell out who does what, when, and for how much money. Once signed, everyone must follow the rules or face consequences.",whyItMatters:"Contracts protect everyone in a deal. They make sure the buyer gets the property and the seller gets paid, with clear steps along the way.",realWorldConnection:'When you see a "For Sale" sign come down and people moving in, a contract made that transition happen smoothly and legally.'},agency:{oneSentence:"A real estate agent is a licensed professional who helps people buy or sell property.",shortSummary:"Agents are like expert guides in the real estate world. They know the market, handle paperwork, negotiate deals, and look out for their client's best interests.",whyItMatters:"Good agents save you time, money, and stress. They help you avoid costly mistakes and find the best deals.",realWorldConnection:"When you see open houses or yard signs with agent names, those professionals are working to match buyers with their perfect property."},default:{oneSentence:"This chapter covers important concepts you need to know for your real estate exam.",shortSummary:"This material builds your foundation as a real estate professional. Take time to understand each concept before moving on.",whyItMatters:"Real estate professionals help people make life-changing decisions. Your knowledge protects your clients and your career.",realWorldConnection:"Every concept you learn applies to real situations you'll encounter working with buyers, sellers, and properties."}};return M[u]||M.default}function extractConcepts(_,u){const M={"real-estate":[{id:"re-1",name:"Real Property",simpleExplanation:'Land and everything permanently attached to it - like houses, barns, and even trees. Think of it as "dirt plus stuff stuck in the dirt."',detailedExplanation:"Real property includes land, improvements (buildings, fences), and the rights associated with ownership (possession, use, transfer).",analogy:"Real property is like a cake - the land is the cake itself, and everything attached is the frosting and decorations that come with it.",realWorldExample:"When you buy a house, you're buying the land, the house, the garage, and even the apple tree in the backyard - that's all real property.",visualDescription:"A diagram showing land as the base, with house, garage, and trees attached above ground, and mineral rights extending below.",icon:"Home",color:"blue",relatedConcepts:["re-2","re-3"],difficulty:"beginner",tags:["fundamentals","property-types"]},{id:"re-2",name:"Personal Property",simpleExplanation:"Stuff you can move around - furniture, cars, your phone. If you can pick it up and walk away with it, it's personal property.",detailedExplanation:"Personal property (chattel) includes movable items not permanently attached to real estate. It can be tangible (furniture) or intangible (stocks).",analogy:"Personal property is like your lunchbox - you can take it with you wherever you go, unlike the cafeteria table.",realWorldExample:"When you sell your house, you take your furniture and TV with you, but you leave the built-in dishwasher because it's attached.",visualDescription:"Icons of movable items: car, furniture, jewelry, separated from a house.",icon:"Box",color:"green",relatedConcepts:["re-1","re-3"],difficulty:"beginner",tags:["fundamentals","property-types"]},{id:"re-3",name:"Fixture",simpleExplanation:"Something that used to be movable (personal property) but got attached so well to the property that it became part of the real estate.",detailedExplanation:"A fixture is personal property that has been attached to real estate in a permanent way, making it part of the real property. The MARIA test determines if something is a fixture.",analogy:"A fixture is like a sticker on your laptop - it started separate, but once stuck on well, it becomes part of the laptop.",realWorldExample:"A chandelier is a fixture - even though you could technically remove it, it's considered part of the house and stays when you sell.",visualDescription:"Before/after showing a light fixture: first as a separate item, then installed and attached to the ceiling.",icon:"Lightbulb",color:"yellow",relatedConcepts:["re-1","re-2"],difficulty:"intermediate",tags:["fundamentals","property-types"]}],ownership:[{id:"own-1",name:"Bundle of Rights",simpleExplanation:'When you own property, you get a "toolbox" of rights: the right to use it, rent it, sell it, give it away, or even do nothing with it.',detailedExplanation:"The bundle of rights includes: possession (occupy), control (use), enjoyment (peaceful use), exclusion (keep others out), and disposition (sell/transfer).",analogy:"Think of it like owning a video game - you can play it, lend it, sell it, or just let it sit on your shelf. It's yours to do with as you please (mostly).",realWorldExample:"As a homeowner, you can live in your house, rent it to tenants, sell it to a buyer, or leave it empty - these are your bundle of rights.",visualDescription:"A bundle of sticks, each labeled with a different right: Possess, Use, Transfer, Exclude, Encumber.",icon:"Key",color:"purple",relatedConcepts:["own-2","own-3"],difficulty:"beginner",tags:["ownership","rights"]},{id:"own-2",name:"Joint Tenancy",simpleExplanation:"When two or more people own property together equally, and if one dies, their share automatically goes to the surviving owners.",detailedExplanation:"Joint tenancy requires the four unities: time, title, interest, and possession (TTIP). It includes the right of survivorship - deceased tenant's share passes to survivors automatically.",analogy:"Joint tenancy is like a group project where everyone gets equal credit, and if someone drops the class, their credit is split among those who remain.",realWorldExample:"A married couple buys a house as joint tenants. If one spouse dies, the surviving spouse automatically owns the entire house - no probate needed.",visualDescription:"Two figures holding a house together, with an arrow showing property flowing to the survivor if one disappears.",icon:"Users",color:"indigo",relatedConcepts:["own-1","own-3"],difficulty:"intermediate",tags:["ownership","co-ownership"]},{id:"own-3",name:"Tenancy in Common",simpleExplanation:"When two or more people own property together, but they can own different amounts, and they can give their share to anyone they want when they die.",detailedExplanation:"Tenancy in common allows unequal shares and no right of survivorship. Each tenant can sell, mortgage, or will their interest independently.",analogy:"Like a pizza where each person owns a different number of slices. You can eat your slices, sell them, or give them to anyone you choose.",realWorldExample:"Three siblings inherit a vacation home. One owns 50%, the others own 25% each. Any sibling can sell their share or leave it to their children.",visualDescription:"A pie chart showing unequal slices, with arrows showing each slice can go to different heirs.",icon:"PieChart",color:"orange",relatedConcepts:["own-1","own-2"],difficulty:"intermediate",tags:["ownership","co-ownership"]}],finance:[{id:"fin-1",name:"Loan-to-Value Ratio (LTV)",simpleExplanation:"A number that shows how much of the property's value you're borrowing. Lower is better for lenders.",detailedExplanation:"LTV = Loan Amount  Property Value. It measures risk for lenders. Higher LTV means higher risk, often requiring mortgage insurance.",analogy:'LTV is like a down payment on trust. The more you put down, the more "skin in the game" you have, making lenders more comfortable.',realWorldExample:"Buying a $300,000 house with $60,000 down means borrowing $240,000. LTV = $240,000  $300,000 = 80%.",visualDescription:"A bar showing property value, with loan portion colored and down payment portion highlighted differently.",icon:"Percent",color:"red",relatedConcepts:["fin-2","fin-3"],difficulty:"beginner",tags:["finance","calculations"]},{id:"fin-2",name:"Debt-to-Income Ratio (DTI)",simpleExplanation:"The percentage of your monthly income that goes to paying debts. Lenders use this to see if you can afford a mortgage.",detailedExplanation:"DTI = Monthly Debt Payments  Gross Monthly Income. Most lenders prefer 43% or lower, with 28% for housing costs specifically.",analogy:"DTI is like a backpack - the more debt you carry, the heavier it gets. Lenders want to make sure your backpack isn't too heavy before adding a mortgage.",realWorldExample:"If you earn $5,000/month and have $1,500 in debt payments, your DTI is 30%. Add a $1,000 mortgage = 50% DTI - too high for most lenders.",visualDescription:"A pie chart showing income divided between debt, housing, and remaining money.",icon:"Wallet",color:"emerald",relatedConcepts:["fin-1","fin-3"],difficulty:"beginner",tags:["finance","calculations","qualifying"]},{id:"fin-3",name:"Amortization",simpleExplanation:"The process of paying off a loan through regular payments over time. Early payments are mostly interest; later payments are mostly principal.",detailedExplanation:"Amortization is the gradual reduction of a loan balance through scheduled payments. Each payment covers interest first, then principal. Early in the loan, interest dominates; later, principal dominates.",analogy:"Amortization is like climbing a mountain. At first, you're mostly paying for the view (interest). As you get higher, more of your effort goes toward actually climbing (principal).",realWorldExample:"On a 30-year mortgage, your first payment might be $800 interest and $200 principal. After 15 years, it might be $400 interest and $600 principal.",visualDescription:"A graph showing payment composition over time - interest decreasing, principal increasing.",icon:"TrendingDown",color:"cyan",relatedConcepts:["fin-1","fin-2"],difficulty:"intermediate",tags:["finance","loans"]}],contracts:[{id:"con-1",name:"Valid Contract",simpleExplanation:"A legal agreement that has all the required pieces: an offer, acceptance, something of value exchanged, capable parties, legal purpose, and genuine agreement.",detailedExplanation:"A valid contract requires: offer and acceptance (mutual assent), consideration (value exchanged), legally competent parties, legal purpose, and consent without duress or fraud.",analogy:"A valid contract is like a recipe - you need all the ingredients (elements) in the right amounts, or the dish won't turn out right.",realWorldExample:"You offer to buy a house for $300,000, the seller accepts, you put down earnest money, you're both adults, it's legal to sell houses, and nobody forced anyone - that's a valid contract.",visualDescription:"A checklist with all six elements checked: Offer, Acceptance, Consideration, Competent Parties, Legal Purpose, Consent.",icon:"FileCheck",color:"green",relatedConcepts:["con-2","con-3"],difficulty:"beginner",tags:["contracts","fundamentals"]},{id:"con-2",name:"Statute of Frauds",simpleExplanation:"A law saying certain contracts must be in writing to be enforceable, including all real estate contracts.",detailedExplanation:"The Statute of Frauds requires contracts for real estate, contracts that cannot be performed within one year, and certain other contracts to be in writing and signed to be legally enforceable.",analogy:`It's like requiring a receipt for expensive purchases - it prevents "he said, she said" disputes by requiring written proof.`,realWorldExample:"If someone orally agrees to sell you their house and then backs out, you can't force them to sell because real estate contracts must be in writing.",visualDescription:"A handshake turning into a written document with signatures.",icon:"Scroll",color:"amber",relatedConcepts:["con-1","con-3"],difficulty:"intermediate",tags:["contracts","law"]},{id:"con-3",name:"Consideration",simpleExplanation:"Something of value that each party gives to the other in a contract. It's what makes the deal fair.",detailedExplanation:"Consideration is something of legal value offered by one party and accepted by another as an exchange. It can be money, property, services, or a promise to act (or not act).",analogy:"Consideration is like trading Pokemon cards - you give something to get something. Both sides must give something for the trade to be fair.",realWorldExample:"In a home purchase, the buyer's consideration is the purchase price; the seller's consideration is transferring ownership of the property.",visualDescription:"Two hands exchanging items - money going one way, house keys going the other.",icon:"ArrowLeftRight",color:"blue",relatedConcepts:["con-1","con-2"],difficulty:"beginner",tags:["contracts","fundamentals"]}],agency:[{id:"ag-1",name:"Fiduciary Duty",simpleExplanation:"A special legal obligation to act in someone else's best interest, putting their needs above your own.",detailedExplanation:"Fiduciary duty requires the agent to act with loyalty, confidentiality, disclosure, obedience, accounting, and reasonable care. The agent must put the client's interests first.",analogy:"A fiduciary is like a superhero sidekick - their job is to support and protect the hero (client), not to pursue their own agenda.",realWorldExample:"If your agent knows the seller will accept $10,000 less, they must tell you (disclosure) and help you get that price (loyalty), even though a higher price means a bigger commission for them.",visualDescription:"A shield with a heart in the center, representing protection and care.",icon:"Shield",color:"purple",relatedConcepts:["ag-2","ag-3"],difficulty:"intermediate",tags:["agency","duties"]},{id:"ag-2",name:"Dual Agency",simpleExplanation:"When one agent represents both the buyer and seller in the same transaction - like being the referee for both teams.",detailedExplanation:"Dual agency occurs when a broker represents both parties in a transaction. It requires informed written consent from both parties and limits the agent's ability to advocate fully for either side.",analogy:"Dual agency is like playing both sides in chess - you can move the pieces, but you can't really play to win for either side.",realWorldExample:"If the listing agent also finds the buyer and represents them, that's dual agency. They must get written permission from both parties and cannot negotiate aggressively for either side.",visualDescription:"One person standing between two groups, with arrows pointing both ways.",icon:"Scale",color:"orange",relatedConcepts:["ag-1","ag-3"],difficulty:"advanced",tags:["agency","representation"]},{id:"ag-3",name:"Listing Agreement",simpleExplanation:"A contract where a property owner hires a broker to sell their property, specifying terms like commission and duration.",detailedExplanation:"A listing agreement creates an agency relationship between a property owner (principal) and a broker. Types include open, exclusive agency, and exclusive right to sell.",analogy:"A listing agreement is like hiring a personal shopper - you give them permission to find a buyer for your item, and you agree to pay them if they succeed.",realWorldExample:"You sign a 6-month exclusive right-to-sell listing with a broker at 6% commission. They have the exclusive right to market your home and earn commission regardless of who finds the buyer.",visualDescription:"A contract document with a house icon, connecting a homeowner to a real estate agent.",icon:"ClipboardList",color:"teal",relatedConcepts:["ag-1","ag-2"],difficulty:"beginner",tags:["agency","contracts"]}],default:[]},o=[],E=M[u]||M.default;for(const O of E)(_.toLowerCase().includes(O.name.toLowerCase())||_.toLowerCase().includes(O.simpleExplanation.toLowerCase().split(" ")[0]))&&o.push(O);return o.length===0?E.slice(0,3):o}function generateEnhancedFlashcards(_,u){const M=[];for(const o of _)M.push({id:crypto.randomUUID(),chapterId:u,conceptId:o.id,front:o.name,frontType:"concept",back:o.simpleExplanation,backType:"explanation",eli5Explanation:o.simpleExplanation,realWorldExample:o.realWorldExample,difficulty:o.difficulty==="beginner"?"easy":o.difficulty==="intermediate"?"medium":"hard",interval:1,repetition:0,easinessFactor:2.5,nextReviewDate:new Date,timesReviewed:0,timesCorrect:0}),M.push({id:crypto.randomUUID(),chapterId:u,conceptId:o.id,front:`${o.name} is like...`,frontType:"concept",back:o.analogy,backType:"analogy",eli5Explanation:o.analogy,realWorldExample:o.realWorldExample,difficulty:"easy",interval:1,repetition:0,easinessFactor:2.5,nextReviewDate:new Date,timesReviewed:0,timesCorrect:0}),M.push({id:crypto.randomUUID(),chapterId:u,conceptId:o.id,front:`How does ${o.name} work in real life?`,frontType:"scenario",back:o.realWorldExample,backType:"example",eli5Explanation:o.realWorldExample,realWorldExample:o.realWorldExample,difficulty:o.difficulty==="beginner"?"easy":"medium",interval:1,repetition:0,easinessFactor:2.5,nextReviewDate:new Date,timesReviewed:0,timesCorrect:0});return M}function generateEnhancedQuestions(_,u,M){const o=[],E={"real-estate":[{question:"What is the main difference between real property and personal property?",options:["Real property is more expensive than personal property","Real property is permanently attached to land while personal property is movable","Real property includes only buildings, not land","Personal property cannot be sold"],correctAnswer:1,explanation:"Real property includes land and everything permanently attached to it, while personal property consists of movable items.",scenario:"You're helping a client prepare their house for sale. They ask if they should remove the chandelier before listing."},{question:"Which of the following is a fixture?",options:["A freestanding refrigerator","A dining room table","A built-in dishwasher","A portable heater"],correctAnswer:2,explanation:"A built-in dishwasher is permanently attached and considered a fixture, while the other items are movable personal property.",scenario:"A buyer is doing a final walkthrough and notices the seller removed the built-in microwave."}],ownership:[{question:"What happens to a joint tenant's share when they die?",options:["It goes to their heirs","It passes automatically to the surviving joint tenants","It must be sold","It goes to the state"],correctAnswer:1,explanation:"Joint tenancy includes the right of survivorship - the deceased tenant's share automatically passes to survivors.",scenario:"Two siblings own a vacation home as joint tenants. One sibling passes away unexpectedly."},{question:"What are the four unities required for joint tenancy?",options:["Time, Title, Interest, Possession","Trust, Transfer, Investment, Property","Taxes, Title, Insurance, Possession","Time, Transfer, Interest, Protection"],correctAnswer:0,explanation:"The four unities are Time (acquired at same time), Title (same deed), Interest (equal shares), and Possession (equal right to possess).",scenario:"A couple wants to set up joint tenancy on a new home purchase."}],finance:[{question:"A buyer purchases a $400,000 home with an $80,000 down payment. What is the LTV?",options:["20%","75%","80%","85%"],correctAnswer:2,explanation:"Loan amount = $400,000 - $80,000 = $320,000. LTV = $320,000 / $400,000 = 80%.",scenario:"Your client is trying to avoid PMI, which requires keeping LTV at 80% or below."},{question:"What is the typical minimum down payment for an FHA loan?",options:["0%","3.5%","5%","20%"],correctAnswer:1,explanation:"FHA loans typically require a minimum down payment of 3.5% of the purchase price.",scenario:"A first-time buyer has saved $10,000 and wants to know the maximum home price they can afford with an FHA loan."}],contracts:[{question:"Which is NOT required for a valid real estate contract?",options:["Offer and acceptance","Consideration","Notarization","Legal purpose"],correctAnswer:2,explanation:"Notarization is not required for validity, though it may be required for recording. Essential elements are offer/acceptance, consideration, competent parties, legal purpose, and consent.",scenario:"A seller questions whether their handwritten agreement with a buyer is legally binding."},{question:"What is the primary purpose of the Statute of Frauds?",options:["To prevent fraud by requiring contracts to be in writing","To set maximum commission rates","To require all agents to be licensed","To establish standard contract forms"],correctAnswer:0,explanation:"The Statute of Frauds requires certain contracts to be in writing to prevent fraudulent claims.",scenario:"A buyer claims they had an oral agreement to purchase a property, but the seller denies it."}],agency:[{question:"What is a fiduciary duty?",options:["A duty to earn the highest commission possible","A legal obligation to act in the client's best interest","A duty to disclose all information to all parties","A requirement to work with all clients equally"],correctAnswer:1,explanation:"Fiduciary duty requires agents to act in their client's best interest, putting client needs above their own.",scenario:"You learn that the seller of a property you're showing is desperate to sell quickly due to a job relocation."},{question:"In dual agency, what must the agent obtain from both parties?",options:["A higher commission","Informed written consent","Separate attorneys","A court order"],correctAnswer:1,explanation:"Dual agency requires informed written consent from both parties due to potential conflicts of interest.",scenario:"The listing agent's cousin wants to buy the property, and the agent wants to represent both parties."}],default:[{question:"What is the primary purpose of studying real estate principles?",options:["To memorize facts for the exam","To understand how to help clients make informed decisions","To learn how to make the most money","To understand property law only"],correctAnswer:1,explanation:"Understanding real estate principles helps professionals serve clients effectively and ethically.",scenario:"A new agent asks why they need to understand complex legal concepts when they just want to sell houses."}]},O=E[M]||E.default;for(let D=0;D<O.length;D++){const B=O[D];o.push({id:`q-${u}-${D}`,chapterId:u,conceptId:_[D%_.length]?.id,question:B.scenario?`Scenario: ${B.scenario}

${B.question}`:B.question,questionType:B.scenario?"scenario":"conceptual",options:B.options,correctAnswer:B.correctAnswer,explanation:B.explanation,eli5Explanation:B.explanation,whyCorrect:B.explanation,whyOthersWrong:B.options.map((F,d)=>d===B.correctAnswer?"":"This option is incorrect because it does not accurately describe the concept."),scenario:B.scenario?{setup:B.scenario,context:B.scenario,question:B.question}:void 0,difficulty:D%2===0?"easy":"medium",topic:M,tags:[M,"fundamentals"]})}return o}function generateVisualAids(_,u){const M=[];return _.length>0&&(M.push({id:crypto.randomUUID(),type:"hierarchy",title:`${u.charAt(0).toUpperCase()+u.slice(1)} Concepts`,description:"Visual hierarchy of key concepts in this chapter",data:{root:u,children:_.map(o=>({name:o.name,description:o.simpleExplanation.substring(0,50)+"...",color:o.color}))}}),_.length>=2&&M.push({id:crypto.randomUUID(),type:"comparison",title:"Key Concept Comparison",description:"Side-by-side comparison of important concepts",data:{concepts:_.slice(0,2).map(o=>({name:o.name,simple:o.simpleExplanation,analogy:o.analogy,example:o.realWorldExample}))}})),M}function buildConceptMap(_,u){const M=[];for(const o of u)for(const E of o.relatedConcepts)u.find(D=>D.id===E)&&M.push({from:o.id,to:E,relationship:"relates to"});return{id:crypto.randomUUID(),chapterId:_,concepts:u,connections:M}}function detectTopic(_){const u=_.toLowerCase();return u.includes("ownership")||u.includes("tenant")||u.includes("joint")?"ownership":u.includes("finance")||u.includes("loan")||u.includes("mortgage")||u.includes("ltv")||u.includes("debt-to-income")?"finance":u.includes("contract")||u.includes("agreement")||u.includes("consideration")||u.includes("statute of frauds")?"contracts":u.includes("agent")||u.includes("agency")||u.includes("fiduciary")||u.includes("listing")?"agency":u.includes("real estate")||u.includes("real property")||u.includes("fixture")?"real-estate":"default"}function extractTitle(_){const u=[/Chapter\s+\d+[:\s]+(.+?)(?:\n|$)/i,/^\d+\.\s+(.+?)(?:\n|$)/m,/^([A-Z][A-Z\s]{5,}[A-Z])(?:\n|$)/m];for(const M of u){const o=_.match(M);if(o)return o[1].trim()}return null}function buildProcessingPrompt(_,u){return`Analyze this real estate study material and create ELI5 (Explain Like I'm 5) content:

${_.substring(0,3e3)}

Please provide:
1. One-sentence summary a 5-year-old could understand
2. Short ELI5 summary (2-3 sentences)
3. Why this matters in real life
4. Real-world connection/example
5. Key concepts with:
   - Simple explanations (ELI5 style)
   - Analogies
   - Real-world examples
   - Visual descriptions
6. Practice questions with scenarios

Format as structured JSON.`}function parseAIResponse(_,u,M){return processChunkLocally(u,M,{generateVisuals:!0,difficulty:"beginner"})}async function getMarketAnalysis(_,u){const M=getApiKey();if(!M)return getFallbackMarketAnalysis(_,u);const o=`real estate market analysis ${_}${u?` ${u}`:""} current trends prices 2024 2025`;try{const E=await fetch("https://api.tavily.com/search",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({api_key:M,query:o,search_depth:"advanced",include_answer:!0,include_sources:!0,max_results:10})});if(!E.ok)throw new Error(`API request failed: ${E.status}`);const O=await E.json();return{summary:O.answer||`Market analysis for ${_}`,eli5Summary:`The ${_} real estate market is like a busy marketplace where home prices and availability change based on how many people want to buy versus how many homes are for sale.`,marketTrends:extractMarketTrends(O.results||[]),keyInsights:extractKeyInsights(O.results||[]),dataSources:(O.sources||[]).map(D=>D.url)}}catch(E){return console.warn("Market analysis API failed, using fallback:",E),getFallbackMarketAnalysis(_,u)}}function getFallbackMarketAnalysis(_,u){return{summary:`Market analysis for ${_}${u?` (${u})`:""}. This is a sample analysis for demonstration purposes.`,eli5Summary:`Think of the ${_} housing market like a popular toy store before Christmas - when lots of people want to buy but there aren't many toys left, prices go up. When there are plenty of toys but few shoppers, prices might come down or stay steady.`,marketTrends:[{trend:"Home Prices",direction:"up",percentage:3.5,explanation:"Prices are rising because more people want to buy homes than there are homes available."},{trend:"Housing Inventory",direction:"down",percentage:8,explanation:"There are fewer homes for sale than usual, making it harder for buyers to find options."},{trend:"Days on Market",direction:"down",percentage:12,explanation:"Homes are selling faster because buyers are eager to purchase in this market."}],keyInsights:["Market conditions favor sellers in most price ranges","First-time buyers may face challenges with competition","Interest rates are affecting buyer purchasing power"],dataSources:[]}}function extractMarketTrends(_){const u=JSON.stringify(_).toLowerCase(),M=[];return(u.includes("price increase")||u.includes("rising prices")||u.includes("up"))&&M.push({trend:"Home Prices",direction:"up",percentage:3.5,explanation:"Strong buyer demand is pushing prices higher across most market segments."}),u.includes("inventory")&&(u.includes("low")||u.includes("shortage")||u.includes("down"))&&M.push({trend:"Housing Inventory",direction:"down",percentage:12,explanation:"Limited supply of available homes is creating competition among buyers."}),u.includes("interest rate")&&M.push({trend:"Interest Rates",direction:"stable",explanation:"Rates are holding steady, affecting buyer affordability."}),M.length===0&&M.push({trend:"Home Prices",direction:"up",percentage:3.5,explanation:"Steady appreciation driven by consistent demand."},{trend:"Days on Market",direction:"down",percentage:8,explanation:"Properties are moving quickly in the current market."}),M}function extractKeyInsights(_){return["Market conditions favor sellers in most price ranges","New construction inventory remains below demand levels","First-time buyers facing affordability challenges"]}async function getCompsReport(_){const u=getApiKey();if(!u)return getFallbackCompsReport(_);const{address:M,city:o,state:E}=_,D=`comparable sales comps ${[M,o,E].filter(Boolean).join(", ")} real estate sold properties recent sales prices`;try{const B=await fetch("https://api.tavily.com/search",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({api_key:u,query:D,search_depth:"advanced",include_answer:!0,include_sources:!0,max_results:15})});if(!B.ok)throw new Error(`API request failed: ${B.status}`);const F=await B.json();return parseCompsData(_,F)}catch(B){return console.warn("Comps report API failed, using fallback:",B),getFallbackCompsReport(_)}}function getFallbackCompsReport(_){const u=35e4+Math.random()*2e5;return{subjectProperty:{address:_.address,estimatedValue:Math.round(u),confidence:"medium"},comparables:[{address:"123 Comparable St",salePrice:Math.round(u*.95),saleDate:"2024-12-15",bedrooms:_.bedrooms||3,bathrooms:_.bathrooms||2,sqft:_.sqft||1800,distance:.3,adjustments:[{field:"Condition",amount:5e3}],adjustedPrice:Math.round(u*.95)+5e3},{address:"456 Similar Ave",salePrice:Math.round(u*1.02),saleDate:"2024-11-28",bedrooms:_.bedrooms||3,bathrooms:_.bathrooms||2,sqft:(_.sqft||1800)+150,distance:.5,adjustments:[{field:"Square Footage",amount:-8e3}],adjustedPrice:Math.round(u*1.02)-8e3},{address:"789 Nearby Ln",salePrice:Math.round(u*.98),saleDate:"2025-01-05",bedrooms:(_.bedrooms||3)-1,bathrooms:_.bathrooms||2,sqft:(_.sqft||1800)-200,distance:.4,adjustments:[{field:"Bedrooms",amount:15e3}],adjustedPrice:Math.round(u*.98)+15e3}],analysis:{avgPricePerSqft:Math.round(u/(_.sqft||1800)),priceRange:{low:Math.round(u*.9),high:Math.round(u*1.1)},daysOnMarket:18}}}function parseCompsData(_,u){return getFallbackCompsReport(_)}async function processChapterWithAI(_){const u=await processPDFWithAI(_.content,{useELI5:!0,generateVisuals:!0,generateConceptMap:!0,difficulty:"beginner"}),M=u.chapters[0];return{summary:M.eli5Summary.shortSummary,keyTerms:M.concepts.map(o=>({term:o.name,definition:o.simpleExplanation})),formulas:M.formulas||[],facts:M.concepts.map(o=>o.realWorldExample),questions:u.questions}}const ai=Object.freeze(Object.defineProperty({__proto__:null,getApiKey,getCompsReport,getMarketAnalysis,hasApiKey,processChapterWithAI,processPDFWithAI,removeApiKey,setApiKey},Symbol.toStringTag,{value:"Module"}));var dexie_min$1={exports:{}},dexie_min=dexie_min$1.exports,hasRequiredDexie_min;function requireDexie_min(){return hasRequiredDexie_min||(hasRequiredDexie_min=1,(function(_,u){((M,o)=>{_.exports=o()})(dexie_min,function(){var M=function(s,c){return(M=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(p,v){p.__proto__=v}:function(p,v){for(var C in v)Object.prototype.hasOwnProperty.call(v,C)&&(p[C]=v[C])}))(s,c)},o=function(){return(o=Object.assign||function(s){for(var c,p=1,v=arguments.length;p<v;p++)for(var C in c=arguments[p])Object.prototype.hasOwnProperty.call(c,C)&&(s[C]=c[C]);return s}).apply(this,arguments)};function E(s,c,p){for(var v,C=0,P=c.length;C<P;C++)!v&&C in c||((v=v||Array.prototype.slice.call(c,0,C))[C]=c[C]);return s.concat(v||Array.prototype.slice.call(c))}var O=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:commonjsGlobal,D=Object.keys,B=Array.isArray;function F(s,c){return typeof c=="object"&&D(c).forEach(function(p){s[p]=c[p]}),s}typeof Promise>"u"||O.Promise||(O.Promise=Promise);var d=Object.getPrototypeOf,l={}.hasOwnProperty;function h(s,c){return l.call(s,c)}function b(s,c){typeof c=="function"&&(c=c(d(s))),(typeof Reflect>"u"?D:Reflect.ownKeys)(c).forEach(function(p){f(s,p,c[p])})}var y=Object.defineProperty;function f(s,c,p,v){y(s,c,F(p&&h(p,"get")&&typeof p.get=="function"?{get:p.get,set:p.set,configurable:!0}:{value:p,configurable:!0,writable:!0},v))}function A(s){return{from:function(c){return s.prototype=Object.create(c.prototype),f(s.prototype,"constructor",s),{extend:b.bind(null,s.prototype)}}}}var j=Object.getOwnPropertyDescriptor,x=[].slice;function U(s,c,p){return x.call(s,c,p)}function Z(s,c){return c(s)}function V(s){if(!s)throw new Error("Assertion Failed")}function T(s){O.setImmediate?setImmediate(s):setTimeout(s,0)}function z(s,c){if(typeof c=="string"&&h(s,c))return s[c];if(!c)return s;if(typeof c!="string"){for(var p=[],v=0,C=c.length;v<C;++v){var P=z(s,c[v]);p.push(P)}return p}var Q,tt=c.indexOf(".");return tt===-1||(Q=s[c.substr(0,tt)])==null?void 0:z(Q,c.substr(tt+1))}function $(s,c,p){if(s&&c!==void 0&&!("isFrozen"in Object&&Object.isFrozen(s)))if(typeof c!="string"&&"length"in c){V(typeof p!="string"&&"length"in p);for(var v=0,C=c.length;v<C;++v)$(s,c[v],p[v])}else{var P,Q,tt=c.indexOf(".");tt!==-1?(P=c.substr(0,tt),(tt=c.substr(tt+1))===""?p===void 0?B(s)&&!isNaN(parseInt(P))?s.splice(P,1):delete s[P]:s[P]=p:$(Q=(Q=s[P])&&h(s,P)?Q:s[P]={},tt,p)):p===void 0?B(s)&&!isNaN(parseInt(c))?s.splice(c,1):delete s[c]:s[c]=p}}function rt(s){var c,p={};for(c in s)h(s,c)&&(p[c]=s[c]);return p}var et=[].concat;function yt(s){return et.apply([],s)}var L="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(yt([8,16,32,64].map(function(s){return["Int","Uint","Float"].map(function(c){return c+s+"Array"})}))).filter(function(s){return O[s]}),gt=new Set(L.map(function(s){return O[s]})),kt=null;function At(s){return kt=new WeakMap,s=(function c(p){if(!p||typeof p!="object")return p;var v=kt.get(p);if(v)return v;if(B(p)){v=[],kt.set(p,v);for(var C=0,P=p.length;C<P;++C)v.push(c(p[C]))}else if(gt.has(p.constructor))v=p;else{var Q,tt=d(p);for(Q in v=tt===Object.prototype?{}:Object.create(tt),kt.set(p,v),p)h(p,Q)&&(v[Q]=c(p[Q]))}return v})(s),kt=null,s}var Ft={}.toString;function Kt(s){return Ft.call(s).slice(8,-1)}var nt=typeof Symbol<"u"?Symbol.iterator:"@@iterator",Y=typeof nt=="symbol"?function(s){var c;return s!=null&&(c=s[nt])&&c.apply(s)}:function(){return null};function N(s,c){c=s.indexOf(c),0<=c&&s.splice(c,1)}var w={};function R(s){var c,p,v,C;if(arguments.length===1){if(B(s))return s.slice();if(this===w&&typeof s=="string")return[s];if(C=Y(s))for(p=[];!(v=C.next()).done;)p.push(v.value);else{if(s==null)return[s];if(typeof(c=s.length)!="number")return[s];for(p=new Array(c);c--;)p[c]=s[c]}}else for(c=arguments.length,p=new Array(c);c--;)p[c]=arguments[c];return p}var g=typeof Symbol<"u"?function(s){return s[Symbol.toStringTag]==="AsyncFunction"}:function(){return!1},L=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],je=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(L),H={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function J(s,c){this.name=s,this.message=c}function K(s,c){return s+". Errors: "+Object.keys(c).map(function(p){return c[p].toString()}).filter(function(p,v,C){return C.indexOf(p)===v}).join(`
`)}function m(s,c,p,v){this.failures=c,this.failedKeys=v,this.successCount=p,this.message=K(s,c)}function k(s,c){this.name="BulkError",this.failures=Object.keys(c).map(function(p){return c[p]}),this.failuresByPos=c,this.message=K(s,this.failures)}A(J).from(Error).extend({toString:function(){return this.name+": "+this.message}}),A(m).from(J),A(k).from(J);var I=je.reduce(function(s,c){return s[c]=c+"Error",s},{}),W=J,G=je.reduce(function(s,c){var p=c+"Error";function v(C,P){this.name=p,C?typeof C=="string"?(this.message="".concat(C).concat(P?`
 `+P:""),this.inner=P||null):typeof C=="object"&&(this.message="".concat(C.name," ").concat(C.message),this.inner=C):(this.message=H[c]||p,this.inner=null)}return A(v).from(W),s[c]=v,s},{}),it=(G.Syntax=SyntaxError,G.Type=TypeError,G.Range=RangeError,L.reduce(function(s,c){return s[c+"Error"]=G[c],s},{}));L=je.reduce(function(s,c){return["Syntax","Type","Range"].indexOf(c)===-1&&(s[c+"Error"]=G[c]),s},{});function at(){}function Ct(s){return s}function Yt(s,c){return s==null||s===Ct?c:function(p){return c(s(p))}}function Rt(s,c){return function(){s.apply(this,arguments),c.apply(this,arguments)}}function Dt(s,c){return s===at?c:function(){var p=s.apply(this,arguments),v=(p!==void 0&&(arguments[0]=p),this.onsuccess),C=this.onerror,P=(this.onsuccess=null,this.onerror=null,c.apply(this,arguments));return v&&(this.onsuccess=this.onsuccess?Rt(v,this.onsuccess):v),C&&(this.onerror=this.onerror?Rt(C,this.onerror):C),P!==void 0?P:p}}function Pt(s,c){return s===at?c:function(){s.apply(this,arguments);var p=this.onsuccess,v=this.onerror;this.onsuccess=this.onerror=null,c.apply(this,arguments),p&&(this.onsuccess=this.onsuccess?Rt(p,this.onsuccess):p),v&&(this.onerror=this.onerror?Rt(v,this.onerror):v)}}function Lt(s,c){return s===at?c:function(C){var v=s.apply(this,arguments),C=(F(C,v),this.onsuccess),P=this.onerror,Q=(this.onsuccess=null,this.onerror=null,c.apply(this,arguments));return C&&(this.onsuccess=this.onsuccess?Rt(C,this.onsuccess):C),P&&(this.onerror=this.onerror?Rt(P,this.onerror):P),v===void 0?Q===void 0?void 0:Q:F(v,Q)}}function Ut(s,c){return s===at?c:function(){return c.apply(this,arguments)!==!1&&s.apply(this,arguments)}}function Qt(s,c){return s===at?c:function(){var p=s.apply(this,arguments);if(p&&typeof p.then=="function"){for(var v=this,C=arguments.length,P=new Array(C);C--;)P[C]=arguments[C];return p.then(function(){return c.apply(v,P)})}return c.apply(this,arguments)}}L.ModifyError=m,L.DexieError=J,L.BulkError=k;var $t=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function se(s){$t=s}var le={},oe=100,_e=typeof Promise>"u"?[]:(je=Promise.resolve(),typeof crypto<"u"&&crypto.subtle?[_e=crypto.subtle.digest("SHA-512",new Uint8Array([0])),d(_e),je]:[je,d(je),je]),je=_e[0],Gi=_e[1],Gi=Gi&&Gi.then,Ue=je&&je.constructor,Cn=!!_e[2],We=function(s,c){Jt.push([s,c]),xi&&(queueMicrotask(Ni),xi=!1)},En=!0,xi=!0,ui=[],Qn=[],It=Ct,vt={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:at,pgp:!1,env:{},finalize:at},st=vt,Jt=[],me=0,Ye=[];function Xt(s){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this._lib=!1;var c=this._PSD=st;if(typeof s!="function"){if(s!==le)throw new TypeError("Not a function");this._state=arguments[1],this._value=arguments[2],this._state===!1&&cn(this,this._value)}else this._state=null,this._value=null,++c.ref,(function p(v,C){try{C(function(P){if(v._state===null){if(P===v)throw new TypeError("A promise cannot be resolved with itself.");var Q=v._lib&&ke();P&&typeof P.then=="function"?p(v,function(tt,ct){P instanceof Xt?P._then(tt,ct):P.then(tt,ct)}):(v._state=!0,v._value=P,Qe(v)),Q&&gn()}},cn.bind(null,v))}catch(P){cn(v,P)}})(this,s)}var jn={get:function(){var s=st,c=Us;function p(v,C){var P=this,Q=!s.global&&(s!==st||c!==Us),tt=Q&&!Mn(),ct=new Xt(function(bt,ut){An(P,new Nn(fa(v,s,Q,tt),fa(C,s,Q,tt),bt,ut,s))});return this._consoleTask&&(ct._consoleTask=this._consoleTask),ct}return p.prototype=le,p},set:function(s){f(this,"then",s&&s.prototype===le?jn:{get:function(){return s},set:jn.set})}};function Nn(s,c,p,v,C){this.onFulfilled=typeof s=="function"?s:null,this.onRejected=typeof c=="function"?c:null,this.resolve=p,this.reject=v,this.psd=C}function cn(s,c){var p,v;Qn.push(c),s._state===null&&(p=s._lib&&ke(),c=It(c),s._state=!1,s._value=c,v=s,ui.some(function(C){return C._value===v._value})||ui.push(v),Qe(s),p)&&gn()}function Qe(s){var c=s._listeners;s._listeners=[];for(var p=0,v=c.length;p<v;++p)An(s,c[p]);var C=s._PSD;--C.ref||C.finalize(),me===0&&(++me,We(function(){--me==0&&vi()},[]))}function An(s,c){if(s._state===null)s._listeners.push(c);else{var p=s._state?c.onFulfilled:c.onRejected;if(p===null)return(s._state?c.resolve:c.reject)(s._value);++c.psd.ref,++me,We(Zn,[p,s,c])}}function Zn(s,c,p){try{var v,C=c._value;!c._state&&Qn.length&&(Qn=[]),v=$t&&c._consoleTask?c._consoleTask.run(function(){return s(C)}):s(C),c._state||Qn.indexOf(C)!==-1||(P=>{for(var Q=ui.length;Q;)if(ui[--Q]._value===P._value)return ui.splice(Q,1)})(c),p.resolve(v)}catch(P){p.reject(P)}finally{--me==0&&vi(),--p.psd.ref||p.psd.finalize()}}function Ni(){Un(vt,function(){ke()&&gn()})}function ke(){var s=En;return xi=En=!1,s}function gn(){var s,c,p;do for(;0<Jt.length;)for(s=Jt,Jt=[],p=s.length,c=0;c<p;++c){var v=s[c];v[0].apply(null,v[1])}while(0<Jt.length);xi=En=!0}function vi(){for(var s=ui,c=(ui=[],s.forEach(function(v){v._PSD.onunhandled.call(null,v._value,v)}),Ye.slice(0)),p=c.length;p;)c[--p]()}function di(s){return new Xt(le,!1,s)}function Re(s,c){var p=st;return function(){var v=ke(),C=st;try{return _i(p,!0),s.apply(this,arguments)}catch(P){c&&c(P)}finally{_i(C,!1),v&&gn()}}}b(Xt.prototype,{then:jn,_then:function(s,c){An(this,new Nn(null,null,s,c,st))},catch:function(s){var c,p;return arguments.length===1?this.then(null,s):(c=s,p=arguments[1],typeof c=="function"?this.then(null,function(v){return(v instanceof c?p:di)(v)}):this.then(null,function(v){return(v&&v.name===c?p:di)(v)}))},finally:function(s){return this.then(function(c){return Xt.resolve(s()).then(function(){return c})},function(c){return Xt.resolve(s()).then(function(){return di(c)})})},timeout:function(s,c){var p=this;return s<1/0?new Xt(function(v,C){var P=setTimeout(function(){return C(new G.Timeout(c))},s);p.then(v,C).finally(clearTimeout.bind(null,P))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&f(Xt.prototype,Symbol.toStringTag,"Dexie.Promise"),vt.env=sr(),b(Xt,{all:function(){var s=R.apply(null,arguments).map(os);return new Xt(function(c,p){s.length===0&&c([]);var v=s.length;s.forEach(function(C,P){return Xt.resolve(C).then(function(Q){s[P]=Q,--v||c(s)},p)})})},resolve:function(s){return s instanceof Xt?s:s&&typeof s.then=="function"?new Xt(function(c,p){s.then(c,p)}):new Xt(le,!0,s)},reject:di,race:function(){var s=R.apply(null,arguments).map(os);return new Xt(function(c,p){s.map(function(v){return Xt.resolve(v).then(c,p)})})},PSD:{get:function(){return st},set:function(s){return st=s}},totalEchoes:{get:function(){return Us}},newPSD:qe,usePSD:Un,scheduler:{get:function(){return We},set:function(s){We=s}},rejectionMapper:{get:function(){return It},set:function(s){It=s}},follow:function(s,c){return new Xt(function(p,v){return qe(function(C,P){var Q=st;Q.unhandleds=[],Q.onunhandled=P,Q.finalize=Rt(function(){var tt,ct=this;tt=function(){ct.unhandleds.length===0?C():P(ct.unhandleds[0])},Ye.push(function bt(){tt(),Ye.splice(Ye.indexOf(bt),1)}),++me,We(function(){--me==0&&vi()},[])},Q.finalize),s()},c,p,v)})}}),Ue&&(Ue.allSettled&&f(Xt,"allSettled",function(){var s=R.apply(null,arguments).map(os);return new Xt(function(c){s.length===0&&c([]);var p=s.length,v=new Array(p);s.forEach(function(C,P){return Xt.resolve(C).then(function(Q){return v[P]={status:"fulfilled",value:Q}},function(Q){return v[P]={status:"rejected",reason:Q}}).then(function(){return--p||c(v)})})})}),Ue.any&&typeof AggregateError<"u"&&f(Xt,"any",function(){var s=R.apply(null,arguments).map(os);return new Xt(function(c,p){s.length===0&&p(new AggregateError([]));var v=s.length,C=new Array(v);s.forEach(function(P,Q){return Xt.resolve(P).then(function(tt){return c(tt)},function(tt){C[Q]=tt,--v||p(new AggregateError(C))})})})}),Ue.withResolvers)&&(Xt.withResolvers=Ue.withResolvers);var Ie={awaits:0,echoes:0,id:0},un=0,On=[],hi=0,Us=0,bi=0;function qe(s,Q,p,v){var C=st,P=Object.create(C),Q=(P.parent=C,P.ref=0,P.global=!1,P.id=++bi,vt.env,P.env=Cn?{Promise:Xt,PromiseProp:{value:Xt,configurable:!0,writable:!0},all:Xt.all,race:Xt.race,allSettled:Xt.allSettled,any:Xt.any,resolve:Xt.resolve,reject:Xt.reject}:{},Q&&F(P,Q),++C.ref,P.finalize=function(){--this.parent.ref||this.parent.finalize()},Un(P,s,p,v));return P.ref===0&&P.finalize(),Q}function $e(){return Ie.id||(Ie.id=++un),++Ie.awaits,Ie.echoes+=oe,Ie.id}function Mn(){return!!Ie.awaits&&(--Ie.awaits==0&&(Ie.id=0),Ie.echoes=Ie.awaits*oe,!0)}function os(s){return Ie.echoes&&s&&s.constructor===Ue?($e(),s.then(function(c){return Mn(),c},function(c){return Mn(),Oe(c)})):s}function ml(){var s=On[On.length-1];On.pop(),_i(s,!1)}function _i(s,c){var p,v,C=st;(c?!Ie.echoes||hi++&&s===st:!hi||--hi&&s===st)||queueMicrotask(c?(function(P){++Us,Ie.echoes&&--Ie.echoes!=0||(Ie.echoes=Ie.awaits=Ie.id=0),On.push(st),_i(P,!0)}).bind(null,s):ml),s!==st&&(st=s,C===vt&&(vt.env=sr()),Cn)&&(p=vt.env.Promise,v=s.env,C.global||s.global)&&(Object.defineProperty(O,"Promise",v.PromiseProp),p.all=v.all,p.race=v.race,p.resolve=v.resolve,p.reject=v.reject,v.allSettled&&(p.allSettled=v.allSettled),v.any)&&(p.any=v.any)}function sr(){var s=O.Promise;return Cn?{Promise:s,PromiseProp:Object.getOwnPropertyDescriptor(O,"Promise"),all:s.all,race:s.race,allSettled:s.allSettled,any:s.any,resolve:s.resolve,reject:s.reject}:{}}function Un(s,c,p,v,C){var P=st;try{return _i(s,!0),c(p,v,C)}finally{_i(P,!1)}}function fa(s,c,p,v){return typeof s!="function"?s:function(){var C=st;p&&$e(),_i(c,!0);try{return s.apply(this,arguments)}finally{_i(C,!1),v&&queueMicrotask(Mn)}}}function Ei(s){Promise===Ue&&Ie.echoes===0?hi===0?s():enqueueNativeMicroTask(s):setTimeout(s,0)}(""+Gi).indexOf("[native code]")===-1&&($e=Mn=at);var Oe=Xt.reject,qn="",Sn="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",tn="String expected.",Oi=[],qs="__dbnames",fi="readonly",Ai="readwrite";function Li(s,c){return s?c?function(){return s.apply(this,arguments)&&c.apply(this,arguments)}:s:c}var ar={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function Hs(s){return typeof s!="string"||/\./.test(s)?function(c){return c}:function(c){return c[s]===void 0&&s in c&&delete(c=At(c))[s],c}}function no(){throw G.Type("Entity instances must never be new:ed. Instances are generated by the framework bypassing the constructor.")}function pe(s,c){try{var p=Gs(s),v=Gs(c);if(p!==v)return p==="Array"?1:v==="Array"?-1:p==="binary"?1:v==="binary"?-1:p==="string"?1:v==="string"?-1:p==="Date"?1:v!=="Date"?NaN:-1;switch(p){case"number":case"Date":case"string":return c<s?1:s<c?-1:0;case"binary":for(var C=Jn(s),P=Jn(c),Q=C.length,tt=P.length,ct=Q<tt?Q:tt,bt=0;bt<ct;++bt)if(C[bt]!==P[bt])return C[bt]<P[bt]?-1:1;return Q===tt?0:Q<tt?-1:1;case"Array":for(var ut=s,lt=c,ft=ut.length,mt=lt.length,dt=ft<mt?ft:mt,ht=0;ht<dt;++ht){var Et=pe(ut[ht],lt[ht]);if(Et!==0)return Et}return ft===mt?0:ft<mt?-1:1}}catch{}return NaN}function Gs(s){var c=typeof s;return c=="object"&&(ArrayBuffer.isView(s)||(c=Kt(s))==="ArrayBuffer")?"binary":c}function Jn(s){return s instanceof Uint8Array?s:ArrayBuffer.isView(s)?new Uint8Array(s.buffer,s.byteOffset,s.byteLength):new Uint8Array(s)}function yn(s,c,p){var v=s.schema.yProps;return v?(c&&0<p.numFailures&&(c=c.filter(function(C,P){return!p.failures[P]})),Promise.all(v.map(function(C){return C=C.updatesTable,c?s.db.table(C).where("k").anyOf(c).delete():s.db.table(C).clear()})).then(function(){return p})):p}io.prototype.execute=function(s){var c=this["@@propmod"];if(c.add!==void 0){var p=c.add;if(B(p))return E(E([],B(s)?s:[],!0),p).sort();if(typeof p=="number")return(Number(s)||0)+p;if(typeof p=="bigint")try{return BigInt(s)+p}catch{return BigInt(0)+p}throw new TypeError("Invalid term ".concat(p))}if(c.remove!==void 0){var v=c.remove;if(B(v))return B(s)?s.filter(function(C){return!v.includes(C)}).sort():[];if(typeof v=="number")return Number(s)-v;if(typeof v=="bigint")try{return BigInt(s)-v}catch{return BigInt(0)-v}throw new TypeError("Invalid subtrahend ".concat(v))}return p=(p=c.replacePrefix)==null?void 0:p[0],p&&typeof s=="string"&&s.startsWith(p)?c.replacePrefix[1]+s.substring(p.length):s};var ls=io;function io(s){this["@@propmod"]=s}function pa(s,c){for(var p=D(c),v=p.length,C=!1,P=0;P<v;++P){var Q=p[P],tt=c[Q],ct=z(s,Q);tt instanceof ls?($(s,Q,tt.execute(ct)),C=!0):ct!==tt&&($(s,Q,tt),C=!0)}return C}Te.prototype._trans=function(s,c,p){var v=this._tx||st.trans,C=this.name,P=$t&&typeof console<"u"&&console.createTask&&console.createTask("Dexie: ".concat(s==="readonly"?"read":"write"," ").concat(this.name));function Q(bt,ut,lt){if(lt.schema[C])return c(lt.idbtrans,lt);throw new G.NotFound("Table "+C+" not part of transaction")}var tt=ke();try{var ct=v&&v.db._novip===this.db._novip?v===st.trans?v._promise(s,Q,p):qe(function(){return v._promise(s,Q,p)},{trans:v,transless:st.transless||st}):(function bt(ut,lt,ft,mt){if(ut.idbdb&&(ut._state.openComplete||st.letThrough||ut._vip)){var dt=ut._createTransaction(lt,ft,ut._dbSchema);try{dt.create(),ut._state.PR1398_maxLoop=3}catch(ht){return ht.name===I.InvalidState&&ut.isOpen()&&0<--ut._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),ut.close({disableAutoOpen:!1}),ut.open().then(function(){return bt(ut,lt,ft,mt)})):Oe(ht)}return dt._promise(lt,function(ht,Et){return qe(function(){return st.trans=dt,mt(ht,Et,dt)})}).then(function(ht){if(lt==="readwrite")try{dt.idbtrans.commit()}catch{}return lt==="readonly"?ht:dt._completion.then(function(){return ht})})}if(ut._state.openComplete)return Oe(new G.DatabaseClosed(ut._state.dbOpenError));if(!ut._state.isBeingOpened){if(!ut._state.autoOpen)return Oe(new G.DatabaseClosed);ut.open().catch(at)}return ut._state.dbReadyPromise.then(function(){return bt(ut,lt,ft,mt)})})(this.db,s,[this.name],Q);return P&&(ct._consoleTask=P,ct=ct.catch(function(bt){return console.trace(bt),Oe(bt)})),ct}finally{tt&&gn()}},Te.prototype.get=function(s,c){var p=this;return s&&s.constructor===Object?this.where(s).first(c):s==null?Oe(new G.Type("Invalid argument to Table.get()")):this._trans("readonly",function(v){return p.core.get({trans:v,key:s}).then(function(C){return p.hook.reading.fire(C)})}).then(c)},Te.prototype.where=function(s){if(typeof s=="string")return new this.db.WhereClause(this,s);if(B(s))return new this.db.WhereClause(this,"[".concat(s.join("+"),"]"));var c=D(s);if(c.length===1)return this.where(c[0]).equals(s[c[0]]);var p=this.schema.indexes.concat(this.schema.primKey).filter(function(tt){if(tt.compound&&c.every(function(bt){return 0<=tt.keyPath.indexOf(bt)})){for(var ct=0;ct<c.length;++ct)if(c.indexOf(tt.keyPath[ct])===-1)return!1;return!0}return!1}).sort(function(tt,ct){return tt.keyPath.length-ct.keyPath.length})[0];if(p&&this.db._maxKey!==qn)return Q=p.keyPath.slice(0,c.length),this.where(Q).equals(Q.map(function(tt){return s[tt]}));!p&&$t&&console.warn("The query ".concat(JSON.stringify(s)," on ").concat(this.name," would benefit from a ")+"compound index [".concat(c.join("+"),"]"));var v=this.schema.idxByName;function C(tt,ct){return pe(tt,ct)===0}var Q=c.reduce(function(ut,ct){var bt=ut[0],ut=ut[1],lt=v[ct],ft=s[ct];return[bt||lt,bt||!lt?Li(ut,lt&&lt.multi?function(mt){return mt=z(mt,ct),B(mt)&&mt.some(function(dt){return C(ft,dt)})}:function(mt){return C(ft,z(mt,ct))}):ut]},[null,null]),P=Q[0],Q=Q[1];return P?this.where(P.name).equals(s[P.keyPath]).filter(Q):p?this.filter(Q):this.where(c).equals("")},Te.prototype.filter=function(s){return this.toCollection().and(s)},Te.prototype.count=function(s){return this.toCollection().count(s)},Te.prototype.offset=function(s){return this.toCollection().offset(s)},Te.prototype.limit=function(s){return this.toCollection().limit(s)},Te.prototype.each=function(s){return this.toCollection().each(s)},Te.prototype.toArray=function(s){return this.toCollection().toArray(s)},Te.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},Te.prototype.orderBy=function(s){return new this.db.Collection(new this.db.WhereClause(this,B(s)?"[".concat(s.join("+"),"]"):s))},Te.prototype.reverse=function(){return this.toCollection().reverse()},Te.prototype.mapToClass=function(s){for(var c=this.db,p=this.name,v=((this.schema.mappedClass=s).prototype instanceof no&&(s=(Q=>{var tt=ut,ct=Q;if(typeof ct!="function"&&ct!==null)throw new TypeError("Class extends value "+String(ct)+" is not a constructor or null");function bt(){this.constructor=tt}function ut(){return Q!==null&&Q.apply(this,arguments)||this}return M(tt,ct),tt.prototype=ct===null?Object.create(ct):(bt.prototype=ct.prototype,new bt),Object.defineProperty(ut.prototype,"db",{get:function(){return c},enumerable:!1,configurable:!0}),ut.prototype.table=function(){return p},ut})(s)),new Set),C=s.prototype;C;C=d(C))Object.getOwnPropertyNames(C).forEach(function(Q){return v.add(Q)});function P(Q){if(!Q)return Q;var tt,ct=Object.create(s.prototype);for(tt in Q)if(!v.has(tt))try{ct[tt]=Q[tt]}catch{}return ct}return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=P,this.hook("reading",P),s},Te.prototype.defineClass=function(){return this.mapToClass(function(s){F(this,s)})},Te.prototype.add=function(s,c){var p=this,v=this.schema.primKey,C=v.auto,P=v.keyPath,Q=s;return P&&C&&(Q=Hs(P)(s)),this._trans("readwrite",function(tt){return p.core.mutate({trans:tt,type:"add",keys:c!=null?[c]:null,values:[Q]})}).then(function(tt){return tt.numFailures?Xt.reject(tt.failures[0]):tt.lastResult}).then(function(tt){if(P)try{$(s,P,tt)}catch{}return tt})},Te.prototype.upsert=function(s,c){var p=this,v=this.schema.primKey.keyPath;return this._trans("readwrite",function(C){return p.core.get({trans:C,key:s}).then(function(P){var Q=P??{};return pa(Q,c),v&&$(Q,v,s),p.core.mutate({trans:C,type:"put",values:[Q],keys:[s],upsert:!0,updates:{keys:[s],changeSpecs:[c]}}).then(function(tt){return tt.numFailures?Xt.reject(tt.failures[0]):!!P})})})},Te.prototype.update=function(s,c){return typeof s!="object"||B(s)?this.where(":id").equals(s).modify(c):(s=z(s,this.schema.primKey.keyPath))===void 0?Oe(new G.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(s).modify(c)},Te.prototype.put=function(s,c){var p=this,v=this.schema.primKey,C=v.auto,P=v.keyPath,Q=s;return P&&C&&(Q=Hs(P)(s)),this._trans("readwrite",function(tt){return p.core.mutate({trans:tt,type:"put",values:[Q],keys:c!=null?[c]:null})}).then(function(tt){return tt.numFailures?Xt.reject(tt.failures[0]):tt.lastResult}).then(function(tt){if(P)try{$(s,P,tt)}catch{}return tt})},Te.prototype.delete=function(s){var c=this;return this._trans("readwrite",function(p){return c.core.mutate({trans:p,type:"delete",keys:[s]}).then(function(v){return yn(c,[s],v)}).then(function(v){return v.numFailures?Xt.reject(v.failures[0]):void 0})})},Te.prototype.clear=function(){var s=this;return this._trans("readwrite",function(c){return s.core.mutate({trans:c,type:"deleteRange",range:ar}).then(function(p){return yn(s,null,p)})}).then(function(c){return c.numFailures?Xt.reject(c.failures[0]):void 0})},Te.prototype.bulkGet=function(s){var c=this;return this._trans("readonly",function(p){return c.core.getMany({keys:s,trans:p}).then(function(v){return v.map(function(C){return c.hook.reading.fire(C)})})})},Te.prototype.bulkAdd=function(s,c,p){var v=this,C=Array.isArray(c)?c:void 0,P=(p=p||(C?void 0:c))?p.allKeys:void 0;return this._trans("readwrite",function(Q){var tt=v.schema.primKey,bt=tt.auto,tt=tt.keyPath;if(tt&&C)throw new G.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(C&&C.length!==s.length)throw new G.InvalidArgument("Arguments objects and keys must have the same length");var ct=s.length,bt=tt&&bt?s.map(Hs(tt)):s;return v.core.mutate({trans:Q,type:"add",keys:C,values:bt,wantResults:P}).then(function(ut){var lt=ut.numFailures,ft=ut.failures;if(lt===0)return P?ut.results:ut.lastResult;throw new k("".concat(v.name,".bulkAdd(): ").concat(lt," of ").concat(ct," operations failed"),ft)})})},Te.prototype.bulkPut=function(s,c,p){var v=this,C=Array.isArray(c)?c:void 0,P=(p=p||(C?void 0:c))?p.allKeys:void 0;return this._trans("readwrite",function(Q){var tt=v.schema.primKey,bt=tt.auto,tt=tt.keyPath;if(tt&&C)throw new G.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(C&&C.length!==s.length)throw new G.InvalidArgument("Arguments objects and keys must have the same length");var ct=s.length,bt=tt&&bt?s.map(Hs(tt)):s;return v.core.mutate({trans:Q,type:"put",keys:C,values:bt,wantResults:P}).then(function(ut){var lt=ut.numFailures,ft=ut.failures;if(lt===0)return P?ut.results:ut.lastResult;throw new k("".concat(v.name,".bulkPut(): ").concat(lt," of ").concat(ct," operations failed"),ft)})})},Te.prototype.bulkUpdate=function(s){var c=this,p=this.core,v=s.map(function(Q){return Q.key}),C=s.map(function(Q){return Q.changes}),P=[];return this._trans("readwrite",function(Q){return p.getMany({trans:Q,keys:v,cache:"clone"}).then(function(tt){var ct=[],bt=[],ut=(s.forEach(function(lt,ft){var mt=lt.key,dt=lt.changes,ht=tt[ft];if(ht){for(var Et=0,Tt=Object.keys(dt);Et<Tt.length;Et++){var _t=Tt[Et],Nt=dt[_t];if(_t===c.schema.primKey.keyPath){if(pe(Nt,mt)!==0)throw new G.Constraint("Cannot update primary key in bulkUpdate()")}else $(ht,_t,Nt)}P.push(ft),ct.push(mt),bt.push(ht)}}),ct.length);return p.mutate({trans:Q,type:"put",keys:ct,values:bt,updates:{keys:v,changeSpecs:C}}).then(function(lt){var ft=lt.numFailures,mt=lt.failures;if(ft===0)return ut;for(var dt=0,ht=Object.keys(mt);dt<ht.length;dt++){var Et,Tt=ht[dt],_t=P[Number(Tt)];_t!=null&&(Et=mt[Tt],delete mt[Tt],mt[_t]=Et)}throw new k("".concat(c.name,".bulkUpdate(): ").concat(ft," of ").concat(ut," operations failed"),mt)})})})},Te.prototype.bulkDelete=function(s){var c=this,p=s.length;return this._trans("readwrite",function(v){return c.core.mutate({trans:v,type:"delete",keys:s}).then(function(C){return yn(c,s,C)})}).then(function(v){var C=v.numFailures,P=v.failures;if(C===0)return v.lastResult;throw new k("".concat(c.name,".bulkDelete(): ").concat(C," of ").concat(p," operations failed"),P)})};var rr=Te;function Te(){}function Ks(s){function c(Q,tt){if(tt){for(var ct=arguments.length,bt=new Array(ct-1);--ct;)bt[ct-1]=arguments[ct];return p[Q].subscribe.apply(null,bt),s}if(typeof Q=="string")return p[Q]}var p={};c.addEventType=P;for(var v=1,C=arguments.length;v<C;++v)P(arguments[v]);return c;function P(Q,tt,ct){var bt,ut;if(typeof Q!="object")return tt=tt||Ut,ut={subscribers:[],fire:ct=ct||at,subscribe:function(lt){ut.subscribers.indexOf(lt)===-1&&(ut.subscribers.push(lt),ut.fire=tt(ut.fire,lt))},unsubscribe:function(lt){ut.subscribers=ut.subscribers.filter(function(ft){return ft!==lt}),ut.fire=ut.subscribers.reduce(tt,ct)}},p[Q]=c[Q]=ut;D(bt=Q).forEach(function(lt){var ft=bt[lt];if(B(ft))P(lt,bt[lt][0],bt[lt][1]);else{if(ft!=="asap")throw new G.InvalidArgument("Invalid event config");var mt=P(lt,Ct,function(){for(var dt=arguments.length,ht=new Array(dt);dt--;)ht[dt]=arguments[dt];mt.subscribers.forEach(function(Et){T(function(){Et.apply(null,ht)})})})}})}}function hn(s,c){return A(c).from({prototype:s}),c}function Si(s,c){return!(s.filter||s.algorithm||s.or)&&(c?s.justLimit:!s.replayFilter)}function ma(s,c){s.filter=Li(s.filter,c)}function Xs(s,c,p){var v=s.replayFilter;s.replayFilter=v?function(){return Li(v(),c())}:c,s.justLimit=p&&!v}function pi(s,c){if(s.isPrimKey)return c.primaryKey;var p=c.getIndexByKeyPath(s.index);if(p)return p;throw new G.Schema("KeyPath "+s.index+" on object store "+c.name+" is not indexed")}function or(s,c,p){var v=pi(s,c.schema);return c.openCursor({trans:p,values:!s.keysOnly,reverse:s.dir==="prev",unique:!!s.unique,query:{index:v,range:s.range}})}function Ys(s,c,p,v){var C,P,Q=s.replayFilter?Li(s.filter,s.replayFilter()):s.filter;return s.or?(C={},P=function(tt,ct,bt){var ut,lt;Q&&!Q(ct,bt,function(ft){return ct.stop(ft)},function(ft){return ct.fail(ft)})||((lt=""+(ut=ct.primaryKey))=="[object ArrayBuffer]"&&(lt=""+new Uint8Array(ut)),h(C,lt))||(C[lt]=!0,c(tt,ct,bt))},Promise.all([s.or._iterate(P,p),Pi(or(s,v,p),s.algorithm,P,!s.keysOnly&&s.valueMapper)])):Pi(or(s,v,p),Li(s.algorithm,Q),c,!s.keysOnly&&s.valueMapper)}function Pi(s,c,p,v){var C=Re(v?function(P,Q,tt){return p(v(P),Q,tt)}:p);return s.then(function(P){if(P)return P.start(function(){var Q=function(){return P.continue()};c&&!c(P,function(tt){return Q=tt},function(tt){P.stop(tt),Q=at},function(tt){P.fail(tt),Q=at})||C(P.value,P,function(tt){return Q=tt}),Q()})})}Ee.prototype._read=function(s,c){var p=this._ctx;return p.error?p.table._trans(null,Oe.bind(null,p.error)):p.table._trans("readonly",s).then(c)},Ee.prototype._write=function(s){var c=this._ctx;return c.error?c.table._trans(null,Oe.bind(null,c.error)):c.table._trans("readwrite",s,"locked")},Ee.prototype._addAlgorithm=function(s){var c=this._ctx;c.algorithm=Li(c.algorithm,s)},Ee.prototype._iterate=function(s,c){return Ys(this._ctx,s,c,this._ctx.table.core)},Ee.prototype.clone=function(s){var c=Object.create(this.constructor.prototype),p=Object.create(this._ctx);return s&&F(p,s),c._ctx=p,c},Ee.prototype.raw=function(){return this._ctx.valueMapper=null,this},Ee.prototype.each=function(s){var c=this._ctx;return this._read(function(p){return Ys(c,s,p,c.table.core)})},Ee.prototype.count=function(s){var c=this;return this._read(function(p){var v,C=c._ctx,P=C.table.core;return Si(C,!0)?P.count({trans:p,query:{index:pi(C,P.schema),range:C.range}}).then(function(Q){return Math.min(Q,C.limit)}):(v=0,Ys(C,function(){return++v,!1},p,P).then(function(){return v}))}).then(s)},Ee.prototype.sortBy=function(s,c){var p=s.split(".").reverse(),v=p[0],C=p.length-1;function P(ct,bt){return bt?P(ct[p[bt]],bt-1):ct[v]}var Q=this._ctx.dir==="next"?1:-1;function tt(ct,bt){return pe(P(ct,C),P(bt,C))*Q}return this.toArray(function(ct){return ct.sort(tt)}).then(c)},Ee.prototype.toArray=function(s){var c=this;return this._read(function(p){var v,C,P,Q=c._ctx;return Q.dir==="next"&&Si(Q,!0)&&0<Q.limit?(v=Q.valueMapper,C=pi(Q,Q.table.core.schema),Q.table.core.query({trans:p,limit:Q.limit,values:!0,query:{index:C,range:Q.range}}).then(function(tt){return tt=tt.result,v?tt.map(v):tt})):(P=[],Ys(Q,function(tt){return P.push(tt)},p,Q.table.core).then(function(){return P}))},s)},Ee.prototype.offset=function(s){var c=this._ctx;return s<=0||(c.offset+=s,Si(c)?Xs(c,function(){var p=s;return function(v,C){return p===0||(p===1?--p:C(function(){v.advance(p),p=0}),!1)}}):Xs(c,function(){var p=s;return function(){return--p<0}})),this},Ee.prototype.limit=function(s){return this._ctx.limit=Math.min(this._ctx.limit,s),Xs(this._ctx,function(){var c=s;return function(p,v,C){return--c<=0&&v(C),0<=c}},!0),this},Ee.prototype.until=function(s,c){return ma(this._ctx,function(p,v,C){return!s(p.value)||(v(C),c)}),this},Ee.prototype.first=function(s){return this.limit(1).toArray(function(c){return c[0]}).then(s)},Ee.prototype.last=function(s){return this.reverse().first(s)},Ee.prototype.filter=function(s){var c;return ma(this._ctx,function(p){return s(p.value)}),(c=this._ctx).isMatch=Li(c.isMatch,s),this},Ee.prototype.and=function(s){return this.filter(s)},Ee.prototype.or=function(s){return new this.db.WhereClause(this._ctx.table,s,this)},Ee.prototype.reverse=function(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},Ee.prototype.desc=function(){return this.reverse()},Ee.prototype.eachKey=function(s){var c=this._ctx;return c.keysOnly=!c.isMatch,this.each(function(p,v){s(v.key,v)})},Ee.prototype.eachUniqueKey=function(s){return this._ctx.unique="unique",this.eachKey(s)},Ee.prototype.eachPrimaryKey=function(s){var c=this._ctx;return c.keysOnly=!c.isMatch,this.each(function(p,v){s(v.primaryKey,v)})},Ee.prototype.keys=function(s){var c=this._ctx,p=(c.keysOnly=!c.isMatch,[]);return this.each(function(v,C){p.push(C.key)}).then(function(){return p}).then(s)},Ee.prototype.primaryKeys=function(s){var c=this._ctx;if(c.dir==="next"&&Si(c,!0)&&0<c.limit)return this._read(function(v){var C=pi(c,c.table.core.schema);return c.table.core.query({trans:v,values:!1,limit:c.limit,query:{index:C,range:c.range}})}).then(function(v){return v.result}).then(s);c.keysOnly=!c.isMatch;var p=[];return this.each(function(v,C){p.push(C.primaryKey)}).then(function(){return p}).then(s)},Ee.prototype.uniqueKeys=function(s){return this._ctx.unique="unique",this.keys(s)},Ee.prototype.firstKey=function(s){return this.limit(1).keys(function(c){return c[0]}).then(s)},Ee.prototype.lastKey=function(s){return this.reverse().firstKey(s)},Ee.prototype.distinct=function(){var s,c=this._ctx,c=c.index&&c.table.schema.idxByName[c.index];return c&&c.multi&&(s={},ma(this._ctx,function(v){var v=v.primaryKey.toString(),C=h(s,v);return s[v]=!0,!C})),this},Ee.prototype.modify=function(s){var c=this,p=this._ctx;return this._write(function(v){function C(ht,Et){var Tt=Et.failures;ft+=ht-Et.numFailures;for(var _t=0,Nt=D(Tt);_t<Nt.length;_t++){var qt=Nt[_t];lt.push(Tt[qt])}}var P=typeof s=="function"?s:function(ht){return pa(ht,s)},Q=p.table.core,ut=Q.schema.primaryKey,tt=ut.outbound,ct=ut.extractKey,bt=200,ut=c.db._options.modifyChunkSize,lt=(ut&&(bt=typeof ut=="object"?ut[Q.name]||ut["*"]||200:ut),[]),ft=0,mt=[],dt=s===lr;return c.clone().primaryKeys().then(function(ht){function Et(_t){var Nt=Math.min(bt,ht.length-_t),qt=ht.slice(_t,_t+Nt);return(dt?Promise.resolve([]):Q.getMany({trans:v,keys:qt,cache:"immutable"})).then(function(Vt){var Wt=[],Ht=[],te=tt?[]:null,Zt=dt?qt:[];if(!dt)for(var Gt=0;Gt<Nt;++Gt){var ee=Vt[Gt],ue={value:At(ee),primKey:ht[_t+Gt]};P.call(ue,ue.value,ue)!==!1&&(ue.value==null?Zt.push(ht[_t+Gt]):tt||pe(ct(ee),ct(ue.value))===0?(Ht.push(ue.value),tt&&te.push(ht[_t+Gt])):(Zt.push(ht[_t+Gt]),Wt.push(ue.value)))}return Promise.resolve(0<Wt.length&&Q.mutate({trans:v,type:"add",values:Wt}).then(function(ge){for(var ae in ge.failures)Zt.splice(parseInt(ae),1);C(Wt.length,ge)})).then(function(){return(0<Ht.length||Tt&&typeof s=="object")&&Q.mutate({trans:v,type:"put",keys:te,values:Ht,criteria:Tt,changeSpec:typeof s!="function"&&s,isAdditionalChunk:0<_t}).then(function(ge){return C(Ht.length,ge)})}).then(function(){return(0<Zt.length||Tt&&dt)&&Q.mutate({trans:v,type:"delete",keys:Zt,criteria:Tt,isAdditionalChunk:0<_t}).then(function(ge){return yn(p.table,Zt,ge)}).then(function(ge){return C(Zt.length,ge)})}).then(function(){return ht.length>_t+Nt&&Et(_t+bt)})})}var Tt=Si(p)&&p.limit===1/0&&(typeof s!="function"||dt)&&{index:p.index,range:p.range};return Et(0).then(function(){if(0<lt.length)throw new m("Error modifying one or more objects",lt,ft,mt);return ht.length})})})},Ee.prototype.delete=function(){var s=this._ctx,c=s.range;return!Si(s)||s.table.schema.yProps||!s.isPrimKey&&c.type!==3?this.modify(lr):this._write(function(p){var v=s.table.core.schema.primaryKey,C=c;return s.table.core.count({trans:p,query:{index:v,range:C}}).then(function(P){return s.table.core.mutate({trans:p,type:"deleteRange",range:C}).then(function(ct){var tt=ct.failures,ct=ct.numFailures;if(ct)throw new m("Could not delete some values",Object.keys(tt).map(function(bt){return tt[bt]}),P-ct);return P-ct})})})};var gl=Ee;function Ee(){}var lr=function(s,c){return c.value=null};function cr(s,c){return s<c?-1:s===c?0:1}function yl(s,c){return c<s?-1:s===c?0:1}function kn(s,c,p){return s=s instanceof Fi?new s.Collection(s):s,s._ctx.error=new(p||TypeError)(c),s}function mi(s){return new s.Collection(s,function(){return ga("")}).limit(0)}function Ln(mt,c,p,v){var C,P,Q,tt,ct,bt,ut,lt=p.length;if(!p.every(function(ht){return typeof ht=="string"}))return kn(mt,tn);function ft(ht){C=ht==="next"?function(Tt){return Tt.toUpperCase()}:function(Tt){return Tt.toLowerCase()},P=ht==="next"?function(Tt){return Tt.toLowerCase()}:function(Tt){return Tt.toUpperCase()},Q=ht==="next"?cr:yl;var Et=p.map(function(Tt){return{lower:P(Tt),upper:C(Tt)}}).sort(function(Tt,_t){return Q(Tt.lower,_t.lower)});tt=Et.map(function(Tt){return Tt.upper}),ct=Et.map(function(Tt){return Tt.lower}),ut=(bt=ht)==="next"?"":v}ft("next");var mt=new mt.Collection(mt,function(){return $n(tt[0],ct[lt-1]+v)}),dt=(mt._ondirectionchange=function(ht){ft(ht)},0);return mt._addAlgorithm(function(ht,Et,Tt){var _t=ht.key;if(typeof _t=="string"){var Nt=P(_t);if(c(Nt,ct,dt))return!0;for(var qt=null,Vt=dt;Vt<lt;++Vt){var Wt=((Ht,te,Zt,Gt,ee,ue)=>{for(var ge=Math.min(Ht.length,Gt.length),ae=-1,de=0;de<ge;++de){var Le=te[de];if(Le!==Gt[de])return ee(Ht[de],Zt[de])<0?Ht.substr(0,de)+Zt[de]+Zt.substr(de+1):ee(Ht[de],Gt[de])<0?Ht.substr(0,de)+Gt[de]+Zt.substr(de+1):0<=ae?Ht.substr(0,ae)+te[ae]+Zt.substr(ae+1):null;ee(Ht[de],Le)<0&&(ae=de)}return ge<Gt.length&&ue==="next"?Ht+Zt.substr(Ht.length):ge<Ht.length&&ue==="prev"?Ht.substr(0,Zt.length):ae<0?null:Ht.substr(0,ae)+Gt[ae]+Zt.substr(ae+1)})(_t,Nt,tt[Vt],ct[Vt],Q,bt);Wt===null&&qt===null?dt=Vt+1:(qt===null||0<Q(qt,Wt))&&(qt=Wt)}Et(qt!==null?function(){ht.continue(qt+ut)}:Tt)}return!1}),mt}function $n(s,c,p,v){return{type:2,lower:s,upper:c,lowerOpen:p,upperOpen:v}}function ga(s){return{type:1,lower:s,upper:s}}Object.defineProperty(He.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),He.prototype.between=function(s,c,p,v){p=p!==!1,v=v===!0;try{return 0<this._cmp(s,c)||this._cmp(s,c)===0&&(p||v)&&(!p||!v)?mi(this):new this.Collection(this,function(){return $n(s,c,!p,!v)})}catch{return kn(this,Sn)}},He.prototype.equals=function(s){return s==null?kn(this,Sn):new this.Collection(this,function(){return ga(s)})},He.prototype.above=function(s){return s==null?kn(this,Sn):new this.Collection(this,function(){return $n(s,void 0,!0)})},He.prototype.aboveOrEqual=function(s){return s==null?kn(this,Sn):new this.Collection(this,function(){return $n(s,void 0,!1)})},He.prototype.below=function(s){return s==null?kn(this,Sn):new this.Collection(this,function(){return $n(void 0,s,!1,!0)})},He.prototype.belowOrEqual=function(s){return s==null?kn(this,Sn):new this.Collection(this,function(){return $n(void 0,s)})},He.prototype.startsWith=function(s){return typeof s!="string"?kn(this,tn):this.between(s,s+qn,!0,!0)},He.prototype.startsWithIgnoreCase=function(s){return s===""?this.startsWith(s):Ln(this,function(c,p){return c.indexOf(p[0])===0},[s],qn)},He.prototype.equalsIgnoreCase=function(s){return Ln(this,function(c,p){return c===p[0]},[s],"")},He.prototype.anyOfIgnoreCase=function(){var s=R.apply(w,arguments);return s.length===0?mi(this):Ln(this,function(c,p){return p.indexOf(c)!==-1},s,"")},He.prototype.startsWithAnyOfIgnoreCase=function(){var s=R.apply(w,arguments);return s.length===0?mi(this):Ln(this,function(c,p){return p.some(function(v){return c.indexOf(v)===0})},s,qn)},He.prototype.anyOf=function(){var s,c,p=this,v=R.apply(w,arguments),C=this._cmp;try{v.sort(C)}catch{return kn(this,Sn)}return v.length===0?mi(this):((s=new this.Collection(this,function(){return $n(v[0],v[v.length-1])}))._ondirectionchange=function(P){C=P==="next"?p._ascending:p._descending,v.sort(C)},c=0,s._addAlgorithm(function(P,Q,tt){for(var ct=P.key;0<C(ct,v[c]);)if(++c===v.length)return Q(tt),!1;return C(ct,v[c])===0||(Q(function(){P.continue(v[c])}),!1)}),s)},He.prototype.notEqual=function(s){return this.inAnyRange([[-1/0,s],[s,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},He.prototype.noneOf=function(){var s=R.apply(w,arguments);if(s.length===0)return new this.Collection(this);try{s.sort(this._ascending)}catch{return kn(this,Sn)}var c=s.reduce(function(p,v){return p?p.concat([[p[p.length-1][1],v]]):[[-1/0,v]]},null);return c.push([s[s.length-1],this.db._maxKey]),this.inAnyRange(c,{includeLowers:!1,includeUppers:!1})},He.prototype.inAnyRange=function(s,Tt){var p=this,v=this._cmp,C=this._ascending,P=this._descending,Q=this._min,tt=this._max;if(s.length===0)return mi(this);if(!s.every(function(_t){return _t[0]!==void 0&&_t[1]!==void 0&&C(_t[0],_t[1])<=0}))return kn(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",G.InvalidArgument);var ct=!Tt||Tt.includeLowers!==!1,bt=Tt&&Tt.includeUppers===!0,ut,lt=C;function ft(_t,Nt){return lt(_t[0],Nt[0])}try{(ut=s.reduce(function(_t,Nt){for(var qt=0,Vt=_t.length;qt<Vt;++qt){var Wt=_t[qt];if(v(Nt[0],Wt[1])<0&&0<v(Nt[1],Wt[0])){Wt[0]=Q(Wt[0],Nt[0]),Wt[1]=tt(Wt[1],Nt[1]);break}}return qt===Vt&&_t.push(Nt),_t},[])).sort(ft)}catch{return kn(this,Sn)}var mt=0,dt=bt?function(_t){return 0<C(_t,ut[mt][1])}:function(_t){return 0<=C(_t,ut[mt][1])},ht=ct?function(_t){return 0<P(_t,ut[mt][0])}:function(_t){return 0<=P(_t,ut[mt][0])},Et=dt,Tt=new this.Collection(this,function(){return $n(ut[0][0],ut[ut.length-1][1],!ct,!bt)});return Tt._ondirectionchange=function(_t){lt=_t==="next"?(Et=dt,C):(Et=ht,P),ut.sort(ft)},Tt._addAlgorithm(function(_t,Nt,qt){for(var Vt,Wt=_t.key;Et(Wt);)if(++mt===ut.length)return Nt(qt),!1;return!dt(Vt=Wt)&&!ht(Vt)||(p._cmp(Wt,ut[mt][1])===0||p._cmp(Wt,ut[mt][0])===0||Nt(function(){lt===C?_t.continue(ut[mt][0]):_t.continue(ut[mt][1])}),!1)}),Tt},He.prototype.startsWithAnyOf=function(){var s=R.apply(w,arguments);return s.every(function(c){return typeof c=="string"})?s.length===0?mi(this):this.inAnyRange(s.map(function(c){return[c,c+qn]})):kn(this,"startsWithAnyOf() only works with strings")};var Fi=He;function He(){}function Hn(s){return Re(function(c){return zi(c),s(c.target.error),!1})}function zi(s){s.stopPropagation&&s.stopPropagation(),s.preventDefault&&s.preventDefault()}var cs="storagemutated",Ii="x-storagemutated-1",fn=Ks(null,cs),ur=(wn.prototype._lock=function(){return V(!st.global),++this._reculock,this._reculock!==1||st.global||(st.lockOwnerFor=this),this},wn.prototype._unlock=function(){if(V(!st.global),--this._reculock==0)for(st.global||(st.lockOwnerFor=null);0<this._blockedFuncs.length&&!this._locked();){var s=this._blockedFuncs.shift();try{Un(s[1],s[0])}catch{}}return this},wn.prototype._locked=function(){return this._reculock&&st.lockOwnerFor!==this},wn.prototype.create=function(s){var c=this;if(this.mode){var p=this.db.idbdb,v=this.db._state.dbOpenError;if(V(!this.idbtrans),!s&&!p)switch(v&&v.name){case"DatabaseClosedError":throw new G.DatabaseClosed(v);case"MissingAPIError":throw new G.MissingAPI(v.message,v);default:throw new G.OpenFailed(v)}if(!this.active)throw new G.TransactionInactive;V(this._completion._state===null),(s=this.idbtrans=s||(this.db.core||p).transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})).onerror=Re(function(C){zi(C),c._reject(s.error)}),s.onabort=Re(function(C){zi(C),c.active&&c._reject(new G.Abort(s.error)),c.active=!1,c.on("abort").fire(C)}),s.oncomplete=Re(function(){c.active=!1,c._resolve(),"mutatedParts"in s&&fn.storagemutated.fire(s.mutatedParts)})}return this},wn.prototype._promise=function(s,c,p){var v,C=this;return s==="readwrite"&&this.mode!=="readwrite"?Oe(new G.ReadOnly("Transaction is readonly")):this.active?this._locked()?new Xt(function(P,Q){C._blockedFuncs.push([function(){C._promise(s,c,p).then(P,Q)},st])}):p?qe(function(){var P=new Xt(function(Q,tt){C._lock();var ct=c(Q,tt,C);ct&&ct.then&&ct.then(Q,tt)});return P.finally(function(){return C._unlock()}),P._lib=!0,P}):((v=new Xt(function(P,Q){var tt=c(P,Q,C);tt&&tt.then&&tt.then(P,Q)}))._lib=!0,v):Oe(new G.TransactionInactive)},wn.prototype._root=function(){return this.parent?this.parent._root():this},wn.prototype.waitFor=function(s){var c,p=this._root(),v=Xt.resolve(s),C=(p._waitingFor?p._waitingFor=p._waitingFor.then(function(){return v}):(p._waitingFor=v,p._waitingQueue=[],c=p.idbtrans.objectStore(p.storeNames[0]),(function P(){for(++p._spinCount;p._waitingQueue.length;)p._waitingQueue.shift()();p._waitingFor&&(c.get(-1/0).onsuccess=P)})()),p._waitingFor);return new Xt(function(P,Q){v.then(function(tt){return p._waitingQueue.push(Re(P.bind(null,tt)))},function(tt){return p._waitingQueue.push(Re(Q.bind(null,tt)))}).finally(function(){p._waitingFor===C&&(p._waitingFor=null)})})},wn.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new G.Abort))},wn.prototype.table=function(s){var c=this._memoizedTables||(this._memoizedTables={});if(h(c,s))return c[s];var p=this.schema[s];if(p)return(p=new this.db.Table(s,p,this)).core=this.db.core.table(s),c[s]=p;throw new G.NotFound("Table "+s+" not part of transaction")},wn);function wn(){}function ti(s,c,p,v,C,P,Q,tt){return{name:s,keyPath:c,unique:p,multi:v,auto:C,compound:P,src:(p&&!Q?"&":"")+(v?"*":"")+(C?"++":"")+ya(c),type:tt}}function ya(s){return typeof s=="string"?s:s?"["+[].join.call(s,"+")+"]":""}function us(s,c,p){return{name:s,primKey:c,indexes:p,mappedClass:null,idxByName:(v=function(C){return[C.name,C]},p.reduce(function(C,P,Q){return P=v(P,Q),P&&(C[P[0]]=P[1]),C},{}))};var v}var ds=function(s){try{return s.only([[]]),ds=function(){return[[]]},[[]]}catch{return ds=function(){return qn},qn}};function hs(s){return s==null?function(){}:typeof s=="string"?(c=s).split(".").length===1?function(p){return p[c]}:function(p){return z(p,c)}:function(p){return z(p,s)};var c}function Vs(s){return[].slice.call(s)}var so=0;function sn(s){return s==null?":id":typeof s=="string"?s:"[".concat(s.join("+"),"]")}function Bi(s,c,ct){function v(dt){if(dt.type===3)return null;if(dt.type===4)throw new Error("Cannot convert never type to IDBKeyRange");var lt=dt.lower,ft=dt.upper,mt=dt.lowerOpen,dt=dt.upperOpen;return lt===void 0?ft===void 0?null:c.upperBound(ft,!!dt):ft===void 0?c.lowerBound(lt,!!mt):c.bound(lt,ft,!!mt,!!dt)}function C(ut){var lt,ft=ut.name;return{name:ft,schema:ut,mutate:function(mt){var dt=mt.trans,ht=mt.type,Et=mt.keys,Tt=mt.values,_t=mt.range;return new Promise(function(Nt,qt){Nt=Re(Nt);var Vt=dt.objectStore(ft),Wt=Vt.keyPath==null,Ht=ht==="put"||ht==="add";if(!Ht&&ht!=="delete"&&ht!=="deleteRange")throw new Error("Invalid operation type: "+ht);var te,Zt=(Et||Tt||{length:1}).length;if(Et&&Tt&&Et.length!==Tt.length)throw new Error("Given keys array must have same length as given values array.");if(Zt===0)return Nt({numFailures:0,failures:{},results:[],lastResult:void 0});function Gt(Me){++ge,zi(Me)}var ee=[],ue=[],ge=0;if(ht==="deleteRange"){if(_t.type===4)return Nt({numFailures:ge,failures:ue,results:[],lastResult:void 0});_t.type===3?ee.push(te=Vt.clear()):ee.push(te=Vt.delete(v(_t)))}else{var Wt=Ht?Wt?[Tt,Et]:[Tt,null]:[Et,null],ae=Wt[0],de=Wt[1];if(Ht)for(var Le=0;Le<Zt;++Le)ee.push(te=de&&de[Le]!==void 0?Vt[ht](ae[Le],de[Le]):Vt[ht](ae[Le])),te.onerror=Gt;else for(Le=0;Le<Zt;++Le)ee.push(te=Vt[ht](ae[Le])),te.onerror=Gt}function Tn(Me){Me=Me.target.result,ee.forEach(function(Ci,xs){return Ci.error!=null&&(ue[xs]=Ci.error)}),Nt({numFailures:ge,failures:ue,results:ht==="delete"?Et:ee.map(function(Ci){return Ci.result}),lastResult:Me})}te.onerror=function(Me){Gt(Me),Tn(Me)},te.onsuccess=Tn})},getMany:function(mt){var dt=mt.trans,ht=mt.keys;return new Promise(function(Et,Tt){Et=Re(Et);for(var _t,Nt=dt.objectStore(ft),qt=ht.length,Vt=new Array(qt),Wt=0,Ht=0,te=function(ee){ee=ee.target,Vt[ee._pos]=ee.result,++Ht===Wt&&Et(Vt)},Zt=Hn(Tt),Gt=0;Gt<qt;++Gt)ht[Gt]!=null&&((_t=Nt.get(ht[Gt]))._pos=Gt,_t.onsuccess=te,_t.onerror=Zt,++Wt);Wt===0&&Et(Vt)})},get:function(mt){var dt=mt.trans,ht=mt.key;return new Promise(function(Et,Tt){Et=Re(Et);var _t=dt.objectStore(ft).get(ht);_t.onsuccess=function(Nt){return Et(Nt.target.result)},_t.onerror=Hn(Tt)})},query:(lt=tt,function(mt){return new Promise(function(dt,ht){dt=Re(dt);var Et,Tt,_t,Ht=mt.trans,Nt=mt.values,qt=mt.limit,Wt=mt.query,Vt=qt===1/0?void 0:qt,te=Wt.index,Wt=Wt.range,Ht=Ht.objectStore(ft),Ht=te.isPrimaryKey?Ht:Ht.index(te.name),te=v(Wt);if(qt===0)return dt({result:[]});lt?((Wt=Nt?Ht.getAll(te,Vt):Ht.getAllKeys(te,Vt)).onsuccess=function(Zt){return dt({result:Zt.target.result})},Wt.onerror=Hn(ht)):(Et=0,Tt=!Nt&&"openKeyCursor"in Ht?Ht.openKeyCursor(te):Ht.openCursor(te),_t=[],Tt.onsuccess=function(Zt){var Gt=Tt.result;return!Gt||(_t.push(Nt?Gt.value:Gt.primaryKey),++Et===qt)?dt({result:_t}):void Gt.continue()},Tt.onerror=Hn(ht))})}),openCursor:function(mt){var dt=mt.trans,ht=mt.values,Et=mt.query,Tt=mt.reverse,_t=mt.unique;return new Promise(function(Nt,qt){Nt=Re(Nt);var Ht=Et.index,Vt=Et.range,Wt=dt.objectStore(ft),Wt=Ht.isPrimaryKey?Wt:Wt.index(Ht.name),Ht=Tt?_t?"prevunique":"prev":_t?"nextunique":"next",te=!ht&&"openKeyCursor"in Wt?Wt.openKeyCursor(v(Vt),Ht):Wt.openCursor(v(Vt),Ht);te.onerror=Hn(qt),te.onsuccess=Re(function(Zt){var Gt,ee,ue,ge,ae=te.result;ae?(ae.___id=++so,ae.done=!1,Gt=ae.continue.bind(ae),ee=(ee=ae.continuePrimaryKey)&&ee.bind(ae),ue=ae.advance.bind(ae),ge=function(){throw new Error("Cursor not stopped")},ae.trans=dt,ae.stop=ae.continue=ae.continuePrimaryKey=ae.advance=function(){throw new Error("Cursor not started")},ae.fail=Re(qt),ae.next=function(){var de=this,Le=1;return this.start(function(){return Le--?de.continue():de.stop()}).then(function(){return de})},ae.start=function(de){function Le(){if(te.result)try{de()}catch(Me){ae.fail(Me)}else ae.done=!0,ae.start=function(){throw new Error("Cursor behind last entry")},ae.stop()}var Tn=new Promise(function(Me,Ci){Me=Re(Me),te.onerror=Hn(Ci),ae.fail=Ci,ae.stop=function(xs){ae.stop=ae.continue=ae.continuePrimaryKey=ae.advance=ge,Me(xs)}});return te.onsuccess=Re(function(Me){te.onsuccess=Le,Le()}),ae.continue=Gt,ae.continuePrimaryKey=ee,ae.advance=ue,Le(),Tn},Nt(ae)):Nt(null)},qt)})},count:function(mt){var dt=mt.query,ht=mt.trans,Et=dt.index,Tt=dt.range;return new Promise(function(_t,Nt){var qt=ht.objectStore(ft),qt=Et.isPrimaryKey?qt:qt.index(Et.name),Vt=v(Tt),Vt=Vt?qt.count(Vt):qt.count();Vt.onsuccess=Re(function(Wt){return _t(Wt.target.result)}),Vt.onerror=Hn(Nt)})}}}P=ct,Q=Vs((ct=s).objectStoreNames);var P,ct={schema:{name:ct.name,tables:Q.map(function(ut){return P.objectStore(ut)}).map(function(ut){var lt=ut.keyPath,ft=ut.autoIncrement,dt=B(lt),mt={},dt={name:ut.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:lt==null,compound:dt,keyPath:lt,autoIncrement:ft,unique:!0,extractKey:hs(lt)},indexes:Vs(ut.indexNames).map(function(ht){return ut.index(ht)}).map(function(_t){var Nt=_t.name,Et=_t.unique,Tt=_t.multiEntry,_t=_t.keyPath,Nt={name:Nt,compound:B(_t),keyPath:_t,unique:Et,multiEntry:Tt,extractKey:hs(_t)};return mt[sn(_t)]=Nt}),getIndexByKeyPath:function(ht){return mt[sn(ht)]}};return mt[":id"]=dt.primaryKey,lt!=null&&(mt[sn(lt)]=dt.primaryKey),dt})},hasGetAll:0<Q.length&&"getAll"in P.objectStore(Q[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)},Q=ct.schema,tt=ct.hasGetAll,ct=Q.tables.map(C),bt={};return ct.forEach(function(ut){return bt[ut.name]=ut}),{stack:"dbcore",transaction:s.transaction.bind(s),table:function(ut){if(bt[ut])return bt[ut];throw new Error("Table '".concat(ut,"' not found"))},MIN_KEY:-1/0,MAX_KEY:ds(c),schema:Q}}function xa(s,c,p,v){return p=p.IDBKeyRange,c=Bi(c,p,v),{dbcore:s.dbcore.reduce(function(C,P){return P=P.create,o(o({},C),P(C))},c)}}function wi(s,c){var p=c.db,p=xa(s._middlewares,p,s._deps,c);s.core=p.dbcore,s.tables.forEach(function(v){var C=v.name;s.core.schema.tables.some(function(P){return P.name===C})&&(v.core=s.core.table(C),s[C]instanceof s.Table)&&(s[C].core=v.core)})}function va(s,c,p,v){p.forEach(function(C){var P=v[C];c.forEach(function(Q){var tt=(function ct(bt,ut){return j(bt,ut)||(bt=d(bt))&&ct(bt,ut)})(Q,C);(!tt||"value"in tt&&tt.value===void 0)&&(Q===s.Transaction.prototype||Q instanceof s.Transaction?f(Q,C,{get:function(){return this.table(C)},set:function(ct){y(this,C,{value:ct,writable:!0,configurable:!0,enumerable:!0})}}):Q[C]=new s.Table(C,P))})})}function Ws(s,c){c.forEach(function(p){for(var v in p)p[v]instanceof s.Table&&delete p[v]})}function dr(s,c){return s._cfg.version-c._cfg.version}function Qs(s,c,p,v){var C=s._dbSchema,P=(p.objectStoreNames.contains("$meta")&&!C.$meta&&(C.$meta=us("$meta",ro("")[0],[]),s._storeNames.push("$meta")),s._createTransaction("readwrite",s._storeNames,C)),Q=(P.create(p),P._completion.catch(v),P._reject.bind(P)),tt=st.transless||st;qe(function(){if(st.trans=P,st.transless=tt,c!==0)return wi(s,p),bt=c,((ct=P).storeNames.includes("$meta")?ct.table("$meta").get("version").then(function(ut){return ut??bt}):Xt.resolve(bt)).then(function(Et){var lt=s,ft=Et,mt=P,dt=p,ht=[],Et=lt._versions,Tt=lt._dbSchema=fs(0,lt.idbdb,dt);return(Et=Et.filter(function(_t){return _t._cfg.version>=ft})).length===0?Xt.resolve():(Et.forEach(function(_t){ht.push(function(){var Nt,qt,Vt,Wt=Tt,Ht=_t._cfg.dbschema,te=(Aa(lt,Wt,dt),Aa(lt,Ht,dt),Tt=lt._dbSchema=Ht,_a(Wt,Ht)),Zt=(te.add.forEach(function(Gt){hr(dt,Gt[0],Gt[1].primKey,Gt[1].indexes)}),te.change.forEach(function(Gt){if(Gt.recreate)throw new G.Upgrade("Not yet support for changing primary key");var ee=dt.objectStore(Gt.name);Gt.add.forEach(function(ue){return Ea(ee,ue)}),Gt.change.forEach(function(ue){ee.deleteIndex(ue.name),Ea(ee,ue)}),Gt.del.forEach(function(ue){return ee.deleteIndex(ue)})}),_t._cfg.contentUpgrade);if(Zt&&_t._cfg.version>ft)return wi(lt,dt),mt._memoizedTables={},Nt=rt(Ht),te.del.forEach(function(Gt){Nt[Gt]=Wt[Gt]}),Ws(lt,[lt.Transaction.prototype]),va(lt,[lt.Transaction.prototype],D(Nt),Nt),mt.schema=Nt,(qt=g(Zt))&&$e(),Ht=Xt.follow(function(){var Gt;(Vt=Zt(mt))&&qt&&(Gt=Mn.bind(null,null),Vt.then(Gt,Gt))}),Vt&&typeof Vt.then=="function"?Xt.resolve(Vt):Ht.then(function(){return Vt})}),ht.push(function(Nt){var qt,Vt,Wt=_t._cfg.dbschema;qt=Wt,Vt=Nt,[].slice.call(Vt.db.objectStoreNames).forEach(function(Ht){return qt[Ht]==null&&Vt.db.deleteObjectStore(Ht)}),Ws(lt,[lt.Transaction.prototype]),va(lt,[lt.Transaction.prototype],lt._storeNames,lt._dbSchema),mt.schema=lt._dbSchema}),ht.push(function(Nt){lt.idbdb.objectStoreNames.contains("$meta")&&(Math.ceil(lt.idbdb.version/10)===_t._cfg.version?(lt.idbdb.deleteObjectStore("$meta"),delete lt._dbSchema.$meta,lt._storeNames=lt._storeNames.filter(function(qt){return qt!=="$meta"})):Nt.objectStore("$meta").put(_t._cfg.version,"version"))})}),(function _t(){return ht.length?Xt.resolve(ht.shift()(mt.idbtrans)).then(_t):Xt.resolve()})().then(function(){ao(Tt,dt)}))}).catch(Q);var ct,bt;D(C).forEach(function(ut){hr(p,ut,C[ut].primKey,C[ut].indexes)}),wi(s,p),Xt.follow(function(){return s.on.populate.fire(P)}).catch(Q)})}function ba(s,c){ao(s._dbSchema,c),c.db.version%10!=0||c.objectStoreNames.contains("$meta")||c.db.createObjectStore("$meta").add(Math.ceil(c.db.version/10-1),"version");var p=fs(0,s.idbdb,c);Aa(s,s._dbSchema,c);for(var v=0,C=_a(p,s._dbSchema).change;v<C.length;v++){var P=(Q=>{if(Q.change.length||Q.recreate)return console.warn("Unable to patch indexes of table ".concat(Q.name," because it has changes on the type of index or primary key.")),{value:void 0};var tt=c.objectStore(Q.name);Q.add.forEach(function(ct){$t&&console.debug("Dexie upgrade patch: Creating missing index ".concat(Q.name,".").concat(ct.src)),Ea(tt,ct)})})(C[v]);if(typeof P=="object")return P.value}}function _a(s,c){var p,v={del:[],add:[],change:[]};for(p in s)c[p]||v.del.push(p);for(p in c){var C=s[p],P=c[p];if(C){var Q={name:p,def:P,recreate:!1,del:[],add:[],change:[]};if(""+(C.primKey.keyPath||"")!=""+(P.primKey.keyPath||"")||C.primKey.auto!==P.primKey.auto)Q.recreate=!0,v.change.push(Q);else{var tt=C.idxByName,ct=P.idxByName,bt=void 0;for(bt in tt)ct[bt]||Q.del.push(bt);for(bt in ct){var ut=tt[bt],lt=ct[bt];ut?ut.src!==lt.src&&Q.change.push(lt):Q.add.push(lt)}(0<Q.del.length||0<Q.add.length||0<Q.change.length)&&v.change.push(Q)}}else v.add.push([p,P])}return v}function hr(s,c,p,v){var C=s.db.createObjectStore(c,p.keyPath?{keyPath:p.keyPath,autoIncrement:p.auto}:{autoIncrement:p.auto});v.forEach(function(P){return Ea(C,P)})}function ao(s,c){D(s).forEach(function(p){c.db.objectStoreNames.contains(p)||($t&&console.debug("Dexie: Creating missing table",p),hr(c,p,s[p].primKey,s[p].indexes))})}function Ea(s,c){s.createIndex(c.name,c.keyPath,{unique:c.unique,multiEntry:c.multi})}function fs(s,c,p){var v={};return U(c.objectStoreNames,0).forEach(function(C){for(var P=p.objectStore(C),Q=ti(ya(bt=P.keyPath),bt||"",!0,!1,!!P.autoIncrement,bt&&typeof bt!="string",!0),tt=[],ct=0;ct<P.indexNames.length;++ct){var ut=P.index(P.indexNames[ct]),bt=ut.keyPath,ut=ti(ut.name,bt,!!ut.unique,!!ut.multiEntry,!1,bt&&typeof bt!="string",!1);tt.push(ut)}v[C]=us(C,Q,tt)}),v}function Aa(s,c,p){for(var v=p.db.objectStoreNames,C=0;C<v.length;++C){var P=v[C],Q=p.objectStore(P);s._hasGetAll="getAll"in Q;for(var tt=0;tt<Q.indexNames.length;++tt){var ct,bt=Q.indexNames[tt],ut=Q.index(bt).keyPath,ut=typeof ut=="string"?ut:"["+U(ut).join("+")+"]";c[P]&&(ct=c[P].idxByName[ut])&&(ct.name=bt,delete c[P].idxByName[ut],c[P].idxByName[bt]=ct)}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&O.WorkerGlobalScope&&O instanceof O.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(s._hasGetAll=!1)}function ro(s){return s.split(",").map(function(c,p){var C=c.split(":"),v=(v=C[1])==null?void 0:v.trim(),C=(c=C[0].trim()).replace(/([&*]|\+\+)/g,""),P=/^\[/.test(C)?C.match(/^\[(.*)\]$/)[1].split("+"):C;return ti(C,P||null,/\&/.test(c),/\*/.test(c),/\+\+/.test(c),B(P),p===0,v)})}ps.prototype._createTableSchema=us,ps.prototype._parseIndexSyntax=ro,ps.prototype._parseStoresSpec=function(s,c){var p=this;D(s).forEach(function(v){if(s[v]!==null){var C=p._parseIndexSyntax(s[v]),P=C.shift();if(!P)throw new G.Schema("Invalid schema for table "+v+": "+s[v]);if(P.unique=!0,P.multi)throw new G.Schema("Primary key cannot be multiEntry*");C.forEach(function(Q){if(Q.auto)throw new G.Schema("Only primary key can be marked as autoIncrement (++)");if(!Q.keyPath)throw new G.Schema("Index must have a name and cannot be an empty string")}),P=p._createTableSchema(v,P,C),c[v]=P}})},ps.prototype.stores=function(p){var c=this.db,p=(this._cfg.storesSource=this._cfg.storesSource?F(this._cfg.storesSource,p):p,c._versions),v={},C={};return p.forEach(function(P){F(v,P._cfg.storesSource),C=P._cfg.dbschema={},P._parseStoresSpec(v,C)}),c._dbSchema=C,Ws(c,[c._allTables,c,c.Transaction.prototype]),va(c,[c._allTables,c,c.Transaction.prototype,this._cfg.tables],D(C),C),c._storeNames=D(C),this},ps.prototype.upgrade=function(s){return this._cfg.contentUpgrade=Qt(this._cfg.contentUpgrade||at,s),this};var xl=ps;function ps(){}function fr(s,c){var p=s._dbNamesDB;return p||(p=s._dbNamesDB=new ei(qs,{addons:[],indexedDB:s,IDBKeyRange:c})).version(1).stores({dbnames:"name"}),p.table("dbnames")}function Sa(s){return s&&typeof s.databases=="function"}function pr(s){return qe(function(){return st.letThrough=!0,s()})}function mr(s){return!("from"in s)}var pn=function(s,c){var p;if(!this)return p=new pn,s&&"d"in s&&F(p,s),p;F(this,arguments.length?{d:1,from:s,to:1<arguments.length?c:s}:{d:0})};function Zs(s,c,p){var v=pe(c,p);if(!isNaN(v)){if(0<v)throw RangeError();if(mr(s))return F(s,{from:c,to:p,d:1});var v=s.l,C=s.r;if(pe(p,s.from)<0)return v?Zs(v,c,p):s.l={from:c,to:p,d:1,l:null,r:null},lo(s);if(0<pe(c,s.to))return C?Zs(C,c,p):s.r={from:c,to:p,d:1,l:null,r:null},lo(s);pe(c,s.from)<0&&(s.from=c,s.l=null,s.d=C?C.d+1:1),0<pe(p,s.to)&&(s.to=p,s.r=null,s.d=s.l?s.l.d+1:1),c=!s.r,v&&!s.l&&Ui(s,v),C&&c&&Ui(s,C)}}function Ui(s,c){mr(c)||(function p(v,C){var P=C.from,Q=C.l,tt=C.r;Zs(v,P,C.to),Q&&p(v,Q),tt&&p(v,tt)})(s,c)}function oo(s,c){var p=wa(c),v=p.next();if(!v.done)for(var C=v.value,P=wa(s),Q=P.next(C.from),tt=Q.value;!v.done&&!Q.done;){if(pe(tt.from,C.to)<=0&&0<=pe(tt.to,C.from))return!0;pe(C.from,tt.from)<0?C=(v=p.next(tt.from)).value:tt=(Q=P.next(C.from)).value}return!1}function wa(s){var c=mr(s)?null:{s:0,n:s};return{next:function(p){for(var v=0<arguments.length;c;)switch(c.s){case 0:if(c.s=1,v)for(;c.n.l&&pe(p,c.n.from)<0;)c={up:c,n:c.n.l,s:1};else for(;c.n.l;)c={up:c,n:c.n.l,s:1};case 1:if(c.s=2,!v||pe(p,c.n.to)<=0)return{value:c.n,done:!1};case 2:if(c.n.r){c.s=3,c={up:c,n:c.n.r,s:0};continue}case 3:c=c.up}return{done:!0}}}}function lo(s){var c,p,v,C=(((C=s.r)==null?void 0:C.d)||0)-(((C=s.l)==null?void 0:C.d)||0),C=1<C?"r":C<-1?"l":"";C&&(c=C=="r"?"l":"r",p=o({},s),v=s[C],s.from=v.from,s.to=v.to,s[C]=v[C],p[C]=v[c],(s[c]=p).d=gr(p)),s.d=gr(s)}function gr(p){var c=p.r,p=p.l;return(c?p?Math.max(c.d,p.d):c.d:p?p.d:0)+1}function Ra(s,c){return D(c).forEach(function(p){s[p]?Ui(s[p],c[p]):s[p]=(function v(C){var P,Q,tt={};for(P in C)h(C,P)&&(Q=C[P],tt[P]=!Q||typeof Q!="object"||gt.has(Q.constructor)?Q:v(Q));return tt})(c[p])}),s}function yr(s,c){return s.all||c.all||Object.keys(s).some(function(p){return c[p]&&oo(c[p],s[p])})}b(pn.prototype,((je={add:function(s){return Ui(this,s),this},addKey:function(s){return Zs(this,s,s),this},addKeys:function(s){var c=this;return s.forEach(function(p){return Zs(c,p,p)}),this},hasKey:function(s){var c=wa(this).next(s).value;return c&&pe(c.from,s)<=0&&0<=pe(c.to,s)}})[nt]=function(){return wa(this)},je));var qi={},xr={},vr=!1;function Ta(s){Ra(xr,s),vr||(vr=!0,setTimeout(function(){vr=!1,br(xr,!(xr={}))},0))}function br(s,c){c===void 0&&(c=!1);var p=new Set;if(s.all)for(var v=0,C=Object.values(qi);v<C.length;v++)co(tt=C[v],s,p,c);else for(var P in s){var Q,tt,P=/^idb\:\/\/(.*)\/(.*)\//.exec(P);P&&(Q=P[1],P=P[2],tt=qi["idb://".concat(Q,"/").concat(P)])&&co(tt,s,p,c)}p.forEach(function(ct){return ct()})}function co(s,c,p,v){for(var C=[],P=0,Q=Object.entries(s.queries.query);P<Q.length;P++){for(var tt=Q[P],ct=tt[0],bt=[],ut=0,lt=tt[1];ut<lt.length;ut++){var ft=lt[ut];yr(c,ft.obsSet)?ft.subscribers.forEach(function(Et){return p.add(Et)}):v&&bt.push(ft)}v&&C.push([ct,bt])}if(v)for(var mt=0,dt=C;mt<dt.length;mt++){var ht=dt[mt],ct=ht[0],bt=ht[1];s.queries.query[ct]=bt}}function vl(s){var c=s._state,p=s._deps.indexedDB;if(c.isBeingOpened||s.idbdb)return c.dbReadyPromise.then(function(){return c.dbOpenError?Oe(c.dbOpenError):s});c.isBeingOpened=!0,c.dbOpenError=null,c.openComplete=!1;var v=c.openCanceller,C=Math.round(10*s.verno),P=!1;function Q(){if(c.openCanceller!==v)throw new G.DatabaseClosed("db.open() was cancelled")}function tt(){return new Xt(function(ft,mt){if(Q(),!p)throw new G.MissingAPI;var dt=s.name,ht=c.autoSchema||!C?p.open(dt):p.open(dt,C);if(!ht)throw new G.MissingAPI;ht.onerror=Hn(mt),ht.onblocked=Re(s._fireOnBlocked),ht.onupgradeneeded=Re(function(Et){var Tt;ut=ht.transaction,c.autoSchema&&!s._options.allowEmptyDB?(ht.onerror=zi,ut.abort(),ht.result.close(),(Tt=p.deleteDatabase(dt)).onsuccess=Tt.onerror=Re(function(){mt(new G.NoSuchDatabase("Database ".concat(dt," doesnt exist")))})):(ut.onerror=Hn(mt),Tt=Et.oldVersion>Math.pow(2,62)?0:Et.oldVersion,lt=Tt<1,s.idbdb=ht.result,P&&ba(s,ut),Qs(s,Tt/10,ut,mt))},mt),ht.onsuccess=Re(function(){ut=null;var Et,Tt,_t,Nt,qt,Vt,Wt=s.idbdb=ht.result,Ht=U(Wt.objectStoreNames);if(0<Ht.length)try{var te=Wt.transaction((qt=Ht).length===1?qt[0]:qt,"readonly");if(c.autoSchema)Vt=Wt,Nt=te,(_t=s).verno=Vt.version/10,Nt=_t._dbSchema=fs(0,Vt,Nt),_t._storeNames=U(Vt.objectStoreNames,0),va(_t,[_t._allTables],D(Nt),Nt);else if(Aa(s,s._dbSchema,te),Tt=te,((Tt=_a(fs(0,(Et=s).idbdb,Tt),Et._dbSchema)).add.length||Tt.change.some(function(Zt){return Zt.add.length||Zt.change.length}))&&!P)return console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Dexie will add missing parts and increment native version number to workaround this."),Wt.close(),C=Wt.version+1,P=!0,ft(tt());wi(s,te)}catch{}Oi.push(s),Wt.onversionchange=Re(function(Zt){c.vcFired=!0,s.on("versionchange").fire(Zt)}),Wt.onclose=Re(function(){s.close({disableAutoOpen:!1})}),lt&&(Ht=s._deps,qt=dt,Sa(Vt=Ht.indexedDB)||qt===qs||fr(Vt,Ht.IDBKeyRange).put({name:qt}).catch(at)),ft()},mt)}).catch(function(ft){switch(ft?.name){case"UnknownError":if(0<c.PR1398_maxLoop)return c.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),tt();break;case"VersionError":if(0<C)return C=0,tt()}return Xt.reject(ft)})}var ct,bt=c.dbReadyResolve,ut=null,lt=!1;return Xt.race([v,(typeof navigator>"u"?Xt.resolve():!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise(function(ft){function mt(){return indexedDB.databases().finally(ft)}ct=setInterval(mt,100),mt()}).finally(function(){return clearInterval(ct)}):Promise.resolve()).then(tt)]).then(function(){return Q(),c.onReadyBeingFired=[],Xt.resolve(pr(function(){return s.on.ready.fire(s.vip)})).then(function ft(){var mt;if(0<c.onReadyBeingFired.length)return mt=c.onReadyBeingFired.reduce(Qt,at),c.onReadyBeingFired=[],Xt.resolve(pr(function(){return mt(s.vip)})).then(ft)})}).finally(function(){c.openCanceller===v&&(c.onReadyBeingFired=null,c.isBeingOpened=!1)}).catch(function(ft){c.dbOpenError=ft;try{ut&&ut.abort()}catch{}return v===c.openCanceller&&s._close(),Oe(ft)}).finally(function(){c.openComplete=!0,bt()}).then(function(){var ft;return lt&&(ft={},s.tables.forEach(function(mt){mt.schema.indexes.forEach(function(dt){dt.name&&(ft["idb://".concat(s.name,"/").concat(mt.name,"/").concat(dt.name)]=new pn(-1/0,[[[]]]))}),ft["idb://".concat(s.name,"/").concat(mt.name,"/")]=ft["idb://".concat(s.name,"/").concat(mt.name,"/:dels")]=new pn(-1/0,[[[]]])}),fn(cs).fire(ft),br(ft,!0)),s})}function Js(s){function c(P){return s.next(P)}var p=C(c),v=C(function(P){return s.throw(P)});function C(P){return function(tt){var tt=P(tt),ct=tt.value;return tt.done?ct:ct&&typeof ct.then=="function"?ct.then(p,v):B(ct)?Promise.all(ct).then(p,v):p(ct)}}return C(c)()}function Ri(s,c,p){for(var v=B(s)?s.slice():[s],C=0;C<p;++C)v.push(c);return v}var bl={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(s){return o(o({},s),{table:function(v){var p=s.table(v),v=p.schema,C={},P=[];function Q(ft,mt,dt){var _t=sn(ft),ht=C[_t]=C[_t]||[],Et=ft==null?0:typeof ft=="string"?1:ft.length,Tt=0<mt,_t=o(o({},dt),{name:Tt?"".concat(_t,"(virtual-from:").concat(dt.name,")"):dt.name,lowLevelIndex:dt,isVirtual:Tt,keyTail:mt,keyLength:Et,extractKey:hs(ft),unique:!Tt&&dt.unique});return ht.push(_t),_t.isPrimaryKey||P.push(_t),1<Et&&Q(Et===2?ft[0]:ft.slice(0,Et-1),mt+1,dt),ht.sort(function(Nt,qt){return Nt.keyTail-qt.keyTail}),_t}var tt=Q(v.primaryKey.keyPath,0,v.primaryKey);C[":id"]=[tt];for(var ct=0,bt=v.indexes;ct<bt.length;ct++){var ut=bt[ct];Q(ut.keyPath,0,ut)}function lt(ft){var mt,dt=ft.query.index;return dt.isVirtual?o(o({},ft),{query:{index:dt.lowLevelIndex,range:(mt=ft.query.range,dt=dt.keyTail,{type:mt.type===1?2:mt.type,lower:Ri(mt.lower,mt.lowerOpen?s.MAX_KEY:s.MIN_KEY,dt),lowerOpen:!0,upper:Ri(mt.upper,mt.upperOpen?s.MIN_KEY:s.MAX_KEY,dt),upperOpen:!0})}}):ft}return o(o({},p),{schema:o(o({},v),{primaryKey:tt,indexes:P,getIndexByKeyPath:function(ft){return(ft=C[sn(ft)])&&ft[0]}}),count:function(ft){return p.count(lt(ft))},query:function(ft){return p.query(lt(ft))},openCursor:function(ft){var mt=ft.query.index,dt=mt.keyTail,ht=mt.keyLength;return mt.isVirtual?p.openCursor(lt(ft)).then(function(Tt){return Tt&&Et(Tt)}):p.openCursor(ft);function Et(Tt){return Object.create(Tt,{continue:{value:function(_t){_t!=null?Tt.continue(Ri(_t,ft.reverse?s.MAX_KEY:s.MIN_KEY,dt)):ft.unique?Tt.continue(Tt.key.slice(0,ht).concat(ft.reverse?s.MIN_KEY:s.MAX_KEY,dt)):Tt.continue()}},continuePrimaryKey:{value:function(_t,Nt){Tt.continuePrimaryKey(Ri(_t,s.MAX_KEY,dt),Nt)}},primaryKey:{get:function(){return Tt.primaryKey}},key:{get:function(){var _t=Tt.key;return ht===1?_t[0]:_t.slice(0,ht)}},value:{get:function(){return Tt.value}}})}}})}})}};function Ca(s,c,p,v){return p=p||{},v=v||"",D(s).forEach(function(C){var P,Q,tt;h(c,C)?(P=s[C],Q=c[C],typeof P=="object"&&typeof Q=="object"&&P&&Q?(tt=Kt(P))!==Kt(Q)?p[v+C]=c[C]:tt==="Object"?Ca(P,Q,p,v+C+"."):P!==Q&&(p[v+C]=c[C]):P!==Q&&(p[v+C]=c[C])):p[v+C]=void 0}),D(c).forEach(function(C){h(s,C)||(p[v+C]=c[C])}),p}function ja(s,c){return c.type==="delete"?c.keys:c.keys||c.values.map(s.extractKey)}var uo={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(s){return o(o({},s),{table:function(c){var p=s.table(c),v=p.schema.primaryKey;return o(o({},p),{mutate:function(C){var P=st.trans,Q=P.table(c).hook,tt=Q.deleting,ct=Q.creating,bt=Q.updating;switch(C.type){case"add":if(ct.fire===at)break;return P._promise("readwrite",function(){return ut(C)},!0);case"put":if(ct.fire===at&&bt.fire===at)break;return P._promise("readwrite",function(){return ut(C)},!0);case"delete":if(tt.fire===at)break;return P._promise("readwrite",function(){return ut(C)},!0);case"deleteRange":if(tt.fire===at)break;return P._promise("readwrite",function(){return(function lt(ft,mt,dt){return p.query({trans:ft,values:!1,query:{index:v,range:mt},limit:dt}).then(function(ht){var Et=ht.result;return ut({type:"delete",keys:Et,trans:ft}).then(function(Tt){return 0<Tt.numFailures?Promise.reject(Tt.failures[0]):Et.length<dt?{failures:[],numFailures:0,lastResult:void 0}:lt(ft,o(o({},mt),{lower:Et[Et.length-1],lowerOpen:!0}),dt)})})})(C.trans,C.range,1e4)},!0)}return p.mutate(C);function ut(lt){var ft,mt,dt,ht=st.trans,Et=lt.keys||ja(v,lt);if(Et)return(lt=lt.type==="add"||lt.type==="put"?o(o({},lt),{keys:Et}):o({},lt)).type!=="delete"&&(lt.values=E([],lt.values)),lt.keys&&(lt.keys=E([],lt.keys)),ft=p,dt=Et,((mt=lt).type==="add"?Promise.resolve([]):ft.getMany({trans:mt.trans,keys:dt,cache:"immutable"})).then(function(Tt){var _t=Et.map(function(Nt,qt){var Vt,Wt,Ht,te=Tt[qt],Zt={onerror:null,onsuccess:null};return lt.type==="delete"?tt.fire.call(Zt,Nt,te,ht):lt.type==="add"||te===void 0?(Vt=ct.fire.call(Zt,Nt,lt.values[qt],ht),Nt==null&&Vt!=null&&(lt.keys[qt]=Nt=Vt,v.outbound||$(lt.values[qt],v.keyPath,Nt))):(Vt=Ca(te,lt.values[qt]),(Wt=bt.fire.call(Zt,Vt,Nt,te,ht))&&(Ht=lt.values[qt],Object.keys(Wt).forEach(function(Gt){h(Ht,Gt)?Ht[Gt]=Wt[Gt]:$(Ht,Gt,Wt[Gt])}))),Zt});return p.mutate(lt).then(function(Nt){for(var qt=Nt.failures,Vt=Nt.results,Wt=Nt.numFailures,Nt=Nt.lastResult,Ht=0;Ht<Et.length;++Ht){var te=(Vt||Et)[Ht],Zt=_t[Ht];te==null?Zt.onerror&&Zt.onerror(qt[Ht]):Zt.onsuccess&&Zt.onsuccess(lt.type==="put"&&Tt[Ht]?lt.values[Ht]:te)}return{failures:qt,results:Vt,numFailures:Wt,lastResult:Nt}}).catch(function(Nt){return _t.forEach(function(qt){return qt.onerror&&qt.onerror(Nt)}),Promise.reject(Nt)})});throw new Error("Keys missing")}}})}})}};function _r(s,c,p){try{if(!c||c.keys.length<s.length)return null;for(var v=[],C=0,P=0;C<c.keys.length&&P<s.length;++C)pe(c.keys[C],s[P])===0&&(v.push(p?At(c.values[C]):c.values[C]),++P);return v.length===s.length?v:null}catch{return null}}var ho={stack:"dbcore",level:-1,create:function(s){return{table:function(c){var p=s.table(c);return o(o({},p),{getMany:function(v){var C;return v.cache?(C=_r(v.keys,v.trans._cache,v.cache==="clone"))?Xt.resolve(C):p.getMany(v).then(function(P){return v.trans._cache={keys:v.keys,values:v.cache==="clone"?At(P):P},P}):p.getMany(v)},mutate:function(v){return v.type!=="add"&&(v.trans._cache=null),p.mutate(v)}})}}}};function Hi(s,c){return s.trans.mode==="readonly"&&!!s.subscr&&!s.trans.explicit&&s.trans.db._options.cache!=="disabled"&&!c.schema.primaryKey.outbound}function fo(s,c){switch(s){case"query":return c.values&&!c.unique;case"get":case"getMany":case"count":case"openCursor":return!1}}var _l={stack:"dbcore",level:0,name:"Observability",create:function(s){var c=s.schema.name,p=new pn(s.MIN_KEY,s.MAX_KEY);return o(o({},s),{transaction:function(v,C,P){if(st.subscr&&C!=="readonly")throw new G.ReadOnly("Readwrite transaction in liveQuery context. Querier source: ".concat(st.querier));return s.transaction(v,C,P)},table:function(v){function C(Et){var ht,Et=Et.query;return[ht=Et.index,new pn((ht=(Et=Et.range).lower)!=null?ht:s.MIN_KEY,(ht=Et.upper)!=null?ht:s.MAX_KEY)]}var P=s.table(v),Q=P.schema,tt=Q.primaryKey,ct=Q.indexes,bt=tt.extractKey,ut=tt.outbound,lt=tt.autoIncrement&&ct.filter(function(dt){return dt.compound&&dt.keyPath.includes(tt.keyPath)}),ft=o(o({},P),{mutate:function(dt){function ht(ee){return ee="idb://".concat(c,"/").concat(v,"/").concat(ee),qt[ee]||(qt[ee]=new pn)}var Et,Tt,_t,Nt=dt.trans,qt=dt.mutatedParts||(dt.mutatedParts={}),Vt=ht(""),Wt=ht(":dels"),Ht=dt.type,Zt=dt.type==="deleteRange"?[dt.range]:dt.type==="delete"?[dt.keys]:dt.values.length<50?[ja(tt,dt).filter(function(ee){return ee}),dt.values]:[],te=Zt[0],Zt=Zt[1],Gt=dt.trans._cache;return B(te)?(Vt.addKeys(te),(Ht=Ht==="delete"||te.length===Zt.length?_r(te,Gt):null)||Wt.addKeys(te),(Ht||Zt)&&(Et=ht,Tt=Ht,_t=Zt,Q.indexes.forEach(function(ee){var ue=Et(ee.name||"");function ge(de){return de!=null?ee.extractKey(de):null}function ae(de){ee.multiEntry&&B(de)?de.forEach(function(Le){return ue.addKey(Le)}):ue.addKey(de)}(Tt||_t).forEach(function(de,Me){var Tn=Tt&&ge(Tt[Me]),Me=_t&&ge(_t[Me]);pe(Tn,Me)!==0&&(Tn!=null&&ae(Tn),Me!=null)&&ae(Me)})}))):te?(Zt={from:(Gt=te.lower)!=null?Gt:s.MIN_KEY,to:(Ht=te.upper)!=null?Ht:s.MAX_KEY},Wt.add(Zt),Vt.add(Zt)):(Vt.add(p),Wt.add(p),Q.indexes.forEach(function(ee){return ht(ee.name).add(p)})),P.mutate(dt).then(function(ee){return!te||dt.type!=="add"&&dt.type!=="put"||(Vt.addKeys(ee.results),lt&&lt.forEach(function(ue){for(var ge=dt.values.map(function(Tn){return ue.extractKey(Tn)}),ae=ue.keyPath.findIndex(function(Tn){return Tn===tt.keyPath}),de=0,Le=ee.results.length;de<Le;++de)ge[de][ae]=ee.results[de];ht(ue.name).addKeys(ge)})),Nt.mutatedParts=Ra(Nt.mutatedParts||{},qt),ee})}}),mt={get:function(dt){return[tt,new pn(dt.key)]},getMany:function(dt){return[tt,new pn().addKeys(dt.keys)]},count:C,query:C,openCursor:C};return D(mt).forEach(function(dt){ft[dt]=function(ht){var Et=st.subscr,Tt=!!Et,_t=Hi(st,P)&&fo(dt,ht)?ht.obsSet={}:Et;if(Tt){var Nt,Et=function(Zt){return Zt="idb://".concat(c,"/").concat(v,"/").concat(Zt),_t[Zt]||(_t[Zt]=new pn)},qt=Et(""),Vt=Et(":dels"),Tt=mt[dt](ht),Wt=Tt[0],Tt=Tt[1];if((dt==="query"&&Wt.isPrimaryKey&&!ht.values?Vt:Et(Wt.name||"")).add(Tt),!Wt.isPrimaryKey){if(dt!=="count")return Nt=dt==="query"&&ut&&ht.values&&P.query(o(o({},ht),{values:!1})),P[dt].apply(this,arguments).then(function(Zt){if(dt==="query"){if(ut&&ht.values)return Nt.then(function(ge){return ge=ge.result,qt.addKeys(ge),Zt});var Gt=ht.values?Zt.result.map(bt):Zt.result;(ht.values?qt:Vt).addKeys(Gt)}else{var ee,ue;if(dt==="openCursor")return ue=ht.values,(ee=Zt)&&Object.create(ee,{key:{get:function(){return Vt.addKey(ee.primaryKey),ee.key}},primaryKey:{get:function(){var ge=ee.primaryKey;return Vt.addKey(ge),ge}},value:{get:function(){return ue&&qt.addKey(ee.primaryKey),ee.value}}})}return Zt});Vt.add(p)}}return P[dt].apply(this,arguments)}}),ft}})}};function po(s,c,p){var v;return p.numFailures===0?c:c.type==="deleteRange"||(v=c.keys?c.keys.length:"values"in c&&c.values?c.values.length:1,p.numFailures===v)?null:(v=o({},c),B(v.keys)&&(v.keys=v.keys.filter(function(C,P){return!(P in p.failures)})),"values"in v&&B(v.values)&&(v.values=v.values.filter(function(C,P){return!(P in p.failures)})),v)}function Ma(s,c){return p=s,((v=c).lower===void 0||(v.lowerOpen?0<pe(p,v.lower):0<=pe(p,v.lower)))&&(p=s,(v=c).upper===void 0||(v.upperOpen?pe(p,v.upper)<0:pe(p,v.upper)<=0));var p,v}function Er(s,c,p,v,C,P){var Q,tt,ct,bt,ut,lt;return!p||p.length===0||(Q=c.query.index,tt=Q.multiEntry,ct=c.query.range,bt=v.schema.primaryKey.extractKey,ut=Q.extractKey,lt=(Q.lowLevelIndex||Q).extractKey,(v=p.reduce(function(ft,mt){var dt=ft,ht=[];if(mt.type==="add"||mt.type==="put")for(var Et=new pn,Tt=mt.values.length-1;0<=Tt;--Tt){var _t,Nt=mt.values[Tt],qt=bt(Nt);!Et.hasKey(qt)&&(_t=ut(Nt),tt&&B(_t)?_t.some(function(Zt){return Ma(Zt,ct)}):Ma(_t,ct))&&(Et.addKey(qt),ht.push(Nt))}switch(mt.type){case"add":var Vt=new pn().addKeys(c.values?ft.map(function(Gt){return bt(Gt)}):ft),dt=ft.concat(c.values?ht.filter(function(Gt){return Gt=bt(Gt),!Vt.hasKey(Gt)&&(Vt.addKey(Gt),!0)}):ht.map(function(Gt){return bt(Gt)}).filter(function(Gt){return!Vt.hasKey(Gt)&&(Vt.addKey(Gt),!0)}));break;case"put":var Wt=new pn().addKeys(mt.values.map(function(Gt){return bt(Gt)}));dt=ft.filter(function(Gt){return!Wt.hasKey(c.values?bt(Gt):Gt)}).concat(c.values?ht:ht.map(function(Gt){return bt(Gt)}));break;case"delete":var Ht=new pn().addKeys(mt.keys);dt=ft.filter(function(Gt){return!Ht.hasKey(c.values?bt(Gt):Gt)});break;case"deleteRange":var te=mt.range;dt=ft.filter(function(Gt){return!Ma(bt(Gt),te)})}return dt},s))===s)?s:(v.sort(function(ft,mt){return pe(lt(ft),lt(mt))||pe(bt(ft),bt(mt))}),c.limit&&c.limit<1/0&&(v.length>c.limit?v.length=c.limit:s.length===c.limit&&v.length<c.limit&&(C.dirty=!0)),P?Object.freeze(v):v)}function ms(s,c){return pe(s.lower,c.lower)===0&&pe(s.upper,c.upper)===0&&!!s.lowerOpen==!!c.lowerOpen&&!!s.upperOpen==!!c.upperOpen}function $s(s,c){return((p,v,C,P)=>{if(p===void 0)return v!==void 0?-1:0;if(v===void 0)return 1;if((p=pe(p,v))===0){if(C&&P)return 0;if(C)return 1;if(P)return-1}return p})(s.lower,c.lower,s.lowerOpen,c.lowerOpen)<=0&&0<=((p,v,C,P)=>{if(p===void 0)return v!==void 0?1:0;if(v===void 0)return-1;if((p=pe(p,v))===0){if(C&&P)return 0;if(C)return-1;if(P)return 1}return p})(s.upper,c.upper,s.upperOpen,c.upperOpen)}function El(s,c,p,v){s.subscribers.add(p),v.addEventListener("abort",function(){var C,P;s.subscribers.delete(p),s.subscribers.size===0&&(C=s,P=c,setTimeout(function(){C.subscribers.size===0&&N(P,C)},3e3))})}var ka={stack:"dbcore",level:0,name:"Cache",create:function(s){var c=s.schema.name;return o(o({},s),{transaction:function(p,v,C){var P,Q,tt=s.transaction(p,v,C);return v==="readwrite"&&(C=(P=new AbortController).signal,tt.addEventListener("abort",(Q=function(ct){return function(){if(P.abort(),v==="readwrite"){for(var bt=new Set,ut=0,lt=p;ut<lt.length;ut++){var ft=lt[ut],mt=qi["idb://".concat(c,"/").concat(ft)];if(mt){var dt=s.table(ft),ht=mt.optimisticOps.filter(function(ee){return ee.trans===tt});if(tt._explicit&&ct&&tt.mutatedParts)for(var Et=0,Tt=Object.values(mt.queries.query);Et<Tt.length;Et++)for(var _t=0,Nt=(Wt=Tt[Et]).slice();_t<Nt.length;_t++)yr((Ht=Nt[_t]).obsSet,tt.mutatedParts)&&(N(Wt,Ht),Ht.subscribers.forEach(function(ee){return bt.add(ee)}));else if(0<ht.length){mt.optimisticOps=mt.optimisticOps.filter(function(ee){return ee.trans!==tt});for(var qt=0,Vt=Object.values(mt.queries.query);qt<Vt.length;qt++)for(var Wt,Ht,te,Zt=0,Gt=(Wt=Vt[qt]).slice();Zt<Gt.length;Zt++)(Ht=Gt[Zt]).res!=null&&tt.mutatedParts&&(ct&&!Ht.dirty?(te=Object.isFrozen(Ht.res),te=Er(Ht.res,Ht.req,ht,dt,Ht,te),Ht.dirty?(N(Wt,Ht),Ht.subscribers.forEach(function(ee){return bt.add(ee)})):te!==Ht.res&&(Ht.res=te,Ht.promise=Xt.resolve({result:te}))):(Ht.dirty&&N(Wt,Ht),Ht.subscribers.forEach(function(ee){return bt.add(ee)})))}}}bt.forEach(function(ee){return ee()})}}})(!1),{signal:C}),tt.addEventListener("error",Q(!1),{signal:C}),tt.addEventListener("complete",Q(!0),{signal:C})),tt},table:function(p){var v=s.table(p),C=v.schema.primaryKey;return o(o({},v),{mutate:function(P){var Q,tt=st.trans;return!C.outbound&&tt.db._options.cache!=="disabled"&&!tt.explicit&&tt.idbtrans.mode==="readwrite"&&(Q=qi["idb://".concat(c,"/").concat(p)])?(tt=v.mutate(P),P.type!=="add"&&P.type!=="put"||!(50<=P.values.length||ja(C,P).some(function(ct){return ct==null}))?(Q.optimisticOps.push(P),P.mutatedParts&&Ta(P.mutatedParts),tt.then(function(ct){0<ct.numFailures&&(N(Q.optimisticOps,P),(ct=po(0,P,ct))&&Q.optimisticOps.push(ct),P.mutatedParts)&&Ta(P.mutatedParts)}),tt.catch(function(){N(Q.optimisticOps,P),P.mutatedParts&&Ta(P.mutatedParts)})):tt.then(function(ct){var bt=po(0,o(o({},P),{values:P.values.map(function(ut,lt){var ft;return ct.failures[lt]?ut:($(ft=(ft=C.keyPath)!=null&&ft.includes(".")?At(ut):o({},ut),C.keyPath,ct.results[lt]),ft)})}),ct);Q.optimisticOps.push(bt),queueMicrotask(function(){return P.mutatedParts&&Ta(P.mutatedParts)})}),tt):v.mutate(P)},query:function(P){var Q,tt,ct,bt,ut,lt,ft;return Hi(st,v)&&fo("query",P)?(Q=((ct=st.trans)==null?void 0:ct.db._options.cache)==="immutable",tt=(ct=st).requery,ct=ct.signal,lt=((mt,dt,ht,Et)=>{var Tt=qi["idb://".concat(mt,"/").concat(dt)];if(!Tt)return[];if(!(mt=Tt.queries[ht]))return[null,!1,Tt,null];var _t=mt[(Et.query?Et.query.index.name:null)||""];if(!_t)return[null,!1,Tt,null];switch(ht){case"query":var Nt=_t.find(function(qt){return qt.req.limit===Et.limit&&qt.req.values===Et.values&&ms(qt.req.query.range,Et.query.range)});return Nt?[Nt,!0,Tt,_t]:[_t.find(function(qt){return("limit"in qt.req?qt.req.limit:1/0)>=Et.limit&&(!Et.values||qt.req.values)&&$s(qt.req.query.range,Et.query.range)}),!1,Tt,_t];case"count":return Nt=_t.find(function(qt){return ms(qt.req.query.range,Et.query.range)}),[Nt,!!Nt,Tt,_t]}})(c,p,"query",P),ft=lt[0],bt=lt[2],ut=lt[3],ft&&lt[1]?ft.obsSet=P.obsSet:(lt=v.query(P).then(function(mt){var dt=mt.result;if(ft&&(ft.res=dt),Q){for(var ht=0,Et=dt.length;ht<Et;++ht)Object.freeze(dt[ht]);Object.freeze(dt)}else mt.result=At(dt);return mt}).catch(function(mt){return ut&&ft&&N(ut,ft),Promise.reject(mt)}),ft={obsSet:P.obsSet,promise:lt,subscribers:new Set,type:"query",req:P,dirty:!1},ut?ut.push(ft):(ut=[ft],(bt=bt||(qi["idb://".concat(c,"/").concat(p)]={queries:{query:{},count:{}},objs:new Map,optimisticOps:[],unsignaledParts:{}})).queries.query[P.query.index.name||""]=ut)),El(ft,ut,tt,ct),ft.promise.then(function(mt){return{result:Er(mt.result,P,bt?.optimisticOps,v,ft,Q)}})):v.query(P)}})}})}};function ta(s,c){return new Proxy(s,{get:function(p,v,C){return v==="db"?c:Reflect.get(p,v,C)}})}Ge.prototype.version=function(s){if(isNaN(s)||s<.1)throw new G.Type("Given version is not a positive number");if(s=Math.round(10*s)/10,this.idbdb||this._state.isBeingOpened)throw new G.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,s);var c=this._versions,p=c.filter(function(v){return v._cfg.version===s})[0];return p||(p=new this.Version(s),c.push(p),c.sort(dr),p.stores({}),this._state.autoSchema=!1),p},Ge.prototype._whenReady=function(s){var c=this;return this.idbdb&&(this._state.openComplete||st.letThrough||this._vip)?s():new Xt(function(p,v){if(c._state.openComplete)return v(new G.DatabaseClosed(c._state.dbOpenError));if(!c._state.isBeingOpened){if(!c._state.autoOpen)return void v(new G.DatabaseClosed);c.open().catch(at)}c._state.dbReadyPromise.then(p,v)}).then(s)},Ge.prototype.use=function(C){var c=C.stack,p=C.create,v=C.level,C=C.name,P=(C&&this.unuse({stack:c,name:C}),this._middlewares[c]||(this._middlewares[c]=[]));return P.push({stack:c,create:p,level:v??10,name:C}),P.sort(function(Q,tt){return Q.level-tt.level}),this},Ge.prototype.unuse=function(s){var c=s.stack,p=s.name,v=s.create;return c&&this._middlewares[c]&&(this._middlewares[c]=this._middlewares[c].filter(function(C){return v?C.create!==v:!!p&&C.name!==p})),this},Ge.prototype.open=function(){var s=this;return Un(vt,function(){return vl(s)})},Ge.prototype._close=function(){this.on.close.fire(new CustomEvent("close"));var s=this._state,c=Oi.indexOf(this);if(0<=c&&Oi.splice(c,1),this.idbdb){try{this.idbdb.close()}catch{}this.idbdb=null}s.isBeingOpened||(s.dbReadyPromise=new Xt(function(p){s.dbReadyResolve=p}),s.openCanceller=new Xt(function(p,v){s.cancelOpen=v}))},Ge.prototype.close=function(c){var c=(c===void 0?{disableAutoOpen:!0}:c).disableAutoOpen,p=this._state;c?(p.isBeingOpened&&p.cancelOpen(new G.DatabaseClosed),this._close(),p.autoOpen=!1,p.dbOpenError=new G.DatabaseClosed):(this._close(),p.autoOpen=this._options.autoOpen||p.isBeingOpened,p.openComplete=!1,p.dbOpenError=null)},Ge.prototype.delete=function(s){var c=this,p=(s===void 0&&(s={disableAutoOpen:!0}),0<arguments.length&&typeof arguments[0]!="object"),v=this._state;return new Xt(function(C,P){function Q(){c.close(s);var tt=c._deps.indexedDB.deleteDatabase(c.name);tt.onsuccess=Re(function(){var ct,bt,ut;ct=c._deps,bt=c.name,Sa(ut=ct.indexedDB)||bt===qs||fr(ut,ct.IDBKeyRange).delete(bt).catch(at),C()}),tt.onerror=Hn(P),tt.onblocked=c._fireOnBlocked}if(p)throw new G.InvalidArgument("Invalid closeOptions argument to db.delete()");v.isBeingOpened?v.dbReadyPromise.then(Q):Q()})},Ge.prototype.backendDB=function(){return this.idbdb},Ge.prototype.isOpen=function(){return this.idbdb!==null},Ge.prototype.hasBeenClosed=function(){var s=this._state.dbOpenError;return s&&s.name==="DatabaseClosed"},Ge.prototype.hasFailed=function(){return this._state.dbOpenError!==null},Ge.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(Ge.prototype,"tables",{get:function(){var s=this;return D(this._allTables).map(function(c){return s._allTables[c]})},enumerable:!1,configurable:!0}),Ge.prototype.transaction=function(){var s=(function(c,p,v){var C=arguments.length;if(C<2)throw new G.InvalidArgument("Too few arguments");for(var P=new Array(C-1);--C;)P[C-1]=arguments[C];return v=P.pop(),[c,yt(P),v]}).apply(this,arguments);return this._transaction.apply(this,s)},Ge.prototype._transaction=function(s,c,p){var v,C,P=this,Q=st.trans,tt=(Q&&Q.db===this&&s.indexOf("!")===-1||(Q=null),s.indexOf("?")!==-1);s=s.replace("!","").replace("?","");try{if(C=c.map(function(bt){if(bt=bt instanceof P.Table?bt.name:bt,typeof bt!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return bt}),s=="r"||s===fi)v=fi;else{if(s!="rw"&&s!=Ai)throw new G.InvalidArgument("Invalid transaction mode: "+s);v=Ai}if(Q){if(Q.mode===fi&&v===Ai){if(!tt)throw new G.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");Q=null}Q&&C.forEach(function(bt){if(Q&&Q.storeNames.indexOf(bt)===-1){if(!tt)throw new G.SubTransaction("Table "+bt+" not included in parent transaction.");Q=null}}),tt&&Q&&!Q.active&&(Q=null)}}catch(bt){return Q?Q._promise(null,function(ut,lt){lt(bt)}):Oe(bt)}var ct=(function bt(ut,lt,ft,mt,dt){return Xt.resolve().then(function(){var _t=st.transless||st,ht=ut._createTransaction(lt,ft,ut._dbSchema,mt),_t=(ht.explicit=!0,{trans:ht,transless:_t});if(mt)ht.idbtrans=mt.idbtrans;else try{ht.create(),ht.idbtrans._explicit=!0,ut._state.PR1398_maxLoop=3}catch(Nt){return Nt.name===I.InvalidState&&ut.isOpen()&&0<--ut._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),ut.close({disableAutoOpen:!1}),ut.open().then(function(){return bt(ut,lt,ft,null,dt)})):Oe(Nt)}var Et,Tt=g(dt),_t=(Tt&&$e(),Xt.follow(function(){var Nt;(Et=dt.call(ht,ht))&&(Tt?(Nt=Mn.bind(null,null),Et.then(Nt,Nt)):typeof Et.next=="function"&&typeof Et.throw=="function"&&(Et=Js(Et)))},_t));return(Et&&typeof Et.then=="function"?Xt.resolve(Et).then(function(Nt){return ht.active?Nt:Oe(new G.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):_t.then(function(){return Et})).then(function(Nt){return mt&&ht._resolve(),ht._completion.then(function(){return Nt})}).catch(function(Nt){return ht._reject(Nt),Oe(Nt)})})}).bind(null,this,v,C,Q,p);return Q?Q._promise(v,ct,"lock"):st.trans?Un(st.transless,function(){return P._whenReady(ct)}):this._whenReady(ct)},Ge.prototype.table=function(s){if(h(this._allTables,s))return this._allTables[s];throw new G.InvalidTable("Table ".concat(s," does not exist"))};var ei=Ge;function Ge(s,c){var p,v,C,P,Q,tt=this,ct=(this._middlewares={},this.verno=0,Ge.dependencies),ct=(this._options=c=o({addons:Ge.addons,autoOpen:!0,indexedDB:ct.indexedDB,IDBKeyRange:ct.IDBKeyRange,cache:"cloned"},c),this._deps={indexedDB:c.indexedDB,IDBKeyRange:c.IDBKeyRange},c.addons),bt=(this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this,{dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:at,dbReadyPromise:null,cancelOpen:at,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3,autoOpen:c.autoOpen}),ut=(bt.dbReadyPromise=new Xt(function(lt){bt.dbReadyResolve=lt}),bt.openCanceller=new Xt(function(lt,ft){bt.cancelOpen=ft}),this._state=bt,this.name=s,this.on=Ks(this,"populate","blocked","versionchange","close",{ready:[Qt,at]}),this.once=function(lt,ft){var mt=function(){for(var dt=[],ht=0;ht<arguments.length;ht++)dt[ht]=arguments[ht];tt.on(lt).unsubscribe(mt),ft.apply(tt,dt)};return tt.on(lt,mt)},this.on.ready.subscribe=Z(this.on.ready.subscribe,function(lt){return function(ft,mt){Ge.vip(function(){var dt,ht=tt._state;ht.openComplete?(ht.dbOpenError||Xt.resolve().then(ft),mt&&lt(ft)):ht.onReadyBeingFired?(ht.onReadyBeingFired.push(ft),mt&&lt(ft)):(lt(ft),dt=tt,mt||lt(function Et(){dt.on.ready.unsubscribe(ft),dt.on.ready.unsubscribe(Et)}))})}}),this.Collection=(p=this,hn(gl.prototype,function(Et,ht){this.db=p;var mt=ar,dt=null;if(ht)try{mt=ht()}catch(_t){dt=_t}var ht=Et._ctx,Et=ht.table,Tt=Et.hook.reading.fire;this._ctx={table:Et,index:ht.index,isPrimKey:!ht.index||Et.schema.primKey.keyPath&&ht.index===Et.schema.primKey.name,range:mt,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:dt,or:ht.or,valueMapper:Tt!==Ct?Tt:null}})),this.Table=(v=this,hn(rr.prototype,function(lt,ft,mt){this.db=v,this._tx=mt,this.name=lt,this.schema=ft,this.hook=v._allTables[lt]?v._allTables[lt].hook:Ks(null,{creating:[Dt,at],reading:[Yt,Ct],updating:[Lt,at],deleting:[Pt,at]})})),this.Transaction=(C=this,hn(ur.prototype,function(lt,ft,mt,dt,ht){var Et=this;lt!=="readonly"&&ft.forEach(function(Tt){Tt=(Tt=mt[Tt])==null?void 0:Tt.yProps,Tt&&(ft=ft.concat(Tt.map(function(_t){return _t.updatesTable})))}),this.db=C,this.mode=lt,this.storeNames=ft,this.schema=mt,this.chromeTransactionDurability=dt,this.idbtrans=null,this.on=Ks(this,"complete","error","abort"),this.parent=ht||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new Xt(function(Tt,_t){Et._resolve=Tt,Et._reject=_t}),this._completion.then(function(){Et.active=!1,Et.on.complete.fire()},function(Tt){var _t=Et.active;return Et.active=!1,Et.on.error.fire(Tt),Et.parent?Et.parent._reject(Tt):_t&&Et.idbtrans&&Et.idbtrans.abort(),Oe(Tt)})})),this.Version=(P=this,hn(xl.prototype,function(lt){this.db=P,this._cfg={version:lt,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})),this.WhereClause=(Q=this,hn(Fi.prototype,function(lt,ft,mt){if(this.db=Q,this._ctx={table:lt,index:ft===":id"?null:ft,or:mt},this._cmp=this._ascending=pe,this._descending=function(dt,ht){return pe(ht,dt)},this._max=function(dt,ht){return 0<pe(dt,ht)?dt:ht},this._min=function(dt,ht){return pe(dt,ht)<0?dt:ht},this._IDBKeyRange=Q._deps.IDBKeyRange,!this._IDBKeyRange)throw new G.MissingAPI})),this.on("versionchange",function(lt){0<lt.newVersion?console.warn("Another connection wants to upgrade database '".concat(tt.name,"'. Closing db now to resume the upgrade.")):console.warn("Another connection wants to delete database '".concat(tt.name,"'. Closing db now to resume the delete request.")),tt.close({disableAutoOpen:!1})}),this.on("blocked",function(lt){!lt.newVersion||lt.newVersion<lt.oldVersion?console.warn("Dexie.delete('".concat(tt.name,"') was blocked")):console.warn("Upgrade '".concat(tt.name,"' blocked by other connection holding version ").concat(lt.oldVersion/10))}),this._maxKey=ds(c.IDBKeyRange),this._createTransaction=function(lt,ft,mt,dt){return new tt.Transaction(lt,ft,mt,tt._options.chromeTransactionDurability,dt)},this._fireOnBlocked=function(lt){tt.on("blocked").fire(lt),Oi.filter(function(ft){return ft.name===tt.name&&ft!==tt&&!ft._state.vcFired}).map(function(ft){return ft.on("versionchange").fire(lt)})},this.use(ho),this.use(ka),this.use(_l),this.use(bl),this.use(uo),new Proxy(this,{get:function(lt,ft,mt){var dt;return ft==="_vip"||(ft==="table"?function(ht){return ta(tt.table(ht),ut)}:(dt=Reflect.get(lt,ft,mt))instanceof rr?ta(dt,ut):ft==="tables"?dt.map(function(ht){return ta(ht,ut)}):ft==="_createTransaction"?function(){return ta(dt.apply(this,arguments),ut)}:dt)}}));this.vip=ut,ct.forEach(function(lt){return lt(tt)})}var gs,Gi=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable",mo=(Da.prototype.subscribe=function(s,c,p){return this._subscribe(s&&typeof s!="function"?s:{next:s,error:c,complete:p})},Da.prototype[Gi]=function(){return this},Da);function Da(s){this._subscribe=s}try{gs={indexedDB:O.indexedDB||O.mozIndexedDB||O.webkitIndexedDB||O.msIndexedDB,IDBKeyRange:O.IDBKeyRange||O.webkitIDBKeyRange}}catch{gs={indexedDB:null,IDBKeyRange:null}}function go(s){var c,p=!1,v=new mo(function(C){var P=g(s),Q,tt=!1,ct={},bt={},ut={get closed(){return tt},unsubscribe:function(){tt||(tt=!0,Q&&Q.abort(),lt&&fn.storagemutated.unsubscribe(mt))}},lt=(C.start&&C.start(ut),!1),ft=function(){return Ei(dt)},mt=function(ht){Ra(ct,ht),yr(bt,ct)&&ft()},dt=function(){var ht,Et,Tt;!tt&&gs.indexedDB&&(ct={},ht={},Q&&Q.abort(),Q=new AbortController,Tt=(_t=>{var Nt=ke();try{P&&$e();var qt=qe(s,_t);return qt=P?qt.finally(Mn):qt}finally{Nt&&gn()}})(Et={subscr:ht,signal:Q.signal,requery:ft,querier:s,trans:null}),Promise.resolve(Tt).then(function(_t){p=!0,c=_t,tt||Et.signal.aborted||(ct={},(Nt=>{for(var qt in Nt)if(h(Nt,qt))return;return 1})(bt=ht)||lt||(fn(cs,mt),lt=!0),Ei(function(){return!tt&&C.next&&C.next(_t)}))},function(_t){p=!1,["DatabaseClosedError","AbortError"].includes(_t?.name)||tt||Ei(function(){tt||C.error&&C.error(_t)})}))};return setTimeout(ft,0),ut});return v.hasValue=function(){return p},v.getValue=function(){return c},v}var Ki=ei;function Ar(s){var c=Ti;try{Ti=!0,fn.storagemutated.fire(s),br(s,!0)}finally{Ti=c}}b(Ki,o(o({},L),{delete:function(s){return new Ki(s,{addons:[]}).delete()},exists:function(s){return new Ki(s,{addons:[]}).open().then(function(c){return c.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(s){try{return c=Ki.dependencies,p=c.indexedDB,c=c.IDBKeyRange,(Sa(p)?Promise.resolve(p.databases()).then(function(v){return v.map(function(C){return C.name}).filter(function(C){return C!==qs})}):fr(p,c).toCollection().primaryKeys()).then(s)}catch{return Oe(new G.MissingAPI)}var c,p},defineClass:function(){return function(s){F(this,s)}},ignoreTransaction:function(s){return st.trans?Un(st.transless,s):s()},vip:pr,async:function(s){return function(){try{var c=Js(s.apply(this,arguments));return c&&typeof c.then=="function"?c:Xt.resolve(c)}catch(p){return Oe(p)}}},spawn:function(s,c,p){try{var v=Js(s.apply(p,c||[]));return v&&typeof v.then=="function"?v:Xt.resolve(v)}catch(C){return Oe(C)}},currentTransaction:{get:function(){return st.trans||null}},waitFor:function(s,c){return s=Xt.resolve(typeof s=="function"?Ki.ignoreTransaction(s):s).timeout(c||6e4),st.trans?st.trans.waitFor(s):s},Promise:Xt,debug:{get:function(){return $t},set:function(s){se(s)}},derive:A,extend:F,props:b,override:Z,Events:Ks,on:fn,liveQuery:go,extendObservabilitySet:Ra,getByKeyPath:z,setByKeyPath:$,delByKeyPath:function(s,c){typeof c=="string"?$(s,c,void 0):"length"in c&&[].map.call(c,function(p){$(s,p,void 0)})},shallowClone:rt,deepClone:At,getObjectDiff:Ca,cmp:pe,asap:T,minKey:-1/0,addons:[],connections:Oi,errnames:I,dependencies:gs,cache:qi,semVer:"4.3.0",version:"4.3.0".split(".").map(function(s){return parseInt(s)}).reduce(function(s,c,p){return s+c/Math.pow(10,2*p)})})),Ki.maxKey=ds(Ki.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(fn(cs,function(s){Ti||(s=new CustomEvent(Ii,{detail:s}),Ti=!0,dispatchEvent(s),Ti=!1)}),addEventListener(Ii,function(s){s=s.detail,Ti||Ar(s)}));var ys,Ti=!1,Rn=function(){};return typeof BroadcastChannel<"u"&&((Rn=function(){(ys=new BroadcastChannel(Ii)).onmessage=function(s){return s.data&&Ar(s.data)}})(),typeof ys.unref=="function"&&ys.unref(),fn(cs,function(s){Ti||ys.postMessage(s)})),typeof addEventListener<"u"&&(addEventListener("pagehide",function(s){if(!ei.disableBfCache&&s.persisted){$t&&console.debug("Dexie: handling persisted pagehide"),ys?.close();for(var c=0,p=Oi;c<p.length;c++)p[c].close({disableAutoOpen:!1})}}),addEventListener("pageshow",function(s){!ei.disableBfCache&&s.persisted&&($t&&console.debug("Dexie: handling persisted pageshow"),Rn(),Ar({all:new pn(-1/0,[[]])}))})),Xt.rejectionMapper=function(s,c){return!s||s instanceof J||s instanceof TypeError||s instanceof SyntaxError||!s.name||!it[s.name]?s:(c=new it[s.name](c||s.message,s),"stack"in s&&f(c,"stack",{get:function(){return this.inner.stack}}),c)},se($t),o(ei,Object.freeze({__proto__:null,Dexie:ei,Entity:no,PropModification:ls,RangeSet:pn,add:function(s){return new ls({add:s})},cmp:pe,default:ei,liveQuery:go,mergeRanges:Ui,rangesOverlap:oo,remove:function(s){return new ls({remove:s})},replacePrefix:function(s,c){return new ls({replacePrefix:[s,c]})}}),{default:ei}),ei})})(dexie_min$1)),dexie_min$1.exports}var dexie_minExports=requireDexie_min();const _Dexie=getDefaultExportFromCjs(dexie_minExports),DexieSymbol=Symbol.for("Dexie"),Dexie=globalThis[DexieSymbol]||(globalThis[DexieSymbol]=_Dexie);if(_Dexie.semVer!==Dexie.semVer)throw new Error(`Two different versions of Dexie loaded in the same app: ${_Dexie.semVer} and ${Dexie.semVer}`);const{liveQuery,mergeRanges,rangesOverlap,RangeSet,cmp,Entity,PropModification,replacePrefix,add,remove,DexieYProvider}=Dexie;class StudyDatabase extends Dexie{books;chapters;flashcards;questions;studySessions;studySchedules;progress;quizResults;concepts;conceptMaps;constructor(){super("RealEstateStudyDB"),this.version(2).stores({books:"id, title, uploadedAt",chapters:"id, bookId, number, title, createdAt, *topics",flashcards:"id, chapterId, conceptId, nextReviewDate, difficulty, *timesReviewed",questions:"id, chapterId, conceptId, difficulty, topic, *tags",studySessions:"id, date, type, *conceptsReviewed",studySchedules:"id, examDate",progress:"id, bookId, lastStudied, *conceptsMastered",quizResults:"id, date, chapterId, score, *weakAreas",concepts:"id, name, difficulty, *tags, *relatedConcepts",conceptMaps:"id, chapterId"})}}const db=new StudyDatabase;async function getDueFlashcards(){const _=new Date;return await db.flashcards.where("nextReviewDate").belowOrEqual(_).toArray()}async function updateFlashcardAfterReview(_,u){const M=await db.flashcards.get(_);if(!M)return;let{interval:o,repetition:E,easinessFactor:O,timesReviewed:D,timesCorrect:B}=M;D++,u>=3&&B++,O=Math.max(1.3,O+(.1-(5-u)*(.08+(5-u)*.02))),u<3?(E=0,o=1):(E+=1,E===1?o=1:E===2?o=6:o=Math.round(o*O));const F=new Date;F.setDate(F.getDate()+o),await db.flashcards.update(_,{interval:o,repetition:E,easinessFactor:O,nextReviewDate:F,lastReviewedDate:new Date,timesReviewed:D,timesCorrect:B})}async function getProgressByBook(_){return await db.progress.where("bookId").equals(_).first()}async function getStudyStats(_){const u=await db.flashcards.toArray(),M=new Date,o=u.filter(y=>new Date(y.nextReviewDate)<=M),E=await db.questions.toArray(),O=await db.quizResults.toArray(),D=O.length>0?Math.round(O.reduce((y,f)=>y+f.score,0)/O.length):0,B=[...new Set(O.map(y=>new Date(y.date).toDateString()))];let F=0;const d=new Date().toDateString(),l=new Date(Date.now()-864e5).toDateString();(B.includes(d)||B.includes(l))&&(F=B.length);let h=0,b=0;if(_){const y=await getProgressByBook(_);y?.conceptProgress&&(h=y.conceptProgress.filter(A=>A.mastery>=80).length),b=(await db.books.get(_))?.totalConcepts||0}return{totalFlashcards:u.length,dueFlashcards:o.length,totalQuestions:E.length,averageScore:D,studyStreak:F,conceptsMastered:h,totalConcepts:b}}function commonjsRequire(_){throw new Error('Could not dynamically require "'+_+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var pdf={exports:{}};const __viteBrowserExternal={},__viteBrowserExternal$1=Object.freeze(Object.defineProperty({__proto__:null,default:__viteBrowserExternal},Symbol.toStringTag,{value:"Module"})),require$$5=getAugmentedNamespace(__viteBrowserExternal$1);var hasRequiredPdf;function requirePdf(){return hasRequiredPdf||(hasRequiredPdf=1,(function(module,exports$1){(function(u,M){module.exports=u.pdfjsLib=M()})(globalThis,()=>(()=>{var __webpack_modules__=[,((_,u)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.VerbosityLevel=u.Util=u.UnknownErrorException=u.UnexpectedResponseException=u.TextRenderingMode=u.RenderingIntentFlag=u.PromiseCapability=u.PermissionFlag=u.PasswordResponses=u.PasswordException=u.PageActionEventType=u.OPS=u.MissingPDFException=u.MAX_IMAGE_SIZE_TO_CACHE=u.LINE_FACTOR=u.LINE_DESCENT_FACTOR=u.InvalidPDFException=u.ImageKind=u.IDENTITY_MATRIX=u.FormatError=u.FeatureTest=u.FONT_IDENTITY_MATRIX=u.DocumentActionEventType=u.CMapCompressionType=u.BaseException=u.BASELINE_FACTOR=u.AnnotationType=u.AnnotationReplyType=u.AnnotationPrefix=u.AnnotationMode=u.AnnotationFlag=u.AnnotationFieldFlag=u.AnnotationEditorType=u.AnnotationEditorPrefix=u.AnnotationEditorParamsType=u.AnnotationBorderStyleType=u.AnnotationActionEventType=u.AbortException=void 0,u.assert=w,u.bytesToString=it,u.createValidAbsoluteUrl=g,u.getModificationDate=Ue,u.getUuid=ui,u.getVerbosityLevel=Kt,u.info=nt,u.isArrayBuffer=_e,u.isArrayEqual=je,u.isNodeJS=void 0,u.normalizeUnicode=xi,u.objectFromMap=Rt,u.objectSize=Yt,u.setVerbosityLevel=Ft,u.shadow=L,u.string32=Ct,u.stringToBytes=at,u.stringToPDFString=se,u.stringToUTF8String=le,u.unreachable=N,u.utf8StringToString=oe,u.warn=Y;const M=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser");u.isNodeJS=M;const o=[1,0,0,1,0,0];u.IDENTITY_MATRIX=o;const E=[.001,0,0,.001,0,0];u.FONT_IDENTITY_MATRIX=E;const O=1e7;u.MAX_IMAGE_SIZE_TO_CACHE=O;const D=1.35;u.LINE_FACTOR=D;const B=.35;u.LINE_DESCENT_FACTOR=B;const F=B/D;u.BASELINE_FACTOR=F;const d={ANY:1,DISPLAY:2,PRINT:4,SAVE:8,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,OPLIST:256};u.RenderingIntentFlag=d;const l={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3};u.AnnotationMode=l;const h="pdfjs_internal_editor_";u.AnnotationEditorPrefix=h;const b={DISABLE:-1,NONE:0,FREETEXT:3,STAMP:13,INK:15};u.AnnotationEditorType=b;const y={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23};u.AnnotationEditorParamsType=y;const f={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048};u.PermissionFlag=f;const A={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4};u.TextRenderingMode=A;const j={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3};u.ImageKind=j;const x={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26};u.AnnotationType=x;const U={GROUP:"Group",REPLY:"R"};u.AnnotationReplyType=U;const Z={INVISIBLE:1,HIDDEN:2,PRINT:4,NOZOOM:8,NOROTATE:16,NOVIEW:32,READONLY:64,LOCKED:128,TOGGLENOVIEW:256,LOCKEDCONTENTS:512};u.AnnotationFlag=Z;const V={READONLY:1,REQUIRED:2,NOEXPORT:4,MULTILINE:4096,PASSWORD:8192,NOTOGGLETOOFF:16384,RADIO:32768,PUSHBUTTON:65536,COMBO:131072,EDIT:262144,SORT:524288,FILESELECT:1048576,MULTISELECT:2097152,DONOTSPELLCHECK:4194304,DONOTSCROLL:8388608,COMB:16777216,RICHTEXT:33554432,RADIOSINUNISON:33554432,COMMITONSELCHANGE:67108864};u.AnnotationFieldFlag=V;const T={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5};u.AnnotationBorderStyleType=T;const z={E:"Mouse Enter",X:"Mouse Exit",D:"Mouse Down",U:"Mouse Up",Fo:"Focus",Bl:"Blur",PO:"PageOpen",PC:"PageClose",PV:"PageVisible",PI:"PageInvisible",K:"Keystroke",F:"Format",V:"Validate",C:"Calculate"};u.AnnotationActionEventType=z;const $={WC:"WillClose",WS:"WillSave",DS:"DidSave",WP:"WillPrint",DP:"DidPrint"};u.DocumentActionEventType=$;const rt={O:"PageOpen",C:"PageClose"};u.PageActionEventType=rt;const et={ERRORS:0,WARNINGS:1,INFOS:5};u.VerbosityLevel=et;const yt={NONE:0,BINARY:1};u.CMapCompressionType=yt;const gt={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91};u.OPS=gt;const kt={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};u.PasswordResponses=kt;let At=et.WARNINGS;function Ft(It){Number.isInteger(It)&&(At=It)}function Kt(){return At}function nt(It){At>=et.INFOS&&console.log(`Info: ${It}`)}function Y(It){At>=et.WARNINGS&&console.log(`Warning: ${It}`)}function N(It){throw new Error(It)}function w(It,vt){It||N(vt)}function R(It){switch(It?.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function g(It,vt=null,st=null){if(!It)return null;try{if(st&&typeof It=="string"&&(st.addDefaultProtocol&&It.startsWith("www.")&&It.match(/\./g)?.length>=2&&(It=`http://${It}`),st.tryConvertEncoding))try{It=le(It)}catch{}const Jt=vt?new URL(It,vt):new URL(It);if(R(Jt))return Jt}catch{}return null}function L(It,vt,st,Jt=!1){return Object.defineProperty(It,vt,{value:st,enumerable:!Jt,configurable:!0,writable:!1}),st}const H=(function(){function vt(st,Jt){this.constructor===vt&&N("Cannot initialize BaseException."),this.message=st,this.name=Jt}return vt.prototype=new Error,vt.constructor=vt,vt})();u.BaseException=H;class J extends H{constructor(vt,st){super(vt,"PasswordException"),this.code=st}}u.PasswordException=J;class K extends H{constructor(vt,st){super(vt,"UnknownErrorException"),this.details=st}}u.UnknownErrorException=K;class m extends H{constructor(vt){super(vt,"InvalidPDFException")}}u.InvalidPDFException=m;class k extends H{constructor(vt){super(vt,"MissingPDFException")}}u.MissingPDFException=k;class I extends H{constructor(vt,st){super(vt,"UnexpectedResponseException"),this.status=st}}u.UnexpectedResponseException=I;class W extends H{constructor(vt){super(vt,"FormatError")}}u.FormatError=W;class G extends H{constructor(vt){super(vt,"AbortException")}}u.AbortException=G;function it(It){(typeof It!="object"||It?.length===void 0)&&N("Invalid argument for bytesToString");const vt=It.length,st=8192;if(vt<st)return String.fromCharCode.apply(null,It);const Jt=[];for(let me=0;me<vt;me+=st){const Ye=Math.min(me+st,vt),Xt=It.subarray(me,Ye);Jt.push(String.fromCharCode.apply(null,Xt))}return Jt.join("")}function at(It){typeof It!="string"&&N("Invalid argument for stringToBytes");const vt=It.length,st=new Uint8Array(vt);for(let Jt=0;Jt<vt;++Jt)st[Jt]=It.charCodeAt(Jt)&255;return st}function Ct(It){return String.fromCharCode(It>>24&255,It>>16&255,It>>8&255,It&255)}function Yt(It){return Object.keys(It).length}function Rt(It){const vt=Object.create(null);for(const[st,Jt]of It)vt[st]=Jt;return vt}function Dt(){const It=new Uint8Array(4);return It[0]=1,new Uint32Array(It.buffer,0,1)[0]===1}function Pt(){try{return new Function(""),!0}catch{return!1}}class Lt{static get isLittleEndian(){return L(this,"isLittleEndian",Dt())}static get isEvalSupported(){return L(this,"isEvalSupported",Pt())}static get isOffscreenCanvasSupported(){return L(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get platform(){return typeof navigator>"u"?L(this,"platform",{isWin:!1,isMac:!1}):L(this,"platform",{isWin:navigator.platform.includes("Win"),isMac:navigator.platform.includes("Mac")})}static get isCSSRoundSupported(){return L(this,"isCSSRoundSupported",globalThis.CSS?.supports?.("width: round(1.5px, 1px)"))}}u.FeatureTest=Lt;const Ut=[...Array(256).keys()].map(It=>It.toString(16).padStart(2,"0"));class Qt{static makeHexColor(vt,st,Jt){return`#${Ut[vt]}${Ut[st]}${Ut[Jt]}`}static scaleMinMax(vt,st){let Jt;vt[0]?(vt[0]<0&&(Jt=st[0],st[0]=st[1],st[1]=Jt),st[0]*=vt[0],st[1]*=vt[0],vt[3]<0&&(Jt=st[2],st[2]=st[3],st[3]=Jt),st[2]*=vt[3],st[3]*=vt[3]):(Jt=st[0],st[0]=st[2],st[2]=Jt,Jt=st[1],st[1]=st[3],st[3]=Jt,vt[1]<0&&(Jt=st[2],st[2]=st[3],st[3]=Jt),st[2]*=vt[1],st[3]*=vt[1],vt[2]<0&&(Jt=st[0],st[0]=st[1],st[1]=Jt),st[0]*=vt[2],st[1]*=vt[2]),st[0]+=vt[4],st[1]+=vt[4],st[2]+=vt[5],st[3]+=vt[5]}static transform(vt,st){return[vt[0]*st[0]+vt[2]*st[1],vt[1]*st[0]+vt[3]*st[1],vt[0]*st[2]+vt[2]*st[3],vt[1]*st[2]+vt[3]*st[3],vt[0]*st[4]+vt[2]*st[5]+vt[4],vt[1]*st[4]+vt[3]*st[5]+vt[5]]}static applyTransform(vt,st){const Jt=vt[0]*st[0]+vt[1]*st[2]+st[4],me=vt[0]*st[1]+vt[1]*st[3]+st[5];return[Jt,me]}static applyInverseTransform(vt,st){const Jt=st[0]*st[3]-st[1]*st[2],me=(vt[0]*st[3]-vt[1]*st[2]+st[2]*st[5]-st[4]*st[3])/Jt,Ye=(-vt[0]*st[1]+vt[1]*st[0]+st[4]*st[1]-st[5]*st[0])/Jt;return[me,Ye]}static getAxialAlignedBoundingBox(vt,st){const Jt=this.applyTransform(vt,st),me=this.applyTransform(vt.slice(2,4),st),Ye=this.applyTransform([vt[0],vt[3]],st),Xt=this.applyTransform([vt[2],vt[1]],st);return[Math.min(Jt[0],me[0],Ye[0],Xt[0]),Math.min(Jt[1],me[1],Ye[1],Xt[1]),Math.max(Jt[0],me[0],Ye[0],Xt[0]),Math.max(Jt[1],me[1],Ye[1],Xt[1])]}static inverseTransform(vt){const st=vt[0]*vt[3]-vt[1]*vt[2];return[vt[3]/st,-vt[1]/st,-vt[2]/st,vt[0]/st,(vt[2]*vt[5]-vt[4]*vt[3])/st,(vt[4]*vt[1]-vt[5]*vt[0])/st]}static singularValueDecompose2dScale(vt){const st=[vt[0],vt[2],vt[1],vt[3]],Jt=vt[0]*st[0]+vt[1]*st[2],me=vt[0]*st[1]+vt[1]*st[3],Ye=vt[2]*st[0]+vt[3]*st[2],Xt=vt[2]*st[1]+vt[3]*st[3],jn=(Jt+Xt)/2,Nn=Math.sqrt((Jt+Xt)**2-4*(Jt*Xt-Ye*me))/2,cn=jn+Nn||1,Qe=jn-Nn||1;return[Math.sqrt(cn),Math.sqrt(Qe)]}static normalizeRect(vt){const st=vt.slice(0);return vt[0]>vt[2]&&(st[0]=vt[2],st[2]=vt[0]),vt[1]>vt[3]&&(st[1]=vt[3],st[3]=vt[1]),st}static intersect(vt,st){const Jt=Math.max(Math.min(vt[0],vt[2]),Math.min(st[0],st[2])),me=Math.min(Math.max(vt[0],vt[2]),Math.max(st[0],st[2]));if(Jt>me)return null;const Ye=Math.max(Math.min(vt[1],vt[3]),Math.min(st[1],st[3])),Xt=Math.min(Math.max(vt[1],vt[3]),Math.max(st[1],st[3]));return Ye>Xt?null:[Jt,Ye,me,Xt]}static bezierBoundingBox(vt,st,Jt,me,Ye,Xt,jn,Nn){const cn=[],Qe=[[],[]];let An,Zn,Ni,ke,gn,vi,di,Re;for(let hi=0;hi<2;++hi){if(hi===0?(Zn=6*vt-12*Jt+6*Ye,An=-3*vt+9*Jt-9*Ye+3*jn,Ni=3*Jt-3*vt):(Zn=6*st-12*me+6*Xt,An=-3*st+9*me-9*Xt+3*Nn,Ni=3*me-3*st),Math.abs(An)<1e-12){if(Math.abs(Zn)<1e-12)continue;ke=-Ni/Zn,0<ke&&ke<1&&cn.push(ke);continue}di=Zn*Zn-4*Ni*An,Re=Math.sqrt(di),!(di<0)&&(gn=(-Zn+Re)/(2*An),0<gn&&gn<1&&cn.push(gn),vi=(-Zn-Re)/(2*An),0<vi&&vi<1&&cn.push(vi))}let Ie=cn.length,un;const On=Ie;for(;Ie--;)ke=cn[Ie],un=1-ke,Qe[0][Ie]=un*un*un*vt+3*un*un*ke*Jt+3*un*ke*ke*Ye+ke*ke*ke*jn,Qe[1][Ie]=un*un*un*st+3*un*un*ke*me+3*un*ke*ke*Xt+ke*ke*ke*Nn;return Qe[0][On]=vt,Qe[1][On]=st,Qe[0][On+1]=jn,Qe[1][On+1]=Nn,Qe[0].length=Qe[1].length=On+2,[Math.min(...Qe[0]),Math.min(...Qe[1]),Math.max(...Qe[0]),Math.max(...Qe[1])]}}u.Util=Qt;const $t=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,728,711,710,729,733,731,730,732,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8226,8224,8225,8230,8212,8211,402,8260,8249,8250,8722,8240,8222,8220,8221,8216,8217,8218,8482,64257,64258,321,338,352,376,381,305,322,339,353,382,0,8364];function se(It){if(It[0]>=""){let st;if(It[0]===""&&It[1]===""?st="utf-16be":It[0]===""&&It[1]===""?st="utf-16le":It[0]===""&&It[1]===""&&It[2]===""&&(st="utf-8"),st)try{const Jt=new TextDecoder(st,{fatal:!0}),me=at(It);return Jt.decode(me)}catch(Jt){Y(`stringToPDFString: "${Jt}".`)}}const vt=[];for(let st=0,Jt=It.length;st<Jt;st++){const me=$t[It.charCodeAt(st)];vt.push(me?String.fromCharCode(me):It.charAt(st))}return vt.join("")}function le(It){return decodeURIComponent(escape(It))}function oe(It){return unescape(encodeURIComponent(It))}function _e(It){return typeof It=="object"&&It?.byteLength!==void 0}function je(It,vt){if(It.length!==vt.length)return!1;for(let st=0,Jt=It.length;st<Jt;st++)if(It[st]!==vt[st])return!1;return!0}function Ue(It=new Date){return[It.getUTCFullYear().toString(),(It.getUTCMonth()+1).toString().padStart(2,"0"),It.getUTCDate().toString().padStart(2,"0"),It.getUTCHours().toString().padStart(2,"0"),It.getUTCMinutes().toString().padStart(2,"0"),It.getUTCSeconds().toString().padStart(2,"0")].join("")}class Cn{#t=!1;constructor(){this.promise=new Promise((vt,st)=>{this.resolve=Jt=>{this.#t=!0,vt(Jt)},this.reject=Jt=>{this.#t=!0,st(Jt)}})}get settled(){return this.#t}}u.PromiseCapability=Cn;let We=null,En=null;function xi(It){return We||(We=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,En=new Map([["","t"]])),It.replaceAll(We,(vt,st,Jt)=>st?st.normalize("NFKC"):En.get(Jt))}function ui(){if(typeof crypto<"u"&&typeof crypto?.randomUUID=="function")return crypto.randomUUID();const It=new Uint8Array(32);if(typeof crypto<"u"&&typeof crypto?.getRandomValues=="function")crypto.getRandomValues(It);else for(let vt=0;vt<32;vt++)It[vt]=Math.floor(Math.random()*255);return it(It)}const Qn="pdfjs_internal_id_";u.AnnotationPrefix=Qn}),((__unused_webpack_module,exports$1,__w_pdfjs_require__)=>{Object.defineProperty(exports$1,"__esModule",{value:!0}),exports$1.RenderTask=exports$1.PDFWorkerUtil=exports$1.PDFWorker=exports$1.PDFPageProxy=exports$1.PDFDocumentProxy=exports$1.PDFDocumentLoadingTask=exports$1.PDFDataRangeTransport=exports$1.LoopbackPort=exports$1.DefaultStandardFontDataFactory=exports$1.DefaultFilterFactory=exports$1.DefaultCanvasFactory=exports$1.DefaultCMapReaderFactory=void 0,Object.defineProperty(exports$1,"SVGGraphics",{enumerable:!0,get:function(){return _displaySvg.SVGGraphics}}),exports$1.build=void 0,exports$1.getDocument=getDocument,exports$1.version=void 0;var _util=__w_pdfjs_require__(1),_annotation_storage=__w_pdfjs_require__(3),_display_utils=__w_pdfjs_require__(6),_font_loader=__w_pdfjs_require__(9),_displayNode_utils=__w_pdfjs_require__(10),_canvas=__w_pdfjs_require__(11),_worker_options=__w_pdfjs_require__(14),_message_handler=__w_pdfjs_require__(15),_metadata=__w_pdfjs_require__(16),_optional_content_config=__w_pdfjs_require__(17),_transport_stream=__w_pdfjs_require__(18),_displayFetch_stream=__w_pdfjs_require__(19),_displayNetwork=__w_pdfjs_require__(22),_displayNode_stream=__w_pdfjs_require__(23),_displaySvg=__w_pdfjs_require__(24),_xfa_text=__w_pdfjs_require__(25);const DEFAULT_RANGE_CHUNK_SIZE=65536,RENDERING_CANCELLED_TIMEOUT=100,DELAYED_CLEANUP_TIMEOUT=5e3,DefaultCanvasFactory=_util.isNodeJS?_displayNode_utils.NodeCanvasFactory:_display_utils.DOMCanvasFactory;exports$1.DefaultCanvasFactory=DefaultCanvasFactory;const DefaultCMapReaderFactory=_util.isNodeJS?_displayNode_utils.NodeCMapReaderFactory:_display_utils.DOMCMapReaderFactory;exports$1.DefaultCMapReaderFactory=DefaultCMapReaderFactory;const DefaultFilterFactory=_util.isNodeJS?_displayNode_utils.NodeFilterFactory:_display_utils.DOMFilterFactory;exports$1.DefaultFilterFactory=DefaultFilterFactory;const DefaultStandardFontDataFactory=_util.isNodeJS?_displayNode_utils.NodeStandardFontDataFactory:_display_utils.DOMStandardFontDataFactory;exports$1.DefaultStandardFontDataFactory=DefaultStandardFontDataFactory;function getDocument(_){if(typeof _=="string"||_ instanceof URL?_={url:_}:(0,_util.isArrayBuffer)(_)&&(_={data:_}),typeof _!="object")throw new Error("Invalid parameter in getDocument, need parameter object.");if(!_.url&&!_.data&&!_.range)throw new Error("Invalid parameter object: need either .data, .range or .url");const u=new PDFDocumentLoadingTask,{docId:M}=u,o=_.url?getUrlProp(_.url):null,E=_.data?getDataProp(_.data):null,O=_.httpHeaders||null,D=_.withCredentials===!0,B=_.password??null,F=_.range instanceof PDFDataRangeTransport?_.range:null,d=Number.isInteger(_.rangeChunkSize)&&_.rangeChunkSize>0?_.rangeChunkSize:DEFAULT_RANGE_CHUNK_SIZE;let l=_.worker instanceof PDFWorker?_.worker:null;const h=_.verbosity,b=typeof _.docBaseUrl=="string"&&!(0,_display_utils.isDataScheme)(_.docBaseUrl)?_.docBaseUrl:null,y=typeof _.cMapUrl=="string"?_.cMapUrl:null,f=_.cMapPacked!==!1,A=_.CMapReaderFactory||DefaultCMapReaderFactory,j=typeof _.standardFontDataUrl=="string"?_.standardFontDataUrl:null,x=_.StandardFontDataFactory||DefaultStandardFontDataFactory,U=_.stopAtErrors!==!0,Z=Number.isInteger(_.maxImageSize)&&_.maxImageSize>-1?_.maxImageSize:-1,V=_.isEvalSupported!==!1,T=typeof _.isOffscreenCanvasSupported=="boolean"?_.isOffscreenCanvasSupported:!_util.isNodeJS,z=Number.isInteger(_.canvasMaxAreaInBytes)?_.canvasMaxAreaInBytes:-1,$=typeof _.disableFontFace=="boolean"?_.disableFontFace:_util.isNodeJS,rt=_.fontExtraProperties===!0,et=_.enableXfa===!0,yt=_.ownerDocument||globalThis.document,gt=_.disableRange===!0,kt=_.disableStream===!0,At=_.disableAutoFetch===!0,Ft=_.pdfBug===!0,Kt=F?F.length:_.length??NaN,nt=typeof _.useSystemFonts=="boolean"?_.useSystemFonts:!_util.isNodeJS&&!$,Y=typeof _.useWorkerFetch=="boolean"?_.useWorkerFetch:A===_display_utils.DOMCMapReaderFactory&&x===_display_utils.DOMStandardFontDataFactory&&y&&j&&(0,_display_utils.isValidFetchUrl)(y,document.baseURI)&&(0,_display_utils.isValidFetchUrl)(j,document.baseURI),N=_.canvasFactory||new DefaultCanvasFactory({ownerDocument:yt}),w=_.filterFactory||new DefaultFilterFactory({docId:M,ownerDocument:yt}),R=null;(0,_util.setVerbosityLevel)(h);const g={canvasFactory:N,filterFactory:w};if(Y||(g.cMapReaderFactory=new A({baseUrl:y,isCompressed:f}),g.standardFontDataFactory=new x({baseUrl:j})),!l){const J={verbosity:h,port:_worker_options.GlobalWorkerOptions.workerPort};l=J.port?PDFWorker.fromPort(J):new PDFWorker(J),u._worker=l}const L={docId:M,apiVersion:"3.11.174",data:E,password:B,disableAutoFetch:At,rangeChunkSize:d,length:Kt,docBaseUrl:b,enableXfa:et,evaluatorOptions:{maxImageSize:Z,disableFontFace:$,ignoreErrors:U,isEvalSupported:V,isOffscreenCanvasSupported:T,canvasMaxAreaInBytes:z,fontExtraProperties:rt,useSystemFonts:nt,cMapUrl:Y?y:null,standardFontDataUrl:Y?j:null}},H={ignoreErrors:U,isEvalSupported:V,disableFontFace:$,fontExtraProperties:rt,enableXfa:et,ownerDocument:yt,disableAutoFetch:At,pdfBug:Ft,styleElement:R};return l.promise.then(function(){if(u.destroyed)throw new Error("Loading aborted");const J=_fetchDocument(l,L),K=new Promise(function(m){let k;F?k=new _transport_stream.PDFDataTransportStream({length:Kt,initialData:F.initialData,progressiveDone:F.progressiveDone,contentDispositionFilename:F.contentDispositionFilename,disableRange:gt,disableStream:kt},F):E||(k=(W=>_util.isNodeJS?new _displayNode_stream.PDFNodeStream(W):(0,_display_utils.isValidFetchUrl)(W.url)?new _displayFetch_stream.PDFFetchStream(W):new _displayNetwork.PDFNetworkStream(W))({url:o,length:Kt,httpHeaders:O,withCredentials:D,rangeChunkSize:d,disableRange:gt,disableStream:kt})),m(k)});return Promise.all([J,K]).then(function([m,k]){if(u.destroyed)throw new Error("Loading aborted");const I=new _message_handler.MessageHandler(M,m,l.port),W=new WorkerTransport(I,u,k,H,g);u._transport=W,I.send("Ready",null)})}).catch(u._capability.reject),u}async function _fetchDocument(_,u){if(_.destroyed)throw new Error("Worker was destroyed");const M=await _.messageHandler.sendWithPromise("GetDocRequest",u,u.data?[u.data.buffer]:null);if(_.destroyed)throw new Error("Worker was destroyed");return M}function getUrlProp(_){if(_ instanceof URL)return _.href;try{return new URL(_,window.location).href}catch{if(_util.isNodeJS&&typeof _=="string")return _}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function getDataProp(_){if(_util.isNodeJS&&typeof Buffer<"u"&&_ instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(_ instanceof Uint8Array&&_.byteLength===_.buffer.byteLength)return _;if(typeof _=="string")return(0,_util.stringToBytes)(_);if(typeof _=="object"&&!isNaN(_?.length)||(0,_util.isArrayBuffer)(_))return new Uint8Array(_);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}class PDFDocumentLoadingTask{static#t=0;constructor(){this._capability=new _util.PromiseCapability,this._transport=null,this._worker=null,this.docId=`d${PDFDocumentLoadingTask.#t++}`,this.destroyed=!1,this.onPassword=null,this.onProgress=null}get promise(){return this._capability.promise}async destroy(){this.destroyed=!0;try{this._worker?.port&&(this._worker._pendingDestroy=!0),await this._transport?.destroy()}catch(u){throw this._worker?.port&&delete this._worker._pendingDestroy,u}this._transport=null,this._worker&&(this._worker.destroy(),this._worker=null)}}exports$1.PDFDocumentLoadingTask=PDFDocumentLoadingTask;class PDFDataRangeTransport{constructor(u,M,o=!1,E=null){this.length=u,this.initialData=M,this.progressiveDone=o,this.contentDispositionFilename=E,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=new _util.PromiseCapability}addRangeListener(u){this._rangeListeners.push(u)}addProgressListener(u){this._progressListeners.push(u)}addProgressiveReadListener(u){this._progressiveReadListeners.push(u)}addProgressiveDoneListener(u){this._progressiveDoneListeners.push(u)}onDataRange(u,M){for(const o of this._rangeListeners)o(u,M)}onDataProgress(u,M){this._readyCapability.promise.then(()=>{for(const o of this._progressListeners)o(u,M)})}onDataProgressiveRead(u){this._readyCapability.promise.then(()=>{for(const M of this._progressiveReadListeners)M(u)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const u of this._progressiveDoneListeners)u()})}transportReady(){this._readyCapability.resolve()}requestDataRange(u,M){(0,_util.unreachable)("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}exports$1.PDFDataRangeTransport=PDFDataRangeTransport;class PDFDocumentProxy{constructor(u,M){this._pdfInfo=u,this._transport=M,Object.defineProperty(this,"getJavaScript",{value:()=>((0,_display_utils.deprecated)("`PDFDocumentProxy.getJavaScript`, please use `PDFDocumentProxy.getJSActions` instead."),this.getJSActions().then(o=>{if(!o)return o;const E=[];for(const O in o)E.push(...o[O]);return E}))})}get annotationStorage(){return this._transport.annotationStorage}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return(0,_util.shadow)(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(u){return this._transport.getPage(u)}getPageIndex(u){return this._transport.getPageIndex(u)}getDestinations(){return this._transport.getDestinations()}getDestination(u){return this._transport.getDestination(u)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig(){return this._transport.getOptionalContentConfig()}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(u=!1){return this._transport.startCleanup(u||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}exports$1.PDFDocumentProxy=PDFDocumentProxy;class PDFPageProxy{#t=null;#e=!1;constructor(u,M,o,E=!1){this._pageIndex=u,this._pageInfo=M,this._transport=o,this._stats=E?new _display_utils.StatTimer:null,this._pdfBug=E,this.commonObjs=o.commonObjs,this.objs=new PDFObjects,this._maybeCleanupAfterRender=!1,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:u,rotation:M=this.rotate,offsetX:o=0,offsetY:E=0,dontFlip:O=!1}={}){return new _display_utils.PageViewport({viewBox:this.view,scale:u,rotation:M,offsetX:o,offsetY:E,dontFlip:O})}getAnnotations({intent:u="display"}={}){const M=this._transport.getRenderingIntent(u);return this._transport.getAnnotations(this._pageIndex,M.renderingIntent)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return(0,_util.shadow)(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){return this._transport._htmlForXfa?.children[this._pageIndex]||null}render({canvasContext:u,viewport:M,intent:o="display",annotationMode:E=_util.AnnotationMode.ENABLE,transform:O=null,background:D=null,optionalContentConfigPromise:B=null,annotationCanvasMap:F=null,pageColors:d=null,printAnnotationStorage:l=null}){this._stats?.time("Overall");const h=this._transport.getRenderingIntent(o,E,l);this.#e=!1,this.#i(),B||(B=this._transport.getOptionalContentConfig());let b=this._intentStates.get(h.cacheKey);b||(b=Object.create(null),this._intentStates.set(h.cacheKey,b)),b.streamReaderCancelTimeout&&(clearTimeout(b.streamReaderCancelTimeout),b.streamReaderCancelTimeout=null);const y=!!(h.renderingIntent&_util.RenderingIntentFlag.PRINT);b.displayReadyCapability||(b.displayReadyCapability=new _util.PromiseCapability,b.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(h));const f=x=>{b.renderTasks.delete(A),(this._maybeCleanupAfterRender||y)&&(this.#e=!0),this.#n(!y),x?(A.capability.reject(x),this._abortOperatorList({intentState:b,reason:x instanceof Error?x:new Error(x)})):A.capability.resolve(),this._stats?.timeEnd("Rendering"),this._stats?.timeEnd("Overall")},A=new InternalRenderTask({callback:f,params:{canvasContext:u,viewport:M,transform:O,background:D},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:F,operatorList:b.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!y,pdfBug:this._pdfBug,pageColors:d});(b.renderTasks||=new Set).add(A);const j=A.task;return Promise.all([b.displayReadyCapability.promise,B]).then(([x,U])=>{if(this.destroyed){f();return}this._stats?.time("Rendering"),A.initializeGraphics({transparency:x,optionalContentConfig:U}),A.operatorListChanged()}).catch(f),j}getOperatorList({intent:u="display",annotationMode:M=_util.AnnotationMode.ENABLE,printAnnotationStorage:o=null}={}){function E(){D.operatorList.lastChunk&&(D.opListReadCapability.resolve(D.operatorList),D.renderTasks.delete(B))}const O=this._transport.getRenderingIntent(u,M,o,!0);let D=this._intentStates.get(O.cacheKey);D||(D=Object.create(null),this._intentStates.set(O.cacheKey,D));let B;return D.opListReadCapability||(B=Object.create(null),B.operatorListChanged=E,D.opListReadCapability=new _util.PromiseCapability,(D.renderTasks||=new Set).add(B),D.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(O)),D.opListReadCapability.promise}streamTextContent({includeMarkedContent:u=!1,disableNormalization:M=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:u===!0,disableNormalization:M===!0},{highWaterMark:100,size(E){return E.items.length}})}getTextContent(u={}){if(this._transport._htmlForXfa)return this.getXfa().then(o=>_xfa_text.XfaText.textContent(o));const M=this.streamTextContent(u);return new Promise(function(o,E){function O(){D.read().then(function({value:F,done:d}){if(d){o(B);return}Object.assign(B.styles,F.styles),B.items.push(...F.items),O()},E)}const D=M.getReader(),B={items:[],styles:Object.create(null)};O()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const u=[];for(const M of this._intentStates.values())if(this._abortOperatorList({intentState:M,reason:new Error("Page was destroyed."),force:!0}),!M.opListReadCapability)for(const o of M.renderTasks)u.push(o.completed),o.cancel();return this.objs.clear(),this.#e=!1,this.#i(),Promise.all(u)}cleanup(u=!1){this.#e=!0;const M=this.#n(!1);return u&&M&&(this._stats&&=new _display_utils.StatTimer),M}#n(u=!1){if(this.#i(),!this.#e||this.destroyed)return!1;if(u)return this.#t=setTimeout(()=>{this.#t=null,this.#n(!1)},DELAYED_CLEANUP_TIMEOUT),!1;for(const{renderTasks:M,operatorList:o}of this._intentStates.values())if(M.size>0||!o.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),this.#e=!1,!0}#i(){this.#t&&(clearTimeout(this.#t),this.#t=null)}_startRenderPage(u,M){const o=this._intentStates.get(M);o&&(this._stats?.timeEnd("Page Request"),o.displayReadyCapability?.resolve(u))}_renderPageChunk(u,M){for(let o=0,E=u.length;o<E;o++)M.operatorList.fnArray.push(u.fnArray[o]),M.operatorList.argsArray.push(u.argsArray[o]);M.operatorList.lastChunk=u.lastChunk,M.operatorList.separateAnnots=u.separateAnnots;for(const o of M.renderTasks)o.operatorListChanged();u.lastChunk&&this.#n(!0)}_pumpOperatorList({renderingIntent:u,cacheKey:M,annotationStorageSerializable:o}){const{map:E,transfers:O}=o,B=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:u,cacheKey:M,annotationStorage:E},O).getReader(),F=this._intentStates.get(M);F.streamReader=B;const d=()=>{B.read().then(({value:l,done:h})=>{if(h){F.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(l,F),d())},l=>{if(F.streamReader=null,!this._transport.destroyed){if(F.operatorList){F.operatorList.lastChunk=!0;for(const h of F.renderTasks)h.operatorListChanged();this.#n(!0)}if(F.displayReadyCapability)F.displayReadyCapability.reject(l);else if(F.opListReadCapability)F.opListReadCapability.reject(l);else throw l}})};d()}_abortOperatorList({intentState:u,reason:M,force:o=!1}){if(u.streamReader){if(u.streamReaderCancelTimeout&&(clearTimeout(u.streamReaderCancelTimeout),u.streamReaderCancelTimeout=null),!o){if(u.renderTasks.size>0)return;if(M instanceof _display_utils.RenderingCancelledException){let E=RENDERING_CANCELLED_TIMEOUT;M.extraDelay>0&&M.extraDelay<1e3&&(E+=M.extraDelay),u.streamReaderCancelTimeout=setTimeout(()=>{u.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:u,reason:M,force:!0})},E);return}}if(u.streamReader.cancel(new _util.AbortException(M.message)).catch(()=>{}),u.streamReader=null,!this._transport.destroyed){for(const[E,O]of this._intentStates)if(O===u){this._intentStates.delete(E);break}this.cleanup()}}}get stats(){return this._stats}}exports$1.PDFPageProxy=PDFPageProxy;class LoopbackPort{#t=new Set;#e=Promise.resolve();postMessage(u,M){const o={data:structuredClone(u,M?{transfer:M}:null)};this.#e.then(()=>{for(const E of this.#t)E.call(this,o)})}addEventListener(u,M){this.#t.add(M)}removeEventListener(u,M){this.#t.delete(M)}terminate(){this.#t.clear()}}exports$1.LoopbackPort=LoopbackPort;const PDFWorkerUtil={isWorkerDisabled:!1,fallbackWorkerSrc:null,fakeWorkerId:0};exports$1.PDFWorkerUtil=PDFWorkerUtil;{if(_util.isNodeJS&&typeof commonjsRequire=="function")PDFWorkerUtil.isWorkerDisabled=!0,PDFWorkerUtil.fallbackWorkerSrc="./pdf.worker.js";else if(typeof document=="object"){const _=document?.currentScript?.src;_&&(PDFWorkerUtil.fallbackWorkerSrc=_.replace(/(\.(?:min\.)?js)(\?.*)?$/i,".worker$1$2"))}PDFWorkerUtil.isSameOrigin=function(_,u){let M;try{if(M=new URL(_),!M.origin||M.origin==="null")return!1}catch{return!1}const o=new URL(u,M);return M.origin===o.origin},PDFWorkerUtil.createCDNWrapper=function(_){const u=`importScripts("${_}");`;return URL.createObjectURL(new Blob([u]))}}class PDFWorker{static#workerPorts;constructor({name:_=null,port:u=null,verbosity:M=(0,_util.getVerbosityLevel)()}={}){if(this.name=_,this.destroyed=!1,this.verbosity=M,this._readyCapability=new _util.PromiseCapability,this._port=null,this._webWorker=null,this._messageHandler=null,u){if(PDFWorker.#workerPorts?.has(u))throw new Error("Cannot use more than one PDFWorker per port.");(PDFWorker.#workerPorts||=new WeakMap).set(u,this),this._initializeFromPort(u);return}this._initialize()}get promise(){return this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(_){this._port=_,this._messageHandler=new _message_handler.MessageHandler("main","worker",_),this._messageHandler.on("ready",function(){}),this._readyCapability.resolve(),this._messageHandler.send("configure",{verbosity:this.verbosity})}_initialize(){if(!PDFWorkerUtil.isWorkerDisabled&&!PDFWorker._mainThreadWorkerMessageHandler){let{workerSrc:_}=PDFWorker;try{PDFWorkerUtil.isSameOrigin(window.location.href,_)||(_=PDFWorkerUtil.createCDNWrapper(new URL(_,window.location).href));const u=new Worker(_),M=new _message_handler.MessageHandler("main","worker",u),o=()=>{u.removeEventListener("error",E),M.destroy(),u.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},E=()=>{this._webWorker||o()};u.addEventListener("error",E),M.on("test",D=>{if(u.removeEventListener("error",E),this.destroyed){o();return}D?(this._messageHandler=M,this._port=u,this._webWorker=u,this._readyCapability.resolve(),M.send("configure",{verbosity:this.verbosity})):(this._setupFakeWorker(),M.destroy(),u.terminate())}),M.on("ready",D=>{if(u.removeEventListener("error",E),this.destroyed){o();return}try{O()}catch{this._setupFakeWorker()}});const O=()=>{const D=new Uint8Array;M.send("test",D,[D.buffer])};O();return}catch{(0,_util.info)("The worker has been disabled.")}}this._setupFakeWorker()}_setupFakeWorker(){PDFWorkerUtil.isWorkerDisabled||((0,_util.warn)("Setting up fake worker."),PDFWorkerUtil.isWorkerDisabled=!0),PDFWorker._setupFakeWorkerGlobal.then(_=>{if(this.destroyed){this._readyCapability.reject(new Error("Worker was destroyed"));return}const u=new LoopbackPort;this._port=u;const M=`fake${PDFWorkerUtil.fakeWorkerId++}`,o=new _message_handler.MessageHandler(M+"_worker",M,u);_.setup(o,u);const E=new _message_handler.MessageHandler(M,M+"_worker",u);this._messageHandler=E,this._readyCapability.resolve(),E.send("configure",{verbosity:this.verbosity})}).catch(_=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${_.message}".`))})}destroy(){this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),PDFWorker.#workerPorts?.delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}static fromPort(_){if(!_?.port)throw new Error("PDFWorker.fromPort - invalid method signature.");const u=this.#workerPorts?.get(_.port);if(u){if(u._pendingDestroy)throw new Error("PDFWorker.fromPort - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return u}return new PDFWorker(_)}static get workerSrc(){if(_worker_options.GlobalWorkerOptions.workerSrc)return _worker_options.GlobalWorkerOptions.workerSrc;if(PDFWorkerUtil.fallbackWorkerSrc!==null)return _util.isNodeJS||(0,_display_utils.deprecated)('No "GlobalWorkerOptions.workerSrc" specified.'),PDFWorkerUtil.fallbackWorkerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _mainThreadWorkerMessageHandler(){try{return globalThis.pdfjsWorker?.WorkerMessageHandler||null}catch{return null}}static get _setupFakeWorkerGlobal(){const loader=async()=>{const mainWorkerMessageHandler=this._mainThreadWorkerMessageHandler;if(mainWorkerMessageHandler)return mainWorkerMessageHandler;if(_util.isNodeJS&&typeof commonjsRequire=="function"){const worker=eval("require")(this.workerSrc);return worker.WorkerMessageHandler}return await(0,_display_utils.loadScript)(this.workerSrc),window.pdfjsWorker.WorkerMessageHandler};return(0,_util.shadow)(this,"_setupFakeWorkerGlobal",loader())}}exports$1.PDFWorker=PDFWorker;class WorkerTransport{#t=new Map;#e=new Map;#n=new Map;#i=null;constructor(u,M,o,E,O){this.messageHandler=u,this.loadingTask=M,this.commonObjs=new PDFObjects,this.fontLoader=new _font_loader.FontLoader({ownerDocument:E.ownerDocument,styleElement:E.styleElement}),this._params=E,this.canvasFactory=O.canvasFactory,this.filterFactory=O.filterFactory,this.cMapReaderFactory=O.cMapReaderFactory,this.standardFontDataFactory=O.standardFontDataFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=o,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=new _util.PromiseCapability,this.setupMessageHandler()}#o(u,M=null){const o=this.#t.get(u);if(o)return o;const E=this.messageHandler.sendWithPromise(u,M);return this.#t.set(u,E),E}get annotationStorage(){return(0,_util.shadow)(this,"annotationStorage",new _annotation_storage.AnnotationStorage)}getRenderingIntent(u,M=_util.AnnotationMode.ENABLE,o=null,E=!1){let O=_util.RenderingIntentFlag.DISPLAY,D=_annotation_storage.SerializableEmpty;switch(u){case"any":O=_util.RenderingIntentFlag.ANY;break;case"display":break;case"print":O=_util.RenderingIntentFlag.PRINT;break;default:(0,_util.warn)(`getRenderingIntent - invalid intent: ${u}`)}switch(M){case _util.AnnotationMode.DISABLE:O+=_util.RenderingIntentFlag.ANNOTATIONS_DISABLE;break;case _util.AnnotationMode.ENABLE:break;case _util.AnnotationMode.ENABLE_FORMS:O+=_util.RenderingIntentFlag.ANNOTATIONS_FORMS;break;case _util.AnnotationMode.ENABLE_STORAGE:O+=_util.RenderingIntentFlag.ANNOTATIONS_STORAGE,D=(O&_util.RenderingIntentFlag.PRINT&&o instanceof _annotation_storage.PrintAnnotationStorage?o:this.annotationStorage).serializable;break;default:(0,_util.warn)(`getRenderingIntent - invalid annotationMode: ${M}`)}return E&&(O+=_util.RenderingIntentFlag.OPLIST),{renderingIntent:O,cacheKey:`${O}_${D.hash}`,annotationStorageSerializable:D}}destroy(){if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=new _util.PromiseCapability,this.#i?.reject(new Error("Worker was destroyed during onPassword callback"));const u=[];for(const o of this.#e.values())u.push(o._destroy());this.#e.clear(),this.#n.clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const M=this.messageHandler.sendWithPromise("Terminate",null);return u.push(M),Promise.all(u).then(()=>{this.commonObjs.clear(),this.fontLoader.clear(),this.#t.clear(),this.filterFactory.destroy(),this._networkStream?.cancelAllRequests(new _util.AbortException("Worker was terminated.")),this.messageHandler&&(this.messageHandler.destroy(),this.messageHandler=null),this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:u,loadingTask:M}=this;u.on("GetReader",(o,E)=>{(0,_util.assert)(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=O=>{this._lastProgress={loaded:O.loaded,total:O.total}},E.onPull=()=>{this._fullReader.read().then(function({value:O,done:D}){if(D){E.close();return}(0,_util.assert)(O instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),E.enqueue(new Uint8Array(O),1,[O])}).catch(O=>{E.error(O)})},E.onCancel=O=>{this._fullReader.cancel(O),E.ready.catch(D=>{if(!this.destroyed)throw D})}}),u.on("ReaderHeadersReady",o=>{const E=new _util.PromiseCapability,O=this._fullReader;return O.headersReady.then(()=>{(!O.isStreamingSupported||!O.isRangeSupported)&&(this._lastProgress&&M.onProgress?.(this._lastProgress),O.onProgress=D=>{M.onProgress?.({loaded:D.loaded,total:D.total})}),E.resolve({isStreamingSupported:O.isStreamingSupported,isRangeSupported:O.isRangeSupported,contentLength:O.contentLength})},E.reject),E.promise}),u.on("GetRangeReader",(o,E)=>{(0,_util.assert)(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const O=this._networkStream.getRangeReader(o.begin,o.end);if(!O){E.close();return}E.onPull=()=>{O.read().then(function({value:D,done:B}){if(B){E.close();return}(0,_util.assert)(D instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),E.enqueue(new Uint8Array(D),1,[D])}).catch(D=>{E.error(D)})},E.onCancel=D=>{O.cancel(D),E.ready.catch(B=>{if(!this.destroyed)throw B})}}),u.on("GetDoc",({pdfInfo:o})=>{this._numPages=o.numPages,this._htmlForXfa=o.htmlForXfa,delete o.htmlForXfa,M._capability.resolve(new PDFDocumentProxy(o,this))}),u.on("DocException",function(o){let E;switch(o.name){case"PasswordException":E=new _util.PasswordException(o.message,o.code);break;case"InvalidPDFException":E=new _util.InvalidPDFException(o.message);break;case"MissingPDFException":E=new _util.MissingPDFException(o.message);break;case"UnexpectedResponseException":E=new _util.UnexpectedResponseException(o.message,o.status);break;case"UnknownErrorException":E=new _util.UnknownErrorException(o.message,o.details);break;default:(0,_util.unreachable)("DocException - expected a valid Error.")}M._capability.reject(E)}),u.on("PasswordRequest",o=>{if(this.#i=new _util.PromiseCapability,M.onPassword){const E=O=>{O instanceof Error?this.#i.reject(O):this.#i.resolve({password:O})};try{M.onPassword(E,o.code)}catch(O){this.#i.reject(O)}}else this.#i.reject(new _util.PasswordException(o.message,o.code));return this.#i.promise}),u.on("DataLoaded",o=>{M.onProgress?.({loaded:o.length,total:o.length}),this.downloadInfoCapability.resolve(o)}),u.on("StartRenderPage",o=>{if(this.destroyed)return;this.#e.get(o.pageIndex)._startRenderPage(o.transparency,o.cacheKey)}),u.on("commonobj",([o,E,O])=>{if(!this.destroyed&&!this.commonObjs.has(o))switch(E){case"Font":const D=this._params;if("error"in O){const d=O.error;(0,_util.warn)(`Error during font loading: ${d}`),this.commonObjs.resolve(o,d);break}const B=D.pdfBug&&globalThis.FontInspector?.enabled?(d,l)=>globalThis.FontInspector.fontAdded(d,l):null,F=new _font_loader.FontFaceObject(O,{isEvalSupported:D.isEvalSupported,disableFontFace:D.disableFontFace,ignoreErrors:D.ignoreErrors,inspectFont:B});this.fontLoader.bind(F).catch(d=>u.sendWithPromise("FontFallback",{id:o})).finally(()=>{!D.fontExtraProperties&&F.data&&(F.data=null),this.commonObjs.resolve(o,F)});break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(o,O);break;default:throw new Error(`Got unknown common object type ${E}`)}}),u.on("obj",([o,E,O,D])=>{if(this.destroyed)return;const B=this.#e.get(E);if(!B.objs.has(o))switch(O){case"Image":if(B.objs.resolve(o,D),D){let F;if(D.bitmap){const{width:d,height:l}=D;F=d*l*4}else F=D.data?.length||0;F>_util.MAX_IMAGE_SIZE_TO_CACHE&&(B._maybeCleanupAfterRender=!0)}break;case"Pattern":B.objs.resolve(o,D);break;default:throw new Error(`Got unknown object type ${O}`)}}),u.on("DocProgress",o=>{this.destroyed||M.onProgress?.({loaded:o.loaded,total:o.total})}),u.on("FetchBuiltInCMap",o=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.cMapReaderFactory?this.cMapReaderFactory.fetch(o):Promise.reject(new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter."))),u.on("FetchStandardFontData",o=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.standardFontDataFactory?this.standardFontDataFactory.fetch(o):Promise.reject(new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.")))}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){this.annotationStorage.size<=0&&(0,_util.warn)("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:u,transfers:M}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:u,filename:this._fullReader?.filename??null},M).finally(()=>{this.annotationStorage.resetModified()})}getPage(u){if(!Number.isInteger(u)||u<=0||u>this._numPages)return Promise.reject(new Error("Invalid page request."));const M=u-1,o=this.#n.get(M);if(o)return o;const E=this.messageHandler.sendWithPromise("GetPage",{pageIndex:M}).then(O=>{if(this.destroyed)throw new Error("Transport destroyed");const D=new PDFPageProxy(M,O,this,this._params.pdfBug);return this.#e.set(M,D),D});return this.#n.set(M,E),E}getPageIndex(u){return typeof u!="object"||u===null||!Number.isInteger(u.num)||u.num<0||!Number.isInteger(u.gen)||u.gen<0?Promise.reject(new Error("Invalid pageIndex request.")):this.messageHandler.sendWithPromise("GetPageIndex",{num:u.num,gen:u.gen})}getAnnotations(u,M){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:u,intent:M})}getFieldObjects(){return this.#o("GetFieldObjects")}hasJSActions(){return this.#o("HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(u){return typeof u!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:u})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getDocJSActions(){return this.#o("GetDocJSActions")}getPageJSActions(u){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:u})}getStructTree(u){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:u})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(){return this.messageHandler.sendWithPromise("GetOptionalContentConfig",null).then(u=>new _optional_content_config.OptionalContentConfig(u))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const u="GetMetadata",M=this.#t.get(u);if(M)return M;const o=this.messageHandler.sendWithPromise(u,null).then(E=>({info:E[0],metadata:E[1]?new _metadata.Metadata(E[1]):null,contentDispositionFilename:this._fullReader?.filename??null,contentLength:this._fullReader?.contentLength??null}));return this.#t.set(u,o),o}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(u=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const M of this.#e.values())if(!M.cleanup())throw new Error(`startCleanup: Page ${M.pageNumber} is currently rendering.`);this.commonObjs.clear(),u||this.fontLoader.clear(),this.#t.clear(),this.filterFactory.destroy(!0)}}get loadingParams(){const{disableAutoFetch:u,enableXfa:M}=this._params;return(0,_util.shadow)(this,"loadingParams",{disableAutoFetch:u,enableXfa:M})}}class PDFObjects{#t=Object.create(null);#e(u){return this.#t[u]||={capability:new _util.PromiseCapability,data:null}}get(u,M=null){if(M){const E=this.#e(u);return E.capability.promise.then(()=>M(E.data)),null}const o=this.#t[u];if(!o?.capability.settled)throw new Error(`Requesting object that isn't resolved yet ${u}.`);return o.data}has(u){return this.#t[u]?.capability.settled||!1}resolve(u,M=null){const o=this.#e(u);o.data=M,o.capability.resolve()}clear(){for(const u in this.#t){const{data:M}=this.#t[u];M?.bitmap?.close()}this.#t=Object.create(null)}}class RenderTask{#t=null;constructor(u){this.#t=u,this.onContinue=null}get promise(){return this.#t.capability.promise}cancel(u=0){this.#t.cancel(null,u)}get separateAnnots(){const{separateAnnots:u}=this.#t.operatorList;if(!u)return!1;const{annotationCanvasMap:M}=this.#t;return u.form||u.canvas&&M?.size>0}}exports$1.RenderTask=RenderTask;class InternalRenderTask{static#t=new WeakSet;constructor({callback:u,params:M,objs:o,commonObjs:E,annotationCanvasMap:O,operatorList:D,pageIndex:B,canvasFactory:F,filterFactory:d,useRequestAnimationFrame:l=!1,pdfBug:h=!1,pageColors:b=null}){this.callback=u,this.params=M,this.objs=o,this.commonObjs=E,this.annotationCanvasMap=O,this.operatorListIdx=null,this.operatorList=D,this._pageIndex=B,this.canvasFactory=F,this.filterFactory=d,this._pdfBug=h,this.pageColors=b,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=l===!0&&typeof window<"u",this.cancelled=!1,this.capability=new _util.PromiseCapability,this.task=new RenderTask(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=M.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:u=!1,optionalContentConfig:M}){if(this.cancelled)return;if(this._canvas){if(InternalRenderTask.#t.has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");InternalRenderTask.#t.add(this._canvas)}this._pdfBug&&globalThis.StepperManager?.enabled&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:o,viewport:E,transform:O,background:D}=this.params;this.gfx=new _canvas.CanvasGraphics(o,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:M},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:O,viewport:E,transparency:u,background:D}),this.operatorListIdx=0,this.graphicsReady=!0,this.graphicsReadyCallback?.()}cancel(u=null,M=0){this.running=!1,this.cancelled=!0,this.gfx?.endDrawing(),InternalRenderTask.#t.delete(this._canvas),this.callback(u||new _display_utils.RenderingCancelledException(`Rendering cancelled, page ${this._pageIndex+1}`,M))}operatorListChanged(){if(!this.graphicsReady){this.graphicsReadyCallback||=this._continueBound;return}this.stepper?.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?window.requestAnimationFrame(()=>{this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),InternalRenderTask.#t.delete(this._canvas),this.callback())))}}const version="3.11.174";exports$1.version=version;const build="ce8716743";exports$1.build=build}),((_,u,M)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.SerializableEmpty=u.PrintAnnotationStorage=u.AnnotationStorage=void 0;var o=M(1),E=M(4),O=M(8);const D=Object.freeze({map:null,hash:"",transfers:void 0});u.SerializableEmpty=D;class B{#t=!1;#e=new Map;constructor(){this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(l,h){const b=this.#e.get(l);return b===void 0?h:Object.assign(h,b)}getRawValue(l){return this.#e.get(l)}remove(l){if(this.#e.delete(l),this.#e.size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const h of this.#e.values())if(h instanceof E.AnnotationEditor)return;this.onAnnotationEditor(null)}}setValue(l,h){const b=this.#e.get(l);let y=!1;if(b!==void 0)for(const[f,A]of Object.entries(h))b[f]!==A&&(y=!0,b[f]=A);else y=!0,this.#e.set(l,h);y&&this.#n(),h instanceof E.AnnotationEditor&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(h.constructor._type)}has(l){return this.#e.has(l)}getAll(){return this.#e.size>0?(0,o.objectFromMap)(this.#e):null}setAll(l){for(const[h,b]of Object.entries(l))this.setValue(h,b)}get size(){return this.#e.size}#n(){this.#t||(this.#t=!0,typeof this.onSetModified=="function"&&this.onSetModified())}resetModified(){this.#t&&(this.#t=!1,typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new F(this)}get serializable(){if(this.#e.size===0)return D;const l=new Map,h=new O.MurmurHash3_64,b=[],y=Object.create(null);let f=!1;for(const[A,j]of this.#e){const x=j instanceof E.AnnotationEditor?j.serialize(!1,y):j;x&&(l.set(A,x),h.update(`${A}:${JSON.stringify(x)}`),f||=!!x.bitmap)}if(f)for(const A of l.values())A.bitmap&&b.push(A.bitmap);return l.size>0?{map:l,hash:h.hexdigest(),transfers:b}:D}}u.AnnotationStorage=B;class F extends B{#t;constructor(l){super();const{map:h,hash:b,transfers:y}=l.serializable,f=structuredClone(h,y?{transfer:y}:null);this.#t={map:f,hash:b,transfers:y}}get print(){(0,o.unreachable)("Should not call PrintAnnotationStorage.print")}get serializable(){return this.#t}}u.PrintAnnotationStorage=F}),((_,u,M)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.AnnotationEditor=void 0;var o=M(5),E=M(1),O=M(6);class D{#t="";#e=!1;#n=null;#i=null;#o=null;#r=!1;#a=null;#l=this.focusin.bind(this);#c=this.focusout.bind(this);#s=!1;#f=!1;#d=!1;_initialOptions=Object.create(null);_uiManager=null;_focusEventsAllowed=!0;_l10nPromise=null;#h=!1;#p=D._zIndex++;static _borderLineWidth=-1;static _colorManager=new o.ColorManager;static _zIndex=1;static SMALL_EDITOR_SIZE=0;constructor(d){this.constructor===D&&(0,E.unreachable)("Cannot initialize AnnotationEditor."),this.parent=d.parent,this.id=d.id,this.width=this.height=null,this.pageIndex=d.parent.pageIndex,this.name=d.name,this.div=null,this._uiManager=d.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=d.isCentered,this._structTreeParentId=null;const{rotation:l,rawDims:{pageWidth:h,pageHeight:b,pageX:y,pageY:f}}=this.parent.viewport;this.rotation=l,this.pageRotation=(360+l-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[h,b],this.pageTranslation=[y,f];const[A,j]=this.parentDimensions;this.x=d.x/A,this.y=d.y/j,this.isAttachedToDOM=!1,this.deleted=!1}get editorType(){return Object.getPrototypeOf(this).constructor._type}static get _defaultLineColor(){return(0,E.shadow)(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(d){const l=new B({id:d.parent.getNextId(),parent:d.parent,uiManager:d._uiManager});l.annotationElementId=d.annotationElementId,l.deleted=!0,l._uiManager.addToAnnotationStorage(l)}static initialize(d,l=null){if(D._l10nPromise||=new Map(["editor_alt_text_button_label","editor_alt_text_edit_button_label","editor_alt_text_decorative_tooltip"].map(b=>[b,d.get(b)])),l?.strings)for(const b of l.strings)D._l10nPromise.set(b,d.get(b));if(D._borderLineWidth!==-1)return;const h=getComputedStyle(document.documentElement);D._borderLineWidth=parseFloat(h.getPropertyValue("--outline-width"))||0}static updateDefaultParams(d,l){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(d){return!1}static paste(d,l){(0,E.unreachable)("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return this.#h}set _isDraggable(d){this.#h=d,this.div?.classList.toggle("draggable",d)}center(){const[d,l]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*l/(d*2),this.y+=this.width*d/(l*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*l/(d*2),this.y-=this.width*d/(l*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(d){this._uiManager.addCommands(d)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=this.#p}setParent(d){d!==null&&(this.pageIndex=d.pageIndex,this.pageDimensions=d.pageDimensions),this.parent=d}focusin(d){this._focusEventsAllowed&&(this.#s?this.#s=!1:this.parent.setSelected(this))}focusout(d){!this._focusEventsAllowed||!this.isAttachedToDOM||d.relatedTarget?.closest(`#${this.id}`)||(d.preventDefault(),this.parent?.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(d,l,h,b){const[y,f]=this.parentDimensions;[h,b]=this.screenToPageTranslation(h,b),this.x=(d+h)/y,this.y=(l+b)/f,this.fixAndSetPosition()}#y([d,l],h,b){[h,b]=this.screenToPageTranslation(h,b),this.x+=h/d,this.y+=b/l,this.fixAndSetPosition()}translate(d,l){this.#y(this.parentDimensions,d,l)}translateInPage(d,l){this.#y(this.pageDimensions,d,l),this.div.scrollIntoView({block:"nearest"})}drag(d,l){const[h,b]=this.parentDimensions;if(this.x+=d/h,this.y+=l/b,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x,y:U}=this.div.getBoundingClientRect();this.parent.findNewParent(this,x,U)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:y,y:f}=this;const[A,j]=this.#g();y+=A,f+=j,this.div.style.left=`${(100*y).toFixed(2)}%`,this.div.style.top=`${(100*f).toFixed(2)}%`,this.div.scrollIntoView({block:"nearest"})}#g(){const[d,l]=this.parentDimensions,{_borderLineWidth:h}=D,b=h/d,y=h/l;switch(this.rotation){case 90:return[-b,y];case 180:return[b,y];case 270:return[b,-y];default:return[-b,-y]}}fixAndSetPosition(){const[d,l]=this.pageDimensions;let{x:h,y:b,width:y,height:f}=this;switch(y*=d,f*=l,h*=d,b*=l,this.rotation){case 0:h=Math.max(0,Math.min(d-y,h)),b=Math.max(0,Math.min(l-f,b));break;case 90:h=Math.max(0,Math.min(d-f,h)),b=Math.min(l,Math.max(y,b));break;case 180:h=Math.min(d,Math.max(y,h)),b=Math.min(l,Math.max(f,b));break;case 270:h=Math.min(d,Math.max(f,h)),b=Math.max(0,Math.min(l-y,b));break}this.x=h/=d,this.y=b/=l;const[A,j]=this.#g();h+=A,b+=j;const{style:x}=this.div;x.left=`${(100*h).toFixed(2)}%`,x.top=`${(100*b).toFixed(2)}%`,this.moveInDOM()}static#m(d,l,h){switch(h){case 90:return[l,-d];case 180:return[-d,-l];case 270:return[-l,d];default:return[d,l]}}screenToPageTranslation(d,l){return D.#m(d,l,this.parentRotation)}pageTranslationToScreen(d,l){return D.#m(d,l,360-this.parentRotation)}#u(d){switch(d){case 90:{const[l,h]=this.pageDimensions;return[0,-l/h,h/l,0]}case 180:return[-1,0,0,-1];case 270:{const[l,h]=this.pageDimensions;return[0,l/h,-h/l,0]}default:return[1,0,0,1]}}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:d,pageDimensions:[l,h]}=this,b=l*d,y=h*d;return E.FeatureTest.isCSSRoundSupported?[Math.round(b),Math.round(y)]:[b,y]}setDims(d,l){const[h,b]=this.parentDimensions;this.div.style.width=`${(100*d/h).toFixed(2)}%`,this.#r||(this.div.style.height=`${(100*l/b).toFixed(2)}%`),this.#n?.classList.toggle("small",d<D.SMALL_EDITOR_SIZE||l<D.SMALL_EDITOR_SIZE)}fixDims(){const{style:d}=this.div,{height:l,width:h}=d,b=h.endsWith("%"),y=!this.#r&&l.endsWith("%");if(b&&y)return;const[f,A]=this.parentDimensions;b||(d.width=`${(100*parseFloat(h)/f).toFixed(2)}%`),!this.#r&&!y&&(d.height=`${(100*parseFloat(l)/A).toFixed(2)}%`)}getInitialTranslation(){return[0,0]}#x(){if(this.#a)return;this.#a=document.createElement("div"),this.#a.classList.add("resizers");const d=["topLeft","topRight","bottomRight","bottomLeft"];this._willKeepAspectRatio||d.push("topMiddle","middleRight","bottomMiddle","middleLeft");for(const l of d){const h=document.createElement("div");this.#a.append(h),h.classList.add("resizer",l),h.addEventListener("pointerdown",this.#A.bind(this,l)),h.addEventListener("contextmenu",O.noContextMenu)}this.div.prepend(this.#a)}#A(d,l){l.preventDefault();const{isMac:h}=E.FeatureTest.platform;if(l.button!==0||l.ctrlKey&&h)return;const b=this.#E.bind(this,d),y=this._isDraggable;this._isDraggable=!1;const f={passive:!0,capture:!0};window.addEventListener("pointermove",b,f);const A=this.x,j=this.y,x=this.width,U=this.height,Z=this.parent.div.style.cursor,V=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(l.target).cursor;const T=()=>{this._isDraggable=y,window.removeEventListener("pointerup",T),window.removeEventListener("blur",T),window.removeEventListener("pointermove",b,f),this.parent.div.style.cursor=Z,this.div.style.cursor=V;const z=this.x,$=this.y,rt=this.width,et=this.height;z===A&&$===j&&rt===x&&et===U||this.addCommands({cmd:()=>{this.width=rt,this.height=et,this.x=z,this.y=$;const[yt,gt]=this.parentDimensions;this.setDims(yt*rt,gt*et),this.fixAndSetPosition()},undo:()=>{this.width=x,this.height=U,this.x=A,this.y=j;const[yt,gt]=this.parentDimensions;this.setDims(yt*x,gt*U),this.fixAndSetPosition()},mustExec:!0})};window.addEventListener("pointerup",T),window.addEventListener("blur",T)}#E(d,l){const[h,b]=this.parentDimensions,y=this.x,f=this.y,A=this.width,j=this.height,x=D.MIN_SIZE/h,U=D.MIN_SIZE/b,Z=K=>Math.round(K*1e4)/1e4,V=this.#u(this.rotation),T=(K,m)=>[V[0]*K+V[2]*m,V[1]*K+V[3]*m],z=this.#u(360-this.rotation),$=(K,m)=>[z[0]*K+z[2]*m,z[1]*K+z[3]*m];let rt,et,yt=!1,gt=!1;switch(d){case"topLeft":yt=!0,rt=(K,m)=>[0,0],et=(K,m)=>[K,m];break;case"topMiddle":rt=(K,m)=>[K/2,0],et=(K,m)=>[K/2,m];break;case"topRight":yt=!0,rt=(K,m)=>[K,0],et=(K,m)=>[0,m];break;case"middleRight":gt=!0,rt=(K,m)=>[K,m/2],et=(K,m)=>[0,m/2];break;case"bottomRight":yt=!0,rt=(K,m)=>[K,m],et=(K,m)=>[0,0];break;case"bottomMiddle":rt=(K,m)=>[K/2,m],et=(K,m)=>[K/2,0];break;case"bottomLeft":yt=!0,rt=(K,m)=>[0,m],et=(K,m)=>[K,0];break;case"middleLeft":gt=!0,rt=(K,m)=>[0,m/2],et=(K,m)=>[K,m/2];break}const kt=rt(A,j),At=et(A,j);let Ft=T(...At);const Kt=Z(y+Ft[0]),nt=Z(f+Ft[1]);let Y=1,N=1,[w,R]=this.screenToPageTranslation(l.movementX,l.movementY);if([w,R]=$(w/h,R/b),yt){const K=Math.hypot(A,j);Y=N=Math.max(Math.min(Math.hypot(At[0]-kt[0]-w,At[1]-kt[1]-R)/K,1/A,1/j),x/A,U/j)}else gt?Y=Math.max(x,Math.min(1,Math.abs(At[0]-kt[0]-w)))/A:N=Math.max(U,Math.min(1,Math.abs(At[1]-kt[1]-R)))/j;const g=Z(A*Y),L=Z(j*N);Ft=T(...et(g,L));const H=Kt-Ft[0],J=nt-Ft[1];this.width=g,this.height=L,this.x=H,this.y=J,this.setDims(h*g,b*L),this.fixAndSetPosition()}async addAltTextButton(){if(this.#n)return;const d=this.#n=document.createElement("button");d.className="altText";const l=await D._l10nPromise.get("editor_alt_text_button_label");d.textContent=l,d.setAttribute("aria-label",l),d.tabIndex="0",d.addEventListener("contextmenu",O.noContextMenu),d.addEventListener("pointerdown",h=>h.stopPropagation()),d.addEventListener("click",h=>{h.preventDefault(),this._uiManager.editAltText(this)},{capture:!0}),d.addEventListener("keydown",h=>{h.target===d&&h.key==="Enter"&&(h.preventDefault(),this._uiManager.editAltText(this))}),this.#R(),this.div.append(d),D.SMALL_EDITOR_SIZE||(D.SMALL_EDITOR_SIZE=Math.min(128,Math.round(d.getBoundingClientRect().width*1.4)))}async#R(){const d=this.#n;if(!d)return;if(!this.#t&&!this.#e){d.classList.remove("done"),this.#i?.remove();return}D._l10nPromise.get("editor_alt_text_edit_button_label").then(h=>{d.setAttribute("aria-label",h)});let l=this.#i;if(!l){this.#i=l=document.createElement("span"),l.className="tooltip",l.setAttribute("role","tooltip");const h=l.id=`alt-text-tooltip-${this.id}`;d.setAttribute("aria-describedby",h);const b=100;d.addEventListener("mouseenter",()=>{this.#o=setTimeout(()=>{this.#o=null,this.#i.classList.add("show"),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",subtype:this.editorType,data:{action:"alt_text_tooltip"}}})},b)}),d.addEventListener("mouseleave",()=>{clearTimeout(this.#o),this.#o=null,this.#i?.classList.remove("show")})}d.classList.add("done"),l.innerText=this.#e?await D._l10nPromise.get("editor_alt_text_decorative_tooltip"):this.#t,l.parentNode||d.append(l)}getClientDimensions(){return this.div.getBoundingClientRect()}get altTextData(){return{altText:this.#t,decorative:this.#e}}set altTextData({altText:d,decorative:l}){this.#t===d&&this.#e===l||(this.#t=d,this.#e=l,this.#R())}render(){this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.setAttribute("tabIndex",0),this.setInForeground(),this.div.addEventListener("focusin",this.#l),this.div.addEventListener("focusout",this.#c);const[d,l]=this.parentDimensions;this.parentRotation%180!==0&&(this.div.style.maxWidth=`${(100*l/d).toFixed(2)}%`,this.div.style.maxHeight=`${(100*d/l).toFixed(2)}%`);const[h,b]=this.getInitialTranslation();return this.translate(h,b),(0,o.bindEvents)(this,this.div,["pointerdown"]),this.div}pointerdown(d){const{isMac:l}=E.FeatureTest.platform;if(d.button!==0||d.ctrlKey&&l){d.preventDefault();return}this.#s=!0,this.#C(d)}#C(d){if(!this._isDraggable)return;const l=this._uiManager.isSelected(this);this._uiManager.setUpDragSession();let h,b;l&&(h={passive:!0,capture:!0},b=f=>{const[A,j]=this.screenToPageTranslation(f.movementX,f.movementY);this._uiManager.dragSelectedEditors(A,j)},window.addEventListener("pointermove",b,h));const y=()=>{if(window.removeEventListener("pointerup",y),window.removeEventListener("blur",y),l&&window.removeEventListener("pointermove",b,h),this.#s=!1,!this._uiManager.endDragSession()){const{isMac:f}=E.FeatureTest.platform;d.ctrlKey&&!f||d.shiftKey||d.metaKey&&f?this.parent.toggleSelected(this):this.parent.setSelected(this)}};window.addEventListener("pointerup",y),window.addEventListener("blur",y)}moveInDOM(){this.parent?.moveEditorInDOM(this)}_setParentAndPosition(d,l,h){d.changeParent(this),this.x=l,this.y=h,this.fixAndSetPosition()}getRect(d,l){const h=this.parentScale,[b,y]=this.pageDimensions,[f,A]=this.pageTranslation,j=d/h,x=l/h,U=this.x*b,Z=this.y*y,V=this.width*b,T=this.height*y;switch(this.rotation){case 0:return[U+j+f,y-Z-x-T+A,U+j+V+f,y-Z-x+A];case 90:return[U+x+f,y-Z+j+A,U+x+T+f,y-Z+j+V+A];case 180:return[U-j-V+f,y-Z+x+A,U-j+f,y-Z+x+T+A];case 270:return[U-x-T+f,y-Z-j-V+A,U-x+f,y-Z-j+A];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(d,l){const[h,b,y,f]=d,A=y-h,j=f-b;switch(this.rotation){case 0:return[h,l-f,A,j];case 90:return[h,l-b,j,A];case 180:return[y,l-b,A,j];case 270:return[y,l-f,j,A];default:throw new Error("Invalid rotation")}}onceAdded(){}isEmpty(){return!1}enableEditMode(){this.#d=!0}disableEditMode(){this.#d=!1}isInEditMode(){return this.#d}shouldGetKeyboardEvents(){return!1}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}rebuild(){this.div?.addEventListener("focusin",this.#l),this.div?.addEventListener("focusout",this.#c)}serialize(d=!1,l=null){(0,E.unreachable)("An editor must be serializable")}static deserialize(d,l,h){const b=new this.prototype.constructor({parent:l,id:l.getNextId(),uiManager:h});b.rotation=d.rotation;const[y,f]=b.pageDimensions,[A,j,x,U]=b.getRectInCurrentCoords(d.rect,f);return b.x=A/y,b.y=j/f,b.width=x/y,b.height=U/f,b}remove(){this.div.removeEventListener("focusin",this.#l),this.div.removeEventListener("focusout",this.#c),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),this.#n?.remove(),this.#n=null,this.#i=null}get isResizable(){return!1}makeResizable(){this.isResizable&&(this.#x(),this.#a.classList.remove("hidden"))}select(){this.makeResizable(),this.div?.classList.add("selectedEditor")}unselect(){this.#a?.classList.add("hidden"),this.div?.classList.remove("selectedEditor"),this.div?.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus()}updateParams(d,l){}disableEditing(){this.#n&&(this.#n.hidden=!0)}enableEditing(){this.#n&&(this.#n.hidden=!1)}enterInEditMode(){}get contentDiv(){return this.div}get isEditing(){return this.#f}set isEditing(d){this.#f=d,this.parent&&(d?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(d,l){this.#r=!0;const h=d/l,{style:b}=this.div;b.aspectRatio=h,b.height="auto"}static get MIN_SIZE(){return 16}}u.AnnotationEditor=D;class B extends D{constructor(d){super(d),this.annotationElementId=d.annotationElementId,this.deleted=!0}serialize(){return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex}}}}),((_,u,M)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.KeyboardManager=u.CommandManager=u.ColorManager=u.AnnotationEditorUIManager=void 0,u.bindEvents=O,u.opacityToHex=D;var o=M(1),E=M(6);function O(y,f,A){for(const j of A)f.addEventListener(j,y[j].bind(y))}function D(y){return Math.round(Math.min(255,Math.max(1,255*y))).toString(16).padStart(2,"0")}class B{#t=0;getId(){return`${o.AnnotationEditorPrefix}${this.#t++}`}}class F{#t=(0,o.getUuid)();#e=0;#n=null;static get _isSVGFittingCanvas(){const f='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',j=new OffscreenCanvas(1,3).getContext("2d"),x=new Image;x.src=f;const U=x.decode().then(()=>(j.drawImage(x,0,0,1,1,0,0,1,3),new Uint32Array(j.getImageData(0,0,1,1).data.buffer)[0]===0));return(0,o.shadow)(this,"_isSVGFittingCanvas",U)}async#i(f,A){this.#n||=new Map;let j=this.#n.get(f);if(j===null)return null;if(j?.bitmap)return j.refCounter+=1,j;try{j||={bitmap:null,id:`image_${this.#t}_${this.#e++}`,refCounter:0,isSvg:!1};let x;if(typeof A=="string"){j.url=A;const U=await fetch(A);if(!U.ok)throw new Error(U.statusText);x=await U.blob()}else x=j.file=A;if(x.type==="image/svg+xml"){const U=F._isSVGFittingCanvas,Z=new FileReader,V=new Image,T=new Promise((z,$)=>{V.onload=()=>{j.bitmap=V,j.isSvg=!0,z()},Z.onload=async()=>{const rt=j.svgUrl=Z.result;V.src=await U?`${rt}#svgView(preserveAspectRatio(none))`:rt},V.onerror=Z.onerror=$});Z.readAsDataURL(x),await T}else j.bitmap=await createImageBitmap(x);j.refCounter=1}catch(x){console.error(x),j=null}return this.#n.set(f,j),j&&this.#n.set(j.id,j),j}async getFromFile(f){const{lastModified:A,name:j,size:x,type:U}=f;return this.#i(`${A}_${j}_${x}_${U}`,f)}async getFromUrl(f){return this.#i(f,f)}async getFromId(f){this.#n||=new Map;const A=this.#n.get(f);return A?A.bitmap?(A.refCounter+=1,A):A.file?this.getFromFile(A.file):this.getFromUrl(A.url):null}getSvgUrl(f){const A=this.#n.get(f);return A?.isSvg?A.svgUrl:null}deleteId(f){this.#n||=new Map;const A=this.#n.get(f);A&&(A.refCounter-=1,A.refCounter===0&&(A.bitmap=null))}isValidId(f){return f.startsWith(`image_${this.#t}_`)}}class d{#t=[];#e=!1;#n;#i=-1;constructor(f=128){this.#n=f}add({cmd:f,undo:A,mustExec:j,type:x=NaN,overwriteIfSameType:U=!1,keepUndo:Z=!1}){if(j&&f(),this.#e)return;const V={cmd:f,undo:A,type:x};if(this.#i===-1){this.#t.length>0&&(this.#t.length=0),this.#i=0,this.#t.push(V);return}if(U&&this.#t[this.#i].type===x){Z&&(V.undo=this.#t[this.#i].undo),this.#t[this.#i]=V;return}const T=this.#i+1;T===this.#n?this.#t.splice(0,1):(this.#i=T,T<this.#t.length&&this.#t.splice(T)),this.#t.push(V)}undo(){this.#i!==-1&&(this.#e=!0,this.#t[this.#i].undo(),this.#e=!1,this.#i-=1)}redo(){this.#i<this.#t.length-1&&(this.#i+=1,this.#e=!0,this.#t[this.#i].cmd(),this.#e=!1)}hasSomethingToUndo(){return this.#i!==-1}hasSomethingToRedo(){return this.#i<this.#t.length-1}destroy(){this.#t=null}}u.CommandManager=d;class l{constructor(f){this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:A}=o.FeatureTest.platform;for(const[j,x,U={}]of f)for(const Z of j){const V=Z.startsWith("mac+");A&&V?(this.callbacks.set(Z.slice(4),{callback:x,options:U}),this.allKeys.add(Z.split("+").at(-1))):!A&&!V&&(this.callbacks.set(Z,{callback:x,options:U}),this.allKeys.add(Z.split("+").at(-1)))}}#t(f){f.altKey&&this.buffer.push("alt"),f.ctrlKey&&this.buffer.push("ctrl"),f.metaKey&&this.buffer.push("meta"),f.shiftKey&&this.buffer.push("shift"),this.buffer.push(f.key);const A=this.buffer.join("+");return this.buffer.length=0,A}exec(f,A){if(!this.allKeys.has(A.key))return;const j=this.callbacks.get(this.#t(A));if(!j)return;const{callback:x,options:{bubbles:U=!1,args:Z=[],checker:V=null}}=j;V&&!V(f,A)||(x.bind(f,...Z)(),U||(A.stopPropagation(),A.preventDefault()))}}u.KeyboardManager=l;class h{static _colorsMapping=new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]);get _colors(){const f=new Map([["CanvasText",null],["Canvas",null]]);return(0,E.getColorValues)(f),(0,o.shadow)(this,"_colors",f)}convert(f){const A=(0,E.getRGB)(f);if(!window.matchMedia("(forced-colors: active)").matches)return A;for(const[j,x]of this._colors)if(x.every((U,Z)=>U===A[Z]))return h._colorsMapping.get(j);return A}getHexCode(f){const A=this._colors.get(f);return A?o.Util.makeHexColor(...A):f}}u.ColorManager=h;class b{#t=null;#e=new Map;#n=new Map;#i=null;#o=null;#r=new d;#a=0;#l=new Set;#c=null;#s=null;#f=new Set;#d=null;#h=new B;#p=!1;#y=!1;#g=null;#m=o.AnnotationEditorType.NONE;#u=new Set;#x=null;#A=this.blur.bind(this);#E=this.focus.bind(this);#R=this.copy.bind(this);#C=this.cut.bind(this);#O=this.paste.bind(this);#L=this.keydown.bind(this);#P=this.onEditingAction.bind(this);#v=this.onPageChanging.bind(this);#N=this.onScaleChanging.bind(this);#j=this.onRotationChanging.bind(this);#M={isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1};#b=[0,0];#T=null;#S=null;#F=null;static TRANSLATE_SMALL=1;static TRANSLATE_BIG=10;static get _keyboardManager(){const f=b.prototype,A=U=>{const{activeElement:Z}=document;return Z&&U.#S.contains(Z)&&U.hasSomethingToControl()},j=this.TRANSLATE_SMALL,x=this.TRANSLATE_BIG;return(0,o.shadow)(this,"_keyboardManager",new l([[["ctrl+a","mac+meta+a"],f.selectAll],[["ctrl+z","mac+meta+z"],f.undo],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],f.redo],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],f.delete],[["Escape","mac+Escape"],f.unselectAll],[["ArrowLeft","mac+ArrowLeft"],f.translateSelectedEditors,{args:[-j,0],checker:A}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],f.translateSelectedEditors,{args:[-x,0],checker:A}],[["ArrowRight","mac+ArrowRight"],f.translateSelectedEditors,{args:[j,0],checker:A}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],f.translateSelectedEditors,{args:[x,0],checker:A}],[["ArrowUp","mac+ArrowUp"],f.translateSelectedEditors,{args:[0,-j],checker:A}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],f.translateSelectedEditors,{args:[0,-x],checker:A}],[["ArrowDown","mac+ArrowDown"],f.translateSelectedEditors,{args:[0,j],checker:A}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],f.translateSelectedEditors,{args:[0,x],checker:A}]]))}constructor(f,A,j,x,U,Z){this.#S=f,this.#F=A,this.#i=j,this._eventBus=x,this._eventBus._on("editingaction",this.#P),this._eventBus._on("pagechanging",this.#v),this._eventBus._on("scalechanging",this.#N),this._eventBus._on("rotationchanging",this.#j),this.#o=U.annotationStorage,this.#d=U.filterFactory,this.#x=Z,this.viewParameters={realScale:E.PixelsPerInch.PDF_TO_CSS_UNITS,rotation:0}}destroy(){this.#k(),this.#I(),this._eventBus._off("editingaction",this.#P),this._eventBus._off("pagechanging",this.#v),this._eventBus._off("scalechanging",this.#N),this._eventBus._off("rotationchanging",this.#j);for(const f of this.#n.values())f.destroy();this.#n.clear(),this.#e.clear(),this.#f.clear(),this.#t=null,this.#u.clear(),this.#r.destroy(),this.#i.destroy()}get hcmFilter(){return(0,o.shadow)(this,"hcmFilter",this.#x?this.#d.addHCMFilter(this.#x.foreground,this.#x.background):"none")}get direction(){return(0,o.shadow)(this,"direction",getComputedStyle(this.#S).direction)}editAltText(f){this.#i?.editAltText(this,f)}onPageChanging({pageNumber:f}){this.#a=f-1}focusMainContainer(){this.#S.focus()}findParent(f,A){for(const j of this.#n.values()){const{x,y:U,width:Z,height:V}=j.div.getBoundingClientRect();if(f>=x&&f<=x+Z&&A>=U&&A<=U+V)return j}return null}disableUserSelect(f=!1){this.#F.classList.toggle("noUserSelect",f)}addShouldRescale(f){this.#f.add(f)}removeShouldRescale(f){this.#f.delete(f)}onScaleChanging({scale:f}){this.commitOrRemove(),this.viewParameters.realScale=f*E.PixelsPerInch.PDF_TO_CSS_UNITS;for(const A of this.#f)A.onScaleChanging()}onRotationChanging({pagesRotation:f}){this.commitOrRemove(),this.viewParameters.rotation=f}addToAnnotationStorage(f){!f.isEmpty()&&this.#o&&!this.#o.has(f.id)&&this.#o.setValue(f.id,f)}#z(){window.addEventListener("focus",this.#E),window.addEventListener("blur",this.#A)}#I(){window.removeEventListener("focus",this.#E),window.removeEventListener("blur",this.#A)}blur(){if(!this.hasSelection)return;const{activeElement:f}=document;for(const A of this.#u)if(A.div.contains(f)){this.#g=[A,f],A._focusEventsAllowed=!1;break}}focus(){if(!this.#g)return;const[f,A]=this.#g;this.#g=null,A.addEventListener("focusin",()=>{f._focusEventsAllowed=!0},{once:!0}),A.focus()}#B(){window.addEventListener("keydown",this.#L,{capture:!0})}#k(){window.removeEventListener("keydown",this.#L,{capture:!0})}#D(){document.addEventListener("copy",this.#R),document.addEventListener("cut",this.#C),document.addEventListener("paste",this.#O)}#w(){document.removeEventListener("copy",this.#R),document.removeEventListener("cut",this.#C),document.removeEventListener("paste",this.#O)}addEditListeners(){this.#B(),this.#D()}removeEditListeners(){this.#k(),this.#w()}copy(f){if(f.preventDefault(),this.#t?.commitOrRemove(),!this.hasSelection)return;const A=[];for(const j of this.#u){const x=j.serialize(!0);x&&A.push(x)}A.length!==0&&f.clipboardData.setData("application/pdfjs",JSON.stringify(A))}cut(f){this.copy(f),this.delete()}paste(f){f.preventDefault();const{clipboardData:A}=f;for(const U of A.items)for(const Z of this.#s)if(Z.isHandlingMimeForPasting(U.type)){Z.paste(U,this.currentLayer);return}let j=A.getData("application/pdfjs");if(!j)return;try{j=JSON.parse(j)}catch(U){(0,o.warn)(`paste: "${U.message}".`);return}if(!Array.isArray(j))return;this.unselectAll();const x=this.currentLayer;try{const U=[];for(const T of j){const z=x.deserialize(T);if(!z)return;U.push(z)}const Z=()=>{for(const T of U)this.#H(T);this.#G(U)},V=()=>{for(const T of U)T.remove()};this.addCommands({cmd:Z,undo:V,mustExec:!0})}catch(U){(0,o.warn)(`paste: "${U.message}".`)}}keydown(f){this.getActive()?.shouldGetKeyboardEvents()||b._keyboardManager.exec(this,f)}onEditingAction(f){["undo","redo","delete","selectAll"].includes(f.name)&&this[f.name]()}#_(f){Object.entries(f).some(([j,x])=>this.#M[j]!==x)&&this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(this.#M,f)})}#U(f){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:f})}setEditingState(f){f?(this.#z(),this.#B(),this.#D(),this.#_({isEditing:this.#m!==o.AnnotationEditorType.NONE,isEmpty:this.#q(),hasSomethingToUndo:this.#r.hasSomethingToUndo(),hasSomethingToRedo:this.#r.hasSomethingToRedo(),hasSelectedEditor:!1})):(this.#I(),this.#k(),this.#w(),this.#_({isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(f){if(!this.#s){this.#s=f;for(const A of this.#s)this.#U(A.defaultPropertiesToUpdate)}}getId(){return this.#h.getId()}get currentLayer(){return this.#n.get(this.#a)}getLayer(f){return this.#n.get(f)}get currentPageIndex(){return this.#a}addLayer(f){this.#n.set(f.pageIndex,f),this.#p?f.enable():f.disable()}removeLayer(f){this.#n.delete(f.pageIndex)}updateMode(f,A=null){if(this.#m!==f){if(this.#m=f,f===o.AnnotationEditorType.NONE){this.setEditingState(!1),this.#X();return}this.setEditingState(!0),this.#K(),this.unselectAll();for(const j of this.#n.values())j.updateMode(f);if(A){for(const j of this.#e.values())if(j.annotationElementId===A){this.setSelected(j),j.enterInEditMode();break}}}}updateToolbar(f){f!==this.#m&&this._eventBus.dispatch("switchannotationeditormode",{source:this,mode:f})}updateParams(f,A){if(this.#s){if(f===o.AnnotationEditorParamsType.CREATE){this.currentLayer.addNewEditor(f);return}for(const j of this.#u)j.updateParams(f,A);for(const j of this.#s)j.updateDefaultParams(f,A)}}enableWaiting(f=!1){if(this.#y!==f){this.#y=f;for(const A of this.#n.values())f?A.disableClick():A.enableClick(),A.div.classList.toggle("waiting",f)}}#K(){if(!this.#p){this.#p=!0;for(const f of this.#n.values())f.enable()}}#X(){if(this.unselectAll(),this.#p){this.#p=!1;for(const f of this.#n.values())f.disable()}}getEditors(f){const A=[];for(const j of this.#e.values())j.pageIndex===f&&A.push(j);return A}getEditor(f){return this.#e.get(f)}addEditor(f){this.#e.set(f.id,f)}removeEditor(f){this.#e.delete(f.id),this.unselect(f),(!f.annotationElementId||!this.#l.has(f.annotationElementId))&&this.#o?.remove(f.id)}addDeletedAnnotationElement(f){this.#l.add(f.annotationElementId),f.deleted=!0}isDeletedAnnotationElement(f){return this.#l.has(f)}removeDeletedAnnotationElement(f){this.#l.delete(f.annotationElementId),f.deleted=!1}#H(f){const A=this.#n.get(f.pageIndex);A?A.addOrRebuild(f):this.addEditor(f)}setActiveEditor(f){this.#t!==f&&(this.#t=f,f&&this.#U(f.propertiesToUpdate))}toggleSelected(f){if(this.#u.has(f)){this.#u.delete(f),f.unselect(),this.#_({hasSelectedEditor:this.hasSelection});return}this.#u.add(f),f.select(),this.#U(f.propertiesToUpdate),this.#_({hasSelectedEditor:!0})}setSelected(f){for(const A of this.#u)A!==f&&A.unselect();this.#u.clear(),this.#u.add(f),f.select(),this.#U(f.propertiesToUpdate),this.#_({hasSelectedEditor:!0})}isSelected(f){return this.#u.has(f)}unselect(f){f.unselect(),this.#u.delete(f),this.#_({hasSelectedEditor:this.hasSelection})}get hasSelection(){return this.#u.size!==0}undo(){this.#r.undo(),this.#_({hasSomethingToUndo:this.#r.hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:this.#q()})}redo(){this.#r.redo(),this.#_({hasSomethingToUndo:!0,hasSomethingToRedo:this.#r.hasSomethingToRedo(),isEmpty:this.#q()})}addCommands(f){this.#r.add(f),this.#_({hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:this.#q()})}#q(){if(this.#e.size===0)return!0;if(this.#e.size===1)for(const f of this.#e.values())return f.isEmpty();return!1}delete(){if(this.commitOrRemove(),!this.hasSelection)return;const f=[...this.#u],A=()=>{for(const x of f)x.remove()},j=()=>{for(const x of f)this.#H(x)};this.addCommands({cmd:A,undo:j,mustExec:!0})}commitOrRemove(){this.#t?.commitOrRemove()}hasSomethingToControl(){return this.#t||this.hasSelection}#G(f){this.#u.clear();for(const A of f)A.isEmpty()||(this.#u.add(A),A.select());this.#_({hasSelectedEditor:!0})}selectAll(){for(const f of this.#u)f.commit();this.#G(this.#e.values())}unselectAll(){if(this.#t){this.#t.commitOrRemove();return}if(this.hasSelection){for(const f of this.#u)f.unselect();this.#u.clear(),this.#_({hasSelectedEditor:!1})}}translateSelectedEditors(f,A,j=!1){if(j||this.commitOrRemove(),!this.hasSelection)return;this.#b[0]+=f,this.#b[1]+=A;const[x,U]=this.#b,Z=[...this.#u],V=1e3;this.#T&&clearTimeout(this.#T),this.#T=setTimeout(()=>{this.#T=null,this.#b[0]=this.#b[1]=0,this.addCommands({cmd:()=>{for(const T of Z)this.#e.has(T.id)&&T.translateInPage(x,U)},undo:()=>{for(const T of Z)this.#e.has(T.id)&&T.translateInPage(-x,-U)},mustExec:!1})},V);for(const T of Z)T.translateInPage(f,A)}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),this.#c=new Map;for(const f of this.#u)this.#c.set(f,{savedX:f.x,savedY:f.y,savedPageIndex:f.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!this.#c)return!1;this.disableUserSelect(!1);const f=this.#c;this.#c=null;let A=!1;for(const[{x,y:U,pageIndex:Z},V]of f)V.newX=x,V.newY=U,V.newPageIndex=Z,A||=x!==V.savedX||U!==V.savedY||Z!==V.savedPageIndex;if(!A)return!1;const j=(x,U,Z,V)=>{if(this.#e.has(x.id)){const T=this.#n.get(V);T?x._setParentAndPosition(T,U,Z):(x.pageIndex=V,x.x=U,x.y=Z)}};return this.addCommands({cmd:()=>{for(const[x,{newX:U,newY:Z,newPageIndex:V}]of f)j(x,U,Z,V)},undo:()=>{for(const[x,{savedX:U,savedY:Z,savedPageIndex:V}]of f)j(x,U,Z,V)},mustExec:!0}),!0}dragSelectedEditors(f,A){if(this.#c)for(const j of this.#c.keys())j.drag(f,A)}rebuild(f){if(f.parent===null){const A=this.getLayer(f.pageIndex);A?(A.changeParent(f),A.addOrRebuild(f)):(this.addEditor(f),this.addToAnnotationStorage(f),f.rebuild())}else f.parent.addOrRebuild(f)}isActive(f){return this.#t===f}getActive(){return this.#t}getMode(){return this.#m}get imageManager(){return(0,o.shadow)(this,"imageManager",new F)}}u.AnnotationEditorUIManager=b}),((_,u,M)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.StatTimer=u.RenderingCancelledException=u.PixelsPerInch=u.PageViewport=u.PDFDateString=u.DOMStandardFontDataFactory=u.DOMSVGFactory=u.DOMFilterFactory=u.DOMCanvasFactory=u.DOMCMapReaderFactory=void 0,u.deprecated=$,u.getColorValues=kt,u.getCurrentTransform=At,u.getCurrentTransformInverse=Ft,u.getFilenameFromUrl=x,u.getPdfFilenameFromUrl=U,u.getRGB=gt,u.getXfaPageViewport=yt,u.isDataScheme=A,u.isPdfFile=j,u.isValidFetchUrl=V,u.loadScript=z,u.noContextMenu=T,u.setLayerDimensions=Kt;var o=M(7),E=M(1);const O="http://www.w3.org/2000/svg";class D{static CSS=96;static PDF=72;static PDF_TO_CSS_UNITS=this.CSS/this.PDF}u.PixelsPerInch=D;class B extends o.BaseFilterFactory{#t;#e;#n;#i;#o;#r;#a;#l;#c;#s;#f=0;constructor({docId:Y,ownerDocument:N=globalThis.document}={}){super(),this.#n=Y,this.#i=N}get#d(){return this.#t||=new Map}get#h(){if(!this.#e){const Y=this.#i.createElement("div"),{style:N}=Y;N.visibility="hidden",N.contain="strict",N.width=N.height=0,N.position="absolute",N.top=N.left=0,N.zIndex=-1;const w=this.#i.createElementNS(O,"svg");w.setAttribute("width",0),w.setAttribute("height",0),this.#e=this.#i.createElementNS(O,"defs"),Y.append(w),w.append(this.#e),this.#i.body.append(Y)}return this.#e}addFilter(Y){if(!Y)return"none";let N=this.#d.get(Y);if(N)return N;let w,R,g,L;if(Y.length===1){const m=Y[0],k=new Array(256);for(let I=0;I<256;I++)k[I]=m[I]/255;L=w=R=g=k.join(",")}else{const[m,k,I]=Y,W=new Array(256),G=new Array(256),it=new Array(256);for(let at=0;at<256;at++)W[at]=m[at]/255,G[at]=k[at]/255,it[at]=I[at]/255;w=W.join(","),R=G.join(","),g=it.join(","),L=`${w}${R}${g}`}if(N=this.#d.get(L),N)return this.#d.set(Y,N),N;const H=`g_${this.#n}_transfer_map_${this.#f++}`,J=`url(#${H})`;this.#d.set(Y,J),this.#d.set(L,J);const K=this.#y(H);return this.#m(w,R,g,K),J}addHCMFilter(Y,N){const w=`${Y}-${N}`;if(this.#r===w)return this.#a;if(this.#r=w,this.#a="none",this.#o?.remove(),!Y||!N)return this.#a;const R=this.#u(Y);Y=E.Util.makeHexColor(...R);const g=this.#u(N);if(N=E.Util.makeHexColor(...g),this.#h.style.color="",Y==="#000000"&&N==="#ffffff"||Y===N)return this.#a;const L=new Array(256);for(let k=0;k<=255;k++){const I=k/255;L[k]=I<=.03928?I/12.92:((I+.055)/1.055)**2.4}const H=L.join(","),J=`g_${this.#n}_hcm_filter`,K=this.#l=this.#y(J);this.#m(H,H,H,K),this.#p(K);const m=(k,I)=>{const W=R[k]/255,G=g[k]/255,it=new Array(I+1);for(let at=0;at<=I;at++)it[at]=W+at/I*(G-W);return it.join(",")};return this.#m(m(0,5),m(1,5),m(2,5),K),this.#a=`url(#${J})`,this.#a}addHighlightHCMFilter(Y,N,w,R){const g=`${Y}-${N}-${w}-${R}`;if(this.#c===g)return this.#s;if(this.#c=g,this.#s="none",this.#l?.remove(),!Y||!N)return this.#s;const[L,H]=[Y,N].map(this.#u.bind(this));let J=Math.round(.2126*L[0]+.7152*L[1]+.0722*L[2]),K=Math.round(.2126*H[0]+.7152*H[1]+.0722*H[2]),[m,k]=[w,R].map(this.#u.bind(this));K<J&&([J,K,m,k]=[K,J,k,m]),this.#h.style.color="";const I=(it,at,Ct)=>{const Yt=new Array(256),Rt=(K-J)/Ct,Dt=it/255,Pt=(at-it)/(255*Ct);let Lt=0;for(let Ut=0;Ut<=Ct;Ut++){const Qt=Math.round(J+Ut*Rt),$t=Dt+Ut*Pt;for(let se=Lt;se<=Qt;se++)Yt[se]=$t;Lt=Qt+1}for(let Ut=Lt;Ut<256;Ut++)Yt[Ut]=Yt[Lt-1];return Yt.join(",")},W=`g_${this.#n}_hcm_highlight_filter`,G=this.#l=this.#y(W);return this.#p(G),this.#m(I(m[0],k[0],5),I(m[1],k[1],5),I(m[2],k[2],5),G),this.#s=`url(#${W})`,this.#s}destroy(Y=!1){Y&&(this.#a||this.#s)||(this.#e&&(this.#e.parentNode.parentNode.remove(),this.#e=null),this.#t&&(this.#t.clear(),this.#t=null),this.#f=0)}#p(Y){const N=this.#i.createElementNS(O,"feColorMatrix");N.setAttribute("type","matrix"),N.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),Y.append(N)}#y(Y){const N=this.#i.createElementNS(O,"filter");return N.setAttribute("color-interpolation-filters","sRGB"),N.setAttribute("id",Y),this.#h.append(N),N}#g(Y,N,w){const R=this.#i.createElementNS(O,N);R.setAttribute("type","discrete"),R.setAttribute("tableValues",w),Y.append(R)}#m(Y,N,w,R){const g=this.#i.createElementNS(O,"feComponentTransfer");R.append(g),this.#g(g,"feFuncR",Y),this.#g(g,"feFuncG",N),this.#g(g,"feFuncB",w)}#u(Y){return this.#h.style.color=Y,gt(getComputedStyle(this.#h).getPropertyValue("color"))}}u.DOMFilterFactory=B;class F extends o.BaseCanvasFactory{constructor({ownerDocument:Y=globalThis.document}={}){super(),this._document=Y}_createCanvas(Y,N){const w=this._document.createElement("canvas");return w.width=Y,w.height=N,w}}u.DOMCanvasFactory=F;async function d(nt,Y=!1){if(V(nt,document.baseURI)){const N=await fetch(nt);if(!N.ok)throw new Error(N.statusText);return Y?new Uint8Array(await N.arrayBuffer()):(0,E.stringToBytes)(await N.text())}return new Promise((N,w)=>{const R=new XMLHttpRequest;R.open("GET",nt,!0),Y&&(R.responseType="arraybuffer"),R.onreadystatechange=()=>{if(R.readyState===XMLHttpRequest.DONE){if(R.status===200||R.status===0){let g;if(Y&&R.response?g=new Uint8Array(R.response):!Y&&R.responseText&&(g=(0,E.stringToBytes)(R.responseText)),g){N(g);return}}w(new Error(R.statusText))}},R.send(null)})}class l extends o.BaseCMapReaderFactory{_fetchData(Y,N){return d(Y,this.isCompressed).then(w=>({cMapData:w,compressionType:N}))}}u.DOMCMapReaderFactory=l;class h extends o.BaseStandardFontDataFactory{_fetchData(Y){return d(Y,!0)}}u.DOMStandardFontDataFactory=h;class b extends o.BaseSVGFactory{_createSVG(Y){return document.createElementNS(O,Y)}}u.DOMSVGFactory=b;class y{constructor({viewBox:Y,scale:N,rotation:w,offsetX:R=0,offsetY:g=0,dontFlip:L=!1}){this.viewBox=Y,this.scale=N,this.rotation=w,this.offsetX=R,this.offsetY=g;const H=(Y[2]+Y[0])/2,J=(Y[3]+Y[1])/2;let K,m,k,I;switch(w%=360,w<0&&(w+=360),w){case 180:K=-1,m=0,k=0,I=1;break;case 90:K=0,m=1,k=1,I=0;break;case 270:K=0,m=-1,k=-1,I=0;break;case 0:K=1,m=0,k=0,I=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}L&&(k=-k,I=-I);let W,G,it,at;K===0?(W=Math.abs(J-Y[1])*N+R,G=Math.abs(H-Y[0])*N+g,it=(Y[3]-Y[1])*N,at=(Y[2]-Y[0])*N):(W=Math.abs(H-Y[0])*N+R,G=Math.abs(J-Y[1])*N+g,it=(Y[2]-Y[0])*N,at=(Y[3]-Y[1])*N),this.transform=[K*N,m*N,k*N,I*N,W-K*N*H-k*N*J,G-m*N*H-I*N*J],this.width=it,this.height=at}get rawDims(){const{viewBox:Y}=this;return(0,E.shadow)(this,"rawDims",{pageWidth:Y[2]-Y[0],pageHeight:Y[3]-Y[1],pageX:Y[0],pageY:Y[1]})}clone({scale:Y=this.scale,rotation:N=this.rotation,offsetX:w=this.offsetX,offsetY:R=this.offsetY,dontFlip:g=!1}={}){return new y({viewBox:this.viewBox.slice(),scale:Y,rotation:N,offsetX:w,offsetY:R,dontFlip:g})}convertToViewportPoint(Y,N){return E.Util.applyTransform([Y,N],this.transform)}convertToViewportRectangle(Y){const N=E.Util.applyTransform([Y[0],Y[1]],this.transform),w=E.Util.applyTransform([Y[2],Y[3]],this.transform);return[N[0],N[1],w[0],w[1]]}convertToPdfPoint(Y,N){return E.Util.applyInverseTransform([Y,N],this.transform)}}u.PageViewport=y;class f extends E.BaseException{constructor(Y,N=0){super(Y,"RenderingCancelledException"),this.extraDelay=N}}u.RenderingCancelledException=f;function A(nt){const Y=nt.length;let N=0;for(;N<Y&&nt[N].trim()==="";)N++;return nt.substring(N,N+5).toLowerCase()==="data:"}function j(nt){return typeof nt=="string"&&/\.pdf$/i.test(nt)}function x(nt,Y=!1){return Y||([nt]=nt.split(/[#?]/,1)),nt.substring(nt.lastIndexOf("/")+1)}function U(nt,Y="document.pdf"){if(typeof nt!="string")return Y;if(A(nt))return(0,E.warn)('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),Y;const N=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,w=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,R=N.exec(nt);let g=w.exec(R[1])||w.exec(R[2])||w.exec(R[3]);if(g&&(g=g[0],g.includes("%")))try{g=w.exec(decodeURIComponent(g))[0]}catch{}return g||Y}class Z{started=Object.create(null);times=[];time(Y){Y in this.started&&(0,E.warn)(`Timer is already running for ${Y}`),this.started[Y]=Date.now()}timeEnd(Y){Y in this.started||(0,E.warn)(`Timer has not been started for ${Y}`),this.times.push({name:Y,start:this.started[Y],end:Date.now()}),delete this.started[Y]}toString(){const Y=[];let N=0;for(const{name:w}of this.times)N=Math.max(w.length,N);for(const{name:w,start:R,end:g}of this.times)Y.push(`${w.padEnd(N)} ${g-R}ms
`);return Y.join("")}}u.StatTimer=Z;function V(nt,Y){try{const{protocol:N}=Y?new URL(nt,Y):new URL(nt);return N==="http:"||N==="https:"}catch{return!1}}function T(nt){nt.preventDefault()}function z(nt,Y=!1){return new Promise((N,w)=>{const R=document.createElement("script");R.src=nt,R.onload=function(g){Y&&R.remove(),N(g)},R.onerror=function(){w(new Error(`Cannot load script at: ${R.src}`))},(document.head||document.documentElement).append(R)})}function $(nt){console.log("Deprecated API usage: "+nt)}let rt;class et{static toDateObject(Y){if(!Y||typeof Y!="string")return null;rt||=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?");const N=rt.exec(Y);if(!N)return null;const w=parseInt(N[1],10);let R=parseInt(N[2],10);R=R>=1&&R<=12?R-1:0;let g=parseInt(N[3],10);g=g>=1&&g<=31?g:1;let L=parseInt(N[4],10);L=L>=0&&L<=23?L:0;let H=parseInt(N[5],10);H=H>=0&&H<=59?H:0;let J=parseInt(N[6],10);J=J>=0&&J<=59?J:0;const K=N[7]||"Z";let m=parseInt(N[8],10);m=m>=0&&m<=23?m:0;let k=parseInt(N[9],10)||0;return k=k>=0&&k<=59?k:0,K==="-"?(L+=m,H+=k):K==="+"&&(L-=m,H-=k),new Date(Date.UTC(w,R,g,L,H,J))}}u.PDFDateString=et;function yt(nt,{scale:Y=1,rotation:N=0}){const{width:w,height:R}=nt.attributes.style,g=[0,0,parseInt(w),parseInt(R)];return new y({viewBox:g,scale:Y,rotation:N})}function gt(nt){if(nt.startsWith("#")){const Y=parseInt(nt.slice(1),16);return[(Y&16711680)>>16,(Y&65280)>>8,Y&255]}return nt.startsWith("rgb(")?nt.slice(4,-1).split(",").map(Y=>parseInt(Y)):nt.startsWith("rgba(")?nt.slice(5,-1).split(",").map(Y=>parseInt(Y)).slice(0,3):((0,E.warn)(`Not a valid color format: "${nt}"`),[0,0,0])}function kt(nt){const Y=document.createElement("span");Y.style.visibility="hidden",document.body.append(Y);for(const N of nt.keys()){Y.style.color=N;const w=window.getComputedStyle(Y).color;nt.set(N,gt(w))}Y.remove()}function At(nt){const{a:Y,b:N,c:w,d:R,e:g,f:L}=nt.getTransform();return[Y,N,w,R,g,L]}function Ft(nt){const{a:Y,b:N,c:w,d:R,e:g,f:L}=nt.getTransform().invertSelf();return[Y,N,w,R,g,L]}function Kt(nt,Y,N=!1,w=!0){if(Y instanceof y){const{pageWidth:R,pageHeight:g}=Y.rawDims,{style:L}=nt,H=E.FeatureTest.isCSSRoundSupported,J=`var(--scale-factor) * ${R}px`,K=`var(--scale-factor) * ${g}px`,m=H?`round(${J}, 1px)`:`calc(${J})`,k=H?`round(${K}, 1px)`:`calc(${K})`;!N||Y.rotation%180===0?(L.width=m,L.height=k):(L.width=k,L.height=m)}w&&nt.setAttribute("data-main-rotation",Y.rotation)}}),((_,u,M)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.BaseStandardFontDataFactory=u.BaseSVGFactory=u.BaseFilterFactory=u.BaseCanvasFactory=u.BaseCMapReaderFactory=void 0;var o=M(1);class E{constructor(){this.constructor===E&&(0,o.unreachable)("Cannot initialize BaseFilterFactory.")}addFilter(l){return"none"}addHCMFilter(l,h){return"none"}addHighlightHCMFilter(l,h,b,y){return"none"}destroy(l=!1){}}u.BaseFilterFactory=E;class O{constructor(){this.constructor===O&&(0,o.unreachable)("Cannot initialize BaseCanvasFactory.")}create(l,h){if(l<=0||h<=0)throw new Error("Invalid canvas size");const b=this._createCanvas(l,h);return{canvas:b,context:b.getContext("2d")}}reset(l,h,b){if(!l.canvas)throw new Error("Canvas is not specified");if(h<=0||b<=0)throw new Error("Invalid canvas size");l.canvas.width=h,l.canvas.height=b}destroy(l){if(!l.canvas)throw new Error("Canvas is not specified");l.canvas.width=0,l.canvas.height=0,l.canvas=null,l.context=null}_createCanvas(l,h){(0,o.unreachable)("Abstract method `_createCanvas` called.")}}u.BaseCanvasFactory=O;class D{constructor({baseUrl:l=null,isCompressed:h=!0}){this.constructor===D&&(0,o.unreachable)("Cannot initialize BaseCMapReaderFactory."),this.baseUrl=l,this.isCompressed=h}async fetch({name:l}){if(!this.baseUrl)throw new Error('The CMap "baseUrl" parameter must be specified, ensure that the "cMapUrl" and "cMapPacked" API parameters are provided.');if(!l)throw new Error("CMap name must be specified.");const h=this.baseUrl+l+(this.isCompressed?".bcmap":""),b=this.isCompressed?o.CMapCompressionType.BINARY:o.CMapCompressionType.NONE;return this._fetchData(h,b).catch(y=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${h}`)})}_fetchData(l,h){(0,o.unreachable)("Abstract method `_fetchData` called.")}}u.BaseCMapReaderFactory=D;class B{constructor({baseUrl:l=null}){this.constructor===B&&(0,o.unreachable)("Cannot initialize BaseStandardFontDataFactory."),this.baseUrl=l}async fetch({filename:l}){if(!this.baseUrl)throw new Error('The standard font "baseUrl" parameter must be specified, ensure that the "standardFontDataUrl" API parameter is provided.');if(!l)throw new Error("Font filename must be specified.");const h=`${this.baseUrl}${l}`;return this._fetchData(h).catch(b=>{throw new Error(`Unable to load font data at: ${h}`)})}_fetchData(l){(0,o.unreachable)("Abstract method `_fetchData` called.")}}u.BaseStandardFontDataFactory=B;class F{constructor(){this.constructor===F&&(0,o.unreachable)("Cannot initialize BaseSVGFactory.")}create(l,h,b=!1){if(l<=0||h<=0)throw new Error("Invalid SVG dimensions");const y=this._createSVG("svg:svg");return y.setAttribute("version","1.1"),b||(y.setAttribute("width",`${l}px`),y.setAttribute("height",`${h}px`)),y.setAttribute("preserveAspectRatio","none"),y.setAttribute("viewBox",`0 0 ${l} ${h}`),y}createElement(l){if(typeof l!="string")throw new Error("Invalid SVG element type");return this._createSVG(l)}_createSVG(l){(0,o.unreachable)("Abstract method `_createSVG` called.")}}u.BaseSVGFactory=F}),((_,u,M)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.MurmurHash3_64=void 0;var o=M(1);const E=3285377520,O=4294901760,D=65535;class B{constructor(d){this.h1=d?d&4294967295:E,this.h2=d?d&4294967295:E}update(d){let l,h;if(typeof d=="string"){l=new Uint8Array(d.length*2),h=0;for(let $=0,rt=d.length;$<rt;$++){const et=d.charCodeAt($);et<=255?l[h++]=et:(l[h++]=et>>>8,l[h++]=et&255)}}else if((0,o.isArrayBuffer)(d))l=d.slice(),h=l.byteLength;else throw new Error("Wrong data format in MurmurHash3_64_update. Input must be a string or array.");const b=h>>2,y=h-b*4,f=new Uint32Array(l.buffer,0,b);let A=0,j=0,x=this.h1,U=this.h2;const Z=3432918353,V=461845907,T=Z&D,z=V&D;for(let $=0;$<b;$++)$&1?(A=f[$],A=A*Z&O|A*T&D,A=A<<15|A>>>17,A=A*V&O|A*z&D,x^=A,x=x<<13|x>>>19,x=x*5+3864292196):(j=f[$],j=j*Z&O|j*T&D,j=j<<15|j>>>17,j=j*V&O|j*z&D,U^=j,U=U<<13|U>>>19,U=U*5+3864292196);switch(A=0,y){case 3:A^=l[b*4+2]<<16;case 2:A^=l[b*4+1]<<8;case 1:A^=l[b*4],A=A*Z&O|A*T&D,A=A<<15|A>>>17,A=A*V&O|A*z&D,b&1?x^=A:U^=A}this.h1=x,this.h2=U}hexdigest(){let d=this.h1,l=this.h2;return d^=l>>>1,d=d*3981806797&O|d*36045&D,l=l*4283543511&O|((l<<16|d>>>16)*2950163797&O)>>>16,d^=l>>>1,d=d*444984403&O|d*60499&D,l=l*3301882366&O|((l<<16|d>>>16)*3120437893&O)>>>16,d^=l>>>1,(d>>>0).toString(16).padStart(8,"0")+(l>>>0).toString(16).padStart(8,"0")}}u.MurmurHash3_64=B}),((_,u,M)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.FontLoader=u.FontFaceObject=void 0;var o=M(1);class E{#t=new Set;constructor({ownerDocument:B=globalThis.document,styleElement:F=null}){this._document=B,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(B){this.nativeFontFaces.add(B),this._document.fonts.add(B)}removeNativeFontFace(B){this.nativeFontFaces.delete(B),this._document.fonts.delete(B)}insertRule(B){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const F=this.styleElement.sheet;F.insertRule(B,F.cssRules.length)}clear(){for(const B of this.nativeFontFaces)this._document.fonts.delete(B);this.nativeFontFaces.clear(),this.#t.clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont(B){if(!(!B||this.#t.has(B.loadedName))){if((0,o.assert)(!this.disableFontFace,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:F,src:d,style:l}=B,h=new FontFace(F,d,l);this.addNativeFontFace(h);try{await h.load(),this.#t.add(F)}catch{(0,o.warn)(`Cannot load system font: ${B.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(h)}return}(0,o.unreachable)("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(B){if(B.attached||B.missingFile&&!B.systemFontInfo)return;if(B.attached=!0,B.systemFontInfo){await this.loadSystemFont(B.systemFontInfo);return}if(this.isFontLoadingAPISupported){const d=B.createNativeFontFace();if(d){this.addNativeFontFace(d);try{await d.loaded}catch(l){throw(0,o.warn)(`Failed to load font '${d.family}': '${l}'.`),B.disableFontFace=!0,l}}return}const F=B.createFontFaceRule();if(F){if(this.insertRule(F),this.isSyncFontLoadingSupported)return;await new Promise(d=>{const l=this._queueLoadingCallback(d);this._prepareFontLoadEvent(B,l)})}}get isFontLoadingAPISupported(){const B=!!this._document?.fonts;return(0,o.shadow)(this,"isFontLoadingAPISupported",B)}get isSyncFontLoadingSupported(){let B=!1;return(o.isNodeJS||typeof navigator<"u"&&/Mozilla\/5.0.*?rv:\d+.*? Gecko/.test(navigator.userAgent))&&(B=!0),(0,o.shadow)(this,"isSyncFontLoadingSupported",B)}_queueLoadingCallback(B){function F(){for((0,o.assert)(!l.done,"completeRequest() cannot be called twice."),l.done=!0;d.length>0&&d[0].done;){const h=d.shift();setTimeout(h.callback,0)}}const{loadingRequests:d}=this,l={done:!1,complete:F,callback:B};return d.push(l),l}get _loadTestFont(){const B=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return(0,o.shadow)(this,"_loadTestFont",B)}_prepareFontLoadEvent(B,F){function d(yt,gt){return yt.charCodeAt(gt)<<24|yt.charCodeAt(gt+1)<<16|yt.charCodeAt(gt+2)<<8|yt.charCodeAt(gt+3)&255}function l(yt,gt,kt,At){const Ft=yt.substring(0,gt),Kt=yt.substring(gt+kt);return Ft+At+Kt}let h,b;const y=this._document.createElement("canvas");y.width=1,y.height=1;const f=y.getContext("2d");let A=0;function j(yt,gt){if(++A>30){(0,o.warn)("Load test font never loaded."),gt();return}if(f.font="30px "+yt,f.fillText(".",0,20),f.getImageData(0,0,1,1).data[3]>0){gt();return}setTimeout(j.bind(null,yt,gt))}const x=`lt${Date.now()}${this.loadTestFontId++}`;let U=this._loadTestFont;U=l(U,976,x.length,x);const V=16,T=1482184792;let z=d(U,V);for(h=0,b=x.length-3;h<b;h+=4)z=z-T+d(x,h)|0;h<x.length&&(z=z-T+d(x+"XXX",h)|0),U=l(U,V,4,(0,o.string32)(z));const $=`url(data:font/opentype;base64,${btoa(U)});`,rt=`@font-face {font-family:"${x}";src:${$}}`;this.insertRule(rt);const et=this._document.createElement("div");et.style.visibility="hidden",et.style.width=et.style.height="10px",et.style.position="absolute",et.style.top=et.style.left="0px";for(const yt of[B.loadedName,x]){const gt=this._document.createElement("span");gt.textContent="Hi",gt.style.fontFamily=yt,et.append(gt)}this._document.body.append(et),j(x,()=>{et.remove(),F.complete()})}}u.FontLoader=E;class O{constructor(B,{isEvalSupported:F=!0,disableFontFace:d=!1,ignoreErrors:l=!1,inspectFont:h=null}){this.compiledGlyphs=Object.create(null);for(const b in B)this[b]=B[b];this.isEvalSupported=F!==!1,this.disableFontFace=d===!0,this.ignoreErrors=l===!0,this._inspectFont=h}createNativeFontFace(){if(!this.data||this.disableFontFace)return null;let B;if(!this.cssFontInfo)B=new FontFace(this.loadedName,this.data,{});else{const F={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(F.style=`oblique ${this.cssFontInfo.italicAngle}deg`),B=new FontFace(this.cssFontInfo.fontFamily,this.data,F)}return this._inspectFont?.(this),B}createFontFaceRule(){if(!this.data||this.disableFontFace)return null;const B=(0,o.bytesToString)(this.data),F=`url(data:${this.mimetype};base64,${btoa(B)});`;let d;if(!this.cssFontInfo)d=`@font-face {font-family:"${this.loadedName}";src:${F}}`;else{let l=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(l+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),d=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${l}src:${F}}`}return this._inspectFont?.(this,F),d}getPathGenerator(B,F){if(this.compiledGlyphs[F]!==void 0)return this.compiledGlyphs[F];let d;try{d=B.get(this.loadedName+"_path_"+F)}catch(l){if(!this.ignoreErrors)throw l;return(0,o.warn)(`getPathGenerator - ignoring character: "${l}".`),this.compiledGlyphs[F]=function(h,b){}}if(this.isEvalSupported&&o.FeatureTest.isEvalSupported){const l=[];for(const h of d){const b=h.args!==void 0?h.args.join(","):"";l.push("c.",h.cmd,"(",b,`);
`)}return this.compiledGlyphs[F]=new Function("c","size",l.join(""))}return this.compiledGlyphs[F]=function(l,h){for(const b of d)b.cmd==="scale"&&(b.args=[h,-h]),l[b.cmd].apply(l,b.args)}}}u.FontFaceObject=O}),((_,u,M)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.NodeStandardFontDataFactory=u.NodeFilterFactory=u.NodeCanvasFactory=u.NodeCMapReaderFactory=void 0;var o=M(7);M(1);const E=function(d){return new Promise((l,h)=>{require$$5.readFile(d,(y,f)=>{if(y||!f){h(new Error(y));return}l(new Uint8Array(f))})})};class O extends o.BaseFilterFactory{}u.NodeFilterFactory=O;class D extends o.BaseCanvasFactory{_createCanvas(l,h){return require$$5.createCanvas(l,h)}}u.NodeCanvasFactory=D;class B extends o.BaseCMapReaderFactory{_fetchData(l,h){return E(l).then(b=>({cMapData:b,compressionType:h}))}}u.NodeCMapReaderFactory=B;class F extends o.BaseStandardFontDataFactory{_fetchData(l){return E(l)}}u.NodeStandardFontDataFactory=F}),((_,u,M)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.CanvasGraphics=void 0;var o=M(1),E=M(6),O=M(12),D=M(13);const B=16,F=100,d=4096,l=15,h=10,b=1e3,y=16;function f(N,w){if(N._removeMirroring)throw new Error("Context is already forwarding operations.");N.__originalSave=N.save,N.__originalRestore=N.restore,N.__originalRotate=N.rotate,N.__originalScale=N.scale,N.__originalTranslate=N.translate,N.__originalTransform=N.transform,N.__originalSetTransform=N.setTransform,N.__originalResetTransform=N.resetTransform,N.__originalClip=N.clip,N.__originalMoveTo=N.moveTo,N.__originalLineTo=N.lineTo,N.__originalBezierCurveTo=N.bezierCurveTo,N.__originalRect=N.rect,N.__originalClosePath=N.closePath,N.__originalBeginPath=N.beginPath,N._removeMirroring=()=>{N.save=N.__originalSave,N.restore=N.__originalRestore,N.rotate=N.__originalRotate,N.scale=N.__originalScale,N.translate=N.__originalTranslate,N.transform=N.__originalTransform,N.setTransform=N.__originalSetTransform,N.resetTransform=N.__originalResetTransform,N.clip=N.__originalClip,N.moveTo=N.__originalMoveTo,N.lineTo=N.__originalLineTo,N.bezierCurveTo=N.__originalBezierCurveTo,N.rect=N.__originalRect,N.closePath=N.__originalClosePath,N.beginPath=N.__originalBeginPath,delete N._removeMirroring},N.save=function(){w.save(),this.__originalSave()},N.restore=function(){w.restore(),this.__originalRestore()},N.translate=function(g,L){w.translate(g,L),this.__originalTranslate(g,L)},N.scale=function(g,L){w.scale(g,L),this.__originalScale(g,L)},N.transform=function(g,L,H,J,K,m){w.transform(g,L,H,J,K,m),this.__originalTransform(g,L,H,J,K,m)},N.setTransform=function(g,L,H,J,K,m){w.setTransform(g,L,H,J,K,m),this.__originalSetTransform(g,L,H,J,K,m)},N.resetTransform=function(){w.resetTransform(),this.__originalResetTransform()},N.rotate=function(g){w.rotate(g),this.__originalRotate(g)},N.clip=function(g){w.clip(g),this.__originalClip(g)},N.moveTo=function(R,g){w.moveTo(R,g),this.__originalMoveTo(R,g)},N.lineTo=function(R,g){w.lineTo(R,g),this.__originalLineTo(R,g)},N.bezierCurveTo=function(R,g,L,H,J,K){w.bezierCurveTo(R,g,L,H,J,K),this.__originalBezierCurveTo(R,g,L,H,J,K)},N.rect=function(R,g,L,H){w.rect(R,g,L,H),this.__originalRect(R,g,L,H)},N.closePath=function(){w.closePath(),this.__originalClosePath()},N.beginPath=function(){w.beginPath(),this.__originalBeginPath()}}class A{constructor(w){this.canvasFactory=w,this.cache=Object.create(null)}getCanvas(w,R,g){let L;return this.cache[w]!==void 0?(L=this.cache[w],this.canvasFactory.reset(L,R,g)):(L=this.canvasFactory.create(R,g),this.cache[w]=L),L}delete(w){delete this.cache[w]}clear(){for(const w in this.cache){const R=this.cache[w];this.canvasFactory.destroy(R),delete this.cache[w]}}}function j(N,w,R,g,L,H,J,K,m,k){const[I,W,G,it,at,Ct]=(0,E.getCurrentTransform)(N);if(W===0&&G===0){const Dt=J*I+at,Pt=Math.round(Dt),Lt=K*it+Ct,Ut=Math.round(Lt),Qt=(J+m)*I+at,$t=Math.abs(Math.round(Qt)-Pt)||1,se=(K+k)*it+Ct,le=Math.abs(Math.round(se)-Ut)||1;return N.setTransform(Math.sign(I),0,0,Math.sign(it),Pt,Ut),N.drawImage(w,R,g,L,H,0,0,$t,le),N.setTransform(I,W,G,it,at,Ct),[$t,le]}if(I===0&&it===0){const Dt=K*G+at,Pt=Math.round(Dt),Lt=J*W+Ct,Ut=Math.round(Lt),Qt=(K+k)*G+at,$t=Math.abs(Math.round(Qt)-Pt)||1,se=(J+m)*W+Ct,le=Math.abs(Math.round(se)-Ut)||1;return N.setTransform(0,Math.sign(W),Math.sign(G),0,Pt,Ut),N.drawImage(w,R,g,L,H,0,0,le,$t),N.setTransform(I,W,G,it,at,Ct),[le,$t]}N.drawImage(w,R,g,L,H,J,K,m,k);const Yt=Math.hypot(I,W),Rt=Math.hypot(G,it);return[Yt*m,Rt*k]}function x(N){const{width:w,height:R}=N;if(w>b||R>b)return null;const g=1e3,L=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),H=w+1;let J=new Uint8Array(H*(R+1)),K,m,k;const I=w+7&-8;let W=new Uint8Array(I*R),G=0;for(const Rt of N.data){let Dt=128;for(;Dt>0;)W[G++]=Rt&Dt?0:255,Dt>>=1}let it=0;for(G=0,W[G]!==0&&(J[0]=1,++it),m=1;m<w;m++)W[G]!==W[G+1]&&(J[m]=W[G]?2:1,++it),G++;for(W[G]!==0&&(J[m]=2,++it),K=1;K<R;K++){G=K*I,k=K*H,W[G-I]!==W[G]&&(J[k]=W[G]?1:8,++it);let Rt=(W[G]?4:0)+(W[G-I]?8:0);for(m=1;m<w;m++)Rt=(Rt>>2)+(W[G+1]?4:0)+(W[G-I+1]?8:0),L[Rt]&&(J[k+m]=L[Rt],++it),G++;if(W[G-I]!==W[G]&&(J[k+m]=W[G]?2:4,++it),it>g)return null}for(G=I*(R-1),k=K*H,W[G]!==0&&(J[k]=8,++it),m=1;m<w;m++)W[G]!==W[G+1]&&(J[k+m]=W[G]?4:8,++it),G++;if(W[G]!==0&&(J[k+m]=4,++it),it>g)return null;const at=new Int32Array([0,H,-1,0,-H,0,0,0,1]),Ct=new Path2D;for(K=0;it&&K<=R;K++){let Rt=K*H;const Dt=Rt+w;for(;Rt<Dt&&!J[Rt];)Rt++;if(Rt===Dt)continue;Ct.moveTo(Rt%H,K);const Pt=Rt;let Lt=J[Rt];do{const Ut=at[Lt];do Rt+=Ut;while(!J[Rt]);const Qt=J[Rt];Qt!==5&&Qt!==10?(Lt=Qt,J[Rt]=0):(Lt=Qt&51*Lt>>4,J[Rt]&=Lt>>2|Lt<<2),Ct.lineTo(Rt%H,Rt/H|0),J[Rt]||--it}while(Pt!==Rt);--K}return W=null,J=null,function(Rt){Rt.save(),Rt.scale(1/w,-1/R),Rt.translate(0,-R),Rt.fill(Ct),Rt.beginPath(),Rt.restore()}}class U{constructor(w,R){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=o.IDENTITY_MATRIX,this.textMatrixScale=1,this.fontMatrix=o.FONT_IDENTITY_MATRIX,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=o.TextRenderingMode.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps="none",this.startNewPathAndClipBox([0,0,w,R])}clone(){const w=Object.create(this);return w.clipBox=this.clipBox.slice(),w}setCurrentPoint(w,R){this.x=w,this.y=R}updatePathMinMax(w,R,g){[R,g]=o.Util.applyTransform([R,g],w),this.minX=Math.min(this.minX,R),this.minY=Math.min(this.minY,g),this.maxX=Math.max(this.maxX,R),this.maxY=Math.max(this.maxY,g)}updateRectMinMax(w,R){const g=o.Util.applyTransform(R,w),L=o.Util.applyTransform(R.slice(2),w);this.minX=Math.min(this.minX,g[0],L[0]),this.minY=Math.min(this.minY,g[1],L[1]),this.maxX=Math.max(this.maxX,g[0],L[0]),this.maxY=Math.max(this.maxY,g[1],L[1])}updateScalingPathMinMax(w,R){o.Util.scaleMinMax(w,R),this.minX=Math.min(this.minX,R[0]),this.maxX=Math.max(this.maxX,R[1]),this.minY=Math.min(this.minY,R[2]),this.maxY=Math.max(this.maxY,R[3])}updateCurvePathMinMax(w,R,g,L,H,J,K,m,k,I){const W=o.Util.bezierBoundingBox(R,g,L,H,J,K,m,k);if(I){I[0]=Math.min(I[0],W[0],W[2]),I[1]=Math.max(I[1],W[0],W[2]),I[2]=Math.min(I[2],W[1],W[3]),I[3]=Math.max(I[3],W[1],W[3]);return}this.updateRectMinMax(w,W)}getPathBoundingBox(w=O.PathType.FILL,R=null){const g=[this.minX,this.minY,this.maxX,this.maxY];if(w===O.PathType.STROKE){R||(0,o.unreachable)("Stroke bounding box must include transform.");const L=o.Util.singularValueDecompose2dScale(R),H=L[0]*this.lineWidth/2,J=L[1]*this.lineWidth/2;g[0]-=H,g[1]-=J,g[2]+=H,g[3]+=J}return g}updateClipFromPath(){const w=o.Util.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(w||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(w){this.clipBox=w,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(w=O.PathType.FILL,R=null){return o.Util.intersect(this.clipBox,this.getPathBoundingBox(w,R))}}function Z(N,w){if(typeof ImageData<"u"&&w instanceof ImageData){N.putImageData(w,0,0);return}const R=w.height,g=w.width,L=R%y,H=(R-L)/y,J=L===0?H:H+1,K=N.createImageData(g,y);let m=0,k;const I=w.data,W=K.data;let G,it,at,Ct;if(w.kind===o.ImageKind.GRAYSCALE_1BPP){const Yt=I.byteLength,Rt=new Uint32Array(W.buffer,0,W.byteLength>>2),Dt=Rt.length,Pt=g+7>>3,Lt=4294967295,Ut=o.FeatureTest.isLittleEndian?4278190080:255;for(G=0;G<J;G++){for(at=G<H?y:L,k=0,it=0;it<at;it++){const Qt=Yt-m;let $t=0;const se=Qt>Pt?g:Qt*8-7,le=se&-8;let oe=0,_e=0;for(;$t<le;$t+=8)_e=I[m++],Rt[k++]=_e&128?Lt:Ut,Rt[k++]=_e&64?Lt:Ut,Rt[k++]=_e&32?Lt:Ut,Rt[k++]=_e&16?Lt:Ut,Rt[k++]=_e&8?Lt:Ut,Rt[k++]=_e&4?Lt:Ut,Rt[k++]=_e&2?Lt:Ut,Rt[k++]=_e&1?Lt:Ut;for(;$t<se;$t++)oe===0&&(_e=I[m++],oe=128),Rt[k++]=_e&oe?Lt:Ut,oe>>=1}for(;k<Dt;)Rt[k++]=0;N.putImageData(K,0,G*y)}}else if(w.kind===o.ImageKind.RGBA_32BPP){for(it=0,Ct=g*y*4,G=0;G<H;G++)W.set(I.subarray(m,m+Ct)),m+=Ct,N.putImageData(K,0,it),it+=y;G<J&&(Ct=g*L*4,W.set(I.subarray(m,m+Ct)),N.putImageData(K,0,it))}else if(w.kind===o.ImageKind.RGB_24BPP)for(at=y,Ct=g*at,G=0;G<J;G++){for(G>=H&&(at=L,Ct=g*at),k=0,it=Ct;it--;)W[k++]=I[m++],W[k++]=I[m++],W[k++]=I[m++],W[k++]=255;N.putImageData(K,0,G*y)}else throw new Error(`bad image kind: ${w.kind}`)}function V(N,w){if(w.bitmap){N.drawImage(w.bitmap,0,0);return}const R=w.height,g=w.width,L=R%y,H=(R-L)/y,J=L===0?H:H+1,K=N.createImageData(g,y);let m=0;const k=w.data,I=K.data;for(let W=0;W<J;W++){const G=W<H?y:L;({srcPos:m}=(0,D.convertBlackAndWhiteToRGBA)({src:k,srcPos:m,dest:I,width:g,height:G,nonBlackColor:0})),N.putImageData(K,0,W*y)}}function T(N,w){const R=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const g of R)N[g]!==void 0&&(w[g]=N[g]);N.setLineDash!==void 0&&(w.setLineDash(N.getLineDash()),w.lineDashOffset=N.lineDashOffset)}function z(N){if(N.strokeStyle=N.fillStyle="#000000",N.fillRule="nonzero",N.globalAlpha=1,N.lineWidth=1,N.lineCap="butt",N.lineJoin="miter",N.miterLimit=10,N.globalCompositeOperation="source-over",N.font="10px sans-serif",N.setLineDash!==void 0&&(N.setLineDash([]),N.lineDashOffset=0),!o.isNodeJS){const{filter:w}=N;w!=="none"&&w!==""&&(N.filter="none")}}function $(N,w,R,g){const L=N.length;for(let H=3;H<L;H+=4){const J=N[H];if(J===0)N[H-3]=w,N[H-2]=R,N[H-1]=g;else if(J<255){const K=255-J;N[H-3]=N[H-3]*J+w*K>>8,N[H-2]=N[H-2]*J+R*K>>8,N[H-1]=N[H-1]*J+g*K>>8}}}function rt(N,w,R){const g=N.length,L=1/255;for(let H=3;H<g;H+=4){const J=R?R[N[H]]:N[H];w[H]=w[H]*J*L|0}}function et(N,w,R){const g=N.length;for(let L=3;L<g;L+=4){const H=N[L-3]*77+N[L-2]*152+N[L-1]*28;w[L]=R?w[L]*R[H>>8]>>8:w[L]*H>>16}}function yt(N,w,R,g,L,H,J,K,m,k,I){const W=!!H,G=W?H[0]:0,it=W?H[1]:0,at=W?H[2]:0,Ct=L==="Luminosity"?et:rt,Rt=Math.min(g,Math.ceil(1048576/R));for(let Dt=0;Dt<g;Dt+=Rt){const Pt=Math.min(Rt,g-Dt),Lt=N.getImageData(K-k,Dt+(m-I),R,Pt),Ut=w.getImageData(K,Dt+m,R,Pt);W&&$(Lt.data,G,it,at),Ct(Lt.data,Ut.data,J),w.putImageData(Ut,K,Dt+m)}}function gt(N,w,R,g){const L=g[0],H=g[1],J=g[2]-L,K=g[3]-H;J===0||K===0||(yt(w.context,R,J,K,w.subtype,w.backdrop,w.transferMap,L,H,w.offsetX,w.offsetY),N.save(),N.globalAlpha=1,N.globalCompositeOperation="source-over",N.setTransform(1,0,0,1,0,0),N.drawImage(R.canvas,0,0),N.restore())}function kt(N,w){const R=o.Util.singularValueDecompose2dScale(N);R[0]=Math.fround(R[0]),R[1]=Math.fround(R[1]);const g=Math.fround((globalThis.devicePixelRatio||1)*E.PixelsPerInch.PDF_TO_CSS_UNITS);return w!==void 0?w:R[0]<=g||R[1]<=g}const At=["butt","round","square"],Ft=["miter","round","bevel"],Kt={},nt={};class Y{constructor(w,R,g,L,H,{optionalContentConfig:J,markedContentStack:K=null},m,k){this.ctx=w,this.current=new U(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=R,this.objs=g,this.canvasFactory=L,this.filterFactory=H,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=K||[],this.optionalContentConfig=J,this.cachedCanvases=new A(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=m,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=k,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(w,R=null){return typeof w=="string"?w.startsWith("g_")?this.commonObjs.get(w):this.objs.get(w):R}beginDrawing({transform:w,viewport:R,transparency:g=!1,background:L=null}){const H=this.ctx.canvas.width,J=this.ctx.canvas.height,K=this.ctx.fillStyle;if(this.ctx.fillStyle=L||"#ffffff",this.ctx.fillRect(0,0,H,J),this.ctx.fillStyle=K,g){const m=this.cachedCanvases.getCanvas("transparent",H,J);this.compositeCtx=this.ctx,this.transparentCanvas=m.canvas,this.ctx=m.context,this.ctx.save(),this.ctx.transform(...(0,E.getCurrentTransform)(this.compositeCtx))}this.ctx.save(),z(this.ctx),w&&(this.ctx.transform(...w),this.outputScaleX=w[0],this.outputScaleY=w[0]),this.ctx.transform(...R.transform),this.viewportScale=R.scale,this.baseTransform=(0,E.getCurrentTransform)(this.ctx)}executeOperatorList(w,R,g,L){const H=w.argsArray,J=w.fnArray;let K=R||0;const m=H.length;if(m===K)return K;const k=m-K>h&&typeof g=="function",I=k?Date.now()+l:0;let W=0;const G=this.commonObjs,it=this.objs;let at;for(;;){if(L!==void 0&&K===L.nextBreakPoint)return L.breakIt(K,g),K;if(at=J[K],at!==o.OPS.dependency)this[at].apply(this,H[K]);else for(const Ct of H[K]){const Yt=Ct.startsWith("g_")?G:it;if(!Yt.has(Ct))return Yt.get(Ct,g),K}if(K++,K===m)return K;if(k&&++W>h){if(Date.now()>I)return g(),K;W=0}}}#t(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)}endDrawing(){this.#t(),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const w of this._cachedBitmapsMap.values()){for(const R of w.values())typeof HTMLCanvasElement<"u"&&R instanceof HTMLCanvasElement&&(R.width=R.height=0);w.clear()}this._cachedBitmapsMap.clear(),this.#e()}#e(){if(this.pageColors){const w=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(w!=="none"){const R=this.ctx.filter;this.ctx.filter=w,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=R}}}_scaleImage(w,R){const g=w.width,L=w.height;let H=Math.max(Math.hypot(R[0],R[1]),1),J=Math.max(Math.hypot(R[2],R[3]),1),K=g,m=L,k="prescale1",I,W;for(;H>2&&K>1||J>2&&m>1;){let G=K,it=m;H>2&&K>1&&(G=K>=16384?Math.floor(K/2)-1||1:Math.ceil(K/2),H/=K/G),J>2&&m>1&&(it=m>=16384?Math.floor(m/2)-1||1:Math.ceil(m)/2,J/=m/it),I=this.cachedCanvases.getCanvas(k,G,it),W=I.context,W.clearRect(0,0,G,it),W.drawImage(w,0,0,K,m,0,0,G,it),w=I.canvas,K=G,m=it,k=k==="prescale1"?"prescale2":"prescale1"}return{img:w,paintWidth:K,paintHeight:m}}_createMaskCanvas(w){const R=this.ctx,{width:g,height:L}=w,H=this.current.fillColor,J=this.current.patternFill,K=(0,E.getCurrentTransform)(R);let m,k,I,W;if((w.bitmap||w.data)&&w.count>1){const $t=w.bitmap||w.data.buffer;k=JSON.stringify(J?K:[K.slice(0,4),H]),m=this._cachedBitmapsMap.get($t),m||(m=new Map,this._cachedBitmapsMap.set($t,m));const se=m.get(k);if(se&&!J){const le=Math.round(Math.min(K[0],K[2])+K[4]),oe=Math.round(Math.min(K[1],K[3])+K[5]);return{canvas:se,offsetX:le,offsetY:oe}}I=se}I||(W=this.cachedCanvases.getCanvas("maskCanvas",g,L),V(W.context,w));let G=o.Util.transform(K,[1/g,0,0,-1/L,0,0]);G=o.Util.transform(G,[1,0,0,1,0,-L]);const it=o.Util.applyTransform([0,0],G),at=o.Util.applyTransform([g,L],G),Ct=o.Util.normalizeRect([it[0],it[1],at[0],at[1]]),Yt=Math.round(Ct[2]-Ct[0])||1,Rt=Math.round(Ct[3]-Ct[1])||1,Dt=this.cachedCanvases.getCanvas("fillCanvas",Yt,Rt),Pt=Dt.context,Lt=Math.min(it[0],at[0]),Ut=Math.min(it[1],at[1]);Pt.translate(-Lt,-Ut),Pt.transform(...G),I||(I=this._scaleImage(W.canvas,(0,E.getCurrentTransformInverse)(Pt)),I=I.img,m&&J&&m.set(k,I)),Pt.imageSmoothingEnabled=kt((0,E.getCurrentTransform)(Pt),w.interpolate),j(Pt,I,0,0,I.width,I.height,0,0,g,L),Pt.globalCompositeOperation="source-in";const Qt=o.Util.transform((0,E.getCurrentTransformInverse)(Pt),[1,0,0,1,-Lt,-Ut]);return Pt.fillStyle=J?H.getPattern(R,this,Qt,O.PathType.FILL):H,Pt.fillRect(0,0,g,L),m&&!J&&(this.cachedCanvases.delete("fillCanvas"),m.set(k,Dt.canvas)),{canvas:Dt.canvas,offsetX:Math.round(Lt),offsetY:Math.round(Ut)}}setLineWidth(w){w!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=w,this.ctx.lineWidth=w}setLineCap(w){this.ctx.lineCap=At[w]}setLineJoin(w){this.ctx.lineJoin=Ft[w]}setMiterLimit(w){this.ctx.miterLimit=w}setDash(w,R){const g=this.ctx;g.setLineDash!==void 0&&(g.setLineDash(w),g.lineDashOffset=R)}setRenderingIntent(w){}setFlatness(w){}setGState(w){for(const[R,g]of w)switch(R){case"LW":this.setLineWidth(g);break;case"LC":this.setLineCap(g);break;case"LJ":this.setLineJoin(g);break;case"ML":this.setMiterLimit(g);break;case"D":this.setDash(g[0],g[1]);break;case"RI":this.setRenderingIntent(g);break;case"FL":this.setFlatness(g);break;case"Font":this.setFont(g[0],g[1]);break;case"CA":this.current.strokeAlpha=g;break;case"ca":this.current.fillAlpha=g,this.ctx.globalAlpha=g;break;case"BM":this.ctx.globalCompositeOperation=g;break;case"SMask":this.current.activeSMask=g?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(g);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const w=this.inSMaskMode;this.current.activeSMask&&!w?this.beginSMaskMode():!this.current.activeSMask&&w&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const w=this.ctx.canvas.width,R=this.ctx.canvas.height,g="smaskGroupAt"+this.groupLevel,L=this.cachedCanvases.getCanvas(g,w,R);this.suspendedCtx=this.ctx,this.ctx=L.context;const H=this.ctx;H.setTransform(...(0,E.getCurrentTransform)(this.suspendedCtx)),T(this.suspendedCtx,H),f(H,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),T(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(w){if(!this.current.activeSMask)return;w?(w[0]=Math.floor(w[0]),w[1]=Math.floor(w[1]),w[2]=Math.ceil(w[2]),w[3]=Math.ceil(w[3])):w=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const R=this.current.activeSMask,g=this.suspendedCtx;gt(g,R,this.ctx,w),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}save(){this.inSMaskMode?(T(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();const w=this.current;this.stateStack.push(w),this.current=w.clone()}restore(){this.stateStack.length===0&&this.inSMaskMode&&this.endSMaskMode(),this.stateStack.length!==0&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),T(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null)}transform(w,R,g,L,H,J){this.ctx.transform(w,R,g,L,H,J),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(w,R,g){const L=this.ctx,H=this.current;let J=H.x,K=H.y,m,k;const I=(0,E.getCurrentTransform)(L),W=I[0]===0&&I[3]===0||I[1]===0&&I[2]===0,G=W?g.slice(0):null;for(let it=0,at=0,Ct=w.length;it<Ct;it++)switch(w[it]|0){case o.OPS.rectangle:J=R[at++],K=R[at++];const Yt=R[at++],Rt=R[at++],Dt=J+Yt,Pt=K+Rt;L.moveTo(J,K),Yt===0||Rt===0?L.lineTo(Dt,Pt):(L.lineTo(Dt,K),L.lineTo(Dt,Pt),L.lineTo(J,Pt)),W||H.updateRectMinMax(I,[J,K,Dt,Pt]),L.closePath();break;case o.OPS.moveTo:J=R[at++],K=R[at++],L.moveTo(J,K),W||H.updatePathMinMax(I,J,K);break;case o.OPS.lineTo:J=R[at++],K=R[at++],L.lineTo(J,K),W||H.updatePathMinMax(I,J,K);break;case o.OPS.curveTo:m=J,k=K,J=R[at+4],K=R[at+5],L.bezierCurveTo(R[at],R[at+1],R[at+2],R[at+3],J,K),H.updateCurvePathMinMax(I,m,k,R[at],R[at+1],R[at+2],R[at+3],J,K,G),at+=6;break;case o.OPS.curveTo2:m=J,k=K,L.bezierCurveTo(J,K,R[at],R[at+1],R[at+2],R[at+3]),H.updateCurvePathMinMax(I,m,k,J,K,R[at],R[at+1],R[at+2],R[at+3],G),J=R[at+2],K=R[at+3],at+=4;break;case o.OPS.curveTo3:m=J,k=K,J=R[at+2],K=R[at+3],L.bezierCurveTo(R[at],R[at+1],J,K,J,K),H.updateCurvePathMinMax(I,m,k,R[at],R[at+1],J,K,J,K,G),at+=4;break;case o.OPS.closePath:L.closePath();break}W&&H.updateScalingPathMinMax(I,G),H.setCurrentPoint(J,K)}closePath(){this.ctx.closePath()}stroke(w=!0){const R=this.ctx,g=this.current.strokeColor;R.globalAlpha=this.current.strokeAlpha,this.contentVisible&&(typeof g=="object"&&g?.getPattern?(R.save(),R.strokeStyle=g.getPattern(R,this,(0,E.getCurrentTransformInverse)(R),O.PathType.STROKE),this.rescaleAndStroke(!1),R.restore()):this.rescaleAndStroke(!0)),w&&this.consumePath(this.current.getClippedPathBoundingBox()),R.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(w=!0){const R=this.ctx,g=this.current.fillColor,L=this.current.patternFill;let H=!1;L&&(R.save(),R.fillStyle=g.getPattern(R,this,(0,E.getCurrentTransformInverse)(R),O.PathType.FILL),H=!0);const J=this.current.getClippedPathBoundingBox();this.contentVisible&&J!==null&&(this.pendingEOFill?(R.fill("evenodd"),this.pendingEOFill=!1):R.fill()),H&&R.restore(),w&&this.consumePath(J)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=Kt}eoClip(){this.pendingClip=nt}beginText(){this.current.textMatrix=o.IDENTITY_MATRIX,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const w=this.pendingTextPaths,R=this.ctx;if(w===void 0){R.beginPath();return}R.save(),R.beginPath();for(const g of w)R.setTransform(...g.transform),R.translate(g.x,g.y),g.addToPath(R,g.fontSize);R.restore(),R.clip(),R.beginPath(),delete this.pendingTextPaths}setCharSpacing(w){this.current.charSpacing=w}setWordSpacing(w){this.current.wordSpacing=w}setHScale(w){this.current.textHScale=w/100}setLeading(w){this.current.leading=-w}setFont(w,R){const g=this.commonObjs.get(w),L=this.current;if(!g)throw new Error(`Can't find font for ${w}`);if(L.fontMatrix=g.fontMatrix||o.FONT_IDENTITY_MATRIX,(L.fontMatrix[0]===0||L.fontMatrix[3]===0)&&(0,o.warn)("Invalid font matrix for font "+w),R<0?(R=-R,L.fontDirection=-1):L.fontDirection=1,this.current.font=g,this.current.fontSize=R,g.isType3Font)return;const H=g.loadedName||"sans-serif",J=g.systemFontInfo?.css||`"${H}", ${g.fallbackName}`;let K="normal";g.black?K="900":g.bold&&(K="bold");const m=g.italic?"italic":"normal";let k=R;R<B?k=B:R>F&&(k=F),this.current.fontSizeScale=R/k,this.ctx.font=`${m} ${K} ${k}px ${J}`}setTextRenderingMode(w){this.current.textRenderingMode=w}setTextRise(w){this.current.textRise=w}moveText(w,R){this.current.x=this.current.lineX+=w,this.current.y=this.current.lineY+=R}setLeadingMoveText(w,R){this.setLeading(-R),this.moveText(w,R)}setTextMatrix(w,R,g,L,H,J){this.current.textMatrix=[w,R,g,L,H,J],this.current.textMatrixScale=Math.hypot(w,R),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(w,R,g,L){const H=this.ctx,J=this.current,K=J.font,m=J.textRenderingMode,k=J.fontSize/J.fontSizeScale,I=m&o.TextRenderingMode.FILL_STROKE_MASK,W=!!(m&o.TextRenderingMode.ADD_TO_PATH_FLAG),G=J.patternFill&&!K.missingFile;let it;(K.disableFontFace||W||G)&&(it=K.getPathGenerator(this.commonObjs,w)),K.disableFontFace||G?(H.save(),H.translate(R,g),H.beginPath(),it(H,k),L&&H.setTransform(...L),(I===o.TextRenderingMode.FILL||I===o.TextRenderingMode.FILL_STROKE)&&H.fill(),(I===o.TextRenderingMode.STROKE||I===o.TextRenderingMode.FILL_STROKE)&&H.stroke(),H.restore()):((I===o.TextRenderingMode.FILL||I===o.TextRenderingMode.FILL_STROKE)&&H.fillText(w,R,g),(I===o.TextRenderingMode.STROKE||I===o.TextRenderingMode.FILL_STROKE)&&H.strokeText(w,R,g)),W&&(this.pendingTextPaths||=[]).push({transform:(0,E.getCurrentTransform)(H),x:R,y:g,fontSize:k,addToPath:it})}get isFontSubpixelAAEnabled(){const{context:w}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);w.scale(1.5,1),w.fillText("I",0,10);const R=w.getImageData(0,0,10,10).data;let g=!1;for(let L=3;L<R.length;L+=4)if(R[L]>0&&R[L]<255){g=!0;break}return(0,o.shadow)(this,"isFontSubpixelAAEnabled",g)}showText(w){const R=this.current,g=R.font;if(g.isType3Font)return this.showType3Text(w);const L=R.fontSize;if(L===0)return;const H=this.ctx,J=R.fontSizeScale,K=R.charSpacing,m=R.wordSpacing,k=R.fontDirection,I=R.textHScale*k,W=w.length,G=g.vertical,it=G?1:-1,at=g.defaultVMetrics,Ct=L*R.fontMatrix[0],Yt=R.textRenderingMode===o.TextRenderingMode.FILL&&!g.disableFontFace&&!R.patternFill;H.save(),H.transform(...R.textMatrix),H.translate(R.x,R.y+R.textRise),k>0?H.scale(I,-1):H.scale(I,1);let Rt;if(R.patternFill){H.save();const Qt=R.fillColor.getPattern(H,this,(0,E.getCurrentTransformInverse)(H),O.PathType.FILL);Rt=(0,E.getCurrentTransform)(H),H.restore(),H.fillStyle=Qt}let Dt=R.lineWidth;const Pt=R.textMatrixScale;if(Pt===0||Dt===0){const Qt=R.textRenderingMode&o.TextRenderingMode.FILL_STROKE_MASK;(Qt===o.TextRenderingMode.STROKE||Qt===o.TextRenderingMode.FILL_STROKE)&&(Dt=this.getSinglePixelWidth())}else Dt/=Pt;if(J!==1&&(H.scale(J,J),Dt/=J),H.lineWidth=Dt,g.isInvalidPDFjsFont){const Qt=[];let $t=0;for(const se of w)Qt.push(se.unicode),$t+=se.width;H.fillText(Qt.join(""),0,0),R.x+=$t*Ct*I,H.restore(),this.compose();return}let Lt=0,Ut;for(Ut=0;Ut<W;++Ut){const Qt=w[Ut];if(typeof Qt=="number"){Lt+=it*Qt*L/1e3;continue}let $t=!1;const se=(Qt.isSpace?m:0)+K,le=Qt.fontChar,oe=Qt.accent;let _e,je,Ue=Qt.width;if(G){const We=Qt.vmetric||at,En=-(Qt.vmetric?We[1]:Ue*.5)*Ct,xi=We[2]*Ct;Ue=We?-We[0]:Ue,_e=En/J,je=(Lt+xi)/J}else _e=Lt/J,je=0;if(g.remeasure&&Ue>0){const We=H.measureText(le).width*1e3/L*J;if(Ue<We&&this.isFontSubpixelAAEnabled){const En=Ue/We;$t=!0,H.save(),H.scale(En,1),_e/=En}else Ue!==We&&(_e+=(Ue-We)/2e3*L/J)}if(this.contentVisible&&(Qt.isInFont||g.missingFile)){if(Yt&&!oe)H.fillText(le,_e,je);else if(this.paintChar(le,_e,je,Rt),oe){const We=_e+L*oe.offset.x/J,En=je-L*oe.offset.y/J;this.paintChar(oe.fontChar,We,En,Rt)}}const Cn=G?Ue*Ct-se*k:Ue*Ct+se*k;Lt+=Cn,$t&&H.restore()}G?R.y-=Lt:R.x+=Lt*I,H.restore(),this.compose()}showType3Text(w){const R=this.ctx,g=this.current,L=g.font,H=g.fontSize,J=g.fontDirection,K=L.vertical?1:-1,m=g.charSpacing,k=g.wordSpacing,I=g.textHScale*J,W=g.fontMatrix||o.FONT_IDENTITY_MATRIX,G=w.length,it=g.textRenderingMode===o.TextRenderingMode.INVISIBLE;let at,Ct,Yt,Rt;if(!(it||H===0)){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,R.save(),R.transform(...g.textMatrix),R.translate(g.x,g.y),R.scale(I,J),at=0;at<G;++at){if(Ct=w[at],typeof Ct=="number"){Rt=K*Ct*H/1e3,this.ctx.translate(Rt,0),g.x+=Rt*I;continue}const Dt=(Ct.isSpace?k:0)+m,Pt=L.charProcOperatorList[Ct.operatorListId];if(!Pt){(0,o.warn)(`Type3 character "${Ct.operatorListId}" is not available.`);continue}this.contentVisible&&(this.processingType3=Ct,this.save(),R.scale(H,H),R.transform(...W),this.executeOperatorList(Pt),this.restore()),Yt=o.Util.applyTransform([Ct.width,0],W)[0]*H+Dt,R.translate(Yt,0),g.x+=Yt*I}R.restore(),this.processingType3=null}}setCharWidth(w,R){}setCharWidthAndBounds(w,R,g,L,H,J){this.ctx.rect(g,L,H-g,J-L),this.ctx.clip(),this.endPath()}getColorN_Pattern(w){let R;if(w[0]==="TilingPattern"){const g=w[1],L=this.baseTransform||(0,E.getCurrentTransform)(this.ctx),H={createCanvasGraphics:J=>new Y(J,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};R=new O.TilingPattern(w,g,this.ctx,H,L)}else R=this._getPattern(w[1],w[2]);return R}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments)}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(w,R,g){const L=o.Util.makeHexColor(w,R,g);this.ctx.strokeStyle=L,this.current.strokeColor=L}setFillRGBColor(w,R,g){const L=o.Util.makeHexColor(w,R,g);this.ctx.fillStyle=L,this.current.fillColor=L,this.current.patternFill=!1}_getPattern(w,R=null){let g;return this.cachedPatterns.has(w)?g=this.cachedPatterns.get(w):(g=(0,O.getShadingPattern)(this.getObject(w)),this.cachedPatterns.set(w,g)),R&&(g.matrix=R),g}shadingFill(w){if(!this.contentVisible)return;const R=this.ctx;this.save();const g=this._getPattern(w);R.fillStyle=g.getPattern(R,this,(0,E.getCurrentTransformInverse)(R),O.PathType.SHADING);const L=(0,E.getCurrentTransformInverse)(R);if(L){const{width:H,height:J}=R.canvas,[K,m,k,I]=o.Util.getAxialAlignedBoundingBox([0,0,H,J],L);this.ctx.fillRect(K,m,k-K,I-m)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){(0,o.unreachable)("Should not call beginInlineImage")}beginImageData(){(0,o.unreachable)("Should not call beginImageData")}paintFormXObjectBegin(w,R){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),Array.isArray(w)&&w.length===6&&this.transform(...w),this.baseTransform=(0,E.getCurrentTransform)(this.ctx),R)){const g=R[2]-R[0],L=R[3]-R[1];this.ctx.rect(R[0],R[1],g,L),this.current.updateRectMinMax((0,E.getCurrentTransform)(this.ctx),R),this.clip(),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(w){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const R=this.ctx;w.isolated||(0,o.info)("TODO: Support non-isolated groups."),w.knockout&&(0,o.warn)("Knockout groups not supported.");const g=(0,E.getCurrentTransform)(R);if(w.matrix&&R.transform(...w.matrix),!w.bbox)throw new Error("Bounding box is required.");let L=o.Util.getAxialAlignedBoundingBox(w.bbox,(0,E.getCurrentTransform)(R));const H=[0,0,R.canvas.width,R.canvas.height];L=o.Util.intersect(L,H)||[0,0,0,0];const J=Math.floor(L[0]),K=Math.floor(L[1]);let m=Math.max(Math.ceil(L[2])-J,1),k=Math.max(Math.ceil(L[3])-K,1),I=1,W=1;m>d&&(I=m/d,m=d),k>d&&(W=k/d,k=d),this.current.startNewPathAndClipBox([0,0,m,k]);let G="groupAt"+this.groupLevel;w.smask&&(G+="_smask_"+this.smaskCounter++%2);const it=this.cachedCanvases.getCanvas(G,m,k),at=it.context;at.scale(1/I,1/W),at.translate(-J,-K),at.transform(...g),w.smask?this.smaskStack.push({canvas:it.canvas,context:at,offsetX:J,offsetY:K,scaleX:I,scaleY:W,subtype:w.smask.subtype,backdrop:w.smask.backdrop,transferMap:w.smask.transferMap||null,startTransformInverse:null}):(R.setTransform(1,0,0,1,0,0),R.translate(J,K),R.scale(I,W),R.save()),T(R,at),this.ctx=at,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(R),this.groupLevel++}endGroup(w){if(!this.contentVisible)return;this.groupLevel--;const R=this.ctx,g=this.groupStack.pop();if(this.ctx=g,this.ctx.imageSmoothingEnabled=!1,w.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const L=(0,E.getCurrentTransform)(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...L);const H=o.Util.getAxialAlignedBoundingBox([0,0,R.canvas.width,R.canvas.height],L);this.ctx.drawImage(R.canvas,0,0),this.ctx.restore(),this.compose(H)}}beginAnnotation(w,R,g,L,H){if(this.#t(),z(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),Array.isArray(R)&&R.length===4){const J=R[2]-R[0],K=R[3]-R[1];if(H&&this.annotationCanvasMap){g=g.slice(),g[4]-=R[0],g[5]-=R[1],R=R.slice(),R[0]=R[1]=0,R[2]=J,R[3]=K;const[m,k]=o.Util.singularValueDecompose2dScale((0,E.getCurrentTransform)(this.ctx)),{viewportScale:I}=this,W=Math.ceil(J*this.outputScaleX*I),G=Math.ceil(K*this.outputScaleY*I);this.annotationCanvas=this.canvasFactory.create(W,G);const{canvas:it,context:at}=this.annotationCanvas;this.annotationCanvasMap.set(w,it),this.annotationCanvas.savedCtx=this.ctx,this.ctx=at,this.ctx.save(),this.ctx.setTransform(m,0,0,-k,0,K*k),z(this.ctx)}else z(this.ctx),this.ctx.rect(R[0],R[1],J,K),this.ctx.clip(),this.endPath()}this.current=new U(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...g),this.transform(...L)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),this.#e(),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(w){if(!this.contentVisible)return;const R=w.count;w=this.getObject(w.data,w),w.count=R;const g=this.ctx,L=this.processingType3;if(L&&(L.compiled===void 0&&(L.compiled=x(w)),L.compiled)){L.compiled(g);return}const H=this._createMaskCanvas(w),J=H.canvas;g.save(),g.setTransform(1,0,0,1,0,0),g.drawImage(J,H.offsetX,H.offsetY),g.restore(),this.compose()}paintImageMaskXObjectRepeat(w,R,g=0,L=0,H,J){if(!this.contentVisible)return;w=this.getObject(w.data,w);const K=this.ctx;K.save();const m=(0,E.getCurrentTransform)(K);K.transform(R,g,L,H,0,0);const k=this._createMaskCanvas(w);K.setTransform(1,0,0,1,k.offsetX-m[4],k.offsetY-m[5]);for(let I=0,W=J.length;I<W;I+=2){const G=o.Util.transform(m,[R,g,L,H,J[I],J[I+1]]),[it,at]=o.Util.applyTransform([0,0],G);K.drawImage(k.canvas,it,at)}K.restore(),this.compose()}paintImageMaskXObjectGroup(w){if(!this.contentVisible)return;const R=this.ctx,g=this.current.fillColor,L=this.current.patternFill;for(const H of w){const{data:J,width:K,height:m,transform:k}=H,I=this.cachedCanvases.getCanvas("maskCanvas",K,m),W=I.context;W.save();const G=this.getObject(J,H);V(W,G),W.globalCompositeOperation="source-in",W.fillStyle=L?g.getPattern(W,this,(0,E.getCurrentTransformInverse)(R),O.PathType.FILL):g,W.fillRect(0,0,K,m),W.restore(),R.save(),R.transform(...k),R.scale(1,-1),j(R,I.canvas,0,0,K,m,0,-1,1,1),R.restore()}this.compose()}paintImageXObject(w){if(!this.contentVisible)return;const R=this.getObject(w);if(!R){(0,o.warn)("Dependent image isn't ready yet");return}this.paintInlineImageXObject(R)}paintImageXObjectRepeat(w,R,g,L){if(!this.contentVisible)return;const H=this.getObject(w);if(!H){(0,o.warn)("Dependent image isn't ready yet");return}const J=H.width,K=H.height,m=[];for(let k=0,I=L.length;k<I;k+=2)m.push({transform:[R,0,0,g,L[k],L[k+1]],x:0,y:0,w:J,h:K});this.paintInlineImageXObjectGroup(H,m)}applyTransferMapsToCanvas(w){return this.current.transferMaps!=="none"&&(w.filter=this.current.transferMaps,w.drawImage(w.canvas,0,0),w.filter="none"),w.canvas}applyTransferMapsToBitmap(w){if(this.current.transferMaps==="none")return w.bitmap;const{bitmap:R,width:g,height:L}=w,H=this.cachedCanvases.getCanvas("inlineImage",g,L),J=H.context;return J.filter=this.current.transferMaps,J.drawImage(R,0,0),J.filter="none",H.canvas}paintInlineImageXObject(w){if(!this.contentVisible)return;const R=w.width,g=w.height,L=this.ctx;if(this.save(),!o.isNodeJS){const{filter:K}=L;K!=="none"&&K!==""&&(L.filter="none")}L.scale(1/R,-1/g);let H;if(w.bitmap)H=this.applyTransferMapsToBitmap(w);else if(typeof HTMLElement=="function"&&w instanceof HTMLElement||!w.data)H=w;else{const m=this.cachedCanvases.getCanvas("inlineImage",R,g).context;Z(m,w),H=this.applyTransferMapsToCanvas(m)}const J=this._scaleImage(H,(0,E.getCurrentTransformInverse)(L));L.imageSmoothingEnabled=kt((0,E.getCurrentTransform)(L),w.interpolate),j(L,J.img,0,0,J.paintWidth,J.paintHeight,0,-g,R,g),this.compose(),this.restore()}paintInlineImageXObjectGroup(w,R){if(!this.contentVisible)return;const g=this.ctx;let L;if(w.bitmap)L=w.bitmap;else{const H=w.width,J=w.height,m=this.cachedCanvases.getCanvas("inlineImage",H,J).context;Z(m,w),L=this.applyTransferMapsToCanvas(m)}for(const H of R)g.save(),g.transform(...H.transform),g.scale(1,-1),j(g,L,H.x,H.y,H.w,H.h,0,-1,1,1),g.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(w){}markPointProps(w,R){}beginMarkedContent(w){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(w,R){w==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(R)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(w){const R=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(w);const g=this.ctx;this.pendingClip&&(R||(this.pendingClip===nt?g.clip("evenodd"):g.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),g.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const w=(0,E.getCurrentTransform)(this.ctx);if(w[1]===0&&w[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(w[0]),Math.abs(w[3]));else{const R=Math.abs(w[0]*w[3]-w[2]*w[1]),g=Math.hypot(w[0],w[2]),L=Math.hypot(w[1],w[3]);this._cachedGetSinglePixelWidth=Math.max(g,L)/R}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:w}=this.current,{a:R,b:g,c:L,d:H}=this.ctx.getTransform();let J,K;if(g===0&&L===0){const m=Math.abs(R),k=Math.abs(H);if(m===k)if(w===0)J=K=1/m;else{const I=m*w;J=K=I<1?1/I:1}else if(w===0)J=1/m,K=1/k;else{const I=m*w,W=k*w;J=I<1?1/I:1,K=W<1?1/W:1}}else{const m=Math.abs(R*H-g*L),k=Math.hypot(R,g),I=Math.hypot(L,H);if(w===0)J=I/m,K=k/m;else{const W=w*m;J=I>W?I/W:1,K=k>W?k/W:1}}this._cachedScaleForStroking[0]=J,this._cachedScaleForStroking[1]=K}return this._cachedScaleForStroking}rescaleAndStroke(w){const{ctx:R}=this,{lineWidth:g}=this.current,[L,H]=this.getScaleForStroking();if(R.lineWidth=g||1,L===1&&H===1){R.stroke();return}const J=R.getLineDash();if(w&&R.save(),R.scale(L,H),J.length>0){const K=Math.max(L,H);R.setLineDash(J.map(m=>m/K)),R.lineDashOffset/=K}R.stroke(),w&&R.restore()}isContentVisible(){for(let w=this.markedContentStack.length-1;w>=0;w--)if(!this.markedContentStack[w].visible)return!1;return!0}}u.CanvasGraphics=Y;for(const N in o.OPS)Y.prototype[N]!==void 0&&(Y.prototype[o.OPS[N]]=Y.prototype[N])}),((_,u,M)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.TilingPattern=u.PathType=void 0,u.getShadingPattern=y;var o=M(1),E=M(6);const O={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};u.PathType=O;function D(j,x){if(!x)return;const U=x[2]-x[0],Z=x[3]-x[1],V=new Path2D;V.rect(x[0],x[1],U,Z),j.clip(V)}class B{constructor(){this.constructor===B&&(0,o.unreachable)("Cannot initialize BaseShadingPattern.")}getPattern(){(0,o.unreachable)("Abstract method `getPattern` called.")}}class F extends B{constructor(x){super(),this._type=x[1],this._bbox=x[2],this._colorStops=x[3],this._p0=x[4],this._p1=x[5],this._r0=x[6],this._r1=x[7],this.matrix=null}_createGradient(x){let U;this._type==="axial"?U=x.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(U=x.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const Z of this._colorStops)U.addColorStop(Z[0],Z[1]);return U}getPattern(x,U,Z,V){let T;if(V===O.STROKE||V===O.FILL){const z=U.current.getClippedPathBoundingBox(V,(0,E.getCurrentTransform)(x))||[0,0,0,0],$=Math.ceil(z[2]-z[0])||1,rt=Math.ceil(z[3]-z[1])||1,et=U.cachedCanvases.getCanvas("pattern",$,rt,!0),yt=et.context;yt.clearRect(0,0,yt.canvas.width,yt.canvas.height),yt.beginPath(),yt.rect(0,0,yt.canvas.width,yt.canvas.height),yt.translate(-z[0],-z[1]),Z=o.Util.transform(Z,[1,0,0,1,z[0],z[1]]),yt.transform(...U.baseTransform),this.matrix&&yt.transform(...this.matrix),D(yt,this._bbox),yt.fillStyle=this._createGradient(yt),yt.fill(),T=x.createPattern(et.canvas,"no-repeat");const gt=new DOMMatrix(Z);T.setTransform(gt)}else D(x,this._bbox),T=this._createGradient(x);return T}}function d(j,x,U,Z,V,T,z,$){const rt=x.coords,et=x.colors,yt=j.data,gt=j.width*4;let kt;rt[U+1]>rt[Z+1]&&(kt=U,U=Z,Z=kt,kt=T,T=z,z=kt),rt[Z+1]>rt[V+1]&&(kt=Z,Z=V,V=kt,kt=z,z=$,$=kt),rt[U+1]>rt[Z+1]&&(kt=U,U=Z,Z=kt,kt=T,T=z,z=kt);const At=(rt[U]+x.offsetX)*x.scaleX,Ft=(rt[U+1]+x.offsetY)*x.scaleY,Kt=(rt[Z]+x.offsetX)*x.scaleX,nt=(rt[Z+1]+x.offsetY)*x.scaleY,Y=(rt[V]+x.offsetX)*x.scaleX,N=(rt[V+1]+x.offsetY)*x.scaleY;if(Ft>=N)return;const w=et[T],R=et[T+1],g=et[T+2],L=et[z],H=et[z+1],J=et[z+2],K=et[$],m=et[$+1],k=et[$+2],I=Math.round(Ft),W=Math.round(N);let G,it,at,Ct,Yt,Rt,Dt,Pt;for(let Lt=I;Lt<=W;Lt++){if(Lt<nt){const le=Lt<Ft?0:(Ft-Lt)/(Ft-nt);G=At-(At-Kt)*le,it=w-(w-L)*le,at=R-(R-H)*le,Ct=g-(g-J)*le}else{let le;Lt>N?le=1:nt===N?le=0:le=(nt-Lt)/(nt-N),G=Kt-(Kt-Y)*le,it=L-(L-K)*le,at=H-(H-m)*le,Ct=J-(J-k)*le}let Ut;Lt<Ft?Ut=0:Lt>N?Ut=1:Ut=(Ft-Lt)/(Ft-N),Yt=At-(At-Y)*Ut,Rt=w-(w-K)*Ut,Dt=R-(R-m)*Ut,Pt=g-(g-k)*Ut;const Qt=Math.round(Math.min(G,Yt)),$t=Math.round(Math.max(G,Yt));let se=gt*Lt+Qt*4;for(let le=Qt;le<=$t;le++)Ut=(G-le)/(G-Yt),Ut<0?Ut=0:Ut>1&&(Ut=1),yt[se++]=it-(it-Rt)*Ut|0,yt[se++]=at-(at-Dt)*Ut|0,yt[se++]=Ct-(Ct-Pt)*Ut|0,yt[se++]=255}}function l(j,x,U){const Z=x.coords,V=x.colors;let T,z;switch(x.type){case"lattice":const $=x.verticesPerRow,rt=Math.floor(Z.length/$)-1,et=$-1;for(T=0;T<rt;T++){let yt=T*$;for(let gt=0;gt<et;gt++,yt++)d(j,U,Z[yt],Z[yt+1],Z[yt+$],V[yt],V[yt+1],V[yt+$]),d(j,U,Z[yt+$+1],Z[yt+1],Z[yt+$],V[yt+$+1],V[yt+1],V[yt+$])}break;case"triangles":for(T=0,z=Z.length;T<z;T+=3)d(j,U,Z[T],Z[T+1],Z[T+2],V[T],V[T+1],V[T+2]);break;default:throw new Error("illegal figure")}}class h extends B{constructor(x){super(),this._coords=x[2],this._colors=x[3],this._figures=x[4],this._bounds=x[5],this._bbox=x[7],this._background=x[8],this.matrix=null}_createMeshCanvas(x,U,Z){const $=Math.floor(this._bounds[0]),rt=Math.floor(this._bounds[1]),et=Math.ceil(this._bounds[2])-$,yt=Math.ceil(this._bounds[3])-rt,gt=Math.min(Math.ceil(Math.abs(et*x[0]*1.1)),3e3),kt=Math.min(Math.ceil(Math.abs(yt*x[1]*1.1)),3e3),At=et/gt,Ft=yt/kt,Kt={coords:this._coords,colors:this._colors,offsetX:-$,offsetY:-rt,scaleX:1/At,scaleY:1/Ft},nt=gt+4,Y=kt+4,N=Z.getCanvas("mesh",nt,Y,!1),w=N.context,R=w.createImageData(gt,kt);if(U){const L=R.data;for(let H=0,J=L.length;H<J;H+=4)L[H]=U[0],L[H+1]=U[1],L[H+2]=U[2],L[H+3]=255}for(const L of this._figures)l(R,L,Kt);return w.putImageData(R,2,2),{canvas:N.canvas,offsetX:$-2*At,offsetY:rt-2*Ft,scaleX:At,scaleY:Ft}}getPattern(x,U,Z,V){D(x,this._bbox);let T;if(V===O.SHADING)T=o.Util.singularValueDecompose2dScale((0,E.getCurrentTransform)(x));else if(T=o.Util.singularValueDecompose2dScale(U.baseTransform),this.matrix){const $=o.Util.singularValueDecompose2dScale(this.matrix);T=[T[0]*$[0],T[1]*$[1]]}const z=this._createMeshCanvas(T,V===O.SHADING?null:this._background,U.cachedCanvases);return V!==O.SHADING&&(x.setTransform(...U.baseTransform),this.matrix&&x.transform(...this.matrix)),x.translate(z.offsetX,z.offsetY),x.scale(z.scaleX,z.scaleY),x.createPattern(z.canvas,"no-repeat")}}class b extends B{getPattern(){return"hotpink"}}function y(j){switch(j[0]){case"RadialAxial":return new F(j);case"Mesh":return new h(j);case"Dummy":return new b}throw new Error(`Unknown IR type: ${j[0]}`)}const f={COLORED:1,UNCOLORED:2};class A{static MAX_PATTERN_SIZE=3e3;constructor(x,U,Z,V,T){this.operatorList=x[2],this.matrix=x[3]||[1,0,0,1,0,0],this.bbox=x[4],this.xstep=x[5],this.ystep=x[6],this.paintType=x[7],this.tilingType=x[8],this.color=U,this.ctx=Z,this.canvasGraphicsFactory=V,this.baseTransform=T}createPatternCanvas(x){const U=this.operatorList,Z=this.bbox,V=this.xstep,T=this.ystep,z=this.paintType,$=this.tilingType,rt=this.color,et=this.canvasGraphicsFactory;(0,o.info)("TilingType: "+$);const yt=Z[0],gt=Z[1],kt=Z[2],At=Z[3],Ft=o.Util.singularValueDecompose2dScale(this.matrix),Kt=o.Util.singularValueDecompose2dScale(this.baseTransform),nt=[Ft[0]*Kt[0],Ft[1]*Kt[1]],Y=this.getSizeAndScale(V,this.ctx.canvas.width,nt[0]),N=this.getSizeAndScale(T,this.ctx.canvas.height,nt[1]),w=x.cachedCanvases.getCanvas("pattern",Y.size,N.size,!0),R=w.context,g=et.createCanvasGraphics(R);g.groupLevel=x.groupLevel,this.setFillAndStrokeStyleToContext(g,z,rt);let L=yt,H=gt,J=kt,K=At;return yt<0&&(L=0,J+=Math.abs(yt)),gt<0&&(H=0,K+=Math.abs(gt)),R.translate(-(Y.scale*L),-(N.scale*H)),g.transform(Y.scale,0,0,N.scale,0,0),R.save(),this.clipBbox(g,L,H,J,K),g.baseTransform=(0,E.getCurrentTransform)(g.ctx),g.executeOperatorList(U),g.endDrawing(),{canvas:w.canvas,scaleX:Y.scale,scaleY:N.scale,offsetX:L,offsetY:H}}getSizeAndScale(x,U,Z){x=Math.abs(x);const V=Math.max(A.MAX_PATTERN_SIZE,U);let T=Math.ceil(x*Z);return T>=V?T=V:Z=T/x,{scale:Z,size:T}}clipBbox(x,U,Z,V,T){const z=V-U,$=T-Z;x.ctx.rect(U,Z,z,$),x.current.updateRectMinMax((0,E.getCurrentTransform)(x.ctx),[U,Z,V,T]),x.clip(),x.endPath()}setFillAndStrokeStyleToContext(x,U,Z){const V=x.ctx,T=x.current;switch(U){case f.COLORED:const z=this.ctx;V.fillStyle=z.fillStyle,V.strokeStyle=z.strokeStyle,T.fillColor=z.fillStyle,T.strokeColor=z.strokeStyle;break;case f.UNCOLORED:const $=o.Util.makeHexColor(Z[0],Z[1],Z[2]);V.fillStyle=$,V.strokeStyle=$,T.fillColor=$,T.strokeColor=$;break;default:throw new o.FormatError(`Unsupported paint type: ${U}`)}}getPattern(x,U,Z,V){let T=Z;V!==O.SHADING&&(T=o.Util.transform(T,U.baseTransform),this.matrix&&(T=o.Util.transform(T,this.matrix)));const z=this.createPatternCanvas(U);let $=new DOMMatrix(T);$=$.translate(z.offsetX,z.offsetY),$=$.scale(1/z.scaleX,1/z.scaleY);const rt=x.createPattern(z.canvas,"repeat");return rt.setTransform($),rt}}u.TilingPattern=A}),((_,u,M)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.convertBlackAndWhiteToRGBA=O,u.convertToRGBA=E,u.grayToRGBA=B;var o=M(1);function E(F){switch(F.kind){case o.ImageKind.GRAYSCALE_1BPP:return O(F);case o.ImageKind.RGB_24BPP:return D(F)}return null}function O({src:F,srcPos:d=0,dest:l,width:h,height:b,nonBlackColor:y=4294967295,inverseDecode:f=!1}){const A=o.FeatureTest.isLittleEndian?4278190080:255,[j,x]=f?[y,A]:[A,y],U=h>>3,Z=h&7,V=F.length;l=new Uint32Array(l.buffer);let T=0;for(let z=0;z<b;z++){for(const rt=d+U;d<rt;d++){const et=d<V?F[d]:255;l[T++]=et&128?x:j,l[T++]=et&64?x:j,l[T++]=et&32?x:j,l[T++]=et&16?x:j,l[T++]=et&8?x:j,l[T++]=et&4?x:j,l[T++]=et&2?x:j,l[T++]=et&1?x:j}if(Z===0)continue;const $=d<V?F[d++]:255;for(let rt=0;rt<Z;rt++)l[T++]=$&1<<7-rt?x:j}return{srcPos:d,destPos:T}}function D({src:F,srcPos:d=0,dest:l,destPos:h=0,width:b,height:y}){let f=0;const A=F.length>>2,j=new Uint32Array(F.buffer,d,A);if(o.FeatureTest.isLittleEndian){for(;f<A-2;f+=3,h+=4){const x=j[f],U=j[f+1],Z=j[f+2];l[h]=x|4278190080,l[h+1]=x>>>24|U<<8|4278190080,l[h+2]=U>>>16|Z<<16|4278190080,l[h+3]=Z>>>8|4278190080}for(let x=f*4,U=F.length;x<U;x+=3)l[h++]=F[x]|F[x+1]<<8|F[x+2]<<16|4278190080}else{for(;f<A-2;f+=3,h+=4){const x=j[f],U=j[f+1],Z=j[f+2];l[h]=x|255,l[h+1]=x<<24|U>>>8|255,l[h+2]=U<<16|Z>>>16|255,l[h+3]=Z<<8|255}for(let x=f*4,U=F.length;x<U;x+=3)l[h++]=F[x]<<24|F[x+1]<<16|F[x+2]<<8|255}return{srcPos:d,destPos:h}}function B(F,d){if(o.FeatureTest.isLittleEndian)for(let l=0,h=F.length;l<h;l++)d[l]=F[l]*65793|4278190080;else for(let l=0,h=F.length;l<h;l++)d[l]=F[l]*16843008|255}}),((_,u)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.GlobalWorkerOptions=void 0;const M=Object.create(null);u.GlobalWorkerOptions=M,M.workerPort=null,M.workerSrc=""}),((_,u,M)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.MessageHandler=void 0;var o=M(1);const E={DATA:1,ERROR:2},O={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function D(F){switch(F instanceof Error||typeof F=="object"&&F!==null||(0,o.unreachable)('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),F.name){case"AbortException":return new o.AbortException(F.message);case"MissingPDFException":return new o.MissingPDFException(F.message);case"PasswordException":return new o.PasswordException(F.message,F.code);case"UnexpectedResponseException":return new o.UnexpectedResponseException(F.message,F.status);case"UnknownErrorException":return new o.UnknownErrorException(F.message,F.details);default:return new o.UnknownErrorException(F.message,F.toString())}}class B{constructor(d,l,h){this.sourceName=d,this.targetName=l,this.comObj=h,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),this._onComObjOnMessage=b=>{const y=b.data;if(y.targetName!==this.sourceName)return;if(y.stream){this.#e(y);return}if(y.callback){const A=y.callbackId,j=this.callbackCapabilities[A];if(!j)throw new Error(`Cannot resolve callback ${A}`);if(delete this.callbackCapabilities[A],y.callback===E.DATA)j.resolve(y.data);else if(y.callback===E.ERROR)j.reject(D(y.reason));else throw new Error("Unexpected callback case");return}const f=this.actionHandler[y.action];if(!f)throw new Error(`Unknown action from worker: ${y.action}`);if(y.callbackId){const A=this.sourceName,j=y.sourceName;new Promise(function(x){x(f(y.data))}).then(function(x){h.postMessage({sourceName:A,targetName:j,callback:E.DATA,callbackId:y.callbackId,data:x})},function(x){h.postMessage({sourceName:A,targetName:j,callback:E.ERROR,callbackId:y.callbackId,reason:D(x)})});return}if(y.streamId){this.#t(y);return}f(y.data)},h.addEventListener("message",this._onComObjOnMessage)}on(d,l){const h=this.actionHandler;if(h[d])throw new Error(`There is already an actionName called "${d}"`);h[d]=l}send(d,l,h){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:d,data:l},h)}sendWithPromise(d,l,h){const b=this.callbackId++,y=new o.PromiseCapability;this.callbackCapabilities[b]=y;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:d,callbackId:b,data:l},h)}catch(f){y.reject(f)}return y.promise}sendWithStream(d,l,h,b){const y=this.streamId++,f=this.sourceName,A=this.targetName,j=this.comObj;return new ReadableStream({start:x=>{const U=new o.PromiseCapability;return this.streamControllers[y]={controller:x,startCall:U,pullCall:null,cancelCall:null,isClosed:!1},j.postMessage({sourceName:f,targetName:A,action:d,streamId:y,data:l,desiredSize:x.desiredSize},b),U.promise},pull:x=>{const U=new o.PromiseCapability;return this.streamControllers[y].pullCall=U,j.postMessage({sourceName:f,targetName:A,stream:O.PULL,streamId:y,desiredSize:x.desiredSize}),U.promise},cancel:x=>{(0,o.assert)(x instanceof Error,"cancel must have a valid reason");const U=new o.PromiseCapability;return this.streamControllers[y].cancelCall=U,this.streamControllers[y].isClosed=!0,j.postMessage({sourceName:f,targetName:A,stream:O.CANCEL,streamId:y,reason:D(x)}),U.promise}},h)}#t(d){const l=d.streamId,h=this.sourceName,b=d.sourceName,y=this.comObj,f=this,A=this.actionHandler[d.action],j={enqueue(x,U=1,Z){if(this.isCancelled)return;const V=this.desiredSize;this.desiredSize-=U,V>0&&this.desiredSize<=0&&(this.sinkCapability=new o.PromiseCapability,this.ready=this.sinkCapability.promise),y.postMessage({sourceName:h,targetName:b,stream:O.ENQUEUE,streamId:l,chunk:x},Z)},close(){this.isCancelled||(this.isCancelled=!0,y.postMessage({sourceName:h,targetName:b,stream:O.CLOSE,streamId:l}),delete f.streamSinks[l])},error(x){(0,o.assert)(x instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,y.postMessage({sourceName:h,targetName:b,stream:O.ERROR,streamId:l,reason:D(x)}))},sinkCapability:new o.PromiseCapability,onPull:null,onCancel:null,isCancelled:!1,desiredSize:d.desiredSize,ready:null};j.sinkCapability.resolve(),j.ready=j.sinkCapability.promise,this.streamSinks[l]=j,new Promise(function(x){x(A(d.data,j))}).then(function(){y.postMessage({sourceName:h,targetName:b,stream:O.START_COMPLETE,streamId:l,success:!0})},function(x){y.postMessage({sourceName:h,targetName:b,stream:O.START_COMPLETE,streamId:l,reason:D(x)})})}#e(d){const l=d.streamId,h=this.sourceName,b=d.sourceName,y=this.comObj,f=this.streamControllers[l],A=this.streamSinks[l];switch(d.stream){case O.START_COMPLETE:d.success?f.startCall.resolve():f.startCall.reject(D(d.reason));break;case O.PULL_COMPLETE:d.success?f.pullCall.resolve():f.pullCall.reject(D(d.reason));break;case O.PULL:if(!A){y.postMessage({sourceName:h,targetName:b,stream:O.PULL_COMPLETE,streamId:l,success:!0});break}A.desiredSize<=0&&d.desiredSize>0&&A.sinkCapability.resolve(),A.desiredSize=d.desiredSize,new Promise(function(j){j(A.onPull?.())}).then(function(){y.postMessage({sourceName:h,targetName:b,stream:O.PULL_COMPLETE,streamId:l,success:!0})},function(j){y.postMessage({sourceName:h,targetName:b,stream:O.PULL_COMPLETE,streamId:l,reason:D(j)})});break;case O.ENQUEUE:if((0,o.assert)(f,"enqueue should have stream controller"),f.isClosed)break;f.controller.enqueue(d.chunk);break;case O.CLOSE:if((0,o.assert)(f,"close should have stream controller"),f.isClosed)break;f.isClosed=!0,f.controller.close(),this.#n(f,l);break;case O.ERROR:(0,o.assert)(f,"error should have stream controller"),f.controller.error(D(d.reason)),this.#n(f,l);break;case O.CANCEL_COMPLETE:d.success?f.cancelCall.resolve():f.cancelCall.reject(D(d.reason)),this.#n(f,l);break;case O.CANCEL:if(!A)break;new Promise(function(j){j(A.onCancel?.(D(d.reason)))}).then(function(){y.postMessage({sourceName:h,targetName:b,stream:O.CANCEL_COMPLETE,streamId:l,success:!0})},function(j){y.postMessage({sourceName:h,targetName:b,stream:O.CANCEL_COMPLETE,streamId:l,reason:D(j)})}),A.sinkCapability.reject(D(d.reason)),A.isCancelled=!0,delete this.streamSinks[l];break;default:throw new Error("Unexpected stream case")}}async#n(d,l){await Promise.allSettled([d.startCall?.promise,d.pullCall?.promise,d.cancelCall?.promise]),delete this.streamControllers[l]}destroy(){this.comObj.removeEventListener("message",this._onComObjOnMessage)}}u.MessageHandler=B}),((_,u,M)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.Metadata=void 0;var o=M(1);class E{#t;#e;constructor({parsedData:D,rawData:B}){this.#t=D,this.#e=B}getRaw(){return this.#e}get(D){return this.#t.get(D)??null}getAll(){return(0,o.objectFromMap)(this.#t)}has(D){return this.#t.has(D)}}u.Metadata=E}),((_,u,M)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.OptionalContentConfig=void 0;var o=M(1),E=M(8);const O=Symbol("INTERNAL");class D{#t=!0;constructor(d,l){this.name=d,this.intent=l}get visible(){return this.#t}_setVisible(d,l){d!==O&&(0,o.unreachable)("Internal method `_setVisible` called."),this.#t=l}}class B{#t=null;#e=new Map;#n=null;#i=null;constructor(d){if(this.name=null,this.creator=null,d!==null){this.name=d.name,this.creator=d.creator,this.#i=d.order;for(const l of d.groups)this.#e.set(l.id,new D(l.name,l.intent));if(d.baseState==="OFF")for(const l of this.#e.values())l._setVisible(O,!1);for(const l of d.on)this.#e.get(l)._setVisible(O,!0);for(const l of d.off)this.#e.get(l)._setVisible(O,!1);this.#n=this.getHash()}}#o(d){const l=d.length;if(l<2)return!0;const h=d[0];for(let b=1;b<l;b++){const y=d[b];let f;if(Array.isArray(y))f=this.#o(y);else if(this.#e.has(y))f=this.#e.get(y).visible;else return(0,o.warn)(`Optional content group not found: ${y}`),!0;switch(h){case"And":if(!f)return!1;break;case"Or":if(f)return!0;break;case"Not":return!f;default:return!0}}return h==="And"}isVisible(d){if(this.#e.size===0)return!0;if(!d)return(0,o.warn)("Optional content group not defined."),!0;if(d.type==="OCG")return this.#e.has(d.id)?this.#e.get(d.id).visible:((0,o.warn)(`Optional content group not found: ${d.id}`),!0);if(d.type==="OCMD"){if(d.expression)return this.#o(d.expression);if(!d.policy||d.policy==="AnyOn"){for(const l of d.ids){if(!this.#e.has(l))return(0,o.warn)(`Optional content group not found: ${l}`),!0;if(this.#e.get(l).visible)return!0}return!1}else if(d.policy==="AllOn"){for(const l of d.ids){if(!this.#e.has(l))return(0,o.warn)(`Optional content group not found: ${l}`),!0;if(!this.#e.get(l).visible)return!1}return!0}else if(d.policy==="AnyOff"){for(const l of d.ids){if(!this.#e.has(l))return(0,o.warn)(`Optional content group not found: ${l}`),!0;if(!this.#e.get(l).visible)return!0}return!1}else if(d.policy==="AllOff"){for(const l of d.ids){if(!this.#e.has(l))return(0,o.warn)(`Optional content group not found: ${l}`),!0;if(this.#e.get(l).visible)return!1}return!0}return(0,o.warn)(`Unknown optional content policy ${d.policy}.`),!0}return(0,o.warn)(`Unknown group type ${d.type}.`),!0}setVisibility(d,l=!0){if(!this.#e.has(d)){(0,o.warn)(`Optional content group not found: ${d}`);return}this.#e.get(d)._setVisible(O,!!l),this.#t=null}get hasInitialVisibility(){return this.#n===null||this.getHash()===this.#n}getOrder(){return this.#e.size?this.#i?this.#i.slice():[...this.#e.keys()]:null}getGroups(){return this.#e.size>0?(0,o.objectFromMap)(this.#e):null}getGroup(d){return this.#e.get(d)||null}getHash(){if(this.#t!==null)return this.#t;const d=new E.MurmurHash3_64;for(const[l,h]of this.#e)d.update(`${l}:${h.visible}`);return this.#t=d.hexdigest()}}u.OptionalContentConfig=B}),((_,u,M)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.PDFDataTransportStream=void 0;var o=M(1),E=M(6);class O{constructor({length:d,initialData:l,progressiveDone:h=!1,contentDispositionFilename:b=null,disableRange:y=!1,disableStream:f=!1},A){if((0,o.assert)(A,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.'),this._queuedChunks=[],this._progressiveDone=h,this._contentDispositionFilename=b,l?.length>0){const j=l instanceof Uint8Array&&l.byteLength===l.buffer.byteLength?l.buffer:new Uint8Array(l).buffer;this._queuedChunks.push(j)}this._pdfDataRangeTransport=A,this._isStreamingSupported=!f,this._isRangeSupported=!y,this._contentLength=d,this._fullRequestReader=null,this._rangeReaders=[],this._pdfDataRangeTransport.addRangeListener((j,x)=>{this._onReceiveData({begin:j,chunk:x})}),this._pdfDataRangeTransport.addProgressListener((j,x)=>{this._onProgress({loaded:j,total:x})}),this._pdfDataRangeTransport.addProgressiveReadListener(j=>{this._onReceiveData({chunk:j})}),this._pdfDataRangeTransport.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),this._pdfDataRangeTransport.transportReady()}_onReceiveData({begin:d,chunk:l}){const h=l instanceof Uint8Array&&l.byteLength===l.buffer.byteLength?l.buffer:new Uint8Array(l).buffer;if(d===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(h):this._queuedChunks.push(h);else{const b=this._rangeReaders.some(function(y){return y._begin!==d?!1:(y._enqueue(h),!0)});(0,o.assert)(b,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}_onProgress(d){d.total===void 0?this._rangeReaders[0]?.onProgress?.({loaded:d.loaded}):this._fullRequestReader?.onProgress?.({loaded:d.loaded,total:d.total})}_onProgressiveDone(){this._fullRequestReader?.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(d){const l=this._rangeReaders.indexOf(d);l>=0&&this._rangeReaders.splice(l,1)}getFullReader(){(0,o.assert)(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const d=this._queuedChunks;return this._queuedChunks=null,new D(this,d,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(d,l){if(l<=this._progressiveDataLength)return null;const h=new B(this,d,l);return this._pdfDataRangeTransport.requestDataRange(d,l),this._rangeReaders.push(h),h}cancelAllRequests(d){this._fullRequestReader?.cancel(d);for(const l of this._rangeReaders.slice(0))l.cancel(d);this._pdfDataRangeTransport.abort()}}u.PDFDataTransportStream=O;class D{constructor(d,l,h=!1,b=null){this._stream=d,this._done=h||!1,this._filename=(0,E.isPdfFile)(b)?b:null,this._queuedChunks=l||[],this._loaded=0;for(const y of this._queuedChunks)this._loaded+=y.byteLength;this._requests=[],this._headersReady=Promise.resolve(),d._fullRequestReader=this,this.onProgress=null}_enqueue(d){this._done||(this._requests.length>0?this._requests.shift().resolve({value:d,done:!1}):this._queuedChunks.push(d),this._loaded+=d.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const d=new o.PromiseCapability;return this._requests.push(d),d.promise}cancel(d){this._done=!0;for(const l of this._requests)l.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class B{constructor(d,l,h){this._stream=d,this._begin=l,this._end=h,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(d){if(!this._done){if(this._requests.length===0)this._queuedChunk=d;else{this._requests.shift().resolve({value:d,done:!1});for(const h of this._requests)h.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const l=this._queuedChunk;return this._queuedChunk=null,{value:l,done:!1}}if(this._done)return{value:void 0,done:!0};const d=new o.PromiseCapability;return this._requests.push(d),d.promise}cancel(d){this._done=!0;for(const l of this._requests)l.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}}),((_,u,M)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.PDFFetchStream=void 0;var o=M(1),E=M(20);function O(h,b,y){return{method:"GET",headers:h,signal:y.signal,mode:"cors",credentials:b?"include":"same-origin",redirect:"follow"}}function D(h){const b=new Headers;for(const y in h){const f=h[y];f!==void 0&&b.append(y,f)}return b}function B(h){return h instanceof Uint8Array?h.buffer:h instanceof ArrayBuffer?h:((0,o.warn)(`getArrayBuffer - unexpected data format: ${h}`),new Uint8Array(h).buffer)}class F{constructor(b){this.source=b,this.isHttp=/^https?:/i.test(b.url),this.httpHeaders=this.isHttp&&b.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return(0,o.assert)(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new d(this),this._fullRequestReader}getRangeReader(b,y){if(y<=this._progressiveDataLength)return null;const f=new l(this,b,y);return this._rangeRequestReaders.push(f),f}cancelAllRequests(b){this._fullRequestReader?.cancel(b);for(const y of this._rangeRequestReaders.slice(0))y.cancel(b)}}u.PDFFetchStream=F;class d{constructor(b){this._stream=b,this._reader=null,this._loaded=0,this._filename=null;const y=b.source;this._withCredentials=y.withCredentials||!1,this._contentLength=y.length,this._headersCapability=new o.PromiseCapability,this._disableRange=y.disableRange||!1,this._rangeChunkSize=y.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!y.disableStream,this._isRangeSupported=!y.disableRange,this._headers=D(this._stream.httpHeaders);const f=y.url;fetch(f,O(this._headers,this._withCredentials,this._abortController)).then(A=>{if(!(0,E.validateResponseStatus)(A.status))throw(0,E.createResponseStatusError)(A.status,f);this._reader=A.body.getReader(),this._headersCapability.resolve();const j=Z=>A.headers.get(Z),{allowRangeRequests:x,suggestedLength:U}=(0,E.validateRangeRequestCapabilities)({getResponseHeader:j,isHttp:this._stream.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=x,this._contentLength=U||this._contentLength,this._filename=(0,E.extractFilenameFromHeader)(j),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new o.AbortException("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._headersCapability.promise;const{value:b,done:y}=await this._reader.read();return y?{value:b,done:y}:(this._loaded+=b.byteLength,this.onProgress?.({loaded:this._loaded,total:this._contentLength}),{value:B(b),done:!1})}cancel(b){this._reader?.cancel(b),this._abortController.abort()}}class l{constructor(b,y,f){this._stream=b,this._reader=null,this._loaded=0;const A=b.source;this._withCredentials=A.withCredentials||!1,this._readCapability=new o.PromiseCapability,this._isStreamingSupported=!A.disableStream,this._abortController=new AbortController,this._headers=D(this._stream.httpHeaders),this._headers.append("Range",`bytes=${y}-${f-1}`);const j=A.url;fetch(j,O(this._headers,this._withCredentials,this._abortController)).then(x=>{if(!(0,E.validateResponseStatus)(x.status))throw(0,E.createResponseStatusError)(x.status,j);this._readCapability.resolve(),this._reader=x.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._readCapability.promise;const{value:b,done:y}=await this._reader.read();return y?{value:b,done:y}:(this._loaded+=b.byteLength,this.onProgress?.({loaded:this._loaded}),{value:B(b),done:!1})}cancel(b){this._reader?.cancel(b),this._abortController.abort()}}}),((_,u,M)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.createResponseStatusError=F,u.extractFilenameFromHeader=B,u.validateRangeRequestCapabilities=D,u.validateResponseStatus=d;var o=M(1),E=M(21),O=M(6);function D({getResponseHeader:l,isHttp:h,rangeChunkSize:b,disableRange:y}){const f={allowRangeRequests:!1,suggestedLength:void 0},A=parseInt(l("Content-Length"),10);return!Number.isInteger(A)||(f.suggestedLength=A,A<=2*b)||y||!h||l("Accept-Ranges")!=="bytes"||(l("Content-Encoding")||"identity")!=="identity"||(f.allowRangeRequests=!0),f}function B(l){const h=l("Content-Disposition");if(h){let b=(0,E.getFilenameFromContentDispositionHeader)(h);if(b.includes("%"))try{b=decodeURIComponent(b)}catch{}if((0,O.isPdfFile)(b))return b}return null}function F(l,h){return l===404||l===0&&h.startsWith("file:")?new o.MissingPDFException('Missing PDF "'+h+'".'):new o.UnexpectedResponseException(`Unexpected server response (${l}) while retrieving PDF "${h}".`,l)}function d(l){return l===200||l===206}}),((_,u,M)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.getFilenameFromContentDispositionHeader=E;var o=M(1);function E(O){let D=!0,B=F("filename\\*","i").exec(O);if(B){B=B[1];let A=b(B);return A=unescape(A),A=y(A),A=f(A),l(A)}if(B=h(O),B){const A=f(B);return l(A)}if(B=F("filename","i").exec(O),B){B=B[1];let A=b(B);return A=f(A),l(A)}function F(A,j){return new RegExp("(?:^|;)\\s*"+A+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',j)}function d(A,j){if(A){if(!/^[\x00-\xFF]+$/.test(j))return j;try{const x=new TextDecoder(A,{fatal:!0}),U=(0,o.stringToBytes)(j);j=x.decode(U),D=!1}catch{}}return j}function l(A){return D&&/[\x80-\xff]/.test(A)&&(A=d("utf-8",A),D&&(A=d("iso-8859-1",A))),A}function h(A){const j=[];let x;const U=F("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(x=U.exec(A))!==null;){let[,V,T,z]=x;if(V=parseInt(V,10),V in j){if(V===0)break;continue}j[V]=[T,z]}const Z=[];for(let V=0;V<j.length&&V in j;++V){let[T,z]=j[V];z=b(z),T&&(z=unescape(z),V===0&&(z=y(z))),Z.push(z)}return Z.join("")}function b(A){if(A.startsWith('"')){const j=A.slice(1).split('\\"');for(let x=0;x<j.length;++x){const U=j[x].indexOf('"');U!==-1&&(j[x]=j[x].slice(0,U),j.length=x+1),j[x]=j[x].replaceAll(/\\(.)/g,"$1")}A=j.join('"')}return A}function y(A){const j=A.indexOf("'");if(j===-1)return A;const x=A.slice(0,j),Z=A.slice(j+1).replace(/^[^']*'/,"");return d(x,Z)}function f(A){return!A.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(A)?A:A.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(j,x,U,Z){if(U==="q"||U==="Q")return Z=Z.replaceAll("_"," "),Z=Z.replaceAll(/=([0-9a-fA-F]{2})/g,function(V,T){return String.fromCharCode(parseInt(T,16))}),d(x,Z);try{Z=atob(Z)}catch{}return d(x,Z)})}return""}}),((_,u,M)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.PDFNetworkStream=void 0;var o=M(1),E=M(20);const O=200,D=206;function B(b){const y=b.response;return typeof y!="string"?y:(0,o.stringToBytes)(y).buffer}class F{constructor(y,f={}){this.url=y,this.isHttp=/^https?:/i.test(y),this.httpHeaders=this.isHttp&&f.httpHeaders||Object.create(null),this.withCredentials=f.withCredentials||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}requestRange(y,f,A){const j={begin:y,end:f};for(const x in A)j[x]=A[x];return this.request(j)}requestFull(y){return this.request(y)}request(y){const f=new XMLHttpRequest,A=this.currXhrId++,j=this.pendingRequests[A]={xhr:f};f.open("GET",this.url),f.withCredentials=this.withCredentials;for(const x in this.httpHeaders){const U=this.httpHeaders[x];U!==void 0&&f.setRequestHeader(x,U)}return this.isHttp&&"begin"in y&&"end"in y?(f.setRequestHeader("Range",`bytes=${y.begin}-${y.end-1}`),j.expectedStatus=D):j.expectedStatus=O,f.responseType="arraybuffer",y.onError&&(f.onerror=function(x){y.onError(f.status)}),f.onreadystatechange=this.onStateChange.bind(this,A),f.onprogress=this.onProgress.bind(this,A),j.onHeadersReceived=y.onHeadersReceived,j.onDone=y.onDone,j.onError=y.onError,j.onProgress=y.onProgress,f.send(null),A}onProgress(y,f){const A=this.pendingRequests[y];A&&A.onProgress?.(f)}onStateChange(y,f){const A=this.pendingRequests[y];if(!A)return;const j=A.xhr;if(j.readyState>=2&&A.onHeadersReceived&&(A.onHeadersReceived(),delete A.onHeadersReceived),j.readyState!==4||!(y in this.pendingRequests))return;if(delete this.pendingRequests[y],j.status===0&&this.isHttp){A.onError?.(j.status);return}const x=j.status||O;if(!(x===O&&A.expectedStatus===D)&&x!==A.expectedStatus){A.onError?.(j.status);return}const Z=B(j);if(x===D){const V=j.getResponseHeader("Content-Range"),T=/bytes (\d+)-(\d+)\/(\d+)/.exec(V);A.onDone({begin:parseInt(T[1],10),chunk:Z})}else Z?A.onDone({begin:0,chunk:Z}):A.onError?.(j.status)}getRequestXhr(y){return this.pendingRequests[y].xhr}isPendingRequest(y){return y in this.pendingRequests}abortRequest(y){const f=this.pendingRequests[y].xhr;delete this.pendingRequests[y],f.abort()}}class d{constructor(y){this._source=y,this._manager=new F(y.url,{httpHeaders:y.httpHeaders,withCredentials:y.withCredentials}),this._rangeChunkSize=y.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(y){const f=this._rangeRequestReaders.indexOf(y);f>=0&&this._rangeRequestReaders.splice(f,1)}getFullReader(){return(0,o.assert)(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new l(this._manager,this._source),this._fullRequestReader}getRangeReader(y,f){const A=new h(this._manager,y,f);return A.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(A),A}cancelAllRequests(y){this._fullRequestReader?.cancel(y);for(const f of this._rangeRequestReaders.slice(0))f.cancel(y)}}u.PDFNetworkStream=d;class l{constructor(y,f){this._manager=y;const A={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=f.url,this._fullRequestId=y.requestFull(A),this._headersReceivedCapability=new o.PromiseCapability,this._disableRange=f.disableRange||!1,this._contentLength=f.length,this._rangeChunkSize=f.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const y=this._fullRequestId,f=this._manager.getRequestXhr(y),A=U=>f.getResponseHeader(U),{allowRangeRequests:j,suggestedLength:x}=(0,E.validateRangeRequestCapabilities)({getResponseHeader:A,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});j&&(this._isRangeSupported=!0),this._contentLength=x||this._contentLength,this._filename=(0,E.extractFilenameFromHeader)(A),this._isRangeSupported&&this._manager.abortRequest(y),this._headersReceivedCapability.resolve()}_onDone(y){if(y&&(this._requests.length>0?this._requests.shift().resolve({value:y.chunk,done:!1}):this._cachedChunks.push(y.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const f of this._requests)f.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(y){this._storedError=(0,E.createResponseStatusError)(y,this._url),this._headersReceivedCapability.reject(this._storedError);for(const f of this._requests)f.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(y){this.onProgress?.({loaded:y.loaded,total:y.lengthComputable?y.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersReceivedCapability.promise}async read(){if(this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const y=new o.PromiseCapability;return this._requests.push(y),y.promise}cancel(y){this._done=!0,this._headersReceivedCapability.reject(y);for(const f of this._requests)f.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class h{constructor(y,f,A){this._manager=y;const j={onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=y.url,this._requestId=y.requestRange(f,A,j),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_close(){this.onClosed?.(this)}_onDone(y){const f=y.chunk;this._requests.length>0?this._requests.shift().resolve({value:f,done:!1}):this._queuedChunk=f,this._done=!0;for(const A of this._requests)A.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(y){this._storedError=(0,E.createResponseStatusError)(y,this._url);for(const f of this._requests)f.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(y){this.isStreamingSupported||this.onProgress?.({loaded:y.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const f=this._queuedChunk;return this._queuedChunk=null,{value:f,done:!1}}if(this._done)return{value:void 0,done:!0};const y=new o.PromiseCapability;return this._requests.push(y),y.promise}cancel(y){this._done=!0;for(const f of this._requests)f.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}}),((_,u,M)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.PDFNodeStream=void 0;var o=M(1),E=M(20);const O=/^file:\/\/\/[a-zA-Z]:\//;function D(A){const j=require$$5,x=j.parse(A);return x.protocol==="file:"||x.host?x:/^[a-z]:[/\\]/i.test(A)?j.parse(`file:///${A}`):(x.host||(x.protocol="file:"),x)}class B{constructor(j){this.source=j,this.url=D(j.url),this.isHttp=this.url.protocol==="http:"||this.url.protocol==="https:",this.isFsUrl=this.url.protocol==="file:",this.httpHeaders=this.isHttp&&j.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return(0,o.assert)(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=this.isFsUrl?new y(this):new h(this),this._fullRequestReader}getRangeReader(j,x){if(x<=this._progressiveDataLength)return null;const U=this.isFsUrl?new f(this,j,x):new b(this,j,x);return this._rangeRequestReaders.push(U),U}cancelAllRequests(j){this._fullRequestReader?.cancel(j);for(const x of this._rangeRequestReaders.slice(0))x.cancel(j)}}u.PDFNodeStream=B;class F{constructor(j){this._url=j.url,this._done=!1,this._storedError=null,this.onProgress=null;const x=j.source;this._contentLength=x.length,this._loaded=0,this._filename=null,this._disableRange=x.disableRange||!1,this._rangeChunkSize=x.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!x.disableStream,this._isRangeSupported=!x.disableRange,this._readableStream=null,this._readCapability=new o.PromiseCapability,this._headersCapability=new o.PromiseCapability}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const j=this._readableStream.read();return j===null?(this._readCapability=new o.PromiseCapability,this.read()):(this._loaded+=j.length,this.onProgress?.({loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(j).buffer,done:!1})}cancel(j){if(!this._readableStream){this._error(j);return}this._readableStream.destroy(j)}_error(j){this._storedError=j,this._readCapability.resolve()}_setReadableStream(j){this._readableStream=j,j.on("readable",()=>{this._readCapability.resolve()}),j.on("end",()=>{j.destroy(),this._done=!0,this._readCapability.resolve()}),j.on("error",x=>{this._error(x)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new o.AbortException("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class d{constructor(j){this._url=j.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=new o.PromiseCapability;const x=j.source;this._isStreamingSupported=!x.disableStream}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const j=this._readableStream.read();return j===null?(this._readCapability=new o.PromiseCapability,this.read()):(this._loaded+=j.length,this.onProgress?.({loaded:this._loaded}),{value:new Uint8Array(j).buffer,done:!1})}cancel(j){if(!this._readableStream){this._error(j);return}this._readableStream.destroy(j)}_error(j){this._storedError=j,this._readCapability.resolve()}_setReadableStream(j){this._readableStream=j,j.on("readable",()=>{this._readCapability.resolve()}),j.on("end",()=>{j.destroy(),this._done=!0,this._readCapability.resolve()}),j.on("error",x=>{this._error(x)}),this._storedError&&this._readableStream.destroy(this._storedError)}}function l(A,j){return{protocol:A.protocol,auth:A.auth,host:A.hostname,port:A.port,path:A.path,method:"GET",headers:j}}class h extends F{constructor(j){super(j);const x=U=>{if(U.statusCode===404){const z=new o.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=z,this._headersCapability.reject(z);return}this._headersCapability.resolve(),this._setReadableStream(U);const Z=z=>this._readableStream.headers[z.toLowerCase()],{allowRangeRequests:V,suggestedLength:T}=(0,E.validateRangeRequestCapabilities)({getResponseHeader:Z,isHttp:j.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=V,this._contentLength=T||this._contentLength,this._filename=(0,E.extractFilenameFromHeader)(Z)};if(this._request=null,this._url.protocol==="http:"){const U=require$$5;this._request=U.request(l(this._url,j.httpHeaders),x)}else{const U=require$$5;this._request=U.request(l(this._url,j.httpHeaders),x)}this._request.on("error",U=>{this._storedError=U,this._headersCapability.reject(U)}),this._request.end()}}class b extends d{constructor(j,x,U){super(j),this._httpHeaders={};for(const V in j.httpHeaders){const T=j.httpHeaders[V];T!==void 0&&(this._httpHeaders[V]=T)}this._httpHeaders.Range=`bytes=${x}-${U-1}`;const Z=V=>{if(V.statusCode===404){const T=new o.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=T;return}this._setReadableStream(V)};if(this._request=null,this._url.protocol==="http:"){const V=require$$5;this._request=V.request(l(this._url,this._httpHeaders),Z)}else{const V=require$$5;this._request=V.request(l(this._url,this._httpHeaders),Z)}this._request.on("error",V=>{this._storedError=V}),this._request.end()}}class y extends F{constructor(j){super(j);let x=decodeURIComponent(this._url.path);O.test(this._url.href)&&(x=x.replace(/^\//,""));const U=require$$5;U.lstat(x,(Z,V)=>{if(Z){Z.code==="ENOENT"&&(Z=new o.MissingPDFException(`Missing PDF "${x}".`)),this._storedError=Z,this._headersCapability.reject(Z);return}this._contentLength=V.size,this._setReadableStream(U.createReadStream(x)),this._headersCapability.resolve()})}}class f extends d{constructor(j,x,U){super(j);let Z=decodeURIComponent(this._url.path);O.test(this._url.href)&&(Z=Z.replace(/^\//,""));const V=require$$5;this._setReadableStream(V.createReadStream(Z,{start:x,end:U-1}))}}}),((_,u,M)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.SVGGraphics=void 0;var o=M(6),E=M(1);const O={fontStyle:"normal",fontWeight:"normal",fillColor:"#000000"},D="http://www.w3.org/XML/1998/namespace",B="http://www.w3.org/1999/xlink",F=["butt","round","square"],d=["miter","round","bevel"],l=function(V,T="",z=!1){if(URL.createObjectURL&&typeof Blob<"u"&&!z)return URL.createObjectURL(new Blob([V],{type:T}));const $="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let rt=`data:${T};base64,`;for(let et=0,yt=V.length;et<yt;et+=3){const gt=V[et]&255,kt=V[et+1]&255,At=V[et+2]&255,Ft=gt>>2,Kt=(gt&3)<<4|kt>>4,nt=et+1<yt?(kt&15)<<2|At>>6:64,Y=et+2<yt?At&63:64;rt+=$[Ft]+$[Kt]+$[nt]+$[Y]}return rt},h=(function(){const V=new Uint8Array([137,80,78,71,13,10,26,10]),T=12,z=new Int32Array(256);for(let At=0;At<256;At++){let Ft=At;for(let Kt=0;Kt<8;Kt++)Ft=Ft&1?3988292384^Ft>>1&2147483647:Ft>>1&2147483647;z[At]=Ft}function $(At,Ft,Kt){let nt=-1;for(let Y=Ft;Y<Kt;Y++){const N=(nt^At[Y])&255,w=z[N];nt=nt>>>8^w}return nt^-1}function rt(At,Ft,Kt,nt){let Y=nt;const N=Ft.length;Kt[Y]=N>>24&255,Kt[Y+1]=N>>16&255,Kt[Y+2]=N>>8&255,Kt[Y+3]=N&255,Y+=4,Kt[Y]=At.charCodeAt(0)&255,Kt[Y+1]=At.charCodeAt(1)&255,Kt[Y+2]=At.charCodeAt(2)&255,Kt[Y+3]=At.charCodeAt(3)&255,Y+=4,Kt.set(Ft,Y),Y+=Ft.length;const w=$(Kt,nt+4,Y);Kt[Y]=w>>24&255,Kt[Y+1]=w>>16&255,Kt[Y+2]=w>>8&255,Kt[Y+3]=w&255}function et(At,Ft,Kt){let nt=1,Y=0;for(let N=Ft;N<Kt;++N)nt=(nt+(At[N]&255))%65521,Y=(Y+nt)%65521;return Y<<16|nt}function yt(At){if(!E.isNodeJS)return gt(At);try{const Ft=parseInt(process.versions.node)>=8?At:Buffer.from(At),Kt=require$$5.deflateSync(Ft,{level:9});return Kt instanceof Uint8Array?Kt:new Uint8Array(Kt)}catch(Ft){(0,E.warn)("Not compressing PNG because zlib.deflateSync is unavailable: "+Ft)}return gt(At)}function gt(At){let Ft=At.length;const Kt=65535,nt=Math.ceil(Ft/Kt),Y=new Uint8Array(2+Ft+nt*5+4);let N=0;Y[N++]=120,Y[N++]=156;let w=0;for(;Ft>Kt;)Y[N++]=0,Y[N++]=255,Y[N++]=255,Y[N++]=0,Y[N++]=0,Y.set(At.subarray(w,w+Kt),N),N+=Kt,w+=Kt,Ft-=Kt;Y[N++]=1,Y[N++]=Ft&255,Y[N++]=Ft>>8&255,Y[N++]=~Ft&65535&255,Y[N++]=(~Ft&65535)>>8&255,Y.set(At.subarray(w),N),N+=At.length-w;const R=et(At,0,At.length);return Y[N++]=R>>24&255,Y[N++]=R>>16&255,Y[N++]=R>>8&255,Y[N++]=R&255,Y}function kt(At,Ft,Kt,nt){const Y=At.width,N=At.height;let w,R,g;const L=At.data;switch(Ft){case E.ImageKind.GRAYSCALE_1BPP:R=0,w=1,g=Y+7>>3;break;case E.ImageKind.RGB_24BPP:R=2,w=8,g=Y*3;break;case E.ImageKind.RGBA_32BPP:R=6,w=8,g=Y*4;break;default:throw new Error("invalid format")}const H=new Uint8Array((1+g)*N);let J=0,K=0;for(let it=0;it<N;++it)H[J++]=0,H.set(L.subarray(K,K+g),J),K+=g,J+=g;if(Ft===E.ImageKind.GRAYSCALE_1BPP&&nt){J=0;for(let it=0;it<N;it++){J++;for(let at=0;at<g;at++)H[J++]^=255}}const m=new Uint8Array([Y>>24&255,Y>>16&255,Y>>8&255,Y&255,N>>24&255,N>>16&255,N>>8&255,N&255,w,R,0,0,0]),k=yt(H),I=V.length+T*3+m.length+k.length,W=new Uint8Array(I);let G=0;return W.set(V,G),G+=V.length,rt("IHDR",m,W,G),G+=T+m.length,rt("IDATA",k,W,G),G+=T+k.length,rt("IEND",new Uint8Array(0),W,G),l(W,"image/png",Kt)}return function(Ft,Kt,nt){const Y=Ft.kind===void 0?E.ImageKind.GRAYSCALE_1BPP:Ft.kind;return kt(Ft,Y,Kt,nt)}})();class b{constructor(){this.fontSizeScale=1,this.fontWeight=O.fontWeight,this.fontSize=0,this.textMatrix=E.IDENTITY_MATRIX,this.fontMatrix=E.FONT_IDENTITY_MATRIX,this.leading=0,this.textRenderingMode=E.TextRenderingMode.FILL,this.textMatrixScale=1,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRise=0,this.fillColor=O.fillColor,this.strokeColor="#000000",this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.lineJoin="",this.lineCap="",this.miterLimit=0,this.dashArray=[],this.dashPhase=0,this.dependencies=[],this.activeClipUrl=null,this.clipGroup=null,this.maskId=""}clone(){return Object.create(this)}setCurrentPoint(T,z){this.x=T,this.y=z}}function y(V){let T=[];const z=[];for(const $ of V){if($.fn==="save"){T.push({fnId:92,fn:"group",items:[]}),z.push(T),T=T.at(-1).items;continue}$.fn==="restore"?T=z.pop():T.push($)}return T}function f(V){if(Number.isInteger(V))return V.toString();const T=V.toFixed(10);let z=T.length-1;if(T[z]!=="0")return T;do z--;while(T[z]==="0");return T.substring(0,T[z]==="."?z:z+1)}function A(V){if(V[4]===0&&V[5]===0){if(V[1]===0&&V[2]===0)return V[0]===1&&V[3]===1?"":`scale(${f(V[0])} ${f(V[3])})`;if(V[0]===V[3]&&V[1]===-V[2]){const T=Math.acos(V[0])*180/Math.PI;return`rotate(${f(T)})`}}else if(V[0]===1&&V[1]===0&&V[2]===0&&V[3]===1)return`translate(${f(V[4])} ${f(V[5])})`;return`matrix(${f(V[0])} ${f(V[1])} ${f(V[2])} ${f(V[3])} ${f(V[4])} ${f(V[5])})`}let j=0,x=0,U=0;class Z{constructor(T,z,$=!1){(0,o.deprecated)("The SVG back-end is no longer maintained and *may* be removed in the future."),this.svgFactory=new o.DOMSVGFactory,this.current=new b,this.transformMatrix=E.IDENTITY_MATRIX,this.transformStack=[],this.extraStack=[],this.commonObjs=T,this.objs=z,this.pendingClip=null,this.pendingEOFill=!1,this.embedFonts=!1,this.embeddedFonts=Object.create(null),this.cssStyle=null,this.forceDataSchema=!!$,this._operatorIdMapping=[];for(const rt in E.OPS)this._operatorIdMapping[E.OPS[rt]]=rt}getObject(T,z=null){return typeof T=="string"?T.startsWith("g_")?this.commonObjs.get(T):this.objs.get(T):z}save(){this.transformStack.push(this.transformMatrix);const T=this.current;this.extraStack.push(T),this.current=T.clone()}restore(){this.transformMatrix=this.transformStack.pop(),this.current=this.extraStack.pop(),this.pendingClip=null,this.tgrp=null}group(T){this.save(),this.executeOpTree(T),this.restore()}loadDependencies(T){const z=T.fnArray,$=T.argsArray;for(let rt=0,et=z.length;rt<et;rt++)if(z[rt]===E.OPS.dependency)for(const yt of $[rt]){const gt=yt.startsWith("g_")?this.commonObjs:this.objs,kt=new Promise(At=>{gt.get(yt,At)});this.current.dependencies.push(kt)}return Promise.all(this.current.dependencies)}transform(T,z,$,rt,et,yt){const gt=[T,z,$,rt,et,yt];this.transformMatrix=E.Util.transform(this.transformMatrix,gt),this.tgrp=null}getSVG(T,z){this.viewport=z;const $=this._initialize(z);return this.loadDependencies(T).then(()=>(this.transformMatrix=E.IDENTITY_MATRIX,this.executeOpTree(this.convertOpList(T)),$))}convertOpList(T){const z=this._operatorIdMapping,$=T.argsArray,rt=T.fnArray,et=[];for(let yt=0,gt=rt.length;yt<gt;yt++){const kt=rt[yt];et.push({fnId:kt,fn:z[kt],args:$[yt]})}return y(et)}executeOpTree(T){for(const z of T){const $=z.fn,rt=z.fnId,et=z.args;switch(rt|0){case E.OPS.beginText:this.beginText();break;case E.OPS.dependency:break;case E.OPS.setLeading:this.setLeading(et);break;case E.OPS.setLeadingMoveText:this.setLeadingMoveText(et[0],et[1]);break;case E.OPS.setFont:this.setFont(et);break;case E.OPS.showText:this.showText(et[0]);break;case E.OPS.showSpacedText:this.showText(et[0]);break;case E.OPS.endText:this.endText();break;case E.OPS.moveText:this.moveText(et[0],et[1]);break;case E.OPS.setCharSpacing:this.setCharSpacing(et[0]);break;case E.OPS.setWordSpacing:this.setWordSpacing(et[0]);break;case E.OPS.setHScale:this.setHScale(et[0]);break;case E.OPS.setTextMatrix:this.setTextMatrix(et[0],et[1],et[2],et[3],et[4],et[5]);break;case E.OPS.setTextRise:this.setTextRise(et[0]);break;case E.OPS.setTextRenderingMode:this.setTextRenderingMode(et[0]);break;case E.OPS.setLineWidth:this.setLineWidth(et[0]);break;case E.OPS.setLineJoin:this.setLineJoin(et[0]);break;case E.OPS.setLineCap:this.setLineCap(et[0]);break;case E.OPS.setMiterLimit:this.setMiterLimit(et[0]);break;case E.OPS.setFillRGBColor:this.setFillRGBColor(et[0],et[1],et[2]);break;case E.OPS.setStrokeRGBColor:this.setStrokeRGBColor(et[0],et[1],et[2]);break;case E.OPS.setStrokeColorN:this.setStrokeColorN(et);break;case E.OPS.setFillColorN:this.setFillColorN(et);break;case E.OPS.shadingFill:this.shadingFill(et[0]);break;case E.OPS.setDash:this.setDash(et[0],et[1]);break;case E.OPS.setRenderingIntent:this.setRenderingIntent(et[0]);break;case E.OPS.setFlatness:this.setFlatness(et[0]);break;case E.OPS.setGState:this.setGState(et[0]);break;case E.OPS.fill:this.fill();break;case E.OPS.eoFill:this.eoFill();break;case E.OPS.stroke:this.stroke();break;case E.OPS.fillStroke:this.fillStroke();break;case E.OPS.eoFillStroke:this.eoFillStroke();break;case E.OPS.clip:this.clip("nonzero");break;case E.OPS.eoClip:this.clip("evenodd");break;case E.OPS.paintSolidColorImageMask:this.paintSolidColorImageMask();break;case E.OPS.paintImageXObject:this.paintImageXObject(et[0]);break;case E.OPS.paintInlineImageXObject:this.paintInlineImageXObject(et[0]);break;case E.OPS.paintImageMaskXObject:this.paintImageMaskXObject(et[0]);break;case E.OPS.paintFormXObjectBegin:this.paintFormXObjectBegin(et[0],et[1]);break;case E.OPS.paintFormXObjectEnd:this.paintFormXObjectEnd();break;case E.OPS.closePath:this.closePath();break;case E.OPS.closeStroke:this.closeStroke();break;case E.OPS.closeFillStroke:this.closeFillStroke();break;case E.OPS.closeEOFillStroke:this.closeEOFillStroke();break;case E.OPS.nextLine:this.nextLine();break;case E.OPS.transform:this.transform(et[0],et[1],et[2],et[3],et[4],et[5]);break;case E.OPS.constructPath:this.constructPath(et[0],et[1]);break;case E.OPS.endPath:this.endPath();break;case 92:this.group(z.items);break;default:(0,E.warn)(`Unimplemented operator ${$}`);break}}}setWordSpacing(T){this.current.wordSpacing=T}setCharSpacing(T){this.current.charSpacing=T}nextLine(){this.moveText(0,this.current.leading)}setTextMatrix(T,z,$,rt,et,yt){const gt=this.current;gt.textMatrix=gt.lineMatrix=[T,z,$,rt,et,yt],gt.textMatrixScale=Math.hypot(T,z),gt.x=gt.lineX=0,gt.y=gt.lineY=0,gt.xcoords=[],gt.ycoords=[],gt.tspan=this.svgFactory.createElement("svg:tspan"),gt.tspan.setAttributeNS(null,"font-family",gt.fontFamily),gt.tspan.setAttributeNS(null,"font-size",`${f(gt.fontSize)}px`),gt.tspan.setAttributeNS(null,"y",f(-gt.y)),gt.txtElement=this.svgFactory.createElement("svg:text"),gt.txtElement.append(gt.tspan)}beginText(){const T=this.current;T.x=T.lineX=0,T.y=T.lineY=0,T.textMatrix=E.IDENTITY_MATRIX,T.lineMatrix=E.IDENTITY_MATRIX,T.textMatrixScale=1,T.tspan=this.svgFactory.createElement("svg:tspan"),T.txtElement=this.svgFactory.createElement("svg:text"),T.txtgrp=this.svgFactory.createElement("svg:g"),T.xcoords=[],T.ycoords=[]}moveText(T,z){const $=this.current;$.x=$.lineX+=T,$.y=$.lineY+=z,$.xcoords=[],$.ycoords=[],$.tspan=this.svgFactory.createElement("svg:tspan"),$.tspan.setAttributeNS(null,"font-family",$.fontFamily),$.tspan.setAttributeNS(null,"font-size",`${f($.fontSize)}px`),$.tspan.setAttributeNS(null,"y",f(-$.y))}showText(T){const z=this.current,$=z.font,rt=z.fontSize;if(rt===0)return;const et=z.fontSizeScale,yt=z.charSpacing,gt=z.wordSpacing,kt=z.fontDirection,At=z.textHScale*kt,Ft=$.vertical,Kt=Ft?1:-1,nt=$.defaultVMetrics,Y=rt*z.fontMatrix[0];let N=0;for(const g of T){if(g===null){N+=kt*gt;continue}else if(typeof g=="number"){N+=Kt*g*rt/1e3;continue}const L=(g.isSpace?gt:0)+yt,H=g.fontChar;let J,K,m=g.width;if(Ft){let I;const W=g.vmetric||nt;I=g.vmetric?W[1]:m*.5,I=-I*Y;const G=W[2]*Y;m=W?-W[0]:m,J=I/et,K=(N+G)/et}else J=N/et,K=0;(g.isInFont||$.missingFile)&&(z.xcoords.push(z.x+J),Ft&&z.ycoords.push(-z.y+K),z.tspan.textContent+=H);const k=Ft?m*Y-L*kt:m*Y+L*kt;N+=k}z.tspan.setAttributeNS(null,"x",z.xcoords.map(f).join(" ")),Ft?z.tspan.setAttributeNS(null,"y",z.ycoords.map(f).join(" ")):z.tspan.setAttributeNS(null,"y",f(-z.y)),Ft?z.y-=N:z.x+=N*At,z.tspan.setAttributeNS(null,"font-family",z.fontFamily),z.tspan.setAttributeNS(null,"font-size",`${f(z.fontSize)}px`),z.fontStyle!==O.fontStyle&&z.tspan.setAttributeNS(null,"font-style",z.fontStyle),z.fontWeight!==O.fontWeight&&z.tspan.setAttributeNS(null,"font-weight",z.fontWeight);const w=z.textRenderingMode&E.TextRenderingMode.FILL_STROKE_MASK;if(w===E.TextRenderingMode.FILL||w===E.TextRenderingMode.FILL_STROKE?(z.fillColor!==O.fillColor&&z.tspan.setAttributeNS(null,"fill",z.fillColor),z.fillAlpha<1&&z.tspan.setAttributeNS(null,"fill-opacity",z.fillAlpha)):z.textRenderingMode===E.TextRenderingMode.ADD_TO_PATH?z.tspan.setAttributeNS(null,"fill","transparent"):z.tspan.setAttributeNS(null,"fill","none"),w===E.TextRenderingMode.STROKE||w===E.TextRenderingMode.FILL_STROKE){const g=1/(z.textMatrixScale||1);this._setStrokeAttributes(z.tspan,g)}let R=z.textMatrix;z.textRise!==0&&(R=R.slice(),R[5]+=z.textRise),z.txtElement.setAttributeNS(null,"transform",`${A(R)} scale(${f(At)}, -1)`),z.txtElement.setAttributeNS(D,"xml:space","preserve"),z.txtElement.append(z.tspan),z.txtgrp.append(z.txtElement),this._ensureTransformGroup().append(z.txtElement)}setLeadingMoveText(T,z){this.setLeading(-z),this.moveText(T,z)}addFontStyle(T){if(!T.data)throw new Error('addFontStyle: No font data available, ensure that the "fontExtraProperties" API parameter is set.');this.cssStyle||(this.cssStyle=this.svgFactory.createElement("svg:style"),this.cssStyle.setAttributeNS(null,"type","text/css"),this.defs.append(this.cssStyle));const z=l(T.data,T.mimetype,this.forceDataSchema);this.cssStyle.textContent+=`@font-face { font-family: "${T.loadedName}"; src: url(${z}); }
`}setFont(T){const z=this.current,$=this.commonObjs.get(T[0]);let rt=T[1];z.font=$,this.embedFonts&&!$.missingFile&&!this.embeddedFonts[$.loadedName]&&(this.addFontStyle($),this.embeddedFonts[$.loadedName]=$),z.fontMatrix=$.fontMatrix||E.FONT_IDENTITY_MATRIX;let et="normal";$.black?et="900":$.bold&&(et="bold");const yt=$.italic?"italic":"normal";rt<0?(rt=-rt,z.fontDirection=-1):z.fontDirection=1,z.fontSize=rt,z.fontFamily=$.loadedName,z.fontWeight=et,z.fontStyle=yt,z.tspan=this.svgFactory.createElement("svg:tspan"),z.tspan.setAttributeNS(null,"y",f(-z.y)),z.xcoords=[],z.ycoords=[]}endText(){const T=this.current;T.textRenderingMode&E.TextRenderingMode.ADD_TO_PATH_FLAG&&T.txtElement?.hasChildNodes()&&(T.element=T.txtElement,this.clip("nonzero"),this.endPath())}setLineWidth(T){T>0&&(this.current.lineWidth=T)}setLineCap(T){this.current.lineCap=F[T]}setLineJoin(T){this.current.lineJoin=d[T]}setMiterLimit(T){this.current.miterLimit=T}setStrokeAlpha(T){this.current.strokeAlpha=T}setStrokeRGBColor(T,z,$){this.current.strokeColor=E.Util.makeHexColor(T,z,$)}setFillAlpha(T){this.current.fillAlpha=T}setFillRGBColor(T,z,$){this.current.fillColor=E.Util.makeHexColor(T,z,$),this.current.tspan=this.svgFactory.createElement("svg:tspan"),this.current.xcoords=[],this.current.ycoords=[]}setStrokeColorN(T){this.current.strokeColor=this._makeColorN_Pattern(T)}setFillColorN(T){this.current.fillColor=this._makeColorN_Pattern(T)}shadingFill(T){const{width:z,height:$}=this.viewport,rt=E.Util.inverseTransform(this.transformMatrix),[et,yt,gt,kt]=E.Util.getAxialAlignedBoundingBox([0,0,z,$],rt),At=this.svgFactory.createElement("svg:rect");At.setAttributeNS(null,"x",et),At.setAttributeNS(null,"y",yt),At.setAttributeNS(null,"width",gt-et),At.setAttributeNS(null,"height",kt-yt),At.setAttributeNS(null,"fill",this._makeShadingPattern(T)),this.current.fillAlpha<1&&At.setAttributeNS(null,"fill-opacity",this.current.fillAlpha),this._ensureTransformGroup().append(At)}_makeColorN_Pattern(T){return T[0]==="TilingPattern"?this._makeTilingPattern(T):this._makeShadingPattern(T)}_makeTilingPattern(T){const z=T[1],$=T[2],rt=T[3]||E.IDENTITY_MATRIX,[et,yt,gt,kt]=T[4],At=T[5],Ft=T[6],Kt=T[7],nt=`shading${U++}`,[Y,N,w,R]=E.Util.normalizeRect([...E.Util.applyTransform([et,yt],rt),...E.Util.applyTransform([gt,kt],rt)]),[g,L]=E.Util.singularValueDecompose2dScale(rt),H=At*g,J=Ft*L,K=this.svgFactory.createElement("svg:pattern");K.setAttributeNS(null,"id",nt),K.setAttributeNS(null,"patternUnits","userSpaceOnUse"),K.setAttributeNS(null,"width",H),K.setAttributeNS(null,"height",J),K.setAttributeNS(null,"x",`${Y}`),K.setAttributeNS(null,"y",`${N}`);const m=this.svg,k=this.transformMatrix,I=this.current.fillColor,W=this.current.strokeColor,G=this.svgFactory.create(w-Y,R-N);if(this.svg=G,this.transformMatrix=rt,Kt===2){const it=E.Util.makeHexColor(...z);this.current.fillColor=it,this.current.strokeColor=it}return this.executeOpTree(this.convertOpList($)),this.svg=m,this.transformMatrix=k,this.current.fillColor=I,this.current.strokeColor=W,K.append(G.childNodes[0]),this.defs.append(K),`url(#${nt})`}_makeShadingPattern(T){switch(typeof T=="string"&&(T=this.objs.get(T)),T[0]){case"RadialAxial":const z=`shading${U++}`,$=T[3];let rt;switch(T[1]){case"axial":const et=T[4],yt=T[5];rt=this.svgFactory.createElement("svg:linearGradient"),rt.setAttributeNS(null,"id",z),rt.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),rt.setAttributeNS(null,"x1",et[0]),rt.setAttributeNS(null,"y1",et[1]),rt.setAttributeNS(null,"x2",yt[0]),rt.setAttributeNS(null,"y2",yt[1]);break;case"radial":const gt=T[4],kt=T[5],At=T[6],Ft=T[7];rt=this.svgFactory.createElement("svg:radialGradient"),rt.setAttributeNS(null,"id",z),rt.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),rt.setAttributeNS(null,"cx",kt[0]),rt.setAttributeNS(null,"cy",kt[1]),rt.setAttributeNS(null,"r",Ft),rt.setAttributeNS(null,"fx",gt[0]),rt.setAttributeNS(null,"fy",gt[1]),rt.setAttributeNS(null,"fr",At);break;default:throw new Error(`Unknown RadialAxial type: ${T[1]}`)}for(const et of $){const yt=this.svgFactory.createElement("svg:stop");yt.setAttributeNS(null,"offset",et[0]),yt.setAttributeNS(null,"stop-color",et[1]),rt.append(yt)}return this.defs.append(rt),`url(#${z})`;case"Mesh":return(0,E.warn)("Unimplemented pattern Mesh"),null;case"Dummy":return"hotpink";default:throw new Error(`Unknown IR type: ${T[0]}`)}}setDash(T,z){this.current.dashArray=T,this.current.dashPhase=z}constructPath(T,z){const $=this.current;let rt=$.x,et=$.y,yt=[],gt=0;for(const kt of T)switch(kt|0){case E.OPS.rectangle:rt=z[gt++],et=z[gt++];const At=z[gt++],Ft=z[gt++],Kt=rt+At,nt=et+Ft;yt.push("M",f(rt),f(et),"L",f(Kt),f(et),"L",f(Kt),f(nt),"L",f(rt),f(nt),"Z");break;case E.OPS.moveTo:rt=z[gt++],et=z[gt++],yt.push("M",f(rt),f(et));break;case E.OPS.lineTo:rt=z[gt++],et=z[gt++],yt.push("L",f(rt),f(et));break;case E.OPS.curveTo:rt=z[gt+4],et=z[gt+5],yt.push("C",f(z[gt]),f(z[gt+1]),f(z[gt+2]),f(z[gt+3]),f(rt),f(et)),gt+=6;break;case E.OPS.curveTo2:yt.push("C",f(rt),f(et),f(z[gt]),f(z[gt+1]),f(z[gt+2]),f(z[gt+3])),rt=z[gt+2],et=z[gt+3],gt+=4;break;case E.OPS.curveTo3:rt=z[gt+2],et=z[gt+3],yt.push("C",f(z[gt]),f(z[gt+1]),f(rt),f(et),f(rt),f(et)),gt+=4;break;case E.OPS.closePath:yt.push("Z");break}yt=yt.join(" "),$.path&&T.length>0&&T[0]!==E.OPS.rectangle&&T[0]!==E.OPS.moveTo?yt=$.path.getAttributeNS(null,"d")+yt:($.path=this.svgFactory.createElement("svg:path"),this._ensureTransformGroup().append($.path)),$.path.setAttributeNS(null,"d",yt),$.path.setAttributeNS(null,"fill","none"),$.element=$.path,$.setCurrentPoint(rt,et)}endPath(){const T=this.current;if(T.path=null,!this.pendingClip)return;if(!T.element){this.pendingClip=null;return}const z=`clippath${j++}`,$=this.svgFactory.createElement("svg:clipPath");$.setAttributeNS(null,"id",z),$.setAttributeNS(null,"transform",A(this.transformMatrix));const rt=T.element.cloneNode(!0);if(this.pendingClip==="evenodd"?rt.setAttributeNS(null,"clip-rule","evenodd"):rt.setAttributeNS(null,"clip-rule","nonzero"),this.pendingClip=null,$.append(rt),this.defs.append($),T.activeClipUrl){T.clipGroup=null;for(const et of this.extraStack)et.clipGroup=null;$.setAttributeNS(null,"clip-path",T.activeClipUrl)}T.activeClipUrl=`url(#${z})`,this.tgrp=null}clip(T){this.pendingClip=T}closePath(){const T=this.current;if(T.path){const z=`${T.path.getAttributeNS(null,"d")}Z`;T.path.setAttributeNS(null,"d",z)}}setLeading(T){this.current.leading=-T}setTextRise(T){this.current.textRise=T}setTextRenderingMode(T){this.current.textRenderingMode=T}setHScale(T){this.current.textHScale=T/100}setRenderingIntent(T){}setFlatness(T){}setGState(T){for(const[z,$]of T)switch(z){case"LW":this.setLineWidth($);break;case"LC":this.setLineCap($);break;case"LJ":this.setLineJoin($);break;case"ML":this.setMiterLimit($);break;case"D":this.setDash($[0],$[1]);break;case"RI":this.setRenderingIntent($);break;case"FL":this.setFlatness($);break;case"Font":this.setFont($);break;case"CA":this.setStrokeAlpha($);break;case"ca":this.setFillAlpha($);break;default:(0,E.warn)(`Unimplemented graphic state operator ${z}`);break}}fill(){const T=this.current;T.element&&(T.element.setAttributeNS(null,"fill",T.fillColor),T.element.setAttributeNS(null,"fill-opacity",T.fillAlpha),this.endPath())}stroke(){const T=this.current;T.element&&(this._setStrokeAttributes(T.element),T.element.setAttributeNS(null,"fill","none"),this.endPath())}_setStrokeAttributes(T,z=1){const $=this.current;let rt=$.dashArray;z!==1&&rt.length>0&&(rt=rt.map(function(et){return z*et})),T.setAttributeNS(null,"stroke",$.strokeColor),T.setAttributeNS(null,"stroke-opacity",$.strokeAlpha),T.setAttributeNS(null,"stroke-miterlimit",f($.miterLimit)),T.setAttributeNS(null,"stroke-linecap",$.lineCap),T.setAttributeNS(null,"stroke-linejoin",$.lineJoin),T.setAttributeNS(null,"stroke-width",f(z*$.lineWidth)+"px"),T.setAttributeNS(null,"stroke-dasharray",rt.map(f).join(" ")),T.setAttributeNS(null,"stroke-dashoffset",f(z*$.dashPhase)+"px")}eoFill(){this.current.element?.setAttributeNS(null,"fill-rule","evenodd"),this.fill()}fillStroke(){this.stroke(),this.fill()}eoFillStroke(){this.current.element?.setAttributeNS(null,"fill-rule","evenodd"),this.fillStroke()}closeStroke(){this.closePath(),this.stroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.closePath(),this.eoFillStroke()}paintSolidColorImageMask(){const T=this.svgFactory.createElement("svg:rect");T.setAttributeNS(null,"x","0"),T.setAttributeNS(null,"y","0"),T.setAttributeNS(null,"width","1px"),T.setAttributeNS(null,"height","1px"),T.setAttributeNS(null,"fill",this.current.fillColor),this._ensureTransformGroup().append(T)}paintImageXObject(T){const z=this.getObject(T);if(!z){(0,E.warn)(`Dependent image with object ID ${T} is not ready yet`);return}this.paintInlineImageXObject(z)}paintInlineImageXObject(T,z){const $=T.width,rt=T.height,et=h(T,this.forceDataSchema,!!z),yt=this.svgFactory.createElement("svg:rect");yt.setAttributeNS(null,"x","0"),yt.setAttributeNS(null,"y","0"),yt.setAttributeNS(null,"width",f($)),yt.setAttributeNS(null,"height",f(rt)),this.current.element=yt,this.clip("nonzero");const gt=this.svgFactory.createElement("svg:image");gt.setAttributeNS(B,"xlink:href",et),gt.setAttributeNS(null,"x","0"),gt.setAttributeNS(null,"y",f(-rt)),gt.setAttributeNS(null,"width",f($)+"px"),gt.setAttributeNS(null,"height",f(rt)+"px"),gt.setAttributeNS(null,"transform",`scale(${f(1/$)} ${f(-1/rt)})`),z?z.append(gt):this._ensureTransformGroup().append(gt)}paintImageMaskXObject(T){const z=this.getObject(T.data,T);if(z.bitmap){(0,E.warn)("paintImageMaskXObject: ImageBitmap support is not implemented, ensure that the `isOffscreenCanvasSupported` API parameter is disabled.");return}const $=this.current,rt=z.width,et=z.height,yt=$.fillColor;$.maskId=`mask${x++}`;const gt=this.svgFactory.createElement("svg:mask");gt.setAttributeNS(null,"id",$.maskId);const kt=this.svgFactory.createElement("svg:rect");kt.setAttributeNS(null,"x","0"),kt.setAttributeNS(null,"y","0"),kt.setAttributeNS(null,"width",f(rt)),kt.setAttributeNS(null,"height",f(et)),kt.setAttributeNS(null,"fill",yt),kt.setAttributeNS(null,"mask",`url(#${$.maskId})`),this.defs.append(gt),this._ensureTransformGroup().append(kt),this.paintInlineImageXObject(z,gt)}paintFormXObjectBegin(T,z){if(Array.isArray(T)&&T.length===6&&this.transform(T[0],T[1],T[2],T[3],T[4],T[5]),z){const $=z[2]-z[0],rt=z[3]-z[1],et=this.svgFactory.createElement("svg:rect");et.setAttributeNS(null,"x",z[0]),et.setAttributeNS(null,"y",z[1]),et.setAttributeNS(null,"width",f($)),et.setAttributeNS(null,"height",f(rt)),this.current.element=et,this.clip("nonzero"),this.endPath()}}paintFormXObjectEnd(){}_initialize(T){const z=this.svgFactory.create(T.width,T.height),$=this.svgFactory.createElement("svg:defs");z.append($),this.defs=$;const rt=this.svgFactory.createElement("svg:g");return rt.setAttributeNS(null,"transform",A(T.transform)),z.append(rt),this.svg=rt,z}_ensureClipGroup(){if(!this.current.clipGroup){const T=this.svgFactory.createElement("svg:g");T.setAttributeNS(null,"clip-path",this.current.activeClipUrl),this.svg.append(T),this.current.clipGroup=T}return this.current.clipGroup}_ensureTransformGroup(){return this.tgrp||(this.tgrp=this.svgFactory.createElement("svg:g"),this.tgrp.setAttributeNS(null,"transform",A(this.transformMatrix)),this.current.activeClipUrl?this._ensureClipGroup().append(this.tgrp):this.svg.append(this.tgrp)),this.tgrp}}u.SVGGraphics=Z}),((_,u)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.XfaText=void 0;class M{static textContent(E){const O=[],D={items:O,styles:Object.create(null)};function B(F){if(!F)return;let d=null;const l=F.name;if(l==="#text")d=F.value;else if(M.shouldBuildText(l))F?.attributes?.textContent?d=F.attributes.textContent:F.value&&(d=F.value);else return;if(d!==null&&O.push({str:d}),!!F.children)for(const h of F.children)B(h)}return B(E),D}static shouldBuildText(E){return!(E==="textarea"||E==="input"||E==="option"||E==="select")}}u.XfaText=M}),((_,u,M)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.TextLayerRenderTask=void 0,u.renderTextLayer=A,u.updateTextLayer=j;var o=M(1),E=M(6);const O=1e5,D=30,B=.8,F=new Map;function d(x,U){let Z;if(U&&o.FeatureTest.isOffscreenCanvasSupported)Z=new OffscreenCanvas(x,x).getContext("2d",{alpha:!1});else{const V=document.createElement("canvas");V.width=V.height=x,Z=V.getContext("2d",{alpha:!1})}return Z}function l(x,U){const Z=F.get(x);if(Z)return Z;const V=d(D,U);V.font=`${D}px ${x}`;const T=V.measureText("");let z=T.fontBoundingBoxAscent,$=Math.abs(T.fontBoundingBoxDescent);if(z){const et=z/(z+$);return F.set(x,et),V.canvas.width=V.canvas.height=0,et}V.strokeStyle="red",V.clearRect(0,0,D,D),V.strokeText("g",0,0);let rt=V.getImageData(0,0,D,D).data;$=0;for(let et=rt.length-1-3;et>=0;et-=4)if(rt[et]>0){$=Math.ceil(et/4/D);break}V.clearRect(0,0,D,D),V.strokeText("A",0,D),rt=V.getImageData(0,0,D,D).data,z=0;for(let et=0,yt=rt.length;et<yt;et+=4)if(rt[et]>0){z=D-Math.floor(et/4/D);break}if(V.canvas.width=V.canvas.height=0,z){const et=z/(z+$);return F.set(x,et),et}return F.set(x,B),B}function h(x,U,Z){const V=document.createElement("span"),T={angle:0,canvasWidth:0,hasText:U.str!=="",hasEOL:U.hasEOL,fontSize:0};x._textDivs.push(V);const z=o.Util.transform(x._transform,U.transform);let $=Math.atan2(z[1],z[0]);const rt=Z[U.fontName];rt.vertical&&($+=Math.PI/2);const et=Math.hypot(z[2],z[3]),yt=et*l(rt.fontFamily,x._isOffscreenCanvasSupported);let gt,kt;$===0?(gt=z[4],kt=z[5]-yt):(gt=z[4]+yt*Math.sin($),kt=z[5]-yt*Math.cos($));const At="calc(var(--scale-factor)*",Ft=V.style;x._container===x._rootContainer?(Ft.left=`${(100*gt/x._pageWidth).toFixed(2)}%`,Ft.top=`${(100*kt/x._pageHeight).toFixed(2)}%`):(Ft.left=`${At}${gt.toFixed(2)}px)`,Ft.top=`${At}${kt.toFixed(2)}px)`),Ft.fontSize=`${At}${et.toFixed(2)}px)`,Ft.fontFamily=rt.fontFamily,T.fontSize=et,V.setAttribute("role","presentation"),V.textContent=U.str,V.dir=U.dir,x._fontInspectorEnabled&&(V.dataset.fontName=U.fontName),$!==0&&(T.angle=$*(180/Math.PI));let Kt=!1;if(U.str.length>1)Kt=!0;else if(U.str!==" "&&U.transform[0]!==U.transform[3]){const nt=Math.abs(U.transform[0]),Y=Math.abs(U.transform[3]);nt!==Y&&Math.max(nt,Y)/Math.min(nt,Y)>1.5&&(Kt=!0)}Kt&&(T.canvasWidth=rt.vertical?U.height:U.width),x._textDivProperties.set(V,T),x._isReadableStream&&x._layoutText(V)}function b(x){const{div:U,scale:Z,properties:V,ctx:T,prevFontSize:z,prevFontFamily:$}=x,{style:rt}=U;let et="";if(V.canvasWidth!==0&&V.hasText){const{fontFamily:yt}=rt,{canvasWidth:gt,fontSize:kt}=V;(z!==kt||$!==yt)&&(T.font=`${kt*Z}px ${yt}`,x.prevFontSize=kt,x.prevFontFamily=yt);const{width:At}=T.measureText(U.textContent);At>0&&(et=`scaleX(${gt*Z/At})`)}V.angle!==0&&(et=`rotate(${V.angle}deg) ${et}`),et.length>0&&(rt.transform=et)}function y(x){if(x._canceled)return;const U=x._textDivs,Z=x._capability;if(U.length>O){Z.resolve();return}if(!x._isReadableStream)for(const T of U)x._layoutText(T);Z.resolve()}class f{constructor({textContentSource:U,container:Z,viewport:V,textDivs:T,textDivProperties:z,textContentItemsStr:$,isOffscreenCanvasSupported:rt}){this._textContentSource=U,this._isReadableStream=U instanceof ReadableStream,this._container=this._rootContainer=Z,this._textDivs=T||[],this._textContentItemsStr=$||[],this._isOffscreenCanvasSupported=rt,this._fontInspectorEnabled=!!globalThis.FontInspector?.enabled,this._reader=null,this._textDivProperties=z||new WeakMap,this._canceled=!1,this._capability=new o.PromiseCapability,this._layoutTextParams={prevFontSize:null,prevFontFamily:null,div:null,scale:V.scale*(globalThis.devicePixelRatio||1),properties:null,ctx:d(0,rt)};const{pageWidth:et,pageHeight:yt,pageX:gt,pageY:kt}=V.rawDims;this._transform=[1,0,0,-1,-gt,kt+yt],this._pageWidth=et,this._pageHeight=yt,(0,E.setLayerDimensions)(Z,V),this._capability.promise.finally(()=>{this._layoutTextParams=null}).catch(()=>{})}get promise(){return this._capability.promise}cancel(){this._canceled=!0,this._reader&&(this._reader.cancel(new o.AbortException("TextLayer task cancelled.")).catch(()=>{}),this._reader=null),this._capability.reject(new o.AbortException("TextLayer task cancelled."))}_processItems(U,Z){for(const V of U){if(V.str===void 0){if(V.type==="beginMarkedContentProps"||V.type==="beginMarkedContent"){const T=this._container;this._container=document.createElement("span"),this._container.classList.add("markedContent"),V.id!==null&&this._container.setAttribute("id",`${V.id}`),T.append(this._container)}else V.type==="endMarkedContent"&&(this._container=this._container.parentNode);continue}this._textContentItemsStr.push(V.str),h(this,V,Z)}}_layoutText(U){const Z=this._layoutTextParams.properties=this._textDivProperties.get(U);if(this._layoutTextParams.div=U,b(this._layoutTextParams),Z.hasText&&this._container.append(U),Z.hasEOL){const V=document.createElement("br");V.setAttribute("role","presentation"),this._container.append(V)}}_render(){const U=new o.PromiseCapability;let Z=Object.create(null);if(this._isReadableStream){const V=()=>{this._reader.read().then(({value:T,done:z})=>{if(z){U.resolve();return}Object.assign(Z,T.styles),this._processItems(T.items,Z),V()},U.reject)};this._reader=this._textContentSource.getReader(),V()}else if(this._textContentSource){const{items:V,styles:T}=this._textContentSource;this._processItems(V,T),U.resolve()}else throw new Error('No "textContentSource" parameter specified.');U.promise.then(()=>{Z=null,y(this)},this._capability.reject)}}u.TextLayerRenderTask=f;function A(x){!x.textContentSource&&(x.textContent||x.textContentStream)&&((0,E.deprecated)("The TextLayerRender `textContent`/`textContentStream` parameters will be removed in the future, please use `textContentSource` instead."),x.textContentSource=x.textContent||x.textContentStream);const{container:U,viewport:Z}=x,V=getComputedStyle(U),T=V.getPropertyValue("visibility"),z=parseFloat(V.getPropertyValue("--scale-factor"));T==="visible"&&(!z||Math.abs(z-Z.scale)>1e-5)&&console.error("The `--scale-factor` CSS-variable must be set, to the same value as `viewport.scale`, either on the `container`-element itself or higher up in the DOM.");const $=new f(x);return $._render(),$}function j({container:x,viewport:U,textDivs:Z,textDivProperties:V,isOffscreenCanvasSupported:T,mustRotate:z=!0,mustRescale:$=!0}){if(z&&(0,E.setLayerDimensions)(x,{rotation:U.rotation}),$){const rt=d(0,T),yt={prevFontSize:null,prevFontFamily:null,div:null,scale:U.scale*(globalThis.devicePixelRatio||1),properties:null,ctx:rt};for(const gt of Z)yt.properties=V.get(gt),yt.div=gt,b(yt)}}}),((_,u,M)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.AnnotationEditorLayer=void 0;var o=M(1),E=M(4),O=M(28),D=M(33),B=M(6),F=M(34);class d{#t;#e=!1;#n=null;#i=this.pointerup.bind(this);#o=this.pointerdown.bind(this);#r=new Map;#a=!1;#l=!1;#c=!1;#s;static _initialized=!1;constructor({uiManager:h,pageIndex:b,div:y,accessibilityManager:f,annotationLayer:A,viewport:j,l10n:x}){const U=[O.FreeTextEditor,D.InkEditor,F.StampEditor];if(!d._initialized){d._initialized=!0;for(const Z of U)Z.initialize(x)}h.registerEditorTypes(U),this.#s=h,this.pageIndex=b,this.div=y,this.#t=f,this.#n=A,this.viewport=j,this.#s.addLayer(this)}get isEmpty(){return this.#r.size===0}updateToolbar(h){this.#s.updateToolbar(h)}updateMode(h=this.#s.getMode()){this.#p(),h===o.AnnotationEditorType.INK?(this.addInkEditorIfNeeded(!1),this.disableClick()):this.enableClick(),h!==o.AnnotationEditorType.NONE&&(this.div.classList.toggle("freeTextEditing",h===o.AnnotationEditorType.FREETEXT),this.div.classList.toggle("inkEditing",h===o.AnnotationEditorType.INK),this.div.classList.toggle("stampEditing",h===o.AnnotationEditorType.STAMP),this.div.hidden=!1)}addInkEditorIfNeeded(h){if(!h&&this.#s.getMode()!==o.AnnotationEditorType.INK)return;if(!h){for(const y of this.#r.values())if(y.isEmpty()){y.setInBackground();return}}this.#d({offsetX:0,offsetY:0},!1).setInBackground()}setEditingState(h){this.#s.setEditingState(h)}addCommands(h){this.#s.addCommands(h)}enable(){this.div.style.pointerEvents="auto";const h=new Set;for(const y of this.#r.values())y.enableEditing(),y.annotationElementId&&h.add(y.annotationElementId);if(!this.#n)return;const b=this.#n.getEditableAnnotations();for(const y of b){if(y.hide(),this.#s.isDeletedAnnotationElement(y.data.id)||h.has(y.data.id))continue;const f=this.deserialize(y);f&&(this.addOrRebuild(f),f.enableEditing())}}disable(){this.#c=!0,this.div.style.pointerEvents="none";const h=new Set;for(const b of this.#r.values()){if(b.disableEditing(),!b.annotationElementId||b.serialize()!==null){h.add(b.annotationElementId);continue}this.getEditableAnnotation(b.annotationElementId)?.show(),b.remove()}if(this.#n){const b=this.#n.getEditableAnnotations();for(const y of b){const{id:f}=y.data;h.has(f)||this.#s.isDeletedAnnotationElement(f)||y.show()}}this.#p(),this.isEmpty&&(this.div.hidden=!0),this.#c=!1}getEditableAnnotation(h){return this.#n?.getEditableAnnotation(h)||null}setActiveEditor(h){this.#s.getActive()!==h&&this.#s.setActiveEditor(h)}enableClick(){this.div.addEventListener("pointerdown",this.#o),this.div.addEventListener("pointerup",this.#i)}disableClick(){this.div.removeEventListener("pointerdown",this.#o),this.div.removeEventListener("pointerup",this.#i)}attach(h){this.#r.set(h.id,h);const{annotationElementId:b}=h;b&&this.#s.isDeletedAnnotationElement(b)&&this.#s.removeDeletedAnnotationElement(h)}detach(h){this.#r.delete(h.id),this.#t?.removePointerInTextLayer(h.contentDiv),!this.#c&&h.annotationElementId&&this.#s.addDeletedAnnotationElement(h)}remove(h){this.detach(h),this.#s.removeEditor(h),h.div.contains(document.activeElement)&&setTimeout(()=>{this.#s.focusMainContainer()},0),h.div.remove(),h.isAttachedToDOM=!1,this.#l||this.addInkEditorIfNeeded(!1)}changeParent(h){h.parent!==this&&(h.annotationElementId&&(this.#s.addDeletedAnnotationElement(h.annotationElementId),E.AnnotationEditor.deleteAnnotationElement(h),h.annotationElementId=null),this.attach(h),h.parent?.detach(h),h.setParent(this),h.div&&h.isAttachedToDOM&&(h.div.remove(),this.div.append(h.div)))}add(h){if(this.changeParent(h),this.#s.addEditor(h),this.attach(h),!h.isAttachedToDOM){const b=h.render();this.div.append(b),h.isAttachedToDOM=!0}h.fixAndSetPosition(),h.onceAdded(),this.#s.addToAnnotationStorage(h)}moveEditorInDOM(h){if(!h.isAttachedToDOM)return;const{activeElement:b}=document;h.div.contains(b)&&(h._focusEventsAllowed=!1,setTimeout(()=>{h.div.contains(document.activeElement)?h._focusEventsAllowed=!0:(h.div.addEventListener("focusin",()=>{h._focusEventsAllowed=!0},{once:!0}),b.focus())},0)),h._structTreeParentId=this.#t?.moveElementInDOM(this.div,h.div,h.contentDiv,!0)}addOrRebuild(h){h.needsToBeRebuilt()?h.rebuild():this.add(h)}addUndoableEditor(h){const b=()=>h._uiManager.rebuild(h),y=()=>{h.remove()};this.addCommands({cmd:b,undo:y,mustExec:!1})}getNextId(){return this.#s.getId()}#f(h){switch(this.#s.getMode()){case o.AnnotationEditorType.FREETEXT:return new O.FreeTextEditor(h);case o.AnnotationEditorType.INK:return new D.InkEditor(h);case o.AnnotationEditorType.STAMP:return new F.StampEditor(h)}return null}pasteEditor(h,b){this.#s.updateToolbar(h),this.#s.updateMode(h);const{offsetX:y,offsetY:f}=this.#h(),A=this.getNextId(),j=this.#f({parent:this,id:A,x:y,y:f,uiManager:this.#s,isCentered:!0,...b});j&&this.add(j)}deserialize(h){switch(h.annotationType??h.annotationEditorType){case o.AnnotationEditorType.FREETEXT:return O.FreeTextEditor.deserialize(h,this,this.#s);case o.AnnotationEditorType.INK:return D.InkEditor.deserialize(h,this,this.#s);case o.AnnotationEditorType.STAMP:return F.StampEditor.deserialize(h,this,this.#s)}return null}#d(h,b){const y=this.getNextId(),f=this.#f({parent:this,id:y,x:h.offsetX,y:h.offsetY,uiManager:this.#s,isCentered:b});return f&&this.add(f),f}#h(){const{x:h,y:b,width:y,height:f}=this.div.getBoundingClientRect(),A=Math.max(0,h),j=Math.max(0,b),x=Math.min(window.innerWidth,h+y),U=Math.min(window.innerHeight,b+f),Z=(A+x)/2-h,V=(j+U)/2-b,[T,z]=this.viewport.rotation%180===0?[Z,V]:[V,Z];return{offsetX:T,offsetY:z}}addNewEditor(){this.#d(this.#h(),!0)}setSelected(h){this.#s.setSelected(h)}toggleSelected(h){this.#s.toggleSelected(h)}isSelected(h){return this.#s.isSelected(h)}unselect(h){this.#s.unselect(h)}pointerup(h){const{isMac:b}=o.FeatureTest.platform;if(!(h.button!==0||h.ctrlKey&&b)&&h.target===this.div&&this.#a){if(this.#a=!1,!this.#e){this.#e=!0;return}if(this.#s.getMode()===o.AnnotationEditorType.STAMP){this.#s.unselectAll();return}this.#d(h,!1)}}pointerdown(h){if(this.#a){this.#a=!1;return}const{isMac:b}=o.FeatureTest.platform;if(h.button!==0||h.ctrlKey&&b||h.target!==this.div)return;this.#a=!0;const y=this.#s.getActive();this.#e=!y||y.isEmpty()}findNewParent(h,b,y){const f=this.#s.findParent(b,y);return f===null||f===this?!1:(f.changeParent(h),!0)}destroy(){this.#s.getActive()?.parent===this&&(this.#s.commitOrRemove(),this.#s.setActiveEditor(null));for(const h of this.#r.values())this.#t?.removePointerInTextLayer(h.contentDiv),h.setParent(null),h.isAttachedToDOM=!1,h.div.remove();this.div=null,this.#r.clear(),this.#s.removeLayer(this)}#p(){this.#l=!0;for(const h of this.#r.values())h.isEmpty()&&h.remove();this.#l=!1}render({viewport:h}){this.viewport=h,(0,B.setLayerDimensions)(this.div,h);for(const b of this.#s.getEditors(this.pageIndex))this.add(b);this.updateMode()}update({viewport:h}){this.#s.commitOrRemove(),this.viewport=h,(0,B.setLayerDimensions)(this.div,{rotation:h.rotation}),this.updateMode()}get pageDimensions(){const{pageWidth:h,pageHeight:b}=this.viewport.rawDims;return[h,b]}}u.AnnotationEditorLayer=d}),((_,u,M)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.FreeTextEditor=void 0;var o=M(1),E=M(5),O=M(4),D=M(29);class B extends O.AnnotationEditor{#t=this.editorDivBlur.bind(this);#e=this.editorDivFocus.bind(this);#n=this.editorDivInput.bind(this);#i=this.editorDivKeydown.bind(this);#o;#r="";#a=`${this.id}-editor`;#l;#c=null;static _freeTextDefaultContent="";static _internalPadding=0;static _defaultColor=null;static _defaultFontSize=10;static get _keyboardManager(){const d=B.prototype,l=y=>y.isEmpty(),h=E.AnnotationEditorUIManager.TRANSLATE_SMALL,b=E.AnnotationEditorUIManager.TRANSLATE_BIG;return(0,o.shadow)(this,"_keyboardManager",new E.KeyboardManager([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],d.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],d.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],d._translateEmpty,{args:[-h,0],checker:l}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],d._translateEmpty,{args:[-b,0],checker:l}],[["ArrowRight","mac+ArrowRight"],d._translateEmpty,{args:[h,0],checker:l}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],d._translateEmpty,{args:[b,0],checker:l}],[["ArrowUp","mac+ArrowUp"],d._translateEmpty,{args:[0,-h],checker:l}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],d._translateEmpty,{args:[0,-b],checker:l}],[["ArrowDown","mac+ArrowDown"],d._translateEmpty,{args:[0,h],checker:l}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],d._translateEmpty,{args:[0,b],checker:l}]]))}static _type="freetext";constructor(d){super({...d,name:"freeTextEditor"}),this.#o=d.color||B._defaultColor||O.AnnotationEditor._defaultLineColor,this.#l=d.fontSize||B._defaultFontSize}static initialize(d){O.AnnotationEditor.initialize(d,{strings:["free_text2_default_content","editor_free_text2_aria_label"]});const l=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(l.getPropertyValue("--freetext-padding"))}static updateDefaultParams(d,l){switch(d){case o.AnnotationEditorParamsType.FREETEXT_SIZE:B._defaultFontSize=l;break;case o.AnnotationEditorParamsType.FREETEXT_COLOR:B._defaultColor=l;break}}updateParams(d,l){switch(d){case o.AnnotationEditorParamsType.FREETEXT_SIZE:this.#s(l);break;case o.AnnotationEditorParamsType.FREETEXT_COLOR:this.#f(l);break}}static get defaultPropertiesToUpdate(){return[[o.AnnotationEditorParamsType.FREETEXT_SIZE,B._defaultFontSize],[o.AnnotationEditorParamsType.FREETEXT_COLOR,B._defaultColor||O.AnnotationEditor._defaultLineColor]]}get propertiesToUpdate(){return[[o.AnnotationEditorParamsType.FREETEXT_SIZE,this.#l],[o.AnnotationEditorParamsType.FREETEXT_COLOR,this.#o]]}#s(d){const l=b=>{this.editorDiv.style.fontSize=`calc(${b}px * var(--scale-factor))`,this.translate(0,-(b-this.#l)*this.parentScale),this.#l=b,this.#h()},h=this.#l;this.addCommands({cmd:()=>{l(d)},undo:()=>{l(h)},mustExec:!0,type:o.AnnotationEditorParamsType.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})}#f(d){const l=this.#o;this.addCommands({cmd:()=>{this.#o=this.editorDiv.style.color=d},undo:()=>{this.#o=this.editorDiv.style.color=l},mustExec:!0,type:o.AnnotationEditorParamsType.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})}_translateEmpty(d,l){this._uiManager.translateSelectedEditors(d,l,!0)}getInitialTranslation(){const d=this.parentScale;return[-B._internalPadding*d,-(B._internalPadding+this.#l)*d]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){this.isInEditMode()||(this.parent.setEditingState(!1),this.parent.updateToolbar(o.AnnotationEditorType.FREETEXT),super.enableEditMode(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),this.editorDiv.addEventListener("keydown",this.#i),this.editorDiv.addEventListener("focus",this.#e),this.editorDiv.addEventListener("blur",this.#t),this.editorDiv.addEventListener("input",this.#n))}disableEditMode(){this.isInEditMode()&&(this.parent.setEditingState(!0),super.disableEditMode(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",this.#a),this._isDraggable=!0,this.editorDiv.removeEventListener("keydown",this.#i),this.editorDiv.removeEventListener("focus",this.#e),this.editorDiv.removeEventListener("blur",this.#t),this.editorDiv.removeEventListener("input",this.#n),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freeTextEditing"))}focusin(d){this._focusEventsAllowed&&(super.focusin(d),d.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(){if(this.width){this.#g();return}this.enableEditMode(),this.editorDiv.focus(),this._initialOptions?.isCentered&&this.center(),this._initialOptions=null}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freeTextEditing")),super.remove()}#d(){const d=this.editorDiv.getElementsByTagName("div");if(d.length===0)return this.editorDiv.innerText;const l=[];for(const h of d)l.push(h.innerText.replace(/\r\n?|\n/,""));return l.join(`
`)}#h(){const[d,l]=this.parentDimensions;let h;if(this.isAttachedToDOM)h=this.div.getBoundingClientRect();else{const{currentLayer:b,div:y}=this,f=y.style.display;y.style.display="hidden",b.div.append(this.div),h=y.getBoundingClientRect(),y.remove(),y.style.display=f}this.rotation%180===this.parentRotation%180?(this.width=h.width/d,this.height=h.height/l):(this.width=h.height/d,this.height=h.width/l),this.fixAndSetPosition()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const d=this.#r,l=this.#r=this.#d().trimEnd();if(d===l)return;const h=b=>{if(this.#r=b,!b){this.remove();return}this.#p(),this._uiManager.rebuild(this),this.#h()};this.addCommands({cmd:()=>{h(l)},undo:()=>{h(d)},mustExec:!1}),this.#h()}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}dblclick(d){this.enterInEditMode()}keydown(d){d.target===this.div&&d.key==="Enter"&&(this.enterInEditMode(),d.preventDefault())}editorDivKeydown(d){B._keyboardManager.exec(this,d)}editorDivFocus(d){this.isEditing=!0}editorDivBlur(d){this.isEditing=!1}editorDivInput(d){this.parent.div.classList.toggle("freeTextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(this.div)return this.div;let d,l;this.width&&(d=this.x,l=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",this.#a),this.enableEditing(),O.AnnotationEditor._l10nPromise.get("editor_free_text2_aria_label").then(b=>this.editorDiv?.setAttribute("aria-label",b)),O.AnnotationEditor._l10nPromise.get("free_text2_default_content").then(b=>this.editorDiv?.setAttribute("default-content",b)),this.editorDiv.contentEditable=!0;const{style:h}=this.editorDiv;if(h.fontSize=`calc(${this.#l}px * var(--scale-factor))`,h.color=this.#o,this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),(0,E.bindEvents)(this,this.div,["dblclick","keydown"]),this.width){const[b,y]=this.parentDimensions;if(this.annotationElementId){const{position:f}=this.#c;let[A,j]=this.getInitialTranslation();[A,j]=this.pageTranslationToScreen(A,j);const[x,U]=this.pageDimensions,[Z,V]=this.pageTranslation;let T,z;switch(this.rotation){case 0:T=d+(f[0]-Z)/x,z=l+this.height-(f[1]-V)/U;break;case 90:T=d+(f[0]-Z)/x,z=l-(f[1]-V)/U,[A,j]=[j,-A];break;case 180:T=d-this.width+(f[0]-Z)/x,z=l-(f[1]-V)/U,[A,j]=[-A,-j];break;case 270:T=d+(f[0]-Z-this.height*U)/x,z=l+(f[1]-V-this.width*x)/U,[A,j]=[-j,A];break}this.setAt(T*b,z*y,A,j)}else this.setAt(d*b,l*y,this.width*b,this.height*y);this.#p(),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}#p(){if(this.editorDiv.replaceChildren(),!!this.#r)for(const d of this.#r.split(`
`)){const l=document.createElement("div");l.append(d?document.createTextNode(d):document.createElement("br")),this.editorDiv.append(l)}}get contentDiv(){return this.editorDiv}static deserialize(d,l,h){let b=null;if(d instanceof D.FreeTextAnnotationElement){const{data:{defaultAppearanceData:{fontSize:f,fontColor:A},rect:j,rotation:x,id:U},textContent:Z,textPosition:V,parent:{page:{pageNumber:T}}}=d;if(!Z||Z.length===0)return null;b=d={annotationType:o.AnnotationEditorType.FREETEXT,color:Array.from(A),fontSize:f,value:Z.join(`
`),position:V,pageIndex:T-1,rect:j,rotation:x,id:U,deleted:!1}}const y=super.deserialize(d,l,h);return y.#l=d.fontSize,y.#o=o.Util.makeHexColor(...d.color),y.#r=d.value,y.annotationElementId=d.id||null,y.#c=b,y}serialize(d=!1){if(this.isEmpty())return null;if(this.deleted)return{pageIndex:this.pageIndex,id:this.annotationElementId,deleted:!0};const l=B._internalPadding*this.parentScale,h=this.getRect(l,l),b=O.AnnotationEditor._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:this.#o),y={annotationType:o.AnnotationEditorType.FREETEXT,color:b,fontSize:this.#l,value:this.#r,pageIndex:this.pageIndex,rect:h,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return d?y:this.annotationElementId&&!this.#y(y)?null:(y.id=this.annotationElementId,y)}#y(d){const{value:l,fontSize:h,color:b,rect:y,pageIndex:f}=this.#c;return d.value!==l||d.fontSize!==h||d.rect.some((A,j)=>Math.abs(A-y[j])>=1)||d.color.some((A,j)=>A!==b[j])||d.pageIndex!==f}#g(d=!1){if(!this.annotationElementId)return;if(this.#h(),!d&&(this.width===0||this.height===0)){setTimeout(()=>this.#g(!0),0);return}const l=B._internalPadding*this.parentScale;this.#c.rect=this.getRect(l,l)}}u.FreeTextEditor=B}),((_,u,M)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.StampAnnotationElement=u.InkAnnotationElement=u.FreeTextAnnotationElement=u.AnnotationLayer=void 0;var o=M(1),E=M(6),O=M(3),D=M(30),B=M(31),F=M(32);const d=1e3,l=9,h=new WeakSet;function b(K){return{width:K[2]-K[0],height:K[3]-K[1]}}class y{static create(m){switch(m.data.annotationType){case o.AnnotationType.LINK:return new A(m);case o.AnnotationType.TEXT:return new j(m);case o.AnnotationType.WIDGET:switch(m.data.fieldType){case"Tx":return new U(m);case"Btn":return m.data.radioButton?new T(m):m.data.checkBox?new V(m):new z(m);case"Ch":return new $(m);case"Sig":return new Z(m)}return new x(m);case o.AnnotationType.POPUP:return new rt(m);case o.AnnotationType.FREETEXT:return new yt(m);case o.AnnotationType.LINE:return new gt(m);case o.AnnotationType.SQUARE:return new kt(m);case o.AnnotationType.CIRCLE:return new At(m);case o.AnnotationType.POLYLINE:return new Ft(m);case o.AnnotationType.CARET:return new nt(m);case o.AnnotationType.INK:return new Y(m);case o.AnnotationType.POLYGON:return new Kt(m);case o.AnnotationType.HIGHLIGHT:return new N(m);case o.AnnotationType.UNDERLINE:return new w(m);case o.AnnotationType.SQUIGGLY:return new R(m);case o.AnnotationType.STRIKEOUT:return new g(m);case o.AnnotationType.STAMP:return new L(m);case o.AnnotationType.FILEATTACHMENT:return new H(m);default:return new f(m)}}}class f{#t=!1;constructor(m,{isRenderable:k=!1,ignoreBorder:I=!1,createQuadrilaterals:W=!1}={}){this.isRenderable=k,this.data=m.data,this.layer=m.layer,this.linkService=m.linkService,this.downloadManager=m.downloadManager,this.imageResourcesPath=m.imageResourcesPath,this.renderForms=m.renderForms,this.svgFactory=m.svgFactory,this.annotationStorage=m.annotationStorage,this.enableScripting=m.enableScripting,this.hasJSActions=m.hasJSActions,this._fieldObjects=m.fieldObjects,this.parent=m.parent,k&&(this.container=this._createContainer(I)),W&&this._createQuadrilaterals()}static _hasPopupData({titleObj:m,contentsObj:k,richText:I}){return!!(m?.str||k?.str||I?.str)}get hasPopupData(){return f._hasPopupData(this.data)}_createContainer(m){const{data:k,parent:{page:I,viewport:W}}=this,G=document.createElement("section");G.setAttribute("data-annotation-id",k.id),this instanceof x||(G.tabIndex=d),G.style.zIndex=this.parent.zIndex++,this.data.popupRef&&G.setAttribute("aria-haspopup","dialog"),k.noRotate&&G.classList.add("norotate");const{pageWidth:it,pageHeight:at,pageX:Ct,pageY:Yt}=W.rawDims;if(!k.rect||this instanceof rt){const{rotation:Ut}=k;return!k.hasOwnCanvas&&Ut!==0&&this.setRotation(Ut,G),G}const{width:Rt,height:Dt}=b(k.rect),Pt=o.Util.normalizeRect([k.rect[0],I.view[3]-k.rect[1]+I.view[1],k.rect[2],I.view[3]-k.rect[3]+I.view[1]]);if(!m&&k.borderStyle.width>0){G.style.borderWidth=`${k.borderStyle.width}px`;const Ut=k.borderStyle.horizontalCornerRadius,Qt=k.borderStyle.verticalCornerRadius;if(Ut>0||Qt>0){const se=`calc(${Ut}px * var(--scale-factor)) / calc(${Qt}px * var(--scale-factor))`;G.style.borderRadius=se}else if(this instanceof T){const se=`calc(${Rt}px * var(--scale-factor)) / calc(${Dt}px * var(--scale-factor))`;G.style.borderRadius=se}switch(k.borderStyle.style){case o.AnnotationBorderStyleType.SOLID:G.style.borderStyle="solid";break;case o.AnnotationBorderStyleType.DASHED:G.style.borderStyle="dashed";break;case o.AnnotationBorderStyleType.BEVELED:(0,o.warn)("Unimplemented border style: beveled");break;case o.AnnotationBorderStyleType.INSET:(0,o.warn)("Unimplemented border style: inset");break;case o.AnnotationBorderStyleType.UNDERLINE:G.style.borderBottomStyle="solid";break}const $t=k.borderColor||null;$t?(this.#t=!0,G.style.borderColor=o.Util.makeHexColor($t[0]|0,$t[1]|0,$t[2]|0)):G.style.borderWidth=0}G.style.left=`${100*(Pt[0]-Ct)/it}%`,G.style.top=`${100*(Pt[1]-Yt)/at}%`;const{rotation:Lt}=k;return k.hasOwnCanvas||Lt===0?(G.style.width=`${100*Rt/it}%`,G.style.height=`${100*Dt/at}%`):this.setRotation(Lt,G),G}setRotation(m,k=this.container){if(!this.data.rect)return;const{pageWidth:I,pageHeight:W}=this.parent.viewport.rawDims,{width:G,height:it}=b(this.data.rect);let at,Ct;m%180===0?(at=100*G/I,Ct=100*it/W):(at=100*it/I,Ct=100*G/W),k.style.width=`${at}%`,k.style.height=`${Ct}%`,k.setAttribute("data-main-rotation",(360-m)%360)}get _commonActions(){const m=(k,I,W)=>{const G=W.detail[k],it=G[0],at=G.slice(1);W.target.style[I]=D.ColorConverters[`${it}_HTML`](at),this.annotationStorage.setValue(this.data.id,{[I]:D.ColorConverters[`${it}_rgb`](at)})};return(0,o.shadow)(this,"_commonActions",{display:k=>{const{display:I}=k.detail,W=I%2===1;this.container.style.visibility=W?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:W,noPrint:I===1||I===2})},print:k=>{this.annotationStorage.setValue(this.data.id,{noPrint:!k.detail.print})},hidden:k=>{const{hidden:I}=k.detail;this.container.style.visibility=I?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:I,noView:I})},focus:k=>{setTimeout(()=>k.target.focus({preventScroll:!1}),0)},userName:k=>{k.target.title=k.detail.userName},readonly:k=>{k.target.disabled=k.detail.readonly},required:k=>{this._setRequired(k.target,k.detail.required)},bgColor:k=>{m("bgColor","backgroundColor",k)},fillColor:k=>{m("fillColor","backgroundColor",k)},fgColor:k=>{m("fgColor","color",k)},textColor:k=>{m("textColor","color",k)},borderColor:k=>{m("borderColor","borderColor",k)},strokeColor:k=>{m("strokeColor","borderColor",k)},rotation:k=>{const I=k.detail.rotation;this.setRotation(I),this.annotationStorage.setValue(this.data.id,{rotation:I})}})}_dispatchEventFromSandbox(m,k){const I=this._commonActions;for(const W of Object.keys(k.detail))(m[W]||I[W])?.(k)}_setDefaultPropertiesFromJS(m){if(!this.enableScripting)return;const k=this.annotationStorage.getRawValue(this.data.id);if(!k)return;const I=this._commonActions;for(const[W,G]of Object.entries(k)){const it=I[W];if(it){const at={detail:{[W]:G},target:m};it(at),delete k[W]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:m}=this.data;if(!m)return;const[k,I,W,G]=this.data.rect;if(m.length===1){const[,{x:Qt,y:$t},{x:se,y:le}]=m[0];if(W===Qt&&G===$t&&k===se&&I===le)return}const{style:it}=this.container;let at;if(this.#t){const{borderColor:Qt,borderWidth:$t}=it;it.borderWidth=0,at=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${Qt}" stroke-width="${$t}">`],this.container.classList.add("hasBorder")}const Ct=W-k,Yt=G-I,{svgFactory:Rt}=this,Dt=Rt.createElement("svg");Dt.classList.add("quadrilateralsContainer"),Dt.setAttribute("width",0),Dt.setAttribute("height",0);const Pt=Rt.createElement("defs");Dt.append(Pt);const Lt=Rt.createElement("clipPath"),Ut=`clippath_${this.data.id}`;Lt.setAttribute("id",Ut),Lt.setAttribute("clipPathUnits","objectBoundingBox"),Pt.append(Lt);for(const[,{x:Qt,y:$t},{x:se,y:le}]of m){const oe=Rt.createElement("rect"),_e=(se-k)/Ct,je=(G-$t)/Yt,Ue=(Qt-se)/Ct,Cn=($t-le)/Yt;oe.setAttribute("x",_e),oe.setAttribute("y",je),oe.setAttribute("width",Ue),oe.setAttribute("height",Cn),Lt.append(oe),at?.push(`<rect vector-effect="non-scaling-stroke" x="${_e}" y="${je}" width="${Ue}" height="${Cn}"/>`)}this.#t&&(at.push("</g></svg>')"),it.backgroundImage=at.join("")),this.container.append(Dt),this.container.style.clipPath=`url(#${Ut})`}_createPopup(){const{container:m,data:k}=this;m.setAttribute("aria-haspopup","dialog");const I=new rt({data:{color:k.color,titleObj:k.titleObj,modificationDate:k.modificationDate,contentsObj:k.contentsObj,richText:k.richText,parentRect:k.rect,borderStyle:0,id:`popup_${k.id}`,rotation:k.rotation},parent:this.parent,elements:[this]});this.parent.div.append(I.render())}render(){(0,o.unreachable)("Abstract method `AnnotationElement.render` called")}_getElementsByName(m,k=null){const I=[];if(this._fieldObjects){const W=this._fieldObjects[m];if(W)for(const{page:G,id:it,exportValues:at}of W){if(G===-1||it===k)continue;const Ct=typeof at=="string"?at:null,Yt=document.querySelector(`[data-element-id="${it}"]`);if(Yt&&!h.has(Yt)){(0,o.warn)(`_getElementsByName - element not allowed: ${it}`);continue}I.push({id:it,exportValue:Ct,domElement:Yt})}return I}for(const W of document.getElementsByName(m)){const{exportValue:G}=W,it=W.getAttribute("data-element-id");it!==k&&h.has(W)&&I.push({id:it,exportValue:G,domElement:W})}return I}show(){this.container&&(this.container.hidden=!1),this.popup?.maybeShow()}hide(){this.container&&(this.container.hidden=!0),this.popup?.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const m=this.getElementsToTriggerPopup();if(Array.isArray(m))for(const k of m)k.classList.add("highlightArea");else m.classList.add("highlightArea")}_editOnDoubleClick(){const{annotationEditorType:m,data:{id:k}}=this;this.container.addEventListener("dblclick",()=>{this.linkService.eventBus?.dispatch("switchannotationeditormode",{source:this,mode:m,editId:k})})}}class A extends f{constructor(m,k=null){super(m,{isRenderable:!0,ignoreBorder:!!k?.ignoreBorder,createQuadrilaterals:!0}),this.isTooltipOnly=m.data.isTooltipOnly}render(){const{data:m,linkService:k}=this,I=document.createElement("a");I.setAttribute("data-element-id",m.id);let W=!1;return m.url?(k.addLinkAttributes(I,m.url,m.newWindow),W=!0):m.action?(this._bindNamedAction(I,m.action),W=!0):m.attachment?(this._bindAttachment(I,m.attachment),W=!0):m.setOCGState?(this.#e(I,m.setOCGState),W=!0):m.dest?(this._bindLink(I,m.dest),W=!0):(m.actions&&(m.actions.Action||m.actions["Mouse Up"]||m.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(I,m),W=!0),m.resetForm?(this._bindResetFormAction(I,m.resetForm),W=!0):this.isTooltipOnly&&!W&&(this._bindLink(I,""),W=!0)),this.container.classList.add("linkAnnotation"),W&&this.container.append(I),this.container}#t(){this.container.setAttribute("data-internal-link","")}_bindLink(m,k){m.href=this.linkService.getDestinationHash(k),m.onclick=()=>(k&&this.linkService.goToDestination(k),!1),(k||k==="")&&this.#t()}_bindNamedAction(m,k){m.href=this.linkService.getAnchorUrl(""),m.onclick=()=>(this.linkService.executeNamedAction(k),!1),this.#t()}_bindAttachment(m,k){m.href=this.linkService.getAnchorUrl(""),m.onclick=()=>(this.downloadManager?.openOrDownloadData(this.container,k.content,k.filename),!1),this.#t()}#e(m,k){m.href=this.linkService.getAnchorUrl(""),m.onclick=()=>(this.linkService.executeSetOCGState(k),!1),this.#t()}_bindJSAction(m,k){m.href=this.linkService.getAnchorUrl("");const I=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const W of Object.keys(k.actions)){const G=I.get(W);G&&(m[G]=()=>(this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:k.id,name:W}}),!1))}m.onclick||(m.onclick=()=>!1),this.#t()}_bindResetFormAction(m,k){const I=m.onclick;if(I||(m.href=this.linkService.getAnchorUrl("")),this.#t(),!this._fieldObjects){(0,o.warn)('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),I||(m.onclick=()=>!1);return}m.onclick=()=>{I?.();const{fields:W,refs:G,include:it}=k,at=[];if(W.length!==0||G.length!==0){const Rt=new Set(G);for(const Dt of W){const Pt=this._fieldObjects[Dt]||[];for(const{id:Lt}of Pt)Rt.add(Lt)}for(const Dt of Object.values(this._fieldObjects))for(const Pt of Dt)Rt.has(Pt.id)===it&&at.push(Pt)}else for(const Rt of Object.values(this._fieldObjects))at.push(...Rt);const Ct=this.annotationStorage,Yt=[];for(const Rt of at){const{id:Dt}=Rt;switch(Yt.push(Dt),Rt.type){case"text":{const Lt=Rt.defaultValue||"";Ct.setValue(Dt,{value:Lt});break}case"checkbox":case"radiobutton":{const Lt=Rt.defaultValue===Rt.exportValues;Ct.setValue(Dt,{value:Lt});break}case"combobox":case"listbox":{const Lt=Rt.defaultValue||"";Ct.setValue(Dt,{value:Lt});break}default:continue}const Pt=document.querySelector(`[data-element-id="${Dt}"]`);if(Pt){if(!h.has(Pt)){(0,o.warn)(`_bindResetFormAction - element not allowed: ${Dt}`);continue}}else continue;Pt.dispatchEvent(new Event("resetform"))}return this.enableScripting&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:Yt,name:"ResetForm"}}),!1}}}class j extends f{constructor(m){super(m,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const m=document.createElement("img");return m.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",m.alt="[{{type}} Annotation]",m.dataset.l10nId="text_annotation_type",m.dataset.l10nArgs=JSON.stringify({type:this.data.name}),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(m),this.container}}class x extends f{render(){return this.data.alternativeText&&(this.container.title=this.data.alternativeText),this.container}showElementAndHideCanvas(m){this.data.hasOwnCanvas&&(m.previousSibling?.nodeName==="CANVAS"&&(m.previousSibling.hidden=!0),m.hidden=!1)}_getKeyModifier(m){const{isWin:k,isMac:I}=o.FeatureTest.platform;return k&&m.ctrlKey||I&&m.metaKey}_setEventListener(m,k,I,W,G){I.includes("mouse")?m.addEventListener(I,it=>{this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:W,value:G(it),shift:it.shiftKey,modifier:this._getKeyModifier(it)}})}):m.addEventListener(I,it=>{if(I==="blur"){if(!k.focused||!it.relatedTarget)return;k.focused=!1}else if(I==="focus"){if(k.focused)return;k.focused=!0}G&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:W,value:G(it)}})})}_setEventListeners(m,k,I,W){for(const[G,it]of I)(it==="Action"||this.data.actions?.[it])&&((it==="Focus"||it==="Blur")&&(k||={focused:!1}),this._setEventListener(m,k,G,it,W),it==="Focus"&&!this.data.actions?.Blur?this._setEventListener(m,k,"blur","Blur",null):it==="Blur"&&!this.data.actions?.Focus&&this._setEventListener(m,k,"focus","Focus",null))}_setBackgroundColor(m){const k=this.data.backgroundColor||null;m.style.backgroundColor=k===null?"transparent":o.Util.makeHexColor(k[0],k[1],k[2])}_setTextStyle(m){const k=["left","center","right"],{fontColor:I}=this.data.defaultAppearanceData,W=this.data.defaultAppearanceData.fontSize||l,G=m.style;let it;const at=2,Ct=Yt=>Math.round(10*Yt)/10;if(this.data.multiLine){const Yt=Math.abs(this.data.rect[3]-this.data.rect[1]-at),Rt=Math.round(Yt/(o.LINE_FACTOR*W))||1,Dt=Yt/Rt;it=Math.min(W,Ct(Dt/o.LINE_FACTOR))}else{const Yt=Math.abs(this.data.rect[3]-this.data.rect[1]-at);it=Math.min(W,Ct(Yt/o.LINE_FACTOR))}G.fontSize=`calc(${it}px * var(--scale-factor))`,G.color=o.Util.makeHexColor(I[0],I[1],I[2]),this.data.textAlignment!==null&&(G.textAlign=k[this.data.textAlignment])}_setRequired(m,k){k?m.setAttribute("required",!0):m.removeAttribute("required"),m.setAttribute("aria-required",k)}}class U extends x{constructor(m){const k=m.renderForms||!m.data.hasAppearance&&!!m.data.fieldValue;super(m,{isRenderable:k})}setPropertyOnSiblings(m,k,I,W){const G=this.annotationStorage;for(const it of this._getElementsByName(m.name,m.id))it.domElement&&(it.domElement[k]=I),G.setValue(it.id,{[W]:I})}render(){const m=this.annotationStorage,k=this.data.id;this.container.classList.add("textWidgetAnnotation");let I=null;if(this.renderForms){const W=m.getValue(k,{value:this.data.fieldValue});let G=W.value||"";const it=m.getValue(k,{charLimit:this.data.maxLen}).charLimit;it&&G.length>it&&(G=G.slice(0,it));let at=W.formattedValue||this.data.textContent?.join(`
`)||null;at&&this.data.comb&&(at=at.replaceAll(/\s+/g,""));const Ct={userValue:G,formattedValue:at,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(I=document.createElement("textarea"),I.textContent=at??G,this.data.doNotScroll&&(I.style.overflowY="hidden")):(I=document.createElement("input"),I.type="text",I.setAttribute("value",at??G),this.data.doNotScroll&&(I.style.overflowX="hidden")),this.data.hasOwnCanvas&&(I.hidden=!0),h.add(I),I.setAttribute("data-element-id",k),I.disabled=this.data.readOnly,I.name=this.data.fieldName,I.tabIndex=d,this._setRequired(I,this.data.required),it&&(I.maxLength=it),I.addEventListener("input",Rt=>{m.setValue(k,{value:Rt.target.value}),this.setPropertyOnSiblings(I,"value",Rt.target.value,"value"),Ct.formattedValue=null}),I.addEventListener("resetform",Rt=>{const Dt=this.data.defaultFieldValue??"";I.value=Ct.userValue=Dt,Ct.formattedValue=null});let Yt=Rt=>{const{formattedValue:Dt}=Ct;Dt!=null&&(Rt.target.value=Dt),Rt.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){I.addEventListener("focus",Dt=>{if(Ct.focused)return;const{target:Pt}=Dt;Ct.userValue&&(Pt.value=Ct.userValue),Ct.lastCommittedValue=Pt.value,Ct.commitKey=1,Ct.focused=!0}),I.addEventListener("updatefromsandbox",Dt=>{this.showElementAndHideCanvas(Dt.target);const Pt={value(Lt){Ct.userValue=Lt.detail.value??"",m.setValue(k,{value:Ct.userValue.toString()}),Lt.target.value=Ct.userValue},formattedValue(Lt){const{formattedValue:Ut}=Lt.detail;Ct.formattedValue=Ut,Ut!=null&&Lt.target!==document.activeElement&&(Lt.target.value=Ut),m.setValue(k,{formattedValue:Ut})},selRange(Lt){Lt.target.setSelectionRange(...Lt.detail.selRange)},charLimit:Lt=>{const{charLimit:Ut}=Lt.detail,{target:Qt}=Lt;if(Ut===0){Qt.removeAttribute("maxLength");return}Qt.setAttribute("maxLength",Ut);let $t=Ct.userValue;!$t||$t.length<=Ut||($t=$t.slice(0,Ut),Qt.value=Ct.userValue=$t,m.setValue(k,{value:$t}),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:k,name:"Keystroke",value:$t,willCommit:!0,commitKey:1,selStart:Qt.selectionStart,selEnd:Qt.selectionEnd}}))}};this._dispatchEventFromSandbox(Pt,Dt)}),I.addEventListener("keydown",Dt=>{Ct.commitKey=1;let Pt=-1;if(Dt.key==="Escape"?Pt=0:Dt.key==="Enter"&&!this.data.multiLine?Pt=2:Dt.key==="Tab"&&(Ct.commitKey=3),Pt===-1)return;const{value:Lt}=Dt.target;Ct.lastCommittedValue!==Lt&&(Ct.lastCommittedValue=Lt,Ct.userValue=Lt,this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:k,name:"Keystroke",value:Lt,willCommit:!0,commitKey:Pt,selStart:Dt.target.selectionStart,selEnd:Dt.target.selectionEnd}}))});const Rt=Yt;Yt=null,I.addEventListener("blur",Dt=>{if(!Ct.focused||!Dt.relatedTarget)return;Ct.focused=!1;const{value:Pt}=Dt.target;Ct.userValue=Pt,Ct.lastCommittedValue!==Pt&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:k,name:"Keystroke",value:Pt,willCommit:!0,commitKey:Ct.commitKey,selStart:Dt.target.selectionStart,selEnd:Dt.target.selectionEnd}}),Rt(Dt)}),this.data.actions?.Keystroke&&I.addEventListener("beforeinput",Dt=>{Ct.lastCommittedValue=null;const{data:Pt,target:Lt}=Dt,{value:Ut,selectionStart:Qt,selectionEnd:$t}=Lt;let se=Qt,le=$t;switch(Dt.inputType){case"deleteWordBackward":{const oe=Ut.substring(0,Qt).match(/\w*[^\w]*$/);oe&&(se-=oe[0].length);break}case"deleteWordForward":{const oe=Ut.substring(Qt).match(/^[^\w]*\w*/);oe&&(le+=oe[0].length);break}case"deleteContentBackward":Qt===$t&&(se-=1);break;case"deleteContentForward":Qt===$t&&(le+=1);break}Dt.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:k,name:"Keystroke",value:Ut,change:Pt||"",willCommit:!1,selStart:se,selEnd:le}})}),this._setEventListeners(I,Ct,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],Dt=>Dt.target.value)}if(Yt&&I.addEventListener("blur",Yt),this.data.comb){const Dt=(this.data.rect[2]-this.data.rect[0])/it;I.classList.add("comb"),I.style.letterSpacing=`calc(${Dt}px * var(--scale-factor) - 1ch)`}}else I=document.createElement("div"),I.textContent=this.data.fieldValue,I.style.verticalAlign="middle",I.style.display="table-cell";return this._setTextStyle(I),this._setBackgroundColor(I),this._setDefaultPropertiesFromJS(I),this.container.append(I),this.container}}class Z extends x{constructor(m){super(m,{isRenderable:!!m.data.hasOwnCanvas})}}class V extends x{constructor(m){super(m,{isRenderable:m.renderForms})}render(){const m=this.annotationStorage,k=this.data,I=k.id;let W=m.getValue(I,{value:k.exportValue===k.fieldValue}).value;typeof W=="string"&&(W=W!=="Off",m.setValue(I,{value:W})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const G=document.createElement("input");return h.add(G),G.setAttribute("data-element-id",I),G.disabled=k.readOnly,this._setRequired(G,this.data.required),G.type="checkbox",G.name=k.fieldName,W&&G.setAttribute("checked",!0),G.setAttribute("exportValue",k.exportValue),G.tabIndex=d,G.addEventListener("change",it=>{const{name:at,checked:Ct}=it.target;for(const Yt of this._getElementsByName(at,I)){const Rt=Ct&&Yt.exportValue===k.exportValue;Yt.domElement&&(Yt.domElement.checked=Rt),m.setValue(Yt.id,{value:Rt})}m.setValue(I,{value:Ct})}),G.addEventListener("resetform",it=>{const at=k.defaultFieldValue||"Off";it.target.checked=at===k.exportValue}),this.enableScripting&&this.hasJSActions&&(G.addEventListener("updatefromsandbox",it=>{const at={value(Ct){Ct.target.checked=Ct.detail.value!=="Off",m.setValue(I,{value:Ct.target.checked})}};this._dispatchEventFromSandbox(at,it)}),this._setEventListeners(G,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],it=>it.target.checked)),this._setBackgroundColor(G),this._setDefaultPropertiesFromJS(G),this.container.append(G),this.container}}class T extends x{constructor(m){super(m,{isRenderable:m.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const m=this.annotationStorage,k=this.data,I=k.id;let W=m.getValue(I,{value:k.fieldValue===k.buttonValue}).value;typeof W=="string"&&(W=W!==k.buttonValue,m.setValue(I,{value:W}));const G=document.createElement("input");if(h.add(G),G.setAttribute("data-element-id",I),G.disabled=k.readOnly,this._setRequired(G,this.data.required),G.type="radio",G.name=k.fieldName,W&&G.setAttribute("checked",!0),G.tabIndex=d,G.addEventListener("change",it=>{const{name:at,checked:Ct}=it.target;for(const Yt of this._getElementsByName(at,I))m.setValue(Yt.id,{value:!1});m.setValue(I,{value:Ct})}),G.addEventListener("resetform",it=>{const at=k.defaultFieldValue;it.target.checked=at!=null&&at===k.buttonValue}),this.enableScripting&&this.hasJSActions){const it=k.buttonValue;G.addEventListener("updatefromsandbox",at=>{const Ct={value:Yt=>{const Rt=it===Yt.detail.value;for(const Dt of this._getElementsByName(Yt.target.name)){const Pt=Rt&&Dt.id===I;Dt.domElement&&(Dt.domElement.checked=Pt),m.setValue(Dt.id,{value:Pt})}}};this._dispatchEventFromSandbox(Ct,at)}),this._setEventListeners(G,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],at=>at.target.checked)}return this._setBackgroundColor(G),this._setDefaultPropertiesFromJS(G),this.container.append(G),this.container}}class z extends A{constructor(m){super(m,{ignoreBorder:m.data.hasAppearance})}render(){const m=super.render();m.classList.add("buttonWidgetAnnotation","pushButton"),this.data.alternativeText&&(m.title=this.data.alternativeText);const k=m.lastChild;return this.enableScripting&&this.hasJSActions&&k&&(this._setDefaultPropertiesFromJS(k),k.addEventListener("updatefromsandbox",I=>{this._dispatchEventFromSandbox({},I)})),m}}class $ extends x{constructor(m){super(m,{isRenderable:m.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const m=this.annotationStorage,k=this.data.id,I=m.getValue(k,{value:this.data.fieldValue}),W=document.createElement("select");h.add(W),W.setAttribute("data-element-id",k),W.disabled=this.data.readOnly,this._setRequired(W,this.data.required),W.name=this.data.fieldName,W.tabIndex=d;let G=this.data.combo&&this.data.options.length>0;this.data.combo||(W.size=this.data.options.length,this.data.multiSelect&&(W.multiple=!0)),W.addEventListener("resetform",Rt=>{const Dt=this.data.defaultFieldValue;for(const Pt of W.options)Pt.selected=Pt.value===Dt});for(const Rt of this.data.options){const Dt=document.createElement("option");Dt.textContent=Rt.displayValue,Dt.value=Rt.exportValue,I.value.includes(Rt.exportValue)&&(Dt.setAttribute("selected",!0),G=!1),W.append(Dt)}let it=null;if(G){const Rt=document.createElement("option");Rt.value=" ",Rt.setAttribute("hidden",!0),Rt.setAttribute("selected",!0),W.prepend(Rt),it=()=>{Rt.remove(),W.removeEventListener("input",it),it=null},W.addEventListener("input",it)}const at=Rt=>{const Dt=Rt?"value":"textContent",{options:Pt,multiple:Lt}=W;return Lt?Array.prototype.filter.call(Pt,Ut=>Ut.selected).map(Ut=>Ut[Dt]):Pt.selectedIndex===-1?null:Pt[Pt.selectedIndex][Dt]};let Ct=at(!1);const Yt=Rt=>{const Dt=Rt.target.options;return Array.prototype.map.call(Dt,Pt=>({displayValue:Pt.textContent,exportValue:Pt.value}))};return this.enableScripting&&this.hasJSActions?(W.addEventListener("updatefromsandbox",Rt=>{const Dt={value(Pt){it?.();const Lt=Pt.detail.value,Ut=new Set(Array.isArray(Lt)?Lt:[Lt]);for(const Qt of W.options)Qt.selected=Ut.has(Qt.value);m.setValue(k,{value:at(!0)}),Ct=at(!1)},multipleSelection(Pt){W.multiple=!0},remove(Pt){const Lt=W.options,Ut=Pt.detail.remove;Lt[Ut].selected=!1,W.remove(Ut),Lt.length>0&&Array.prototype.findIndex.call(Lt,$t=>$t.selected)===-1&&(Lt[0].selected=!0),m.setValue(k,{value:at(!0),items:Yt(Pt)}),Ct=at(!1)},clear(Pt){for(;W.length!==0;)W.remove(0);m.setValue(k,{value:null,items:[]}),Ct=at(!1)},insert(Pt){const{index:Lt,displayValue:Ut,exportValue:Qt}=Pt.detail.insert,$t=W.children[Lt],se=document.createElement("option");se.textContent=Ut,se.value=Qt,$t?$t.before(se):W.append(se),m.setValue(k,{value:at(!0),items:Yt(Pt)}),Ct=at(!1)},items(Pt){const{items:Lt}=Pt.detail;for(;W.length!==0;)W.remove(0);for(const Ut of Lt){const{displayValue:Qt,exportValue:$t}=Ut,se=document.createElement("option");se.textContent=Qt,se.value=$t,W.append(se)}W.options.length>0&&(W.options[0].selected=!0),m.setValue(k,{value:at(!0),items:Yt(Pt)}),Ct=at(!1)},indices(Pt){const Lt=new Set(Pt.detail.indices);for(const Ut of Pt.target.options)Ut.selected=Lt.has(Ut.index);m.setValue(k,{value:at(!0)}),Ct=at(!1)},editable(Pt){Pt.target.disabled=!Pt.detail.editable}};this._dispatchEventFromSandbox(Dt,Rt)}),W.addEventListener("input",Rt=>{const Dt=at(!0);m.setValue(k,{value:Dt}),Rt.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:k,name:"Keystroke",value:Ct,changeEx:Dt,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(W,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],Rt=>Rt.target.value)):W.addEventListener("input",function(Rt){m.setValue(k,{value:at(!0)})}),this.data.combo&&this._setTextStyle(W),this._setBackgroundColor(W),this._setDefaultPropertiesFromJS(W),this.container.append(W),this.container}}class rt extends f{constructor(m){const{data:k,elements:I}=m;super(m,{isRenderable:f._hasPopupData(k)}),this.elements=I}render(){this.container.classList.add("popupAnnotation");const m=new et({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open}),k=[];for(const I of this.elements)I.popup=m,k.push(I.data.id),I.addHighlightArea();return this.container.setAttribute("aria-controls",k.map(I=>`${o.AnnotationPrefix}${I}`).join(",")),this.container}}class et{#t=null;#e=this.#u.bind(this);#n=this.#E.bind(this);#i=this.#A.bind(this);#o=this.#x.bind(this);#r=null;#a=null;#l=null;#c=null;#s=null;#f=null;#d=!1;#h=null;#p=null;#y=null;#g=null;#m=!1;constructor({container:m,color:k,elements:I,titleObj:W,modificationDate:G,contentsObj:it,richText:at,parent:Ct,rect:Yt,parentRect:Rt,open:Dt}){this.#a=m,this.#g=W,this.#l=it,this.#y=at,this.#s=Ct,this.#r=k,this.#p=Yt,this.#f=Rt,this.#c=I;const Pt=E.PDFDateString.toDateObject(G);Pt&&(this.#t=Ct.l10n.get("annotation_date_string",{date:Pt.toLocaleDateString(),time:Pt.toLocaleTimeString()})),this.trigger=I.flatMap(Lt=>Lt.getElementsToTriggerPopup());for(const Lt of this.trigger)Lt.addEventListener("click",this.#o),Lt.addEventListener("mouseenter",this.#i),Lt.addEventListener("mouseleave",this.#n),Lt.classList.add("popupTriggerArea");for(const Lt of I)Lt.container?.addEventListener("keydown",this.#e);this.#a.hidden=!0,Dt&&this.#x()}render(){if(this.#h)return;const{page:{view:m},viewport:{rawDims:{pageWidth:k,pageHeight:I,pageX:W,pageY:G}}}=this.#s,it=this.#h=document.createElement("div");if(it.className="popup",this.#r){const oe=it.style.outlineColor=o.Util.makeHexColor(...this.#r);CSS.supports("background-color","color-mix(in srgb, red 30%, white)")?it.style.backgroundColor=`color-mix(in srgb, ${oe} 30%, white)`:it.style.backgroundColor=o.Util.makeHexColor(...this.#r.map(je=>Math.floor(.7*(255-je)+je)))}const at=document.createElement("span");at.className="header";const Ct=document.createElement("h1");if(at.append(Ct),{dir:Ct.dir,str:Ct.textContent}=this.#g,it.append(at),this.#t){const oe=document.createElement("span");oe.classList.add("popupDate"),this.#t.then(_e=>{oe.textContent=_e}),at.append(oe)}const Yt=this.#l,Rt=this.#y;if(Rt?.str&&(!Yt?.str||Yt.str===Rt.str))F.XfaLayer.render({xfaHtml:Rt.html,intent:"richText",div:it}),it.lastChild.classList.add("richText","popupContent");else{const oe=this._formatContents(Yt);it.append(oe)}let Dt=!!this.#f,Pt=Dt?this.#f:this.#p;for(const oe of this.#c)if(!Pt||o.Util.intersect(oe.data.rect,Pt)!==null){Pt=oe.data.rect,Dt=!0;break}const Lt=o.Util.normalizeRect([Pt[0],m[3]-Pt[1]+m[1],Pt[2],m[3]-Pt[3]+m[1]]),Qt=Dt?Pt[2]-Pt[0]+5:0,$t=Lt[0]+Qt,se=Lt[1],{style:le}=this.#a;le.left=`${100*($t-W)/k}%`,le.top=`${100*(se-G)/I}%`,this.#a.append(it)}_formatContents({str:m,dir:k}){const I=document.createElement("p");I.classList.add("popupContent"),I.dir=k;const W=m.split(/(?:\r\n?|\n)/);for(let G=0,it=W.length;G<it;++G){const at=W[G];I.append(document.createTextNode(at)),G<it-1&&I.append(document.createElement("br"))}return I}#u(m){m.altKey||m.shiftKey||m.ctrlKey||m.metaKey||(m.key==="Enter"||m.key==="Escape"&&this.#d)&&this.#x()}#x(){this.#d=!this.#d,this.#d?(this.#A(),this.#a.addEventListener("click",this.#o),this.#a.addEventListener("keydown",this.#e)):(this.#E(),this.#a.removeEventListener("click",this.#o),this.#a.removeEventListener("keydown",this.#e))}#A(){this.#h||this.render(),this.isVisible?this.#d&&this.#a.classList.add("focused"):(this.#a.hidden=!1,this.#a.style.zIndex=parseInt(this.#a.style.zIndex)+1e3)}#E(){this.#a.classList.remove("focused"),!(this.#d||!this.isVisible)&&(this.#a.hidden=!0,this.#a.style.zIndex=parseInt(this.#a.style.zIndex)-1e3)}forceHide(){this.#m=this.isVisible,this.#m&&(this.#a.hidden=!0)}maybeShow(){this.#m&&(this.#m=!1,this.#a.hidden=!1)}get isVisible(){return this.#a.hidden===!1}}class yt extends f{constructor(m){super(m,{isRenderable:!0,ignoreBorder:!0}),this.textContent=m.data.textContent,this.textPosition=m.data.textPosition,this.annotationEditorType=o.AnnotationEditorType.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const m=document.createElement("div");m.classList.add("annotationTextContent"),m.setAttribute("role","comment");for(const k of this.textContent){const I=document.createElement("span");I.textContent=k,m.append(I)}this.container.append(m)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}u.FreeTextAnnotationElement=yt;class gt extends f{#t=null;constructor(m){super(m,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("lineAnnotation");const m=this.data,{width:k,height:I}=b(m.rect),W=this.svgFactory.create(k,I,!0),G=this.#t=this.svgFactory.createElement("svg:line");return G.setAttribute("x1",m.rect[2]-m.lineCoordinates[0]),G.setAttribute("y1",m.rect[3]-m.lineCoordinates[1]),G.setAttribute("x2",m.rect[2]-m.lineCoordinates[2]),G.setAttribute("y2",m.rect[3]-m.lineCoordinates[3]),G.setAttribute("stroke-width",m.borderStyle.width||1),G.setAttribute("stroke","transparent"),G.setAttribute("fill","transparent"),W.append(G),this.container.append(W),!m.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class kt extends f{#t=null;constructor(m){super(m,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("squareAnnotation");const m=this.data,{width:k,height:I}=b(m.rect),W=this.svgFactory.create(k,I,!0),G=m.borderStyle.width,it=this.#t=this.svgFactory.createElement("svg:rect");return it.setAttribute("x",G/2),it.setAttribute("y",G/2),it.setAttribute("width",k-G),it.setAttribute("height",I-G),it.setAttribute("stroke-width",G||1),it.setAttribute("stroke","transparent"),it.setAttribute("fill","transparent"),W.append(it),this.container.append(W),!m.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class At extends f{#t=null;constructor(m){super(m,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("circleAnnotation");const m=this.data,{width:k,height:I}=b(m.rect),W=this.svgFactory.create(k,I,!0),G=m.borderStyle.width,it=this.#t=this.svgFactory.createElement("svg:ellipse");return it.setAttribute("cx",k/2),it.setAttribute("cy",I/2),it.setAttribute("rx",k/2-G/2),it.setAttribute("ry",I/2-G/2),it.setAttribute("stroke-width",G||1),it.setAttribute("stroke","transparent"),it.setAttribute("fill","transparent"),W.append(it),this.container.append(W),!m.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class Ft extends f{#t=null;constructor(m){super(m,{isRenderable:!0,ignoreBorder:!0}),this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const m=this.data,{width:k,height:I}=b(m.rect),W=this.svgFactory.create(k,I,!0);let G=[];for(const at of m.vertices){const Ct=at.x-m.rect[0],Yt=m.rect[3]-at.y;G.push(Ct+","+Yt)}G=G.join(" ");const it=this.#t=this.svgFactory.createElement(this.svgElementName);return it.setAttribute("points",G),it.setAttribute("stroke-width",m.borderStyle.width||1),it.setAttribute("stroke","transparent"),it.setAttribute("fill","transparent"),W.append(it),this.container.append(W),!m.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class Kt extends Ft{constructor(m){super(m),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class nt extends f{constructor(m){super(m,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}class Y extends f{#t=[];constructor(m){super(m,{isRenderable:!0,ignoreBorder:!0}),this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=o.AnnotationEditorType.INK}render(){this.container.classList.add(this.containerClassName);const m=this.data,{width:k,height:I}=b(m.rect),W=this.svgFactory.create(k,I,!0);for(const G of m.inkLists){let it=[];for(const Ct of G){const Yt=Ct.x-m.rect[0],Rt=m.rect[3]-Ct.y;it.push(`${Yt},${Rt}`)}it=it.join(" ");const at=this.svgFactory.createElement(this.svgElementName);this.#t.push(at),at.setAttribute("points",it),at.setAttribute("stroke-width",m.borderStyle.width||1),at.setAttribute("stroke","transparent"),at.setAttribute("fill","transparent"),!m.popupRef&&this.hasPopupData&&this._createPopup(),W.append(at)}return this.container.append(W),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}u.InkAnnotationElement=Y;class N extends f{constructor(m){super(m,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this.container}}class w extends f{constructor(m){super(m,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),this.container}}class R extends f{constructor(m){super(m,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),this.container}}class g extends f{constructor(m){super(m,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),this.container}}class L extends f{constructor(m){super(m,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("stampAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}u.StampAnnotationElement=L;class H extends f{#t=null;constructor(m){super(m,{isRenderable:!0});const{filename:k,content:I}=this.data.file;this.filename=(0,E.getFilenameFromUrl)(k,!0),this.content=I,this.linkService.eventBus?.dispatch("fileattachmentannotation",{source:this,filename:k,content:I})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:m,data:k}=this;let I;k.hasAppearance||k.fillAlpha===0?I=document.createElement("div"):(I=document.createElement("img"),I.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(k.name)?"paperclip":"pushpin"}.svg`,k.fillAlpha&&k.fillAlpha<1&&(I.style=`filter: opacity(${Math.round(k.fillAlpha*100)}%);`)),I.addEventListener("dblclick",this.#e.bind(this)),this.#t=I;const{isMac:W}=o.FeatureTest.platform;return m.addEventListener("keydown",G=>{G.key==="Enter"&&(W?G.metaKey:G.ctrlKey)&&this.#e()}),!k.popupRef&&this.hasPopupData?this._createPopup():I.classList.add("popupTriggerArea"),m.append(I),m}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}#e(){this.downloadManager?.openOrDownloadData(this.container,this.content,this.filename)}}class J{#t=null;#e=null;#n=new Map;constructor({div:m,accessibilityManager:k,annotationCanvasMap:I,l10n:W,page:G,viewport:it}){this.div=m,this.#t=k,this.#e=I,this.l10n=W,this.page=G,this.viewport=it,this.zIndex=0,this.l10n||=B.NullL10n}#i(m,k){const I=m.firstChild||m;I.id=`${o.AnnotationPrefix}${k}`,this.div.append(m),this.#t?.moveElementInDOM(this.div,m,I,!1)}async render(m){const{annotations:k}=m,I=this.div;(0,E.setLayerDimensions)(I,this.viewport);const W=new Map,G={data:null,layer:I,linkService:m.linkService,downloadManager:m.downloadManager,imageResourcesPath:m.imageResourcesPath||"",renderForms:m.renderForms!==!1,svgFactory:new E.DOMSVGFactory,annotationStorage:m.annotationStorage||new O.AnnotationStorage,enableScripting:m.enableScripting===!0,hasJSActions:m.hasJSActions,fieldObjects:m.fieldObjects,parent:this,elements:null};for(const it of k){if(it.noHTML)continue;const at=it.annotationType===o.AnnotationType.POPUP;if(at){const Rt=W.get(it.id);if(!Rt)continue;G.elements=Rt}else{const{width:Rt,height:Dt}=b(it.rect);if(Rt<=0||Dt<=0)continue}G.data=it;const Ct=y.create(G);if(!Ct.isRenderable)continue;if(!at&&it.popupRef){const Rt=W.get(it.popupRef);Rt?Rt.push(Ct):W.set(it.popupRef,[Ct])}Ct.annotationEditorType>0&&this.#n.set(Ct.data.id,Ct);const Yt=Ct.render();it.hidden&&(Yt.style.visibility="hidden"),this.#i(Yt,it.id)}this.#o(),await this.l10n.translate(I)}update({viewport:m}){const k=this.div;this.viewport=m,(0,E.setLayerDimensions)(k,{rotation:m.rotation}),this.#o(),k.hidden=!1}#o(){if(!this.#e)return;const m=this.div;for(const[k,I]of this.#e){const W=m.querySelector(`[data-annotation-id="${k}"]`);if(!W)continue;const{firstChild:G}=W;G?G.nodeName==="CANVAS"?G.replaceWith(I):G.before(I):W.append(I)}this.#e.clear()}getEditableAnnotations(){return Array.from(this.#n.values())}getEditableAnnotation(m){return this.#n.get(m)}}u.AnnotationLayer=J}),((_,u)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.ColorConverters=void 0;function M(O){return Math.floor(Math.max(0,Math.min(1,O))*255).toString(16).padStart(2,"0")}function o(O){return Math.max(0,Math.min(255,255*O))}class E{static CMYK_G([D,B,F,d]){return["G",1-Math.min(1,.3*D+.59*F+.11*B+d)]}static G_CMYK([D]){return["CMYK",0,0,0,1-D]}static G_RGB([D]){return["RGB",D,D,D]}static G_rgb([D]){return D=o(D),[D,D,D]}static G_HTML([D]){const B=M(D);return`#${B}${B}${B}`}static RGB_G([D,B,F]){return["G",.3*D+.59*B+.11*F]}static RGB_rgb(D){return D.map(o)}static RGB_HTML(D){return`#${D.map(M).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([D,B,F,d]){return["RGB",1-Math.min(1,D+d),1-Math.min(1,F+d),1-Math.min(1,B+d)]}static CMYK_rgb([D,B,F,d]){return[o(1-Math.min(1,D+d)),o(1-Math.min(1,F+d)),o(1-Math.min(1,B+d))]}static CMYK_HTML(D){const B=this.CMYK_RGB(D).slice(1);return this.RGB_HTML(B)}static RGB_CMYK([D,B,F]){const d=1-D,l=1-B,h=1-F,b=Math.min(d,l,h);return["CMYK",d,l,h,b]}}u.ColorConverters=E}),((_,u)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.NullL10n=void 0,u.getL10nFallback=o;const M={of_pages:"of {{pagesCount}}",page_of_pages:"({{pageNumber}} of {{pagesCount}})",document_properties_kb:"{{size_kb}} KB ({{size_b}} bytes)",document_properties_mb:"{{size_mb}} MB ({{size_b}} bytes)",document_properties_date_string:"{{date}}, {{time}}",document_properties_page_size_unit_inches:"in",document_properties_page_size_unit_millimeters:"mm",document_properties_page_size_orientation_portrait:"portrait",document_properties_page_size_orientation_landscape:"landscape",document_properties_page_size_name_a3:"A3",document_properties_page_size_name_a4:"A4",document_properties_page_size_name_letter:"Letter",document_properties_page_size_name_legal:"Legal",document_properties_page_size_dimension_string:"{{width}}  {{height}} {{unit}} ({{orientation}})",document_properties_page_size_dimension_name_string:"{{width}}  {{height}} {{unit}} ({{name}}, {{orientation}})",document_properties_linearized_yes:"Yes",document_properties_linearized_no:"No",additional_layers:"Additional Layers",page_landmark:"Page {{page}}",thumb_page_title:"Page {{page}}",thumb_page_canvas:"Thumbnail of Page {{page}}",find_reached_top:"Reached top of document, continued from bottom",find_reached_bottom:"Reached end of document, continued from top","find_match_count[one]":"{{current}} of {{total}} match","find_match_count[other]":"{{current}} of {{total}} matches","find_match_count_limit[one]":"More than {{limit}} match","find_match_count_limit[other]":"More than {{limit}} matches",find_not_found:"Phrase not found",page_scale_width:"Page Width",page_scale_fit:"Page Fit",page_scale_auto:"Automatic Zoom",page_scale_actual:"Actual Size",page_scale_percent:"{{scale}}%",loading_error:"An error occurred while loading the PDF.",invalid_file_error:"Invalid or corrupted PDF file.",missing_file_error:"Missing PDF file.",unexpected_response_error:"Unexpected server response.",rendering_error:"An error occurred while rendering the page.",annotation_date_string:"{{date}}, {{time}}",printing_not_supported:"Warning: Printing is not fully supported by this browser.",printing_not_ready:"Warning: The PDF is not fully loaded for printing.",web_fonts_disabled:"Web fonts are disabled: unable to use embedded PDF fonts.",free_text2_default_content:"Start typing",editor_free_text2_aria_label:"Text Editor",editor_ink2_aria_label:"Draw Editor",editor_ink_canvas_aria_label:"User-created image",editor_alt_text_button_label:"Alt text",editor_alt_text_edit_button_label:"Edit alt text",editor_alt_text_decorative_tooltip:"Marked as decorative"};M.print_progress_percent="{{progress}}%";function o(D,B){switch(D){case"find_match_count":D=`find_match_count[${B.total===1?"one":"other"}]`;break;case"find_match_count_limit":D=`find_match_count_limit[${B.limit===1?"one":"other"}]`;break}return M[D]||""}function E(D,B){return B?D.replaceAll(/\{\{\s*(\w+)\s*\}\}/g,(F,d)=>d in B?B[d]:"{{"+d+"}}"):D}const O={async getLanguage(){return"en-us"},async getDirection(){return"ltr"},async get(D,B=null,F=o(D,B)){return E(F,B)},async translate(D){}};u.NullL10n=O}),((_,u,M)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.XfaLayer=void 0;var o=M(25);class E{static setupStorage(D,B,F,d,l){const h=d.getValue(B,{value:null});switch(F.name){case"textarea":if(h.value!==null&&(D.textContent=h.value),l==="print")break;D.addEventListener("input",b=>{d.setValue(B,{value:b.target.value})});break;case"input":if(F.attributes.type==="radio"||F.attributes.type==="checkbox"){if(h.value===F.attributes.xfaOn?D.setAttribute("checked",!0):h.value===F.attributes.xfaOff&&D.removeAttribute("checked"),l==="print")break;D.addEventListener("change",b=>{d.setValue(B,{value:b.target.checked?b.target.getAttribute("xfaOn"):b.target.getAttribute("xfaOff")})})}else{if(h.value!==null&&D.setAttribute("value",h.value),l==="print")break;D.addEventListener("input",b=>{d.setValue(B,{value:b.target.value})})}break;case"select":if(h.value!==null){D.setAttribute("value",h.value);for(const b of F.children)b.attributes.value===h.value?b.attributes.selected=!0:b.attributes.hasOwnProperty("selected")&&delete b.attributes.selected}D.addEventListener("input",b=>{const y=b.target.options,f=y.selectedIndex===-1?"":y[y.selectedIndex].value;d.setValue(B,{value:f})});break}}static setAttributes({html:D,element:B,storage:F=null,intent:d,linkService:l}){const{attributes:h}=B,b=D instanceof HTMLAnchorElement;h.type==="radio"&&(h.name=`${h.name}-${d}`);for(const[y,f]of Object.entries(h))if(f!=null)switch(y){case"class":f.length&&D.setAttribute(y,f.join(" "));break;case"dataId":break;case"id":D.setAttribute("data-element-id",f);break;case"style":Object.assign(D.style,f);break;case"textContent":D.textContent=f;break;default:(!b||y!=="href"&&y!=="newWindow")&&D.setAttribute(y,f)}b&&l.addLinkAttributes(D,h.href,h.newWindow),F&&h.dataId&&this.setupStorage(D,h.dataId,B,F)}static render(D){const B=D.annotationStorage,F=D.linkService,d=D.xfaHtml,l=D.intent||"display",h=document.createElement(d.name);d.attributes&&this.setAttributes({html:h,element:d,intent:l,linkService:F});const b=[[d,-1,h]],y=D.div;if(y.append(h),D.viewport){const A=`matrix(${D.viewport.transform.join(",")})`;y.style.transform=A}l!=="richText"&&y.setAttribute("class","xfaLayer xfaFont");const f=[];for(;b.length>0;){const[A,j,x]=b.at(-1);if(j+1===A.children.length){b.pop();continue}const U=A.children[++b.at(-1)[1]];if(U===null)continue;const{name:Z}=U;if(Z==="#text"){const T=document.createTextNode(U.value);f.push(T),x.append(T);continue}const V=U?.attributes?.xmlns?document.createElementNS(U.attributes.xmlns,Z):document.createElement(Z);if(x.append(V),U.attributes&&this.setAttributes({html:V,element:U,storage:B,intent:l,linkService:F}),U.children&&U.children.length>0)b.push([U,-1,V]);else if(U.value){const T=document.createTextNode(U.value);o.XfaText.shouldBuildText(Z)&&f.push(T),V.append(T)}}for(const A of y.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))A.setAttribute("readOnly",!0);return{textDivs:f}}static update(D){const B=`matrix(${D.viewport.transform.join(",")})`;D.div.style.transform=B,D.div.hidden=!1}}u.XfaLayer=E}),((_,u,M)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.InkEditor=void 0;var o=M(1),E=M(4),O=M(29),D=M(6),B=M(5);class F extends E.AnnotationEditor{#t=0;#e=0;#n=this.canvasPointermove.bind(this);#i=this.canvasPointerleave.bind(this);#o=this.canvasPointerup.bind(this);#r=this.canvasPointerdown.bind(this);#a=new Path2D;#l=!1;#c=!1;#s=!1;#f=null;#d=0;#h=0;#p=null;static _defaultColor=null;static _defaultOpacity=1;static _defaultThickness=1;static _type="ink";constructor(l){super({...l,name:"inkEditor"}),this.color=l.color||null,this.thickness=l.thickness||null,this.opacity=l.opacity||null,this.paths=[],this.bezierPath2D=[],this.allRawPaths=[],this.currentPath=[],this.scaleFactor=1,this.translationX=this.translationY=0,this.x=0,this.y=0,this._willKeepAspectRatio=!0}static initialize(l){E.AnnotationEditor.initialize(l,{strings:["editor_ink_canvas_aria_label","editor_ink2_aria_label"]})}static updateDefaultParams(l,h){switch(l){case o.AnnotationEditorParamsType.INK_THICKNESS:F._defaultThickness=h;break;case o.AnnotationEditorParamsType.INK_COLOR:F._defaultColor=h;break;case o.AnnotationEditorParamsType.INK_OPACITY:F._defaultOpacity=h/100;break}}updateParams(l,h){switch(l){case o.AnnotationEditorParamsType.INK_THICKNESS:this.#y(h);break;case o.AnnotationEditorParamsType.INK_COLOR:this.#g(h);break;case o.AnnotationEditorParamsType.INK_OPACITY:this.#m(h);break}}static get defaultPropertiesToUpdate(){return[[o.AnnotationEditorParamsType.INK_THICKNESS,F._defaultThickness],[o.AnnotationEditorParamsType.INK_COLOR,F._defaultColor||E.AnnotationEditor._defaultLineColor],[o.AnnotationEditorParamsType.INK_OPACITY,Math.round(F._defaultOpacity*100)]]}get propertiesToUpdate(){return[[o.AnnotationEditorParamsType.INK_THICKNESS,this.thickness||F._defaultThickness],[o.AnnotationEditorParamsType.INK_COLOR,this.color||F._defaultColor||E.AnnotationEditor._defaultLineColor],[o.AnnotationEditorParamsType.INK_OPACITY,Math.round(100*(this.opacity??F._defaultOpacity))]]}#y(l){const h=this.thickness;this.addCommands({cmd:()=>{this.thickness=l,this.#w()},undo:()=>{this.thickness=h,this.#w()},mustExec:!0,type:o.AnnotationEditorParamsType.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0})}#g(l){const h=this.color;this.addCommands({cmd:()=>{this.color=l,this.#v()},undo:()=>{this.color=h,this.#v()},mustExec:!0,type:o.AnnotationEditorParamsType.INK_COLOR,overwriteIfSameType:!0,keepUndo:!0})}#m(l){l/=100;const h=this.opacity;this.addCommands({cmd:()=>{this.opacity=l,this.#v()},undo:()=>{this.opacity=h,this.#v()},mustExec:!0,type:o.AnnotationEditorParamsType.INK_OPACITY,overwriteIfSameType:!0,keepUndo:!0})}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.canvas||(this.#j(),this.#M()),this.isAttachedToDOM||(this.parent.add(this),this.#b()),this.#w()))}remove(){this.canvas!==null&&(this.isEmpty()||this.commit(),this.canvas.width=this.canvas.height=0,this.canvas.remove(),this.canvas=null,this.#f.disconnect(),this.#f=null,super.remove())}setParent(l){!this.parent&&l?this._uiManager.removeShouldRescale(this):this.parent&&l===null&&this._uiManager.addShouldRescale(this),super.setParent(l)}onScaleChanging(){const[l,h]=this.parentDimensions,b=this.width*l,y=this.height*h;this.setDimensions(b,y)}enableEditMode(){this.#l||this.canvas===null||(super.enableEditMode(),this._isDraggable=!1,this.canvas.addEventListener("pointerdown",this.#r))}disableEditMode(){!this.isInEditMode()||this.canvas===null||(super.disableEditMode(),this._isDraggable=!this.isEmpty(),this.div.classList.remove("editing"),this.canvas.removeEventListener("pointerdown",this.#r))}onceAdded(){this._isDraggable=!this.isEmpty()}isEmpty(){return this.paths.length===0||this.paths.length===1&&this.paths[0].length===0}#u(){const{parentRotation:l,parentDimensions:[h,b]}=this;switch(l){case 90:return[0,b,b,h];case 180:return[h,b,h,b];case 270:return[h,0,b,h];default:return[0,0,h,b]}}#x(){const{ctx:l,color:h,opacity:b,thickness:y,parentScale:f,scaleFactor:A}=this;l.lineWidth=y*f/A,l.lineCap="round",l.lineJoin="round",l.miterLimit=10,l.strokeStyle=`${h}${(0,B.opacityToHex)(b)}`}#A(l,h){this.canvas.addEventListener("contextmenu",D.noContextMenu),this.canvas.addEventListener("pointerleave",this.#i),this.canvas.addEventListener("pointermove",this.#n),this.canvas.addEventListener("pointerup",this.#o),this.canvas.removeEventListener("pointerdown",this.#r),this.isEditing=!0,this.#s||(this.#s=!0,this.#b(),this.thickness||=F._defaultThickness,this.color||=F._defaultColor||E.AnnotationEditor._defaultLineColor,this.opacity??=F._defaultOpacity),this.currentPath.push([l,h]),this.#c=!1,this.#x(),this.#p=()=>{this.#O(),this.#p&&window.requestAnimationFrame(this.#p)},window.requestAnimationFrame(this.#p)}#E(l,h){const[b,y]=this.currentPath.at(-1);if(this.currentPath.length>1&&l===b&&h===y)return;const f=this.currentPath;let A=this.#a;if(f.push([l,h]),this.#c=!0,f.length<=2){A.moveTo(...f[0]),A.lineTo(l,h);return}f.length===3&&(this.#a=A=new Path2D,A.moveTo(...f[0])),this.#L(A,...f.at(-3),...f.at(-2),l,h)}#R(){if(this.currentPath.length===0)return;const l=this.currentPath.at(-1);this.#a.lineTo(...l)}#C(l,h){this.#p=null,l=Math.min(Math.max(l,0),this.canvas.width),h=Math.min(Math.max(h,0),this.canvas.height),this.#E(l,h),this.#R();let b;if(this.currentPath.length!==1)b=this.#P();else{const x=[l,h];b=[[x,x.slice(),x.slice(),x]]}const y=this.#a,f=this.currentPath;this.currentPath=[],this.#a=new Path2D;const A=()=>{this.allRawPaths.push(f),this.paths.push(b),this.bezierPath2D.push(y),this.rebuild()},j=()=>{this.allRawPaths.pop(),this.paths.pop(),this.bezierPath2D.pop(),this.paths.length===0?this.remove():(this.canvas||(this.#j(),this.#M()),this.#w())};this.addCommands({cmd:A,undo:j,mustExec:!0})}#O(){if(!this.#c)return;this.#c=!1;const l=Math.ceil(this.thickness*this.parentScale),h=this.currentPath.slice(-3),b=h.map(A=>A[0]),y=h.map(A=>A[1]);Math.min(...b)-l,Math.max(...b)+l,Math.min(...y)-l,Math.max(...y)+l;const{ctx:f}=this;f.save(),f.clearRect(0,0,this.canvas.width,this.canvas.height);for(const A of this.bezierPath2D)f.stroke(A);f.stroke(this.#a),f.restore()}#L(l,h,b,y,f,A,j){const x=(h+y)/2,U=(b+f)/2,Z=(y+A)/2,V=(f+j)/2;l.bezierCurveTo(x+2*(y-x)/3,U+2*(f-U)/3,Z+2*(y-Z)/3,V+2*(f-V)/3,Z,V)}#P(){const l=this.currentPath;if(l.length<=2)return[[l[0],l[0],l.at(-1),l.at(-1)]];const h=[];let b,[y,f]=l[0];for(b=1;b<l.length-2;b++){const[T,z]=l[b],[$,rt]=l[b+1],et=(T+$)/2,yt=(z+rt)/2,gt=[y+2*(T-y)/3,f+2*(z-f)/3],kt=[et+2*(T-et)/3,yt+2*(z-yt)/3];h.push([[y,f],gt,kt,[et,yt]]),[y,f]=[et,yt]}const[A,j]=l[b],[x,U]=l[b+1],Z=[y+2*(A-y)/3,f+2*(j-f)/3],V=[x+2*(A-x)/3,U+2*(j-U)/3];return h.push([[y,f],Z,V,[x,U]]),h}#v(){if(this.isEmpty()){this.#S();return}this.#x();const{canvas:l,ctx:h}=this;h.setTransform(1,0,0,1,0,0),h.clearRect(0,0,l.width,l.height),this.#S();for(const b of this.bezierPath2D)h.stroke(b)}commit(){this.#l||(super.commit(),this.isEditing=!1,this.disableEditMode(),this.setInForeground(),this.#l=!0,this.div.classList.add("disabled"),this.#w(!0),this.makeResizable(),this.parent.addInkEditorIfNeeded(!0),this.moveInDOM(),this.div.focus({preventScroll:!0}))}focusin(l){this._focusEventsAllowed&&(super.focusin(l),this.enableEditMode())}canvasPointerdown(l){l.button!==0||!this.isInEditMode()||this.#l||(this.setInForeground(),l.preventDefault(),l.type!=="mouse"&&this.div.focus(),this.#A(l.offsetX,l.offsetY))}canvasPointermove(l){l.preventDefault(),this.#E(l.offsetX,l.offsetY)}canvasPointerup(l){l.preventDefault(),this.#N(l)}canvasPointerleave(l){this.#N(l)}#N(l){this.canvas.removeEventListener("pointerleave",this.#i),this.canvas.removeEventListener("pointermove",this.#n),this.canvas.removeEventListener("pointerup",this.#o),this.canvas.addEventListener("pointerdown",this.#r),setTimeout(()=>{this.canvas.removeEventListener("contextmenu",D.noContextMenu)},10),this.#C(l.offsetX,l.offsetY),this.addToAnnotationStorage(),this.setInBackground()}#j(){this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=0,this.canvas.className="inkEditorCanvas",E.AnnotationEditor._l10nPromise.get("editor_ink_canvas_aria_label").then(l=>this.canvas?.setAttribute("aria-label",l)),this.div.append(this.canvas),this.ctx=this.canvas.getContext("2d")}#M(){this.#f=new ResizeObserver(l=>{const h=l[0].contentRect;h.width&&h.height&&this.setDimensions(h.width,h.height)}),this.#f.observe(this.div)}get isResizable(){return!this.isEmpty()&&this.#l}render(){if(this.div)return this.div;let l,h;this.width&&(l=this.x,h=this.y),super.render(),E.AnnotationEditor._l10nPromise.get("editor_ink2_aria_label").then(j=>this.div?.setAttribute("aria-label",j));const[b,y,f,A]=this.#u();if(this.setAt(b,y,0,0),this.setDims(f,A),this.#j(),this.width){const[j,x]=this.parentDimensions;this.setAspectRatio(this.width*j,this.height*x),this.setAt(l*j,h*x,this.width*j,this.height*x),this.#s=!0,this.#b(),this.setDims(this.width*j,this.height*x),this.#v(),this.div.classList.add("disabled")}else this.div.classList.add("editing"),this.enableEditMode();return this.#M(),this.div}#b(){if(!this.#s)return;const[l,h]=this.parentDimensions;this.canvas.width=Math.ceil(this.width*l),this.canvas.height=Math.ceil(this.height*h),this.#S()}setDimensions(l,h){const b=Math.round(l),y=Math.round(h);if(this.#d===b&&this.#h===y)return;this.#d=b,this.#h=y,this.canvas.style.visibility="hidden";const[f,A]=this.parentDimensions;this.width=l/f,this.height=h/A,this.fixAndSetPosition(),this.#l&&this.#T(l,h),this.#b(),this.#v(),this.canvas.style.visibility="visible",this.fixDims()}#T(l,h){const b=this.#D(),y=(l-b)/this.#e,f=(h-b)/this.#t;this.scaleFactor=Math.min(y,f)}#S(){const l=this.#D()/2;this.ctx.setTransform(this.scaleFactor,0,0,this.scaleFactor,this.translationX*this.scaleFactor+l,this.translationY*this.scaleFactor+l)}static#F(l){const h=new Path2D;for(let b=0,y=l.length;b<y;b++){const[f,A,j,x]=l[b];b===0&&h.moveTo(...f),h.bezierCurveTo(A[0],A[1],j[0],j[1],x[0],x[1])}return h}static#z(l,h,b){const[y,f,A,j]=h;switch(b){case 0:for(let x=0,U=l.length;x<U;x+=2)l[x]+=y,l[x+1]=j-l[x+1];break;case 90:for(let x=0,U=l.length;x<U;x+=2){const Z=l[x];l[x]=l[x+1]+y,l[x+1]=Z+f}break;case 180:for(let x=0,U=l.length;x<U;x+=2)l[x]=A-l[x],l[x+1]+=f;break;case 270:for(let x=0,U=l.length;x<U;x+=2){const Z=l[x];l[x]=A-l[x+1],l[x+1]=j-Z}break;default:throw new Error("Invalid rotation")}return l}static#I(l,h,b){const[y,f,A,j]=h;switch(b){case 0:for(let x=0,U=l.length;x<U;x+=2)l[x]-=y,l[x+1]=j-l[x+1];break;case 90:for(let x=0,U=l.length;x<U;x+=2){const Z=l[x];l[x]=l[x+1]-f,l[x+1]=Z-y}break;case 180:for(let x=0,U=l.length;x<U;x+=2)l[x]=A-l[x],l[x+1]-=f;break;case 270:for(let x=0,U=l.length;x<U;x+=2){const Z=l[x];l[x]=j-l[x+1],l[x+1]=A-Z}break;default:throw new Error("Invalid rotation")}return l}#B(l,h,b,y){const f=[],A=this.thickness/2,j=l*h+A,x=l*b+A;for(const U of this.paths){const Z=[],V=[];for(let T=0,z=U.length;T<z;T++){const[$,rt,et,yt]=U[T],gt=l*$[0]+j,kt=l*$[1]+x,At=l*rt[0]+j,Ft=l*rt[1]+x,Kt=l*et[0]+j,nt=l*et[1]+x,Y=l*yt[0]+j,N=l*yt[1]+x;T===0&&(Z.push(gt,kt),V.push(gt,kt)),Z.push(At,Ft,Kt,nt,Y,N),V.push(At,Ft),T===z-1&&V.push(Y,N)}f.push({bezier:F.#z(Z,y,this.rotation),points:F.#z(V,y,this.rotation)})}return f}#k(){let l=1/0,h=-1/0,b=1/0,y=-1/0;for(const f of this.paths)for(const[A,j,x,U]of f){const Z=o.Util.bezierBoundingBox(...A,...j,...x,...U);l=Math.min(l,Z[0]),b=Math.min(b,Z[1]),h=Math.max(h,Z[2]),y=Math.max(y,Z[3])}return[l,b,h,y]}#D(){return this.#l?Math.ceil(this.thickness*this.parentScale):0}#w(l=!1){if(this.isEmpty())return;if(!this.#l){this.#v();return}const h=this.#k(),b=this.#D();this.#e=Math.max(E.AnnotationEditor.MIN_SIZE,h[2]-h[0]),this.#t=Math.max(E.AnnotationEditor.MIN_SIZE,h[3]-h[1]);const y=Math.ceil(b+this.#e*this.scaleFactor),f=Math.ceil(b+this.#t*this.scaleFactor),[A,j]=this.parentDimensions;this.width=y/A,this.height=f/j,this.setAspectRatio(y,f);const x=this.translationX,U=this.translationY;this.translationX=-h[0],this.translationY=-h[1],this.#b(),this.#v(),this.#d=y,this.#h=f,this.setDims(y,f);const Z=l?b/this.scaleFactor/2:0;this.translate(x-this.translationX-Z,U-this.translationY-Z)}static deserialize(l,h,b){if(l instanceof O.InkAnnotationElement)return null;const y=super.deserialize(l,h,b);y.thickness=l.thickness,y.color=o.Util.makeHexColor(...l.color),y.opacity=l.opacity;const[f,A]=y.pageDimensions,j=y.width*f,x=y.height*A,U=y.parentScale,Z=l.thickness/2;y.#l=!0,y.#d=Math.round(j),y.#h=Math.round(x);const{paths:V,rect:T,rotation:z}=l;for(let{bezier:rt}of V){rt=F.#I(rt,T,z);const et=[];y.paths.push(et);let yt=U*(rt[0]-Z),gt=U*(rt[1]-Z);for(let At=2,Ft=rt.length;At<Ft;At+=6){const Kt=U*(rt[At]-Z),nt=U*(rt[At+1]-Z),Y=U*(rt[At+2]-Z),N=U*(rt[At+3]-Z),w=U*(rt[At+4]-Z),R=U*(rt[At+5]-Z);et.push([[yt,gt],[Kt,nt],[Y,N],[w,R]]),yt=w,gt=R}const kt=this.#F(et);y.bezierPath2D.push(kt)}const $=y.#k();return y.#e=Math.max(E.AnnotationEditor.MIN_SIZE,$[2]-$[0]),y.#t=Math.max(E.AnnotationEditor.MIN_SIZE,$[3]-$[1]),y.#T(j,x),y}serialize(){if(this.isEmpty())return null;const l=this.getRect(0,0),h=E.AnnotationEditor._colorManager.convert(this.ctx.strokeStyle);return{annotationType:o.AnnotationEditorType.INK,color:h,thickness:this.thickness,opacity:this.opacity,paths:this.#B(this.scaleFactor/this.parentScale,this.translationX,this.translationY,l),pageIndex:this.pageIndex,rect:l,rotation:this.rotation,structTreeParentId:this._structTreeParentId}}}u.InkEditor=F}),((_,u,M)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.StampEditor=void 0;var o=M(1),E=M(4),O=M(6),D=M(29);class B extends E.AnnotationEditor{#t=null;#e=null;#n=null;#i=null;#o=null;#r=null;#a=null;#l=null;#c=!1;#s=!1;static _type="stamp";constructor(d){super({...d,name:"stampEditor"}),this.#i=d.bitmapUrl,this.#o=d.bitmapFile}static initialize(d){E.AnnotationEditor.initialize(d)}static get supportedTypes(){const d=["apng","avif","bmp","gif","jpeg","png","svg+xml","webp","x-icon"];return(0,o.shadow)(this,"supportedTypes",d.map(l=>`image/${l}`))}static get supportedTypesStr(){return(0,o.shadow)(this,"supportedTypesStr",this.supportedTypes.join(","))}static isHandlingMimeForPasting(d){return this.supportedTypes.includes(d)}static paste(d,l){l.pasteEditor(o.AnnotationEditorType.STAMP,{bitmapFile:d.getAsFile()})}#f(d,l=!1){if(!d){this.remove();return}this.#t=d.bitmap,l||(this.#e=d.id,this.#c=d.isSvg),this.#p()}#d(){this.#n=null,this._uiManager.enableWaiting(!1),this.#r&&this.div.focus()}#h(){if(this.#e){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(this.#e).then(l=>this.#f(l,!0)).finally(()=>this.#d());return}if(this.#i){const l=this.#i;this.#i=null,this._uiManager.enableWaiting(!0),this.#n=this._uiManager.imageManager.getFromUrl(l).then(h=>this.#f(h)).finally(()=>this.#d());return}if(this.#o){const l=this.#o;this.#o=null,this._uiManager.enableWaiting(!0),this.#n=this._uiManager.imageManager.getFromFile(l).then(h=>this.#f(h)).finally(()=>this.#d());return}const d=document.createElement("input");d.type="file",d.accept=B.supportedTypesStr,this.#n=new Promise(l=>{d.addEventListener("change",async()=>{if(!d.files||d.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const h=await this._uiManager.imageManager.getFromFile(d.files[0]);this.#f(h)}l()}),d.addEventListener("cancel",()=>{this.remove(),l()})}).finally(()=>this.#d()),d.click()}remove(){this.#e&&(this.#t=null,this._uiManager.imageManager.deleteId(this.#e),this.#r?.remove(),this.#r=null,this.#a?.disconnect(),this.#a=null),super.remove()}rebuild(){if(!this.parent){this.#e&&this.#h();return}super.rebuild(),this.div!==null&&(this.#e&&this.#h(),this.isAttachedToDOM||this.parent.add(this))}onceAdded(){this._isDraggable=!0,this.div.focus()}isEmpty(){return!(this.#n||this.#t||this.#i||this.#o)}get isResizable(){return!0}render(){if(this.div)return this.div;let d,l;if(this.width&&(d=this.x,l=this.y),super.render(),this.div.hidden=!0,this.#t?this.#p():this.#h(),this.width){const[h,b]=this.parentDimensions;this.setAt(d*h,l*b,this.width*h,this.height*b)}return this.div}#p(){const{div:d}=this;let{width:l,height:h}=this.#t;const[b,y]=this.pageDimensions,f=.75;if(this.width)l=this.width*b,h=this.height*y;else if(l>f*b||h>f*y){const U=Math.min(f*b/l,f*y/h);l*=U,h*=U}const[A,j]=this.parentDimensions;this.setDims(l*A/b,h*j/y),this._uiManager.enableWaiting(!1);const x=this.#r=document.createElement("canvas");d.append(x),d.hidden=!1,this.#m(l,h),this.#x(),this.#s||(this.parent.addUndoableEditor(this),this.#s=!0),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",subtype:this.editorType,data:{action:"inserted_image"}}}),this.addAltTextButton()}#y(d,l){const[h,b]=this.parentDimensions;this.width=d/h,this.height=l/b,this.setDims(d,l),this._initialOptions?.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,this.#l!==null&&clearTimeout(this.#l);const y=200;this.#l=setTimeout(()=>{this.#l=null,this.#m(d,l)},y)}#g(d,l){const{width:h,height:b}=this.#t;let y=h,f=b,A=this.#t;for(;y>2*d||f>2*l;){const j=y,x=f;y>2*d&&(y=y>=16384?Math.floor(y/2)-1:Math.ceil(y/2)),f>2*l&&(f=f>=16384?Math.floor(f/2)-1:Math.ceil(f/2));const U=new OffscreenCanvas(y,f);U.getContext("2d").drawImage(A,0,0,j,x,0,0,y,f),A=U.transferToImageBitmap()}return A}#m(d,l){d=Math.ceil(d),l=Math.ceil(l);const h=this.#r;if(!h||h.width===d&&h.height===l)return;h.width=d,h.height=l;const b=this.#c?this.#t:this.#g(d,l),y=h.getContext("2d");y.filter=this._uiManager.hcmFilter,y.drawImage(b,0,0,b.width,b.height,0,0,d,l)}#u(d){if(d){if(this.#c){const b=this._uiManager.imageManager.getSvgUrl(this.#e);if(b)return b}const l=document.createElement("canvas");return{width:l.width,height:l.height}=this.#t,l.getContext("2d").drawImage(this.#t,0,0),l.toDataURL()}if(this.#c){const[l,h]=this.pageDimensions,b=Math.round(this.width*l*O.PixelsPerInch.PDF_TO_CSS_UNITS),y=Math.round(this.height*h*O.PixelsPerInch.PDF_TO_CSS_UNITS),f=new OffscreenCanvas(b,y);return f.getContext("2d").drawImage(this.#t,0,0,this.#t.width,this.#t.height,0,0,b,y),f.transferToImageBitmap()}return structuredClone(this.#t)}#x(){this.#a=new ResizeObserver(d=>{const l=d[0].contentRect;l.width&&l.height&&this.#y(l.width,l.height)}),this.#a.observe(this.div)}static deserialize(d,l,h){if(d instanceof D.StampAnnotationElement)return null;const b=super.deserialize(d,l,h),{rect:y,bitmapUrl:f,bitmapId:A,isSvg:j,accessibilityData:x}=d;A&&h.imageManager.isValidId(A)?b.#e=A:b.#i=f,b.#c=j;const[U,Z]=b.pageDimensions;return b.width=(y[2]-y[0])/U,b.height=(y[3]-y[1])/Z,x&&(b.altTextData=x),b}serialize(d=!1,l=null){if(this.isEmpty())return null;const h={annotationType:o.AnnotationEditorType.STAMP,bitmapId:this.#e,pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:this.#c,structTreeParentId:this._structTreeParentId};if(d)return h.bitmapUrl=this.#u(!0),h.accessibilityData=this.altTextData,h;const{decorative:b,altText:y}=this.altTextData;if(!b&&y&&(h.accessibilityData={type:"Figure",alt:y}),l===null)return h;l.stamps||=new Map;const f=this.#c?(h.rect[2]-h.rect[0])*(h.rect[3]-h.rect[1]):null;if(!l.stamps.has(this.#e))l.stamps.set(this.#e,{area:f,serialized:h}),h.bitmap=this.#u(!1);else if(this.#c){const A=l.stamps.get(this.#e);f>A.area&&(A.area=f,A.serialized.bitmap.close(),A.serialized.bitmap=this.#u(!1))}return h}}u.StampEditor=B})],__webpack_module_cache__={};function __w_pdfjs_require__(_){var u=__webpack_module_cache__[_];if(u!==void 0)return u.exports;var M=__webpack_module_cache__[_]={exports:{}};return __webpack_modules__[_](M,M.exports,__w_pdfjs_require__),M.exports}var __webpack_exports__={};return(()=>{var _=__webpack_exports__;Object.defineProperty(_,"__esModule",{value:!0}),Object.defineProperty(_,"AbortException",{enumerable:!0,get:function(){return u.AbortException}}),Object.defineProperty(_,"AnnotationEditorLayer",{enumerable:!0,get:function(){return O.AnnotationEditorLayer}}),Object.defineProperty(_,"AnnotationEditorParamsType",{enumerable:!0,get:function(){return u.AnnotationEditorParamsType}}),Object.defineProperty(_,"AnnotationEditorType",{enumerable:!0,get:function(){return u.AnnotationEditorType}}),Object.defineProperty(_,"AnnotationEditorUIManager",{enumerable:!0,get:function(){return D.AnnotationEditorUIManager}}),Object.defineProperty(_,"AnnotationLayer",{enumerable:!0,get:function(){return B.AnnotationLayer}}),Object.defineProperty(_,"AnnotationMode",{enumerable:!0,get:function(){return u.AnnotationMode}}),Object.defineProperty(_,"CMapCompressionType",{enumerable:!0,get:function(){return u.CMapCompressionType}}),Object.defineProperty(_,"DOMSVGFactory",{enumerable:!0,get:function(){return o.DOMSVGFactory}}),Object.defineProperty(_,"FeatureTest",{enumerable:!0,get:function(){return u.FeatureTest}}),Object.defineProperty(_,"GlobalWorkerOptions",{enumerable:!0,get:function(){return F.GlobalWorkerOptions}}),Object.defineProperty(_,"ImageKind",{enumerable:!0,get:function(){return u.ImageKind}}),Object.defineProperty(_,"InvalidPDFException",{enumerable:!0,get:function(){return u.InvalidPDFException}}),Object.defineProperty(_,"MissingPDFException",{enumerable:!0,get:function(){return u.MissingPDFException}}),Object.defineProperty(_,"OPS",{enumerable:!0,get:function(){return u.OPS}}),Object.defineProperty(_,"PDFDataRangeTransport",{enumerable:!0,get:function(){return M.PDFDataRangeTransport}}),Object.defineProperty(_,"PDFDateString",{enumerable:!0,get:function(){return o.PDFDateString}}),Object.defineProperty(_,"PDFWorker",{enumerable:!0,get:function(){return M.PDFWorker}}),Object.defineProperty(_,"PasswordResponses",{enumerable:!0,get:function(){return u.PasswordResponses}}),Object.defineProperty(_,"PermissionFlag",{enumerable:!0,get:function(){return u.PermissionFlag}}),Object.defineProperty(_,"PixelsPerInch",{enumerable:!0,get:function(){return o.PixelsPerInch}}),Object.defineProperty(_,"PromiseCapability",{enumerable:!0,get:function(){return u.PromiseCapability}}),Object.defineProperty(_,"RenderingCancelledException",{enumerable:!0,get:function(){return o.RenderingCancelledException}}),Object.defineProperty(_,"SVGGraphics",{enumerable:!0,get:function(){return M.SVGGraphics}}),Object.defineProperty(_,"UnexpectedResponseException",{enumerable:!0,get:function(){return u.UnexpectedResponseException}}),Object.defineProperty(_,"Util",{enumerable:!0,get:function(){return u.Util}}),Object.defineProperty(_,"VerbosityLevel",{enumerable:!0,get:function(){return u.VerbosityLevel}}),Object.defineProperty(_,"XfaLayer",{enumerable:!0,get:function(){return d.XfaLayer}}),Object.defineProperty(_,"build",{enumerable:!0,get:function(){return M.build}}),Object.defineProperty(_,"createValidAbsoluteUrl",{enumerable:!0,get:function(){return u.createValidAbsoluteUrl}}),Object.defineProperty(_,"getDocument",{enumerable:!0,get:function(){return M.getDocument}}),Object.defineProperty(_,"getFilenameFromUrl",{enumerable:!0,get:function(){return o.getFilenameFromUrl}}),Object.defineProperty(_,"getPdfFilenameFromUrl",{enumerable:!0,get:function(){return o.getPdfFilenameFromUrl}}),Object.defineProperty(_,"getXfaPageViewport",{enumerable:!0,get:function(){return o.getXfaPageViewport}}),Object.defineProperty(_,"isDataScheme",{enumerable:!0,get:function(){return o.isDataScheme}}),Object.defineProperty(_,"isPdfFile",{enumerable:!0,get:function(){return o.isPdfFile}}),Object.defineProperty(_,"loadScript",{enumerable:!0,get:function(){return o.loadScript}}),Object.defineProperty(_,"noContextMenu",{enumerable:!0,get:function(){return o.noContextMenu}}),Object.defineProperty(_,"normalizeUnicode",{enumerable:!0,get:function(){return u.normalizeUnicode}}),Object.defineProperty(_,"renderTextLayer",{enumerable:!0,get:function(){return E.renderTextLayer}}),Object.defineProperty(_,"setLayerDimensions",{enumerable:!0,get:function(){return o.setLayerDimensions}}),Object.defineProperty(_,"shadow",{enumerable:!0,get:function(){return u.shadow}}),Object.defineProperty(_,"updateTextLayer",{enumerable:!0,get:function(){return E.updateTextLayer}}),Object.defineProperty(_,"version",{enumerable:!0,get:function(){return M.version}});var u=__w_pdfjs_require__(1),M=__w_pdfjs_require__(2),o=__w_pdfjs_require__(6),E=__w_pdfjs_require__(26),O=__w_pdfjs_require__(27),D=__w_pdfjs_require__(5),B=__w_pdfjs_require__(29),F=__w_pdfjs_require__(14),d=__w_pdfjs_require__(32)})(),__webpack_exports__})())})(pdf)),pdf.exports}var pdfExports=requirePdf();pdfExports.GlobalWorkerOptions.workerSrc="/pdf.worker.min.js";async function extractTextFromPDF(_){return(await extractTextFromPDFWithChapters(_)).text}async function extractTextFromPDFWithChapters(_){try{const u=await _.arrayBuffer(),M=await pdfExports.getDocument({data:u}).promise,o=M.numPages;let E="";const O=[];for(let B=1;B<=o;B++){const l=(await(await M.getPage(B)).getTextContent()).items.map(h=>h.str).join(" ").replace(/\s+/g," ").trim();O.push(l),E+=l+`

`}const D=detectChapters(O);return{text:E,numPages:o,chapters:D}}catch(u){throw console.error("PDF extraction error:",u),new Error("Failed to extract text from PDF. The file may be corrupted or password-protected.")}}function detectChapters(_){const u=[],M=[/Chapter\s+(\d+)[:\s]+(.+?)(?=\n|$)/i,/CHAPTER\s+(\d+)[:\s]+(.+?)(?=\n|$)/i,/^(\d+)\.\s+([A-Z][^.]+?)(?=\n|$)/m];let o=null,E="";for(let O=0;O<_.length;O++){const D=_[O];let B=!1;for(const F of M){const d=D.match(F);if(d){o&&(o.content=E.trim(),o.endPage=O,u.push(o)),o={number:parseInt(d[1],10)||u.length+1,title:d[2].trim(),content:"",startPage:O+1,endPage:O+1},E=D.substring(d.index+d[0].length),B=!0;break}}!B&&o&&(E+=`

`+D)}if(o&&(o.content=E.trim(),o.endPage=_.length,u.push(o)),u.length===0){const O=Math.ceil(_.length/4);for(let D=0;D<4;D++){const B=D*O,F=Math.min((D+1)*O,_.length);B<_.length&&u.push({number:D+1,title:`Section ${D+1}`,content:_.slice(B,F).join(`

`),startPage:B+1,endPage:F})}}return u}function PDFUpload({onUploadComplete:_}){const[u,M]=reactExports.useState(!1),[o,E]=reactExports.useState(!1),[O,D]=reactExports.useState(0),[B,F]=reactExports.useState(""),[d,l]=reactExports.useState(null),h=j=>{j.preventDefault(),M(!0)},b=()=>{M(!1)},y=async j=>{j.preventDefault(),M(!1);const x=Array.from(j.dataTransfer.files).filter(U=>U.type==="application/pdf");x.length>0&&await A(x[0])},f=async j=>{const x=j.target.files?.[0];x&&await A(x)},A=async j=>{E(!0),l(null),D(0);try{F("Extracting text from PDF..."),D(10);const x=await extractTextFromPDF(j);if(!x||x.length<100)throw new Error("Could not extract sufficient text from PDF. The file may be scanned images or encrypted.");F("Creating study material..."),D(30);const U=crypto.randomUUID(),Z={id:U,title:j.name.replace(".pdf",""),totalPages:x.length/3e3,uploadedAt:new Date,chapters:[],totalConcepts:0};await db.books.add(Z),F(" AI is deeply analyzing content..."),D(50);const V=await processPDFWithAI(x,{useELI5:!0,generateVisuals:!0,generateConceptMap:!0,difficulty:"beginner"});F("Saving chapters..."),D(70);const T=[];for(const z of V.chapters)z.bookId=U,await db.chapters.add(z),T.push(z.id);F("Building concept database..."),D(80);for(const z of V.concepts)await db.concepts.add(z);F("Creating flashcards & quizzes..."),D(90);for(const z of V.flashcards)await db.flashcards.add(z);for(const z of V.questions)await db.questions.add(z);F("Finalizing..."),D(95),await db.books.update(U,{chapters:T,totalConcepts:V.concepts.length,conceptMap:V.conceptMap}),await db.progress.add({id:crypto.randomUUID(),bookId:U,chaptersRead:[],conceptsMastered:[],flashcardsReviewed:0,quizzesTaken:0,averageScore:0,weakTopics:[],strongTopics:[],lastStudied:new Date,conceptProgress:V.concepts.map(z=>({conceptId:z.id,mastery:0,lastReviewed:new Date}))}),D(100),F("Complete!"),setTimeout(()=>{_(),E(!1)},500)}catch(x){l(x instanceof Error?x.message:"Failed to process PDF"),E(!1)}};return jsxRuntimeExports.jsxs("div",{className:"space-y-6",children:[jsxRuntimeExports.jsxs("div",{className:"glass rounded-2xl p-8 text-center",children:[jsxRuntimeExports.jsx("div",{className:"w-16 h-16 mx-auto mb-4 rounded-2xl bg-gradient-to-br from-violet-500 to-fuchsia-500 flex items-center justify-center shadow-lg shadow-violet-500/25",children:jsxRuntimeExports.jsx(Sparkles,{className:"w-8 h-8 text-white"})}),jsxRuntimeExports.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"Welcome to RE Study AI"}),jsxRuntimeExports.jsx("p",{className:"text-slate-400 max-w-md mx-auto",children:"Upload your real estate textbooks and let our AI create personalized study materials with ELI5 explanations, visual aids, and smart flashcards."})]}),jsxRuntimeExports.jsx("div",{onDragOver:h,onDragLeave:b,onDrop:y,className:`relative glass rounded-2xl p-8 text-center transition-all duration-300 ${u?"border-2 border-violet-500 bg-violet-500/10":"border-2 border-dashed border-white/20"} ${o?"pointer-events-none":""}`,children:o?jsxRuntimeExports.jsxs("div",{className:"py-8",children:[jsxRuntimeExports.jsxs("div",{className:"w-16 h-16 mx-auto mb-4 relative",children:[jsxRuntimeExports.jsxs("svg",{className:"w-16 h-16 transform -rotate-90",viewBox:"0 0 64 64",children:[jsxRuntimeExports.jsx("circle",{cx:"32",cy:"32",r:"28",fill:"none",stroke:"rgba(255,255,255,0.1)",strokeWidth:"4"}),jsxRuntimeExports.jsx("circle",{cx:"32",cy:"32",r:"28",fill:"none",stroke:"url(#gradient)",strokeWidth:"4",strokeDasharray:`${O*1.76} 176`,strokeLinecap:"round"}),jsxRuntimeExports.jsx("defs",{children:jsxRuntimeExports.jsxs("linearGradient",{id:"gradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[jsxRuntimeExports.jsx("stop",{offset:"0%",stopColor:"#8b5cf6"}),jsxRuntimeExports.jsx("stop",{offset:"100%",stopColor:"#d946ef"})]})})]}),jsxRuntimeExports.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:jsxRuntimeExports.jsxs("span",{className:"text-lg font-bold text-white",children:[O,"%"]})})]}),jsxRuntimeExports.jsx("p",{className:"text-violet-300 font-medium animate-pulse",children:B}),jsxRuntimeExports.jsx("p",{className:"text-slate-500 text-sm mt-2",children:"This may take a minute for large files"})]}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("div",{className:"w-16 h-16 mx-auto mb-4 rounded-2xl glass flex items-center justify-center",children:jsxRuntimeExports.jsx(Upload,{className:"w-8 h-8 text-violet-400"})}),jsxRuntimeExports.jsx("h3",{className:"text-xl font-semibold text-white mb-2",children:"Upload Your PDF"}),jsxRuntimeExports.jsx("p",{className:"text-slate-400 mb-6",children:"Drag and drop your real estate textbook, or click to browse"}),jsxRuntimeExports.jsxs("label",{className:"inline-flex items-center gap-2 px-6 py-3 bg-gradient-to-r from-violet-500 to-fuchsia-500 hover:from-violet-400 hover:to-fuchsia-400 text-white font-medium rounded-xl cursor-pointer transition-all shadow-lg shadow-violet-500/25",children:[jsxRuntimeExports.jsx(FileText,{className:"w-5 h-5"}),"Select PDF File",jsxRuntimeExports.jsx("input",{type:"file",accept:".pdf",onChange:f,className:"hidden"})]}),jsxRuntimeExports.jsx("p",{className:"text-slate-500 text-sm mt-4",children:"Supports PDF files up to 50MB"})]})}),d&&jsxRuntimeExports.jsx("div",{className:"glass rounded-xl p-4 bg-red-500/10 border border-red-500/30",children:jsxRuntimeExports.jsxs("div",{className:"flex items-start gap-3",children:[jsxRuntimeExports.jsx(CircleAlert,{className:"w-5 h-5 text-red-400 mt-0.5"}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{className:"text-red-300 font-medium",children:"Processing Error"}),jsxRuntimeExports.jsx("p",{className:"text-red-200/70 text-sm",children:d})]})]})}),jsxRuntimeExports.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[{icon:Zap,title:"Deep AI Analysis",desc:"Not just text extraction - true understanding with ELI5 explanations"},{icon:BookOpen,title:"Smart Flashcards",desc:"Auto-generated with analogies, examples, and spaced repetition"},{icon:CircleCheckBig,title:"Practice Quizzes",desc:"Scenario-based questions that teach while testing"}].map((j,x)=>jsxRuntimeExports.jsxs("div",{className:"glass rounded-xl p-4",children:[jsxRuntimeExports.jsx("div",{className:"w-10 h-10 rounded-xl bg-gradient-to-br from-violet-500/20 to-fuchsia-500/20 flex items-center justify-center mb-3",children:jsxRuntimeExports.jsx(j.icon,{className:"w-5 h-5 text-violet-400"})}),jsxRuntimeExports.jsx("h4",{className:"font-semibold text-white mb-1",children:j.title}),jsxRuntimeExports.jsx("p",{className:"text-slate-400 text-sm",children:j.desc})]},x))}),jsxRuntimeExports.jsxs("div",{className:"glass rounded-2xl p-6",children:[jsxRuntimeExports.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"How It Works"}),jsxRuntimeExports.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[{step:1,title:"Upload PDF",desc:"Drop your textbook or course material"},{step:2,title:"AI Reads",desc:"Our AI deeply analyzes every concept"},{step:3,title:"ELI5 Mode",desc:"Get simple explanations with analogies"},{step:4,title:"Study Smart",desc:"Flashcards, quizzes & progress tracking"}].map(j=>jsxRuntimeExports.jsxs("div",{className:"flex items-start gap-3",children:[jsxRuntimeExports.jsx("div",{className:"w-8 h-8 rounded-full bg-violet-500/20 flex items-center justify-center flex-shrink-0",children:jsxRuntimeExports.jsx("span",{className:"text-sm font-bold text-violet-400",children:j.step})}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h4",{className:"font-medium text-white text-sm",children:j.title}),jsxRuntimeExports.jsx("p",{className:"text-slate-500 text-xs",children:j.desc})]})]},j.step))})]})]})}function ChapterList({book:_,chapters:u,onChapterSelect:M}){const[o,E]=reactExports.useState(null),O=u.reduce((B,F)=>B+(F.concepts?.length||0),0),D=u.reduce((B,F)=>B+(F.readingTime||0),0);return jsxRuntimeExports.jsxs("div",{className:"space-y-6",children:[jsxRuntimeExports.jsx("div",{className:"glass rounded-2xl p-6",children:jsxRuntimeExports.jsxs("div",{className:"flex items-start gap-4",children:[jsxRuntimeExports.jsx("div",{className:"w-14 h-14 rounded-2xl bg-gradient-to-br from-violet-500 to-fuchsia-500 flex items-center justify-center shadow-lg shadow-violet-500/25 flex-shrink-0",children:jsxRuntimeExports.jsx(Book,{className:"w-7 h-7 text-white"})}),jsxRuntimeExports.jsxs("div",{className:"flex-1",children:[jsxRuntimeExports.jsx("h2",{className:"text-xl font-bold text-white mb-1",children:_.title}),jsxRuntimeExports.jsxs("div",{className:"flex flex-wrap gap-3 text-sm text-slate-400",children:[jsxRuntimeExports.jsxs("span",{className:"flex items-center gap-1",children:[jsxRuntimeExports.jsx(ChartColumn,{className:"w-4 h-4"}),u.length," chapters"]}),jsxRuntimeExports.jsxs("span",{className:"flex items-center gap-1",children:[jsxRuntimeExports.jsx(Lightbulb,{className:"w-4 h-4"}),O," concepts"]}),jsxRuntimeExports.jsxs("span",{className:"flex items-center gap-1",children:[jsxRuntimeExports.jsx(Clock,{className:"w-4 h-4"}),"~",D," min read"]})]})]})]})}),jsxRuntimeExports.jsx("div",{className:"grid grid-cols-1 gap-4",children:u.length===0?jsxRuntimeExports.jsxs("div",{className:"glass rounded-2xl p-8 text-center",children:[jsxRuntimeExports.jsx(Sparkles,{className:"w-12 h-12 mx-auto mb-3 text-slate-500"}),jsxRuntimeExports.jsx("p",{className:"text-slate-400",children:"No chapters found. Try uploading your PDF again."})]}):u.map((B,F)=>jsxRuntimeExports.jsx(ChapterCard,{chapter:B,index:F,isExpanded:o===B.id,onToggle:()=>E(o===B.id?null:B.id),onSelect:()=>M(B)},B.id))})]})}function ChapterCard({chapter:_,index:u,isExpanded:M,onToggle:o,onSelect:E}){const O=_.concepts?.length||0;return jsxRuntimeExports.jsxs("div",{className:`glass rounded-2xl overflow-hidden transition-all duration-300 ${M?"ring-2 ring-violet-500/50":""}`,children:[jsxRuntimeExports.jsx("div",{className:"p-5 cursor-pointer hover:bg-white/5 transition-colors",onClick:o,children:jsxRuntimeExports.jsxs("div",{className:"flex items-start gap-4",children:[jsxRuntimeExports.jsx("div",{className:"w-10 h-10 rounded-xl bg-gradient-to-br from-violet-500/20 to-fuchsia-500/20 flex items-center justify-center flex-shrink-0",children:jsxRuntimeExports.jsx("span",{className:"text-sm font-bold text-violet-400",children:u+1})}),jsxRuntimeExports.jsxs("div",{className:"flex-1",children:[jsxRuntimeExports.jsx("h3",{className:"font-semibold text-white mb-1",children:_.title}),_.eli5Summary&&jsxRuntimeExports.jsx("p",{className:"text-slate-400 text-sm line-clamp-2 mb-2",children:_.eli5Summary.oneSentence}),jsxRuntimeExports.jsxs("div",{className:"flex flex-wrap items-center gap-3 text-xs text-slate-500",children:[jsxRuntimeExports.jsxs("span",{className:"flex items-center gap-1",children:[jsxRuntimeExports.jsx(Lightbulb,{className:"w-3 h-3"}),O," concepts"]}),_.readingTime&&jsxRuntimeExports.jsxs("span",{className:"flex items-center gap-1",children:[jsxRuntimeExports.jsx(Clock,{className:"w-3 h-3"}),_.readingTime," min"]}),jsxRuntimeExports.jsx("span",{className:`px-2 py-0.5 rounded-full ${_.difficulty==="easy"?"bg-emerald-500/20 text-emerald-400":_.difficulty==="medium"?"bg-yellow-500/20 text-yellow-400":"bg-red-500/20 text-red-400"}`,children:_.difficulty})]})]}),jsxRuntimeExports.jsx(ChevronRight,{className:`w-5 h-5 text-slate-500 transition-transform duration-300 ${M?"rotate-90":""}`})]})}),M&&jsxRuntimeExports.jsx("div",{className:"px-5 pb-5 border-t border-white/10",children:jsxRuntimeExports.jsxs("div",{className:"pt-4 space-y-4",children:[_.eli5Summary&&jsxRuntimeExports.jsxs("div",{className:"bg-emerald-500/10 border border-emerald-500/30 rounded-xl p-4",children:[jsxRuntimeExports.jsx("p",{className:"text-sm text-emerald-400 font-medium mb-1",children:" ELI5 Summary"}),jsxRuntimeExports.jsx("p",{className:"text-emerald-100",children:_.eli5Summary.shortSummary})]}),jsxRuntimeExports.jsx("div",{className:"flex flex-wrap gap-2",children:_.topics?.map((D,B)=>jsxRuntimeExports.jsx("span",{className:"px-3 py-1 text-xs bg-white/5 rounded-full text-slate-400",children:D},B))}),jsxRuntimeExports.jsxs("button",{onClick:D=>{D.stopPropagation(),E()},className:"w-full py-3 bg-gradient-to-r from-violet-500 to-fuchsia-500 hover:from-violet-400 hover:to-fuchsia-400 text-white font-medium rounded-xl transition-all flex items-center justify-center gap-2",children:[jsxRuntimeExports.jsx(Sparkles,{className:"w-4 h-4"}),"Study This Chapter"]})]})})]})}const iconMap={Home:House,DollarSign,Scale,Users,Building,FileCheck,BookOpen,Lightbulb,Brain};function ChapterDetail({chapter:_,onBack:u,onStudyConcept:M,onTakeQuiz:o}){const[E,O]=reactExports.useState("overview"),[D,B]=reactExports.useState(null),[F,d]=reactExports.useState(!0);return jsxRuntimeExports.jsxs("div",{className:"space-y-6",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-4",children:[jsxRuntimeExports.jsx("button",{onClick:u,className:"p-2 glass rounded-xl hover:bg-white/10 transition-colors",children:jsxRuntimeExports.jsx(ArrowLeft,{className:"w-5 h-5 text-slate-300"})}),jsxRuntimeExports.jsxs("div",{className:"flex-1",children:[jsxRuntimeExports.jsx("h1",{className:"text-xl font-bold text-white",children:_.title}),jsxRuntimeExports.jsxs("p",{className:"text-sm text-slate-400",children:["Chapter ",_.number]})]})]}),jsxRuntimeExports.jsx("div",{className:"glass rounded-xl p-1 flex gap-1",children:[{key:!0,label:" Simple Mode (ELI5)",desc:"Easy explanations with analogies"},{key:!1,label:" Advanced Mode",desc:"Detailed technical content"}].map(l=>jsxRuntimeExports.jsxs("button",{onClick:()=>d(l.key),className:`flex-1 p-3 rounded-lg text-left transition-all ${F===l.key?"bg-gradient-to-r from-violet-500/20 to-fuchsia-500/20 border border-violet-500/30":"hover:bg-white/5"}`,children:[jsxRuntimeExports.jsx("p",{className:`font-medium ${F===l.key?"text-violet-300":"text-slate-400"}`,children:l.label}),jsxRuntimeExports.jsx("p",{className:"text-xs text-slate-500",children:l.desc})]},String(l.key)))}),jsxRuntimeExports.jsx("div",{className:"flex gap-2",children:[{key:"overview",label:"Overview",icon:BookOpen},{key:"concepts",label:`Concepts (${_.concepts?.length||0})`,icon:Lightbulb},{key:"visuals",label:"Visual Aids",icon:Brain}].map(l=>jsxRuntimeExports.jsxs("button",{onClick:()=>O(l.key),className:`flex items-center gap-2 px-4 py-2 rounded-xl transition-all ${E===l.key?"bg-violet-500/20 text-violet-300 border border-violet-500/30":"glass text-slate-400 hover:text-slate-200"}`,children:[jsxRuntimeExports.jsx(l.icon,{className:"w-4 h-4"}),l.label]},l.key))}),jsxRuntimeExports.jsxs("div",{className:"glass rounded-2xl p-6",children:[E==="overview"&&jsxRuntimeExports.jsx(OverviewTab,{chapter:_,eli5Mode:F,onTakeQuiz:o}),E==="concepts"&&jsxRuntimeExports.jsx(ConceptsTab,{chapter:_,eli5Mode:F,selectedConcept:D,onSelectConcept:B,onStudyConcept:M}),E==="visuals"&&jsxRuntimeExports.jsx(VisualsTab,{chapter:_})]})]})}function OverviewTab({chapter:_,eli5Mode:u,onTakeQuiz:M}){return jsxRuntimeExports.jsxs("div",{className:"space-y-6",children:[u&&_.eli5Summary?jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsxs("div",{className:"bg-gradient-to-r from-emerald-500/10 to-teal-500/10 border border-emerald-500/30 rounded-xl p-6",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[jsxRuntimeExports.jsx(Sparkles,{className:"w-5 h-5 text-emerald-400"}),jsxRuntimeExports.jsx("span",{className:"text-emerald-400 font-medium",children:"In One Sentence"})]}),jsxRuntimeExports.jsx("p",{className:"text-lg text-emerald-100",children:_.eli5Summary.oneSentence})]}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[jsxRuntimeExports.jsxs("div",{className:"glass rounded-xl p-5",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[jsxRuntimeExports.jsx(BookOpen,{className:"w-5 h-5 text-violet-400"}),jsxRuntimeExports.jsx("span",{className:"text-violet-300 font-medium",children:"What This Means"})]}),jsxRuntimeExports.jsx("p",{className:"text-slate-300",children:_.eli5Summary.shortSummary})]}),jsxRuntimeExports.jsxs("div",{className:"glass rounded-xl p-5",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[jsxRuntimeExports.jsx(CircleQuestionMark,{className:"w-5 h-5 text-fuchsia-400"}),jsxRuntimeExports.jsx("span",{className:"text-fuchsia-300 font-medium",children:"Why It Matters"})]}),jsxRuntimeExports.jsx("p",{className:"text-slate-300",children:_.eli5Summary.whyItMatters})]})]}),jsxRuntimeExports.jsxs("div",{className:"glass rounded-xl p-5",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[jsxRuntimeExports.jsx(CircleCheckBig,{className:"w-5 h-5 text-amber-400"}),jsxRuntimeExports.jsx("span",{className:"text-amber-300 font-medium",children:"Real World Connection"})]}),jsxRuntimeExports.jsx("p",{className:"text-slate-300",children:_.eli5Summary.realWorldConnection})]})]}):jsxRuntimeExports.jsx("div",{className:"space-y-4",children:jsxRuntimeExports.jsxs("div",{className:"prose prose-invert max-w-none",children:[jsxRuntimeExports.jsx("h3",{className:"text-white font-semibold",children:"Chapter Summary"}),jsxRuntimeExports.jsx("p",{className:"text-slate-300",children:_.summary||"No summary available."}),_.keyTerms&&_.keyTerms.length>0&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("h3",{className:"text-white font-semibold mt-6",children:"Key Terms"}),jsxRuntimeExports.jsx("dl",{className:"space-y-3",children:_.keyTerms.map((o,E)=>jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("dt",{className:"text-violet-300 font-medium",children:o.term}),jsxRuntimeExports.jsx("dd",{className:"text-slate-400",children:o.definition})]},E))})]})]})}),jsxRuntimeExports.jsxs("button",{onClick:M,className:"w-full py-4 bg-gradient-to-r from-violet-500 to-fuchsia-500 hover:from-violet-400 hover:to-fuchsia-400 text-white font-semibold rounded-xl transition-all flex items-center justify-center gap-2 shadow-lg shadow-violet-500/25",children:[jsxRuntimeExports.jsx(Brain,{className:"w-5 h-5"}),"Take Practice Quiz"]})]})}function ConceptsTab({chapter:_,eli5Mode:u,selectedConcept:M,onSelectConcept:o,onStudyConcept:E}){const O=_.concepts||[];return O.length===0?jsxRuntimeExports.jsxs("div",{className:"text-center py-8",children:[jsxRuntimeExports.jsx(Lightbulb,{className:"w-12 h-12 mx-auto mb-3 text-slate-500"}),jsxRuntimeExports.jsx("p",{className:"text-slate-400",children:"No concepts extracted from this chapter."})]}):M?jsxRuntimeExports.jsx(ConceptDetail,{concept:M,eli5Mode:u,onBack:()=>o(null),onStudy:()=>E(M)}):jsxRuntimeExports.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:O.map(D=>{const B=iconMap[D.icon]||Lightbulb;return jsxRuntimeExports.jsx("button",{onClick:()=>o(D),className:"glass rounded-xl p-5 text-left hover:bg-white/5 transition-all group",children:jsxRuntimeExports.jsxs("div",{className:"flex items-start gap-4",children:[jsxRuntimeExports.jsx("div",{className:`w-10 h-10 rounded-xl flex items-center justify-center flex-shrink-0 bg-${D.color}-500/20`,children:jsxRuntimeExports.jsx(B,{className:`w-5 h-5 text-${D.color}-400`})}),jsxRuntimeExports.jsxs("div",{className:"flex-1",children:[jsxRuntimeExports.jsx("h4",{className:"font-semibold text-white group-hover:text-violet-300 transition-colors",children:D.name}),jsxRuntimeExports.jsx("p",{className:"text-slate-400 text-sm mt-1 line-clamp-2",children:u?D.simpleExplanation:D.detailedExplanation}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 mt-3",children:[jsxRuntimeExports.jsx("span",{className:`px-2 py-0.5 text-xs rounded-full ${D.difficulty==="beginner"?"bg-emerald-500/20 text-emerald-400":D.difficulty==="intermediate"?"bg-yellow-500/20 text-yellow-400":"bg-red-500/20 text-red-400"}`,children:D.difficulty}),jsxRuntimeExports.jsx("span",{className:"text-xs text-slate-500",children:"Click to learn more "})]})]})]})},D.id)})})}function ConceptDetail({concept:_,eli5Mode:u,onBack:M,onStudy:o}){const E=iconMap[_.icon]||Lightbulb;return jsxRuntimeExports.jsxs("div",{className:"space-y-6",children:[jsxRuntimeExports.jsxs("button",{onClick:M,className:"flex items-center gap-2 text-slate-400 hover:text-white transition-colors",children:[jsxRuntimeExports.jsx(ChevronRight,{className:"w-4 h-4 rotate-180"}),"Back to concepts"]}),jsxRuntimeExports.jsxs("div",{className:"flex items-start gap-4",children:[jsxRuntimeExports.jsx("div",{className:`w-14 h-14 rounded-2xl flex items-center justify-center flex-shrink-0 bg-${_.color}-500/20`,children:jsxRuntimeExports.jsx(E,{className:`w-7 h-7 text-${_.color}-400`})}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h3",{className:"text-2xl font-bold text-white",children:_.name}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[jsxRuntimeExports.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${_.difficulty==="beginner"?"bg-emerald-500/20 text-emerald-400":_.difficulty==="intermediate"?"bg-yellow-500/20 text-yellow-400":"bg-red-500/20 text-red-400"}`,children:_.difficulty}),_.tags.map((O,D)=>jsxRuntimeExports.jsx("span",{className:"px-2 py-1 text-xs bg-white/5 rounded-full text-slate-400",children:O},D))]})]})]}),u?jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsxs("div",{className:"bg-emerald-500/10 border border-emerald-500/30 rounded-xl p-5",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[jsxRuntimeExports.jsx(Sparkles,{className:"w-5 h-5 text-emerald-400"}),jsxRuntimeExports.jsx("span",{className:"text-emerald-400 font-medium",children:"Simple Explanation"})]}),jsxRuntimeExports.jsx("p",{className:"text-emerald-100 text-lg",children:_.simpleExplanation})]}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[jsxRuntimeExports.jsxs("div",{className:"glass rounded-xl p-5",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[jsxRuntimeExports.jsx(BookOpen,{className:"w-5 h-5 text-violet-400"}),jsxRuntimeExports.jsx("span",{className:"text-violet-300 font-medium",children:"Analogy"})]}),jsxRuntimeExports.jsxs("p",{className:"text-slate-300 italic",children:['"',_.analogy,'"']})]}),jsxRuntimeExports.jsxs("div",{className:"glass rounded-xl p-5",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[jsxRuntimeExports.jsx(CircleCheckBig,{className:"w-5 h-5 text-amber-400"}),jsxRuntimeExports.jsx("span",{className:"text-amber-300 font-medium",children:"Real World Example"})]}),jsxRuntimeExports.jsx("p",{className:"text-slate-300",children:_.realWorldExample})]})]})]}):jsxRuntimeExports.jsxs("div",{className:"glass rounded-xl p-5",children:[jsxRuntimeExports.jsx("h4",{className:"text-violet-300 font-medium mb-3",children:"Detailed Explanation"}),jsxRuntimeExports.jsx("p",{className:"text-slate-300",children:_.detailedExplanation}),_.visualDescription&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("h4",{className:"text-violet-300 font-medium mt-4 mb-3",children:"Visual Description"}),jsxRuntimeExports.jsx("p",{className:"text-slate-400",children:_.visualDescription})]})]}),jsxRuntimeExports.jsxs("button",{onClick:o,className:"w-full py-4 bg-gradient-to-r from-violet-500 to-fuchsia-500 hover:from-violet-400 hover:to-fuchsia-400 text-white font-semibold rounded-xl transition-all flex items-center justify-center gap-2",children:[jsxRuntimeExports.jsx(Brain,{className:"w-5 h-5"}),"Study This Concept"]})]})}function VisualsTab({chapter:_}){const u=_.visualAids||[];return u.length===0?jsxRuntimeExports.jsxs("div",{className:"text-center py-8",children:[jsxRuntimeExports.jsx(Brain,{className:"w-12 h-12 mx-auto mb-3 text-slate-500"}),jsxRuntimeExports.jsx("p",{className:"text-slate-400",children:"No visual aids available for this chapter."})]}):jsxRuntimeExports.jsx("div",{className:"space-y-4",children:u.map(M=>jsxRuntimeExports.jsxs("div",{className:"glass rounded-xl p-5",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[jsxRuntimeExports.jsx(FileText,{className:"w-5 h-5 text-violet-400"}),jsxRuntimeExports.jsx("h4",{className:"font-semibold text-white",children:M.title})]}),jsxRuntimeExports.jsx("p",{className:"text-slate-400 text-sm mb-4",children:M.description}),jsxRuntimeExports.jsx("div",{className:"bg-slate-950/50 rounded-lg p-4 border border-white/5",children:jsxRuntimeExports.jsx("pre",{className:"text-xs text-slate-400 overflow-auto",children:JSON.stringify(M.data,null,2)})})]},M.id))})}function FlashcardView({initialConcept:_}){const[u,M]=reactExports.useState([]),[o,E]=reactExports.useState(0),[O,D]=reactExports.useState(!1),[B,F]=reactExports.useState(!0),[d,l]=reactExports.useState(!0),[h,b]=reactExports.useState(!1),[y,f]=reactExports.useState({correct:0,incorrect:0}),A=reactExports.useCallback(async()=>{l(!0);try{let T;_?T=await db.flashcards.where("conceptId").equals(_.id).toArray():T=await getDueFlashcards(),T.length===0&&(T=await db.flashcards.limit(20).toArray()),T=T.sort(()=>Math.random()-.5),M(T),E(0),D(!1),b(T.length===0)}catch(T){console.error("Error loading flashcards:",T)}finally{l(!1)}},[_]);reactExports.useEffect(()=>{A()},[A]);const j=()=>D(!O),x=async T=>{const z=u[o];T>=3?f($=>({...$,correct:$.correct+1})):f($=>({...$,incorrect:$.incorrect+1})),await updateFlashcardAfterReview(z.id,T),o<u.length-1?(E($=>$+1),D(!1)):b(!0)},U=()=>{E(0),D(!1),b(!1),f({correct:0,incorrect:0}),A()};if(d)return jsxRuntimeExports.jsx("div",{className:"flex items-center justify-center h-64",children:jsxRuntimeExports.jsxs("div",{className:"glass rounded-2xl p-8 text-center",children:[jsxRuntimeExports.jsx(Brain,{className:"w-12 h-12 mx-auto mb-3 text-violet-400 animate-pulse"}),jsxRuntimeExports.jsx("p",{className:"text-slate-400",children:"Loading flashcards..."})]})});if(h)return jsxRuntimeExports.jsx(StudyComplete,{stats:y,total:u.length,onRestart:U});if(u.length===0)return jsxRuntimeExports.jsxs("div",{className:"glass rounded-2xl p-8 text-center",children:[jsxRuntimeExports.jsx(Brain,{className:"w-16 h-16 mx-auto mb-4 text-slate-500"}),jsxRuntimeExports.jsx("h3",{className:"text-xl font-semibold text-white mb-2",children:"No Flashcards Yet"}),jsxRuntimeExports.jsx("p",{className:"text-slate-400 mb-4",children:"Upload a PDF to generate flashcards from your study material."})]});const Z=u[o],V=(o+1)/u.length*100;return jsxRuntimeExports.jsxs("div",{className:"space-y-6",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h2",{className:"text-xl font-bold text-white",children:_?`Studying: ${_.name}`:"Flashcard Review"}),jsxRuntimeExports.jsxs("p",{className:"text-sm text-slate-400",children:["Card ",o+1," of ",u.length]})]}),jsxRuntimeExports.jsxs("button",{onClick:()=>F(!B),className:`flex items-center gap-2 px-4 py-2 rounded-xl transition-all ${B?"bg-emerald-500/20 text-emerald-400 border border-emerald-500/30":"glass text-slate-400"}`,children:[jsxRuntimeExports.jsx(Sparkles,{className:"w-4 h-4"}),B?"ELI5 Mode":"Standard"]})]}),jsxRuntimeExports.jsx("div",{className:"glass rounded-full h-2 overflow-hidden",children:jsxRuntimeExports.jsx("div",{className:"h-full bg-gradient-to-r from-violet-500 to-fuchsia-500 transition-all duration-300",style:{width:`${V}%`}})}),jsxRuntimeExports.jsx("div",{className:"relative h-80 sm:h-96",children:jsxRuntimeExports.jsxs("div",{onClick:j,className:`absolute inset-0 glass rounded-2xl p-8 cursor-pointer transition-all duration-500 transform-gpu preserve-3d ${O?"rotate-y-180":""}`,style:{transformStyle:"preserve-3d"},children:[jsxRuntimeExports.jsxs("div",{className:"absolute inset-0 backface-hidden flex flex-col items-center justify-center p-8",style:{backfaceVisibility:"hidden"},children:[jsxRuntimeExports.jsx("div",{className:"w-12 h-12 rounded-xl bg-violet-500/20 flex items-center justify-center mb-4",children:jsxRuntimeExports.jsx(Brain,{className:"w-6 h-6 text-violet-400"})}),jsxRuntimeExports.jsx("p",{className:"text-2xl sm:text-3xl font-semibold text-white text-center",children:Z.front}),jsxRuntimeExports.jsx("p",{className:"text-slate-500 text-sm mt-6",children:"Click to reveal answer"})]}),jsxRuntimeExports.jsx("div",{className:"absolute inset-0 backface-hidden flex flex-col items-center justify-center p-8 rotate-y-180",style:{backfaceVisibility:"hidden",transform:"rotateY(180deg)"},children:B&&Z.eli5Explanation?jsxRuntimeExports.jsxs("div",{className:"text-center w-full max-h-full overflow-y-auto",children:[jsxRuntimeExports.jsx("div",{className:"w-12 h-12 rounded-xl bg-emerald-500/20 flex items-center justify-center mx-auto mb-4",children:jsxRuntimeExports.jsx(Sparkles,{className:"w-6 h-6 text-emerald-400"})}),jsxRuntimeExports.jsx("p",{className:"text-xl text-emerald-100 mb-4",children:Z.eli5Explanation}),Z.realWorldExample&&jsxRuntimeExports.jsxs("div",{className:"glass rounded-xl p-4 mt-4",children:[jsxRuntimeExports.jsx("p",{className:"text-sm text-amber-400 font-medium mb-1",children:" Real World Example"}),jsxRuntimeExports.jsx("p",{className:"text-slate-300 text-sm",children:Z.realWorldExample})]})]}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("div",{className:"w-12 h-12 rounded-xl bg-fuchsia-500/20 flex items-center justify-center mb-4",children:jsxRuntimeExports.jsx(Lightbulb,{className:"w-6 h-6 text-fuchsia-400"})}),jsxRuntimeExports.jsx("p",{className:"text-xl sm:text-2xl text-white text-center",children:Z.back})]})})]})}),O&&jsxRuntimeExports.jsx("div",{className:"grid grid-cols-4 gap-3",children:[{quality:1,label:"Again",color:"red",icon:CircleX},{quality:2,label:"Hard",color:"orange",icon:Zap},{quality:3,label:"Good",color:"blue",icon:CircleCheckBig},{quality:4,label:"Easy",color:"emerald",icon:CircleCheckBig}].map(({quality:T,label:z,color:$,icon:rt})=>jsxRuntimeExports.jsxs("button",{onClick:()=>x(T),className:`py-3 rounded-xl font-medium transition-all flex flex-col items-center gap-1 ${$==="red"?"bg-red-500/20 text-red-400 hover:bg-red-500/30 border border-red-500/30":$==="orange"?"bg-orange-500/20 text-orange-400 hover:bg-orange-500/30 border border-orange-500/30":$==="blue"?"bg-blue-500/20 text-blue-400 hover:bg-blue-500/30 border border-blue-500/30":"bg-emerald-500/20 text-emerald-400 hover:bg-emerald-500/30 border border-emerald-500/30"}`,children:[jsxRuntimeExports.jsx(rt,{className:"w-5 h-5"}),z]},T))}),!O&&jsxRuntimeExports.jsxs("button",{onClick:j,className:"w-full py-4 bg-gradient-to-r from-violet-500 to-fuchsia-500 hover:from-violet-400 hover:to-fuchsia-400 text-white font-semibold rounded-xl transition-all flex items-center justify-center gap-2",children:[jsxRuntimeExports.jsx(RotateCcw,{className:"w-5 h-5"}),"Show Answer"]}),jsxRuntimeExports.jsxs("div",{className:"glass rounded-xl p-4 flex items-center justify-center gap-8",children:[jsxRuntimeExports.jsxs("div",{className:"text-center",children:[jsxRuntimeExports.jsx("p",{className:"text-2xl font-bold text-emerald-400",children:y.correct}),jsxRuntimeExports.jsx("p",{className:"text-xs text-slate-500",children:"Correct"})]}),jsxRuntimeExports.jsx("div",{className:"w-px h-10 bg-white/10"}),jsxRuntimeExports.jsxs("div",{className:"text-center",children:[jsxRuntimeExports.jsx("p",{className:"text-2xl font-bold text-red-400",children:y.incorrect}),jsxRuntimeExports.jsx("p",{className:"text-xs text-slate-500",children:"To Review"})]}),jsxRuntimeExports.jsx("div",{className:"w-px h-10 bg-white/10"}),jsxRuntimeExports.jsxs("div",{className:"text-center",children:[jsxRuntimeExports.jsxs("p",{className:"text-2xl font-bold text-violet-400",children:[Math.round(y.correct/(y.correct+y.incorrect||1)*100),"%"]}),jsxRuntimeExports.jsx("p",{className:"text-xs text-slate-500",children:"Accuracy"})]})]})]})}function StudyComplete({stats:_,total:u,onRestart:M}){const o=Math.round(_.correct/(_.correct+_.incorrect||1)*100);return jsxRuntimeExports.jsxs("div",{className:"glass rounded-2xl p-8 text-center",children:[jsxRuntimeExports.jsx("div",{className:"w-20 h-20 mx-auto mb-6 rounded-2xl bg-gradient-to-br from-emerald-500 to-teal-500 flex items-center justify-center shadow-lg shadow-emerald-500/25",children:jsxRuntimeExports.jsx(CircleCheckBig,{className:"w-10 h-10 text-white"})}),jsxRuntimeExports.jsx("h3",{className:"text-2xl font-bold text-white mb-2",children:"Session Complete! "}),jsxRuntimeExports.jsxs("p",{className:"text-slate-400 mb-6",children:["You reviewed ",u," flashcards"]}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-8",children:[jsxRuntimeExports.jsxs("div",{className:"glass rounded-xl p-4",children:[jsxRuntimeExports.jsx("p",{className:"text-3xl font-bold text-emerald-400",children:_.correct}),jsxRuntimeExports.jsx("p",{className:"text-sm text-slate-500",children:"Correct"})]}),jsxRuntimeExports.jsxs("div",{className:"glass rounded-xl p-4",children:[jsxRuntimeExports.jsx("p",{className:"text-3xl font-bold text-red-400",children:_.incorrect}),jsxRuntimeExports.jsx("p",{className:"text-sm text-slate-500",children:"To Review"})]}),jsxRuntimeExports.jsxs("div",{className:"glass rounded-xl p-4",children:[jsxRuntimeExports.jsxs("p",{className:"text-3xl font-bold text-violet-400",children:[o,"%"]}),jsxRuntimeExports.jsx("p",{className:"text-sm text-slate-500",children:"Accuracy"})]})]}),jsxRuntimeExports.jsxs("button",{onClick:M,className:"px-8 py-4 bg-gradient-to-r from-violet-500 to-fuchsia-500 hover:from-violet-400 hover:to-fuchsia-400 text-white font-semibold rounded-xl transition-all flex items-center justify-center gap-2 mx-auto",children:[jsxRuntimeExports.jsx(RotateCcw,{className:"w-5 h-5"}),"Study More Cards"]})]})}function QuizView({selectedChapter:_}){const[u,M]=reactExports.useState([]),[o,E]=reactExports.useState(0),[O,D]=reactExports.useState(null),[B,F]=reactExports.useState(!1),[d,l]=reactExports.useState(!0),[h,b]=reactExports.useState(!0),[y,f]=reactExports.useState(!1),[A,j]=reactExports.useState([]),[x,U]=reactExports.useState(Date.now()),Z=reactExports.useCallback(async()=>{b(!0);try{let gt;_?gt=await db.questions.where("chapterId").equals(_.id).toArray():gt=await db.questions.limit(20).toArray(),gt=gt.sort(()=>Math.random()-.5).slice(0,10),M(gt),E(0),D(null),F(!1),f(gt.length===0),j([]),U(Date.now())}catch(gt){console.error("Error loading questions:",gt)}finally{b(!1)}},[_]);reactExports.useEffect(()=>{Z()},[Z]);const V=gt=>{B||D(gt)},T=async()=>{if(O===null)return;const gt=u[o],kt=O===gt.correctAnswer;j(At=>[...At,{questionId:gt.id,correct:kt,selected:O}]),F(!0)},z=()=>{o<u.length-1?(E(gt=>gt+1),D(null),F(!1)):$()},$=async()=>{const gt=A.filter(Ft=>Ft.correct).length,kt=Math.floor((Date.now()-x)/1e3),At={id:crypto.randomUUID(),date:new Date,chapterId:_?.id||"mixed",score:Math.round(gt/u.length*100),totalQuestions:u.length,correctAnswers:gt,timeSpent:kt,answers:A.map(Ft=>({questionId:Ft.questionId,selectedAnswer:Ft.selected,correct:Ft.correct,timeSpent:Math.floor(kt/u.length)})),weakAreas:[],conceptMastery:[]};await db.quizResults.add(At),f(!0)},rt=()=>{Z(),f(!1)};if(h)return jsxRuntimeExports.jsx("div",{className:"flex items-center justify-center h-64",children:jsxRuntimeExports.jsxs("div",{className:"glass rounded-2xl p-8 text-center",children:[jsxRuntimeExports.jsx(Brain,{className:"w-12 h-12 mx-auto mb-3 text-violet-400 animate-pulse"}),jsxRuntimeExports.jsx("p",{className:"text-slate-400",children:"Loading questions..."})]})});if(y){const gt=A.filter(kt=>kt.correct).length;return jsxRuntimeExports.jsx(QuizComplete,{score:Math.round(gt/u.length*100),correct:gt,total:u.length,timeSpent:Math.floor((Date.now()-x)/1e3),onRestart:rt})}if(u.length===0)return jsxRuntimeExports.jsxs("div",{className:"glass rounded-2xl p-8 text-center",children:[jsxRuntimeExports.jsx(Brain,{className:"w-16 h-16 mx-auto mb-4 text-slate-500"}),jsxRuntimeExports.jsx("h3",{className:"text-xl font-semibold text-white mb-2",children:"No Questions Yet"}),jsxRuntimeExports.jsx("p",{className:"text-slate-400",children:"Upload a PDF to generate practice questions."})]});const et=u[o],yt=(o+1)/u.length*100;return jsxRuntimeExports.jsxs("div",{className:"space-y-6",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h2",{className:"text-xl font-bold text-white",children:"Practice Quiz"}),jsxRuntimeExports.jsxs("p",{className:"text-sm text-slate-400",children:["Question ",o+1," of ",u.length]})]}),jsxRuntimeExports.jsxs("button",{onClick:()=>l(!d),className:`flex items-center gap-2 px-4 py-2 rounded-xl transition-all ${d?"bg-emerald-500/20 text-emerald-400 border border-emerald-500/30":"glass text-slate-400"}`,children:[jsxRuntimeExports.jsx(Sparkles,{className:"w-4 h-4"}),d?"ELI5 Mode":"Standard"]})]}),jsxRuntimeExports.jsx("div",{className:"glass rounded-full h-2 overflow-hidden",children:jsxRuntimeExports.jsx("div",{className:"h-full bg-gradient-to-r from-violet-500 to-fuchsia-500 transition-all duration-300",style:{width:`${yt}%`}})}),jsxRuntimeExports.jsxs("div",{className:"glass rounded-2xl p-6 sm:p-8",children:[jsxRuntimeExports.jsxs("div",{className:"mb-6",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[jsxRuntimeExports.jsx("span",{className:`px-3 py-1 text-xs rounded-full ${et.difficulty==="easy"?"bg-emerald-500/20 text-emerald-400":et.difficulty==="medium"?"bg-yellow-500/20 text-yellow-400":"bg-red-500/20 text-red-400"}`,children:et.difficulty}),jsxRuntimeExports.jsx("span",{className:"px-3 py-1 text-xs bg-white/5 rounded-full text-slate-400",children:et.topic})]}),jsxRuntimeExports.jsx("h3",{className:"text-xl sm:text-2xl font-semibold text-white",children:et.question})]}),jsxRuntimeExports.jsx("div",{className:"space-y-3",children:et.options.map((gt,kt)=>{let At="glass w-full p-4 rounded-xl text-left transition-all flex items-center gap-3 ";return B?kt===et.correctAnswer?At+="bg-emerald-500/20 border-emerald-500/50 text-emerald-100":kt===O?At+="bg-red-500/20 border-red-500/50 text-red-100":At+="opacity-50":O===kt?At+="bg-violet-500/20 border-violet-500/50 text-violet-100 ring-2 ring-violet-500":At+="hover:bg-white/5 text-slate-200",jsxRuntimeExports.jsxs("button",{onClick:()=>V(kt),disabled:B,className:At,children:[jsxRuntimeExports.jsx("span",{className:`w-8 h-8 rounded-lg flex items-center justify-center flex-shrink-0 text-sm font-semibold ${B?kt===et.correctAnswer?"bg-emerald-500 text-white":kt===O?"bg-red-500 text-white":"bg-white/10 text-slate-400":O===kt?"bg-violet-500 text-white":"bg-white/10 text-slate-400"}`,children:String.fromCharCode(65+kt)}),jsxRuntimeExports.jsx("span",{children:gt}),B&&kt===et.correctAnswer&&jsxRuntimeExports.jsx(CircleCheckBig,{className:"w-5 h-5 text-emerald-400 ml-auto"}),B&&kt===O&&kt!==et.correctAnswer&&jsxRuntimeExports.jsx(CircleX,{className:"w-5 h-5 text-red-400 ml-auto"})]},kt)})}),B&&jsxRuntimeExports.jsx("div",{className:"mt-6 space-y-4",children:jsxRuntimeExports.jsxs("div",{className:`rounded-xl p-5 ${O===et.correctAnswer?"bg-emerald-500/10 border border-emerald-500/30":"bg-yellow-500/10 border border-yellow-500/30"}`,children:[jsxRuntimeExports.jsx("div",{className:"flex items-center gap-2 mb-3",children:O===et.correctAnswer?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(CircleCheckBig,{className:"w-5 h-5 text-emerald-400"}),jsxRuntimeExports.jsx("span",{className:"text-emerald-400 font-medium",children:"Correct! "})]}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Lightbulb,{className:"w-5 h-5 text-yellow-400"}),jsxRuntimeExports.jsx("span",{className:"text-yellow-400 font-medium",children:"Learning Moment"})]})}),d&&et.eli5Explanation?jsxRuntimeExports.jsxs("div",{className:"space-y-3",children:[jsxRuntimeExports.jsx("p",{className:"text-emerald-100",children:et.eli5Explanation}),jsxRuntimeExports.jsxs("div",{className:"glass rounded-lg p-4",children:[jsxRuntimeExports.jsx("p",{className:"text-sm text-violet-300 font-medium mb-1",children:" Why this is correct:"}),jsxRuntimeExports.jsx("p",{className:"text-slate-300 text-sm",children:et.whyCorrect||et.explanation})]})]}):jsxRuntimeExports.jsx("p",{className:"text-slate-300",children:et.explanation})]})}),jsxRuntimeExports.jsx("div",{className:"mt-6",children:B?jsxRuntimeExports.jsxs("button",{onClick:z,className:"w-full py-4 bg-gradient-to-r from-violet-500 to-fuchsia-500 hover:from-violet-400 hover:to-fuchsia-400 text-white font-semibold rounded-xl transition-all flex items-center justify-center gap-2",children:[o<u.length-1?"Next Question":"Finish Quiz",jsxRuntimeExports.jsx(ArrowRight,{className:"w-5 h-5"})]}):jsxRuntimeExports.jsx("button",{onClick:T,disabled:O===null,className:"w-full py-4 bg-gradient-to-r from-violet-500 to-fuchsia-500 hover:from-violet-400 hover:to-fuchsia-400 disabled:opacity-50 disabled:cursor-not-allowed text-white font-semibold rounded-xl transition-all flex items-center justify-center gap-2",children:"Submit Answer"})})]})]})}function QuizComplete({score:_,correct:u,total:M,timeSpent:o,onRestart:E}){const D=_>=90?{text:"Outstanding! ",color:"text-emerald-400",bg:"from-emerald-500 to-teal-500"}:_>=70?{text:"Great job! ",color:"text-violet-400",bg:"from-violet-500 to-fuchsia-500"}:_>=50?{text:"Good effort! ",color:"text-yellow-400",bg:"from-yellow-500 to-orange-500"}:{text:"Keep practicing! ",color:"text-orange-400",bg:"from-orange-500 to-red-500"},B=Math.floor(o/60),F=o%60;return jsxRuntimeExports.jsxs("div",{className:"glass rounded-2xl p-8 text-center",children:[jsxRuntimeExports.jsx("div",{className:`w-24 h-24 mx-auto mb-6 rounded-2xl bg-gradient-to-br ${D.bg} flex items-center justify-center shadow-lg`,children:jsxRuntimeExports.jsx(Trophy,{className:"w-12 h-12 text-white"})}),jsxRuntimeExports.jsx("h3",{className:`text-2xl font-bold mb-2 ${D.color}`,children:D.text}),jsxRuntimeExports.jsx("p",{className:"text-slate-400 mb-6",children:"Quiz Complete!"}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-8",children:[jsxRuntimeExports.jsxs("div",{className:"glass rounded-xl p-4",children:[jsxRuntimeExports.jsxs("p",{className:"text-3xl font-bold text-violet-400",children:[_,"%"]}),jsxRuntimeExports.jsx("p",{className:"text-sm text-slate-500",children:"Score"})]}),jsxRuntimeExports.jsxs("div",{className:"glass rounded-xl p-4",children:[jsxRuntimeExports.jsx("p",{className:"text-3xl font-bold text-emerald-400",children:u}),jsxRuntimeExports.jsx("p",{className:"text-sm text-slate-500",children:"Correct"})]}),jsxRuntimeExports.jsxs("div",{className:"glass rounded-xl p-4",children:[jsxRuntimeExports.jsx("p",{className:"text-3xl font-bold text-red-400",children:M-u}),jsxRuntimeExports.jsx("p",{className:"text-sm text-slate-500",children:"Incorrect"})]}),jsxRuntimeExports.jsxs("div",{className:"glass rounded-xl p-4",children:[jsxRuntimeExports.jsxs("p",{className:"text-3xl font-bold text-amber-400",children:[B,":",F.toString().padStart(2,"0")]}),jsxRuntimeExports.jsx("p",{className:"text-sm text-slate-500",children:"Time"})]})]}),jsxRuntimeExports.jsxs("button",{onClick:E,className:"px-8 py-4 bg-gradient-to-r from-violet-500 to-fuchsia-500 hover:from-violet-400 hover:to-fuchsia-400 text-white font-semibold rounded-xl transition-all flex items-center justify-center gap-2 mx-auto",children:[jsxRuntimeExports.jsx(RotateCcw,{className:"w-5 h-5"}),"Take Another Quiz"]})]})}function StudySchedule(){const[_,u]=reactExports.useState(null),[M,o]=reactExports.useState(""),[E,O]=reactExports.useState(!1);reactExports.useEffect(()=>{D()},[]);const D=async()=>{const y=await db.studySchedules.toArray();y.length>0&&u(y[0])},B=async()=>{if(!M)return;O(!0);const y=new Date(M),f=new Date,A=Math.ceil((y.getTime()-f.getTime())/(1e3*60*60*24)),j=[],x=await db.chapters.toArray(),U=await db.concepts.toArray(),Z=Math.ceil(x.length/Math.max(A,1));for(let T=0;T<A;T++){const z=new Date(f);z.setDate(z.getDate()+T);const $=T*Z,rt=x.slice($,$+Z),et=U.filter(yt=>rt.some(gt=>gt.concepts?.some(kt=>kt.id===yt.id)));j.push({date:z,chapters:rt.map(yt=>yt.id),concepts:et.map(yt=>yt.id),flashcards:10,quizQuestions:5,completed:!1,eli5Mode:!0})}const V={id:crypto.randomUUID(),examDate:y,dailyGoals:j,createdAt:new Date,focusAreas:[],weakConcepts:[]};await db.studySchedules.add(V),u(V),O(!1)},F=async y=>{if(!_)return;const f=[..._.dailyGoals];f[y].completed=!f[y].completed,await db.studySchedules.update(_.id,{dailyGoals:f}),u({..._,dailyGoals:f})};if(!_)return jsxRuntimeExports.jsx("div",{className:"space-y-6",children:jsxRuntimeExports.jsxs("div",{className:"glass rounded-2xl p-8 text-center",children:[jsxRuntimeExports.jsx("div",{className:"w-16 h-16 mx-auto mb-4 rounded-2xl bg-gradient-to-br from-violet-500 to-fuchsia-500 flex items-center justify-center",children:jsxRuntimeExports.jsx(Calendar,{className:"w-8 h-8 text-white"})}),jsxRuntimeExports.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"Create Study Plan"}),jsxRuntimeExports.jsx("p",{className:"text-slate-400 mb-6",children:"Set your exam date and we'll create a personalized study schedule"}),jsxRuntimeExports.jsxs("div",{className:"max-w-sm mx-auto",children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2 text-left",children:"Exam Date"}),jsxRuntimeExports.jsx("input",{type:"date",value:M,onChange:y=>o(y.target.value),className:"w-full px-4 py-3 glass border border-white/10 rounded-xl text-white mb-4"}),jsxRuntimeExports.jsx("button",{onClick:B,disabled:!M||E,className:"w-full py-3 bg-gradient-to-r from-violet-500 to-fuchsia-500 hover:from-violet-400 hover:to-fuchsia-400 disabled:opacity-50 text-white font-medium rounded-xl transition-all flex items-center justify-center gap-2",children:E?jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:"Creating..."}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Sparkles,{className:"w-4 h-4"})," Generate Schedule"]})})]})]})});const d=new Date,l=Math.ceil((new Date(_.examDate).getTime()-d.getTime())/(1e3*60*60*24)),h=_.dailyGoals.filter(y=>y.completed).length,b=h/_.dailyGoals.length*100;return jsxRuntimeExports.jsxs("div",{className:"space-y-6",children:[jsxRuntimeExports.jsxs("div",{className:"glass rounded-2xl p-6",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-4",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h2",{className:"text-2xl font-bold text-white",children:"Study Schedule"}),jsxRuntimeExports.jsxs("p",{className:"text-slate-400",children:["Exam in ",l," days  ",h,"/",_.dailyGoals.length," days completed"]})]}),jsxRuntimeExports.jsxs("div",{className:"glass rounded-xl px-4 py-2",children:[jsxRuntimeExports.jsxs("span",{className:"text-2xl font-bold text-violet-400",children:[Math.round(b),"%"]}),jsxRuntimeExports.jsx("span",{className:"text-slate-500 text-sm ml-2",children:"complete"})]})]}),jsxRuntimeExports.jsx("div",{className:"mt-4 glass rounded-full h-2 overflow-hidden",children:jsxRuntimeExports.jsx("div",{className:"h-full bg-gradient-to-r from-violet-500 to-fuchsia-500 transition-all",style:{width:`${b}%`}})})]}),jsxRuntimeExports.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:_.dailyGoals.slice(0,14).map((y,f)=>{const A=new Date(y.date).toDateString()===d.toDateString(),j=new Date(y.date)<d;return jsxRuntimeExports.jsxs("div",{className:`glass rounded-xl p-4 transition-all ${y.completed?"opacity-50":""} ${A?"ring-2 ring-violet-500/50":""}`,children:[jsxRuntimeExports.jsxs("div",{className:"flex items-start justify-between mb-3",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{className:`font-semibold ${A?"text-violet-300":"text-white"}`,children:A?"Today":new Date(y.date).toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric"})}),j&&!y.completed&&jsxRuntimeExports.jsxs("span",{className:"text-xs text-red-400 flex items-center gap-1",children:[jsxRuntimeExports.jsx(CircleAlert,{className:"w-3 h-3"})," Missed"]})]}),jsxRuntimeExports.jsx("button",{onClick:()=>F(f),className:`w-6 h-6 rounded-full border-2 flex items-center justify-center transition-all ${y.completed?"bg-emerald-500 border-emerald-500":"border-slate-500 hover:border-violet-500"}`,children:y.completed&&jsxRuntimeExports.jsx(CircleCheckBig,{className:"w-4 h-4 text-white"})})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-1 text-sm text-slate-400",children:[jsxRuntimeExports.jsxs("p",{children:[y.chapters.length," chapters"]}),jsxRuntimeExports.jsxs("p",{children:[y.flashcards," flashcards"]}),jsxRuntimeExports.jsxs("p",{children:[y.quizQuestions," quiz questions"]})]})]},f)})})]})}function ProgressDashboard({bookId:_}){const[u,M]=reactExports.useState({totalFlashcards:0,dueFlashcards:0,totalQuestions:0,averageScore:0,studyStreak:0,conceptsMastered:0,totalConcepts:0}),[o,E]=reactExports.useState([]),[O,D]=reactExports.useState(!0);reactExports.useEffect(()=>{B()},[_]);const B=async()=>{D(!0);const[F,d]=await Promise.all([getStudyStats(_),db.quizResults.orderBy("date").reverse().limit(10).toArray()]);M(F),E(d),D(!1)};return O?jsxRuntimeExports.jsx("div",{className:"flex items-center justify-center h-64",children:jsxRuntimeExports.jsx("div",{className:"glass rounded-2xl p-8",children:jsxRuntimeExports.jsx(ChartColumn,{className:"w-8 h-8 text-violet-400 animate-pulse"})})}):jsxRuntimeExports.jsxs("div",{className:"space-y-6",children:[jsxRuntimeExports.jsx("div",{className:"glass rounded-2xl p-6",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-4",children:[jsxRuntimeExports.jsx("div",{className:"w-14 h-14 rounded-2xl bg-gradient-to-br from-violet-500 to-fuchsia-500 flex items-center justify-center",children:jsxRuntimeExports.jsx(Target,{className:"w-7 h-7 text-white"})}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h2",{className:"text-2xl font-bold text-white",children:"Your Progress"}),jsxRuntimeExports.jsx("p",{className:"text-slate-400",children:"Track your learning journey"})]})]})}),jsxRuntimeExports.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[{label:"Flashcards",value:u.totalFlashcards,icon:Brain,color:"violet"},{label:"Due Today",value:u.dueFlashcards,icon:Clock,color:"amber"},{label:"Quiz Avg",value:`${u.averageScore}%`,icon:TrendingUp,color:"emerald"},{label:"Streak",value:`${u.studyStreak} days`,icon:Zap,color:"fuchsia"}].map(F=>jsxRuntimeExports.jsxs("div",{className:"glass rounded-xl p-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[jsxRuntimeExports.jsx(F.icon,{className:`w-4 h-4 text-${F.color}-400`}),jsxRuntimeExports.jsx("span",{className:"text-slate-500 text-sm",children:F.label})]}),jsxRuntimeExports.jsx("p",{className:`text-2xl font-bold text-${F.color}-400`,children:F.value})]},F.label))}),jsxRuntimeExports.jsxs("div",{className:"glass rounded-2xl p-6",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mb-4",children:[jsxRuntimeExports.jsx("h3",{className:"text-lg font-semibold text-white",children:"Concept Mastery"}),jsxRuntimeExports.jsxs("span",{className:"text-sm text-slate-400",children:[u.conceptsMastered,"/",u.totalConcepts," mastered"]})]}),jsxRuntimeExports.jsx("div",{className:"glass rounded-full h-3 overflow-hidden mb-4",children:jsxRuntimeExports.jsx("div",{className:"h-full bg-gradient-to-r from-violet-500 to-fuchsia-500 transition-all",style:{width:`${u.totalConcepts>0?u.conceptsMastered/u.totalConcepts*100:0}%`}})}),u.conceptsMastered===0&&u.totalConcepts===0?jsxRuntimeExports.jsxs("div",{className:"text-center py-8",children:[jsxRuntimeExports.jsx(BookOpen,{className:"w-12 h-12 mx-auto mb-3 text-slate-500"}),jsxRuntimeExports.jsx("p",{className:"text-slate-400",children:"Upload study material to track concept mastery"})]}):jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[jsxRuntimeExports.jsxs("div",{className:"text-center",children:[jsxRuntimeExports.jsx("p",{className:"text-2xl font-bold text-emerald-400",children:u.conceptsMastered}),jsxRuntimeExports.jsx("p",{className:"text-xs text-slate-500",children:"Mastered"})]}),jsxRuntimeExports.jsxs("div",{className:"text-center",children:[jsxRuntimeExports.jsx("p",{className:"text-2xl font-bold text-yellow-400",children:Math.max(0,u.totalConcepts-u.conceptsMastered)}),jsxRuntimeExports.jsx("p",{className:"text-xs text-slate-500",children:"Learning"})]}),jsxRuntimeExports.jsxs("div",{className:"text-center",children:[jsxRuntimeExports.jsx("p",{className:"text-2xl font-bold text-violet-400",children:u.totalQuestions}),jsxRuntimeExports.jsx("p",{className:"text-xs text-slate-500",children:"Questions"})]})]})]}),jsxRuntimeExports.jsxs("div",{className:"glass rounded-2xl p-6",children:[jsxRuntimeExports.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Recent Quiz Results"}),o.length===0?jsxRuntimeExports.jsxs("div",{className:"text-center py-8",children:[jsxRuntimeExports.jsx(CircleCheckBig,{className:"w-12 h-12 mx-auto mb-3 text-slate-500"}),jsxRuntimeExports.jsx("p",{className:"text-slate-400",children:"No quizzes taken yet. Start practicing!"})]}):jsxRuntimeExports.jsx("div",{className:"space-y-3",children:o.map(F=>jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between p-4 glass rounded-xl",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsx("div",{className:`w-10 h-10 rounded-xl flex items-center justify-center ${F.score>=80?"bg-emerald-500/20":F.score>=60?"bg-yellow-500/20":"bg-red-500/20"}`,children:jsxRuntimeExports.jsx(CircleCheckBig,{className:`w-5 h-5 ${F.score>=80?"text-emerald-400":F.score>=60?"text-yellow-400":"text-red-400"}`})}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("p",{className:"font-medium text-white",children:["Quiz on ",new Date(F.date).toLocaleDateString()]}),jsxRuntimeExports.jsxs("p",{className:"text-sm text-slate-400",children:[F.correctAnswers,"/",F.totalQuestions," correct  ",Math.floor(F.timeSpent/60),"m ",F.timeSpent%60,"s"]})]})]}),jsxRuntimeExports.jsxs("span",{className:`text-lg font-bold ${F.score>=80?"text-emerald-400":F.score>=60?"text-yellow-400":"text-red-400"}`,children:[F.score,"%"]})]},F.id))})]})]})}function APIKeySetup({onComplete:_,onSkip:u}){const[M,o]=reactExports.useState(""),[E,O]=reactExports.useState(!1),[D,B]=reactExports.useState(!1),[F,d]=reactExports.useState(null),l=async()=>{if(!M.trim()){d("Please enter an API key");return}O(!0),d(null);try{if((await fetch("https://api.tavily.com/search",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({api_key:M.trim(),query:"test",max_results:1})})).status===401){d("Invalid API key. Please check and try again."),O(!1);return}setApiKey(M.trim()),_()}catch{setApiKey(M.trim()),_()}finally{O(!1)}},h=()=>{u&&u()};return jsxRuntimeExports.jsx("div",{className:"min-h-screen flex items-center justify-center p-4",children:jsxRuntimeExports.jsxs("div",{className:"w-full max-w-md",children:[jsxRuntimeExports.jsxs("div",{className:"glass rounded-2xl p-8",children:[jsxRuntimeExports.jsxs("div",{className:"text-center mb-8",children:[jsxRuntimeExports.jsx("div",{className:"w-16 h-16 mx-auto mb-4 rounded-2xl bg-gradient-to-br from-violet-500 to-fuchsia-500 flex items-center justify-center shadow-lg shadow-violet-500/25",children:jsxRuntimeExports.jsx(Key,{className:"w-8 h-8 text-white"})}),jsxRuntimeExports.jsx("h1",{className:"text-2xl font-bold text-white mb-2",children:"API Key Setup"}),jsxRuntimeExports.jsx("p",{className:"text-slate-400",children:"Connect to Tavily AI for enhanced study features"})]}),jsxRuntimeExports.jsx("div",{className:"space-y-3 mb-6",children:["Deep AI content analysis with ELI5 explanations","Smart flashcard generation with analogies","Market analysis and comps reports","Scenario-based practice questions"].map((b,y)=>jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3 text-slate-300",children:[jsxRuntimeExports.jsx(CircleCheckBig,{className:"w-5 h-5 text-emerald-400 flex-shrink-0"}),jsxRuntimeExports.jsx("span",{className:"text-sm",children:b})]},y))}),jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Tavily API Key"}),jsxRuntimeExports.jsxs("div",{className:"relative",children:[jsxRuntimeExports.jsx("input",{type:D?"text":"password",value:M,onChange:b=>o(b.target.value),placeholder:"tvly-...",className:"w-full px-4 py-3 glass border border-white/10 rounded-xl text-white placeholder-slate-500 focus:ring-2 focus:ring-violet-500/50 pr-24"}),jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>B(!D),className:"absolute right-3 top-1/2 -translate-y-1/2 text-slate-400 hover:text-white text-sm",children:D?"Hide":"Show"})]}),jsxRuntimeExports.jsx("p",{className:"text-xs text-slate-500 mt-2",children:"Your key is stored only in your browser's localStorage."})]}),F&&jsxRuntimeExports.jsxs("div",{className:"p-3 bg-red-500/10 border border-red-500/30 rounded-xl flex items-center gap-2 text-red-300",children:[jsxRuntimeExports.jsx(TriangleAlert,{className:"w-4 h-4"}),jsxRuntimeExports.jsx("span",{className:"text-sm",children:F})]}),jsxRuntimeExports.jsx("button",{onClick:l,disabled:E||!M.trim(),className:"w-full py-3 bg-gradient-to-r from-violet-500 to-fuchsia-500 hover:from-violet-400 hover:to-fuchsia-400 disabled:opacity-50 text-white font-medium rounded-xl transition-all flex items-center justify-center gap-2",children:E?jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:"Verifying..."}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Sparkles,{className:"w-4 h-4"})," Connect"]})}),u&&jsxRuntimeExports.jsx("button",{onClick:h,className:"w-full py-3 glass hover:bg-white/5 text-slate-400 font-medium rounded-xl transition-all",children:"Skip for now"})]}),jsxRuntimeExports.jsxs("div",{className:"mt-6 pt-6 border-t border-white/10 text-center",children:[jsxRuntimeExports.jsx("p",{className:"text-sm text-slate-400 mb-2",children:"Don't have an API key?"}),jsxRuntimeExports.jsxs("a",{href:"https://tavily.com",target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-1 text-violet-400 hover:text-violet-300 transition-colors",children:["Get one free at Tavily",jsxRuntimeExports.jsx(ExternalLink,{className:"w-4 h-4"})]})]})]}),jsxRuntimeExports.jsxs("div",{className:"mt-4 flex items-start gap-2 text-slate-500 text-xs",children:[jsxRuntimeExports.jsx(Shield,{className:"w-4 h-4 flex-shrink-0 mt-0.5"}),jsxRuntimeExports.jsx("p",{children:"Your API key never leaves your browser. It's stored securely in localStorage and used only for direct API calls to Tavily."})]})]})})}function App(){const[_,u]=reactExports.useState("books"),[M,o]=reactExports.useState([]),[E,O]=reactExports.useState(null),[D,B]=reactExports.useState(null),[F,d]=reactExports.useState(null),[l,h]=reactExports.useState([]),[b,y]=reactExports.useState(!1),[f,A]=reactExports.useState(!1),[j,x]=reactExports.useState(!1);reactExports.useEffect(()=>{U(),"serviceWorker"in navigator&&navigator.serviceWorker.register("/sw.js").catch(console.error);const At=setTimeout(()=>{A(!hasApiKey())},500);return()=>clearTimeout(At)},[]);const U=async()=>{x(!0);const At=await db.books.toArray();o(At),x(!1)},Z=async At=>{x(!0);const Ft=await db.chapters.where("bookId").equals(At).sortBy("number");h(Ft),x(!1)},V=async At=>{O(At),await Z(At.id),u("books"),B(null)},T=At=>{B(At),u("chapter")},z=async()=>{await U();const At=await db.books.orderBy("uploadedAt").last();At&&V(At)},$=()=>A(!1),rt=()=>A(!1),et=()=>{A(!0),y(!1)},yt=At=>{d(At),u("flashcards")},gt=()=>{switch(_){case"books":return E?jsxRuntimeExports.jsx(ChapterList,{book:E,chapters:l,onChapterSelect:T,onChaptersUpdated:Z}):jsxRuntimeExports.jsx(PDFUpload,{onUploadComplete:z});case"chapter":return D?jsxRuntimeExports.jsx(ChapterDetail,{chapter:D,onBack:()=>u("books"),onStudyConcept:yt,onTakeQuiz:()=>u("quiz")}):jsxRuntimeExports.jsx(PDFUpload,{onUploadComplete:z});case"flashcards":return jsxRuntimeExports.jsx(FlashcardView,{initialConcept:F});case"quiz":return jsxRuntimeExports.jsx(QuizView,{chapters:l,selectedChapter:D});case"schedule":return jsxRuntimeExports.jsx(StudySchedule,{});case"progress":return jsxRuntimeExports.jsx(ProgressDashboard,{bookId:E?.id});case"market-analysis":return jsxRuntimeExports.jsx(MarketAnalysisView,{});case"comps":return jsxRuntimeExports.jsx(CompsReportView,{});default:return jsxRuntimeExports.jsx(PDFUpload,{onUploadComplete:z})}};if(f)return jsxRuntimeExports.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-950 via-slate-900 to-slate-950",children:jsxRuntimeExports.jsx(APIKeySetup,{onComplete:$,onSkip:rt})});const kt=[{view:"books",label:"Study Material",icon:BookOpen},{view:"flashcards",label:"Flashcards",icon:Brain},{view:"quiz",label:"Practice Quiz",icon:FileSearch},{view:"schedule",label:"Study Plan",icon:Calendar},{view:"progress",label:"Progress",icon:ChartColumn}];return jsxRuntimeExports.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-950 via-slate-900 to-slate-950 text-slate-100",children:[jsxRuntimeExports.jsx("header",{className:"sticky top-0 z-50 glass border-b border-white/10",children:jsxRuntimeExports.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between h-16",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-4",children:[jsxRuntimeExports.jsx("button",{onClick:()=>y(!b),className:"lg:hidden p-2 rounded-xl glass hover:bg-white/10 transition-colors",children:b?jsxRuntimeExports.jsx(X,{className:"w-5 h-5"}):jsxRuntimeExports.jsx(Menu,{className:"w-5 h-5"})}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsx("div",{className:"w-10 h-10 rounded-xl bg-gradient-to-br from-violet-500 to-fuchsia-500 flex items-center justify-center shadow-lg shadow-violet-500/25",children:jsxRuntimeExports.jsx(Sparkles,{className:"w-5 h-5 text-white"})}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h1",{className:"text-lg font-bold bg-gradient-to-r from-white to-slate-400 bg-clip-text text-transparent",children:"RE Study AI"}),jsxRuntimeExports.jsx("p",{className:"text-xs text-slate-400",children:"Deep Learning Assistant"})]})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[M.length>0&&jsxRuntimeExports.jsxs("select",{value:E?.id||"",onChange:At=>{const Ft=M.find(Kt=>Kt.id===At.target.value);Ft&&V(Ft)},className:"hidden sm:block text-sm glass border border-white/10 rounded-xl px-4 py-2 text-slate-200 focus:ring-2 focus:ring-violet-500/50 focus:border-transparent min-w-[200px]",children:[jsxRuntimeExports.jsx("option",{value:"",className:"bg-slate-900",children:"Select material..."}),M.map(At=>jsxRuntimeExports.jsx("option",{value:At.id,className:"bg-slate-900",children:At.title},At.id))]}),jsxRuntimeExports.jsx("button",{onClick:et,className:`p-2 rounded-xl glass hover:bg-white/10 transition-colors ${hasApiKey()?"text-emerald-400":"text-amber-400"}`,title:"API Key Settings",children:jsxRuntimeExports.jsx(Key,{className:"w-5 h-5"})})]})]})})}),jsxRuntimeExports.jsxs("div",{className:"flex",children:[jsxRuntimeExports.jsxs("aside",{className:`fixed inset-y-0 left-0 z-40 w-72 glass-dark border-r border-white/10 transform transition-transform duration-300 ease-out lg:translate-x-0 lg:static lg:h-[calc(100vh-4rem)] ${b?"translate-x-0":"-translate-x-full"}`,children:[jsxRuntimeExports.jsxs("nav",{className:"p-4 space-y-2",children:[kt.map(At=>{const Ft=At.icon,Kt=_===At.view||At.view==="books"&&_==="chapter";return jsxRuntimeExports.jsxs("button",{onClick:()=>{u(At.view),y(!1)},className:`w-full flex items-center gap-3 px-4 py-3 rounded-xl text-sm font-medium transition-all duration-200 ${Kt?"bg-gradient-to-r from-violet-500/20 to-fuchsia-500/20 text-violet-300 border border-violet-500/30":"text-slate-400 hover:bg-white/5 hover:text-slate-200"}`,children:[jsxRuntimeExports.jsx(Ft,{className:`w-5 h-5 ${Kt?"text-violet-400":""}`}),At.label]},At.view)}),jsxRuntimeExports.jsxs("div",{className:"pt-4 mt-4 border-t border-white/10",children:[jsxRuntimeExports.jsx("p",{className:"px-4 text-xs font-semibold text-slate-500 uppercase tracking-wider mb-3",children:"AI Tools"}),jsxRuntimeExports.jsxs("button",{onClick:()=>{u("market-analysis"),y(!1)},className:`w-full flex items-center gap-3 px-4 py-3 rounded-xl text-sm font-medium transition-all duration-200 ${_==="market-analysis"?"bg-gradient-to-r from-emerald-500/20 to-teal-500/20 text-emerald-300 border border-emerald-500/30":"text-slate-400 hover:bg-white/5 hover:text-slate-200"}`,children:[jsxRuntimeExports.jsx(TrendingUp,{className:"w-5 h-5"}),"Market Analysis"]}),jsxRuntimeExports.jsxs("button",{onClick:()=>{u("comps"),y(!1)},className:`w-full flex items-center gap-3 px-4 py-3 rounded-xl text-sm font-medium transition-all duration-200 ${_==="comps"?"bg-gradient-to-r from-emerald-500/20 to-teal-500/20 text-emerald-300 border border-emerald-500/30":"text-slate-400 hover:bg-white/5 hover:text-slate-200"}`,children:[jsxRuntimeExports.jsx(House,{className:"w-5 h-5"}),"Comps Report"]})]})]}),jsxRuntimeExports.jsx("div",{className:"absolute bottom-0 left-0 right-0 p-4 border-t border-white/10",children:jsxRuntimeExports.jsxs("div",{className:"glass rounded-xl p-3 space-y-2",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 text-xs text-slate-400",children:[jsxRuntimeExports.jsx("span",{className:`w-2 h-2 rounded-full ${hasApiKey()?"bg-emerald-400 animate-pulse":"bg-amber-400"}`}),hasApiKey()?"AI Connected":"Offline Mode"]}),jsxRuntimeExports.jsx("p",{className:"text-xs text-slate-500",children:"Real Estate Study Assistant v2.0"})]})})]}),b&&jsxRuntimeExports.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-30 lg:hidden",onClick:()=>y(!1)}),jsxRuntimeExports.jsx("main",{className:"flex-1 min-h-[calc(100vh-4rem)] p-4 sm:p-6 lg:p-8",children:jsxRuntimeExports.jsx("div",{className:"max-w-6xl mx-auto",children:j?jsxRuntimeExports.jsx("div",{className:"flex items-center justify-center h-64",children:jsxRuntimeExports.jsxs("div",{className:"glass rounded-2xl p-8 flex flex-col items-center gap-4",children:[jsxRuntimeExports.jsx("div",{className:"w-12 h-12 border-4 border-violet-500/30 border-t-violet-500 rounded-full animate-spin"}),jsxRuntimeExports.jsx("p",{className:"text-slate-400",children:"Loading your study material..."})]})}):gt()})})]})]})}function MarketAnalysisView(){const[_,u]=reactExports.useState(""),[M,o]=reactExports.useState(""),[E,O]=reactExports.useState(!1),[D,B]=reactExports.useState(null),[F,d]=reactExports.useState(null),l=async()=>{if(_.trim()){O(!0),d(null);try{const{getMarketAnalysis:h}=await __vitePreload(async()=>{const{getMarketAnalysis:y}=await Promise.resolve().then(()=>ai);return{getMarketAnalysis:y}},void 0),b=await h(_,M);B(b)}catch(h){d(h instanceof Error?h.message:"Failed to analyze market")}finally{O(!1)}}};return jsxRuntimeExports.jsxs("div",{className:"space-y-6",children:[jsxRuntimeExports.jsxs("div",{className:"glass rounded-2xl p-6",children:[jsxRuntimeExports.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"Market Analysis"}),jsxRuntimeExports.jsx("p",{className:"text-slate-400 mb-6",children:"Get AI-powered market insights for any location"}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[jsxRuntimeExports.jsxs("div",{className:"md:col-span-2",children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Location"}),jsxRuntimeExports.jsx("input",{type:"text",value:_,onChange:h=>u(h.target.value),placeholder:"e.g., Austin, TX or Miami-Dade County",className:"w-full px-4 py-3 glass border border-white/10 rounded-xl text-white placeholder-slate-500 focus:ring-2 focus:ring-violet-500/50 focus:border-transparent"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Property Type"}),jsxRuntimeExports.jsxs("select",{value:M,onChange:h=>o(h.target.value),className:"w-full px-4 py-3 glass border border-white/10 rounded-xl text-white focus:ring-2 focus:ring-violet-500/50 focus:border-transparent",children:[jsxRuntimeExports.jsx("option",{value:"",className:"bg-slate-900",children:"All Types"}),jsxRuntimeExports.jsx("option",{value:"single-family",className:"bg-slate-900",children:"Single Family"}),jsxRuntimeExports.jsx("option",{value:"condo",className:"bg-slate-900",children:"Condo"}),jsxRuntimeExports.jsx("option",{value:"townhouse",className:"bg-slate-900",children:"Townhouse"}),jsxRuntimeExports.jsx("option",{value:"multi-family",className:"bg-slate-900",children:"Multi-Family"})]})]})]}),jsxRuntimeExports.jsx("button",{onClick:l,disabled:E||!_.trim(),className:"px-6 py-3 bg-gradient-to-r from-violet-500 to-fuchsia-500 hover:from-violet-400 hover:to-fuchsia-400 disabled:opacity-50 disabled:cursor-not-allowed text-white font-medium rounded-xl transition-all flex items-center gap-2 shadow-lg shadow-violet-500/25",children:E?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("div",{className:"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"})," Analyzing..."]}):"Analyze Market"}),F&&jsxRuntimeExports.jsx("div",{className:"mt-4 p-4 bg-red-500/10 border border-red-500/30 rounded-xl text-red-300",children:F})]}),D&&jsxRuntimeExports.jsxs("div",{className:"glass rounded-2xl p-6 space-y-6",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h3",{className:"text-xl font-semibold text-white mb-2",children:"Market Insights"}),jsxRuntimeExports.jsx("p",{className:"text-slate-300",children:D.summary}),D.eli5Summary&&jsxRuntimeExports.jsxs("div",{className:"mt-4 p-4 bg-emerald-500/10 border border-emerald-500/30 rounded-xl",children:[jsxRuntimeExports.jsx("p",{className:"text-sm text-emerald-400 font-medium mb-1",children:" Simple Explanation"}),jsxRuntimeExports.jsx("p",{className:"text-emerald-100",children:D.eli5Summary})]})]}),jsxRuntimeExports.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:D.marketTrends.map((h,b)=>jsxRuntimeExports.jsxs("div",{className:"glass rounded-xl p-4",children:[jsxRuntimeExports.jsx("p",{className:"text-sm text-slate-400",children:h.trend}),jsxRuntimeExports.jsx("div",{className:"flex items-center gap-2 mt-1",children:jsxRuntimeExports.jsxs("span",{className:`text-2xl font-bold ${h.direction==="up"?"text-emerald-400":h.direction==="down"?"text-red-400":"text-slate-400"}`,children:[h.direction==="up"?"":h.direction==="down"?"":"",h.percentage!==void 0?` ${h.percentage}%`:""]})}),h.explanation&&jsxRuntimeExports.jsx("p",{className:"text-xs text-slate-500 mt-2",children:h.explanation})]},b))}),D.keyInsights?.length>0&&jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h4",{className:"font-semibold text-white mb-3",children:"Key Takeaways"}),jsxRuntimeExports.jsx("ul",{className:"space-y-2",children:D.keyInsights.map((h,b)=>jsxRuntimeExports.jsxs("li",{className:"flex items-start gap-2 text-slate-300",children:[jsxRuntimeExports.jsx("span",{className:"text-violet-400 mt-1",children:""}),h]},b))})]})]})]})}function CompsReportView(){const[_,u]=reactExports.useState({address:"",city:"",state:"",zipCode:"",propertyType:"single-family",bedrooms:"",bathrooms:"",sqft:""}),[M,o]=reactExports.useState(!1),[E,O]=reactExports.useState(null),[D,B]=reactExports.useState(null),F=async d=>{d.preventDefault(),o(!0),B(null);try{const{getCompsReport:l}=await __vitePreload(async()=>{const{getCompsReport:b}=await Promise.resolve().then(()=>ai);return{getCompsReport:b}},void 0),h=await l({address:_.address,city:_.city,state:_.state,zipCode:_.zipCode,propertyType:_.propertyType,bedrooms:_.bedrooms?parseInt(_.bedrooms):void 0,bathrooms:_.bathrooms?parseFloat(_.bathrooms):void 0,sqft:_.sqft?parseInt(_.sqft):void 0});O(h)}catch(l){B(l instanceof Error?l.message:"Failed to generate comps report")}finally{o(!1)}};return jsxRuntimeExports.jsxs("div",{className:"space-y-6",children:[jsxRuntimeExports.jsxs("div",{className:"glass rounded-2xl p-6",children:[jsxRuntimeExports.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"Comparative Market Analysis"}),jsxRuntimeExports.jsx("p",{className:"text-slate-400 mb-6",children:"Generate property valuation analysis"}),jsxRuntimeExports.jsxs("form",{onSubmit:F,className:"space-y-4",children:[jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[jsxRuntimeExports.jsxs("div",{className:"md:col-span-2",children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Property Address *"}),jsxRuntimeExports.jsx("input",{type:"text",required:!0,value:_.address,onChange:d=>u({..._,address:d.target.value}),placeholder:"123 Main Street",className:"w-full px-4 py-3 glass border border-white/10 rounded-xl text-white placeholder-slate-500 focus:ring-2 focus:ring-violet-500/50"})]}),["city","state","zipCode"].map(d=>jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2 capitalize",children:d==="zipCode"?"ZIP Code":d}),jsxRuntimeExports.jsx("input",{type:"text",value:_[d],onChange:l=>u({..._,[d]:l.target.value}),className:"w-full px-4 py-3 glass border border-white/10 rounded-xl text-white focus:ring-2 focus:ring-violet-500/50"})]},d)),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Property Type"}),jsxRuntimeExports.jsx("select",{value:_.propertyType,onChange:d=>u({..._,propertyType:d.target.value}),className:"w-full px-4 py-3 glass border border-white/10 rounded-xl text-white focus:ring-2 focus:ring-violet-500/50",children:["single-family","condo","townhouse","multi-family","commercial"].map(d=>jsxRuntimeExports.jsx("option",{value:d,className:"bg-slate-900 capitalize",children:d.replace("-"," ")},d))})]}),[{key:"bedrooms",label:"Bedrooms",type:"number"},{key:"bathrooms",label:"Bathrooms",type:"number",step:"0.5"},{key:"sqft",label:"Square Feet",type:"number"}].map(({key:d,label:l,type:h,step:b})=>jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:l}),jsxRuntimeExports.jsx("input",{type:h,step:b,value:_[d],onChange:y=>u({..._,[d]:y.target.value}),className:"w-full px-4 py-3 glass border border-white/10 rounded-xl text-white focus:ring-2 focus:ring-violet-500/50"})]},d))]}),jsxRuntimeExports.jsx("button",{type:"submit",disabled:M||!_.address.trim(),className:"px-6 py-3 bg-gradient-to-r from-emerald-500 to-teal-500 hover:from-emerald-400 hover:to-teal-400 disabled:opacity-50 text-white font-medium rounded-xl transition-all flex items-center gap-2",children:M?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("div",{className:"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"})," Generating..."]}):"Generate Comps Report"})]}),D&&jsxRuntimeExports.jsx("div",{className:"mt-4 p-4 bg-red-500/10 border border-red-500/30 rounded-xl text-red-300",children:D})]}),E&&jsxRuntimeExports.jsxs("div",{className:"glass rounded-2xl p-6 space-y-6",children:[jsxRuntimeExports.jsxs("div",{className:"bg-gradient-to-r from-violet-500/20 to-fuchsia-500/20 rounded-xl p-6 border border-violet-500/30",children:[jsxRuntimeExports.jsx("h3",{className:"text-lg font-semibold text-violet-300 mb-2",children:"Subject Property"}),jsxRuntimeExports.jsx("p",{className:"text-slate-200",children:E.subjectProperty.address}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-4 mt-3",children:[jsxRuntimeExports.jsxs("span",{className:"text-3xl font-bold text-white",children:["$",E.subjectProperty.estimatedValue.toLocaleString()]}),jsxRuntimeExports.jsxs("span",{className:`px-3 py-1 rounded-full text-sm ${E.subjectProperty.confidence==="high"?"bg-emerald-500/20 text-emerald-300":E.subjectProperty.confidence==="medium"?"bg-yellow-500/20 text-yellow-300":"bg-slate-500/20 text-slate-300"}`,children:[E.subjectProperty.confidence," confidence"]})]})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h4",{className:"font-semibold text-white mb-4",children:"Comparable Sales"}),jsxRuntimeExports.jsx("div",{className:"space-y-3",children:E.comparables.map((d,l)=>jsxRuntimeExports.jsx("div",{className:"glass rounded-xl p-4",children:jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-start",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{className:"font-medium text-white",children:d.address}),jsxRuntimeExports.jsxs("p",{className:"text-sm text-slate-400",children:[d.bedrooms," bed  ",d.bathrooms," bath  ",d.sqft.toLocaleString()," sqft"]})]}),jsxRuntimeExports.jsxs("div",{className:"text-right",children:[jsxRuntimeExports.jsxs("p",{className:"font-semibold text-white",children:["$",d.salePrice.toLocaleString()]}),jsxRuntimeExports.jsx("p",{className:"text-xs text-slate-500",children:d.saleDate})]})]})},l))})]})]})]})}ReactDOM.createRoot(document.getElementById("root")).render(jsxRuntimeExports.jsx(React.StrictMode,{children:jsxRuntimeExports.jsx(App,{})}));
//# sourceMappingURL=index-BZbwOsQL.js.map
