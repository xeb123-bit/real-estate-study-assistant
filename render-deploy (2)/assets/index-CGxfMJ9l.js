(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const y of document.querySelectorAll('link[rel="modulepreload"]'))s(y);new MutationObserver(y=>{for(const O of y)if(O.type==="childList")for(const N of O.addedNodes)N.tagName==="LINK"&&N.rel==="modulepreload"&&s(N)}).observe(document,{childList:!0,subtree:!0});function m(y){const O={};return y.integrity&&(O.integrity=y.integrity),y.referrerPolicy&&(O.referrerPolicy=y.referrerPolicy),y.crossOrigin==="use-credentials"?O.credentials="include":y.crossOrigin==="anonymous"?O.credentials="omit":O.credentials="same-origin",O}function s(y){if(y.ep)return;y.ep=!0;const O=m(y);fetch(y.href,O)}})();var commonjsGlobal=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function getDefaultExportFromCjs(f){return f&&f.__esModule&&Object.prototype.hasOwnProperty.call(f,"default")?f.default:f}function getAugmentedNamespace(f){if(Object.prototype.hasOwnProperty.call(f,"__esModule"))return f;var o=f.default;if(typeof o=="function"){var m=function s(){var y=!1;try{y=this instanceof s}catch{}return y?Reflect.construct(o,arguments,this.constructor):o.apply(this,arguments)};m.prototype=o.prototype}else m={};return Object.defineProperty(m,"__esModule",{value:!0}),Object.keys(f).forEach(function(s){var y=Object.getOwnPropertyDescriptor(f,s);Object.defineProperty(m,s,y.get?y:{enumerable:!0,get:function(){return f[s]}})}),m}var jsxRuntime={exports:{}},reactJsxRuntime_production={};var hasRequiredReactJsxRuntime_production;function requireReactJsxRuntime_production(){if(hasRequiredReactJsxRuntime_production)return reactJsxRuntime_production;hasRequiredReactJsxRuntime_production=1;var f=Symbol.for("react.transitional.element"),o=Symbol.for("react.fragment");function m(s,y,O){var N=null;if(O!==void 0&&(N=""+O),y.key!==void 0&&(N=""+y.key),"key"in y){O={};for(var G in y)G!=="key"&&(O[G]=y[G])}else O=y;return y=O.ref,{$$typeof:f,type:s,key:N,ref:y!==void 0?y:null,props:O}}return reactJsxRuntime_production.Fragment=o,reactJsxRuntime_production.jsx=m,reactJsxRuntime_production.jsxs=m,reactJsxRuntime_production}var hasRequiredJsxRuntime;function requireJsxRuntime(){return hasRequiredJsxRuntime||(hasRequiredJsxRuntime=1,jsxRuntime.exports=requireReactJsxRuntime_production()),jsxRuntime.exports}var jsxRuntimeExports=requireJsxRuntime(),react={exports:{}},react_production={};var hasRequiredReact_production;function requireReact_production(){if(hasRequiredReact_production)return react_production;hasRequiredReact_production=1;var f=Symbol.for("react.transitional.element"),o=Symbol.for("react.portal"),m=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),y=Symbol.for("react.profiler"),O=Symbol.for("react.consumer"),N=Symbol.for("react.context"),G=Symbol.for("react.forward_ref"),q=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),c=Symbol.for("react.lazy"),h=Symbol.for("react.activity"),x=Symbol.iterator;function E(v){return v===null||typeof v!="object"?null:(v=x&&v[x]||v["@@iterator"],typeof v=="function"?v:null)}var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},S=Object.assign,C={};function _(v,F,U){this.props=v,this.context=F,this.refs=C,this.updater=U||p}_.prototype.isReactComponent={},_.prototype.setState=function(v,F){if(typeof v!="object"&&typeof v!="function"&&v!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,v,F,"setState")},_.prototype.forceUpdate=function(v){this.updater.enqueueForceUpdate(this,v,"forceUpdate")};function P(){}P.prototype=_.prototype;function V(v,F,U){this.props=v,this.context=F,this.refs=C,this.updater=U||p}var H=V.prototype=new P;H.constructor=V,S(H,_.prototype),H.isPureReactComponent=!0;var k=Array.isArray;function L(){}var J={H:null,A:null,T:null,S:null},rt=Object.prototype.hasOwnProperty;function et(v,F,U){var $=U.ref;return{$$typeof:f,type:v,key:F,ref:$!==void 0?$:null,props:U}}function lt(v,F){return et(v.type,F,v.props)}function yt(v){return typeof v=="object"&&v!==null&&v.$$typeof===f}function Dt(v){var F={"=":"=0",":":"=2"};return"$"+v.replace(/[=:]/g,function(U){return F[U]})}var Mt=/\/+/g;function qt(v,F){return typeof v=="object"&&v!==null&&v.key!=null?Dt(""+v.key):F.toString(36)}function Yt(v){switch(v.status){case"fulfilled":return v.value;case"rejected":throw v.reason;default:switch(typeof v.status=="string"?v.then(L,L):(v.status="pending",v.then(function(F){v.status==="pending"&&(v.status="fulfilled",v.value=F)},function(F){v.status==="pending"&&(v.status="rejected",v.reason=F)})),v.status){case"fulfilled":return v.value;case"rejected":throw v.reason}}throw v}function nt(v,F,U,$,K){var b=typeof v;(b==="undefined"||b==="boolean")&&(v=null);var j=!1;if(v===null)j=!0;else switch(b){case"bigint":case"string":case"number":j=!0;break;case"object":switch(v.$$typeof){case f:case o:j=!0;break;case c:return j=v._init,nt(j(v._payload),F,U,$,K)}}if(j)return K=K(v),j=$===""?"."+qt(v,0):$,k(K)?(U="",j!=null&&(U=j.replace(Mt,"$&/")+"/"),nt(K,F,U,"",function(Y){return Y})):K!=null&&(yt(K)&&(K=lt(K,U+(K.key==null||v&&v.key===K.key?"":(""+K.key).replace(Mt,"$&/")+"/")+j)),F.push(K)),1;j=0;var I=$===""?".":$+":";if(k(v))for(var Q=0;Q<v.length;Q++)$=v[Q],b=I+qt($,Q),j+=nt($,F,U,b,K);else if(Q=E(v),typeof Q=="function")for(v=Q.call(v),Q=0;!($=v.next()).done;)$=$.value,b=I+qt($,Q++),j+=nt($,F,U,b,K);else if(b==="object"){if(typeof v.then=="function")return nt(Yt(v),F,U,$,K);throw F=String(v),Error("Objects are not valid as a React child (found: "+(F==="[object Object]"?"object with keys {"+Object.keys(v).join(", ")+"}":F)+"). If you meant to render a collection of children, use an array instead.")}return j}function W(v,F,U){if(v==null)return v;var $=[],K=0;return nt(v,$,"","",function(b){return F.call(U,b,K++)}),$}function D(v){if(v._status===-1){var F=v._result;F=F(),F.then(function(U){(v._status===0||v._status===-1)&&(v._status=1,v._result=U)},function(U){(v._status===0||v._status===-1)&&(v._status=2,v._result=U)}),v._status===-1&&(v._status=0,v._result=F)}if(v._status===1)return v._result.default;throw v._result}var T=typeof reportError=="function"?reportError:function(v){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var F=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof v=="object"&&v!==null&&typeof v.message=="string"?String(v.message):String(v),error:v});if(!window.dispatchEvent(F))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",v);return}console.error(v)},R={map:W,forEach:function(v,F,U){W(v,function(){F.apply(this,arguments)},U)},count:function(v){var F=0;return W(v,function(){F++}),F},toArray:function(v){return W(v,function(F){return F})||[]},only:function(v){if(!yt(v))throw Error("React.Children.only expected to receive a single React element child.");return v}};return react_production.Activity=h,react_production.Children=R,react_production.Component=_,react_production.Fragment=m,react_production.Profiler=y,react_production.PureComponent=V,react_production.StrictMode=s,react_production.Suspense=q,react_production.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=J,react_production.__COMPILER_RUNTIME={__proto__:null,c:function(v){return J.H.useMemoCache(v)}},react_production.cache=function(v){return function(){return v.apply(null,arguments)}},react_production.cacheSignal=function(){return null},react_production.cloneElement=function(v,F,U){if(v==null)throw Error("The argument must be a React element, but you passed "+v+".");var $=S({},v.props),K=v.key;if(F!=null)for(b in F.key!==void 0&&(K=""+F.key),F)!rt.call(F,b)||b==="key"||b==="__self"||b==="__source"||b==="ref"&&F.ref===void 0||($[b]=F[b]);var b=arguments.length-2;if(b===1)$.children=U;else if(1<b){for(var j=Array(b),I=0;I<b;I++)j[I]=arguments[I+2];$.children=j}return et(v.type,K,$)},react_production.createContext=function(v){return v={$$typeof:N,_currentValue:v,_currentValue2:v,_threadCount:0,Provider:null,Consumer:null},v.Provider=v,v.Consumer={$$typeof:O,_context:v},v},react_production.createElement=function(v,F,U){var $,K={},b=null;if(F!=null)for($ in F.key!==void 0&&(b=""+F.key),F)rt.call(F,$)&&$!=="key"&&$!=="__self"&&$!=="__source"&&(K[$]=F[$]);var j=arguments.length-2;if(j===1)K.children=U;else if(1<j){for(var I=Array(j),Q=0;Q<j;Q++)I[Q]=arguments[Q+2];K.children=I}if(v&&v.defaultProps)for($ in j=v.defaultProps,j)K[$]===void 0&&(K[$]=j[$]);return et(v,b,K)},react_production.createRef=function(){return{current:null}},react_production.forwardRef=function(v){return{$$typeof:G,render:v}},react_production.isValidElement=yt,react_production.lazy=function(v){return{$$typeof:c,_payload:{_status:-1,_result:v},_init:D}},react_production.memo=function(v,F){return{$$typeof:d,type:v,compare:F===void 0?null:F}},react_production.startTransition=function(v){var F=J.T,U={};J.T=U;try{var $=v(),K=J.S;K!==null&&K(U,$),typeof $=="object"&&$!==null&&typeof $.then=="function"&&$.then(L,T)}catch(b){T(b)}finally{F!==null&&U.types!==null&&(F.types=U.types),J.T=F}},react_production.unstable_useCacheRefresh=function(){return J.H.useCacheRefresh()},react_production.use=function(v){return J.H.use(v)},react_production.useActionState=function(v,F,U){return J.H.useActionState(v,F,U)},react_production.useCallback=function(v,F){return J.H.useCallback(v,F)},react_production.useContext=function(v){return J.H.useContext(v)},react_production.useDebugValue=function(){},react_production.useDeferredValue=function(v,F){return J.H.useDeferredValue(v,F)},react_production.useEffect=function(v,F){return J.H.useEffect(v,F)},react_production.useEffectEvent=function(v){return J.H.useEffectEvent(v)},react_production.useId=function(){return J.H.useId()},react_production.useImperativeHandle=function(v,F,U){return J.H.useImperativeHandle(v,F,U)},react_production.useInsertionEffect=function(v,F){return J.H.useInsertionEffect(v,F)},react_production.useLayoutEffect=function(v,F){return J.H.useLayoutEffect(v,F)},react_production.useMemo=function(v,F){return J.H.useMemo(v,F)},react_production.useOptimistic=function(v,F){return J.H.useOptimistic(v,F)},react_production.useReducer=function(v,F,U){return J.H.useReducer(v,F,U)},react_production.useRef=function(v){return J.H.useRef(v)},react_production.useState=function(v){return J.H.useState(v)},react_production.useSyncExternalStore=function(v,F,U){return J.H.useSyncExternalStore(v,F,U)},react_production.useTransition=function(){return J.H.useTransition()},react_production.version="19.2.4",react_production}var hasRequiredReact;function requireReact(){return hasRequiredReact||(hasRequiredReact=1,react.exports=requireReact_production()),react.exports}var reactExports=requireReact();const React=getDefaultExportFromCjs(reactExports);var client={exports:{}},reactDomClient_production={},scheduler={exports:{}},scheduler_production={};var hasRequiredScheduler_production;function requireScheduler_production(){return hasRequiredScheduler_production||(hasRequiredScheduler_production=1,(function(f){function o(nt,W){var D=nt.length;nt.push(W);t:for(;0<D;){var T=D-1>>>1,R=nt[T];if(0<y(R,W))nt[T]=W,nt[D]=R,D=T;else break t}}function m(nt){return nt.length===0?null:nt[0]}function s(nt){if(nt.length===0)return null;var W=nt[0],D=nt.pop();if(D!==W){nt[0]=D;t:for(var T=0,R=nt.length,v=R>>>1;T<v;){var F=2*(T+1)-1,U=nt[F],$=F+1,K=nt[$];if(0>y(U,D))$<R&&0>y(K,U)?(nt[T]=K,nt[$]=D,T=$):(nt[T]=U,nt[F]=D,T=F);else if($<R&&0>y(K,D))nt[T]=K,nt[$]=D,T=$;else break t}}return W}function y(nt,W){var D=nt.sortIndex-W.sortIndex;return D!==0?D:nt.id-W.id}if(f.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var O=performance;f.unstable_now=function(){return O.now()}}else{var N=Date,G=N.now();f.unstable_now=function(){return N.now()-G}}var q=[],d=[],c=1,h=null,x=3,E=!1,p=!1,S=!1,C=!1,_=typeof setTimeout=="function"?setTimeout:null,P=typeof clearTimeout=="function"?clearTimeout:null,V=typeof setImmediate<"u"?setImmediate:null;function H(nt){for(var W=m(d);W!==null;){if(W.callback===null)s(d);else if(W.startTime<=nt)s(d),W.sortIndex=W.expirationTime,o(q,W);else break;W=m(d)}}function k(nt){if(S=!1,H(nt),!p)if(m(q)!==null)p=!0,L||(L=!0,Dt());else{var W=m(d);W!==null&&Yt(k,W.startTime-nt)}}var L=!1,J=-1,rt=5,et=-1;function lt(){return C?!0:!(f.unstable_now()-et<rt)}function yt(){if(C=!1,L){var nt=f.unstable_now();et=nt;var W=!0;try{t:{p=!1,S&&(S=!1,P(J),J=-1),E=!0;var D=x;try{e:{for(H(nt),h=m(q);h!==null&&!(h.expirationTime>nt&&lt());){var T=h.callback;if(typeof T=="function"){h.callback=null,x=h.priorityLevel;var R=T(h.expirationTime<=nt);if(nt=f.unstable_now(),typeof R=="function"){h.callback=R,H(nt),W=!0;break e}h===m(q)&&s(q),H(nt)}else s(q);h=m(q)}if(h!==null)W=!0;else{var v=m(d);v!==null&&Yt(k,v.startTime-nt),W=!1}}break t}finally{h=null,x=D,E=!1}W=void 0}}finally{W?Dt():L=!1}}}var Dt;if(typeof V=="function")Dt=function(){V(yt)};else if(typeof MessageChannel<"u"){var Mt=new MessageChannel,qt=Mt.port2;Mt.port1.onmessage=yt,Dt=function(){qt.postMessage(null)}}else Dt=function(){_(yt,0)};function Yt(nt,W){J=_(function(){nt(f.unstable_now())},W)}f.unstable_IdlePriority=5,f.unstable_ImmediatePriority=1,f.unstable_LowPriority=4,f.unstable_NormalPriority=3,f.unstable_Profiling=null,f.unstable_UserBlockingPriority=2,f.unstable_cancelCallback=function(nt){nt.callback=null},f.unstable_forceFrameRate=function(nt){0>nt||125<nt?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):rt=0<nt?Math.floor(1e3/nt):5},f.unstable_getCurrentPriorityLevel=function(){return x},f.unstable_next=function(nt){switch(x){case 1:case 2:case 3:var W=3;break;default:W=x}var D=x;x=W;try{return nt()}finally{x=D}},f.unstable_requestPaint=function(){C=!0},f.unstable_runWithPriority=function(nt,W){switch(nt){case 1:case 2:case 3:case 4:case 5:break;default:nt=3}var D=x;x=nt;try{return W()}finally{x=D}},f.unstable_scheduleCallback=function(nt,W,D){var T=f.unstable_now();switch(typeof D=="object"&&D!==null?(D=D.delay,D=typeof D=="number"&&0<D?T+D:T):D=T,nt){case 1:var R=-1;break;case 2:R=250;break;case 5:R=1073741823;break;case 4:R=1e4;break;default:R=5e3}return R=D+R,nt={id:c++,callback:W,priorityLevel:nt,startTime:D,expirationTime:R,sortIndex:-1},D>T?(nt.sortIndex=D,o(d,nt),m(q)===null&&nt===m(d)&&(S?(P(J),J=-1):S=!0,Yt(k,D-T))):(nt.sortIndex=R,o(q,nt),p||E||(p=!0,L||(L=!0,Dt()))),nt},f.unstable_shouldYield=lt,f.unstable_wrapCallback=function(nt){var W=x;return function(){var D=x;x=W;try{return nt.apply(this,arguments)}finally{x=D}}}})(scheduler_production)),scheduler_production}var hasRequiredScheduler;function requireScheduler(){return hasRequiredScheduler||(hasRequiredScheduler=1,scheduler.exports=requireScheduler_production()),scheduler.exports}var reactDom={exports:{}},reactDom_production={};var hasRequiredReactDom_production;function requireReactDom_production(){if(hasRequiredReactDom_production)return reactDom_production;hasRequiredReactDom_production=1;var f=requireReact();function o(q){var d="https://react.dev/errors/"+q;if(1<arguments.length){d+="?args[]="+encodeURIComponent(arguments[1]);for(var c=2;c<arguments.length;c++)d+="&args[]="+encodeURIComponent(arguments[c])}return"Minified React error #"+q+"; visit "+d+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function m(){}var s={d:{f:m,r:function(){throw Error(o(522))},D:m,C:m,L:m,m,X:m,S:m,M:m},p:0,findDOMNode:null},y=Symbol.for("react.portal");function O(q,d,c){var h=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:y,key:h==null?null:""+h,children:q,containerInfo:d,implementation:c}}var N=f.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function G(q,d){if(q==="font")return"";if(typeof d=="string")return d==="use-credentials"?d:""}return reactDom_production.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,reactDom_production.createPortal=function(q,d){var c=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!d||d.nodeType!==1&&d.nodeType!==9&&d.nodeType!==11)throw Error(o(299));return O(q,d,null,c)},reactDom_production.flushSync=function(q){var d=N.T,c=s.p;try{if(N.T=null,s.p=2,q)return q()}finally{N.T=d,s.p=c,s.d.f()}},reactDom_production.preconnect=function(q,d){typeof q=="string"&&(d?(d=d.crossOrigin,d=typeof d=="string"?d==="use-credentials"?d:"":void 0):d=null,s.d.C(q,d))},reactDom_production.prefetchDNS=function(q){typeof q=="string"&&s.d.D(q)},reactDom_production.preinit=function(q,d){if(typeof q=="string"&&d&&typeof d.as=="string"){var c=d.as,h=G(c,d.crossOrigin),x=typeof d.integrity=="string"?d.integrity:void 0,E=typeof d.fetchPriority=="string"?d.fetchPriority:void 0;c==="style"?s.d.S(q,typeof d.precedence=="string"?d.precedence:void 0,{crossOrigin:h,integrity:x,fetchPriority:E}):c==="script"&&s.d.X(q,{crossOrigin:h,integrity:x,fetchPriority:E,nonce:typeof d.nonce=="string"?d.nonce:void 0})}},reactDom_production.preinitModule=function(q,d){if(typeof q=="string")if(typeof d=="object"&&d!==null){if(d.as==null||d.as==="script"){var c=G(d.as,d.crossOrigin);s.d.M(q,{crossOrigin:c,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0})}}else d==null&&s.d.M(q)},reactDom_production.preload=function(q,d){if(typeof q=="string"&&typeof d=="object"&&d!==null&&typeof d.as=="string"){var c=d.as,h=G(c,d.crossOrigin);s.d.L(q,c,{crossOrigin:h,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0,type:typeof d.type=="string"?d.type:void 0,fetchPriority:typeof d.fetchPriority=="string"?d.fetchPriority:void 0,referrerPolicy:typeof d.referrerPolicy=="string"?d.referrerPolicy:void 0,imageSrcSet:typeof d.imageSrcSet=="string"?d.imageSrcSet:void 0,imageSizes:typeof d.imageSizes=="string"?d.imageSizes:void 0,media:typeof d.media=="string"?d.media:void 0})}},reactDom_production.preloadModule=function(q,d){if(typeof q=="string")if(d){var c=G(d.as,d.crossOrigin);s.d.m(q,{as:typeof d.as=="string"&&d.as!=="script"?d.as:void 0,crossOrigin:c,integrity:typeof d.integrity=="string"?d.integrity:void 0})}else s.d.m(q)},reactDom_production.requestFormReset=function(q){s.d.r(q)},reactDom_production.unstable_batchedUpdates=function(q,d){return q(d)},reactDom_production.useFormState=function(q,d,c){return N.H.useFormState(q,d,c)},reactDom_production.useFormStatus=function(){return N.H.useHostTransitionStatus()},reactDom_production.version="19.2.4",reactDom_production}var hasRequiredReactDom;function requireReactDom(){if(hasRequiredReactDom)return reactDom.exports;hasRequiredReactDom=1;function f(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(f)}catch(o){console.error(o)}}return f(),reactDom.exports=requireReactDom_production(),reactDom.exports}var hasRequiredReactDomClient_production;function requireReactDomClient_production(){if(hasRequiredReactDomClient_production)return reactDomClient_production;hasRequiredReactDomClient_production=1;var f=requireScheduler(),o=requireReact(),m=requireReactDom();function s(t){var e="https://react.dev/errors/"+t;if(1<arguments.length){e+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function y(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function O(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,(e.flags&4098)!==0&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function N(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function G(t){if(t.tag===31){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function q(t){if(O(t)!==t)throw Error(s(188))}function d(t){var e=t.alternate;if(!e){if(e=O(t),e===null)throw Error(s(188));return e!==t?null:t}for(var n=t,a=e;;){var r=n.return;if(r===null)break;var l=r.alternate;if(l===null){if(a=r.return,a!==null){n=a;continue}break}if(r.child===l.child){for(l=r.child;l;){if(l===n)return q(r),t;if(l===a)return q(r),e;l=l.sibling}throw Error(s(188))}if(n.return!==a.return)n=r,a=l;else{for(var w=!1,B=r.child;B;){if(B===n){w=!0,n=r,a=l;break}if(B===a){w=!0,a=r,n=l;break}B=B.sibling}if(!w){for(B=l.child;B;){if(B===n){w=!0,n=l,a=r;break}if(B===a){w=!0,a=l,n=r;break}B=B.sibling}if(!w)throw Error(s(189))}}if(n.alternate!==a)throw Error(s(190))}if(n.tag!==3)throw Error(s(188));return n.stateNode.current===n?t:e}function c(t){var e=t.tag;if(e===5||e===26||e===27||e===6)return t;for(t=t.child;t!==null;){if(e=c(t),e!==null)return e;t=t.sibling}return null}var h=Object.assign,x=Symbol.for("react.element"),E=Symbol.for("react.transitional.element"),p=Symbol.for("react.portal"),S=Symbol.for("react.fragment"),C=Symbol.for("react.strict_mode"),_=Symbol.for("react.profiler"),P=Symbol.for("react.consumer"),V=Symbol.for("react.context"),H=Symbol.for("react.forward_ref"),k=Symbol.for("react.suspense"),L=Symbol.for("react.suspense_list"),J=Symbol.for("react.memo"),rt=Symbol.for("react.lazy"),et=Symbol.for("react.activity"),lt=Symbol.for("react.memo_cache_sentinel"),yt=Symbol.iterator;function Dt(t){return t===null||typeof t!="object"?null:(t=yt&&t[yt]||t["@@iterator"],typeof t=="function"?t:null)}var Mt=Symbol.for("react.client.reference");function qt(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===Mt?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case S:return"Fragment";case _:return"Profiler";case C:return"StrictMode";case k:return"Suspense";case L:return"SuspenseList";case et:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case p:return"Portal";case V:return t.displayName||"Context";case P:return(t._context.displayName||"Context")+".Consumer";case H:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case J:return e=t.displayName||null,e!==null?e:qt(t.type)||"Memo";case rt:e=t._payload,t=t._init;try{return qt(t(e))}catch{}}return null}var Yt=Array.isArray,nt=o.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,W=m.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,D={pending:!1,data:null,method:null,action:null},T=[],R=-1;function v(t){return{current:t}}function F(t){0>R||(t.current=T[R],T[R]=null,R--)}function U(t,e){R++,T[R]=t.current,t.current=e}var $=v(null),K=v(null),b=v(null),j=v(null);function I(t,e){switch(U(b,e),U(K,t),U($,null),e.nodeType){case 9:case 11:t=(t=e.documentElement)&&(t=t.namespaceURI)?jh(t):0;break;default:if(t=e.tagName,e=e.namespaceURI)e=jh(e),t=Dh(e,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}F($),U($,t)}function Q(){F($),F(K),F(b)}function Y(t){t.memoizedState!==null&&U(j,t);var e=$.current,n=Dh(e,t.type);e!==n&&(U(K,t),U($,n))}function at(t){K.current===t&&(F($),F(K)),j.current===t&&(F(j),Js._currentValue=D)}var st,Rt;function Xt(t){if(st===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);st=e&&e[1]||"",Rt=-1<n.stack.indexOf(`
    at`)?" (<anonymous>)":-1<n.stack.indexOf("@")?"@unknown:0:0":""}return`
`+st+t+Rt}var wt=!1;function jt(t,e){if(!t||wt)return"";wt=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var a={DetermineComponentFrameRoot:function(){try{if(e){var It=function(){throw Error()};if(Object.defineProperty(It.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(It,[])}catch(kt){var Ct=kt}Reflect.construct(t,[],It)}else{try{It.call()}catch(kt){Ct=kt}t.call(It.prototype)}}else{try{throw Error()}catch(kt){Ct=kt}(It=t())&&typeof It.catch=="function"&&It.catch(function(){})}}catch(kt){if(kt&&Ct&&typeof kt.stack=="string")return[kt.stack,Ct.stack]}return[null,null]}};a.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var r=Object.getOwnPropertyDescriptor(a.DetermineComponentFrameRoot,"name");r&&r.configurable&&Object.defineProperty(a.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var l=a.DetermineComponentFrameRoot(),w=l[0],B=l[1];if(w&&B){var ot=w.split(`
`),St=B.split(`
`);for(r=a=0;a<ot.length&&!ot[a].includes("DetermineComponentFrameRoot");)a++;for(;r<St.length&&!St[r].includes("DetermineComponentFrameRoot");)r++;if(a===ot.length||r===St.length)for(a=ot.length-1,r=St.length-1;1<=a&&0<=r&&ot[a]!==St[r];)r--;for(;1<=a&&0<=r;a--,r--)if(ot[a]!==St[r]){if(a!==1||r!==1)do if(a--,r--,0>r||ot[a]!==St[r]){var Nt=`
`+ot[a].replace(" at new "," at ");return t.displayName&&Nt.includes("<anonymous>")&&(Nt=Nt.replace("<anonymous>",t.displayName)),Nt}while(1<=a&&0<=r);break}}}finally{wt=!1,Error.prepareStackTrace=n}return(n=t?t.displayName||t.name:"")?Xt(n):""}function Lt(t,e){switch(t.tag){case 26:case 27:case 5:return Xt(t.type);case 16:return Xt("Lazy");case 13:return t.child!==e&&e!==null?Xt("Suspense Fallback"):Xt("Suspense");case 19:return Xt("SuspenseList");case 0:case 15:return jt(t.type,!1);case 11:return jt(t.type.render,!1);case 1:return jt(t.type,!0);case 31:return Xt("Activity");default:return""}}function Pt(t){try{var e="",n=null;do e+=Lt(t,n),n=t,t=t.return;while(t);return e}catch(a){return`
Error generating stack: `+a.message+`
`+a.stack}}var Bt=Object.prototype.hasOwnProperty,Qt=f.unstable_scheduleCallback,$t=f.unstable_cancelCallback,ie=f.unstable_shouldYield,le=f.unstable_requestPaint,oe=f.unstable_now,_e=f.unstable_getCurrentPriorityLevel,ke=f.unstable_ImmediatePriority,Be=f.unstable_UserBlockingPriority,Cn=f.unstable_NormalPriority,We=f.unstable_LowPriority,An=f.unstable_IdlePriority,ya=f.log,ca=f.unstable_setDisableYieldValue,Qn=null,zt=null;function vt(t){if(typeof ya=="function"&&ca(t),zt&&typeof zt.setStrictMode=="function")try{zt.setStrictMode(Qn,t)}catch{}}var it=Math.clz32?Math.clz32:Xe,Jt=Math.log,me=Math.LN2;function Xe(t){return t>>>=0,t===0?32:31-(Jt(t)/me|0)|0}var Kt=256,kn=262144,On=4194304;function cn(t){var e=t&42;if(e!==0)return e;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return t&261888;case 262144:case 524288:case 1048576:case 2097152:return t&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function Qe(t,e,n){var a=t.pendingLanes;if(a===0)return 0;var r=0,l=t.suspendedLanes,w=t.pingedLanes;t=t.warmLanes;var B=a&134217727;return B!==0?(a=B&~l,a!==0?r=cn(a):(w&=B,w!==0?r=cn(w):n||(n=B&~t,n!==0&&(r=cn(n))))):(B=a&~l,B!==0?r=cn(B):w!==0?r=cn(w):n||(n=a&~t,n!==0&&(r=cn(n)))),r===0?0:e!==0&&e!==r&&(e&l)===0&&(l=r&-r,n=e&-e,l>=n||l===32&&(n&4194048)!==0)?e:r}function En(t,e){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&e)===0}function Zn(t,e){switch(t){case 1:case 2:case 4:case 8:case 64:return e+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Da(){var t=On;return On<<=1,(On&62914560)===0&&(On=4194304),t}function je(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function gn(t,e){t.pendingLanes|=e,e!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function ba(t,e,n,a,r,l){var w=t.pendingLanes;t.pendingLanes=n,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=n,t.entangledLanes&=n,t.errorRecoveryDisabledLanes&=n,t.shellSuspendCounter=0;var B=t.entanglements,ot=t.expirationTimes,St=t.hiddenUpdates;for(n=w&~n;0<n;){var Nt=31-it(n),It=1<<Nt;B[Nt]=0,ot[Nt]=-1;var Ct=St[Nt];if(Ct!==null)for(St[Nt]=null,Nt=0;Nt<Ct.length;Nt++){var kt=Ct[Nt];kt!==null&&(kt.lane&=-536870913)}n&=~It}a!==0&&ua(t,a,0),l!==0&&r===0&&t.tag!==0&&(t.suspendedLanes|=l&~(w&~e))}function ua(t,e,n){t.pendingLanes|=e,t.suspendedLanes&=~e;var a=31-it(e);t.entangledLanes|=e,t.entanglements[a]=t.entanglements[a]|1073741824|n&261930}function Te(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var a=31-it(n),r=1<<a;r&e|t[a]&e&&(t[a]|=e),n&=~r}}function Ie(t,e){var n=e&-e;return n=(n&42)!==0?1:un(n),(n&(t.suspendedLanes|e))!==0?0:n}function un(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function Nn(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function da(){var t=W.p;return t!==0?t:(t=window.event,t===void 0?32:ef(t.type))}function Bi(t,e){var n=W.p;try{return W.p=t,e()}finally{W.p=n}}var va=Math.random().toString(36).slice(2),Ue="__reactFiber$"+va,$e="__reactProps$"+va,Mn="__reactContainer$"+va,oi="__reactEvents$"+va,ml="__reactListeners$"+va,xa="__reactHandles$"+va,is="__reactResources$"+va,Bn="__reactMarker$"+va;function fr(t){delete t[Ue],delete t[$e],delete t[oi],delete t[ml],delete t[xa]}function _a(t){var e=t[Ue];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Mn]||n[Ue]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Ih(t);t!==null;){if(n=t[Ue])return n;t=Ih(t)}return e}t=n,n=t.parentNode}return null}function Ne(t){if(t=t[Ue]||t[Mn]){var e=t.tag;if(e===5||e===6||e===13||e===31||e===26||e===27||e===3)return t}return null}function Un(t){var e=t.tag;if(e===5||e===26||e===27||e===6)return t.stateNode;throw Error(s(33))}function Sn(t){var e=t[is];return e||(e=t[is]={hoistableStyles:new Map,hoistableScripts:new Map}),e}function tn(t){t[Bn]=!0}var Oa=new Set,Ui={};function ha(t,e){Aa(t,e),Aa(t+"Capture",e)}function Aa(t,e){for(Ui[t]=e,t=0;t<e.length;t++)Oa.add(e[t])}var Na=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),rs={},Hi={};function no(t){return Bt.call(Hi,t)?!0:Bt.call(rs,t)?!1:Na.test(t)?Hi[t]=!0:(rs[t]=!0,!1)}function pe(t,e,n){if(no(e))if(n===null)t.removeAttribute(e);else{switch(typeof n){case"undefined":case"function":case"symbol":t.removeAttribute(e);return;case"boolean":var a=e.toLowerCase().slice(0,5);if(a!=="data-"&&a!=="aria-"){t.removeAttribute(e);return}}t.setAttribute(e,""+n)}}function Gi(t,e,n){if(n===null)t.removeAttribute(e);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(e);return}t.setAttribute(e,""+n)}}function Jn(t,e,n,a){if(a===null)t.removeAttribute(n);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(n);return}t.setAttributeNS(e,n,""+a)}}function yn(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function li(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function ao(t,e,n){var a=Object.getOwnPropertyDescriptor(t.constructor.prototype,e);if(!t.hasOwnProperty(e)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var r=a.get,l=a.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return r.call(this)},set:function(w){n=""+w,l.call(this,w)}}),Object.defineProperty(t,e,{enumerable:a.enumerable}),{getValue:function(){return n},setValue:function(w){n=""+w},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function pr(t){if(!t._valueTracker){var e=li(t)?"checked":"value";t._valueTracker=ao(t,e,""+t[e])}}function ss(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),a="";return t&&(a=li(t)?t.checked?"true":"false":t.value),t=a,t!==n?(e.setValue(t),!0):!1}function Re(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var Yi=/[\n"\\]/g;function hn(t){return t.replace(Yi,function(e){return"\\"+e.charCodeAt(0).toString(16)+" "})}function Ea(t,e,n,a,r,l,w,B){t.name="",w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"?t.type=w:t.removeAttribute("type"),e!=null?w==="number"?(e===0&&t.value===""||t.value!=e)&&(t.value=""+yn(e)):t.value!==""+yn(e)&&(t.value=""+yn(e)):w!=="submit"&&w!=="reset"||t.removeAttribute("value"),e!=null?Ki(t,w,yn(e)):n!=null?Ki(t,w,yn(n)):a!=null&&t.removeAttribute("value"),r==null&&l!=null&&(t.defaultChecked=!!l),r!=null&&(t.checked=r&&typeof r!="function"&&typeof r!="symbol"),B!=null&&typeof B!="function"&&typeof B!="symbol"&&typeof B!="boolean"?t.name=""+yn(B):t.removeAttribute("name")}function mr(t,e,n,a,r,l,w,B){if(l!=null&&typeof l!="function"&&typeof l!="symbol"&&typeof l!="boolean"&&(t.type=l),e!=null||n!=null){if(!(l!=="submit"&&l!=="reset"||e!=null)){pr(t);return}n=n!=null?""+yn(n):"",e=e!=null?""+yn(e):n,B||e===t.value||(t.value=e),t.defaultValue=e}a=a??r,a=typeof a!="function"&&typeof a!="symbol"&&!!a,t.checked=B?t.checked:!!a,t.defaultChecked=!!a,w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"&&(t.name=w),pr(t)}function Ki(t,e,n){e==="number"&&Re(t.ownerDocument)===t||t.defaultValue===""+n||(t.defaultValue=""+n)}function fa(t,e,n,a){if(t=t.options,e){e={};for(var r=0;r<n.length;r++)e["$"+n[r]]=!0;for(n=0;n<t.length;n++)r=e.hasOwnProperty("$"+t[n].value),t[n].selected!==r&&(t[n].selected=r),r&&a&&(t[n].defaultSelected=!0)}else{for(n=""+yn(n),e=null,r=0;r<t.length;r++){if(t[r].value===n){t[r].selected=!0,a&&(t[r].defaultSelected=!0);return}e!==null||t[r].disabled||(e=t[r])}e!==null&&(e.selected=!0)}}function os(t,e,n){if(e!=null&&(e=""+yn(e),e!==t.value&&(t.value=e),n==null)){t.defaultValue!==e&&(t.defaultValue=e);return}t.defaultValue=n!=null?""+yn(n):""}function Xi(t,e,n,a){if(e==null){if(a!=null){if(n!=null)throw Error(s(92));if(Yt(a)){if(1<a.length)throw Error(s(93));a=a[0]}n=a}n==null&&(n=""),e=n}n=yn(e),t.defaultValue=n,a=t.textContent,a===n&&a!==""&&a!==null&&(t.value=a),pr(t)}function Pa(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var gl=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Ae(t,e,n){var a=e.indexOf("--")===0;n==null||typeof n=="boolean"||n===""?a?t.setProperty(e,""):e==="float"?t.cssFloat="":t[e]="":a?t.setProperty(e,n):typeof n!="number"||n===0||gl.has(e)?e==="float"?t.cssFloat=n:t[e]=(""+n).trim():t[e]=n+"px"}function ls(t,e,n){if(e!=null&&typeof e!="object")throw Error(s(62));if(t=t.style,n!=null){for(var a in n)!n.hasOwnProperty(a)||e!=null&&e.hasOwnProperty(a)||(a.indexOf("--")===0?t.setProperty(a,""):a==="float"?t.cssFloat="":t[a]="");for(var r in e)a=e[r],e.hasOwnProperty(r)&&n[r]!==a&&Ae(t,r,a)}else for(var l in e)e.hasOwnProperty(l)&&Ae(t,l,e[l])}function cs(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var yl=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),jn=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function pa(t){return jn.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}function Pn(){}var $n=null;function gr(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var La=null,He=null;function Hn(t){var e=Ne(t);if(e&&(t=e.stateNode)){var n=t[$e]||null;t:switch(t=e.stateNode,e.type){case"input":if(Ea(t,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll('input[name="'+hn(""+e)+'"][type="radio"]'),e=0;e<n.length;e++){var a=n[e];if(a!==t&&a.form===t.form){var r=a[$e]||null;if(!r)throw Error(s(90));Ea(a,r.value,r.defaultValue,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name)}}for(e=0;e<n.length;e++)a=n[e],a.form===t.form&&ss(a)}break t;case"textarea":os(t,n.value,n.defaultValue);break t;case"select":e=n.value,e!=null&&fa(t,!!n.multiple,e,!1)}}}var Fa=!1;function ci(t,e,n){if(Fa)return t(e,n);Fa=!0;try{var a=t(e);return a}finally{if(Fa=!1,(La!==null||He!==null)&&(Xo(),La&&(e=La,t=He,He=La=null,Hn(e),t)))for(e=0;e<t.length;e++)Hn(t[e])}}function za(t,e){var n=t.stateNode;if(n===null)return null;var a=n[$e]||null;if(a===null)return null;n=a[e];t:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(a=!a.disabled)||(t=t.type,a=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!a;break t;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(s(231,e,typeof n));return n}var fn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),us=!1;if(fn)try{var wn={};Object.defineProperty(wn,"passive",{get:function(){us=!0}}),window.addEventListener("test",wn,wn),window.removeEventListener("test",wn,wn)}catch{us=!1}var ta=null,yr=null,ui=null;function di(){if(ui)return ui;var t,e=yr,n=e.length,a,r="value"in ta?ta.value:ta.textContent,l=r.length;for(t=0;t<n&&e[t]===r[t];t++);var w=n-t;for(a=1;a<=w&&e[n-a]===r[l-a];a++);return ui=r.slice(t,1<a?1-a:void 0)}function hi(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Vi(){return!0}function io(){return!1}function an(t){function e(n,a,r,l,w){this._reactName=n,this._targetInst=r,this.type=a,this.nativeEvent=l,this.target=w,this.currentTarget=null;for(var B in t)t.hasOwnProperty(B)&&(n=t[B],this[B]=n?n(l):l[B]);return this.isDefaultPrevented=(l.defaultPrevented!=null?l.defaultPrevented:l.returnValue===!1)?Vi:io,this.isPropagationStopped=io,this}return h(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Vi)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Vi)},persist:function(){},isPersistent:Vi}),e}var Ia={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},br=an(Ia),Sa=h({},Ia,{view:0,detail:0}),vr=an(Sa),Wi,ds,Qi,xr=h({},Sa,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:qa,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Qi&&(Qi&&t.type==="mousemove"?(Wi=t.screenX-Qi.screenX,ds=t.screenY-Qi.screenY):ds=Wi=0,Qi=t),Wi)},movementY:function(t){return"movementY"in t?t.movementY:ds}}),_r=an(xr),hs=h({},xr,{dataTransfer:0}),ro=an(hs),Ar=h({},Sa,{relatedTarget:0}),fi=an(Ar),Er=h({},Ia,{animationName:0,elapsedTime:0,pseudoElement:0}),so=an(Er),bl=h({},Ia,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),pi=an(bl),fs=h({},Ia,{data:0}),Sr=an(fs),ps={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ms={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},pn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Zi(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=pn[t])?!!e[t]:!1}function qa(){return Zi}var oo=h({},Sa,{key:function(t){if(t.key){var e=ps[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=hi(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?ms[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:qa,charCode:function(t){return t.type==="keypress"?hi(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?hi(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),wr=an(oo),lo=h({},xr,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),gs=an(lo),Tr=h({},Sa,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:qa}),ys=an(Tr),Ba=h({},Ia,{propertyName:0,elapsedTime:0,pseudoElement:0}),bs=an(Ba),vs=h({},xr,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Rr=an(vs),xs=h({},Ia,{newState:0,oldState:0}),co=an(xs),vl=[9,13,27,32],Ji=fn&&"CompositionEvent"in window,wa=null;fn&&"documentMode"in document&&(wa=document.documentMode);var xl=fn&&"TextEvent"in window&&!wa,Cr=fn&&(!Ji||wa&&8<wa&&11>=wa),kr=" ",uo=!1;function _s(t,e){switch(t){case"keyup":return vl.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ho(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Ua=!1;function fo(t,e){switch(t){case"compositionend":return ho(e);case"keypress":return e.which!==32?null:(uo=!0,kr);case"textInput":return t=e.data,t===kr&&uo?null:t;default:return null}}function _l(t,e){if(Ua)return t==="compositionend"||!Ji&&_s(t,e)?(t=di(),ui=yr=ta=null,Ua=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Cr&&e.locale!=="ko"?null:e.data;default:return null}}var po={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Mr(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!po[t.type]:e==="textarea"}function As(t,e,n,a){La?He?He.push(a):He=[a]:La=a,e=tl(e,"onChange"),0<e.length&&(n=new br("onChange","change",null,n,a),t.push({event:n,listeners:e}))}var mi=null,$i=null;function Al(t){wh(t,0)}function jr(t){var e=Un(t);if(ss(e))return t}function tr(t,e){if(t==="change")return e}var ea=!1;if(fn){var Ge;if(fn){var gi="oninput"in document;if(!gi){var Ha=document.createElement("div");Ha.setAttribute("oninput","return;"),gi=typeof Ha.oninput=="function"}Ge=gi}else Ge=!1;ea=Ge&&(!document.documentMode||9<document.documentMode)}function mo(){mi&&(mi.detachEvent("onpropertychange",Dr),$i=mi=null)}function Dr(t){if(t.propertyName==="value"&&jr($i)){var e=[];As(e,$i,t,gr(t)),ci(Al,e)}}function go(t,e,n){t==="focusin"?(mo(),mi=e,$i=n,mi.attachEvent("onpropertychange",Dr)):t==="focusout"&&mo()}function Ga(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return jr($i)}function Es(t,e){if(t==="click")return jr(e)}function yi(t,e){if(t==="input"||t==="change")return jr(e)}function Ta(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Tn=typeof Object.is=="function"?Object.is:Ta;function i(t,e){if(Tn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),a=Object.keys(e);if(n.length!==a.length)return!1;for(a=0;a<n.length;a++){var r=n[a];if(!Bt.call(e,r)||!Tn(t[r],e[r]))return!1}return!0}function u(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function g(t,e){var n=u(t);t=0;for(var a;n;){if(n.nodeType===3){if(a=t+n.textContent.length,t<=e&&a>=e)return{node:n,offset:e-t};t=a}t:{for(;n;){if(n.nextSibling){n=n.nextSibling;break t}n=n.parentNode}n=void 0}n=u(n)}}function A(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?A(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function M(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var e=Re(t.document);e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Re(t.document)}return e}function z(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}var Z=fn&&"documentMode"in document&&11>=document.documentMode,tt=null,ut=null,xt=null,dt=!1;function ct(t,e,n){var a=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;dt||tt==null||tt!==Re(a)||(a=tt,"selectionStart"in a&&z(a)?a={start:a.selectionStart,end:a.selectionEnd}:(a=(a.ownerDocument&&a.ownerDocument.defaultView||window).getSelection(),a={anchorNode:a.anchorNode,anchorOffset:a.anchorOffset,focusNode:a.focusNode,focusOffset:a.focusOffset}),xt&&i(xt,a)||(xt=a,a=tl(ut,"onSelect"),0<a.length&&(e=new br("onSelect","select",null,e,n),t.push({event:e,listeners:a}),e.target=tt)))}function pt(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var gt={animationend:pt("Animation","AnimationEnd"),animationiteration:pt("Animation","AnimationIteration"),animationstart:pt("Animation","AnimationStart"),transitionrun:pt("Transition","TransitionRun"),transitionstart:pt("Transition","TransitionStart"),transitioncancel:pt("Transition","TransitionCancel"),transitionend:pt("Transition","TransitionEnd")},ht={},ft={};fn&&(ft=document.createElement("div").style,"AnimationEvent"in window||(delete gt.animationend.animation,delete gt.animationiteration.animation,delete gt.animationstart.animation),"TransitionEvent"in window||delete gt.transitionend.transition);function At(t){if(ht[t])return ht[t];if(!gt[t])return t;var e=gt[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in ft)return ht[t]=e[n];return t}var Tt=At("animationend"),_t=At("animationiteration"),Ot=At("animationstart"),Ut=At("transitionrun"),Vt=At("transitionstart"),Wt=At("transitioncancel"),Ht=At("transitionend"),te=new Map,Zt="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Zt.push("scrollEnd");function Gt(t,e){te.set(t,e),ha(e,[t])}var ee=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var e=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(e))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)},ue=[],ge=0,re=0;function de(){for(var t=ge,e=re=ge=0;e<t;){var n=ue[e];ue[e++]=null;var a=ue[e];ue[e++]=null;var r=ue[e];ue[e++]=null;var l=ue[e];if(ue[e++]=null,a!==null&&r!==null){var w=a.pending;w===null?r.next=r:(r.next=w.next,w.next=r),a.pending=r}l!==0&&Ra(n,r,l)}}function Pe(t,e,n,a){ue[ge++]=t,ue[ge++]=e,ue[ge++]=n,ue[ge++]=a,re|=a,t.lanes|=a,t=t.alternate,t!==null&&(t.lanes|=a)}function Rn(t,e,n,a){return Pe(t,e,n,a),bi(t)}function Me(t,e){return Pe(t,null,null,e),bi(t)}function Ra(t,e,n){t.lanes|=n;var a=t.alternate;a!==null&&(a.lanes|=n);for(var r=!1,l=t.return;l!==null;)l.childLanes|=n,a=l.alternate,a!==null&&(a.childLanes|=n),l.tag===22&&(t=l.stateNode,t===null||t._visibility&1||(r=!0)),t=l,l=l.return;return t.tag===3?(l=t.stateNode,r&&e!==null&&(r=31-it(n),t=l.hiddenUpdates,a=t[r],a===null?t[r]=[e]:a.push(e),e.lane=n|536870912),l):null}function bi(t){if(50<Ys)throw Ys=0,jc=null,Error(s(185));for(var e=t.return;e!==null;)t=e,e=t.return;return t.tag===3?t.stateNode:null}var Or={};function cf(t,e,n,a){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=a,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Gn(t,e,n,a){return new cf(t,e,n,a)}function El(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Ya(t,e){var n=t.alternate;return n===null?(n=Gn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&65011712,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n.refCleanup=t.refCleanup,n}function ou(t,e){t.flags&=65011714;var n=t.alternate;return n===null?(t.childLanes=0,t.lanes=e,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=n.childLanes,t.lanes=n.lanes,t.child=n.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=n.memoizedProps,t.memoizedState=n.memoizedState,t.updateQueue=n.updateQueue,t.type=n.type,e=n.dependencies,t.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),t}function yo(t,e,n,a,r,l){var w=0;if(a=t,typeof t=="function")El(t)&&(w=1);else if(typeof t=="string")w=pp(t,n,$.current)?26:t==="html"||t==="head"||t==="body"?27:5;else t:switch(t){case et:return t=Gn(31,n,e,r),t.elementType=et,t.lanes=l,t;case S:return er(n.children,r,l,e);case C:w=8,r|=24;break;case _:return t=Gn(12,n,e,r|2),t.elementType=_,t.lanes=l,t;case k:return t=Gn(13,n,e,r),t.elementType=k,t.lanes=l,t;case L:return t=Gn(19,n,e,r),t.elementType=L,t.lanes=l,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case V:w=10;break t;case P:w=9;break t;case H:w=11;break t;case J:w=14;break t;case rt:w=16,a=null;break t}w=29,n=Error(s(130,t===null?"null":typeof t,"")),a=null}return e=Gn(w,n,e,r),e.elementType=t,e.type=a,e.lanes=l,e}function er(t,e,n,a){return t=Gn(7,t,a,e),t.lanes=n,t}function Sl(t,e,n){return t=Gn(6,t,null,e),t.lanes=n,t}function lu(t){var e=Gn(18,null,null,0);return e.stateNode=t,e}function wl(t,e,n){return e=Gn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}var cu=new WeakMap;function na(t,e){if(typeof t=="object"&&t!==null){var n=cu.get(t);return n!==void 0?n:(e={value:t,source:e,stack:Pt(e)},cu.set(t,e),e)}return{value:t,source:e,stack:Pt(e)}}var Nr=[],Pr=0,bo=null,Ss=0,aa=[],ia=0,vi=null,Ca=1,ka="";function Ka(t,e){Nr[Pr++]=Ss,Nr[Pr++]=bo,bo=t,Ss=e}function uu(t,e,n){aa[ia++]=Ca,aa[ia++]=ka,aa[ia++]=vi,vi=t;var a=Ca;t=ka;var r=32-it(a)-1;a&=~(1<<r),n+=1;var l=32-it(e)+r;if(30<l){var w=r-r%5;l=(a&(1<<w)-1).toString(32),a>>=w,r-=w,Ca=1<<32-it(e)+r|n<<r|a,ka=l+t}else Ca=1<<l|n<<r|a,ka=t}function Tl(t){t.return!==null&&(Ka(t,1),uu(t,1,0))}function Rl(t){for(;t===bo;)bo=Nr[--Pr],Nr[Pr]=null,Ss=Nr[--Pr],Nr[Pr]=null;for(;t===vi;)vi=aa[--ia],aa[ia]=null,ka=aa[--ia],aa[ia]=null,Ca=aa[--ia],aa[ia]=null}function du(t,e){aa[ia++]=Ca,aa[ia++]=ka,aa[ia++]=vi,Ca=e.id,ka=e.overflow,vi=t}var bn=null,Ye=null,Ee=!1,xi=null,ra=!1,Cl=Error(s(519));function _i(t){var e=Error(s(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw ws(na(e,t)),Cl}function hu(t){var e=t.stateNode,n=t.type,a=t.memoizedProps;switch(e[Ue]=t,e[$e]=a,n){case"dialog":be("cancel",e),be("close",e);break;case"iframe":case"object":case"embed":be("load",e);break;case"video":case"audio":for(n=0;n<Xs.length;n++)be(Xs[n],e);break;case"source":be("error",e);break;case"img":case"image":case"link":be("error",e),be("load",e);break;case"details":be("toggle",e);break;case"input":be("invalid",e),mr(e,a.value,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name,!0);break;case"select":be("invalid",e);break;case"textarea":be("invalid",e),Xi(e,a.value,a.defaultValue,a.children)}n=a.children,typeof n!="string"&&typeof n!="number"&&typeof n!="bigint"||e.textContent===""+n||a.suppressHydrationWarning===!0||kh(e.textContent,n)?(a.popover!=null&&(be("beforetoggle",e),be("toggle",e)),a.onScroll!=null&&be("scroll",e),a.onScrollEnd!=null&&be("scrollend",e),a.onClick!=null&&(e.onclick=Pn),e=!0):e=!1,e||_i(t,!0)}function fu(t){for(bn=t.return;bn;)switch(bn.tag){case 5:case 31:case 13:ra=!1;return;case 27:case 3:ra=!0;return;default:bn=bn.return}}function Lr(t){if(t!==bn)return!1;if(!Ee)return fu(t),Ee=!0,!1;var e=t.tag,n;if((n=e!==3&&e!==27)&&((n=e===5)&&(n=t.type,n=!(n!=="form"&&n!=="button")||Kc(t.type,t.memoizedProps)),n=!n),n&&Ye&&_i(t),fu(t),e===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(s(317));Ye=zh(t)}else if(e===31){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(s(317));Ye=zh(t)}else e===27?(e=Ye,Pi(t.type)?(t=Zc,Zc=null,Ye=t):Ye=e):Ye=bn?oa(t.stateNode.nextSibling):null;return!0}function nr(){Ye=bn=null,Ee=!1}function kl(){var t=xi;return t!==null&&(In===null?In=t:In.push.apply(In,t),xi=null),t}function ws(t){xi===null?xi=[t]:xi.push(t)}var Ml=v(null),ar=null,Xa=null;function Ai(t,e,n){U(Ml,e._currentValue),e._currentValue=n}function Va(t){t._currentValue=Ml.current,F(Ml)}function jl(t,e,n){for(;t!==null;){var a=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,a!==null&&(a.childLanes|=e)):a!==null&&(a.childLanes&e)!==e&&(a.childLanes|=e),t===n)break;t=t.return}}function Dl(t,e,n,a){var r=t.child;for(r!==null&&(r.return=t);r!==null;){var l=r.dependencies;if(l!==null){var w=r.child;l=l.firstContext;t:for(;l!==null;){var B=l;l=r;for(var ot=0;ot<e.length;ot++)if(B.context===e[ot]){l.lanes|=n,B=l.alternate,B!==null&&(B.lanes|=n),jl(l.return,n,t),a||(w=null);break t}l=B.next}}else if(r.tag===18){if(w=r.return,w===null)throw Error(s(341));w.lanes|=n,l=w.alternate,l!==null&&(l.lanes|=n),jl(w,n,t),w=null}else w=r.child;if(w!==null)w.return=r;else for(w=r;w!==null;){if(w===t){w=null;break}if(r=w.sibling,r!==null){r.return=w.return,w=r;break}w=w.return}r=w}}function Fr(t,e,n,a){t=null;for(var r=e,l=!1;r!==null;){if(!l){if((r.flags&524288)!==0)l=!0;else if((r.flags&262144)!==0)break}if(r.tag===10){var w=r.alternate;if(w===null)throw Error(s(387));if(w=w.memoizedProps,w!==null){var B=r.type;Tn(r.pendingProps.value,w.value)||(t!==null?t.push(B):t=[B])}}else if(r===j.current){if(w=r.alternate,w===null)throw Error(s(387));w.memoizedState.memoizedState!==r.memoizedState.memoizedState&&(t!==null?t.push(Js):t=[Js])}r=r.return}t!==null&&Dl(e,t,n,a),e.flags|=262144}function vo(t){for(t=t.firstContext;t!==null;){if(!Tn(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function ir(t){ar=t,Xa=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function vn(t){return pu(ar,t)}function xo(t,e){return ar===null&&ir(t),pu(t,e)}function pu(t,e){var n=e._currentValue;if(e={context:e,memoizedValue:n,next:null},Xa===null){if(t===null)throw Error(s(308));Xa=e,t.dependencies={lanes:0,firstContext:e},t.flags|=524288}else Xa=Xa.next=e;return n}var uf=typeof AbortController<"u"?AbortController:function(){var t=[],e=this.signal={aborted:!1,addEventListener:function(n,a){t.push(a)}};this.abort=function(){e.aborted=!0,t.forEach(function(n){return n()})}},df=f.unstable_scheduleCallback,hf=f.unstable_NormalPriority,rn={$$typeof:V,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Ol(){return{controller:new uf,data:new Map,refCount:0}}function Ts(t){t.refCount--,t.refCount===0&&df(hf,function(){t.controller.abort()})}var Rs=null,Nl=0,zr=0,Ir=null;function ff(t,e){if(Rs===null){var n=Rs=[];Nl=0,zr=Fc(),Ir={status:"pending",value:void 0,then:function(a){n.push(a)}}}return Nl++,e.then(mu,mu),e}function mu(){if(--Nl===0&&Rs!==null){Ir!==null&&(Ir.status="fulfilled");var t=Rs;Rs=null,zr=0,Ir=null;for(var e=0;e<t.length;e++)(0,t[e])()}}function pf(t,e){var n=[],a={status:"pending",value:null,reason:null,then:function(r){n.push(r)}};return t.then(function(){a.status="fulfilled",a.value=e;for(var r=0;r<n.length;r++)(0,n[r])(e)},function(r){for(a.status="rejected",a.reason=r,r=0;r<n.length;r++)(0,n[r])(void 0)}),a}var gu=nt.S;nt.S=function(t,e){$d=oe(),typeof e=="object"&&e!==null&&typeof e.then=="function"&&ff(t,e),gu!==null&&gu(t,e)};var rr=v(null);function Pl(){var t=rr.current;return t!==null?t:qe.pooledCache}function _o(t,e){e===null?U(rr,rr.current):U(rr,e.pool)}function yu(){var t=Pl();return t===null?null:{parent:rn._currentValue,pool:t}}var qr=Error(s(460)),Ll=Error(s(474)),Ao=Error(s(542)),Eo={then:function(){}};function bu(t){return t=t.status,t==="fulfilled"||t==="rejected"}function vu(t,e,n){switch(n=t[n],n===void 0?t.push(e):n!==e&&(e.then(Pn,Pn),e=n),e.status){case"fulfilled":return e.value;case"rejected":throw t=e.reason,_u(t),t;default:if(typeof e.status=="string")e.then(Pn,Pn);else{if(t=qe,t!==null&&100<t.shellSuspendCounter)throw Error(s(482));t=e,t.status="pending",t.then(function(a){if(e.status==="pending"){var r=e;r.status="fulfilled",r.value=a}},function(a){if(e.status==="pending"){var r=e;r.status="rejected",r.reason=a}})}switch(e.status){case"fulfilled":return e.value;case"rejected":throw t=e.reason,_u(t),t}throw or=e,qr}}function sr(t){try{var e=t._init;return e(t._payload)}catch(n){throw n!==null&&typeof n=="object"&&typeof n.then=="function"?(or=n,qr):n}}var or=null;function xu(){if(or===null)throw Error(s(459));var t=or;return or=null,t}function _u(t){if(t===qr||t===Ao)throw Error(s(483))}var Br=null,Cs=0;function So(t){var e=Cs;return Cs+=1,Br===null&&(Br=[]),vu(Br,t,e)}function ks(t,e){e=e.props.ref,t.ref=e!==void 0?e:null}function wo(t,e){throw e.$$typeof===x?Error(s(525)):(t=Object.prototype.toString.call(e),Error(s(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)))}function Au(t){function e(bt,mt){if(t){var Et=bt.deletions;Et===null?(bt.deletions=[mt],bt.flags|=16):Et.push(mt)}}function n(bt,mt){if(!t)return null;for(;mt!==null;)e(bt,mt),mt=mt.sibling;return null}function a(bt){for(var mt=new Map;bt!==null;)bt.key!==null?mt.set(bt.key,bt):mt.set(bt.index,bt),bt=bt.sibling;return mt}function r(bt,mt){return bt=Ya(bt,mt),bt.index=0,bt.sibling=null,bt}function l(bt,mt,Et){return bt.index=Et,t?(Et=bt.alternate,Et!==null?(Et=Et.index,Et<mt?(bt.flags|=67108866,mt):Et):(bt.flags|=67108866,mt)):(bt.flags|=1048576,mt)}function w(bt){return t&&bt.alternate===null&&(bt.flags|=67108866),bt}function B(bt,mt,Et,Ft){return mt===null||mt.tag!==6?(mt=Sl(Et,bt.mode,Ft),mt.return=bt,mt):(mt=r(mt,Et),mt.return=bt,mt)}function ot(bt,mt,Et,Ft){var se=Et.type;return se===S?Nt(bt,mt,Et.props.children,Ft,Et.key):mt!==null&&(mt.elementType===se||typeof se=="object"&&se!==null&&se.$$typeof===rt&&sr(se)===mt.type)?(mt=r(mt,Et.props),ks(mt,Et),mt.return=bt,mt):(mt=yo(Et.type,Et.key,Et.props,null,bt.mode,Ft),ks(mt,Et),mt.return=bt,mt)}function St(bt,mt,Et,Ft){return mt===null||mt.tag!==4||mt.stateNode.containerInfo!==Et.containerInfo||mt.stateNode.implementation!==Et.implementation?(mt=wl(Et,bt.mode,Ft),mt.return=bt,mt):(mt=r(mt,Et.children||[]),mt.return=bt,mt)}function Nt(bt,mt,Et,Ft,se){return mt===null||mt.tag!==7?(mt=er(Et,bt.mode,Ft,se),mt.return=bt,mt):(mt=r(mt,Et),mt.return=bt,mt)}function It(bt,mt,Et){if(typeof mt=="string"&&mt!==""||typeof mt=="number"||typeof mt=="bigint")return mt=Sl(""+mt,bt.mode,Et),mt.return=bt,mt;if(typeof mt=="object"&&mt!==null){switch(mt.$$typeof){case E:return Et=yo(mt.type,mt.key,mt.props,null,bt.mode,Et),ks(Et,mt),Et.return=bt,Et;case p:return mt=wl(mt,bt.mode,Et),mt.return=bt,mt;case rt:return mt=sr(mt),It(bt,mt,Et)}if(Yt(mt)||Dt(mt))return mt=er(mt,bt.mode,Et,null),mt.return=bt,mt;if(typeof mt.then=="function")return It(bt,So(mt),Et);if(mt.$$typeof===V)return It(bt,xo(bt,mt),Et);wo(bt,mt)}return null}function Ct(bt,mt,Et,Ft){var se=mt!==null?mt.key:null;if(typeof Et=="string"&&Et!==""||typeof Et=="number"||typeof Et=="bigint")return se!==null?null:B(bt,mt,""+Et,Ft);if(typeof Et=="object"&&Et!==null){switch(Et.$$typeof){case E:return Et.key===se?ot(bt,mt,Et,Ft):null;case p:return Et.key===se?St(bt,mt,Et,Ft):null;case rt:return Et=sr(Et),Ct(bt,mt,Et,Ft)}if(Yt(Et)||Dt(Et))return se!==null?null:Nt(bt,mt,Et,Ft,null);if(typeof Et.then=="function")return Ct(bt,mt,So(Et),Ft);if(Et.$$typeof===V)return Ct(bt,mt,xo(bt,Et),Ft);wo(bt,Et)}return null}function kt(bt,mt,Et,Ft,se){if(typeof Ft=="string"&&Ft!==""||typeof Ft=="number"||typeof Ft=="bigint")return bt=bt.get(Et)||null,B(mt,bt,""+Ft,se);if(typeof Ft=="object"&&Ft!==null){switch(Ft.$$typeof){case E:return bt=bt.get(Ft.key===null?Et:Ft.key)||null,ot(mt,bt,Ft,se);case p:return bt=bt.get(Ft.key===null?Et:Ft.key)||null,St(mt,bt,Ft,se);case rt:return Ft=sr(Ft),kt(bt,mt,Et,Ft,se)}if(Yt(Ft)||Dt(Ft))return bt=bt.get(Et)||null,Nt(mt,bt,Ft,se,null);if(typeof Ft.then=="function")return kt(bt,mt,Et,So(Ft),se);if(Ft.$$typeof===V)return kt(bt,mt,Et,xo(mt,Ft),se);wo(mt,Ft)}return null}function ne(bt,mt,Et,Ft){for(var se=null,Se=null,ae=mt,fe=mt=0,xe=null;ae!==null&&fe<Et.length;fe++){ae.index>fe?(xe=ae,ae=null):xe=ae.sibling;var we=Ct(bt,ae,Et[fe],Ft);if(we===null){ae===null&&(ae=xe);break}t&&ae&&we.alternate===null&&e(bt,ae),mt=l(we,mt,fe),Se===null?se=we:Se.sibling=we,Se=we,ae=xe}if(fe===Et.length)return n(bt,ae),Ee&&Ka(bt,fe),se;if(ae===null){for(;fe<Et.length;fe++)ae=It(bt,Et[fe],Ft),ae!==null&&(mt=l(ae,mt,fe),Se===null?se=ae:Se.sibling=ae,Se=ae);return Ee&&Ka(bt,fe),se}for(ae=a(ae);fe<Et.length;fe++)xe=kt(ae,bt,fe,Et[fe],Ft),xe!==null&&(t&&xe.alternate!==null&&ae.delete(xe.key===null?fe:xe.key),mt=l(xe,mt,fe),Se===null?se=xe:Se.sibling=xe,Se=xe);return t&&ae.forEach(function(qi){return e(bt,qi)}),Ee&&Ka(bt,fe),se}function ce(bt,mt,Et,Ft){if(Et==null)throw Error(s(151));for(var se=null,Se=null,ae=mt,fe=mt=0,xe=null,we=Et.next();ae!==null&&!we.done;fe++,we=Et.next()){ae.index>fe?(xe=ae,ae=null):xe=ae.sibling;var qi=Ct(bt,ae,we.value,Ft);if(qi===null){ae===null&&(ae=xe);break}t&&ae&&qi.alternate===null&&e(bt,ae),mt=l(qi,mt,fe),Se===null?se=qi:Se.sibling=qi,Se=qi,ae=xe}if(we.done)return n(bt,ae),Ee&&Ka(bt,fe),se;if(ae===null){for(;!we.done;fe++,we=Et.next())we=It(bt,we.value,Ft),we!==null&&(mt=l(we,mt,fe),Se===null?se=we:Se.sibling=we,Se=we);return Ee&&Ka(bt,fe),se}for(ae=a(ae);!we.done;fe++,we=Et.next())we=kt(ae,bt,fe,we.value,Ft),we!==null&&(t&&we.alternate!==null&&ae.delete(we.key===null?fe:we.key),mt=l(we,mt,fe),Se===null?se=we:Se.sibling=we,Se=we);return t&&ae.forEach(function(wp){return e(bt,wp)}),Ee&&Ka(bt,fe),se}function ze(bt,mt,Et,Ft){if(typeof Et=="object"&&Et!==null&&Et.type===S&&Et.key===null&&(Et=Et.props.children),typeof Et=="object"&&Et!==null){switch(Et.$$typeof){case E:t:{for(var se=Et.key;mt!==null;){if(mt.key===se){if(se=Et.type,se===S){if(mt.tag===7){n(bt,mt.sibling),Ft=r(mt,Et.props.children),Ft.return=bt,bt=Ft;break t}}else if(mt.elementType===se||typeof se=="object"&&se!==null&&se.$$typeof===rt&&sr(se)===mt.type){n(bt,mt.sibling),Ft=r(mt,Et.props),ks(Ft,Et),Ft.return=bt,bt=Ft;break t}n(bt,mt);break}else e(bt,mt);mt=mt.sibling}Et.type===S?(Ft=er(Et.props.children,bt.mode,Ft,Et.key),Ft.return=bt,bt=Ft):(Ft=yo(Et.type,Et.key,Et.props,null,bt.mode,Ft),ks(Ft,Et),Ft.return=bt,bt=Ft)}return w(bt);case p:t:{for(se=Et.key;mt!==null;){if(mt.key===se)if(mt.tag===4&&mt.stateNode.containerInfo===Et.containerInfo&&mt.stateNode.implementation===Et.implementation){n(bt,mt.sibling),Ft=r(mt,Et.children||[]),Ft.return=bt,bt=Ft;break t}else{n(bt,mt);break}else e(bt,mt);mt=mt.sibling}Ft=wl(Et,bt.mode,Ft),Ft.return=bt,bt=Ft}return w(bt);case rt:return Et=sr(Et),ze(bt,mt,Et,Ft)}if(Yt(Et))return ne(bt,mt,Et,Ft);if(Dt(Et)){if(se=Dt(Et),typeof se!="function")throw Error(s(150));return Et=se.call(Et),ce(bt,mt,Et,Ft)}if(typeof Et.then=="function")return ze(bt,mt,So(Et),Ft);if(Et.$$typeof===V)return ze(bt,mt,xo(bt,Et),Ft);wo(bt,Et)}return typeof Et=="string"&&Et!==""||typeof Et=="number"||typeof Et=="bigint"?(Et=""+Et,mt!==null&&mt.tag===6?(n(bt,mt.sibling),Ft=r(mt,Et),Ft.return=bt,bt=Ft):(n(bt,mt),Ft=Sl(Et,bt.mode,Ft),Ft.return=bt,bt=Ft),w(bt)):n(bt,mt)}return function(bt,mt,Et,Ft){try{Cs=0;var se=ze(bt,mt,Et,Ft);return Br=null,se}catch(ae){if(ae===qr||ae===Ao)throw ae;var Se=Gn(29,ae,null,bt.mode);return Se.lanes=Ft,Se.return=bt,Se}}}var lr=Au(!0),Eu=Au(!1),Ei=!1;function Fl(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function zl(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function Si(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function wi(t,e,n){var a=t.updateQueue;if(a===null)return null;if(a=a.shared,(Ce&2)!==0){var r=a.pending;return r===null?e.next=e:(e.next=r.next,r.next=e),a.pending=e,e=bi(t),Ra(t,null,n),e}return Pe(t,a,e,n),bi(t)}function Ms(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194048)!==0)){var a=e.lanes;a&=t.pendingLanes,n|=a,e.lanes=n,Te(t,n)}}function Il(t,e){var n=t.updateQueue,a=t.alternate;if(a!==null&&(a=a.updateQueue,n===a)){var r=null,l=null;if(n=n.firstBaseUpdate,n!==null){do{var w={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};l===null?r=l=w:l=l.next=w,n=n.next}while(n!==null);l===null?r=l=e:l=l.next=e}else r=l=e;n={baseState:a.baseState,firstBaseUpdate:r,lastBaseUpdate:l,shared:a.shared,callbacks:a.callbacks},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}var ql=!1;function js(){if(ql){var t=Ir;if(t!==null)throw t}}function Ds(t,e,n,a){ql=!1;var r=t.updateQueue;Ei=!1;var l=r.firstBaseUpdate,w=r.lastBaseUpdate,B=r.shared.pending;if(B!==null){r.shared.pending=null;var ot=B,St=ot.next;ot.next=null,w===null?l=St:w.next=St,w=ot;var Nt=t.alternate;Nt!==null&&(Nt=Nt.updateQueue,B=Nt.lastBaseUpdate,B!==w&&(B===null?Nt.firstBaseUpdate=St:B.next=St,Nt.lastBaseUpdate=ot))}if(l!==null){var It=r.baseState;w=0,Nt=St=ot=null,B=l;do{var Ct=B.lane&-536870913,kt=Ct!==B.lane;if(kt?(ve&Ct)===Ct:(a&Ct)===Ct){Ct!==0&&Ct===zr&&(ql=!0),Nt!==null&&(Nt=Nt.next={lane:0,tag:B.tag,payload:B.payload,callback:null,next:null});t:{var ne=t,ce=B;Ct=e;var ze=n;switch(ce.tag){case 1:if(ne=ce.payload,typeof ne=="function"){It=ne.call(ze,It,Ct);break t}It=ne;break t;case 3:ne.flags=ne.flags&-65537|128;case 0:if(ne=ce.payload,Ct=typeof ne=="function"?ne.call(ze,It,Ct):ne,Ct==null)break t;It=h({},It,Ct);break t;case 2:Ei=!0}}Ct=B.callback,Ct!==null&&(t.flags|=64,kt&&(t.flags|=8192),kt=r.callbacks,kt===null?r.callbacks=[Ct]:kt.push(Ct))}else kt={lane:Ct,tag:B.tag,payload:B.payload,callback:B.callback,next:null},Nt===null?(St=Nt=kt,ot=It):Nt=Nt.next=kt,w|=Ct;if(B=B.next,B===null){if(B=r.shared.pending,B===null)break;kt=B,B=kt.next,kt.next=null,r.lastBaseUpdate=kt,r.shared.pending=null}}while(!0);Nt===null&&(ot=It),r.baseState=ot,r.firstBaseUpdate=St,r.lastBaseUpdate=Nt,l===null&&(r.shared.lanes=0),Mi|=w,t.lanes=w,t.memoizedState=It}}function Su(t,e){if(typeof t!="function")throw Error(s(191,t));t.call(e)}function wu(t,e){var n=t.callbacks;if(n!==null)for(t.callbacks=null,t=0;t<n.length;t++)Su(n[t],e)}var Ur=v(null),To=v(0);function Tu(t,e){t=ii,U(To,t),U(Ur,e),ii=t|e.baseLanes}function Bl(){U(To,ii),U(Ur,Ur.current)}function Ul(){ii=To.current,F(Ur),F(To)}var Yn=v(null),sa=null;function Ti(t){var e=t.alternate;U(en,en.current&1),U(Yn,t),sa===null&&(e===null||Ur.current!==null||e.memoizedState!==null)&&(sa=t)}function Hl(t){U(en,en.current),U(Yn,t),sa===null&&(sa=t)}function Ru(t){t.tag===22?(U(en,en.current),U(Yn,t),sa===null&&(sa=t)):Ri()}function Ri(){U(en,en.current),U(Yn,Yn.current)}function Kn(t){F(Yn),sa===t&&(sa=null),F(en)}var en=v(0);function Ro(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||Wc(n)||Qc(n)))return e}else if(e.tag===19&&(e.memoizedProps.revealOrder==="forwards"||e.memoizedProps.revealOrder==="backwards"||e.memoizedProps.revealOrder==="unstable_legacy-backwards"||e.memoizedProps.revealOrder==="together")){if((e.flags&128)!==0)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Wa=0,he=null,Le=null,sn=null,Co=!1,Hr=!1,cr=!1,ko=0,Os=0,Gr=null,mf=0;function Ze(){throw Error(s(321))}function Gl(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Tn(t[n],e[n]))return!1;return!0}function Yl(t,e,n,a,r,l){return Wa=l,he=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,nt.H=t===null||t.memoizedState===null?ud:sc,cr=!1,l=n(a,r),cr=!1,Hr&&(l=ku(e,n,a,r)),Cu(t),l}function Cu(t){nt.H=Ls;var e=Le!==null&&Le.next!==null;if(Wa=0,sn=Le=he=null,Co=!1,Os=0,Gr=null,e)throw Error(s(300));t===null||on||(t=t.dependencies,t!==null&&vo(t)&&(on=!0))}function ku(t,e,n,a){he=t;var r=0;do{if(Hr&&(Gr=null),Os=0,Hr=!1,25<=r)throw Error(s(301));if(r+=1,sn=Le=null,t.updateQueue!=null){var l=t.updateQueue;l.lastEffect=null,l.events=null,l.stores=null,l.memoCache!=null&&(l.memoCache.index=0)}nt.H=dd,l=e(n,a)}while(Hr);return l}function gf(){var t=nt.H,e=t.useState()[0];return e=typeof e.then=="function"?Ns(e):e,t=t.useState()[0],(Le!==null?Le.memoizedState:null)!==t&&(he.flags|=1024),e}function Kl(){var t=ko!==0;return ko=0,t}function Xl(t,e,n){e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~n}function Vl(t){if(Co){for(t=t.memoizedState;t!==null;){var e=t.queue;e!==null&&(e.pending=null),t=t.next}Co=!1}Wa=0,sn=Le=he=null,Hr=!1,Os=ko=0,Gr=null}function Dn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return sn===null?he.memoizedState=sn=t:sn=sn.next=t,sn}function nn(){if(Le===null){var t=he.alternate;t=t!==null?t.memoizedState:null}else t=Le.next;var e=sn===null?he.memoizedState:sn.next;if(e!==null)sn=e,Le=t;else{if(t===null)throw he.alternate===null?Error(s(467)):Error(s(310));Le=t,t={memoizedState:Le.memoizedState,baseState:Le.baseState,baseQueue:Le.baseQueue,queue:Le.queue,next:null},sn===null?he.memoizedState=sn=t:sn=sn.next=t}return sn}function Mo(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Ns(t){var e=Os;return Os+=1,Gr===null&&(Gr=[]),t=vu(Gr,t,e),e=he,(sn===null?e.memoizedState:sn.next)===null&&(e=e.alternate,nt.H=e===null||e.memoizedState===null?ud:sc),t}function jo(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return Ns(t);if(t.$$typeof===V)return vn(t)}throw Error(s(438,String(t)))}function Wl(t){var e=null,n=he.updateQueue;if(n!==null&&(e=n.memoCache),e==null){var a=he.alternate;a!==null&&(a=a.updateQueue,a!==null&&(a=a.memoCache,a!=null&&(e={data:a.data.map(function(r){return r.slice()}),index:0})))}if(e==null&&(e={data:[],index:0}),n===null&&(n=Mo(),he.updateQueue=n),n.memoCache=e,n=e.data[e.index],n===void 0)for(n=e.data[e.index]=Array(t),a=0;a<t;a++)n[a]=lt;return e.index++,n}function Qa(t,e){return typeof e=="function"?e(t):e}function Do(t){var e=nn();return Ql(e,Le,t)}function Ql(t,e,n){var a=t.queue;if(a===null)throw Error(s(311));a.lastRenderedReducer=n;var r=t.baseQueue,l=a.pending;if(l!==null){if(r!==null){var w=r.next;r.next=l.next,l.next=w}e.baseQueue=r=l,a.pending=null}if(l=t.baseState,r===null)t.memoizedState=l;else{e=r.next;var B=w=null,ot=null,St=e,Nt=!1;do{var It=St.lane&-536870913;if(It!==St.lane?(ve&It)===It:(Wa&It)===It){var Ct=St.revertLane;if(Ct===0)ot!==null&&(ot=ot.next={lane:0,revertLane:0,gesture:null,action:St.action,hasEagerState:St.hasEagerState,eagerState:St.eagerState,next:null}),It===zr&&(Nt=!0);else if((Wa&Ct)===Ct){St=St.next,Ct===zr&&(Nt=!0);continue}else It={lane:0,revertLane:St.revertLane,gesture:null,action:St.action,hasEagerState:St.hasEagerState,eagerState:St.eagerState,next:null},ot===null?(B=ot=It,w=l):ot=ot.next=It,he.lanes|=Ct,Mi|=Ct;It=St.action,cr&&n(l,It),l=St.hasEagerState?St.eagerState:n(l,It)}else Ct={lane:It,revertLane:St.revertLane,gesture:St.gesture,action:St.action,hasEagerState:St.hasEagerState,eagerState:St.eagerState,next:null},ot===null?(B=ot=Ct,w=l):ot=ot.next=Ct,he.lanes|=It,Mi|=It;St=St.next}while(St!==null&&St!==e);if(ot===null?w=l:ot.next=B,!Tn(l,t.memoizedState)&&(on=!0,Nt&&(n=Ir,n!==null)))throw n;t.memoizedState=l,t.baseState=w,t.baseQueue=ot,a.lastRenderedState=l}return r===null&&(a.lanes=0),[t.memoizedState,a.dispatch]}function Zl(t){var e=nn(),n=e.queue;if(n===null)throw Error(s(311));n.lastRenderedReducer=t;var a=n.dispatch,r=n.pending,l=e.memoizedState;if(r!==null){n.pending=null;var w=r=r.next;do l=t(l,w.action),w=w.next;while(w!==r);Tn(l,e.memoizedState)||(on=!0),e.memoizedState=l,e.baseQueue===null&&(e.baseState=l),n.lastRenderedState=l}return[l,a]}function Mu(t,e,n){var a=he,r=nn(),l=Ee;if(l){if(n===void 0)throw Error(s(407));n=n()}else n=e();var w=!Tn((Le||r).memoizedState,n);if(w&&(r.memoizedState=n,on=!0),r=r.queue,tc(Ou.bind(null,a,r,t),[t]),r.getSnapshot!==e||w||sn!==null&&sn.memoizedState.tag&1){if(a.flags|=2048,Yr(9,{destroy:void 0},Du.bind(null,a,r,n,e),null),qe===null)throw Error(s(349));l||(Wa&127)!==0||ju(a,e,n)}return n}function ju(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=he.updateQueue,e===null?(e=Mo(),he.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function Du(t,e,n,a){e.value=n,e.getSnapshot=a,Nu(e)&&Pu(t)}function Ou(t,e,n){return n(function(){Nu(e)&&Pu(t)})}function Nu(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Tn(t,n)}catch{return!0}}function Pu(t){var e=Me(t,2);e!==null&&qn(e,t,2)}function Jl(t){var e=Dn();if(typeof t=="function"){var n=t;if(t=n(),cr){vt(!0);try{n()}finally{vt(!1)}}}return e.memoizedState=e.baseState=t,e.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Qa,lastRenderedState:t},e}function Lu(t,e,n,a){return t.baseState=n,Ql(t,Le,typeof a=="function"?a:Qa)}function yf(t,e,n,a,r){if(Po(t))throw Error(s(485));if(t=e.action,t!==null){var l={payload:r,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(w){l.listeners.push(w)}};nt.T!==null?n(!0):l.isTransition=!1,a(l),n=e.pending,n===null?(l.next=e.pending=l,Fu(e,l)):(l.next=n.next,e.pending=n.next=l)}}function Fu(t,e){var n=e.action,a=e.payload,r=t.state;if(e.isTransition){var l=nt.T,w={};nt.T=w;try{var B=n(r,a),ot=nt.S;ot!==null&&ot(w,B),zu(t,e,B)}catch(St){$l(t,e,St)}finally{l!==null&&w.types!==null&&(l.types=w.types),nt.T=l}}else try{l=n(r,a),zu(t,e,l)}catch(St){$l(t,e,St)}}function zu(t,e,n){n!==null&&typeof n=="object"&&typeof n.then=="function"?n.then(function(a){Iu(t,e,a)},function(a){return $l(t,e,a)}):Iu(t,e,n)}function Iu(t,e,n){e.status="fulfilled",e.value=n,qu(e),t.state=n,e=t.pending,e!==null&&(n=e.next,n===e?t.pending=null:(n=n.next,e.next=n,Fu(t,n)))}function $l(t,e,n){var a=t.pending;if(t.pending=null,a!==null){a=a.next;do e.status="rejected",e.reason=n,qu(e),e=e.next;while(e!==a)}t.action=null}function qu(t){t=t.listeners;for(var e=0;e<t.length;e++)(0,t[e])()}function Bu(t,e){return e}function Uu(t,e){if(Ee){var n=qe.formState;if(n!==null){t:{var a=he;if(Ee){if(Ye){e:{for(var r=Ye,l=ra;r.nodeType!==8;){if(!l){r=null;break e}if(r=oa(r.nextSibling),r===null){r=null;break e}}l=r.data,r=l==="F!"||l==="F"?r:null}if(r){Ye=oa(r.nextSibling),a=r.data==="F!";break t}}_i(a)}a=!1}a&&(e=n[0])}}return n=Dn(),n.memoizedState=n.baseState=e,a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Bu,lastRenderedState:e},n.queue=a,n=od.bind(null,he,a),a.dispatch=n,a=Jl(!1),l=rc.bind(null,he,!1,a.queue),a=Dn(),r={state:e,dispatch:null,action:t,pending:null},a.queue=r,n=yf.bind(null,he,r,l,n),r.dispatch=n,a.memoizedState=t,[e,n,!1]}function Hu(t){var e=nn();return Gu(e,Le,t)}function Gu(t,e,n){if(e=Ql(t,e,Bu)[0],t=Do(Qa)[0],typeof e=="object"&&e!==null&&typeof e.then=="function")try{var a=Ns(e)}catch(w){throw w===qr?Ao:w}else a=e;e=nn();var r=e.queue,l=r.dispatch;return n!==e.memoizedState&&(he.flags|=2048,Yr(9,{destroy:void 0},bf.bind(null,r,n),null)),[a,l,t]}function bf(t,e){t.action=e}function Yu(t){var e=nn(),n=Le;if(n!==null)return Gu(e,n,t);nn(),e=e.memoizedState,n=nn();var a=n.queue.dispatch;return n.memoizedState=t,[e,a,!1]}function Yr(t,e,n,a){return t={tag:t,create:n,deps:a,inst:e,next:null},e=he.updateQueue,e===null&&(e=Mo(),he.updateQueue=e),n=e.lastEffect,n===null?e.lastEffect=t.next=t:(a=n.next,n.next=t,t.next=a,e.lastEffect=t),t}function Ku(){return nn().memoizedState}function Oo(t,e,n,a){var r=Dn();he.flags|=t,r.memoizedState=Yr(1|e,{destroy:void 0},n,a===void 0?null:a)}function No(t,e,n,a){var r=nn();a=a===void 0?null:a;var l=r.memoizedState.inst;Le!==null&&a!==null&&Gl(a,Le.memoizedState.deps)?r.memoizedState=Yr(e,l,n,a):(he.flags|=t,r.memoizedState=Yr(1|e,l,n,a))}function Xu(t,e){Oo(8390656,8,t,e)}function tc(t,e){No(2048,8,t,e)}function vf(t){he.flags|=4;var e=he.updateQueue;if(e===null)e=Mo(),he.updateQueue=e,e.events=[t];else{var n=e.events;n===null?e.events=[t]:n.push(t)}}function Vu(t){var e=nn().memoizedState;return vf({ref:e,nextImpl:t}),function(){if((Ce&2)!==0)throw Error(s(440));return e.impl.apply(void 0,arguments)}}function Wu(t,e){return No(4,2,t,e)}function Qu(t,e){return No(4,4,t,e)}function Zu(t,e){if(typeof e=="function"){t=t();var n=e(t);return function(){typeof n=="function"?n():e(null)}}if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Ju(t,e,n){n=n!=null?n.concat([t]):null,No(4,4,Zu.bind(null,e,t),n)}function ec(){}function $u(t,e){var n=nn();e=e===void 0?null:e;var a=n.memoizedState;return e!==null&&Gl(e,a[1])?a[0]:(n.memoizedState=[t,e],t)}function td(t,e){var n=nn();e=e===void 0?null:e;var a=n.memoizedState;if(e!==null&&Gl(e,a[1]))return a[0];if(a=t(),cr){vt(!0);try{t()}finally{vt(!1)}}return n.memoizedState=[a,e],a}function nc(t,e,n){return n===void 0||(Wa&1073741824)!==0&&(ve&261930)===0?t.memoizedState=e:(t.memoizedState=n,t=eh(),he.lanes|=t,Mi|=t,n)}function ed(t,e,n,a){return Tn(n,e)?n:Ur.current!==null?(t=nc(t,n,a),Tn(t,e)||(on=!0),t):(Wa&42)===0||(Wa&1073741824)!==0&&(ve&261930)===0?(on=!0,t.memoizedState=n):(t=eh(),he.lanes|=t,Mi|=t,e)}function nd(t,e,n,a,r){var l=W.p;W.p=l!==0&&8>l?l:8;var w=nt.T,B={};nt.T=B,rc(t,!1,e,n);try{var ot=r(),St=nt.S;if(St!==null&&St(B,ot),ot!==null&&typeof ot=="object"&&typeof ot.then=="function"){var Nt=pf(ot,a);Ps(t,e,Nt,Wn(t))}else Ps(t,e,a,Wn(t))}catch(It){Ps(t,e,{then:function(){},status:"rejected",reason:It},Wn())}finally{W.p=l,w!==null&&B.types!==null&&(w.types=B.types),nt.T=w}}function xf(){}function ac(t,e,n,a){if(t.tag!==5)throw Error(s(476));var r=ad(t).queue;nd(t,r,e,D,n===null?xf:function(){return id(t),n(a)})}function ad(t){var e=t.memoizedState;if(e!==null)return e;e={memoizedState:D,baseState:D,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Qa,lastRenderedState:D},next:null};var n={};return e.next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Qa,lastRenderedState:n},next:null},t.memoizedState=e,t=t.alternate,t!==null&&(t.memoizedState=e),e}function id(t){var e=ad(t);e.next===null&&(e=t.alternate.memoizedState),Ps(t,e.next.queue,{},Wn())}function ic(){return vn(Js)}function rd(){return nn().memoizedState}function sd(){return nn().memoizedState}function _f(t){for(var e=t.return;e!==null;){switch(e.tag){case 24:case 3:var n=Wn();t=Si(n);var a=wi(e,t,n);a!==null&&(qn(a,e,n),Ms(a,e,n)),e={cache:Ol()},t.payload=e;return}e=e.return}}function Af(t,e,n){var a=Wn();n={lane:a,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null},Po(t)?ld(e,n):(n=Rn(t,e,n,a),n!==null&&(qn(n,t,a),cd(n,e,a)))}function od(t,e,n){var a=Wn();Ps(t,e,n,a)}function Ps(t,e,n,a){var r={lane:a,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null};if(Po(t))ld(e,r);else{var l=t.alternate;if(t.lanes===0&&(l===null||l.lanes===0)&&(l=e.lastRenderedReducer,l!==null))try{var w=e.lastRenderedState,B=l(w,n);if(r.hasEagerState=!0,r.eagerState=B,Tn(B,w))return Pe(t,e,r,0),qe===null&&de(),!1}catch{}if(n=Rn(t,e,r,a),n!==null)return qn(n,t,a),cd(n,e,a),!0}return!1}function rc(t,e,n,a){if(a={lane:2,revertLane:Fc(),gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},Po(t)){if(e)throw Error(s(479))}else e=Rn(t,n,a,2),e!==null&&qn(e,t,2)}function Po(t){var e=t.alternate;return t===he||e!==null&&e===he}function ld(t,e){Hr=Co=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function cd(t,e,n){if((n&4194048)!==0){var a=e.lanes;a&=t.pendingLanes,n|=a,e.lanes=n,Te(t,n)}}var Ls={readContext:vn,use:jo,useCallback:Ze,useContext:Ze,useEffect:Ze,useImperativeHandle:Ze,useLayoutEffect:Ze,useInsertionEffect:Ze,useMemo:Ze,useReducer:Ze,useRef:Ze,useState:Ze,useDebugValue:Ze,useDeferredValue:Ze,useTransition:Ze,useSyncExternalStore:Ze,useId:Ze,useHostTransitionStatus:Ze,useFormState:Ze,useActionState:Ze,useOptimistic:Ze,useMemoCache:Ze,useCacheRefresh:Ze};Ls.useEffectEvent=Ze;var ud={readContext:vn,use:jo,useCallback:function(t,e){return Dn().memoizedState=[t,e===void 0?null:e],t},useContext:vn,useEffect:Xu,useImperativeHandle:function(t,e,n){n=n!=null?n.concat([t]):null,Oo(4194308,4,Zu.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Oo(4194308,4,t,e)},useInsertionEffect:function(t,e){Oo(4,2,t,e)},useMemo:function(t,e){var n=Dn();e=e===void 0?null:e;var a=t();if(cr){vt(!0);try{t()}finally{vt(!1)}}return n.memoizedState=[a,e],a},useReducer:function(t,e,n){var a=Dn();if(n!==void 0){var r=n(e);if(cr){vt(!0);try{n(e)}finally{vt(!1)}}}else r=e;return a.memoizedState=a.baseState=r,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:r},a.queue=t,t=t.dispatch=Af.bind(null,he,t),[a.memoizedState,t]},useRef:function(t){var e=Dn();return t={current:t},e.memoizedState=t},useState:function(t){t=Jl(t);var e=t.queue,n=od.bind(null,he,e);return e.dispatch=n,[t.memoizedState,n]},useDebugValue:ec,useDeferredValue:function(t,e){var n=Dn();return nc(n,t,e)},useTransition:function(){var t=Jl(!1);return t=nd.bind(null,he,t.queue,!0,!1),Dn().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,e,n){var a=he,r=Dn();if(Ee){if(n===void 0)throw Error(s(407));n=n()}else{if(n=e(),qe===null)throw Error(s(349));(ve&127)!==0||ju(a,e,n)}r.memoizedState=n;var l={value:n,getSnapshot:e};return r.queue=l,Xu(Ou.bind(null,a,l,t),[t]),a.flags|=2048,Yr(9,{destroy:void 0},Du.bind(null,a,l,n,e),null),n},useId:function(){var t=Dn(),e=qe.identifierPrefix;if(Ee){var n=ka,a=Ca;n=(a&~(1<<32-it(a)-1)).toString(32)+n,e="_"+e+"R_"+n,n=ko++,0<n&&(e+="H"+n.toString(32)),e+="_"}else n=mf++,e="_"+e+"r_"+n.toString(32)+"_";return t.memoizedState=e},useHostTransitionStatus:ic,useFormState:Uu,useActionState:Uu,useOptimistic:function(t){var e=Dn();e.memoizedState=e.baseState=t;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return e.queue=n,e=rc.bind(null,he,!0,n),n.dispatch=e,[t,e]},useMemoCache:Wl,useCacheRefresh:function(){return Dn().memoizedState=_f.bind(null,he)},useEffectEvent:function(t){var e=Dn(),n={impl:t};return e.memoizedState=n,function(){if((Ce&2)!==0)throw Error(s(440));return n.impl.apply(void 0,arguments)}}},sc={readContext:vn,use:jo,useCallback:$u,useContext:vn,useEffect:tc,useImperativeHandle:Ju,useInsertionEffect:Wu,useLayoutEffect:Qu,useMemo:td,useReducer:Do,useRef:Ku,useState:function(){return Do(Qa)},useDebugValue:ec,useDeferredValue:function(t,e){var n=nn();return ed(n,Le.memoizedState,t,e)},useTransition:function(){var t=Do(Qa)[0],e=nn().memoizedState;return[typeof t=="boolean"?t:Ns(t),e]},useSyncExternalStore:Mu,useId:rd,useHostTransitionStatus:ic,useFormState:Hu,useActionState:Hu,useOptimistic:function(t,e){var n=nn();return Lu(n,Le,t,e)},useMemoCache:Wl,useCacheRefresh:sd};sc.useEffectEvent=Vu;var dd={readContext:vn,use:jo,useCallback:$u,useContext:vn,useEffect:tc,useImperativeHandle:Ju,useInsertionEffect:Wu,useLayoutEffect:Qu,useMemo:td,useReducer:Zl,useRef:Ku,useState:function(){return Zl(Qa)},useDebugValue:ec,useDeferredValue:function(t,e){var n=nn();return Le===null?nc(n,t,e):ed(n,Le.memoizedState,t,e)},useTransition:function(){var t=Zl(Qa)[0],e=nn().memoizedState;return[typeof t=="boolean"?t:Ns(t),e]},useSyncExternalStore:Mu,useId:rd,useHostTransitionStatus:ic,useFormState:Yu,useActionState:Yu,useOptimistic:function(t,e){var n=nn();return Le!==null?Lu(n,Le,t,e):(n.baseState=t,[t,n.queue.dispatch])},useMemoCache:Wl,useCacheRefresh:sd};dd.useEffectEvent=Vu;function oc(t,e,n,a){e=t.memoizedState,n=n(a,e),n=n==null?e:h({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var lc={enqueueSetState:function(t,e,n){t=t._reactInternals;var a=Wn(),r=Si(a);r.payload=e,n!=null&&(r.callback=n),e=wi(t,r,a),e!==null&&(qn(e,t,a),Ms(e,t,a))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var a=Wn(),r=Si(a);r.tag=1,r.payload=e,n!=null&&(r.callback=n),e=wi(t,r,a),e!==null&&(qn(e,t,a),Ms(e,t,a))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Wn(),a=Si(n);a.tag=2,e!=null&&(a.callback=e),e=wi(t,a,n),e!==null&&(qn(e,t,n),Ms(e,t,n))}};function hd(t,e,n,a,r,l,w){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(a,l,w):e.prototype&&e.prototype.isPureReactComponent?!i(n,a)||!i(r,l):!0}function fd(t,e,n,a){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,a),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,a),e.state!==t&&lc.enqueueReplaceState(e,e.state,null)}function ur(t,e){var n=e;if("ref"in e){n={};for(var a in e)a!=="ref"&&(n[a]=e[a])}if(t=t.defaultProps){n===e&&(n=h({},n));for(var r in t)n[r]===void 0&&(n[r]=t[r])}return n}function pd(t){ee(t)}function md(t){console.error(t)}function gd(t){ee(t)}function Lo(t,e){try{var n=t.onUncaughtError;n(e.value,{componentStack:e.stack})}catch(a){setTimeout(function(){throw a})}}function yd(t,e,n){try{var a=t.onCaughtError;a(n.value,{componentStack:n.stack,errorBoundary:e.tag===1?e.stateNode:null})}catch(r){setTimeout(function(){throw r})}}function cc(t,e,n){return n=Si(n),n.tag=3,n.payload={element:null},n.callback=function(){Lo(t,e)},n}function bd(t){return t=Si(t),t.tag=3,t}function vd(t,e,n,a){var r=n.type.getDerivedStateFromError;if(typeof r=="function"){var l=a.value;t.payload=function(){return r(l)},t.callback=function(){yd(e,n,a)}}var w=n.stateNode;w!==null&&typeof w.componentDidCatch=="function"&&(t.callback=function(){yd(e,n,a),typeof r!="function"&&(ji===null?ji=new Set([this]):ji.add(this));var B=a.stack;this.componentDidCatch(a.value,{componentStack:B!==null?B:""})})}function Ef(t,e,n,a,r){if(n.flags|=32768,a!==null&&typeof a=="object"&&typeof a.then=="function"){if(e=n.alternate,e!==null&&Fr(e,n,r,!0),n=Yn.current,n!==null){switch(n.tag){case 31:case 13:return sa===null?Vo():n.alternate===null&&Je===0&&(Je=3),n.flags&=-257,n.flags|=65536,n.lanes=r,a===Eo?n.flags|=16384:(e=n.updateQueue,e===null?n.updateQueue=new Set([a]):e.add(a),Nc(t,a,r)),!1;case 22:return n.flags|=65536,a===Eo?n.flags|=16384:(e=n.updateQueue,e===null?(e={transitions:null,markerInstances:null,retryQueue:new Set([a])},n.updateQueue=e):(n=e.retryQueue,n===null?e.retryQueue=new Set([a]):n.add(a)),Nc(t,a,r)),!1}throw Error(s(435,n.tag))}return Nc(t,a,r),Vo(),!1}if(Ee)return e=Yn.current,e!==null?((e.flags&65536)===0&&(e.flags|=256),e.flags|=65536,e.lanes=r,a!==Cl&&(t=Error(s(422),{cause:a}),ws(na(t,n)))):(a!==Cl&&(e=Error(s(423),{cause:a}),ws(na(e,n))),t=t.current.alternate,t.flags|=65536,r&=-r,t.lanes|=r,a=na(a,n),r=cc(t.stateNode,a,r),Il(t,r),Je!==4&&(Je=2)),!1;var l=Error(s(520),{cause:a});if(l=na(l,n),Gs===null?Gs=[l]:Gs.push(l),Je!==4&&(Je=2),e===null)return!0;a=na(a,n),n=e;do{switch(n.tag){case 3:return n.flags|=65536,t=r&-r,n.lanes|=t,t=cc(n.stateNode,a,t),Il(n,t),!1;case 1:if(e=n.type,l=n.stateNode,(n.flags&128)===0&&(typeof e.getDerivedStateFromError=="function"||l!==null&&typeof l.componentDidCatch=="function"&&(ji===null||!ji.has(l))))return n.flags|=65536,r&=-r,n.lanes|=r,r=bd(r),vd(r,t,n,a),Il(n,r),!1}n=n.return}while(n!==null);return!1}var uc=Error(s(461)),on=!1;function xn(t,e,n,a){e.child=t===null?Eu(e,null,n,a):lr(e,t.child,n,a)}function xd(t,e,n,a,r){n=n.render;var l=e.ref;if("ref"in a){var w={};for(var B in a)B!=="ref"&&(w[B]=a[B])}else w=a;return ir(e),a=Yl(t,e,n,w,l,r),B=Kl(),t!==null&&!on?(Xl(t,e,r),Za(t,e,r)):(Ee&&B&&Tl(e),e.flags|=1,xn(t,e,a,r),e.child)}function _d(t,e,n,a,r){if(t===null){var l=n.type;return typeof l=="function"&&!El(l)&&l.defaultProps===void 0&&n.compare===null?(e.tag=15,e.type=l,Ad(t,e,l,a,r)):(t=yo(n.type,null,a,e,e.mode,r),t.ref=e.ref,t.return=e,e.child=t)}if(l=t.child,!bc(t,r)){var w=l.memoizedProps;if(n=n.compare,n=n!==null?n:i,n(w,a)&&t.ref===e.ref)return Za(t,e,r)}return e.flags|=1,t=Ya(l,a),t.ref=e.ref,t.return=e,e.child=t}function Ad(t,e,n,a,r){if(t!==null){var l=t.memoizedProps;if(i(l,a)&&t.ref===e.ref)if(on=!1,e.pendingProps=a=l,bc(t,r))(t.flags&131072)!==0&&(on=!0);else return e.lanes=t.lanes,Za(t,e,r)}return dc(t,e,n,a,r)}function Ed(t,e,n,a){var r=a.children,l=t!==null?t.memoizedState:null;if(t===null&&e.stateNode===null&&(e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),a.mode==="hidden"){if((e.flags&128)!==0){if(l=l!==null?l.baseLanes|n:n,t!==null){for(a=e.child=t.child,r=0;a!==null;)r=r|a.lanes|a.childLanes,a=a.sibling;a=r&~l}else a=0,e.child=null;return Sd(t,e,l,n,a)}if((n&536870912)!==0)e.memoizedState={baseLanes:0,cachePool:null},t!==null&&_o(e,l!==null?l.cachePool:null),l!==null?Tu(e,l):Bl(),Ru(e);else return a=e.lanes=536870912,Sd(t,e,l!==null?l.baseLanes|n:n,n,a)}else l!==null?(_o(e,l.cachePool),Tu(e,l),Ri(),e.memoizedState=null):(t!==null&&_o(e,null),Bl(),Ri());return xn(t,e,r,n),e.child}function Fs(t,e){return t!==null&&t.tag===22||e.stateNode!==null||(e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),e.sibling}function Sd(t,e,n,a,r){var l=Pl();return l=l===null?null:{parent:rn._currentValue,pool:l},e.memoizedState={baseLanes:n,cachePool:l},t!==null&&_o(e,null),Bl(),Ru(e),t!==null&&Fr(t,e,a,!0),e.childLanes=r,null}function Fo(t,e){return e=Io({mode:e.mode,children:e.children},t.mode),e.ref=t.ref,t.child=e,e.return=t,e}function wd(t,e,n){return lr(e,t.child,null,n),t=Fo(e,e.pendingProps),t.flags|=2,Kn(e),e.memoizedState=null,t}function Sf(t,e,n){var a=e.pendingProps,r=(e.flags&128)!==0;if(e.flags&=-129,t===null){if(Ee){if(a.mode==="hidden")return t=Fo(e,a),e.lanes=536870912,Fs(null,t);if(Hl(e),(t=Ye)?(t=Fh(t,ra),t=t!==null&&t.data==="&"?t:null,t!==null&&(e.memoizedState={dehydrated:t,treeContext:vi!==null?{id:Ca,overflow:ka}:null,retryLane:536870912,hydrationErrors:null},n=lu(t),n.return=e,e.child=n,bn=e,Ye=null)):t=null,t===null)throw _i(e);return e.lanes=536870912,null}return Fo(e,a)}var l=t.memoizedState;if(l!==null){var w=l.dehydrated;if(Hl(e),r)if(e.flags&256)e.flags&=-257,e=wd(t,e,n);else if(e.memoizedState!==null)e.child=t.child,e.flags|=128,e=null;else throw Error(s(558));else if(on||Fr(t,e,n,!1),r=(n&t.childLanes)!==0,on||r){if(a=qe,a!==null&&(w=Ie(a,n),w!==0&&w!==l.retryLane))throw l.retryLane=w,Me(t,w),qn(a,t,w),uc;Vo(),e=wd(t,e,n)}else t=l.treeContext,Ye=oa(w.nextSibling),bn=e,Ee=!0,xi=null,ra=!1,t!==null&&du(e,t),e=Fo(e,a),e.flags|=4096;return e}return t=Ya(t.child,{mode:a.mode,children:a.children}),t.ref=e.ref,e.child=t,t.return=e,t}function zo(t,e){var n=e.ref;if(n===null)t!==null&&t.ref!==null&&(e.flags|=4194816);else{if(typeof n!="function"&&typeof n!="object")throw Error(s(284));(t===null||t.ref!==n)&&(e.flags|=4194816)}}function dc(t,e,n,a,r){return ir(e),n=Yl(t,e,n,a,void 0,r),a=Kl(),t!==null&&!on?(Xl(t,e,r),Za(t,e,r)):(Ee&&a&&Tl(e),e.flags|=1,xn(t,e,n,r),e.child)}function Td(t,e,n,a,r,l){return ir(e),e.updateQueue=null,n=ku(e,a,n,r),Cu(t),a=Kl(),t!==null&&!on?(Xl(t,e,l),Za(t,e,l)):(Ee&&a&&Tl(e),e.flags|=1,xn(t,e,n,l),e.child)}function Rd(t,e,n,a,r){if(ir(e),e.stateNode===null){var l=Or,w=n.contextType;typeof w=="object"&&w!==null&&(l=vn(w)),l=new n(a,l),e.memoizedState=l.state!==null&&l.state!==void 0?l.state:null,l.updater=lc,e.stateNode=l,l._reactInternals=e,l=e.stateNode,l.props=a,l.state=e.memoizedState,l.refs={},Fl(e),w=n.contextType,l.context=typeof w=="object"&&w!==null?vn(w):Or,l.state=e.memoizedState,w=n.getDerivedStateFromProps,typeof w=="function"&&(oc(e,n,w,a),l.state=e.memoizedState),typeof n.getDerivedStateFromProps=="function"||typeof l.getSnapshotBeforeUpdate=="function"||typeof l.UNSAFE_componentWillMount!="function"&&typeof l.componentWillMount!="function"||(w=l.state,typeof l.componentWillMount=="function"&&l.componentWillMount(),typeof l.UNSAFE_componentWillMount=="function"&&l.UNSAFE_componentWillMount(),w!==l.state&&lc.enqueueReplaceState(l,l.state,null),Ds(e,a,l,r),js(),l.state=e.memoizedState),typeof l.componentDidMount=="function"&&(e.flags|=4194308),a=!0}else if(t===null){l=e.stateNode;var B=e.memoizedProps,ot=ur(n,B);l.props=ot;var St=l.context,Nt=n.contextType;w=Or,typeof Nt=="object"&&Nt!==null&&(w=vn(Nt));var It=n.getDerivedStateFromProps;Nt=typeof It=="function"||typeof l.getSnapshotBeforeUpdate=="function",B=e.pendingProps!==B,Nt||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(B||St!==w)&&fd(e,l,a,w),Ei=!1;var Ct=e.memoizedState;l.state=Ct,Ds(e,a,l,r),js(),St=e.memoizedState,B||Ct!==St||Ei?(typeof It=="function"&&(oc(e,n,It,a),St=e.memoizedState),(ot=Ei||hd(e,n,ot,a,Ct,St,w))?(Nt||typeof l.UNSAFE_componentWillMount!="function"&&typeof l.componentWillMount!="function"||(typeof l.componentWillMount=="function"&&l.componentWillMount(),typeof l.UNSAFE_componentWillMount=="function"&&l.UNSAFE_componentWillMount()),typeof l.componentDidMount=="function"&&(e.flags|=4194308)):(typeof l.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=a,e.memoizedState=St),l.props=a,l.state=St,l.context=w,a=ot):(typeof l.componentDidMount=="function"&&(e.flags|=4194308),a=!1)}else{l=e.stateNode,zl(t,e),w=e.memoizedProps,Nt=ur(n,w),l.props=Nt,It=e.pendingProps,Ct=l.context,St=n.contextType,ot=Or,typeof St=="object"&&St!==null&&(ot=vn(St)),B=n.getDerivedStateFromProps,(St=typeof B=="function"||typeof l.getSnapshotBeforeUpdate=="function")||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(w!==It||Ct!==ot)&&fd(e,l,a,ot),Ei=!1,Ct=e.memoizedState,l.state=Ct,Ds(e,a,l,r),js();var kt=e.memoizedState;w!==It||Ct!==kt||Ei||t!==null&&t.dependencies!==null&&vo(t.dependencies)?(typeof B=="function"&&(oc(e,n,B,a),kt=e.memoizedState),(Nt=Ei||hd(e,n,Nt,a,Ct,kt,ot)||t!==null&&t.dependencies!==null&&vo(t.dependencies))?(St||typeof l.UNSAFE_componentWillUpdate!="function"&&typeof l.componentWillUpdate!="function"||(typeof l.componentWillUpdate=="function"&&l.componentWillUpdate(a,kt,ot),typeof l.UNSAFE_componentWillUpdate=="function"&&l.UNSAFE_componentWillUpdate(a,kt,ot)),typeof l.componentDidUpdate=="function"&&(e.flags|=4),typeof l.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof l.componentDidUpdate!="function"||w===t.memoizedProps&&Ct===t.memoizedState||(e.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||w===t.memoizedProps&&Ct===t.memoizedState||(e.flags|=1024),e.memoizedProps=a,e.memoizedState=kt),l.props=a,l.state=kt,l.context=ot,a=Nt):(typeof l.componentDidUpdate!="function"||w===t.memoizedProps&&Ct===t.memoizedState||(e.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||w===t.memoizedProps&&Ct===t.memoizedState||(e.flags|=1024),a=!1)}return l=a,zo(t,e),a=(e.flags&128)!==0,l||a?(l=e.stateNode,n=a&&typeof n.getDerivedStateFromError!="function"?null:l.render(),e.flags|=1,t!==null&&a?(e.child=lr(e,t.child,null,r),e.child=lr(e,null,n,r)):xn(t,e,n,r),e.memoizedState=l.state,t=e.child):t=Za(t,e,r),t}function Cd(t,e,n,a){return nr(),e.flags|=256,xn(t,e,n,a),e.child}var hc={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function fc(t){return{baseLanes:t,cachePool:yu()}}function pc(t,e,n){return t=t!==null?t.childLanes&~n:0,e&&(t|=Vn),t}function kd(t,e,n){var a=e.pendingProps,r=!1,l=(e.flags&128)!==0,w;if((w=l)||(w=t!==null&&t.memoizedState===null?!1:(en.current&2)!==0),w&&(r=!0,e.flags&=-129),w=(e.flags&32)!==0,e.flags&=-33,t===null){if(Ee){if(r?Ti(e):Ri(),(t=Ye)?(t=Fh(t,ra),t=t!==null&&t.data!=="&"?t:null,t!==null&&(e.memoizedState={dehydrated:t,treeContext:vi!==null?{id:Ca,overflow:ka}:null,retryLane:536870912,hydrationErrors:null},n=lu(t),n.return=e,e.child=n,bn=e,Ye=null)):t=null,t===null)throw _i(e);return Qc(t)?e.lanes=32:e.lanes=536870912,null}var B=a.children;return a=a.fallback,r?(Ri(),r=e.mode,B=Io({mode:"hidden",children:B},r),a=er(a,r,n,null),B.return=e,a.return=e,B.sibling=a,e.child=B,a=e.child,a.memoizedState=fc(n),a.childLanes=pc(t,w,n),e.memoizedState=hc,Fs(null,a)):(Ti(e),mc(e,B))}var ot=t.memoizedState;if(ot!==null&&(B=ot.dehydrated,B!==null)){if(l)e.flags&256?(Ti(e),e.flags&=-257,e=gc(t,e,n)):e.memoizedState!==null?(Ri(),e.child=t.child,e.flags|=128,e=null):(Ri(),B=a.fallback,r=e.mode,a=Io({mode:"visible",children:a.children},r),B=er(B,r,n,null),B.flags|=2,a.return=e,B.return=e,a.sibling=B,e.child=a,lr(e,t.child,null,n),a=e.child,a.memoizedState=fc(n),a.childLanes=pc(t,w,n),e.memoizedState=hc,e=Fs(null,a));else if(Ti(e),Qc(B)){if(w=B.nextSibling&&B.nextSibling.dataset,w)var St=w.dgst;w=St,a=Error(s(419)),a.stack="",a.digest=w,ws({value:a,source:null,stack:null}),e=gc(t,e,n)}else if(on||Fr(t,e,n,!1),w=(n&t.childLanes)!==0,on||w){if(w=qe,w!==null&&(a=Ie(w,n),a!==0&&a!==ot.retryLane))throw ot.retryLane=a,Me(t,a),qn(w,t,a),uc;Wc(B)||Vo(),e=gc(t,e,n)}else Wc(B)?(e.flags|=192,e.child=t.child,e=null):(t=ot.treeContext,Ye=oa(B.nextSibling),bn=e,Ee=!0,xi=null,ra=!1,t!==null&&du(e,t),e=mc(e,a.children),e.flags|=4096);return e}return r?(Ri(),B=a.fallback,r=e.mode,ot=t.child,St=ot.sibling,a=Ya(ot,{mode:"hidden",children:a.children}),a.subtreeFlags=ot.subtreeFlags&65011712,St!==null?B=Ya(St,B):(B=er(B,r,n,null),B.flags|=2),B.return=e,a.return=e,a.sibling=B,e.child=a,Fs(null,a),a=e.child,B=t.child.memoizedState,B===null?B=fc(n):(r=B.cachePool,r!==null?(ot=rn._currentValue,r=r.parent!==ot?{parent:ot,pool:ot}:r):r=yu(),B={baseLanes:B.baseLanes|n,cachePool:r}),a.memoizedState=B,a.childLanes=pc(t,w,n),e.memoizedState=hc,Fs(t.child,a)):(Ti(e),n=t.child,t=n.sibling,n=Ya(n,{mode:"visible",children:a.children}),n.return=e,n.sibling=null,t!==null&&(w=e.deletions,w===null?(e.deletions=[t],e.flags|=16):w.push(t)),e.child=n,e.memoizedState=null,n)}function mc(t,e){return e=Io({mode:"visible",children:e},t.mode),e.return=t,t.child=e}function Io(t,e){return t=Gn(22,t,null,e),t.lanes=0,t}function gc(t,e,n){return lr(e,t.child,null,n),t=mc(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function Md(t,e,n){t.lanes|=e;var a=t.alternate;a!==null&&(a.lanes|=e),jl(t.return,e,n)}function yc(t,e,n,a,r,l){var w=t.memoizedState;w===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:a,tail:n,tailMode:r,treeForkCount:l}:(w.isBackwards=e,w.rendering=null,w.renderingStartTime=0,w.last=a,w.tail=n,w.tailMode=r,w.treeForkCount=l)}function jd(t,e,n){var a=e.pendingProps,r=a.revealOrder,l=a.tail;a=a.children;var w=en.current,B=(w&2)!==0;if(B?(w=w&1|2,e.flags|=128):w&=1,U(en,w),xn(t,e,a,n),a=Ee?Ss:0,!B&&t!==null&&(t.flags&128)!==0)t:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Md(t,n,e);else if(t.tag===19)Md(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break t;for(;t.sibling===null;){if(t.return===null||t.return===e)break t;t=t.return}t.sibling.return=t.return,t=t.sibling}switch(r){case"forwards":for(n=e.child,r=null;n!==null;)t=n.alternate,t!==null&&Ro(t)===null&&(r=n),n=n.sibling;n=r,n===null?(r=e.child,e.child=null):(r=n.sibling,n.sibling=null),yc(e,!1,r,n,l,a);break;case"backwards":case"unstable_legacy-backwards":for(n=null,r=e.child,e.child=null;r!==null;){if(t=r.alternate,t!==null&&Ro(t)===null){e.child=r;break}t=r.sibling,r.sibling=n,n=r,r=t}yc(e,!0,n,null,l,a);break;case"together":yc(e,!1,null,null,void 0,a);break;default:e.memoizedState=null}return e.child}function Za(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Mi|=e.lanes,(n&e.childLanes)===0)if(t!==null){if(Fr(t,e,n,!1),(n&e.childLanes)===0)return null}else return null;if(t!==null&&e.child!==t.child)throw Error(s(153));if(e.child!==null){for(t=e.child,n=Ya(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Ya(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function bc(t,e){return(t.lanes&e)!==0?!0:(t=t.dependencies,!!(t!==null&&vo(t)))}function wf(t,e,n){switch(e.tag){case 3:I(e,e.stateNode.containerInfo),Ai(e,rn,t.memoizedState.cache),nr();break;case 27:case 5:Y(e);break;case 4:I(e,e.stateNode.containerInfo);break;case 10:Ai(e,e.type,e.memoizedProps.value);break;case 31:if(e.memoizedState!==null)return e.flags|=128,Hl(e),null;break;case 13:var a=e.memoizedState;if(a!==null)return a.dehydrated!==null?(Ti(e),e.flags|=128,null):(n&e.child.childLanes)!==0?kd(t,e,n):(Ti(e),t=Za(t,e,n),t!==null?t.sibling:null);Ti(e);break;case 19:var r=(t.flags&128)!==0;if(a=(n&e.childLanes)!==0,a||(Fr(t,e,n,!1),a=(n&e.childLanes)!==0),r){if(a)return jd(t,e,n);e.flags|=128}if(r=e.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),U(en,en.current),a)break;return null;case 22:return e.lanes=0,Ed(t,e,n,e.pendingProps);case 24:Ai(e,rn,t.memoizedState.cache)}return Za(t,e,n)}function Dd(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps)on=!0;else{if(!bc(t,n)&&(e.flags&128)===0)return on=!1,wf(t,e,n);on=(t.flags&131072)!==0}else on=!1,Ee&&(e.flags&1048576)!==0&&uu(e,Ss,e.index);switch(e.lanes=0,e.tag){case 16:t:{var a=e.pendingProps;if(t=sr(e.elementType),e.type=t,typeof t=="function")El(t)?(a=ur(t,a),e.tag=1,e=Rd(null,e,t,a,n)):(e.tag=0,e=dc(null,e,t,a,n));else{if(t!=null){var r=t.$$typeof;if(r===H){e.tag=11,e=xd(null,e,t,a,n);break t}else if(r===J){e.tag=14,e=_d(null,e,t,a,n);break t}}throw e=qt(t)||t,Error(s(306,e,""))}}return e;case 0:return dc(t,e,e.type,e.pendingProps,n);case 1:return a=e.type,r=ur(a,e.pendingProps),Rd(t,e,a,r,n);case 3:t:{if(I(e,e.stateNode.containerInfo),t===null)throw Error(s(387));a=e.pendingProps;var l=e.memoizedState;r=l.element,zl(t,e),Ds(e,a,null,n);var w=e.memoizedState;if(a=w.cache,Ai(e,rn,a),a!==l.cache&&Dl(e,[rn],n,!0),js(),a=w.element,l.isDehydrated)if(l={element:a,isDehydrated:!1,cache:w.cache},e.updateQueue.baseState=l,e.memoizedState=l,e.flags&256){e=Cd(t,e,a,n);break t}else if(a!==r){r=na(Error(s(424)),e),ws(r),e=Cd(t,e,a,n);break t}else for(t=e.stateNode.containerInfo,t.nodeType===9?t=t.body:t=t.nodeName==="HTML"?t.ownerDocument.body:t,Ye=oa(t.firstChild),bn=e,Ee=!0,xi=null,ra=!0,n=Eu(e,null,a,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(nr(),a===r){e=Za(t,e,n);break t}xn(t,e,a,n)}e=e.child}return e;case 26:return zo(t,e),t===null?(n=Hh(e.type,null,e.pendingProps,null))?e.memoizedState=n:Ee||(n=e.type,t=e.pendingProps,a=el(b.current).createElement(n),a[Ue]=e,a[$e]=t,_n(a,n,t),tn(a),e.stateNode=a):e.memoizedState=Hh(e.type,t.memoizedProps,e.pendingProps,t.memoizedState),null;case 27:return Y(e),t===null&&Ee&&(a=e.stateNode=qh(e.type,e.pendingProps,b.current),bn=e,ra=!0,r=Ye,Pi(e.type)?(Zc=r,Ye=oa(a.firstChild)):Ye=r),xn(t,e,e.pendingProps.children,n),zo(t,e),t===null&&(e.flags|=4194304),e.child;case 5:return t===null&&Ee&&((r=a=Ye)&&(a=ep(a,e.type,e.pendingProps,ra),a!==null?(e.stateNode=a,bn=e,Ye=oa(a.firstChild),ra=!1,r=!0):r=!1),r||_i(e)),Y(e),r=e.type,l=e.pendingProps,w=t!==null?t.memoizedProps:null,a=l.children,Kc(r,l)?a=null:w!==null&&Kc(r,w)&&(e.flags|=32),e.memoizedState!==null&&(r=Yl(t,e,gf,null,null,n),Js._currentValue=r),zo(t,e),xn(t,e,a,n),e.child;case 6:return t===null&&Ee&&((t=n=Ye)&&(n=np(n,e.pendingProps,ra),n!==null?(e.stateNode=n,bn=e,Ye=null,t=!0):t=!1),t||_i(e)),null;case 13:return kd(t,e,n);case 4:return I(e,e.stateNode.containerInfo),a=e.pendingProps,t===null?e.child=lr(e,null,a,n):xn(t,e,a,n),e.child;case 11:return xd(t,e,e.type,e.pendingProps,n);case 7:return xn(t,e,e.pendingProps,n),e.child;case 8:return xn(t,e,e.pendingProps.children,n),e.child;case 12:return xn(t,e,e.pendingProps.children,n),e.child;case 10:return a=e.pendingProps,Ai(e,e.type,a.value),xn(t,e,a.children,n),e.child;case 9:return r=e.type._context,a=e.pendingProps.children,ir(e),r=vn(r),a=a(r),e.flags|=1,xn(t,e,a,n),e.child;case 14:return _d(t,e,e.type,e.pendingProps,n);case 15:return Ad(t,e,e.type,e.pendingProps,n);case 19:return jd(t,e,n);case 31:return Sf(t,e,n);case 22:return Ed(t,e,n,e.pendingProps);case 24:return ir(e),a=vn(rn),t===null?(r=Pl(),r===null&&(r=qe,l=Ol(),r.pooledCache=l,l.refCount++,l!==null&&(r.pooledCacheLanes|=n),r=l),e.memoizedState={parent:a,cache:r},Fl(e),Ai(e,rn,r)):((t.lanes&n)!==0&&(zl(t,e),Ds(e,null,null,n),js()),r=t.memoizedState,l=e.memoizedState,r.parent!==a?(r={parent:a,cache:a},e.memoizedState=r,e.lanes===0&&(e.memoizedState=e.updateQueue.baseState=r),Ai(e,rn,a)):(a=l.cache,Ai(e,rn,a),a!==r.cache&&Dl(e,[rn],n,!0))),xn(t,e,e.pendingProps.children,n),e.child;case 29:throw e.pendingProps}throw Error(s(156,e.tag))}function Ja(t){t.flags|=4}function vc(t,e,n,a,r){if((e=(t.mode&32)!==0)&&(e=!1),e){if(t.flags|=16777216,(r&335544128)===r)if(t.stateNode.complete)t.flags|=8192;else if(rh())t.flags|=8192;else throw or=Eo,Ll}else t.flags&=-16777217}function Od(t,e){if(e.type!=="stylesheet"||(e.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!Vh(e))if(rh())t.flags|=8192;else throw or=Eo,Ll}function qo(t,e){e!==null&&(t.flags|=4),t.flags&16384&&(e=t.tag!==22?Da():536870912,t.lanes|=e,Wr|=e)}function zs(t,e){if(!Ee)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var a=null;n!==null;)n.alternate!==null&&(a=n),n=n.sibling;a===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:a.sibling=null}}function Ke(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,a=0;if(e)for(var r=t.child;r!==null;)n|=r.lanes|r.childLanes,a|=r.subtreeFlags&65011712,a|=r.flags&65011712,r.return=t,r=r.sibling;else for(r=t.child;r!==null;)n|=r.lanes|r.childLanes,a|=r.subtreeFlags,a|=r.flags,r.return=t,r=r.sibling;return t.subtreeFlags|=a,t.childLanes=n,e}function Tf(t,e,n){var a=e.pendingProps;switch(Rl(e),e.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ke(e),null;case 1:return Ke(e),null;case 3:return n=e.stateNode,a=null,t!==null&&(a=t.memoizedState.cache),e.memoizedState.cache!==a&&(e.flags|=2048),Va(rn),Q(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(t===null||t.child===null)&&(Lr(e)?Ja(e):t===null||t.memoizedState.isDehydrated&&(e.flags&256)===0||(e.flags|=1024,kl())),Ke(e),null;case 26:var r=e.type,l=e.memoizedState;return t===null?(Ja(e),l!==null?(Ke(e),Od(e,l)):(Ke(e),vc(e,r,null,a,n))):l?l!==t.memoizedState?(Ja(e),Ke(e),Od(e,l)):(Ke(e),e.flags&=-16777217):(t=t.memoizedProps,t!==a&&Ja(e),Ke(e),vc(e,r,t,a,n)),null;case 27:if(at(e),n=b.current,r=e.type,t!==null&&e.stateNode!=null)t.memoizedProps!==a&&Ja(e);else{if(!a){if(e.stateNode===null)throw Error(s(166));return Ke(e),null}t=$.current,Lr(e)?hu(e):(t=qh(r,a,n),e.stateNode=t,Ja(e))}return Ke(e),null;case 5:if(at(e),r=e.type,t!==null&&e.stateNode!=null)t.memoizedProps!==a&&Ja(e);else{if(!a){if(e.stateNode===null)throw Error(s(166));return Ke(e),null}if(l=$.current,Lr(e))hu(e);else{var w=el(b.current);switch(l){case 1:l=w.createElementNS("http://www.w3.org/2000/svg",r);break;case 2:l=w.createElementNS("http://www.w3.org/1998/Math/MathML",r);break;default:switch(r){case"svg":l=w.createElementNS("http://www.w3.org/2000/svg",r);break;case"math":l=w.createElementNS("http://www.w3.org/1998/Math/MathML",r);break;case"script":l=w.createElement("div"),l.innerHTML="<script><\/script>",l=l.removeChild(l.firstChild);break;case"select":l=typeof a.is=="string"?w.createElement("select",{is:a.is}):w.createElement("select"),a.multiple?l.multiple=!0:a.size&&(l.size=a.size);break;default:l=typeof a.is=="string"?w.createElement(r,{is:a.is}):w.createElement(r)}}l[Ue]=e,l[$e]=a;t:for(w=e.child;w!==null;){if(w.tag===5||w.tag===6)l.appendChild(w.stateNode);else if(w.tag!==4&&w.tag!==27&&w.child!==null){w.child.return=w,w=w.child;continue}if(w===e)break t;for(;w.sibling===null;){if(w.return===null||w.return===e)break t;w=w.return}w.sibling.return=w.return,w=w.sibling}e.stateNode=l;t:switch(_n(l,r,a),r){case"button":case"input":case"select":case"textarea":a=!!a.autoFocus;break t;case"img":a=!0;break t;default:a=!1}a&&Ja(e)}}return Ke(e),vc(e,e.type,t===null?null:t.memoizedProps,e.pendingProps,n),null;case 6:if(t&&e.stateNode!=null)t.memoizedProps!==a&&Ja(e);else{if(typeof a!="string"&&e.stateNode===null)throw Error(s(166));if(t=b.current,Lr(e)){if(t=e.stateNode,n=e.memoizedProps,a=null,r=bn,r!==null)switch(r.tag){case 27:case 5:a=r.memoizedProps}t[Ue]=e,t=!!(t.nodeValue===n||a!==null&&a.suppressHydrationWarning===!0||kh(t.nodeValue,n)),t||_i(e,!0)}else t=el(t).createTextNode(a),t[Ue]=e,e.stateNode=t}return Ke(e),null;case 31:if(n=e.memoizedState,t===null||t.memoizedState!==null){if(a=Lr(e),n!==null){if(t===null){if(!a)throw Error(s(318));if(t=e.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(s(557));t[Ue]=e}else nr(),(e.flags&128)===0&&(e.memoizedState=null),e.flags|=4;Ke(e),t=!1}else n=kl(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=n),t=!0;if(!t)return e.flags&256?(Kn(e),e):(Kn(e),null);if((e.flags&128)!==0)throw Error(s(558))}return Ke(e),null;case 13:if(a=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(r=Lr(e),a!==null&&a.dehydrated!==null){if(t===null){if(!r)throw Error(s(318));if(r=e.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(s(317));r[Ue]=e}else nr(),(e.flags&128)===0&&(e.memoizedState=null),e.flags|=4;Ke(e),r=!1}else r=kl(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=r),r=!0;if(!r)return e.flags&256?(Kn(e),e):(Kn(e),null)}return Kn(e),(e.flags&128)!==0?(e.lanes=n,e):(n=a!==null,t=t!==null&&t.memoizedState!==null,n&&(a=e.child,r=null,a.alternate!==null&&a.alternate.memoizedState!==null&&a.alternate.memoizedState.cachePool!==null&&(r=a.alternate.memoizedState.cachePool.pool),l=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(l=a.memoizedState.cachePool.pool),l!==r&&(a.flags|=2048)),n!==t&&n&&(e.child.flags|=8192),qo(e,e.updateQueue),Ke(e),null);case 4:return Q(),t===null&&Bc(e.stateNode.containerInfo),Ke(e),null;case 10:return Va(e.type),Ke(e),null;case 19:if(F(en),a=e.memoizedState,a===null)return Ke(e),null;if(r=(e.flags&128)!==0,l=a.rendering,l===null)if(r)zs(a,!1);else{if(Je!==0||t!==null&&(t.flags&128)!==0)for(t=e.child;t!==null;){if(l=Ro(t),l!==null){for(e.flags|=128,zs(a,!1),t=l.updateQueue,e.updateQueue=t,qo(e,t),e.subtreeFlags=0,t=n,n=e.child;n!==null;)ou(n,t),n=n.sibling;return U(en,en.current&1|2),Ee&&Ka(e,a.treeForkCount),e.child}t=t.sibling}a.tail!==null&&oe()>Yo&&(e.flags|=128,r=!0,zs(a,!1),e.lanes=4194304)}else{if(!r)if(t=Ro(l),t!==null){if(e.flags|=128,r=!0,t=t.updateQueue,e.updateQueue=t,qo(e,t),zs(a,!0),a.tail===null&&a.tailMode==="hidden"&&!l.alternate&&!Ee)return Ke(e),null}else 2*oe()-a.renderingStartTime>Yo&&n!==536870912&&(e.flags|=128,r=!0,zs(a,!1),e.lanes=4194304);a.isBackwards?(l.sibling=e.child,e.child=l):(t=a.last,t!==null?t.sibling=l:e.child=l,a.last=l)}return a.tail!==null?(t=a.tail,a.rendering=t,a.tail=t.sibling,a.renderingStartTime=oe(),t.sibling=null,n=en.current,U(en,r?n&1|2:n&1),Ee&&Ka(e,a.treeForkCount),t):(Ke(e),null);case 22:case 23:return Kn(e),Ul(),a=e.memoizedState!==null,t!==null?t.memoizedState!==null!==a&&(e.flags|=8192):a&&(e.flags|=8192),a?(n&536870912)!==0&&(e.flags&128)===0&&(Ke(e),e.subtreeFlags&6&&(e.flags|=8192)):Ke(e),n=e.updateQueue,n!==null&&qo(e,n.retryQueue),n=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(n=t.memoizedState.cachePool.pool),a=null,e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),a!==n&&(e.flags|=2048),t!==null&&F(rr),null;case 24:return n=null,t!==null&&(n=t.memoizedState.cache),e.memoizedState.cache!==n&&(e.flags|=2048),Va(rn),Ke(e),null;case 25:return null;case 30:return null}throw Error(s(156,e.tag))}function Rf(t,e){switch(Rl(e),e.tag){case 1:return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Va(rn),Q(),t=e.flags,(t&65536)!==0&&(t&128)===0?(e.flags=t&-65537|128,e):null;case 26:case 27:case 5:return at(e),null;case 31:if(e.memoizedState!==null){if(Kn(e),e.alternate===null)throw Error(s(340));nr()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 13:if(Kn(e),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(s(340));nr()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return F(en),null;case 4:return Q(),null;case 10:return Va(e.type),null;case 22:case 23:return Kn(e),Ul(),t!==null&&F(rr),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 24:return Va(rn),null;case 25:return null;default:return null}}function Nd(t,e){switch(Rl(e),e.tag){case 3:Va(rn),Q();break;case 26:case 27:case 5:at(e);break;case 4:Q();break;case 31:e.memoizedState!==null&&Kn(e);break;case 13:Kn(e);break;case 19:F(en);break;case 10:Va(e.type);break;case 22:case 23:Kn(e),Ul(),t!==null&&F(rr);break;case 24:Va(rn)}}function Is(t,e){try{var n=e.updateQueue,a=n!==null?n.lastEffect:null;if(a!==null){var r=a.next;n=r;do{if((n.tag&t)===t){a=void 0;var l=n.create,w=n.inst;a=l(),w.destroy=a}n=n.next}while(n!==r)}}catch(B){Oe(e,e.return,B)}}function Ci(t,e,n){try{var a=e.updateQueue,r=a!==null?a.lastEffect:null;if(r!==null){var l=r.next;a=l;do{if((a.tag&t)===t){var w=a.inst,B=w.destroy;if(B!==void 0){w.destroy=void 0,r=e;var ot=n,St=B;try{St()}catch(Nt){Oe(r,ot,Nt)}}}a=a.next}while(a!==l)}}catch(Nt){Oe(e,e.return,Nt)}}function Pd(t){var e=t.updateQueue;if(e!==null){var n=t.stateNode;try{wu(e,n)}catch(a){Oe(t,t.return,a)}}}function Ld(t,e,n){n.props=ur(t.type,t.memoizedProps),n.state=t.memoizedState;try{n.componentWillUnmount()}catch(a){Oe(t,e,a)}}function qs(t,e){try{var n=t.ref;if(n!==null){switch(t.tag){case 26:case 27:case 5:var a=t.stateNode;break;case 30:a=t.stateNode;break;default:a=t.stateNode}typeof n=="function"?t.refCleanup=n(a):n.current=a}}catch(r){Oe(t,e,r)}}function Ma(t,e){var n=t.ref,a=t.refCleanup;if(n!==null)if(typeof a=="function")try{a()}catch(r){Oe(t,e,r)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof n=="function")try{n(null)}catch(r){Oe(t,e,r)}else n.current=null}function Fd(t){var e=t.type,n=t.memoizedProps,a=t.stateNode;try{t:switch(e){case"button":case"input":case"select":case"textarea":n.autoFocus&&a.focus();break t;case"img":n.src?a.src=n.src:n.srcSet&&(a.srcset=n.srcSet)}}catch(r){Oe(t,t.return,r)}}function xc(t,e,n){try{var a=t.stateNode;Wf(a,t.type,n,e),a[$e]=e}catch(r){Oe(t,t.return,r)}}function zd(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&Pi(t.type)||t.tag===4}function _c(t){t:for(;;){for(;t.sibling===null;){if(t.return===null||zd(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&Pi(t.type)||t.flags&2||t.child===null||t.tag===4)continue t;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Ac(t,e,n){var a=t.tag;if(a===5||a===6)t=t.stateNode,e?(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n).insertBefore(t,e):(e=n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,e.appendChild(t),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Pn));else if(a!==4&&(a===27&&Pi(t.type)&&(n=t.stateNode,e=null),t=t.child,t!==null))for(Ac(t,e,n),t=t.sibling;t!==null;)Ac(t,e,n),t=t.sibling}function Bo(t,e,n){var a=t.tag;if(a===5||a===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(a!==4&&(a===27&&Pi(t.type)&&(n=t.stateNode),t=t.child,t!==null))for(Bo(t,e,n),t=t.sibling;t!==null;)Bo(t,e,n),t=t.sibling}function Id(t){var e=t.stateNode,n=t.memoizedProps;try{for(var a=t.type,r=e.attributes;r.length;)e.removeAttributeNode(r[0]);_n(e,a,n),e[Ue]=t,e[$e]=n}catch(l){Oe(t,t.return,l)}}var $a=!1,ln=!1,Ec=!1,qd=typeof WeakSet=="function"?WeakSet:Set,mn=null;function Cf(t,e){if(t=t.containerInfo,Gc=ll,t=M(t),z(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else t:{n=(n=t.ownerDocument)&&n.defaultView||window;var a=n.getSelection&&n.getSelection();if(a&&a.rangeCount!==0){n=a.anchorNode;var r=a.anchorOffset,l=a.focusNode;a=a.focusOffset;try{n.nodeType,l.nodeType}catch{n=null;break t}var w=0,B=-1,ot=-1,St=0,Nt=0,It=t,Ct=null;e:for(;;){for(var kt;It!==n||r!==0&&It.nodeType!==3||(B=w+r),It!==l||a!==0&&It.nodeType!==3||(ot=w+a),It.nodeType===3&&(w+=It.nodeValue.length),(kt=It.firstChild)!==null;)Ct=It,It=kt;for(;;){if(It===t)break e;if(Ct===n&&++St===r&&(B=w),Ct===l&&++Nt===a&&(ot=w),(kt=It.nextSibling)!==null)break;It=Ct,Ct=It.parentNode}It=kt}n=B===-1||ot===-1?null:{start:B,end:ot}}else n=null}n=n||{start:0,end:0}}else n=null;for(Yc={focusedElem:t,selectionRange:n},ll=!1,mn=e;mn!==null;)if(e=mn,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,mn=t;else for(;mn!==null;){switch(e=mn,l=e.alternate,t=e.flags,e.tag){case 0:if((t&4)!==0&&(t=e.updateQueue,t=t!==null?t.events:null,t!==null))for(n=0;n<t.length;n++)r=t[n],r.ref.impl=r.nextImpl;break;case 11:case 15:break;case 1:if((t&1024)!==0&&l!==null){t=void 0,n=e,r=l.memoizedProps,l=l.memoizedState,a=n.stateNode;try{var ne=ur(n.type,r);t=a.getSnapshotBeforeUpdate(ne,l),a.__reactInternalSnapshotBeforeUpdate=t}catch(ce){Oe(n,n.return,ce)}}break;case 3:if((t&1024)!==0){if(t=e.stateNode.containerInfo,n=t.nodeType,n===9)Vc(t);else if(n===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":Vc(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(s(163))}if(t=e.sibling,t!==null){t.return=e.return,mn=t;break}mn=e.return}}function Bd(t,e,n){var a=n.flags;switch(n.tag){case 0:case 11:case 15:ei(t,n),a&4&&Is(5,n);break;case 1:if(ei(t,n),a&4)if(t=n.stateNode,e===null)try{t.componentDidMount()}catch(w){Oe(n,n.return,w)}else{var r=ur(n.type,e.memoizedProps);e=e.memoizedState;try{t.componentDidUpdate(r,e,t.__reactInternalSnapshotBeforeUpdate)}catch(w){Oe(n,n.return,w)}}a&64&&Pd(n),a&512&&qs(n,n.return);break;case 3:if(ei(t,n),a&64&&(t=n.updateQueue,t!==null)){if(e=null,n.child!==null)switch(n.child.tag){case 27:case 5:e=n.child.stateNode;break;case 1:e=n.child.stateNode}try{wu(t,e)}catch(w){Oe(n,n.return,w)}}break;case 27:e===null&&a&4&&Id(n);case 26:case 5:ei(t,n),e===null&&a&4&&Fd(n),a&512&&qs(n,n.return);break;case 12:ei(t,n);break;case 31:ei(t,n),a&4&&Gd(t,n);break;case 13:ei(t,n),a&4&&Yd(t,n),a&64&&(t=n.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(n=Ff.bind(null,n),ap(t,n))));break;case 22:if(a=n.memoizedState!==null||$a,!a){e=e!==null&&e.memoizedState!==null||ln,r=$a;var l=ln;$a=a,(ln=e)&&!l?ni(t,n,(n.subtreeFlags&8772)!==0):ei(t,n),$a=r,ln=l}break;case 30:break;default:ei(t,n)}}function Ud(t){var e=t.alternate;e!==null&&(t.alternate=null,Ud(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&fr(e)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var Ve=null,Ln=!1;function ti(t,e,n){for(n=n.child;n!==null;)Hd(t,e,n),n=n.sibling}function Hd(t,e,n){if(zt&&typeof zt.onCommitFiberUnmount=="function")try{zt.onCommitFiberUnmount(Qn,n)}catch{}switch(n.tag){case 26:ln||Ma(n,e),ti(t,e,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode,n.parentNode.removeChild(n));break;case 27:ln||Ma(n,e);var a=Ve,r=Ln;Pi(n.type)&&(Ve=n.stateNode,Ln=!1),ti(t,e,n),Ws(n.stateNode),Ve=a,Ln=r;break;case 5:ln||Ma(n,e);case 6:if(a=Ve,r=Ln,Ve=null,ti(t,e,n),Ve=a,Ln=r,Ve!==null)if(Ln)try{(Ve.nodeType===9?Ve.body:Ve.nodeName==="HTML"?Ve.ownerDocument.body:Ve).removeChild(n.stateNode)}catch(l){Oe(n,e,l)}else try{Ve.removeChild(n.stateNode)}catch(l){Oe(n,e,l)}break;case 18:Ve!==null&&(Ln?(t=Ve,Ph(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,n.stateNode),as(t)):Ph(Ve,n.stateNode));break;case 4:a=Ve,r=Ln,Ve=n.stateNode.containerInfo,Ln=!0,ti(t,e,n),Ve=a,Ln=r;break;case 0:case 11:case 14:case 15:Ci(2,n,e),ln||Ci(4,n,e),ti(t,e,n);break;case 1:ln||(Ma(n,e),a=n.stateNode,typeof a.componentWillUnmount=="function"&&Ld(n,e,a)),ti(t,e,n);break;case 21:ti(t,e,n);break;case 22:ln=(a=ln)||n.memoizedState!==null,ti(t,e,n),ln=a;break;default:ti(t,e,n)}}function Gd(t,e){if(e.memoizedState===null&&(t=e.alternate,t!==null&&(t=t.memoizedState,t!==null))){t=t.dehydrated;try{as(t)}catch(n){Oe(e,e.return,n)}}}function Yd(t,e){if(e.memoizedState===null&&(t=e.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{as(t)}catch(n){Oe(e,e.return,n)}}function kf(t){switch(t.tag){case 31:case 13:case 19:var e=t.stateNode;return e===null&&(e=t.stateNode=new qd),e;case 22:return t=t.stateNode,e=t._retryCache,e===null&&(e=t._retryCache=new qd),e;default:throw Error(s(435,t.tag))}}function Uo(t,e){var n=kf(t);e.forEach(function(a){if(!n.has(a)){n.add(a);var r=zf.bind(null,t,a);a.then(r,r)}})}function Fn(t,e){var n=e.deletions;if(n!==null)for(var a=0;a<n.length;a++){var r=n[a],l=t,w=e,B=w;t:for(;B!==null;){switch(B.tag){case 27:if(Pi(B.type)){Ve=B.stateNode,Ln=!1;break t}break;case 5:Ve=B.stateNode,Ln=!1;break t;case 3:case 4:Ve=B.stateNode.containerInfo,Ln=!0;break t}B=B.return}if(Ve===null)throw Error(s(160));Hd(l,w,r),Ve=null,Ln=!1,l=r.alternate,l!==null&&(l.return=null),r.return=null}if(e.subtreeFlags&13886)for(e=e.child;e!==null;)Kd(e,t),e=e.sibling}var ma=null;function Kd(t,e){var n=t.alternate,a=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:Fn(e,t),zn(t),a&4&&(Ci(3,t,t.return),Is(3,t),Ci(5,t,t.return));break;case 1:Fn(e,t),zn(t),a&512&&(ln||n===null||Ma(n,n.return)),a&64&&$a&&(t=t.updateQueue,t!==null&&(a=t.callbacks,a!==null&&(n=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=n===null?a:n.concat(a))));break;case 26:var r=ma;if(Fn(e,t),zn(t),a&512&&(ln||n===null||Ma(n,n.return)),a&4){var l=n!==null?n.memoizedState:null;if(a=t.memoizedState,n===null)if(a===null)if(t.stateNode===null){t:{a=t.type,n=t.memoizedProps,r=r.ownerDocument||r;e:switch(a){case"title":l=r.getElementsByTagName("title")[0],(!l||l[Bn]||l[Ue]||l.namespaceURI==="http://www.w3.org/2000/svg"||l.hasAttribute("itemprop"))&&(l=r.createElement(a),r.head.insertBefore(l,r.querySelector("head > title"))),_n(l,a,n),l[Ue]=t,tn(l),a=l;break t;case"link":var w=Kh("link","href",r).get(a+(n.href||""));if(w){for(var B=0;B<w.length;B++)if(l=w[B],l.getAttribute("href")===(n.href==null||n.href===""?null:n.href)&&l.getAttribute("rel")===(n.rel==null?null:n.rel)&&l.getAttribute("title")===(n.title==null?null:n.title)&&l.getAttribute("crossorigin")===(n.crossOrigin==null?null:n.crossOrigin)){w.splice(B,1);break e}}l=r.createElement(a),_n(l,a,n),r.head.appendChild(l);break;case"meta":if(w=Kh("meta","content",r).get(a+(n.content||""))){for(B=0;B<w.length;B++)if(l=w[B],l.getAttribute("content")===(n.content==null?null:""+n.content)&&l.getAttribute("name")===(n.name==null?null:n.name)&&l.getAttribute("property")===(n.property==null?null:n.property)&&l.getAttribute("http-equiv")===(n.httpEquiv==null?null:n.httpEquiv)&&l.getAttribute("charset")===(n.charSet==null?null:n.charSet)){w.splice(B,1);break e}}l=r.createElement(a),_n(l,a,n),r.head.appendChild(l);break;default:throw Error(s(468,a))}l[Ue]=t,tn(l),a=l}t.stateNode=a}else Xh(r,t.type,t.stateNode);else t.stateNode=Yh(r,a,t.memoizedProps);else l!==a?(l===null?n.stateNode!==null&&(n=n.stateNode,n.parentNode.removeChild(n)):l.count--,a===null?Xh(r,t.type,t.stateNode):Yh(r,a,t.memoizedProps)):a===null&&t.stateNode!==null&&xc(t,t.memoizedProps,n.memoizedProps)}break;case 27:Fn(e,t),zn(t),a&512&&(ln||n===null||Ma(n,n.return)),n!==null&&a&4&&xc(t,t.memoizedProps,n.memoizedProps);break;case 5:if(Fn(e,t),zn(t),a&512&&(ln||n===null||Ma(n,n.return)),t.flags&32){r=t.stateNode;try{Pa(r,"")}catch(ne){Oe(t,t.return,ne)}}a&4&&t.stateNode!=null&&(r=t.memoizedProps,xc(t,r,n!==null?n.memoizedProps:r)),a&1024&&(Ec=!0);break;case 6:if(Fn(e,t),zn(t),a&4){if(t.stateNode===null)throw Error(s(162));a=t.memoizedProps,n=t.stateNode;try{n.nodeValue=a}catch(ne){Oe(t,t.return,ne)}}break;case 3:if(il=null,r=ma,ma=nl(e.containerInfo),Fn(e,t),ma=r,zn(t),a&4&&n!==null&&n.memoizedState.isDehydrated)try{as(e.containerInfo)}catch(ne){Oe(t,t.return,ne)}Ec&&(Ec=!1,Xd(t));break;case 4:a=ma,ma=nl(t.stateNode.containerInfo),Fn(e,t),zn(t),ma=a;break;case 12:Fn(e,t),zn(t);break;case 31:Fn(e,t),zn(t),a&4&&(a=t.updateQueue,a!==null&&(t.updateQueue=null,Uo(t,a)));break;case 13:Fn(e,t),zn(t),t.child.flags&8192&&t.memoizedState!==null!=(n!==null&&n.memoizedState!==null)&&(Go=oe()),a&4&&(a=t.updateQueue,a!==null&&(t.updateQueue=null,Uo(t,a)));break;case 22:r=t.memoizedState!==null;var ot=n!==null&&n.memoizedState!==null,St=$a,Nt=ln;if($a=St||r,ln=Nt||ot,Fn(e,t),ln=Nt,$a=St,zn(t),a&8192)t:for(e=t.stateNode,e._visibility=r?e._visibility&-2:e._visibility|1,r&&(n===null||ot||$a||ln||dr(t)),n=null,e=t;;){if(e.tag===5||e.tag===26){if(n===null){ot=n=e;try{if(l=ot.stateNode,r)w=l.style,typeof w.setProperty=="function"?w.setProperty("display","none","important"):w.display="none";else{B=ot.stateNode;var It=ot.memoizedProps.style,Ct=It!=null&&It.hasOwnProperty("display")?It.display:null;B.style.display=Ct==null||typeof Ct=="boolean"?"":(""+Ct).trim()}}catch(ne){Oe(ot,ot.return,ne)}}}else if(e.tag===6){if(n===null){ot=e;try{ot.stateNode.nodeValue=r?"":ot.memoizedProps}catch(ne){Oe(ot,ot.return,ne)}}}else if(e.tag===18){if(n===null){ot=e;try{var kt=ot.stateNode;r?Lh(kt,!0):Lh(ot.stateNode,!1)}catch(ne){Oe(ot,ot.return,ne)}}}else if((e.tag!==22&&e.tag!==23||e.memoizedState===null||e===t)&&e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break t;for(;e.sibling===null;){if(e.return===null||e.return===t)break t;n===e&&(n=null),e=e.return}n===e&&(n=null),e.sibling.return=e.return,e=e.sibling}a&4&&(a=t.updateQueue,a!==null&&(n=a.retryQueue,n!==null&&(a.retryQueue=null,Uo(t,n))));break;case 19:Fn(e,t),zn(t),a&4&&(a=t.updateQueue,a!==null&&(t.updateQueue=null,Uo(t,a)));break;case 30:break;case 21:break;default:Fn(e,t),zn(t)}}function zn(t){var e=t.flags;if(e&2){try{for(var n,a=t.return;a!==null;){if(zd(a)){n=a;break}a=a.return}if(n==null)throw Error(s(160));switch(n.tag){case 27:var r=n.stateNode,l=_c(t);Bo(t,l,r);break;case 5:var w=n.stateNode;n.flags&32&&(Pa(w,""),n.flags&=-33);var B=_c(t);Bo(t,B,w);break;case 3:case 4:var ot=n.stateNode.containerInfo,St=_c(t);Ac(t,St,ot);break;default:throw Error(s(161))}}catch(Nt){Oe(t,t.return,Nt)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function Xd(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var e=t;Xd(e),e.tag===5&&e.flags&1024&&e.stateNode.reset(),t=t.sibling}}function ei(t,e){if(e.subtreeFlags&8772)for(e=e.child;e!==null;)Bd(t,e.alternate,e),e=e.sibling}function dr(t){for(t=t.child;t!==null;){var e=t;switch(e.tag){case 0:case 11:case 14:case 15:Ci(4,e,e.return),dr(e);break;case 1:Ma(e,e.return);var n=e.stateNode;typeof n.componentWillUnmount=="function"&&Ld(e,e.return,n),dr(e);break;case 27:Ws(e.stateNode);case 26:case 5:Ma(e,e.return),dr(e);break;case 22:e.memoizedState===null&&dr(e);break;case 30:dr(e);break;default:dr(e)}t=t.sibling}}function ni(t,e,n){for(n=n&&(e.subtreeFlags&8772)!==0,e=e.child;e!==null;){var a=e.alternate,r=t,l=e,w=l.flags;switch(l.tag){case 0:case 11:case 15:ni(r,l,n),Is(4,l);break;case 1:if(ni(r,l,n),a=l,r=a.stateNode,typeof r.componentDidMount=="function")try{r.componentDidMount()}catch(St){Oe(a,a.return,St)}if(a=l,r=a.updateQueue,r!==null){var B=a.stateNode;try{var ot=r.shared.hiddenCallbacks;if(ot!==null)for(r.shared.hiddenCallbacks=null,r=0;r<ot.length;r++)Su(ot[r],B)}catch(St){Oe(a,a.return,St)}}n&&w&64&&Pd(l),qs(l,l.return);break;case 27:Id(l);case 26:case 5:ni(r,l,n),n&&a===null&&w&4&&Fd(l),qs(l,l.return);break;case 12:ni(r,l,n);break;case 31:ni(r,l,n),n&&w&4&&Gd(r,l);break;case 13:ni(r,l,n),n&&w&4&&Yd(r,l);break;case 22:l.memoizedState===null&&ni(r,l,n),qs(l,l.return);break;case 30:break;default:ni(r,l,n)}e=e.sibling}}function Sc(t,e){var n=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(n=t.memoizedState.cachePool.pool),t=null,e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(t=e.memoizedState.cachePool.pool),t!==n&&(t!=null&&t.refCount++,n!=null&&Ts(n))}function wc(t,e){t=null,e.alternate!==null&&(t=e.alternate.memoizedState.cache),e=e.memoizedState.cache,e!==t&&(e.refCount++,t!=null&&Ts(t))}function ga(t,e,n,a){if(e.subtreeFlags&10256)for(e=e.child;e!==null;)Vd(t,e,n,a),e=e.sibling}function Vd(t,e,n,a){var r=e.flags;switch(e.tag){case 0:case 11:case 15:ga(t,e,n,a),r&2048&&Is(9,e);break;case 1:ga(t,e,n,a);break;case 3:ga(t,e,n,a),r&2048&&(t=null,e.alternate!==null&&(t=e.alternate.memoizedState.cache),e=e.memoizedState.cache,e!==t&&(e.refCount++,t!=null&&Ts(t)));break;case 12:if(r&2048){ga(t,e,n,a),t=e.stateNode;try{var l=e.memoizedProps,w=l.id,B=l.onPostCommit;typeof B=="function"&&B(w,e.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(ot){Oe(e,e.return,ot)}}else ga(t,e,n,a);break;case 31:ga(t,e,n,a);break;case 13:ga(t,e,n,a);break;case 23:break;case 22:l=e.stateNode,w=e.alternate,e.memoizedState!==null?l._visibility&2?ga(t,e,n,a):Bs(t,e):l._visibility&2?ga(t,e,n,a):(l._visibility|=2,Kr(t,e,n,a,(e.subtreeFlags&10256)!==0||!1)),r&2048&&Sc(w,e);break;case 24:ga(t,e,n,a),r&2048&&wc(e.alternate,e);break;default:ga(t,e,n,a)}}function Kr(t,e,n,a,r){for(r=r&&((e.subtreeFlags&10256)!==0||!1),e=e.child;e!==null;){var l=t,w=e,B=n,ot=a,St=w.flags;switch(w.tag){case 0:case 11:case 15:Kr(l,w,B,ot,r),Is(8,w);break;case 23:break;case 22:var Nt=w.stateNode;w.memoizedState!==null?Nt._visibility&2?Kr(l,w,B,ot,r):Bs(l,w):(Nt._visibility|=2,Kr(l,w,B,ot,r)),r&&St&2048&&Sc(w.alternate,w);break;case 24:Kr(l,w,B,ot,r),r&&St&2048&&wc(w.alternate,w);break;default:Kr(l,w,B,ot,r)}e=e.sibling}}function Bs(t,e){if(e.subtreeFlags&10256)for(e=e.child;e!==null;){var n=t,a=e,r=a.flags;switch(a.tag){case 22:Bs(n,a),r&2048&&Sc(a.alternate,a);break;case 24:Bs(n,a),r&2048&&wc(a.alternate,a);break;default:Bs(n,a)}e=e.sibling}}var Us=8192;function Xr(t,e,n){if(t.subtreeFlags&Us)for(t=t.child;t!==null;)Wd(t,e,n),t=t.sibling}function Wd(t,e,n){switch(t.tag){case 26:Xr(t,e,n),t.flags&Us&&t.memoizedState!==null&&mp(n,ma,t.memoizedState,t.memoizedProps);break;case 5:Xr(t,e,n);break;case 3:case 4:var a=ma;ma=nl(t.stateNode.containerInfo),Xr(t,e,n),ma=a;break;case 22:t.memoizedState===null&&(a=t.alternate,a!==null&&a.memoizedState!==null?(a=Us,Us=16777216,Xr(t,e,n),Us=a):Xr(t,e,n));break;default:Xr(t,e,n)}}function Qd(t){var e=t.alternate;if(e!==null&&(t=e.child,t!==null)){e.child=null;do e=t.sibling,t.sibling=null,t=e;while(t!==null)}}function Hs(t){var e=t.deletions;if((t.flags&16)!==0){if(e!==null)for(var n=0;n<e.length;n++){var a=e[n];mn=a,Jd(a,t)}Qd(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)Zd(t),t=t.sibling}function Zd(t){switch(t.tag){case 0:case 11:case 15:Hs(t),t.flags&2048&&Ci(9,t,t.return);break;case 3:Hs(t);break;case 12:Hs(t);break;case 22:var e=t.stateNode;t.memoizedState!==null&&e._visibility&2&&(t.return===null||t.return.tag!==13)?(e._visibility&=-3,Ho(t)):Hs(t);break;default:Hs(t)}}function Ho(t){var e=t.deletions;if((t.flags&16)!==0){if(e!==null)for(var n=0;n<e.length;n++){var a=e[n];mn=a,Jd(a,t)}Qd(t)}for(t=t.child;t!==null;){switch(e=t,e.tag){case 0:case 11:case 15:Ci(8,e,e.return),Ho(e);break;case 22:n=e.stateNode,n._visibility&2&&(n._visibility&=-3,Ho(e));break;default:Ho(e)}t=t.sibling}}function Jd(t,e){for(;mn!==null;){var n=mn;switch(n.tag){case 0:case 11:case 15:Ci(8,n,e);break;case 23:case 22:if(n.memoizedState!==null&&n.memoizedState.cachePool!==null){var a=n.memoizedState.cachePool.pool;a!=null&&a.refCount++}break;case 24:Ts(n.memoizedState.cache)}if(a=n.child,a!==null)a.return=n,mn=a;else t:for(n=t;mn!==null;){a=mn;var r=a.sibling,l=a.return;if(Ud(a),a===n){mn=null;break t}if(r!==null){r.return=l,mn=r;break t}mn=l}}}var Mf={getCacheForType:function(t){var e=vn(rn),n=e.data.get(t);return n===void 0&&(n=t(),e.data.set(t,n)),n},cacheSignal:function(){return vn(rn).controller.signal}},jf=typeof WeakMap=="function"?WeakMap:Map,Ce=0,qe=null,ye=null,ve=0,De=0,Xn=null,ki=!1,Vr=!1,Tc=!1,ii=0,Je=0,Mi=0,hr=0,Rc=0,Vn=0,Wr=0,Gs=null,In=null,Cc=!1,Go=0,$d=0,Yo=1/0,Ko=null,ji=null,dn=0,Di=null,Qr=null,ri=0,kc=0,Mc=null,th=null,Ys=0,jc=null;function Wn(){return(Ce&2)!==0&&ve!==0?ve&-ve:nt.T!==null?Fc():da()}function eh(){if(Vn===0)if((ve&536870912)===0||Ee){var t=kn;kn<<=1,(kn&3932160)===0&&(kn=262144),Vn=t}else Vn=536870912;return t=Yn.current,t!==null&&(t.flags|=32),Vn}function qn(t,e,n){(t===qe&&(De===2||De===9)||t.cancelPendingCommit!==null)&&(Zr(t,0),Oi(t,ve,Vn,!1)),gn(t,n),((Ce&2)===0||t!==qe)&&(t===qe&&((Ce&2)===0&&(hr|=n),Je===4&&Oi(t,ve,Vn,!1)),ja(t))}function nh(t,e,n){if((Ce&6)!==0)throw Error(s(327));var a=!n&&(e&127)===0&&(e&t.expiredLanes)===0||En(t,e),r=a?Nf(t,e):Oc(t,e,!0),l=a;do{if(r===0){Vr&&!a&&Oi(t,e,0,!1);break}else{if(n=t.current.alternate,l&&!Df(n)){r=Oc(t,e,!1),l=!1;continue}if(r===2){if(l=e,t.errorRecoveryDisabledLanes&l)var w=0;else w=t.pendingLanes&-536870913,w=w!==0?w:w&536870912?536870912:0;if(w!==0){e=w;t:{var B=t;r=Gs;var ot=B.current.memoizedState.isDehydrated;if(ot&&(Zr(B,w).flags|=256),w=Oc(B,w,!1),w!==2){if(Tc&&!ot){B.errorRecoveryDisabledLanes|=l,hr|=l,r=4;break t}l=In,In=r,l!==null&&(In===null?In=l:In.push.apply(In,l))}r=w}if(l=!1,r!==2)continue}}if(r===1){Zr(t,0),Oi(t,e,0,!0);break}t:{switch(a=t,l=r,l){case 0:case 1:throw Error(s(345));case 4:if((e&4194048)!==e)break;case 6:Oi(a,e,Vn,!ki);break t;case 2:In=null;break;case 3:case 5:break;default:throw Error(s(329))}if((e&62914560)===e&&(r=Go+300-oe(),10<r)){if(Oi(a,e,Vn,!ki),Qe(a,0,!0)!==0)break t;ri=e,a.timeoutHandle=Oh(ah.bind(null,a,n,In,Ko,Cc,e,Vn,hr,Wr,ki,l,"Throttled",-0,0),r);break t}ah(a,n,In,Ko,Cc,e,Vn,hr,Wr,ki,l,null,-0,0)}}break}while(!0);ja(t)}function ah(t,e,n,a,r,l,w,B,ot,St,Nt,It,Ct,kt){if(t.timeoutHandle=-1,It=e.subtreeFlags,It&8192||(It&16785408)===16785408){It={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Pn},Wd(e,l,It);var ne=(l&62914560)===l?Go-oe():(l&4194048)===l?$d-oe():0;if(ne=gp(It,ne),ne!==null){ri=l,t.cancelPendingCommit=ne(dh.bind(null,t,e,l,n,a,r,w,B,ot,Nt,It,null,Ct,kt)),Oi(t,l,w,!St);return}}dh(t,e,l,n,a,r,w,B,ot)}function Df(t){for(var e=t;;){var n=e.tag;if((n===0||n===11||n===15)&&e.flags&16384&&(n=e.updateQueue,n!==null&&(n=n.stores,n!==null)))for(var a=0;a<n.length;a++){var r=n[a],l=r.getSnapshot;r=r.value;try{if(!Tn(l(),r))return!1}catch{return!1}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Oi(t,e,n,a){e&=~Rc,e&=~hr,t.suspendedLanes|=e,t.pingedLanes&=~e,a&&(t.warmLanes|=e),a=t.expirationTimes;for(var r=e;0<r;){var l=31-it(r),w=1<<l;a[l]=-1,r&=~w}n!==0&&ua(t,n,e)}function Xo(){return(Ce&6)===0?(Ks(0),!1):!0}function Dc(){if(ye!==null){if(De===0)var t=ye.return;else t=ye,Xa=ar=null,Vl(t),Br=null,Cs=0,t=ye;for(;t!==null;)Nd(t.alternate,t),t=t.return;ye=null}}function Zr(t,e){var n=t.timeoutHandle;n!==-1&&(t.timeoutHandle=-1,Jf(n)),n=t.cancelPendingCommit,n!==null&&(t.cancelPendingCommit=null,n()),ri=0,Dc(),qe=t,ye=n=Ya(t.current,null),ve=e,De=0,Xn=null,ki=!1,Vr=En(t,e),Tc=!1,Wr=Vn=Rc=hr=Mi=Je=0,In=Gs=null,Cc=!1,(e&8)!==0&&(e|=e&32);var a=t.entangledLanes;if(a!==0)for(t=t.entanglements,a&=e;0<a;){var r=31-it(a),l=1<<r;e|=t[r],a&=~l}return ii=e,de(),n}function ih(t,e){he=null,nt.H=Ls,e===qr||e===Ao?(e=xu(),De=3):e===Ll?(e=xu(),De=4):De=e===uc?8:e!==null&&typeof e=="object"&&typeof e.then=="function"?6:1,Xn=e,ye===null&&(Je=1,Lo(t,na(e,t.current)))}function rh(){var t=Yn.current;return t===null?!0:(ve&4194048)===ve?sa===null:(ve&62914560)===ve||(ve&536870912)!==0?t===sa:!1}function sh(){var t=nt.H;return nt.H=Ls,t===null?Ls:t}function oh(){var t=nt.A;return nt.A=Mf,t}function Vo(){Je=4,ki||(ve&4194048)!==ve&&Yn.current!==null||(Vr=!0),(Mi&134217727)===0&&(hr&134217727)===0||qe===null||Oi(qe,ve,Vn,!1)}function Oc(t,e,n){var a=Ce;Ce|=2;var r=sh(),l=oh();(qe!==t||ve!==e)&&(Ko=null,Zr(t,e)),e=!1;var w=Je;t:do try{if(De!==0&&ye!==null){var B=ye,ot=Xn;switch(De){case 8:Dc(),w=6;break t;case 3:case 2:case 9:case 6:Yn.current===null&&(e=!0);var St=De;if(De=0,Xn=null,Jr(t,B,ot,St),n&&Vr){w=0;break t}break;default:St=De,De=0,Xn=null,Jr(t,B,ot,St)}}Of(),w=Je;break}catch(Nt){ih(t,Nt)}while(!0);return e&&t.shellSuspendCounter++,Xa=ar=null,Ce=a,nt.H=r,nt.A=l,ye===null&&(qe=null,ve=0,de()),w}function Of(){for(;ye!==null;)lh(ye)}function Nf(t,e){var n=Ce;Ce|=2;var a=sh(),r=oh();qe!==t||ve!==e?(Ko=null,Yo=oe()+500,Zr(t,e)):Vr=En(t,e);t:do try{if(De!==0&&ye!==null){e=ye;var l=Xn;e:switch(De){case 1:De=0,Xn=null,Jr(t,e,l,1);break;case 2:case 9:if(bu(l)){De=0,Xn=null,ch(e);break}e=function(){De!==2&&De!==9||qe!==t||(De=7),ja(t)},l.then(e,e);break t;case 3:De=7;break t;case 4:De=5;break t;case 7:bu(l)?(De=0,Xn=null,ch(e)):(De=0,Xn=null,Jr(t,e,l,7));break;case 5:var w=null;switch(ye.tag){case 26:w=ye.memoizedState;case 5:case 27:var B=ye;if(w?Vh(w):B.stateNode.complete){De=0,Xn=null;var ot=B.sibling;if(ot!==null)ye=ot;else{var St=B.return;St!==null?(ye=St,Wo(St)):ye=null}break e}}De=0,Xn=null,Jr(t,e,l,5);break;case 6:De=0,Xn=null,Jr(t,e,l,6);break;case 8:Dc(),Je=6;break t;default:throw Error(s(462))}}Pf();break}catch(Nt){ih(t,Nt)}while(!0);return Xa=ar=null,nt.H=a,nt.A=r,Ce=n,ye!==null?0:(qe=null,ve=0,de(),Je)}function Pf(){for(;ye!==null&&!ie();)lh(ye)}function lh(t){var e=Dd(t.alternate,t,ii);t.memoizedProps=t.pendingProps,e===null?Wo(t):ye=e}function ch(t){var e=t,n=e.alternate;switch(e.tag){case 15:case 0:e=Td(n,e,e.pendingProps,e.type,void 0,ve);break;case 11:e=Td(n,e,e.pendingProps,e.type.render,e.ref,ve);break;case 5:Vl(e);default:Nd(n,e),e=ye=ou(e,ii),e=Dd(n,e,ii)}t.memoizedProps=t.pendingProps,e===null?Wo(t):ye=e}function Jr(t,e,n,a){Xa=ar=null,Vl(e),Br=null,Cs=0;var r=e.return;try{if(Ef(t,r,e,n,ve)){Je=1,Lo(t,na(n,t.current)),ye=null;return}}catch(l){if(r!==null)throw ye=r,l;Je=1,Lo(t,na(n,t.current)),ye=null;return}e.flags&32768?(Ee||a===1?t=!0:Vr||(ve&536870912)!==0?t=!1:(ki=t=!0,(a===2||a===9||a===3||a===6)&&(a=Yn.current,a!==null&&a.tag===13&&(a.flags|=16384))),uh(e,t)):Wo(e)}function Wo(t){var e=t;do{if((e.flags&32768)!==0){uh(e,ki);return}t=e.return;var n=Tf(e.alternate,e,ii);if(n!==null){ye=n;return}if(e=e.sibling,e!==null){ye=e;return}ye=e=t}while(e!==null);Je===0&&(Je=5)}function uh(t,e){do{var n=Rf(t.alternate,t);if(n!==null){n.flags&=32767,ye=n;return}if(n=t.return,n!==null&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!e&&(t=t.sibling,t!==null)){ye=t;return}ye=t=n}while(t!==null);Je=6,ye=null}function dh(t,e,n,a,r,l,w,B,ot){t.cancelPendingCommit=null;do Qo();while(dn!==0);if((Ce&6)!==0)throw Error(s(327));if(e!==null){if(e===t.current)throw Error(s(177));if(l=e.lanes|e.childLanes,l|=re,ba(t,n,l,w,B,ot),t===qe&&(ye=qe=null,ve=0),Qr=e,Di=t,ri=n,kc=l,Mc=r,th=a,(e.subtreeFlags&10256)!==0||(e.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,If(Cn,function(){return gh(),null})):(t.callbackNode=null,t.callbackPriority=0),a=(e.flags&13878)!==0,(e.subtreeFlags&13878)!==0||a){a=nt.T,nt.T=null,r=W.p,W.p=2,w=Ce,Ce|=4;try{Cf(t,e,n)}finally{Ce=w,W.p=r,nt.T=a}}dn=1,hh(),fh(),ph()}}function hh(){if(dn===1){dn=0;var t=Di,e=Qr,n=(e.flags&13878)!==0;if((e.subtreeFlags&13878)!==0||n){n=nt.T,nt.T=null;var a=W.p;W.p=2;var r=Ce;Ce|=4;try{Kd(e,t);var l=Yc,w=M(t.containerInfo),B=l.focusedElem,ot=l.selectionRange;if(w!==B&&B&&B.ownerDocument&&A(B.ownerDocument.documentElement,B)){if(ot!==null&&z(B)){var St=ot.start,Nt=ot.end;if(Nt===void 0&&(Nt=St),"selectionStart"in B)B.selectionStart=St,B.selectionEnd=Math.min(Nt,B.value.length);else{var It=B.ownerDocument||document,Ct=It&&It.defaultView||window;if(Ct.getSelection){var kt=Ct.getSelection(),ne=B.textContent.length,ce=Math.min(ot.start,ne),ze=ot.end===void 0?ce:Math.min(ot.end,ne);!kt.extend&&ce>ze&&(w=ze,ze=ce,ce=w);var bt=g(B,ce),mt=g(B,ze);if(bt&&mt&&(kt.rangeCount!==1||kt.anchorNode!==bt.node||kt.anchorOffset!==bt.offset||kt.focusNode!==mt.node||kt.focusOffset!==mt.offset)){var Et=It.createRange();Et.setStart(bt.node,bt.offset),kt.removeAllRanges(),ce>ze?(kt.addRange(Et),kt.extend(mt.node,mt.offset)):(Et.setEnd(mt.node,mt.offset),kt.addRange(Et))}}}}for(It=[],kt=B;kt=kt.parentNode;)kt.nodeType===1&&It.push({element:kt,left:kt.scrollLeft,top:kt.scrollTop});for(typeof B.focus=="function"&&B.focus(),B=0;B<It.length;B++){var Ft=It[B];Ft.element.scrollLeft=Ft.left,Ft.element.scrollTop=Ft.top}}ll=!!Gc,Yc=Gc=null}finally{Ce=r,W.p=a,nt.T=n}}t.current=e,dn=2}}function fh(){if(dn===2){dn=0;var t=Di,e=Qr,n=(e.flags&8772)!==0;if((e.subtreeFlags&8772)!==0||n){n=nt.T,nt.T=null;var a=W.p;W.p=2;var r=Ce;Ce|=4;try{Bd(t,e.alternate,e)}finally{Ce=r,W.p=a,nt.T=n}}dn=3}}function ph(){if(dn===4||dn===3){dn=0,le();var t=Di,e=Qr,n=ri,a=th;(e.subtreeFlags&10256)!==0||(e.flags&10256)!==0?dn=5:(dn=0,Qr=Di=null,mh(t,t.pendingLanes));var r=t.pendingLanes;if(r===0&&(ji=null),Nn(n),e=e.stateNode,zt&&typeof zt.onCommitFiberRoot=="function")try{zt.onCommitFiberRoot(Qn,e,void 0,(e.current.flags&128)===128)}catch{}if(a!==null){e=nt.T,r=W.p,W.p=2,nt.T=null;try{for(var l=t.onRecoverableError,w=0;w<a.length;w++){var B=a[w];l(B.value,{componentStack:B.stack})}}finally{nt.T=e,W.p=r}}(ri&3)!==0&&Qo(),ja(t),r=t.pendingLanes,(n&261930)!==0&&(r&42)!==0?t===jc?Ys++:(Ys=0,jc=t):Ys=0,Ks(0)}}function mh(t,e){(t.pooledCacheLanes&=e)===0&&(e=t.pooledCache,e!=null&&(t.pooledCache=null,Ts(e)))}function Qo(){return hh(),fh(),ph(),gh()}function gh(){if(dn!==5)return!1;var t=Di,e=kc;kc=0;var n=Nn(ri),a=nt.T,r=W.p;try{W.p=32>n?32:n,nt.T=null,n=Mc,Mc=null;var l=Di,w=ri;if(dn=0,Qr=Di=null,ri=0,(Ce&6)!==0)throw Error(s(331));var B=Ce;if(Ce|=4,Zd(l.current),Vd(l,l.current,w,n),Ce=B,Ks(0,!1),zt&&typeof zt.onPostCommitFiberRoot=="function")try{zt.onPostCommitFiberRoot(Qn,l)}catch{}return!0}finally{W.p=r,nt.T=a,mh(t,e)}}function yh(t,e,n){e=na(n,e),e=cc(t.stateNode,e,2),t=wi(t,e,2),t!==null&&(gn(t,2),ja(t))}function Oe(t,e,n){if(t.tag===3)yh(t,t,n);else for(;e!==null;){if(e.tag===3){yh(e,t,n);break}else if(e.tag===1){var a=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof a.componentDidCatch=="function"&&(ji===null||!ji.has(a))){t=na(n,t),n=bd(2),a=wi(e,n,2),a!==null&&(vd(n,a,e,t),gn(a,2),ja(a));break}}e=e.return}}function Nc(t,e,n){var a=t.pingCache;if(a===null){a=t.pingCache=new jf;var r=new Set;a.set(e,r)}else r=a.get(e),r===void 0&&(r=new Set,a.set(e,r));r.has(n)||(Tc=!0,r.add(n),t=Lf.bind(null,t,e,n),e.then(t,t))}function Lf(t,e,n){var a=t.pingCache;a!==null&&a.delete(e),t.pingedLanes|=t.suspendedLanes&n,t.warmLanes&=~n,qe===t&&(ve&n)===n&&(Je===4||Je===3&&(ve&62914560)===ve&&300>oe()-Go?(Ce&2)===0&&Zr(t,0):Rc|=n,Wr===ve&&(Wr=0)),ja(t)}function bh(t,e){e===0&&(e=Da()),t=Me(t,e),t!==null&&(gn(t,e),ja(t))}function Ff(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),bh(t,n)}function zf(t,e){var n=0;switch(t.tag){case 31:case 13:var a=t.stateNode,r=t.memoizedState;r!==null&&(n=r.retryLane);break;case 19:a=t.stateNode;break;case 22:a=t.stateNode._retryCache;break;default:throw Error(s(314))}a!==null&&a.delete(e),bh(t,n)}function If(t,e){return Qt(t,e)}var Zo=null,$r=null,Pc=!1,Jo=!1,Lc=!1,Ni=0;function ja(t){t!==$r&&t.next===null&&($r===null?Zo=$r=t:$r=$r.next=t),Jo=!0,Pc||(Pc=!0,Bf())}function Ks(t,e){if(!Lc&&Jo){Lc=!0;do for(var n=!1,a=Zo;a!==null;){if(t!==0){var r=a.pendingLanes;if(r===0)var l=0;else{var w=a.suspendedLanes,B=a.pingedLanes;l=(1<<31-it(42|t)+1)-1,l&=r&~(w&~B),l=l&201326741?l&201326741|1:l?l|2:0}l!==0&&(n=!0,Ah(a,l))}else l=ve,l=Qe(a,a===qe?l:0,a.cancelPendingCommit!==null||a.timeoutHandle!==-1),(l&3)===0||En(a,l)||(n=!0,Ah(a,l));a=a.next}while(n);Lc=!1}}function qf(){vh()}function vh(){Jo=Pc=!1;var t=0;Ni!==0&&Zf()&&(t=Ni);for(var e=oe(),n=null,a=Zo;a!==null;){var r=a.next,l=xh(a,e);l===0?(a.next=null,n===null?Zo=r:n.next=r,r===null&&($r=n)):(n=a,(t!==0||(l&3)!==0)&&(Jo=!0)),a=r}dn!==0&&dn!==5||Ks(t),Ni!==0&&(Ni=0)}function xh(t,e){for(var n=t.suspendedLanes,a=t.pingedLanes,r=t.expirationTimes,l=t.pendingLanes&-62914561;0<l;){var w=31-it(l),B=1<<w,ot=r[w];ot===-1?((B&n)===0||(B&a)!==0)&&(r[w]=Zn(B,e)):ot<=e&&(t.expiredLanes|=B),l&=~B}if(e=qe,n=ve,n=Qe(t,t===e?n:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),a=t.callbackNode,n===0||t===e&&(De===2||De===9)||t.cancelPendingCommit!==null)return a!==null&&a!==null&&$t(a),t.callbackNode=null,t.callbackPriority=0;if((n&3)===0||En(t,n)){if(e=n&-n,e===t.callbackPriority)return e;switch(a!==null&&$t(a),Nn(n)){case 2:case 8:n=Be;break;case 32:n=Cn;break;case 268435456:n=An;break;default:n=Cn}return a=_h.bind(null,t),n=Qt(n,a),t.callbackPriority=e,t.callbackNode=n,e}return a!==null&&a!==null&&$t(a),t.callbackPriority=2,t.callbackNode=null,2}function _h(t,e){if(dn!==0&&dn!==5)return t.callbackNode=null,t.callbackPriority=0,null;var n=t.callbackNode;if(Qo()&&t.callbackNode!==n)return null;var a=ve;return a=Qe(t,t===qe?a:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),a===0?null:(nh(t,a,e),xh(t,oe()),t.callbackNode!=null&&t.callbackNode===n?_h.bind(null,t):null)}function Ah(t,e){if(Qo())return null;nh(t,e,!0)}function Bf(){$f(function(){(Ce&6)!==0?Qt(ke,qf):vh()})}function Fc(){if(Ni===0){var t=zr;t===0&&(t=Kt,Kt<<=1,(Kt&261888)===0&&(Kt=256)),Ni=t}return Ni}function Eh(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:pa(""+t)}function Sh(t,e){var n=e.ownerDocument.createElement("input");return n.name=e.name,n.value=e.value,t.id&&n.setAttribute("form",t.id),e.parentNode.insertBefore(n,e),t=new FormData(t),n.parentNode.removeChild(n),t}function Uf(t,e,n,a,r){if(e==="submit"&&n&&n.stateNode===r){var l=Eh((r[$e]||null).action),w=a.submitter;w&&(e=(e=w[$e]||null)?Eh(e.formAction):w.getAttribute("formAction"),e!==null&&(l=e,w=null));var B=new br("action","action",null,a,r);t.push({event:B,listeners:[{instance:null,listener:function(){if(a.defaultPrevented){if(Ni!==0){var ot=w?Sh(r,w):new FormData(r);ac(n,{pending:!0,data:ot,method:r.method,action:l},null,ot)}}else typeof l=="function"&&(B.preventDefault(),ot=w?Sh(r,w):new FormData(r),ac(n,{pending:!0,data:ot,method:r.method,action:l},l,ot))},currentTarget:r}]})}}for(var zc=0;zc<Zt.length;zc++){var Ic=Zt[zc],Hf=Ic.toLowerCase(),Gf=Ic[0].toUpperCase()+Ic.slice(1);Gt(Hf,"on"+Gf)}Gt(Tt,"onAnimationEnd"),Gt(_t,"onAnimationIteration"),Gt(Ot,"onAnimationStart"),Gt("dblclick","onDoubleClick"),Gt("focusin","onFocus"),Gt("focusout","onBlur"),Gt(Ut,"onTransitionRun"),Gt(Vt,"onTransitionStart"),Gt(Wt,"onTransitionCancel"),Gt(Ht,"onTransitionEnd"),Aa("onMouseEnter",["mouseout","mouseover"]),Aa("onMouseLeave",["mouseout","mouseover"]),Aa("onPointerEnter",["pointerout","pointerover"]),Aa("onPointerLeave",["pointerout","pointerover"]),ha("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),ha("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),ha("onBeforeInput",["compositionend","keypress","textInput","paste"]),ha("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),ha("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),ha("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Xs="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Yf=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Xs));function wh(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var a=t[n],r=a.event;a=a.listeners;t:{var l=void 0;if(e)for(var w=a.length-1;0<=w;w--){var B=a[w],ot=B.instance,St=B.currentTarget;if(B=B.listener,ot!==l&&r.isPropagationStopped())break t;l=B,r.currentTarget=St;try{l(r)}catch(Nt){ee(Nt)}r.currentTarget=null,l=ot}else for(w=0;w<a.length;w++){if(B=a[w],ot=B.instance,St=B.currentTarget,B=B.listener,ot!==l&&r.isPropagationStopped())break t;l=B,r.currentTarget=St;try{l(r)}catch(Nt){ee(Nt)}r.currentTarget=null,l=ot}}}}function be(t,e){var n=e[oi];n===void 0&&(n=e[oi]=new Set);var a=t+"__bubble";n.has(a)||(Th(e,t,2,!1),n.add(a))}function qc(t,e,n){var a=0;e&&(a|=4),Th(n,t,a,e)}var $o="_reactListening"+Math.random().toString(36).slice(2);function Bc(t){if(!t[$o]){t[$o]=!0,Oa.forEach(function(n){n!=="selectionchange"&&(Yf.has(n)||qc(n,!1,t),qc(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[$o]||(e[$o]=!0,qc("selectionchange",!1,e))}}function Th(t,e,n,a){switch(ef(e)){case 2:var r=vp;break;case 8:r=xp;break;default:r=nu}n=r.bind(null,e,n,t),r=void 0,!us||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(r=!0),a?r!==void 0?t.addEventListener(e,n,{capture:!0,passive:r}):t.addEventListener(e,n,!0):r!==void 0?t.addEventListener(e,n,{passive:r}):t.addEventListener(e,n,!1)}function Uc(t,e,n,a,r){var l=a;if((e&1)===0&&(e&2)===0&&a!==null)t:for(;;){if(a===null)return;var w=a.tag;if(w===3||w===4){var B=a.stateNode.containerInfo;if(B===r)break;if(w===4)for(w=a.return;w!==null;){var ot=w.tag;if((ot===3||ot===4)&&w.stateNode.containerInfo===r)return;w=w.return}for(;B!==null;){if(w=_a(B),w===null)return;if(ot=w.tag,ot===5||ot===6||ot===26||ot===27){a=l=w;continue t}B=B.parentNode}}a=a.return}ci(function(){var St=l,Nt=gr(n),It=[];t:{var Ct=te.get(t);if(Ct!==void 0){var kt=br,ne=t;switch(t){case"keypress":if(hi(n)===0)break t;case"keydown":case"keyup":kt=wr;break;case"focusin":ne="focus",kt=fi;break;case"focusout":ne="blur",kt=fi;break;case"beforeblur":case"afterblur":kt=fi;break;case"click":if(n.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":kt=_r;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":kt=ro;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":kt=ys;break;case Tt:case _t:case Ot:kt=so;break;case Ht:kt=bs;break;case"scroll":case"scrollend":kt=vr;break;case"wheel":kt=Rr;break;case"copy":case"cut":case"paste":kt=pi;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":kt=gs;break;case"toggle":case"beforetoggle":kt=co}var ce=(e&4)!==0,ze=!ce&&(t==="scroll"||t==="scrollend"),bt=ce?Ct!==null?Ct+"Capture":null:Ct;ce=[];for(var mt=St,Et;mt!==null;){var Ft=mt;if(Et=Ft.stateNode,Ft=Ft.tag,Ft!==5&&Ft!==26&&Ft!==27||Et===null||bt===null||(Ft=za(mt,bt),Ft!=null&&ce.push(Vs(mt,Ft,Et))),ze)break;mt=mt.return}0<ce.length&&(Ct=new kt(Ct,ne,null,n,Nt),It.push({event:Ct,listeners:ce}))}}if((e&7)===0){t:{if(Ct=t==="mouseover"||t==="pointerover",kt=t==="mouseout"||t==="pointerout",Ct&&n!==$n&&(ne=n.relatedTarget||n.fromElement)&&(_a(ne)||ne[Mn]))break t;if((kt||Ct)&&(Ct=Nt.window===Nt?Nt:(Ct=Nt.ownerDocument)?Ct.defaultView||Ct.parentWindow:window,kt?(ne=n.relatedTarget||n.toElement,kt=St,ne=ne?_a(ne):null,ne!==null&&(ze=O(ne),ce=ne.tag,ne!==ze||ce!==5&&ce!==27&&ce!==6)&&(ne=null)):(kt=null,ne=St),kt!==ne)){if(ce=_r,Ft="onMouseLeave",bt="onMouseEnter",mt="mouse",(t==="pointerout"||t==="pointerover")&&(ce=gs,Ft="onPointerLeave",bt="onPointerEnter",mt="pointer"),ze=kt==null?Ct:Un(kt),Et=ne==null?Ct:Un(ne),Ct=new ce(Ft,mt+"leave",kt,n,Nt),Ct.target=ze,Ct.relatedTarget=Et,Ft=null,_a(Nt)===St&&(ce=new ce(bt,mt+"enter",ne,n,Nt),ce.target=Et,ce.relatedTarget=ze,Ft=ce),ze=Ft,kt&&ne)e:{for(ce=Kf,bt=kt,mt=ne,Et=0,Ft=bt;Ft;Ft=ce(Ft))Et++;Ft=0;for(var se=mt;se;se=ce(se))Ft++;for(;0<Et-Ft;)bt=ce(bt),Et--;for(;0<Ft-Et;)mt=ce(mt),Ft--;for(;Et--;){if(bt===mt||mt!==null&&bt===mt.alternate){ce=bt;break e}bt=ce(bt),mt=ce(mt)}ce=null}else ce=null;kt!==null&&Rh(It,Ct,kt,ce,!1),ne!==null&&ze!==null&&Rh(It,ze,ne,ce,!0)}}t:{if(Ct=St?Un(St):window,kt=Ct.nodeName&&Ct.nodeName.toLowerCase(),kt==="select"||kt==="input"&&Ct.type==="file")var Se=tr;else if(Mr(Ct))if(ea)Se=yi;else{Se=Ga;var ae=go}else kt=Ct.nodeName,!kt||kt.toLowerCase()!=="input"||Ct.type!=="checkbox"&&Ct.type!=="radio"?St&&cs(St.elementType)&&(Se=tr):Se=Es;if(Se&&(Se=Se(t,St))){As(It,Se,n,Nt);break t}ae&&ae(t,Ct,St),t==="focusout"&&St&&Ct.type==="number"&&St.memoizedProps.value!=null&&Ki(Ct,"number",Ct.value)}switch(ae=St?Un(St):window,t){case"focusin":(Mr(ae)||ae.contentEditable==="true")&&(tt=ae,ut=St,xt=null);break;case"focusout":xt=ut=tt=null;break;case"mousedown":dt=!0;break;case"contextmenu":case"mouseup":case"dragend":dt=!1,ct(It,n,Nt);break;case"selectionchange":if(Z)break;case"keydown":case"keyup":ct(It,n,Nt)}var fe;if(Ji)t:{switch(t){case"compositionstart":var xe="onCompositionStart";break t;case"compositionend":xe="onCompositionEnd";break t;case"compositionupdate":xe="onCompositionUpdate";break t}xe=void 0}else Ua?_s(t,n)&&(xe="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(xe="onCompositionStart");xe&&(Cr&&n.locale!=="ko"&&(Ua||xe!=="onCompositionStart"?xe==="onCompositionEnd"&&Ua&&(fe=di()):(ta=Nt,yr="value"in ta?ta.value:ta.textContent,Ua=!0)),ae=tl(St,xe),0<ae.length&&(xe=new Sr(xe,t,null,n,Nt),It.push({event:xe,listeners:ae}),fe?xe.data=fe:(fe=ho(n),fe!==null&&(xe.data=fe)))),(fe=xl?fo(t,n):_l(t,n))&&(xe=tl(St,"onBeforeInput"),0<xe.length&&(ae=new Sr("onBeforeInput","beforeinput",null,n,Nt),It.push({event:ae,listeners:xe}),ae.data=fe)),Uf(It,t,St,n,Nt)}wh(It,e)})}function Vs(t,e,n){return{instance:t,listener:e,currentTarget:n}}function tl(t,e){for(var n=e+"Capture",a=[];t!==null;){var r=t,l=r.stateNode;if(r=r.tag,r!==5&&r!==26&&r!==27||l===null||(r=za(t,n),r!=null&&a.unshift(Vs(t,r,l)),r=za(t,e),r!=null&&a.push(Vs(t,r,l))),t.tag===3)return a;t=t.return}return[]}function Kf(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function Rh(t,e,n,a,r){for(var l=e._reactName,w=[];n!==null&&n!==a;){var B=n,ot=B.alternate,St=B.stateNode;if(B=B.tag,ot!==null&&ot===a)break;B!==5&&B!==26&&B!==27||St===null||(ot=St,r?(St=za(n,l),St!=null&&w.unshift(Vs(n,St,ot))):r||(St=za(n,l),St!=null&&w.push(Vs(n,St,ot)))),n=n.return}w.length!==0&&t.push({event:e,listeners:w})}var Xf=/\r\n?/g,Vf=/\u0000|\uFFFD/g;function Ch(t){return(typeof t=="string"?t:""+t).replace(Xf,`
`).replace(Vf,"")}function kh(t,e){return e=Ch(e),Ch(t)===e}function Fe(t,e,n,a,r,l){switch(n){case"children":typeof a=="string"?e==="body"||e==="textarea"&&a===""||Pa(t,a):(typeof a=="number"||typeof a=="bigint")&&e!=="body"&&Pa(t,""+a);break;case"className":Gi(t,"class",a);break;case"tabIndex":Gi(t,"tabindex",a);break;case"dir":case"role":case"viewBox":case"width":case"height":Gi(t,n,a);break;case"style":ls(t,a,l);break;case"data":if(e!=="object"){Gi(t,"data",a);break}case"src":case"href":if(a===""&&(e!=="a"||n!=="href")){t.removeAttribute(n);break}if(a==null||typeof a=="function"||typeof a=="symbol"||typeof a=="boolean"){t.removeAttribute(n);break}a=pa(""+a),t.setAttribute(n,a);break;case"action":case"formAction":if(typeof a=="function"){t.setAttribute(n,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof l=="function"&&(n==="formAction"?(e!=="input"&&Fe(t,e,"name",r.name,r,null),Fe(t,e,"formEncType",r.formEncType,r,null),Fe(t,e,"formMethod",r.formMethod,r,null),Fe(t,e,"formTarget",r.formTarget,r,null)):(Fe(t,e,"encType",r.encType,r,null),Fe(t,e,"method",r.method,r,null),Fe(t,e,"target",r.target,r,null)));if(a==null||typeof a=="symbol"||typeof a=="boolean"){t.removeAttribute(n);break}a=pa(""+a),t.setAttribute(n,a);break;case"onClick":a!=null&&(t.onclick=Pn);break;case"onScroll":a!=null&&be("scroll",t);break;case"onScrollEnd":a!=null&&be("scrollend",t);break;case"dangerouslySetInnerHTML":if(a!=null){if(typeof a!="object"||!("__html"in a))throw Error(s(61));if(n=a.__html,n!=null){if(r.children!=null)throw Error(s(60));t.innerHTML=n}}break;case"multiple":t.multiple=a&&typeof a!="function"&&typeof a!="symbol";break;case"muted":t.muted=a&&typeof a!="function"&&typeof a!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(a==null||typeof a=="function"||typeof a=="boolean"||typeof a=="symbol"){t.removeAttribute("xlink:href");break}n=pa(""+a),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",n);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":a!=null&&typeof a!="function"&&typeof a!="symbol"?t.setAttribute(n,""+a):t.removeAttribute(n);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":a&&typeof a!="function"&&typeof a!="symbol"?t.setAttribute(n,""):t.removeAttribute(n);break;case"capture":case"download":a===!0?t.setAttribute(n,""):a!==!1&&a!=null&&typeof a!="function"&&typeof a!="symbol"?t.setAttribute(n,a):t.removeAttribute(n);break;case"cols":case"rows":case"size":case"span":a!=null&&typeof a!="function"&&typeof a!="symbol"&&!isNaN(a)&&1<=a?t.setAttribute(n,a):t.removeAttribute(n);break;case"rowSpan":case"start":a==null||typeof a=="function"||typeof a=="symbol"||isNaN(a)?t.removeAttribute(n):t.setAttribute(n,a);break;case"popover":be("beforetoggle",t),be("toggle",t),pe(t,"popover",a);break;case"xlinkActuate":Jn(t,"http://www.w3.org/1999/xlink","xlink:actuate",a);break;case"xlinkArcrole":Jn(t,"http://www.w3.org/1999/xlink","xlink:arcrole",a);break;case"xlinkRole":Jn(t,"http://www.w3.org/1999/xlink","xlink:role",a);break;case"xlinkShow":Jn(t,"http://www.w3.org/1999/xlink","xlink:show",a);break;case"xlinkTitle":Jn(t,"http://www.w3.org/1999/xlink","xlink:title",a);break;case"xlinkType":Jn(t,"http://www.w3.org/1999/xlink","xlink:type",a);break;case"xmlBase":Jn(t,"http://www.w3.org/XML/1998/namespace","xml:base",a);break;case"xmlLang":Jn(t,"http://www.w3.org/XML/1998/namespace","xml:lang",a);break;case"xmlSpace":Jn(t,"http://www.w3.org/XML/1998/namespace","xml:space",a);break;case"is":pe(t,"is",a);break;case"innerText":case"textContent":break;default:(!(2<n.length)||n[0]!=="o"&&n[0]!=="O"||n[1]!=="n"&&n[1]!=="N")&&(n=yl.get(n)||n,pe(t,n,a))}}function Hc(t,e,n,a,r,l){switch(n){case"style":ls(t,a,l);break;case"dangerouslySetInnerHTML":if(a!=null){if(typeof a!="object"||!("__html"in a))throw Error(s(61));if(n=a.__html,n!=null){if(r.children!=null)throw Error(s(60));t.innerHTML=n}}break;case"children":typeof a=="string"?Pa(t,a):(typeof a=="number"||typeof a=="bigint")&&Pa(t,""+a);break;case"onScroll":a!=null&&be("scroll",t);break;case"onScrollEnd":a!=null&&be("scrollend",t);break;case"onClick":a!=null&&(t.onclick=Pn);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Ui.hasOwnProperty(n))t:{if(n[0]==="o"&&n[1]==="n"&&(r=n.endsWith("Capture"),e=n.slice(2,r?n.length-7:void 0),l=t[$e]||null,l=l!=null?l[n]:null,typeof l=="function"&&t.removeEventListener(e,l,r),typeof a=="function")){typeof l!="function"&&l!==null&&(n in t?t[n]=null:t.hasAttribute(n)&&t.removeAttribute(n)),t.addEventListener(e,a,r);break t}n in t?t[n]=a:a===!0?t.setAttribute(n,""):pe(t,n,a)}}}function _n(t,e,n){switch(e){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":be("error",t),be("load",t);var a=!1,r=!1,l;for(l in n)if(n.hasOwnProperty(l)){var w=n[l];if(w!=null)switch(l){case"src":a=!0;break;case"srcSet":r=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,e));default:Fe(t,e,l,w,n,null)}}r&&Fe(t,e,"srcSet",n.srcSet,n,null),a&&Fe(t,e,"src",n.src,n,null);return;case"input":be("invalid",t);var B=l=w=r=null,ot=null,St=null;for(a in n)if(n.hasOwnProperty(a)){var Nt=n[a];if(Nt!=null)switch(a){case"name":r=Nt;break;case"type":w=Nt;break;case"checked":ot=Nt;break;case"defaultChecked":St=Nt;break;case"value":l=Nt;break;case"defaultValue":B=Nt;break;case"children":case"dangerouslySetInnerHTML":if(Nt!=null)throw Error(s(137,e));break;default:Fe(t,e,a,Nt,n,null)}}mr(t,l,B,ot,St,w,r,!1);return;case"select":be("invalid",t),a=w=l=null;for(r in n)if(n.hasOwnProperty(r)&&(B=n[r],B!=null))switch(r){case"value":l=B;break;case"defaultValue":w=B;break;case"multiple":a=B;default:Fe(t,e,r,B,n,null)}e=l,n=w,t.multiple=!!a,e!=null?fa(t,!!a,e,!1):n!=null&&fa(t,!!a,n,!0);return;case"textarea":be("invalid",t),l=r=a=null;for(w in n)if(n.hasOwnProperty(w)&&(B=n[w],B!=null))switch(w){case"value":a=B;break;case"defaultValue":r=B;break;case"children":l=B;break;case"dangerouslySetInnerHTML":if(B!=null)throw Error(s(91));break;default:Fe(t,e,w,B,n,null)}Xi(t,a,r,l);return;case"option":for(ot in n)n.hasOwnProperty(ot)&&(a=n[ot],a!=null)&&(ot==="selected"?t.selected=a&&typeof a!="function"&&typeof a!="symbol":Fe(t,e,ot,a,n,null));return;case"dialog":be("beforetoggle",t),be("toggle",t),be("cancel",t),be("close",t);break;case"iframe":case"object":be("load",t);break;case"video":case"audio":for(a=0;a<Xs.length;a++)be(Xs[a],t);break;case"image":be("error",t),be("load",t);break;case"details":be("toggle",t);break;case"embed":case"source":case"link":be("error",t),be("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(St in n)if(n.hasOwnProperty(St)&&(a=n[St],a!=null))switch(St){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,e));default:Fe(t,e,St,a,n,null)}return;default:if(cs(e)){for(Nt in n)n.hasOwnProperty(Nt)&&(a=n[Nt],a!==void 0&&Hc(t,e,Nt,a,n,void 0));return}}for(B in n)n.hasOwnProperty(B)&&(a=n[B],a!=null&&Fe(t,e,B,a,n,null))}function Wf(t,e,n,a){switch(e){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var r=null,l=null,w=null,B=null,ot=null,St=null,Nt=null;for(kt in n){var It=n[kt];if(n.hasOwnProperty(kt)&&It!=null)switch(kt){case"checked":break;case"value":break;case"defaultValue":ot=It;default:a.hasOwnProperty(kt)||Fe(t,e,kt,null,a,It)}}for(var Ct in a){var kt=a[Ct];if(It=n[Ct],a.hasOwnProperty(Ct)&&(kt!=null||It!=null))switch(Ct){case"type":l=kt;break;case"name":r=kt;break;case"checked":St=kt;break;case"defaultChecked":Nt=kt;break;case"value":w=kt;break;case"defaultValue":B=kt;break;case"children":case"dangerouslySetInnerHTML":if(kt!=null)throw Error(s(137,e));break;default:kt!==It&&Fe(t,e,Ct,kt,a,It)}}Ea(t,w,B,ot,St,Nt,l,r);return;case"select":kt=w=B=Ct=null;for(l in n)if(ot=n[l],n.hasOwnProperty(l)&&ot!=null)switch(l){case"value":break;case"multiple":kt=ot;default:a.hasOwnProperty(l)||Fe(t,e,l,null,a,ot)}for(r in a)if(l=a[r],ot=n[r],a.hasOwnProperty(r)&&(l!=null||ot!=null))switch(r){case"value":Ct=l;break;case"defaultValue":B=l;break;case"multiple":w=l;default:l!==ot&&Fe(t,e,r,l,a,ot)}e=B,n=w,a=kt,Ct!=null?fa(t,!!n,Ct,!1):!!a!=!!n&&(e!=null?fa(t,!!n,e,!0):fa(t,!!n,n?[]:"",!1));return;case"textarea":kt=Ct=null;for(B in n)if(r=n[B],n.hasOwnProperty(B)&&r!=null&&!a.hasOwnProperty(B))switch(B){case"value":break;case"children":break;default:Fe(t,e,B,null,a,r)}for(w in a)if(r=a[w],l=n[w],a.hasOwnProperty(w)&&(r!=null||l!=null))switch(w){case"value":Ct=r;break;case"defaultValue":kt=r;break;case"children":break;case"dangerouslySetInnerHTML":if(r!=null)throw Error(s(91));break;default:r!==l&&Fe(t,e,w,r,a,l)}os(t,Ct,kt);return;case"option":for(var ne in n)Ct=n[ne],n.hasOwnProperty(ne)&&Ct!=null&&!a.hasOwnProperty(ne)&&(ne==="selected"?t.selected=!1:Fe(t,e,ne,null,a,Ct));for(ot in a)Ct=a[ot],kt=n[ot],a.hasOwnProperty(ot)&&Ct!==kt&&(Ct!=null||kt!=null)&&(ot==="selected"?t.selected=Ct&&typeof Ct!="function"&&typeof Ct!="symbol":Fe(t,e,ot,Ct,a,kt));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var ce in n)Ct=n[ce],n.hasOwnProperty(ce)&&Ct!=null&&!a.hasOwnProperty(ce)&&Fe(t,e,ce,null,a,Ct);for(St in a)if(Ct=a[St],kt=n[St],a.hasOwnProperty(St)&&Ct!==kt&&(Ct!=null||kt!=null))switch(St){case"children":case"dangerouslySetInnerHTML":if(Ct!=null)throw Error(s(137,e));break;default:Fe(t,e,St,Ct,a,kt)}return;default:if(cs(e)){for(var ze in n)Ct=n[ze],n.hasOwnProperty(ze)&&Ct!==void 0&&!a.hasOwnProperty(ze)&&Hc(t,e,ze,void 0,a,Ct);for(Nt in a)Ct=a[Nt],kt=n[Nt],!a.hasOwnProperty(Nt)||Ct===kt||Ct===void 0&&kt===void 0||Hc(t,e,Nt,Ct,a,kt);return}}for(var bt in n)Ct=n[bt],n.hasOwnProperty(bt)&&Ct!=null&&!a.hasOwnProperty(bt)&&Fe(t,e,bt,null,a,Ct);for(It in a)Ct=a[It],kt=n[It],!a.hasOwnProperty(It)||Ct===kt||Ct==null&&kt==null||Fe(t,e,It,Ct,a,kt)}function Mh(t){switch(t){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function Qf(){if(typeof performance.getEntriesByType=="function"){for(var t=0,e=0,n=performance.getEntriesByType("resource"),a=0;a<n.length;a++){var r=n[a],l=r.transferSize,w=r.initiatorType,B=r.duration;if(l&&B&&Mh(w)){for(w=0,B=r.responseEnd,a+=1;a<n.length;a++){var ot=n[a],St=ot.startTime;if(St>B)break;var Nt=ot.transferSize,It=ot.initiatorType;Nt&&Mh(It)&&(ot=ot.responseEnd,w+=Nt*(ot<B?1:(B-St)/(ot-St)))}if(--a,e+=8*(l+w)/(r.duration/1e3),t++,10<t)break}}if(0<t)return e/t/1e6}return navigator.connection&&(t=navigator.connection.downlink,typeof t=="number")?t:5}var Gc=null,Yc=null;function el(t){return t.nodeType===9?t:t.ownerDocument}function jh(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Dh(t,e){if(t===0)switch(e){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&e==="foreignObject"?0:t}function Kc(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.children=="bigint"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Xc=null;function Zf(){var t=window.event;return t&&t.type==="popstate"?t===Xc?!1:(Xc=t,!0):(Xc=null,!1)}var Oh=typeof setTimeout=="function"?setTimeout:void 0,Jf=typeof clearTimeout=="function"?clearTimeout:void 0,Nh=typeof Promise=="function"?Promise:void 0,$f=typeof queueMicrotask=="function"?queueMicrotask:typeof Nh<"u"?function(t){return Nh.resolve(null).then(t).catch(tp)}:Oh;function tp(t){setTimeout(function(){throw t})}function Pi(t){return t==="head"}function Ph(t,e){var n=e,a=0;do{var r=n.nextSibling;if(t.removeChild(n),r&&r.nodeType===8)if(n=r.data,n==="/$"||n==="/&"){if(a===0){t.removeChild(r),as(e);return}a--}else if(n==="$"||n==="$?"||n==="$~"||n==="$!"||n==="&")a++;else if(n==="html")Ws(t.ownerDocument.documentElement);else if(n==="head"){n=t.ownerDocument.head,Ws(n);for(var l=n.firstChild;l;){var w=l.nextSibling,B=l.nodeName;l[Bn]||B==="SCRIPT"||B==="STYLE"||B==="LINK"&&l.rel.toLowerCase()==="stylesheet"||n.removeChild(l),l=w}}else n==="body"&&Ws(t.ownerDocument.body);n=r}while(n);as(e)}function Lh(t,e){var n=t;t=0;do{var a=n.nextSibling;if(n.nodeType===1?e?(n._stashedDisplay=n.style.display,n.style.display="none"):(n.style.display=n._stashedDisplay||"",n.getAttribute("style")===""&&n.removeAttribute("style")):n.nodeType===3&&(e?(n._stashedText=n.nodeValue,n.nodeValue=""):n.nodeValue=n._stashedText||""),a&&a.nodeType===8)if(n=a.data,n==="/$"){if(t===0)break;t--}else n!=="$"&&n!=="$?"&&n!=="$~"&&n!=="$!"||t++;n=a}while(n)}function Vc(t){var e=t.firstChild;for(e&&e.nodeType===10&&(e=e.nextSibling);e;){var n=e;switch(e=e.nextSibling,n.nodeName){case"HTML":case"HEAD":case"BODY":Vc(n),fr(n);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(n.rel.toLowerCase()==="stylesheet")continue}t.removeChild(n)}}function ep(t,e,n,a){for(;t.nodeType===1;){var r=n;if(t.nodeName.toLowerCase()!==e.toLowerCase()){if(!a&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(a){if(!t[Bn])switch(e){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(l=t.getAttribute("rel"),l==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(l!==r.rel||t.getAttribute("href")!==(r.href==null||r.href===""?null:r.href)||t.getAttribute("crossorigin")!==(r.crossOrigin==null?null:r.crossOrigin)||t.getAttribute("title")!==(r.title==null?null:r.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(l=t.getAttribute("src"),(l!==(r.src==null?null:r.src)||t.getAttribute("type")!==(r.type==null?null:r.type)||t.getAttribute("crossorigin")!==(r.crossOrigin==null?null:r.crossOrigin))&&l&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(e==="input"&&t.type==="hidden"){var l=r.name==null?null:""+r.name;if(r.type==="hidden"&&t.getAttribute("name")===l)return t}else return t;if(t=oa(t.nextSibling),t===null)break}return null}function np(t,e,n){if(e==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!n||(t=oa(t.nextSibling),t===null))return null;return t}function Fh(t,e){for(;t.nodeType!==8;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!e||(t=oa(t.nextSibling),t===null))return null;return t}function Wc(t){return t.data==="$?"||t.data==="$~"}function Qc(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState!=="loading"}function ap(t,e){var n=t.ownerDocument;if(t.data==="$~")t._reactRetry=e;else if(t.data!=="$?"||n.readyState!=="loading")e();else{var a=function(){e(),n.removeEventListener("DOMContentLoaded",a)};n.addEventListener("DOMContentLoaded",a),t._reactRetry=a}}function oa(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?"||e==="$~"||e==="&"||e==="F!"||e==="F")break;if(e==="/$"||e==="/&")return null}}return t}var Zc=null;function zh(t){t=t.nextSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"||n==="/&"){if(e===0)return oa(t.nextSibling);e--}else n!=="$"&&n!=="$!"&&n!=="$?"&&n!=="$~"&&n!=="&"||e++}t=t.nextSibling}return null}function Ih(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"||n==="$~"||n==="&"){if(e===0)return t;e--}else n!=="/$"&&n!=="/&"||e++}t=t.previousSibling}return null}function qh(t,e,n){switch(e=el(n),t){case"html":if(t=e.documentElement,!t)throw Error(s(452));return t;case"head":if(t=e.head,!t)throw Error(s(453));return t;case"body":if(t=e.body,!t)throw Error(s(454));return t;default:throw Error(s(451))}}function Ws(t){for(var e=t.attributes;e.length;)t.removeAttributeNode(e[0]);fr(t)}var la=new Map,Bh=new Set;function nl(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var si=W.d;W.d={f:ip,r:rp,D:sp,C:op,L:lp,m:cp,X:dp,S:up,M:hp};function ip(){var t=si.f(),e=Xo();return t||e}function rp(t){var e=Ne(t);e!==null&&e.tag===5&&e.type==="form"?id(e):si.r(t)}var ts=typeof document>"u"?null:document;function Uh(t,e,n){var a=ts;if(a&&typeof e=="string"&&e){var r=hn(e);r='link[rel="'+t+'"][href="'+r+'"]',typeof n=="string"&&(r+='[crossorigin="'+n+'"]'),Bh.has(r)||(Bh.add(r),t={rel:t,crossOrigin:n,href:e},a.querySelector(r)===null&&(e=a.createElement("link"),_n(e,"link",t),tn(e),a.head.appendChild(e)))}}function sp(t){si.D(t),Uh("dns-prefetch",t,null)}function op(t,e){si.C(t,e),Uh("preconnect",t,e)}function lp(t,e,n){si.L(t,e,n);var a=ts;if(a&&t&&e){var r='link[rel="preload"][as="'+hn(e)+'"]';e==="image"&&n&&n.imageSrcSet?(r+='[imagesrcset="'+hn(n.imageSrcSet)+'"]',typeof n.imageSizes=="string"&&(r+='[imagesizes="'+hn(n.imageSizes)+'"]')):r+='[href="'+hn(t)+'"]';var l=r;switch(e){case"style":l=es(t);break;case"script":l=ns(t)}la.has(l)||(t=h({rel:"preload",href:e==="image"&&n&&n.imageSrcSet?void 0:t,as:e},n),la.set(l,t),a.querySelector(r)!==null||e==="style"&&a.querySelector(Qs(l))||e==="script"&&a.querySelector(Zs(l))||(e=a.createElement("link"),_n(e,"link",t),tn(e),a.head.appendChild(e)))}}function cp(t,e){si.m(t,e);var n=ts;if(n&&t){var a=e&&typeof e.as=="string"?e.as:"script",r='link[rel="modulepreload"][as="'+hn(a)+'"][href="'+hn(t)+'"]',l=r;switch(a){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":l=ns(t)}if(!la.has(l)&&(t=h({rel:"modulepreload",href:t},e),la.set(l,t),n.querySelector(r)===null)){switch(a){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(n.querySelector(Zs(l)))return}a=n.createElement("link"),_n(a,"link",t),tn(a),n.head.appendChild(a)}}}function up(t,e,n){si.S(t,e,n);var a=ts;if(a&&t){var r=Sn(a).hoistableStyles,l=es(t);e=e||"default";var w=r.get(l);if(!w){var B={loading:0,preload:null};if(w=a.querySelector(Qs(l)))B.loading=5;else{t=h({rel:"stylesheet",href:t,"data-precedence":e},n),(n=la.get(l))&&Jc(t,n);var ot=w=a.createElement("link");tn(ot),_n(ot,"link",t),ot._p=new Promise(function(St,Nt){ot.onload=St,ot.onerror=Nt}),ot.addEventListener("load",function(){B.loading|=1}),ot.addEventListener("error",function(){B.loading|=2}),B.loading|=4,al(w,e,a)}w={type:"stylesheet",instance:w,count:1,state:B},r.set(l,w)}}}function dp(t,e){si.X(t,e);var n=ts;if(n&&t){var a=Sn(n).hoistableScripts,r=ns(t),l=a.get(r);l||(l=n.querySelector(Zs(r)),l||(t=h({src:t,async:!0},e),(e=la.get(r))&&$c(t,e),l=n.createElement("script"),tn(l),_n(l,"link",t),n.head.appendChild(l)),l={type:"script",instance:l,count:1,state:null},a.set(r,l))}}function hp(t,e){si.M(t,e);var n=ts;if(n&&t){var a=Sn(n).hoistableScripts,r=ns(t),l=a.get(r);l||(l=n.querySelector(Zs(r)),l||(t=h({src:t,async:!0,type:"module"},e),(e=la.get(r))&&$c(t,e),l=n.createElement("script"),tn(l),_n(l,"link",t),n.head.appendChild(l)),l={type:"script",instance:l,count:1,state:null},a.set(r,l))}}function Hh(t,e,n,a){var r=(r=b.current)?nl(r):null;if(!r)throw Error(s(446));switch(t){case"meta":case"title":return null;case"style":return typeof n.precedence=="string"&&typeof n.href=="string"?(e=es(n.href),n=Sn(r).hoistableStyles,a=n.get(e),a||(a={type:"style",instance:null,count:0,state:null},n.set(e,a)),a):{type:"void",instance:null,count:0,state:null};case"link":if(n.rel==="stylesheet"&&typeof n.href=="string"&&typeof n.precedence=="string"){t=es(n.href);var l=Sn(r).hoistableStyles,w=l.get(t);if(w||(r=r.ownerDocument||r,w={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},l.set(t,w),(l=r.querySelector(Qs(t)))&&!l._p&&(w.instance=l,w.state.loading=5),la.has(t)||(n={rel:"preload",as:"style",href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},la.set(t,n),l||fp(r,t,n,w.state))),e&&a===null)throw Error(s(528,""));return w}if(e&&a!==null)throw Error(s(529,""));return null;case"script":return e=n.async,n=n.src,typeof n=="string"&&e&&typeof e!="function"&&typeof e!="symbol"?(e=ns(n),n=Sn(r).hoistableScripts,a=n.get(e),a||(a={type:"script",instance:null,count:0,state:null},n.set(e,a)),a):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,t))}}function es(t){return'href="'+hn(t)+'"'}function Qs(t){return'link[rel="stylesheet"]['+t+"]"}function Gh(t){return h({},t,{"data-precedence":t.precedence,precedence:null})}function fp(t,e,n,a){t.querySelector('link[rel="preload"][as="style"]['+e+"]")?a.loading=1:(e=t.createElement("link"),a.preload=e,e.addEventListener("load",function(){return a.loading|=1}),e.addEventListener("error",function(){return a.loading|=2}),_n(e,"link",n),tn(e),t.head.appendChild(e))}function ns(t){return'[src="'+hn(t)+'"]'}function Zs(t){return"script[async]"+t}function Yh(t,e,n){if(e.count++,e.instance===null)switch(e.type){case"style":var a=t.querySelector('style[data-href~="'+hn(n.href)+'"]');if(a)return e.instance=a,tn(a),a;var r=h({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return a=(t.ownerDocument||t).createElement("style"),tn(a),_n(a,"style",r),al(a,n.precedence,t),e.instance=a;case"stylesheet":r=es(n.href);var l=t.querySelector(Qs(r));if(l)return e.state.loading|=4,e.instance=l,tn(l),l;a=Gh(n),(r=la.get(r))&&Jc(a,r),l=(t.ownerDocument||t).createElement("link"),tn(l);var w=l;return w._p=new Promise(function(B,ot){w.onload=B,w.onerror=ot}),_n(l,"link",a),e.state.loading|=4,al(l,n.precedence,t),e.instance=l;case"script":return l=ns(n.src),(r=t.querySelector(Zs(l)))?(e.instance=r,tn(r),r):(a=n,(r=la.get(l))&&(a=h({},n),$c(a,r)),t=t.ownerDocument||t,r=t.createElement("script"),tn(r),_n(r,"link",a),t.head.appendChild(r),e.instance=r);case"void":return null;default:throw Error(s(443,e.type))}else e.type==="stylesheet"&&(e.state.loading&4)===0&&(a=e.instance,e.state.loading|=4,al(a,n.precedence,t));return e.instance}function al(t,e,n){for(var a=n.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),r=a.length?a[a.length-1]:null,l=r,w=0;w<a.length;w++){var B=a[w];if(B.dataset.precedence===e)l=B;else if(l!==r)break}l?l.parentNode.insertBefore(t,l.nextSibling):(e=n.nodeType===9?n.head:n,e.insertBefore(t,e.firstChild))}function Jc(t,e){t.crossOrigin==null&&(t.crossOrigin=e.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=e.referrerPolicy),t.title==null&&(t.title=e.title)}function $c(t,e){t.crossOrigin==null&&(t.crossOrigin=e.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=e.referrerPolicy),t.integrity==null&&(t.integrity=e.integrity)}var il=null;function Kh(t,e,n){if(il===null){var a=new Map,r=il=new Map;r.set(n,a)}else r=il,a=r.get(n),a||(a=new Map,r.set(n,a));if(a.has(t))return a;for(a.set(t,null),n=n.getElementsByTagName(t),r=0;r<n.length;r++){var l=n[r];if(!(l[Bn]||l[Ue]||t==="link"&&l.getAttribute("rel")==="stylesheet")&&l.namespaceURI!=="http://www.w3.org/2000/svg"){var w=l.getAttribute(e)||"";w=t+w;var B=a.get(w);B?B.push(l):a.set(w,[l])}}return a}function Xh(t,e,n){t=t.ownerDocument||t,t.head.insertBefore(n,e==="title"?t.querySelector("head > title"):null)}function pp(t,e,n){if(n===1||e.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof e.precedence!="string"||typeof e.href!="string"||e.href==="")break;return!0;case"link":if(typeof e.rel!="string"||typeof e.href!="string"||e.href===""||e.onLoad||e.onError)break;return e.rel==="stylesheet"?(t=e.disabled,typeof e.precedence=="string"&&t==null):!0;case"script":if(e.async&&typeof e.async!="function"&&typeof e.async!="symbol"&&!e.onLoad&&!e.onError&&e.src&&typeof e.src=="string")return!0}return!1}function Vh(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}function mp(t,e,n,a){if(n.type==="stylesheet"&&(typeof a.media!="string"||matchMedia(a.media).matches!==!1)&&(n.state.loading&4)===0){if(n.instance===null){var r=es(a.href),l=e.querySelector(Qs(r));if(l){e=l._p,e!==null&&typeof e=="object"&&typeof e.then=="function"&&(t.count++,t=rl.bind(t),e.then(t,t)),n.state.loading|=4,n.instance=l,tn(l);return}l=e.ownerDocument||e,a=Gh(a),(r=la.get(r))&&Jc(a,r),l=l.createElement("link"),tn(l);var w=l;w._p=new Promise(function(B,ot){w.onload=B,w.onerror=ot}),_n(l,"link",a),n.instance=l}t.stylesheets===null&&(t.stylesheets=new Map),t.stylesheets.set(n,e),(e=n.state.preload)&&(n.state.loading&3)===0&&(t.count++,n=rl.bind(t),e.addEventListener("load",n),e.addEventListener("error",n))}}var tu=0;function gp(t,e){return t.stylesheets&&t.count===0&&ol(t,t.stylesheets),0<t.count||0<t.imgCount?function(n){var a=setTimeout(function(){if(t.stylesheets&&ol(t,t.stylesheets),t.unsuspend){var l=t.unsuspend;t.unsuspend=null,l()}},6e4+e);0<t.imgBytes&&tu===0&&(tu=62500*Qf());var r=setTimeout(function(){if(t.waitingForImages=!1,t.count===0&&(t.stylesheets&&ol(t,t.stylesheets),t.unsuspend)){var l=t.unsuspend;t.unsuspend=null,l()}},(t.imgBytes>tu?50:800)+e);return t.unsuspend=n,function(){t.unsuspend=null,clearTimeout(a),clearTimeout(r)}}:null}function rl(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)ol(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var sl=null;function ol(t,e){t.stylesheets=null,t.unsuspend!==null&&(t.count++,sl=new Map,e.forEach(yp,t),sl=null,rl.call(t))}function yp(t,e){if(!(e.state.loading&4)){var n=sl.get(t);if(n)var a=n.get(null);else{n=new Map,sl.set(t,n);for(var r=t.querySelectorAll("link[data-precedence],style[data-precedence]"),l=0;l<r.length;l++){var w=r[l];(w.nodeName==="LINK"||w.getAttribute("media")!=="not all")&&(n.set(w.dataset.precedence,w),a=w)}a&&n.set(null,a)}r=e.instance,w=r.getAttribute("data-precedence"),l=n.get(w)||a,l===a&&n.set(null,r),n.set(w,r),this.count++,a=rl.bind(this),r.addEventListener("load",a),r.addEventListener("error",a),l?l.parentNode.insertBefore(r,l.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(r,t.firstChild)),e.state.loading|=4}}var Js={$$typeof:V,Provider:null,Consumer:null,_currentValue:D,_currentValue2:D,_threadCount:0};function bp(t,e,n,a,r,l,w,B,ot){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=je(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=je(0),this.hiddenUpdates=je(null),this.identifierPrefix=a,this.onUncaughtError=r,this.onCaughtError=l,this.onRecoverableError=w,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=ot,this.incompleteTransitions=new Map}function Wh(t,e,n,a,r,l,w,B,ot,St,Nt,It){return t=new bp(t,e,n,w,ot,St,Nt,It,B),e=1,l===!0&&(e|=24),l=Gn(3,null,null,e),t.current=l,l.stateNode=t,e=Ol(),e.refCount++,t.pooledCache=e,e.refCount++,l.memoizedState={element:a,isDehydrated:n,cache:e},Fl(l),t}function Qh(t){return t?(t=Or,t):Or}function Zh(t,e,n,a,r,l){r=Qh(r),a.context===null?a.context=r:a.pendingContext=r,a=Si(e),a.payload={element:n},l=l===void 0?null:l,l!==null&&(a.callback=l),n=wi(t,a,e),n!==null&&(qn(n,t,e),Ms(n,t,e))}function Jh(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function eu(t,e){Jh(t,e),(t=t.alternate)&&Jh(t,e)}function $h(t){if(t.tag===13||t.tag===31){var e=Me(t,67108864);e!==null&&qn(e,t,67108864),eu(t,67108864)}}function tf(t){if(t.tag===13||t.tag===31){var e=Wn();e=un(e);var n=Me(t,e);n!==null&&qn(n,t,e),eu(t,e)}}var ll=!0;function vp(t,e,n,a){var r=nt.T;nt.T=null;var l=W.p;try{W.p=2,nu(t,e,n,a)}finally{W.p=l,nt.T=r}}function xp(t,e,n,a){var r=nt.T;nt.T=null;var l=W.p;try{W.p=8,nu(t,e,n,a)}finally{W.p=l,nt.T=r}}function nu(t,e,n,a){if(ll){var r=au(a);if(r===null)Uc(t,e,a,cl,n),nf(t,a);else if(Ap(r,t,e,n,a))a.stopPropagation();else if(nf(t,a),e&4&&-1<_p.indexOf(t)){for(;r!==null;){var l=Ne(r);if(l!==null)switch(l.tag){case 3:if(l=l.stateNode,l.current.memoizedState.isDehydrated){var w=cn(l.pendingLanes);if(w!==0){var B=l;for(B.pendingLanes|=2,B.entangledLanes|=2;w;){var ot=1<<31-it(w);B.entanglements[1]|=ot,w&=~ot}ja(l),(Ce&6)===0&&(Yo=oe()+500,Ks(0))}}break;case 31:case 13:B=Me(l,2),B!==null&&qn(B,l,2),Xo(),eu(l,2)}if(l=au(a),l===null&&Uc(t,e,a,cl,n),l===r)break;r=l}r!==null&&a.stopPropagation()}else Uc(t,e,a,null,n)}}function au(t){return t=gr(t),iu(t)}var cl=null;function iu(t){if(cl=null,t=_a(t),t!==null){var e=O(t);if(e===null)t=null;else{var n=e.tag;if(n===13){if(t=N(e),t!==null)return t;t=null}else if(n===31){if(t=G(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null)}}return cl=t,null}function ef(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(_e()){case ke:return 2;case Be:return 8;case Cn:case We:return 32;case An:return 268435456;default:return 32}default:return 32}}var ru=!1,Li=null,Fi=null,zi=null,$s=new Map,to=new Map,Ii=[],_p="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function nf(t,e){switch(t){case"focusin":case"focusout":Li=null;break;case"dragenter":case"dragleave":Fi=null;break;case"mouseover":case"mouseout":zi=null;break;case"pointerover":case"pointerout":$s.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":to.delete(e.pointerId)}}function eo(t,e,n,a,r,l){return t===null||t.nativeEvent!==l?(t={blockedOn:e,domEventName:n,eventSystemFlags:a,nativeEvent:l,targetContainers:[r]},e!==null&&(e=Ne(e),e!==null&&$h(e)),t):(t.eventSystemFlags|=a,e=t.targetContainers,r!==null&&e.indexOf(r)===-1&&e.push(r),t)}function Ap(t,e,n,a,r){switch(e){case"focusin":return Li=eo(Li,t,e,n,a,r),!0;case"dragenter":return Fi=eo(Fi,t,e,n,a,r),!0;case"mouseover":return zi=eo(zi,t,e,n,a,r),!0;case"pointerover":var l=r.pointerId;return $s.set(l,eo($s.get(l)||null,t,e,n,a,r)),!0;case"gotpointercapture":return l=r.pointerId,to.set(l,eo(to.get(l)||null,t,e,n,a,r)),!0}return!1}function af(t){var e=_a(t.target);if(e!==null){var n=O(e);if(n!==null){if(e=n.tag,e===13){if(e=N(n),e!==null){t.blockedOn=e,Bi(t.priority,function(){tf(n)});return}}else if(e===31){if(e=G(n),e!==null){t.blockedOn=e,Bi(t.priority,function(){tf(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function ul(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=au(t.nativeEvent);if(n===null){n=t.nativeEvent;var a=new n.constructor(n.type,n);$n=a,n.target.dispatchEvent(a),$n=null}else return e=Ne(n),e!==null&&$h(e),t.blockedOn=n,!1;e.shift()}return!0}function rf(t,e,n){ul(t)&&n.delete(e)}function Ep(){ru=!1,Li!==null&&ul(Li)&&(Li=null),Fi!==null&&ul(Fi)&&(Fi=null),zi!==null&&ul(zi)&&(zi=null),$s.forEach(rf),to.forEach(rf)}function dl(t,e){t.blockedOn===e&&(t.blockedOn=null,ru||(ru=!0,f.unstable_scheduleCallback(f.unstable_NormalPriority,Ep)))}var hl=null;function sf(t){hl!==t&&(hl=t,f.unstable_scheduleCallback(f.unstable_NormalPriority,function(){hl===t&&(hl=null);for(var e=0;e<t.length;e+=3){var n=t[e],a=t[e+1],r=t[e+2];if(typeof a!="function"){if(iu(a||n)===null)continue;break}var l=Ne(n);l!==null&&(t.splice(e,3),e-=3,ac(l,{pending:!0,data:r,method:n.method,action:a},a,r))}}))}function as(t){function e(ot){return dl(ot,t)}Li!==null&&dl(Li,t),Fi!==null&&dl(Fi,t),zi!==null&&dl(zi,t),$s.forEach(e),to.forEach(e);for(var n=0;n<Ii.length;n++){var a=Ii[n];a.blockedOn===t&&(a.blockedOn=null)}for(;0<Ii.length&&(n=Ii[0],n.blockedOn===null);)af(n),n.blockedOn===null&&Ii.shift();if(n=(t.ownerDocument||t).$$reactFormReplay,n!=null)for(a=0;a<n.length;a+=3){var r=n[a],l=n[a+1],w=r[$e]||null;if(typeof l=="function")w||sf(n);else if(w){var B=null;if(l&&l.hasAttribute("formAction")){if(r=l,w=l[$e]||null)B=w.formAction;else if(iu(r)!==null)continue}else B=w.action;typeof B=="function"?n[a+1]=B:(n.splice(a,3),a-=3),sf(n)}}}function of(){function t(l){l.canIntercept&&l.info==="react-transition"&&l.intercept({handler:function(){return new Promise(function(w){return r=w})},focusReset:"manual",scroll:"manual"})}function e(){r!==null&&(r(),r=null),a||setTimeout(n,20)}function n(){if(!a&&!navigation.transition){var l=navigation.currentEntry;l&&l.url!=null&&navigation.navigate(l.url,{state:l.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var a=!1,r=null;return navigation.addEventListener("navigate",t),navigation.addEventListener("navigatesuccess",e),navigation.addEventListener("navigateerror",e),setTimeout(n,100),function(){a=!0,navigation.removeEventListener("navigate",t),navigation.removeEventListener("navigatesuccess",e),navigation.removeEventListener("navigateerror",e),r!==null&&(r(),r=null)}}}function su(t){this._internalRoot=t}fl.prototype.render=su.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(s(409));var n=e.current,a=Wn();Zh(n,a,t,e,null,null)},fl.prototype.unmount=su.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Zh(t.current,2,null,t,null,null),Xo(),e[Mn]=null}};function fl(t){this._internalRoot=t}fl.prototype.unstable_scheduleHydration=function(t){if(t){var e=da();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Ii.length&&e!==0&&e<Ii[n].priority;n++);Ii.splice(n,0,t),n===0&&af(t)}};var lf=o.version;if(lf!=="19.2.4")throw Error(s(527,lf,"19.2.4"));W.findDOMNode=function(t){var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(s(188)):(t=Object.keys(t).join(","),Error(s(268,t)));return t=d(e),t=t!==null?c(t):null,t=t===null?null:t.stateNode,t};var Sp={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:nt,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var pl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!pl.isDisabled&&pl.supportsFiber)try{Qn=pl.inject(Sp),zt=pl}catch{}}return reactDomClient_production.createRoot=function(t,e){if(!y(t))throw Error(s(299));var n=!1,a="",r=pd,l=md,w=gd;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(a=e.identifierPrefix),e.onUncaughtError!==void 0&&(r=e.onUncaughtError),e.onCaughtError!==void 0&&(l=e.onCaughtError),e.onRecoverableError!==void 0&&(w=e.onRecoverableError)),e=Wh(t,1,!1,null,null,n,a,null,r,l,w,of),t[Mn]=e.current,Bc(t),new su(e)},reactDomClient_production.hydrateRoot=function(t,e,n){if(!y(t))throw Error(s(299));var a=!1,r="",l=pd,w=md,B=gd,ot=null;return n!=null&&(n.unstable_strictMode===!0&&(a=!0),n.identifierPrefix!==void 0&&(r=n.identifierPrefix),n.onUncaughtError!==void 0&&(l=n.onUncaughtError),n.onCaughtError!==void 0&&(w=n.onCaughtError),n.onRecoverableError!==void 0&&(B=n.onRecoverableError),n.formState!==void 0&&(ot=n.formState)),e=Wh(t,1,!0,e,n??null,a,r,ot,l,w,B,of),e.context=Qh(null),n=e.current,a=Wn(),a=un(a),r=Si(a),r.callback=null,wi(n,r,a),n=a,e.current.lanes=n,gn(e,n),ja(e),t[Mn]=e.current,Bc(t),new fl(e)},reactDomClient_production.version="19.2.4",reactDomClient_production}var hasRequiredClient;function requireClient(){if(hasRequiredClient)return client.exports;hasRequiredClient=1;function f(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(f)}catch(o){console.error(o)}}return f(),client.exports=requireReactDomClient_production(),client.exports}var clientExports=requireClient();const ReactDOM=getDefaultExportFromCjs(clientExports),scriptRel="modulepreload",assetsURL=function(f){return"/"+f},seen={},__vitePreload=function(o,m,s){let y=Promise.resolve();if(m&&m.length>0){let d=function(c){return Promise.all(c.map(h=>Promise.resolve(h).then(x=>({status:"fulfilled",value:x}),x=>({status:"rejected",reason:x}))))};var N=d;document.getElementsByTagName("link");const G=document.querySelector("meta[property=csp-nonce]"),q=G?.nonce||G?.getAttribute("nonce");y=d(m.map(c=>{if(c=assetsURL(c),c in seen)return;seen[c]=!0;const h=c.endsWith(".css"),x=h?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${x}`))return;const E=document.createElement("link");if(E.rel=h?"stylesheet":scriptRel,h||(E.as="script"),E.crossOrigin="",E.href=c,q&&E.setAttribute("nonce",q),document.head.appendChild(E),h)return new Promise((p,S)=>{E.addEventListener("load",p),E.addEventListener("error",()=>S(new Error(`Unable to preload CSS for ${c}`)))})}))}function O(G){const q=new Event("vite:preloadError",{cancelable:!0});if(q.payload=G,window.dispatchEvent(q),!q.defaultPrevented)throw G}return y.then(G=>{for(const q of G||[])q.status==="rejected"&&O(q.reason);return o().catch(O)})};const mergeClasses=(...f)=>f.filter((o,m,s)=>!!o&&o.trim()!==""&&s.indexOf(o)===m).join(" ").trim();const toKebabCase=f=>f.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase();const toCamelCase=f=>f.replace(/^([A-Z])|[\s-_]+(\w)/g,(o,m,s)=>s?s.toUpperCase():m.toLowerCase());const toPascalCase=f=>{const o=toCamelCase(f);return o.charAt(0).toUpperCase()+o.slice(1)};var defaultAttributes={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const hasA11yProp=f=>{for(const o in f)if(o.startsWith("aria-")||o==="role"||o==="title")return!0;return!1};const Icon=reactExports.forwardRef(({color:f="currentColor",size:o=24,strokeWidth:m=2,absoluteStrokeWidth:s,className:y="",children:O,iconNode:N,...G},q)=>reactExports.createElement("svg",{ref:q,...defaultAttributes,width:o,height:o,stroke:f,strokeWidth:s?Number(m)*24/Number(o):m,className:mergeClasses("lucide",y),...!O&&!hasA11yProp(G)&&{"aria-hidden":"true"},...G},[...N.map(([d,c])=>reactExports.createElement(d,c)),...Array.isArray(O)?O:[O]]));const createLucideIcon=(f,o)=>{const m=reactExports.forwardRef(({className:s,...y},O)=>reactExports.createElement(Icon,{ref:O,iconNode:o,className:mergeClasses(`lucide-${toKebabCase(toPascalCase(f))}`,`lucide-${f}`,s),...y}));return m.displayName=toPascalCase(f),m};const __iconNode$C=[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]],Award=createLucideIcon("award",__iconNode$C);const __iconNode$B=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],BookOpen=createLucideIcon("book-open",__iconNode$B);const __iconNode$A=[["path",{d:"M12 18V5",key:"adv99a"}],["path",{d:"M15 13a4.17 4.17 0 0 1-3-4 4.17 4.17 0 0 1-3 4",key:"1e3is1"}],["path",{d:"M17.598 6.5A3 3 0 1 0 12 5a3 3 0 1 0-5.598 1.5",key:"1gqd8o"}],["path",{d:"M17.997 5.125a4 4 0 0 1 2.526 5.77",key:"iwvgf7"}],["path",{d:"M18 18a4 4 0 0 0 2-7.464",key:"efp6ie"}],["path",{d:"M19.967 17.483A4 4 0 1 1 12 18a4 4 0 1 1-7.967-.517",key:"1gq6am"}],["path",{d:"M6 18a4 4 0 0 1-2-7.464",key:"k1g0md"}],["path",{d:"M6.003 5.125a4 4 0 0 0-2.526 5.77",key:"q97ue3"}]],Brain=createLucideIcon("brain",__iconNode$A);const __iconNode$z=[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]],Calculator=createLucideIcon("calculator",__iconNode$z);const __iconNode$y=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],Calendar=createLucideIcon("calendar",__iconNode$y);const __iconNode$x=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],ChartColumn=createLucideIcon("chart-column",__iconNode$x);const __iconNode$w=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],Check=createLucideIcon("check",__iconNode$w);const __iconNode$v=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],ChevronDown=createLucideIcon("chevron-down",__iconNode$v);const __iconNode$u=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],ChevronLeft=createLucideIcon("chevron-left",__iconNode$u);const __iconNode$t=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],ChevronRight=createLucideIcon("chevron-right",__iconNode$t);const __iconNode$s=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],ChevronUp=createLucideIcon("chevron-up",__iconNode$s);const __iconNode$r=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],CircleAlert=createLucideIcon("circle-alert",__iconNode$r);const __iconNode$q=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],CircleCheckBig=createLucideIcon("circle-check-big",__iconNode$q);const __iconNode$p=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]],CircleQuestionMark=createLucideIcon("circle-question-mark",__iconNode$p);const __iconNode$o=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],CircleX=createLucideIcon("circle-x",__iconNode$o);const __iconNode$n=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],Clock=createLucideIcon("clock",__iconNode$n);const __iconNode$m=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]],Ellipsis=createLucideIcon("ellipsis",__iconNode$m);const __iconNode$l=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],ExternalLink=createLucideIcon("external-link",__iconNode$l);const __iconNode$k=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],EyeOff=createLucideIcon("eye-off",__iconNode$k);const __iconNode$j=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Eye=createLucideIcon("eye",__iconNode$j);const __iconNode$i=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],FileText=createLucideIcon("file-text",__iconNode$i);const __iconNode$h=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],Info=createLucideIcon("info",__iconNode$h);const __iconNode$g=[["path",{d:"M2.586 17.414A2 2 0 0 0 2 18.828V21a1 1 0 0 0 1 1h3a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h1a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h.172a2 2 0 0 0 1.414-.586l.814-.814a6.5 6.5 0 1 0-4-4z",key:"1s6t7t"}],["circle",{cx:"16.5",cy:"7.5",r:".5",fill:"currentColor",key:"w0ekpg"}]],KeyRound=createLucideIcon("key-round",__iconNode$g);const __iconNode$f=[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]],Key=createLucideIcon("key",__iconNode$f);const __iconNode$e=[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]],Lightbulb=createLucideIcon("lightbulb",__iconNode$e);const __iconNode$d=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],LoaderCircle=createLucideIcon("loader-circle",__iconNode$d);const __iconNode$c=[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]],Menu=createLucideIcon("menu",__iconNode$c);const __iconNode$b=[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]],Play=createLucideIcon("play",__iconNode$b);const __iconNode$a=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Plus=createLucideIcon("plus",__iconNode$a);const __iconNode$9=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],RotateCcw=createLucideIcon("rotate-ccw",__iconNode$9);const __iconNode$8=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],Target=createLucideIcon("target",__iconNode$8);const __iconNode$7=[["path",{d:"M9 18.12 10 14H4.17a2 2 0 0 1-1.92-2.56l2.33-8A2 2 0 0 1 6.5 2H20a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2h-2.76a2 2 0 0 0-1.79 1.11L12 22a3.13 3.13 0 0 1-3-3.88Z",key:"m61m77"}],["path",{d:"M17 14V2",key:"8ymqnk"}]],ThumbsDown=createLucideIcon("thumbs-down",__iconNode$7);const __iconNode$6=[["path",{d:"M15 5.88 14 10h5.83a2 2 0 0 1 1.92 2.56l-2.33 8A2 2 0 0 1 17.5 22H4a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h2.76a2 2 0 0 0 1.79-1.11L12 2a3.13 3.13 0 0 1 3 3.88Z",key:"emmmcr"}],["path",{d:"M7 10v12",key:"1qc93n"}]],ThumbsUp=createLucideIcon("thumbs-up",__iconNode$6);const __iconNode$5=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],Trash2=createLucideIcon("trash-2",__iconNode$5);const __iconNode$4=[["path",{d:"M16 17h6v-6",key:"t6n2it"}],["path",{d:"m22 17-8.5-8.5-5 5L2 7",key:"x473p"}]],TrendingDown=createLucideIcon("trending-down",__iconNode$4);const __iconNode$3=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],TrendingUp=createLucideIcon("trending-up",__iconNode$3);const __iconNode$2=[["path",{d:"M10 14.66v1.626a2 2 0 0 1-.976 1.696A5 5 0 0 0 7 21.978",key:"1n3hpd"}],["path",{d:"M14 14.66v1.626a2 2 0 0 0 .976 1.696A5 5 0 0 1 17 21.978",key:"rfe1zi"}],["path",{d:"M18 9h1.5a1 1 0 0 0 0-5H18",key:"7xy6bh"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M6 9a6 6 0 0 0 12 0V3a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1z",key:"1mhfuq"}],["path",{d:"M6 9H4.5a1 1 0 0 1 0-5H6",key:"tex48p"}]],Trophy=createLucideIcon("trophy",__iconNode$2);const __iconNode$1=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],Upload=createLucideIcon("upload",__iconNode$1);const __iconNode=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],X=createLucideIcon("x",__iconNode);function commonjsRequire(f){throw new Error('Could not dynamically require "'+f+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var pdf={exports:{}};const __viteBrowserExternal={},__viteBrowserExternal$1=Object.freeze(Object.defineProperty({__proto__:null,default:__viteBrowserExternal},Symbol.toStringTag,{value:"Module"})),require$$5=getAugmentedNamespace(__viteBrowserExternal$1);var hasRequiredPdf;function requirePdf(){return hasRequiredPdf||(hasRequiredPdf=1,(function(module,exports$1){(function(o,m){module.exports=o.pdfjsLib=m()})(globalThis,()=>(()=>{var __webpack_modules__=[,((f,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.VerbosityLevel=o.Util=o.UnknownErrorException=o.UnexpectedResponseException=o.TextRenderingMode=o.RenderingIntentFlag=o.PromiseCapability=o.PermissionFlag=o.PasswordResponses=o.PasswordException=o.PageActionEventType=o.OPS=o.MissingPDFException=o.MAX_IMAGE_SIZE_TO_CACHE=o.LINE_FACTOR=o.LINE_DESCENT_FACTOR=o.InvalidPDFException=o.ImageKind=o.IDENTITY_MATRIX=o.FormatError=o.FeatureTest=o.FONT_IDENTITY_MATRIX=o.DocumentActionEventType=o.CMapCompressionType=o.BaseException=o.BASELINE_FACTOR=o.AnnotationType=o.AnnotationReplyType=o.AnnotationPrefix=o.AnnotationMode=o.AnnotationFlag=o.AnnotationFieldFlag=o.AnnotationEditorType=o.AnnotationEditorPrefix=o.AnnotationEditorParamsType=o.AnnotationBorderStyleType=o.AnnotationActionEventType=o.AbortException=void 0,o.assert=T,o.bytesToString=at,o.createValidAbsoluteUrl=v,o.getModificationDate=Be,o.getUuid=ca,o.getVerbosityLevel=Yt,o.info=nt,o.isArrayBuffer=_e,o.isArrayEqual=ke,o.isNodeJS=void 0,o.normalizeUnicode=ya,o.objectFromMap=wt,o.objectSize=Xt,o.setVerbosityLevel=qt,o.shadow=F,o.string32=Rt,o.stringToBytes=st,o.stringToPDFString=ie,o.stringToUTF8String=le,o.unreachable=D,o.utf8StringToString=oe,o.warn=W;const m=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser");o.isNodeJS=m;const s=[1,0,0,1,0,0];o.IDENTITY_MATRIX=s;const y=[.001,0,0,.001,0,0];o.FONT_IDENTITY_MATRIX=y;const O=1e7;o.MAX_IMAGE_SIZE_TO_CACHE=O;const N=1.35;o.LINE_FACTOR=N;const G=.35;o.LINE_DESCENT_FACTOR=G;const q=G/N;o.BASELINE_FACTOR=q;const d={ANY:1,DISPLAY:2,PRINT:4,SAVE:8,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,OPLIST:256};o.RenderingIntentFlag=d;const c={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3};o.AnnotationMode=c;const h="pdfjs_internal_editor_";o.AnnotationEditorPrefix=h;const x={DISABLE:-1,NONE:0,FREETEXT:3,STAMP:13,INK:15};o.AnnotationEditorType=x;const E={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23};o.AnnotationEditorParamsType=E;const p={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048};o.PermissionFlag=p;const S={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4};o.TextRenderingMode=S;const C={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3};o.ImageKind=C;const _={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26};o.AnnotationType=_;const P={GROUP:"Group",REPLY:"R"};o.AnnotationReplyType=P;const V={INVISIBLE:1,HIDDEN:2,PRINT:4,NOZOOM:8,NOROTATE:16,NOVIEW:32,READONLY:64,LOCKED:128,TOGGLENOVIEW:256,LOCKEDCONTENTS:512};o.AnnotationFlag=V;const H={READONLY:1,REQUIRED:2,NOEXPORT:4,MULTILINE:4096,PASSWORD:8192,NOTOGGLETOOFF:16384,RADIO:32768,PUSHBUTTON:65536,COMBO:131072,EDIT:262144,SORT:524288,FILESELECT:1048576,MULTISELECT:2097152,DONOTSPELLCHECK:4194304,DONOTSCROLL:8388608,COMB:16777216,RICHTEXT:33554432,RADIOSINUNISON:33554432,COMMITONSELCHANGE:67108864};o.AnnotationFieldFlag=H;const k={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5};o.AnnotationBorderStyleType=k;const L={E:"Mouse Enter",X:"Mouse Exit",D:"Mouse Down",U:"Mouse Up",Fo:"Focus",Bl:"Blur",PO:"PageOpen",PC:"PageClose",PV:"PageVisible",PI:"PageInvisible",K:"Keystroke",F:"Format",V:"Validate",C:"Calculate"};o.AnnotationActionEventType=L;const J={WC:"WillClose",WS:"WillSave",DS:"DidSave",WP:"WillPrint",DP:"DidPrint"};o.DocumentActionEventType=J;const rt={O:"PageOpen",C:"PageClose"};o.PageActionEventType=rt;const et={ERRORS:0,WARNINGS:1,INFOS:5};o.VerbosityLevel=et;const lt={NONE:0,BINARY:1};o.CMapCompressionType=lt;const yt={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91};o.OPS=yt;const Dt={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};o.PasswordResponses=Dt;let Mt=et.WARNINGS;function qt(zt){Number.isInteger(zt)&&(Mt=zt)}function Yt(){return Mt}function nt(zt){Mt>=et.INFOS&&console.log(`Info: ${zt}`)}function W(zt){Mt>=et.WARNINGS&&console.log(`Warning: ${zt}`)}function D(zt){throw new Error(zt)}function T(zt,vt){zt||D(vt)}function R(zt){switch(zt?.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function v(zt,vt=null,it=null){if(!zt)return null;try{if(it&&typeof zt=="string"&&(it.addDefaultProtocol&&zt.startsWith("www.")&&zt.match(/\./g)?.length>=2&&(zt=`http://${zt}`),it.tryConvertEncoding))try{zt=le(zt)}catch{}const Jt=vt?new URL(zt,vt):new URL(zt);if(R(Jt))return Jt}catch{}return null}function F(zt,vt,it,Jt=!1){return Object.defineProperty(zt,vt,{value:it,enumerable:!Jt,configurable:!0,writable:!1}),it}const U=(function(){function vt(it,Jt){this.constructor===vt&&D("Cannot initialize BaseException."),this.message=it,this.name=Jt}return vt.prototype=new Error,vt.constructor=vt,vt})();o.BaseException=U;class $ extends U{constructor(vt,it){super(vt,"PasswordException"),this.code=it}}o.PasswordException=$;class K extends U{constructor(vt,it){super(vt,"UnknownErrorException"),this.details=it}}o.UnknownErrorException=K;class b extends U{constructor(vt){super(vt,"InvalidPDFException")}}o.InvalidPDFException=b;class j extends U{constructor(vt){super(vt,"MissingPDFException")}}o.MissingPDFException=j;class I extends U{constructor(vt,it){super(vt,"UnexpectedResponseException"),this.status=it}}o.UnexpectedResponseException=I;class Q extends U{constructor(vt){super(vt,"FormatError")}}o.FormatError=Q;class Y extends U{constructor(vt){super(vt,"AbortException")}}o.AbortException=Y;function at(zt){(typeof zt!="object"||zt?.length===void 0)&&D("Invalid argument for bytesToString");const vt=zt.length,it=8192;if(vt<it)return String.fromCharCode.apply(null,zt);const Jt=[];for(let me=0;me<vt;me+=it){const Xe=Math.min(me+it,vt),Kt=zt.subarray(me,Xe);Jt.push(String.fromCharCode.apply(null,Kt))}return Jt.join("")}function st(zt){typeof zt!="string"&&D("Invalid argument for stringToBytes");const vt=zt.length,it=new Uint8Array(vt);for(let Jt=0;Jt<vt;++Jt)it[Jt]=zt.charCodeAt(Jt)&255;return it}function Rt(zt){return String.fromCharCode(zt>>24&255,zt>>16&255,zt>>8&255,zt&255)}function Xt(zt){return Object.keys(zt).length}function wt(zt){const vt=Object.create(null);for(const[it,Jt]of zt)vt[it]=Jt;return vt}function jt(){const zt=new Uint8Array(4);return zt[0]=1,new Uint32Array(zt.buffer,0,1)[0]===1}function Lt(){try{return new Function(""),!0}catch{return!1}}class Pt{static get isLittleEndian(){return F(this,"isLittleEndian",jt())}static get isEvalSupported(){return F(this,"isEvalSupported",Lt())}static get isOffscreenCanvasSupported(){return F(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get platform(){return typeof navigator>"u"?F(this,"platform",{isWin:!1,isMac:!1}):F(this,"platform",{isWin:navigator.platform.includes("Win"),isMac:navigator.platform.includes("Mac")})}static get isCSSRoundSupported(){return F(this,"isCSSRoundSupported",globalThis.CSS?.supports?.("width: round(1.5px, 1px)"))}}o.FeatureTest=Pt;const Bt=[...Array(256).keys()].map(zt=>zt.toString(16).padStart(2,"0"));class Qt{static makeHexColor(vt,it,Jt){return`#${Bt[vt]}${Bt[it]}${Bt[Jt]}`}static scaleMinMax(vt,it){let Jt;vt[0]?(vt[0]<0&&(Jt=it[0],it[0]=it[1],it[1]=Jt),it[0]*=vt[0],it[1]*=vt[0],vt[3]<0&&(Jt=it[2],it[2]=it[3],it[3]=Jt),it[2]*=vt[3],it[3]*=vt[3]):(Jt=it[0],it[0]=it[2],it[2]=Jt,Jt=it[1],it[1]=it[3],it[3]=Jt,vt[1]<0&&(Jt=it[2],it[2]=it[3],it[3]=Jt),it[2]*=vt[1],it[3]*=vt[1],vt[2]<0&&(Jt=it[0],it[0]=it[1],it[1]=Jt),it[0]*=vt[2],it[1]*=vt[2]),it[0]+=vt[4],it[1]+=vt[4],it[2]+=vt[5],it[3]+=vt[5]}static transform(vt,it){return[vt[0]*it[0]+vt[2]*it[1],vt[1]*it[0]+vt[3]*it[1],vt[0]*it[2]+vt[2]*it[3],vt[1]*it[2]+vt[3]*it[3],vt[0]*it[4]+vt[2]*it[5]+vt[4],vt[1]*it[4]+vt[3]*it[5]+vt[5]]}static applyTransform(vt,it){const Jt=vt[0]*it[0]+vt[1]*it[2]+it[4],me=vt[0]*it[1]+vt[1]*it[3]+it[5];return[Jt,me]}static applyInverseTransform(vt,it){const Jt=it[0]*it[3]-it[1]*it[2],me=(vt[0]*it[3]-vt[1]*it[2]+it[2]*it[5]-it[4]*it[3])/Jt,Xe=(-vt[0]*it[1]+vt[1]*it[0]+it[4]*it[1]-it[5]*it[0])/Jt;return[me,Xe]}static getAxialAlignedBoundingBox(vt,it){const Jt=this.applyTransform(vt,it),me=this.applyTransform(vt.slice(2,4),it),Xe=this.applyTransform([vt[0],vt[3]],it),Kt=this.applyTransform([vt[2],vt[1]],it);return[Math.min(Jt[0],me[0],Xe[0],Kt[0]),Math.min(Jt[1],me[1],Xe[1],Kt[1]),Math.max(Jt[0],me[0],Xe[0],Kt[0]),Math.max(Jt[1],me[1],Xe[1],Kt[1])]}static inverseTransform(vt){const it=vt[0]*vt[3]-vt[1]*vt[2];return[vt[3]/it,-vt[1]/it,-vt[2]/it,vt[0]/it,(vt[2]*vt[5]-vt[4]*vt[3])/it,(vt[4]*vt[1]-vt[5]*vt[0])/it]}static singularValueDecompose2dScale(vt){const it=[vt[0],vt[2],vt[1],vt[3]],Jt=vt[0]*it[0]+vt[1]*it[2],me=vt[0]*it[1]+vt[1]*it[3],Xe=vt[2]*it[0]+vt[3]*it[2],Kt=vt[2]*it[1]+vt[3]*it[3],kn=(Jt+Kt)/2,On=Math.sqrt((Jt+Kt)**2-4*(Jt*Kt-Xe*me))/2,cn=kn+On||1,Qe=kn-On||1;return[Math.sqrt(cn),Math.sqrt(Qe)]}static normalizeRect(vt){const it=vt.slice(0);return vt[0]>vt[2]&&(it[0]=vt[2],it[2]=vt[0]),vt[1]>vt[3]&&(it[1]=vt[3],it[3]=vt[1]),it}static intersect(vt,it){const Jt=Math.max(Math.min(vt[0],vt[2]),Math.min(it[0],it[2])),me=Math.min(Math.max(vt[0],vt[2]),Math.max(it[0],it[2]));if(Jt>me)return null;const Xe=Math.max(Math.min(vt[1],vt[3]),Math.min(it[1],it[3])),Kt=Math.min(Math.max(vt[1],vt[3]),Math.max(it[1],it[3]));return Xe>Kt?null:[Jt,Xe,me,Kt]}static bezierBoundingBox(vt,it,Jt,me,Xe,Kt,kn,On){const cn=[],Qe=[[],[]];let En,Zn,Da,je,gn,ba,ua,Te;for(let da=0;da<2;++da){if(da===0?(Zn=6*vt-12*Jt+6*Xe,En=-3*vt+9*Jt-9*Xe+3*kn,Da=3*Jt-3*vt):(Zn=6*it-12*me+6*Kt,En=-3*it+9*me-9*Kt+3*On,Da=3*me-3*it),Math.abs(En)<1e-12){if(Math.abs(Zn)<1e-12)continue;je=-Da/Zn,0<je&&je<1&&cn.push(je);continue}ua=Zn*Zn-4*Da*En,Te=Math.sqrt(ua),!(ua<0)&&(gn=(-Zn+Te)/(2*En),0<gn&&gn<1&&cn.push(gn),ba=(-Zn-Te)/(2*En),0<ba&&ba<1&&cn.push(ba))}let Ie=cn.length,un;const Nn=Ie;for(;Ie--;)je=cn[Ie],un=1-je,Qe[0][Ie]=un*un*un*vt+3*un*un*je*Jt+3*un*je*je*Xe+je*je*je*kn,Qe[1][Ie]=un*un*un*it+3*un*un*je*me+3*un*je*je*Kt+je*je*je*On;return Qe[0][Nn]=vt,Qe[1][Nn]=it,Qe[0][Nn+1]=kn,Qe[1][Nn+1]=On,Qe[0].length=Qe[1].length=Nn+2,[Math.min(...Qe[0]),Math.min(...Qe[1]),Math.max(...Qe[0]),Math.max(...Qe[1])]}}o.Util=Qt;const $t=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,728,711,710,729,733,731,730,732,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8226,8224,8225,8230,8212,8211,402,8260,8249,8250,8722,8240,8222,8220,8221,8216,8217,8218,8482,64257,64258,321,338,352,376,381,305,322,339,353,382,0,8364];function ie(zt){if(zt[0]>=""){let it;if(zt[0]===""&&zt[1]===""?it="utf-16be":zt[0]===""&&zt[1]===""?it="utf-16le":zt[0]===""&&zt[1]===""&&zt[2]===""&&(it="utf-8"),it)try{const Jt=new TextDecoder(it,{fatal:!0}),me=st(zt);return Jt.decode(me)}catch(Jt){W(`stringToPDFString: "${Jt}".`)}}const vt=[];for(let it=0,Jt=zt.length;it<Jt;it++){const me=$t[zt.charCodeAt(it)];vt.push(me?String.fromCharCode(me):zt.charAt(it))}return vt.join("")}function le(zt){return decodeURIComponent(escape(zt))}function oe(zt){return unescape(encodeURIComponent(zt))}function _e(zt){return typeof zt=="object"&&zt?.byteLength!==void 0}function ke(zt,vt){if(zt.length!==vt.length)return!1;for(let it=0,Jt=zt.length;it<Jt;it++)if(zt[it]!==vt[it])return!1;return!0}function Be(zt=new Date){return[zt.getUTCFullYear().toString(),(zt.getUTCMonth()+1).toString().padStart(2,"0"),zt.getUTCDate().toString().padStart(2,"0"),zt.getUTCHours().toString().padStart(2,"0"),zt.getUTCMinutes().toString().padStart(2,"0"),zt.getUTCSeconds().toString().padStart(2,"0")].join("")}class Cn{#t=!1;constructor(){this.promise=new Promise((vt,it)=>{this.resolve=Jt=>{this.#t=!0,vt(Jt)},this.reject=Jt=>{this.#t=!0,it(Jt)}})}get settled(){return this.#t}}o.PromiseCapability=Cn;let We=null,An=null;function ya(zt){return We||(We=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,An=new Map([["","t"]])),zt.replaceAll(We,(vt,it,Jt)=>it?it.normalize("NFKC"):An.get(Jt))}function ca(){if(typeof crypto<"u"&&typeof crypto?.randomUUID=="function")return crypto.randomUUID();const zt=new Uint8Array(32);if(typeof crypto<"u"&&typeof crypto?.getRandomValues=="function")crypto.getRandomValues(zt);else for(let vt=0;vt<32;vt++)zt[vt]=Math.floor(Math.random()*255);return at(zt)}const Qn="pdfjs_internal_id_";o.AnnotationPrefix=Qn}),((__unused_webpack_module,exports$1,__w_pdfjs_require__)=>{Object.defineProperty(exports$1,"__esModule",{value:!0}),exports$1.RenderTask=exports$1.PDFWorkerUtil=exports$1.PDFWorker=exports$1.PDFPageProxy=exports$1.PDFDocumentProxy=exports$1.PDFDocumentLoadingTask=exports$1.PDFDataRangeTransport=exports$1.LoopbackPort=exports$1.DefaultStandardFontDataFactory=exports$1.DefaultFilterFactory=exports$1.DefaultCanvasFactory=exports$1.DefaultCMapReaderFactory=void 0,Object.defineProperty(exports$1,"SVGGraphics",{enumerable:!0,get:function(){return _displaySvg.SVGGraphics}}),exports$1.build=void 0,exports$1.getDocument=getDocument,exports$1.version=void 0;var _util=__w_pdfjs_require__(1),_annotation_storage=__w_pdfjs_require__(3),_display_utils=__w_pdfjs_require__(6),_font_loader=__w_pdfjs_require__(9),_displayNode_utils=__w_pdfjs_require__(10),_canvas=__w_pdfjs_require__(11),_worker_options=__w_pdfjs_require__(14),_message_handler=__w_pdfjs_require__(15),_metadata=__w_pdfjs_require__(16),_optional_content_config=__w_pdfjs_require__(17),_transport_stream=__w_pdfjs_require__(18),_displayFetch_stream=__w_pdfjs_require__(19),_displayNetwork=__w_pdfjs_require__(22),_displayNode_stream=__w_pdfjs_require__(23),_displaySvg=__w_pdfjs_require__(24),_xfa_text=__w_pdfjs_require__(25);const DEFAULT_RANGE_CHUNK_SIZE=65536,RENDERING_CANCELLED_TIMEOUT=100,DELAYED_CLEANUP_TIMEOUT=5e3,DefaultCanvasFactory=_util.isNodeJS?_displayNode_utils.NodeCanvasFactory:_display_utils.DOMCanvasFactory;exports$1.DefaultCanvasFactory=DefaultCanvasFactory;const DefaultCMapReaderFactory=_util.isNodeJS?_displayNode_utils.NodeCMapReaderFactory:_display_utils.DOMCMapReaderFactory;exports$1.DefaultCMapReaderFactory=DefaultCMapReaderFactory;const DefaultFilterFactory=_util.isNodeJS?_displayNode_utils.NodeFilterFactory:_display_utils.DOMFilterFactory;exports$1.DefaultFilterFactory=DefaultFilterFactory;const DefaultStandardFontDataFactory=_util.isNodeJS?_displayNode_utils.NodeStandardFontDataFactory:_display_utils.DOMStandardFontDataFactory;exports$1.DefaultStandardFontDataFactory=DefaultStandardFontDataFactory;function getDocument(f){if(typeof f=="string"||f instanceof URL?f={url:f}:(0,_util.isArrayBuffer)(f)&&(f={data:f}),typeof f!="object")throw new Error("Invalid parameter in getDocument, need parameter object.");if(!f.url&&!f.data&&!f.range)throw new Error("Invalid parameter object: need either .data, .range or .url");const o=new PDFDocumentLoadingTask,{docId:m}=o,s=f.url?getUrlProp(f.url):null,y=f.data?getDataProp(f.data):null,O=f.httpHeaders||null,N=f.withCredentials===!0,G=f.password??null,q=f.range instanceof PDFDataRangeTransport?f.range:null,d=Number.isInteger(f.rangeChunkSize)&&f.rangeChunkSize>0?f.rangeChunkSize:DEFAULT_RANGE_CHUNK_SIZE;let c=f.worker instanceof PDFWorker?f.worker:null;const h=f.verbosity,x=typeof f.docBaseUrl=="string"&&!(0,_display_utils.isDataScheme)(f.docBaseUrl)?f.docBaseUrl:null,E=typeof f.cMapUrl=="string"?f.cMapUrl:null,p=f.cMapPacked!==!1,S=f.CMapReaderFactory||DefaultCMapReaderFactory,C=typeof f.standardFontDataUrl=="string"?f.standardFontDataUrl:null,_=f.StandardFontDataFactory||DefaultStandardFontDataFactory,P=f.stopAtErrors!==!0,V=Number.isInteger(f.maxImageSize)&&f.maxImageSize>-1?f.maxImageSize:-1,H=f.isEvalSupported!==!1,k=typeof f.isOffscreenCanvasSupported=="boolean"?f.isOffscreenCanvasSupported:!_util.isNodeJS,L=Number.isInteger(f.canvasMaxAreaInBytes)?f.canvasMaxAreaInBytes:-1,J=typeof f.disableFontFace=="boolean"?f.disableFontFace:_util.isNodeJS,rt=f.fontExtraProperties===!0,et=f.enableXfa===!0,lt=f.ownerDocument||globalThis.document,yt=f.disableRange===!0,Dt=f.disableStream===!0,Mt=f.disableAutoFetch===!0,qt=f.pdfBug===!0,Yt=q?q.length:f.length??NaN,nt=typeof f.useSystemFonts=="boolean"?f.useSystemFonts:!_util.isNodeJS&&!J,W=typeof f.useWorkerFetch=="boolean"?f.useWorkerFetch:S===_display_utils.DOMCMapReaderFactory&&_===_display_utils.DOMStandardFontDataFactory&&E&&C&&(0,_display_utils.isValidFetchUrl)(E,document.baseURI)&&(0,_display_utils.isValidFetchUrl)(C,document.baseURI),D=f.canvasFactory||new DefaultCanvasFactory({ownerDocument:lt}),T=f.filterFactory||new DefaultFilterFactory({docId:m,ownerDocument:lt}),R=null;(0,_util.setVerbosityLevel)(h);const v={canvasFactory:D,filterFactory:T};if(W||(v.cMapReaderFactory=new S({baseUrl:E,isCompressed:p}),v.standardFontDataFactory=new _({baseUrl:C})),!c){const $={verbosity:h,port:_worker_options.GlobalWorkerOptions.workerPort};c=$.port?PDFWorker.fromPort($):new PDFWorker($),o._worker=c}const F={docId:m,apiVersion:"3.11.174",data:y,password:G,disableAutoFetch:Mt,rangeChunkSize:d,length:Yt,docBaseUrl:x,enableXfa:et,evaluatorOptions:{maxImageSize:V,disableFontFace:J,ignoreErrors:P,isEvalSupported:H,isOffscreenCanvasSupported:k,canvasMaxAreaInBytes:L,fontExtraProperties:rt,useSystemFonts:nt,cMapUrl:W?E:null,standardFontDataUrl:W?C:null}},U={ignoreErrors:P,isEvalSupported:H,disableFontFace:J,fontExtraProperties:rt,enableXfa:et,ownerDocument:lt,disableAutoFetch:Mt,pdfBug:qt,styleElement:R};return c.promise.then(function(){if(o.destroyed)throw new Error("Loading aborted");const $=_fetchDocument(c,F),K=new Promise(function(b){let j;q?j=new _transport_stream.PDFDataTransportStream({length:Yt,initialData:q.initialData,progressiveDone:q.progressiveDone,contentDispositionFilename:q.contentDispositionFilename,disableRange:yt,disableStream:Dt},q):y||(j=(Q=>_util.isNodeJS?new _displayNode_stream.PDFNodeStream(Q):(0,_display_utils.isValidFetchUrl)(Q.url)?new _displayFetch_stream.PDFFetchStream(Q):new _displayNetwork.PDFNetworkStream(Q))({url:s,length:Yt,httpHeaders:O,withCredentials:N,rangeChunkSize:d,disableRange:yt,disableStream:Dt})),b(j)});return Promise.all([$,K]).then(function([b,j]){if(o.destroyed)throw new Error("Loading aborted");const I=new _message_handler.MessageHandler(m,b,c.port),Q=new WorkerTransport(I,o,j,U,v);o._transport=Q,I.send("Ready",null)})}).catch(o._capability.reject),o}async function _fetchDocument(f,o){if(f.destroyed)throw new Error("Worker was destroyed");const m=await f.messageHandler.sendWithPromise("GetDocRequest",o,o.data?[o.data.buffer]:null);if(f.destroyed)throw new Error("Worker was destroyed");return m}function getUrlProp(f){if(f instanceof URL)return f.href;try{return new URL(f,window.location).href}catch{if(_util.isNodeJS&&typeof f=="string")return f}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function getDataProp(f){if(_util.isNodeJS&&typeof Buffer<"u"&&f instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(f instanceof Uint8Array&&f.byteLength===f.buffer.byteLength)return f;if(typeof f=="string")return(0,_util.stringToBytes)(f);if(typeof f=="object"&&!isNaN(f?.length)||(0,_util.isArrayBuffer)(f))return new Uint8Array(f);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}class PDFDocumentLoadingTask{static#t=0;constructor(){this._capability=new _util.PromiseCapability,this._transport=null,this._worker=null,this.docId=`d${PDFDocumentLoadingTask.#t++}`,this.destroyed=!1,this.onPassword=null,this.onProgress=null}get promise(){return this._capability.promise}async destroy(){this.destroyed=!0;try{this._worker?.port&&(this._worker._pendingDestroy=!0),await this._transport?.destroy()}catch(o){throw this._worker?.port&&delete this._worker._pendingDestroy,o}this._transport=null,this._worker&&(this._worker.destroy(),this._worker=null)}}exports$1.PDFDocumentLoadingTask=PDFDocumentLoadingTask;class PDFDataRangeTransport{constructor(o,m,s=!1,y=null){this.length=o,this.initialData=m,this.progressiveDone=s,this.contentDispositionFilename=y,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=new _util.PromiseCapability}addRangeListener(o){this._rangeListeners.push(o)}addProgressListener(o){this._progressListeners.push(o)}addProgressiveReadListener(o){this._progressiveReadListeners.push(o)}addProgressiveDoneListener(o){this._progressiveDoneListeners.push(o)}onDataRange(o,m){for(const s of this._rangeListeners)s(o,m)}onDataProgress(o,m){this._readyCapability.promise.then(()=>{for(const s of this._progressListeners)s(o,m)})}onDataProgressiveRead(o){this._readyCapability.promise.then(()=>{for(const m of this._progressiveReadListeners)m(o)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const o of this._progressiveDoneListeners)o()})}transportReady(){this._readyCapability.resolve()}requestDataRange(o,m){(0,_util.unreachable)("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}exports$1.PDFDataRangeTransport=PDFDataRangeTransport;class PDFDocumentProxy{constructor(o,m){this._pdfInfo=o,this._transport=m,Object.defineProperty(this,"getJavaScript",{value:()=>((0,_display_utils.deprecated)("`PDFDocumentProxy.getJavaScript`, please use `PDFDocumentProxy.getJSActions` instead."),this.getJSActions().then(s=>{if(!s)return s;const y=[];for(const O in s)y.push(...s[O]);return y}))})}get annotationStorage(){return this._transport.annotationStorage}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return(0,_util.shadow)(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(o){return this._transport.getPage(o)}getPageIndex(o){return this._transport.getPageIndex(o)}getDestinations(){return this._transport.getDestinations()}getDestination(o){return this._transport.getDestination(o)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig(){return this._transport.getOptionalContentConfig()}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(o=!1){return this._transport.startCleanup(o||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}exports$1.PDFDocumentProxy=PDFDocumentProxy;class PDFPageProxy{#t=null;#e=!1;constructor(o,m,s,y=!1){this._pageIndex=o,this._pageInfo=m,this._transport=s,this._stats=y?new _display_utils.StatTimer:null,this._pdfBug=y,this.commonObjs=s.commonObjs,this.objs=new PDFObjects,this._maybeCleanupAfterRender=!1,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:o,rotation:m=this.rotate,offsetX:s=0,offsetY:y=0,dontFlip:O=!1}={}){return new _display_utils.PageViewport({viewBox:this.view,scale:o,rotation:m,offsetX:s,offsetY:y,dontFlip:O})}getAnnotations({intent:o="display"}={}){const m=this._transport.getRenderingIntent(o);return this._transport.getAnnotations(this._pageIndex,m.renderingIntent)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return(0,_util.shadow)(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){return this._transport._htmlForXfa?.children[this._pageIndex]||null}render({canvasContext:o,viewport:m,intent:s="display",annotationMode:y=_util.AnnotationMode.ENABLE,transform:O=null,background:N=null,optionalContentConfigPromise:G=null,annotationCanvasMap:q=null,pageColors:d=null,printAnnotationStorage:c=null}){this._stats?.time("Overall");const h=this._transport.getRenderingIntent(s,y,c);this.#e=!1,this.#a(),G||(G=this._transport.getOptionalContentConfig());let x=this._intentStates.get(h.cacheKey);x||(x=Object.create(null),this._intentStates.set(h.cacheKey,x)),x.streamReaderCancelTimeout&&(clearTimeout(x.streamReaderCancelTimeout),x.streamReaderCancelTimeout=null);const E=!!(h.renderingIntent&_util.RenderingIntentFlag.PRINT);x.displayReadyCapability||(x.displayReadyCapability=new _util.PromiseCapability,x.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(h));const p=_=>{x.renderTasks.delete(S),(this._maybeCleanupAfterRender||E)&&(this.#e=!0),this.#n(!E),_?(S.capability.reject(_),this._abortOperatorList({intentState:x,reason:_ instanceof Error?_:new Error(_)})):S.capability.resolve(),this._stats?.timeEnd("Rendering"),this._stats?.timeEnd("Overall")},S=new InternalRenderTask({callback:p,params:{canvasContext:o,viewport:m,transform:O,background:N},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:q,operatorList:x.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!E,pdfBug:this._pdfBug,pageColors:d});(x.renderTasks||=new Set).add(S);const C=S.task;return Promise.all([x.displayReadyCapability.promise,G]).then(([_,P])=>{if(this.destroyed){p();return}this._stats?.time("Rendering"),S.initializeGraphics({transparency:_,optionalContentConfig:P}),S.operatorListChanged()}).catch(p),C}getOperatorList({intent:o="display",annotationMode:m=_util.AnnotationMode.ENABLE,printAnnotationStorage:s=null}={}){function y(){N.operatorList.lastChunk&&(N.opListReadCapability.resolve(N.operatorList),N.renderTasks.delete(G))}const O=this._transport.getRenderingIntent(o,m,s,!0);let N=this._intentStates.get(O.cacheKey);N||(N=Object.create(null),this._intentStates.set(O.cacheKey,N));let G;return N.opListReadCapability||(G=Object.create(null),G.operatorListChanged=y,N.opListReadCapability=new _util.PromiseCapability,(N.renderTasks||=new Set).add(G),N.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(O)),N.opListReadCapability.promise}streamTextContent({includeMarkedContent:o=!1,disableNormalization:m=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:o===!0,disableNormalization:m===!0},{highWaterMark:100,size(y){return y.items.length}})}getTextContent(o={}){if(this._transport._htmlForXfa)return this.getXfa().then(s=>_xfa_text.XfaText.textContent(s));const m=this.streamTextContent(o);return new Promise(function(s,y){function O(){N.read().then(function({value:q,done:d}){if(d){s(G);return}Object.assign(G.styles,q.styles),G.items.push(...q.items),O()},y)}const N=m.getReader(),G={items:[],styles:Object.create(null)};O()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const o=[];for(const m of this._intentStates.values())if(this._abortOperatorList({intentState:m,reason:new Error("Page was destroyed."),force:!0}),!m.opListReadCapability)for(const s of m.renderTasks)o.push(s.completed),s.cancel();return this.objs.clear(),this.#e=!1,this.#a(),Promise.all(o)}cleanup(o=!1){this.#e=!0;const m=this.#n(!1);return o&&m&&(this._stats&&=new _display_utils.StatTimer),m}#n(o=!1){if(this.#a(),!this.#e||this.destroyed)return!1;if(o)return this.#t=setTimeout(()=>{this.#t=null,this.#n(!1)},DELAYED_CLEANUP_TIMEOUT),!1;for(const{renderTasks:m,operatorList:s}of this._intentStates.values())if(m.size>0||!s.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),this.#e=!1,!0}#a(){this.#t&&(clearTimeout(this.#t),this.#t=null)}_startRenderPage(o,m){const s=this._intentStates.get(m);s&&(this._stats?.timeEnd("Page Request"),s.displayReadyCapability?.resolve(o))}_renderPageChunk(o,m){for(let s=0,y=o.length;s<y;s++)m.operatorList.fnArray.push(o.fnArray[s]),m.operatorList.argsArray.push(o.argsArray[s]);m.operatorList.lastChunk=o.lastChunk,m.operatorList.separateAnnots=o.separateAnnots;for(const s of m.renderTasks)s.operatorListChanged();o.lastChunk&&this.#n(!0)}_pumpOperatorList({renderingIntent:o,cacheKey:m,annotationStorageSerializable:s}){const{map:y,transfers:O}=s,G=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:o,cacheKey:m,annotationStorage:y},O).getReader(),q=this._intentStates.get(m);q.streamReader=G;const d=()=>{G.read().then(({value:c,done:h})=>{if(h){q.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(c,q),d())},c=>{if(q.streamReader=null,!this._transport.destroyed){if(q.operatorList){q.operatorList.lastChunk=!0;for(const h of q.renderTasks)h.operatorListChanged();this.#n(!0)}if(q.displayReadyCapability)q.displayReadyCapability.reject(c);else if(q.opListReadCapability)q.opListReadCapability.reject(c);else throw c}})};d()}_abortOperatorList({intentState:o,reason:m,force:s=!1}){if(o.streamReader){if(o.streamReaderCancelTimeout&&(clearTimeout(o.streamReaderCancelTimeout),o.streamReaderCancelTimeout=null),!s){if(o.renderTasks.size>0)return;if(m instanceof _display_utils.RenderingCancelledException){let y=RENDERING_CANCELLED_TIMEOUT;m.extraDelay>0&&m.extraDelay<1e3&&(y+=m.extraDelay),o.streamReaderCancelTimeout=setTimeout(()=>{o.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:o,reason:m,force:!0})},y);return}}if(o.streamReader.cancel(new _util.AbortException(m.message)).catch(()=>{}),o.streamReader=null,!this._transport.destroyed){for(const[y,O]of this._intentStates)if(O===o){this._intentStates.delete(y);break}this.cleanup()}}}get stats(){return this._stats}}exports$1.PDFPageProxy=PDFPageProxy;class LoopbackPort{#t=new Set;#e=Promise.resolve();postMessage(o,m){const s={data:structuredClone(o,m?{transfer:m}:null)};this.#e.then(()=>{for(const y of this.#t)y.call(this,s)})}addEventListener(o,m){this.#t.add(m)}removeEventListener(o,m){this.#t.delete(m)}terminate(){this.#t.clear()}}exports$1.LoopbackPort=LoopbackPort;const PDFWorkerUtil={isWorkerDisabled:!1,fallbackWorkerSrc:null,fakeWorkerId:0};exports$1.PDFWorkerUtil=PDFWorkerUtil;{if(_util.isNodeJS&&typeof commonjsRequire=="function")PDFWorkerUtil.isWorkerDisabled=!0,PDFWorkerUtil.fallbackWorkerSrc="./pdf.worker.js";else if(typeof document=="object"){const f=document?.currentScript?.src;f&&(PDFWorkerUtil.fallbackWorkerSrc=f.replace(/(\.(?:min\.)?js)(\?.*)?$/i,".worker$1$2"))}PDFWorkerUtil.isSameOrigin=function(f,o){let m;try{if(m=new URL(f),!m.origin||m.origin==="null")return!1}catch{return!1}const s=new URL(o,m);return m.origin===s.origin},PDFWorkerUtil.createCDNWrapper=function(f){const o=`importScripts("${f}");`;return URL.createObjectURL(new Blob([o]))}}class PDFWorker{static#workerPorts;constructor({name:f=null,port:o=null,verbosity:m=(0,_util.getVerbosityLevel)()}={}){if(this.name=f,this.destroyed=!1,this.verbosity=m,this._readyCapability=new _util.PromiseCapability,this._port=null,this._webWorker=null,this._messageHandler=null,o){if(PDFWorker.#workerPorts?.has(o))throw new Error("Cannot use more than one PDFWorker per port.");(PDFWorker.#workerPorts||=new WeakMap).set(o,this),this._initializeFromPort(o);return}this._initialize()}get promise(){return this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(f){this._port=f,this._messageHandler=new _message_handler.MessageHandler("main","worker",f),this._messageHandler.on("ready",function(){}),this._readyCapability.resolve(),this._messageHandler.send("configure",{verbosity:this.verbosity})}_initialize(){if(!PDFWorkerUtil.isWorkerDisabled&&!PDFWorker._mainThreadWorkerMessageHandler){let{workerSrc:f}=PDFWorker;try{PDFWorkerUtil.isSameOrigin(window.location.href,f)||(f=PDFWorkerUtil.createCDNWrapper(new URL(f,window.location).href));const o=new Worker(f),m=new _message_handler.MessageHandler("main","worker",o),s=()=>{o.removeEventListener("error",y),m.destroy(),o.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},y=()=>{this._webWorker||s()};o.addEventListener("error",y),m.on("test",N=>{if(o.removeEventListener("error",y),this.destroyed){s();return}N?(this._messageHandler=m,this._port=o,this._webWorker=o,this._readyCapability.resolve(),m.send("configure",{verbosity:this.verbosity})):(this._setupFakeWorker(),m.destroy(),o.terminate())}),m.on("ready",N=>{if(o.removeEventListener("error",y),this.destroyed){s();return}try{O()}catch{this._setupFakeWorker()}});const O=()=>{const N=new Uint8Array;m.send("test",N,[N.buffer])};O();return}catch{(0,_util.info)("The worker has been disabled.")}}this._setupFakeWorker()}_setupFakeWorker(){PDFWorkerUtil.isWorkerDisabled||((0,_util.warn)("Setting up fake worker."),PDFWorkerUtil.isWorkerDisabled=!0),PDFWorker._setupFakeWorkerGlobal.then(f=>{if(this.destroyed){this._readyCapability.reject(new Error("Worker was destroyed"));return}const o=new LoopbackPort;this._port=o;const m=`fake${PDFWorkerUtil.fakeWorkerId++}`,s=new _message_handler.MessageHandler(m+"_worker",m,o);f.setup(s,o);const y=new _message_handler.MessageHandler(m,m+"_worker",o);this._messageHandler=y,this._readyCapability.resolve(),y.send("configure",{verbosity:this.verbosity})}).catch(f=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${f.message}".`))})}destroy(){this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),PDFWorker.#workerPorts?.delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}static fromPort(f){if(!f?.port)throw new Error("PDFWorker.fromPort - invalid method signature.");const o=this.#workerPorts?.get(f.port);if(o){if(o._pendingDestroy)throw new Error("PDFWorker.fromPort - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return o}return new PDFWorker(f)}static get workerSrc(){if(_worker_options.GlobalWorkerOptions.workerSrc)return _worker_options.GlobalWorkerOptions.workerSrc;if(PDFWorkerUtil.fallbackWorkerSrc!==null)return _util.isNodeJS||(0,_display_utils.deprecated)('No "GlobalWorkerOptions.workerSrc" specified.'),PDFWorkerUtil.fallbackWorkerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _mainThreadWorkerMessageHandler(){try{return globalThis.pdfjsWorker?.WorkerMessageHandler||null}catch{return null}}static get _setupFakeWorkerGlobal(){const loader=async()=>{const mainWorkerMessageHandler=this._mainThreadWorkerMessageHandler;if(mainWorkerMessageHandler)return mainWorkerMessageHandler;if(_util.isNodeJS&&typeof commonjsRequire=="function"){const worker=eval("require")(this.workerSrc);return worker.WorkerMessageHandler}return await(0,_display_utils.loadScript)(this.workerSrc),window.pdfjsWorker.WorkerMessageHandler};return(0,_util.shadow)(this,"_setupFakeWorkerGlobal",loader())}}exports$1.PDFWorker=PDFWorker;class WorkerTransport{#t=new Map;#e=new Map;#n=new Map;#a=null;constructor(o,m,s,y,O){this.messageHandler=o,this.loadingTask=m,this.commonObjs=new PDFObjects,this.fontLoader=new _font_loader.FontLoader({ownerDocument:y.ownerDocument,styleElement:y.styleElement}),this._params=y,this.canvasFactory=O.canvasFactory,this.filterFactory=O.filterFactory,this.cMapReaderFactory=O.cMapReaderFactory,this.standardFontDataFactory=O.standardFontDataFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=s,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=new _util.PromiseCapability,this.setupMessageHandler()}#o(o,m=null){const s=this.#t.get(o);if(s)return s;const y=this.messageHandler.sendWithPromise(o,m);return this.#t.set(o,y),y}get annotationStorage(){return(0,_util.shadow)(this,"annotationStorage",new _annotation_storage.AnnotationStorage)}getRenderingIntent(o,m=_util.AnnotationMode.ENABLE,s=null,y=!1){let O=_util.RenderingIntentFlag.DISPLAY,N=_annotation_storage.SerializableEmpty;switch(o){case"any":O=_util.RenderingIntentFlag.ANY;break;case"display":break;case"print":O=_util.RenderingIntentFlag.PRINT;break;default:(0,_util.warn)(`getRenderingIntent - invalid intent: ${o}`)}switch(m){case _util.AnnotationMode.DISABLE:O+=_util.RenderingIntentFlag.ANNOTATIONS_DISABLE;break;case _util.AnnotationMode.ENABLE:break;case _util.AnnotationMode.ENABLE_FORMS:O+=_util.RenderingIntentFlag.ANNOTATIONS_FORMS;break;case _util.AnnotationMode.ENABLE_STORAGE:O+=_util.RenderingIntentFlag.ANNOTATIONS_STORAGE,N=(O&_util.RenderingIntentFlag.PRINT&&s instanceof _annotation_storage.PrintAnnotationStorage?s:this.annotationStorage).serializable;break;default:(0,_util.warn)(`getRenderingIntent - invalid annotationMode: ${m}`)}return y&&(O+=_util.RenderingIntentFlag.OPLIST),{renderingIntent:O,cacheKey:`${O}_${N.hash}`,annotationStorageSerializable:N}}destroy(){if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=new _util.PromiseCapability,this.#a?.reject(new Error("Worker was destroyed during onPassword callback"));const o=[];for(const s of this.#e.values())o.push(s._destroy());this.#e.clear(),this.#n.clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const m=this.messageHandler.sendWithPromise("Terminate",null);return o.push(m),Promise.all(o).then(()=>{this.commonObjs.clear(),this.fontLoader.clear(),this.#t.clear(),this.filterFactory.destroy(),this._networkStream?.cancelAllRequests(new _util.AbortException("Worker was terminated.")),this.messageHandler&&(this.messageHandler.destroy(),this.messageHandler=null),this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:o,loadingTask:m}=this;o.on("GetReader",(s,y)=>{(0,_util.assert)(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=O=>{this._lastProgress={loaded:O.loaded,total:O.total}},y.onPull=()=>{this._fullReader.read().then(function({value:O,done:N}){if(N){y.close();return}(0,_util.assert)(O instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),y.enqueue(new Uint8Array(O),1,[O])}).catch(O=>{y.error(O)})},y.onCancel=O=>{this._fullReader.cancel(O),y.ready.catch(N=>{if(!this.destroyed)throw N})}}),o.on("ReaderHeadersReady",s=>{const y=new _util.PromiseCapability,O=this._fullReader;return O.headersReady.then(()=>{(!O.isStreamingSupported||!O.isRangeSupported)&&(this._lastProgress&&m.onProgress?.(this._lastProgress),O.onProgress=N=>{m.onProgress?.({loaded:N.loaded,total:N.total})}),y.resolve({isStreamingSupported:O.isStreamingSupported,isRangeSupported:O.isRangeSupported,contentLength:O.contentLength})},y.reject),y.promise}),o.on("GetRangeReader",(s,y)=>{(0,_util.assert)(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const O=this._networkStream.getRangeReader(s.begin,s.end);if(!O){y.close();return}y.onPull=()=>{O.read().then(function({value:N,done:G}){if(G){y.close();return}(0,_util.assert)(N instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),y.enqueue(new Uint8Array(N),1,[N])}).catch(N=>{y.error(N)})},y.onCancel=N=>{O.cancel(N),y.ready.catch(G=>{if(!this.destroyed)throw G})}}),o.on("GetDoc",({pdfInfo:s})=>{this._numPages=s.numPages,this._htmlForXfa=s.htmlForXfa,delete s.htmlForXfa,m._capability.resolve(new PDFDocumentProxy(s,this))}),o.on("DocException",function(s){let y;switch(s.name){case"PasswordException":y=new _util.PasswordException(s.message,s.code);break;case"InvalidPDFException":y=new _util.InvalidPDFException(s.message);break;case"MissingPDFException":y=new _util.MissingPDFException(s.message);break;case"UnexpectedResponseException":y=new _util.UnexpectedResponseException(s.message,s.status);break;case"UnknownErrorException":y=new _util.UnknownErrorException(s.message,s.details);break;default:(0,_util.unreachable)("DocException - expected a valid Error.")}m._capability.reject(y)}),o.on("PasswordRequest",s=>{if(this.#a=new _util.PromiseCapability,m.onPassword){const y=O=>{O instanceof Error?this.#a.reject(O):this.#a.resolve({password:O})};try{m.onPassword(y,s.code)}catch(O){this.#a.reject(O)}}else this.#a.reject(new _util.PasswordException(s.message,s.code));return this.#a.promise}),o.on("DataLoaded",s=>{m.onProgress?.({loaded:s.length,total:s.length}),this.downloadInfoCapability.resolve(s)}),o.on("StartRenderPage",s=>{if(this.destroyed)return;this.#e.get(s.pageIndex)._startRenderPage(s.transparency,s.cacheKey)}),o.on("commonobj",([s,y,O])=>{if(!this.destroyed&&!this.commonObjs.has(s))switch(y){case"Font":const N=this._params;if("error"in O){const d=O.error;(0,_util.warn)(`Error during font loading: ${d}`),this.commonObjs.resolve(s,d);break}const G=N.pdfBug&&globalThis.FontInspector?.enabled?(d,c)=>globalThis.FontInspector.fontAdded(d,c):null,q=new _font_loader.FontFaceObject(O,{isEvalSupported:N.isEvalSupported,disableFontFace:N.disableFontFace,ignoreErrors:N.ignoreErrors,inspectFont:G});this.fontLoader.bind(q).catch(d=>o.sendWithPromise("FontFallback",{id:s})).finally(()=>{!N.fontExtraProperties&&q.data&&(q.data=null),this.commonObjs.resolve(s,q)});break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(s,O);break;default:throw new Error(`Got unknown common object type ${y}`)}}),o.on("obj",([s,y,O,N])=>{if(this.destroyed)return;const G=this.#e.get(y);if(!G.objs.has(s))switch(O){case"Image":if(G.objs.resolve(s,N),N){let q;if(N.bitmap){const{width:d,height:c}=N;q=d*c*4}else q=N.data?.length||0;q>_util.MAX_IMAGE_SIZE_TO_CACHE&&(G._maybeCleanupAfterRender=!0)}break;case"Pattern":G.objs.resolve(s,N);break;default:throw new Error(`Got unknown object type ${O}`)}}),o.on("DocProgress",s=>{this.destroyed||m.onProgress?.({loaded:s.loaded,total:s.total})}),o.on("FetchBuiltInCMap",s=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.cMapReaderFactory?this.cMapReaderFactory.fetch(s):Promise.reject(new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter."))),o.on("FetchStandardFontData",s=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.standardFontDataFactory?this.standardFontDataFactory.fetch(s):Promise.reject(new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.")))}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){this.annotationStorage.size<=0&&(0,_util.warn)("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:o,transfers:m}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:o,filename:this._fullReader?.filename??null},m).finally(()=>{this.annotationStorage.resetModified()})}getPage(o){if(!Number.isInteger(o)||o<=0||o>this._numPages)return Promise.reject(new Error("Invalid page request."));const m=o-1,s=this.#n.get(m);if(s)return s;const y=this.messageHandler.sendWithPromise("GetPage",{pageIndex:m}).then(O=>{if(this.destroyed)throw new Error("Transport destroyed");const N=new PDFPageProxy(m,O,this,this._params.pdfBug);return this.#e.set(m,N),N});return this.#n.set(m,y),y}getPageIndex(o){return typeof o!="object"||o===null||!Number.isInteger(o.num)||o.num<0||!Number.isInteger(o.gen)||o.gen<0?Promise.reject(new Error("Invalid pageIndex request.")):this.messageHandler.sendWithPromise("GetPageIndex",{num:o.num,gen:o.gen})}getAnnotations(o,m){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:o,intent:m})}getFieldObjects(){return this.#o("GetFieldObjects")}hasJSActions(){return this.#o("HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(o){return typeof o!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:o})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getDocJSActions(){return this.#o("GetDocJSActions")}getPageJSActions(o){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:o})}getStructTree(o){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:o})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(){return this.messageHandler.sendWithPromise("GetOptionalContentConfig",null).then(o=>new _optional_content_config.OptionalContentConfig(o))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const o="GetMetadata",m=this.#t.get(o);if(m)return m;const s=this.messageHandler.sendWithPromise(o,null).then(y=>({info:y[0],metadata:y[1]?new _metadata.Metadata(y[1]):null,contentDispositionFilename:this._fullReader?.filename??null,contentLength:this._fullReader?.contentLength??null}));return this.#t.set(o,s),s}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(o=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const m of this.#e.values())if(!m.cleanup())throw new Error(`startCleanup: Page ${m.pageNumber} is currently rendering.`);this.commonObjs.clear(),o||this.fontLoader.clear(),this.#t.clear(),this.filterFactory.destroy(!0)}}get loadingParams(){const{disableAutoFetch:o,enableXfa:m}=this._params;return(0,_util.shadow)(this,"loadingParams",{disableAutoFetch:o,enableXfa:m})}}class PDFObjects{#t=Object.create(null);#e(o){return this.#t[o]||={capability:new _util.PromiseCapability,data:null}}get(o,m=null){if(m){const y=this.#e(o);return y.capability.promise.then(()=>m(y.data)),null}const s=this.#t[o];if(!s?.capability.settled)throw new Error(`Requesting object that isn't resolved yet ${o}.`);return s.data}has(o){return this.#t[o]?.capability.settled||!1}resolve(o,m=null){const s=this.#e(o);s.data=m,s.capability.resolve()}clear(){for(const o in this.#t){const{data:m}=this.#t[o];m?.bitmap?.close()}this.#t=Object.create(null)}}class RenderTask{#t=null;constructor(o){this.#t=o,this.onContinue=null}get promise(){return this.#t.capability.promise}cancel(o=0){this.#t.cancel(null,o)}get separateAnnots(){const{separateAnnots:o}=this.#t.operatorList;if(!o)return!1;const{annotationCanvasMap:m}=this.#t;return o.form||o.canvas&&m?.size>0}}exports$1.RenderTask=RenderTask;class InternalRenderTask{static#t=new WeakSet;constructor({callback:o,params:m,objs:s,commonObjs:y,annotationCanvasMap:O,operatorList:N,pageIndex:G,canvasFactory:q,filterFactory:d,useRequestAnimationFrame:c=!1,pdfBug:h=!1,pageColors:x=null}){this.callback=o,this.params=m,this.objs=s,this.commonObjs=y,this.annotationCanvasMap=O,this.operatorListIdx=null,this.operatorList=N,this._pageIndex=G,this.canvasFactory=q,this.filterFactory=d,this._pdfBug=h,this.pageColors=x,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=c===!0&&typeof window<"u",this.cancelled=!1,this.capability=new _util.PromiseCapability,this.task=new RenderTask(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=m.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:o=!1,optionalContentConfig:m}){if(this.cancelled)return;if(this._canvas){if(InternalRenderTask.#t.has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");InternalRenderTask.#t.add(this._canvas)}this._pdfBug&&globalThis.StepperManager?.enabled&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:s,viewport:y,transform:O,background:N}=this.params;this.gfx=new _canvas.CanvasGraphics(s,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:m},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:O,viewport:y,transparency:o,background:N}),this.operatorListIdx=0,this.graphicsReady=!0,this.graphicsReadyCallback?.()}cancel(o=null,m=0){this.running=!1,this.cancelled=!0,this.gfx?.endDrawing(),InternalRenderTask.#t.delete(this._canvas),this.callback(o||new _display_utils.RenderingCancelledException(`Rendering cancelled, page ${this._pageIndex+1}`,m))}operatorListChanged(){if(!this.graphicsReady){this.graphicsReadyCallback||=this._continueBound;return}this.stepper?.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?window.requestAnimationFrame(()=>{this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),InternalRenderTask.#t.delete(this._canvas),this.callback())))}}const version="3.11.174";exports$1.version=version;const build="ce8716743";exports$1.build=build}),((f,o,m)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.SerializableEmpty=o.PrintAnnotationStorage=o.AnnotationStorage=void 0;var s=m(1),y=m(4),O=m(8);const N=Object.freeze({map:null,hash:"",transfers:void 0});o.SerializableEmpty=N;class G{#t=!1;#e=new Map;constructor(){this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(c,h){const x=this.#e.get(c);return x===void 0?h:Object.assign(h,x)}getRawValue(c){return this.#e.get(c)}remove(c){if(this.#e.delete(c),this.#e.size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const h of this.#e.values())if(h instanceof y.AnnotationEditor)return;this.onAnnotationEditor(null)}}setValue(c,h){const x=this.#e.get(c);let E=!1;if(x!==void 0)for(const[p,S]of Object.entries(h))x[p]!==S&&(E=!0,x[p]=S);else E=!0,this.#e.set(c,h);E&&this.#n(),h instanceof y.AnnotationEditor&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(h.constructor._type)}has(c){return this.#e.has(c)}getAll(){return this.#e.size>0?(0,s.objectFromMap)(this.#e):null}setAll(c){for(const[h,x]of Object.entries(c))this.setValue(h,x)}get size(){return this.#e.size}#n(){this.#t||(this.#t=!0,typeof this.onSetModified=="function"&&this.onSetModified())}resetModified(){this.#t&&(this.#t=!1,typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new q(this)}get serializable(){if(this.#e.size===0)return N;const c=new Map,h=new O.MurmurHash3_64,x=[],E=Object.create(null);let p=!1;for(const[S,C]of this.#e){const _=C instanceof y.AnnotationEditor?C.serialize(!1,E):C;_&&(c.set(S,_),h.update(`${S}:${JSON.stringify(_)}`),p||=!!_.bitmap)}if(p)for(const S of c.values())S.bitmap&&x.push(S.bitmap);return c.size>0?{map:c,hash:h.hexdigest(),transfers:x}:N}}o.AnnotationStorage=G;class q extends G{#t;constructor(c){super();const{map:h,hash:x,transfers:E}=c.serializable,p=structuredClone(h,E?{transfer:E}:null);this.#t={map:p,hash:x,transfers:E}}get print(){(0,s.unreachable)("Should not call PrintAnnotationStorage.print")}get serializable(){return this.#t}}o.PrintAnnotationStorage=q}),((f,o,m)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.AnnotationEditor=void 0;var s=m(5),y=m(1),O=m(6);class N{#t="";#e=!1;#n=null;#a=null;#o=null;#s=!1;#r=null;#l=this.focusin.bind(this);#c=this.focusout.bind(this);#i=!1;#f=!1;#d=!1;_initialOptions=Object.create(null);_uiManager=null;_focusEventsAllowed=!0;_l10nPromise=null;#h=!1;#p=N._zIndex++;static _borderLineWidth=-1;static _colorManager=new s.ColorManager;static _zIndex=1;static SMALL_EDITOR_SIZE=0;constructor(d){this.constructor===N&&(0,y.unreachable)("Cannot initialize AnnotationEditor."),this.parent=d.parent,this.id=d.id,this.width=this.height=null,this.pageIndex=d.parent.pageIndex,this.name=d.name,this.div=null,this._uiManager=d.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=d.isCentered,this._structTreeParentId=null;const{rotation:c,rawDims:{pageWidth:h,pageHeight:x,pageX:E,pageY:p}}=this.parent.viewport;this.rotation=c,this.pageRotation=(360+c-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[h,x],this.pageTranslation=[E,p];const[S,C]=this.parentDimensions;this.x=d.x/S,this.y=d.y/C,this.isAttachedToDOM=!1,this.deleted=!1}get editorType(){return Object.getPrototypeOf(this).constructor._type}static get _defaultLineColor(){return(0,y.shadow)(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(d){const c=new G({id:d.parent.getNextId(),parent:d.parent,uiManager:d._uiManager});c.annotationElementId=d.annotationElementId,c.deleted=!0,c._uiManager.addToAnnotationStorage(c)}static initialize(d,c=null){if(N._l10nPromise||=new Map(["editor_alt_text_button_label","editor_alt_text_edit_button_label","editor_alt_text_decorative_tooltip"].map(x=>[x,d.get(x)])),c?.strings)for(const x of c.strings)N._l10nPromise.set(x,d.get(x));if(N._borderLineWidth!==-1)return;const h=getComputedStyle(document.documentElement);N._borderLineWidth=parseFloat(h.getPropertyValue("--outline-width"))||0}static updateDefaultParams(d,c){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(d){return!1}static paste(d,c){(0,y.unreachable)("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return this.#h}set _isDraggable(d){this.#h=d,this.div?.classList.toggle("draggable",d)}center(){const[d,c]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*c/(d*2),this.y+=this.width*d/(c*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*c/(d*2),this.y-=this.width*d/(c*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(d){this._uiManager.addCommands(d)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=this.#p}setParent(d){d!==null&&(this.pageIndex=d.pageIndex,this.pageDimensions=d.pageDimensions),this.parent=d}focusin(d){this._focusEventsAllowed&&(this.#i?this.#i=!1:this.parent.setSelected(this))}focusout(d){!this._focusEventsAllowed||!this.isAttachedToDOM||d.relatedTarget?.closest(`#${this.id}`)||(d.preventDefault(),this.parent?.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(d,c,h,x){const[E,p]=this.parentDimensions;[h,x]=this.screenToPageTranslation(h,x),this.x=(d+h)/E,this.y=(c+x)/p,this.fixAndSetPosition()}#y([d,c],h,x){[h,x]=this.screenToPageTranslation(h,x),this.x+=h/d,this.y+=x/c,this.fixAndSetPosition()}translate(d,c){this.#y(this.parentDimensions,d,c)}translateInPage(d,c){this.#y(this.pageDimensions,d,c),this.div.scrollIntoView({block:"nearest"})}drag(d,c){const[h,x]=this.parentDimensions;if(this.x+=d/h,this.y+=c/x,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:_,y:P}=this.div.getBoundingClientRect();this.parent.findNewParent(this,_,P)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:E,y:p}=this;const[S,C]=this.#g();E+=S,p+=C,this.div.style.left=`${(100*E).toFixed(2)}%`,this.div.style.top=`${(100*p).toFixed(2)}%`,this.div.scrollIntoView({block:"nearest"})}#g(){const[d,c]=this.parentDimensions,{_borderLineWidth:h}=N,x=h/d,E=h/c;switch(this.rotation){case 90:return[-x,E];case 180:return[x,E];case 270:return[x,-E];default:return[-x,-E]}}fixAndSetPosition(){const[d,c]=this.pageDimensions;let{x:h,y:x,width:E,height:p}=this;switch(E*=d,p*=c,h*=d,x*=c,this.rotation){case 0:h=Math.max(0,Math.min(d-E,h)),x=Math.max(0,Math.min(c-p,x));break;case 90:h=Math.max(0,Math.min(d-p,h)),x=Math.min(c,Math.max(E,x));break;case 180:h=Math.min(d,Math.max(E,h)),x=Math.min(c,Math.max(p,x));break;case 270:h=Math.min(d,Math.max(p,h)),x=Math.max(0,Math.min(c-E,x));break}this.x=h/=d,this.y=x/=c;const[S,C]=this.#g();h+=S,x+=C;const{style:_}=this.div;_.left=`${(100*h).toFixed(2)}%`,_.top=`${(100*x).toFixed(2)}%`,this.moveInDOM()}static#m(d,c,h){switch(h){case 90:return[c,-d];case 180:return[-d,-c];case 270:return[-c,d];default:return[d,c]}}screenToPageTranslation(d,c){return N.#m(d,c,this.parentRotation)}pageTranslationToScreen(d,c){return N.#m(d,c,360-this.parentRotation)}#u(d){switch(d){case 90:{const[c,h]=this.pageDimensions;return[0,-c/h,h/c,0]}case 180:return[-1,0,0,-1];case 270:{const[c,h]=this.pageDimensions;return[0,c/h,-h/c,0]}default:return[1,0,0,1]}}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:d,pageDimensions:[c,h]}=this,x=c*d,E=h*d;return y.FeatureTest.isCSSRoundSupported?[Math.round(x),Math.round(E)]:[x,E]}setDims(d,c){const[h,x]=this.parentDimensions;this.div.style.width=`${(100*d/h).toFixed(2)}%`,this.#s||(this.div.style.height=`${(100*c/x).toFixed(2)}%`),this.#n?.classList.toggle("small",d<N.SMALL_EDITOR_SIZE||c<N.SMALL_EDITOR_SIZE)}fixDims(){const{style:d}=this.div,{height:c,width:h}=d,x=h.endsWith("%"),E=!this.#s&&c.endsWith("%");if(x&&E)return;const[p,S]=this.parentDimensions;x||(d.width=`${(100*parseFloat(h)/p).toFixed(2)}%`),!this.#s&&!E&&(d.height=`${(100*parseFloat(c)/S).toFixed(2)}%`)}getInitialTranslation(){return[0,0]}#b(){if(this.#r)return;this.#r=document.createElement("div"),this.#r.classList.add("resizers");const d=["topLeft","topRight","bottomRight","bottomLeft"];this._willKeepAspectRatio||d.push("topMiddle","middleRight","bottomMiddle","middleLeft");for(const c of d){const h=document.createElement("div");this.#r.append(h),h.classList.add("resizer",c),h.addEventListener("pointerdown",this.#E.bind(this,c)),h.addEventListener("contextmenu",O.noContextMenu)}this.div.prepend(this.#r)}#E(d,c){c.preventDefault();const{isMac:h}=y.FeatureTest.platform;if(c.button!==0||c.ctrlKey&&h)return;const x=this.#A.bind(this,d),E=this._isDraggable;this._isDraggable=!1;const p={passive:!0,capture:!0};window.addEventListener("pointermove",x,p);const S=this.x,C=this.y,_=this.width,P=this.height,V=this.parent.div.style.cursor,H=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(c.target).cursor;const k=()=>{this._isDraggable=E,window.removeEventListener("pointerup",k),window.removeEventListener("blur",k),window.removeEventListener("pointermove",x,p),this.parent.div.style.cursor=V,this.div.style.cursor=H;const L=this.x,J=this.y,rt=this.width,et=this.height;L===S&&J===C&&rt===_&&et===P||this.addCommands({cmd:()=>{this.width=rt,this.height=et,this.x=L,this.y=J;const[lt,yt]=this.parentDimensions;this.setDims(lt*rt,yt*et),this.fixAndSetPosition()},undo:()=>{this.width=_,this.height=P,this.x=S,this.y=C;const[lt,yt]=this.parentDimensions;this.setDims(lt*_,yt*P),this.fixAndSetPosition()},mustExec:!0})};window.addEventListener("pointerup",k),window.addEventListener("blur",k)}#A(d,c){const[h,x]=this.parentDimensions,E=this.x,p=this.y,S=this.width,C=this.height,_=N.MIN_SIZE/h,P=N.MIN_SIZE/x,V=K=>Math.round(K*1e4)/1e4,H=this.#u(this.rotation),k=(K,b)=>[H[0]*K+H[2]*b,H[1]*K+H[3]*b],L=this.#u(360-this.rotation),J=(K,b)=>[L[0]*K+L[2]*b,L[1]*K+L[3]*b];let rt,et,lt=!1,yt=!1;switch(d){case"topLeft":lt=!0,rt=(K,b)=>[0,0],et=(K,b)=>[K,b];break;case"topMiddle":rt=(K,b)=>[K/2,0],et=(K,b)=>[K/2,b];break;case"topRight":lt=!0,rt=(K,b)=>[K,0],et=(K,b)=>[0,b];break;case"middleRight":yt=!0,rt=(K,b)=>[K,b/2],et=(K,b)=>[0,b/2];break;case"bottomRight":lt=!0,rt=(K,b)=>[K,b],et=(K,b)=>[0,0];break;case"bottomMiddle":rt=(K,b)=>[K/2,b],et=(K,b)=>[K/2,0];break;case"bottomLeft":lt=!0,rt=(K,b)=>[0,b],et=(K,b)=>[K,0];break;case"middleLeft":yt=!0,rt=(K,b)=>[0,b/2],et=(K,b)=>[K,b/2];break}const Dt=rt(S,C),Mt=et(S,C);let qt=k(...Mt);const Yt=V(E+qt[0]),nt=V(p+qt[1]);let W=1,D=1,[T,R]=this.screenToPageTranslation(c.movementX,c.movementY);if([T,R]=J(T/h,R/x),lt){const K=Math.hypot(S,C);W=D=Math.max(Math.min(Math.hypot(Mt[0]-Dt[0]-T,Mt[1]-Dt[1]-R)/K,1/S,1/C),_/S,P/C)}else yt?W=Math.max(_,Math.min(1,Math.abs(Mt[0]-Dt[0]-T)))/S:D=Math.max(P,Math.min(1,Math.abs(Mt[1]-Dt[1]-R)))/C;const v=V(S*W),F=V(C*D);qt=k(...et(v,F));const U=Yt-qt[0],$=nt-qt[1];this.width=v,this.height=F,this.x=U,this.y=$,this.setDims(h*v,x*F),this.fixAndSetPosition()}async addAltTextButton(){if(this.#n)return;const d=this.#n=document.createElement("button");d.className="altText";const c=await N._l10nPromise.get("editor_alt_text_button_label");d.textContent=c,d.setAttribute("aria-label",c),d.tabIndex="0",d.addEventListener("contextmenu",O.noContextMenu),d.addEventListener("pointerdown",h=>h.stopPropagation()),d.addEventListener("click",h=>{h.preventDefault(),this._uiManager.editAltText(this)},{capture:!0}),d.addEventListener("keydown",h=>{h.target===d&&h.key==="Enter"&&(h.preventDefault(),this._uiManager.editAltText(this))}),this.#T(),this.div.append(d),N.SMALL_EDITOR_SIZE||(N.SMALL_EDITOR_SIZE=Math.min(128,Math.round(d.getBoundingClientRect().width*1.4)))}async#T(){const d=this.#n;if(!d)return;if(!this.#t&&!this.#e){d.classList.remove("done"),this.#a?.remove();return}N._l10nPromise.get("editor_alt_text_edit_button_label").then(h=>{d.setAttribute("aria-label",h)});let c=this.#a;if(!c){this.#a=c=document.createElement("span"),c.className="tooltip",c.setAttribute("role","tooltip");const h=c.id=`alt-text-tooltip-${this.id}`;d.setAttribute("aria-describedby",h);const x=100;d.addEventListener("mouseenter",()=>{this.#o=setTimeout(()=>{this.#o=null,this.#a.classList.add("show"),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",subtype:this.editorType,data:{action:"alt_text_tooltip"}}})},x)}),d.addEventListener("mouseleave",()=>{clearTimeout(this.#o),this.#o=null,this.#a?.classList.remove("show")})}d.classList.add("done"),c.innerText=this.#e?await N._l10nPromise.get("editor_alt_text_decorative_tooltip"):this.#t,c.parentNode||d.append(c)}getClientDimensions(){return this.div.getBoundingClientRect()}get altTextData(){return{altText:this.#t,decorative:this.#e}}set altTextData({altText:d,decorative:c}){this.#t===d&&this.#e===c||(this.#t=d,this.#e=c,this.#T())}render(){this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.setAttribute("tabIndex",0),this.setInForeground(),this.div.addEventListener("focusin",this.#l),this.div.addEventListener("focusout",this.#c);const[d,c]=this.parentDimensions;this.parentRotation%180!==0&&(this.div.style.maxWidth=`${(100*c/d).toFixed(2)}%`,this.div.style.maxHeight=`${(100*d/c).toFixed(2)}%`);const[h,x]=this.getInitialTranslation();return this.translate(h,x),(0,s.bindEvents)(this,this.div,["pointerdown"]),this.div}pointerdown(d){const{isMac:c}=y.FeatureTest.platform;if(d.button!==0||d.ctrlKey&&c){d.preventDefault();return}this.#i=!0,this.#C(d)}#C(d){if(!this._isDraggable)return;const c=this._uiManager.isSelected(this);this._uiManager.setUpDragSession();let h,x;c&&(h={passive:!0,capture:!0},x=p=>{const[S,C]=this.screenToPageTranslation(p.movementX,p.movementY);this._uiManager.dragSelectedEditors(S,C)},window.addEventListener("pointermove",x,h));const E=()=>{if(window.removeEventListener("pointerup",E),window.removeEventListener("blur",E),c&&window.removeEventListener("pointermove",x,h),this.#i=!1,!this._uiManager.endDragSession()){const{isMac:p}=y.FeatureTest.platform;d.ctrlKey&&!p||d.shiftKey||d.metaKey&&p?this.parent.toggleSelected(this):this.parent.setSelected(this)}};window.addEventListener("pointerup",E),window.addEventListener("blur",E)}moveInDOM(){this.parent?.moveEditorInDOM(this)}_setParentAndPosition(d,c,h){d.changeParent(this),this.x=c,this.y=h,this.fixAndSetPosition()}getRect(d,c){const h=this.parentScale,[x,E]=this.pageDimensions,[p,S]=this.pageTranslation,C=d/h,_=c/h,P=this.x*x,V=this.y*E,H=this.width*x,k=this.height*E;switch(this.rotation){case 0:return[P+C+p,E-V-_-k+S,P+C+H+p,E-V-_+S];case 90:return[P+_+p,E-V+C+S,P+_+k+p,E-V+C+H+S];case 180:return[P-C-H+p,E-V+_+S,P-C+p,E-V+_+k+S];case 270:return[P-_-k+p,E-V-C-H+S,P-_+p,E-V-C+S];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(d,c){const[h,x,E,p]=d,S=E-h,C=p-x;switch(this.rotation){case 0:return[h,c-p,S,C];case 90:return[h,c-x,C,S];case 180:return[E,c-x,S,C];case 270:return[E,c-p,C,S];default:throw new Error("Invalid rotation")}}onceAdded(){}isEmpty(){return!1}enableEditMode(){this.#d=!0}disableEditMode(){this.#d=!1}isInEditMode(){return this.#d}shouldGetKeyboardEvents(){return!1}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}rebuild(){this.div?.addEventListener("focusin",this.#l),this.div?.addEventListener("focusout",this.#c)}serialize(d=!1,c=null){(0,y.unreachable)("An editor must be serializable")}static deserialize(d,c,h){const x=new this.prototype.constructor({parent:c,id:c.getNextId(),uiManager:h});x.rotation=d.rotation;const[E,p]=x.pageDimensions,[S,C,_,P]=x.getRectInCurrentCoords(d.rect,p);return x.x=S/E,x.y=C/p,x.width=_/E,x.height=P/p,x}remove(){this.div.removeEventListener("focusin",this.#l),this.div.removeEventListener("focusout",this.#c),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),this.#n?.remove(),this.#n=null,this.#a=null}get isResizable(){return!1}makeResizable(){this.isResizable&&(this.#b(),this.#r.classList.remove("hidden"))}select(){this.makeResizable(),this.div?.classList.add("selectedEditor")}unselect(){this.#r?.classList.add("hidden"),this.div?.classList.remove("selectedEditor"),this.div?.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus()}updateParams(d,c){}disableEditing(){this.#n&&(this.#n.hidden=!0)}enableEditing(){this.#n&&(this.#n.hidden=!1)}enterInEditMode(){}get contentDiv(){return this.div}get isEditing(){return this.#f}set isEditing(d){this.#f=d,this.parent&&(d?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(d,c){this.#s=!0;const h=d/c,{style:x}=this.div;x.aspectRatio=h,x.height="auto"}static get MIN_SIZE(){return 16}}o.AnnotationEditor=N;class G extends N{constructor(d){super(d),this.annotationElementId=d.annotationElementId,this.deleted=!0}serialize(){return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex}}}}),((f,o,m)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.KeyboardManager=o.CommandManager=o.ColorManager=o.AnnotationEditorUIManager=void 0,o.bindEvents=O,o.opacityToHex=N;var s=m(1),y=m(6);function O(E,p,S){for(const C of S)p.addEventListener(C,E[C].bind(E))}function N(E){return Math.round(Math.min(255,Math.max(1,255*E))).toString(16).padStart(2,"0")}class G{#t=0;getId(){return`${s.AnnotationEditorPrefix}${this.#t++}`}}class q{#t=(0,s.getUuid)();#e=0;#n=null;static get _isSVGFittingCanvas(){const p='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',C=new OffscreenCanvas(1,3).getContext("2d"),_=new Image;_.src=p;const P=_.decode().then(()=>(C.drawImage(_,0,0,1,1,0,0,1,3),new Uint32Array(C.getImageData(0,0,1,1).data.buffer)[0]===0));return(0,s.shadow)(this,"_isSVGFittingCanvas",P)}async#a(p,S){this.#n||=new Map;let C=this.#n.get(p);if(C===null)return null;if(C?.bitmap)return C.refCounter+=1,C;try{C||={bitmap:null,id:`image_${this.#t}_${this.#e++}`,refCounter:0,isSvg:!1};let _;if(typeof S=="string"){C.url=S;const P=await fetch(S);if(!P.ok)throw new Error(P.statusText);_=await P.blob()}else _=C.file=S;if(_.type==="image/svg+xml"){const P=q._isSVGFittingCanvas,V=new FileReader,H=new Image,k=new Promise((L,J)=>{H.onload=()=>{C.bitmap=H,C.isSvg=!0,L()},V.onload=async()=>{const rt=C.svgUrl=V.result;H.src=await P?`${rt}#svgView(preserveAspectRatio(none))`:rt},H.onerror=V.onerror=J});V.readAsDataURL(_),await k}else C.bitmap=await createImageBitmap(_);C.refCounter=1}catch(_){console.error(_),C=null}return this.#n.set(p,C),C&&this.#n.set(C.id,C),C}async getFromFile(p){const{lastModified:S,name:C,size:_,type:P}=p;return this.#a(`${S}_${C}_${_}_${P}`,p)}async getFromUrl(p){return this.#a(p,p)}async getFromId(p){this.#n||=new Map;const S=this.#n.get(p);return S?S.bitmap?(S.refCounter+=1,S):S.file?this.getFromFile(S.file):this.getFromUrl(S.url):null}getSvgUrl(p){const S=this.#n.get(p);return S?.isSvg?S.svgUrl:null}deleteId(p){this.#n||=new Map;const S=this.#n.get(p);S&&(S.refCounter-=1,S.refCounter===0&&(S.bitmap=null))}isValidId(p){return p.startsWith(`image_${this.#t}_`)}}class d{#t=[];#e=!1;#n;#a=-1;constructor(p=128){this.#n=p}add({cmd:p,undo:S,mustExec:C,type:_=NaN,overwriteIfSameType:P=!1,keepUndo:V=!1}){if(C&&p(),this.#e)return;const H={cmd:p,undo:S,type:_};if(this.#a===-1){this.#t.length>0&&(this.#t.length=0),this.#a=0,this.#t.push(H);return}if(P&&this.#t[this.#a].type===_){V&&(H.undo=this.#t[this.#a].undo),this.#t[this.#a]=H;return}const k=this.#a+1;k===this.#n?this.#t.splice(0,1):(this.#a=k,k<this.#t.length&&this.#t.splice(k)),this.#t.push(H)}undo(){this.#a!==-1&&(this.#e=!0,this.#t[this.#a].undo(),this.#e=!1,this.#a-=1)}redo(){this.#a<this.#t.length-1&&(this.#a+=1,this.#e=!0,this.#t[this.#a].cmd(),this.#e=!1)}hasSomethingToUndo(){return this.#a!==-1}hasSomethingToRedo(){return this.#a<this.#t.length-1}destroy(){this.#t=null}}o.CommandManager=d;class c{constructor(p){this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:S}=s.FeatureTest.platform;for(const[C,_,P={}]of p)for(const V of C){const H=V.startsWith("mac+");S&&H?(this.callbacks.set(V.slice(4),{callback:_,options:P}),this.allKeys.add(V.split("+").at(-1))):!S&&!H&&(this.callbacks.set(V,{callback:_,options:P}),this.allKeys.add(V.split("+").at(-1)))}}#t(p){p.altKey&&this.buffer.push("alt"),p.ctrlKey&&this.buffer.push("ctrl"),p.metaKey&&this.buffer.push("meta"),p.shiftKey&&this.buffer.push("shift"),this.buffer.push(p.key);const S=this.buffer.join("+");return this.buffer.length=0,S}exec(p,S){if(!this.allKeys.has(S.key))return;const C=this.callbacks.get(this.#t(S));if(!C)return;const{callback:_,options:{bubbles:P=!1,args:V=[],checker:H=null}}=C;H&&!H(p,S)||(_.bind(p,...V)(),P||(S.stopPropagation(),S.preventDefault()))}}o.KeyboardManager=c;class h{static _colorsMapping=new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]);get _colors(){const p=new Map([["CanvasText",null],["Canvas",null]]);return(0,y.getColorValues)(p),(0,s.shadow)(this,"_colors",p)}convert(p){const S=(0,y.getRGB)(p);if(!window.matchMedia("(forced-colors: active)").matches)return S;for(const[C,_]of this._colors)if(_.every((P,V)=>P===S[V]))return h._colorsMapping.get(C);return S}getHexCode(p){const S=this._colors.get(p);return S?s.Util.makeHexColor(...S):p}}o.ColorManager=h;class x{#t=null;#e=new Map;#n=new Map;#a=null;#o=null;#s=new d;#r=0;#l=new Set;#c=null;#i=null;#f=new Set;#d=null;#h=new G;#p=!1;#y=!1;#g=null;#m=s.AnnotationEditorType.NONE;#u=new Set;#b=null;#E=this.blur.bind(this);#A=this.focus.bind(this);#T=this.copy.bind(this);#C=this.cut.bind(this);#N=this.paste.bind(this);#P=this.keydown.bind(this);#L=this.onEditingAction.bind(this);#v=this.onPageChanging.bind(this);#O=this.onScaleChanging.bind(this);#k=this.onRotationChanging.bind(this);#M={isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1};#x=[0,0];#R=null;#S=null;#F=null;static TRANSLATE_SMALL=1;static TRANSLATE_BIG=10;static get _keyboardManager(){const p=x.prototype,S=P=>{const{activeElement:V}=document;return V&&P.#S.contains(V)&&P.hasSomethingToControl()},C=this.TRANSLATE_SMALL,_=this.TRANSLATE_BIG;return(0,s.shadow)(this,"_keyboardManager",new c([[["ctrl+a","mac+meta+a"],p.selectAll],[["ctrl+z","mac+meta+z"],p.undo],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],p.redo],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],p.delete],[["Escape","mac+Escape"],p.unselectAll],[["ArrowLeft","mac+ArrowLeft"],p.translateSelectedEditors,{args:[-C,0],checker:S}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],p.translateSelectedEditors,{args:[-_,0],checker:S}],[["ArrowRight","mac+ArrowRight"],p.translateSelectedEditors,{args:[C,0],checker:S}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],p.translateSelectedEditors,{args:[_,0],checker:S}],[["ArrowUp","mac+ArrowUp"],p.translateSelectedEditors,{args:[0,-C],checker:S}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],p.translateSelectedEditors,{args:[0,-_],checker:S}],[["ArrowDown","mac+ArrowDown"],p.translateSelectedEditors,{args:[0,C],checker:S}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],p.translateSelectedEditors,{args:[0,_],checker:S}]]))}constructor(p,S,C,_,P,V){this.#S=p,this.#F=S,this.#a=C,this._eventBus=_,this._eventBus._on("editingaction",this.#L),this._eventBus._on("pagechanging",this.#v),this._eventBus._on("scalechanging",this.#O),this._eventBus._on("rotationchanging",this.#k),this.#o=P.annotationStorage,this.#d=P.filterFactory,this.#b=V,this.viewParameters={realScale:y.PixelsPerInch.PDF_TO_CSS_UNITS,rotation:0}}destroy(){this.#j(),this.#I(),this._eventBus._off("editingaction",this.#L),this._eventBus._off("pagechanging",this.#v),this._eventBus._off("scalechanging",this.#O),this._eventBus._off("rotationchanging",this.#k);for(const p of this.#n.values())p.destroy();this.#n.clear(),this.#e.clear(),this.#f.clear(),this.#t=null,this.#u.clear(),this.#s.destroy(),this.#a.destroy()}get hcmFilter(){return(0,s.shadow)(this,"hcmFilter",this.#b?this.#d.addHCMFilter(this.#b.foreground,this.#b.background):"none")}get direction(){return(0,s.shadow)(this,"direction",getComputedStyle(this.#S).direction)}editAltText(p){this.#a?.editAltText(this,p)}onPageChanging({pageNumber:p}){this.#r=p-1}focusMainContainer(){this.#S.focus()}findParent(p,S){for(const C of this.#n.values()){const{x:_,y:P,width:V,height:H}=C.div.getBoundingClientRect();if(p>=_&&p<=_+V&&S>=P&&S<=P+H)return C}return null}disableUserSelect(p=!1){this.#F.classList.toggle("noUserSelect",p)}addShouldRescale(p){this.#f.add(p)}removeShouldRescale(p){this.#f.delete(p)}onScaleChanging({scale:p}){this.commitOrRemove(),this.viewParameters.realScale=p*y.PixelsPerInch.PDF_TO_CSS_UNITS;for(const S of this.#f)S.onScaleChanging()}onRotationChanging({pagesRotation:p}){this.commitOrRemove(),this.viewParameters.rotation=p}addToAnnotationStorage(p){!p.isEmpty()&&this.#o&&!this.#o.has(p.id)&&this.#o.setValue(p.id,p)}#z(){window.addEventListener("focus",this.#A),window.addEventListener("blur",this.#E)}#I(){window.removeEventListener("focus",this.#A),window.removeEventListener("blur",this.#E)}blur(){if(!this.hasSelection)return;const{activeElement:p}=document;for(const S of this.#u)if(S.div.contains(p)){this.#g=[S,p],S._focusEventsAllowed=!1;break}}focus(){if(!this.#g)return;const[p,S]=this.#g;this.#g=null,S.addEventListener("focusin",()=>{p._focusEventsAllowed=!0},{once:!0}),S.focus()}#q(){window.addEventListener("keydown",this.#P,{capture:!0})}#j(){window.removeEventListener("keydown",this.#P,{capture:!0})}#D(){document.addEventListener("copy",this.#T),document.addEventListener("cut",this.#C),document.addEventListener("paste",this.#N)}#w(){document.removeEventListener("copy",this.#T),document.removeEventListener("cut",this.#C),document.removeEventListener("paste",this.#N)}addEditListeners(){this.#q(),this.#D()}removeEditListeners(){this.#j(),this.#w()}copy(p){if(p.preventDefault(),this.#t?.commitOrRemove(),!this.hasSelection)return;const S=[];for(const C of this.#u){const _=C.serialize(!0);_&&S.push(_)}S.length!==0&&p.clipboardData.setData("application/pdfjs",JSON.stringify(S))}cut(p){this.copy(p),this.delete()}paste(p){p.preventDefault();const{clipboardData:S}=p;for(const P of S.items)for(const V of this.#i)if(V.isHandlingMimeForPasting(P.type)){V.paste(P,this.currentLayer);return}let C=S.getData("application/pdfjs");if(!C)return;try{C=JSON.parse(C)}catch(P){(0,s.warn)(`paste: "${P.message}".`);return}if(!Array.isArray(C))return;this.unselectAll();const _=this.currentLayer;try{const P=[];for(const k of C){const L=_.deserialize(k);if(!L)return;P.push(L)}const V=()=>{for(const k of P)this.#H(k);this.#G(P)},H=()=>{for(const k of P)k.remove()};this.addCommands({cmd:V,undo:H,mustExec:!0})}catch(P){(0,s.warn)(`paste: "${P.message}".`)}}keydown(p){this.getActive()?.shouldGetKeyboardEvents()||x._keyboardManager.exec(this,p)}onEditingAction(p){["undo","redo","delete","selectAll"].includes(p.name)&&this[p.name]()}#_(p){Object.entries(p).some(([C,_])=>this.#M[C]!==_)&&this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(this.#M,p)})}#B(p){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:p})}setEditingState(p){p?(this.#z(),this.#q(),this.#D(),this.#_({isEditing:this.#m!==s.AnnotationEditorType.NONE,isEmpty:this.#U(),hasSomethingToUndo:this.#s.hasSomethingToUndo(),hasSomethingToRedo:this.#s.hasSomethingToRedo(),hasSelectedEditor:!1})):(this.#I(),this.#j(),this.#w(),this.#_({isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(p){if(!this.#i){this.#i=p;for(const S of this.#i)this.#B(S.defaultPropertiesToUpdate)}}getId(){return this.#h.getId()}get currentLayer(){return this.#n.get(this.#r)}getLayer(p){return this.#n.get(p)}get currentPageIndex(){return this.#r}addLayer(p){this.#n.set(p.pageIndex,p),this.#p?p.enable():p.disable()}removeLayer(p){this.#n.delete(p.pageIndex)}updateMode(p,S=null){if(this.#m!==p){if(this.#m=p,p===s.AnnotationEditorType.NONE){this.setEditingState(!1),this.#K();return}this.setEditingState(!0),this.#Y(),this.unselectAll();for(const C of this.#n.values())C.updateMode(p);if(S){for(const C of this.#e.values())if(C.annotationElementId===S){this.setSelected(C),C.enterInEditMode();break}}}}updateToolbar(p){p!==this.#m&&this._eventBus.dispatch("switchannotationeditormode",{source:this,mode:p})}updateParams(p,S){if(this.#i){if(p===s.AnnotationEditorParamsType.CREATE){this.currentLayer.addNewEditor(p);return}for(const C of this.#u)C.updateParams(p,S);for(const C of this.#i)C.updateDefaultParams(p,S)}}enableWaiting(p=!1){if(this.#y!==p){this.#y=p;for(const S of this.#n.values())p?S.disableClick():S.enableClick(),S.div.classList.toggle("waiting",p)}}#Y(){if(!this.#p){this.#p=!0;for(const p of this.#n.values())p.enable()}}#K(){if(this.unselectAll(),this.#p){this.#p=!1;for(const p of this.#n.values())p.disable()}}getEditors(p){const S=[];for(const C of this.#e.values())C.pageIndex===p&&S.push(C);return S}getEditor(p){return this.#e.get(p)}addEditor(p){this.#e.set(p.id,p)}removeEditor(p){this.#e.delete(p.id),this.unselect(p),(!p.annotationElementId||!this.#l.has(p.annotationElementId))&&this.#o?.remove(p.id)}addDeletedAnnotationElement(p){this.#l.add(p.annotationElementId),p.deleted=!0}isDeletedAnnotationElement(p){return this.#l.has(p)}removeDeletedAnnotationElement(p){this.#l.delete(p.annotationElementId),p.deleted=!1}#H(p){const S=this.#n.get(p.pageIndex);S?S.addOrRebuild(p):this.addEditor(p)}setActiveEditor(p){this.#t!==p&&(this.#t=p,p&&this.#B(p.propertiesToUpdate))}toggleSelected(p){if(this.#u.has(p)){this.#u.delete(p),p.unselect(),this.#_({hasSelectedEditor:this.hasSelection});return}this.#u.add(p),p.select(),this.#B(p.propertiesToUpdate),this.#_({hasSelectedEditor:!0})}setSelected(p){for(const S of this.#u)S!==p&&S.unselect();this.#u.clear(),this.#u.add(p),p.select(),this.#B(p.propertiesToUpdate),this.#_({hasSelectedEditor:!0})}isSelected(p){return this.#u.has(p)}unselect(p){p.unselect(),this.#u.delete(p),this.#_({hasSelectedEditor:this.hasSelection})}get hasSelection(){return this.#u.size!==0}undo(){this.#s.undo(),this.#_({hasSomethingToUndo:this.#s.hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:this.#U()})}redo(){this.#s.redo(),this.#_({hasSomethingToUndo:!0,hasSomethingToRedo:this.#s.hasSomethingToRedo(),isEmpty:this.#U()})}addCommands(p){this.#s.add(p),this.#_({hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:this.#U()})}#U(){if(this.#e.size===0)return!0;if(this.#e.size===1)for(const p of this.#e.values())return p.isEmpty();return!1}delete(){if(this.commitOrRemove(),!this.hasSelection)return;const p=[...this.#u],S=()=>{for(const _ of p)_.remove()},C=()=>{for(const _ of p)this.#H(_)};this.addCommands({cmd:S,undo:C,mustExec:!0})}commitOrRemove(){this.#t?.commitOrRemove()}hasSomethingToControl(){return this.#t||this.hasSelection}#G(p){this.#u.clear();for(const S of p)S.isEmpty()||(this.#u.add(S),S.select());this.#_({hasSelectedEditor:!0})}selectAll(){for(const p of this.#u)p.commit();this.#G(this.#e.values())}unselectAll(){if(this.#t){this.#t.commitOrRemove();return}if(this.hasSelection){for(const p of this.#u)p.unselect();this.#u.clear(),this.#_({hasSelectedEditor:!1})}}translateSelectedEditors(p,S,C=!1){if(C||this.commitOrRemove(),!this.hasSelection)return;this.#x[0]+=p,this.#x[1]+=S;const[_,P]=this.#x,V=[...this.#u],H=1e3;this.#R&&clearTimeout(this.#R),this.#R=setTimeout(()=>{this.#R=null,this.#x[0]=this.#x[1]=0,this.addCommands({cmd:()=>{for(const k of V)this.#e.has(k.id)&&k.translateInPage(_,P)},undo:()=>{for(const k of V)this.#e.has(k.id)&&k.translateInPage(-_,-P)},mustExec:!1})},H);for(const k of V)k.translateInPage(p,S)}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),this.#c=new Map;for(const p of this.#u)this.#c.set(p,{savedX:p.x,savedY:p.y,savedPageIndex:p.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!this.#c)return!1;this.disableUserSelect(!1);const p=this.#c;this.#c=null;let S=!1;for(const[{x:_,y:P,pageIndex:V},H]of p)H.newX=_,H.newY=P,H.newPageIndex=V,S||=_!==H.savedX||P!==H.savedY||V!==H.savedPageIndex;if(!S)return!1;const C=(_,P,V,H)=>{if(this.#e.has(_.id)){const k=this.#n.get(H);k?_._setParentAndPosition(k,P,V):(_.pageIndex=H,_.x=P,_.y=V)}};return this.addCommands({cmd:()=>{for(const[_,{newX:P,newY:V,newPageIndex:H}]of p)C(_,P,V,H)},undo:()=>{for(const[_,{savedX:P,savedY:V,savedPageIndex:H}]of p)C(_,P,V,H)},mustExec:!0}),!0}dragSelectedEditors(p,S){if(this.#c)for(const C of this.#c.keys())C.drag(p,S)}rebuild(p){if(p.parent===null){const S=this.getLayer(p.pageIndex);S?(S.changeParent(p),S.addOrRebuild(p)):(this.addEditor(p),this.addToAnnotationStorage(p),p.rebuild())}else p.parent.addOrRebuild(p)}isActive(p){return this.#t===p}getActive(){return this.#t}getMode(){return this.#m}get imageManager(){return(0,s.shadow)(this,"imageManager",new q)}}o.AnnotationEditorUIManager=x}),((f,o,m)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.StatTimer=o.RenderingCancelledException=o.PixelsPerInch=o.PageViewport=o.PDFDateString=o.DOMStandardFontDataFactory=o.DOMSVGFactory=o.DOMFilterFactory=o.DOMCanvasFactory=o.DOMCMapReaderFactory=void 0,o.deprecated=J,o.getColorValues=Dt,o.getCurrentTransform=Mt,o.getCurrentTransformInverse=qt,o.getFilenameFromUrl=_,o.getPdfFilenameFromUrl=P,o.getRGB=yt,o.getXfaPageViewport=lt,o.isDataScheme=S,o.isPdfFile=C,o.isValidFetchUrl=H,o.loadScript=L,o.noContextMenu=k,o.setLayerDimensions=Yt;var s=m(7),y=m(1);const O="http://www.w3.org/2000/svg";class N{static CSS=96;static PDF=72;static PDF_TO_CSS_UNITS=this.CSS/this.PDF}o.PixelsPerInch=N;class G extends s.BaseFilterFactory{#t;#e;#n;#a;#o;#s;#r;#l;#c;#i;#f=0;constructor({docId:W,ownerDocument:D=globalThis.document}={}){super(),this.#n=W,this.#a=D}get#d(){return this.#t||=new Map}get#h(){if(!this.#e){const W=this.#a.createElement("div"),{style:D}=W;D.visibility="hidden",D.contain="strict",D.width=D.height=0,D.position="absolute",D.top=D.left=0,D.zIndex=-1;const T=this.#a.createElementNS(O,"svg");T.setAttribute("width",0),T.setAttribute("height",0),this.#e=this.#a.createElementNS(O,"defs"),W.append(T),T.append(this.#e),this.#a.body.append(W)}return this.#e}addFilter(W){if(!W)return"none";let D=this.#d.get(W);if(D)return D;let T,R,v,F;if(W.length===1){const b=W[0],j=new Array(256);for(let I=0;I<256;I++)j[I]=b[I]/255;F=T=R=v=j.join(",")}else{const[b,j,I]=W,Q=new Array(256),Y=new Array(256),at=new Array(256);for(let st=0;st<256;st++)Q[st]=b[st]/255,Y[st]=j[st]/255,at[st]=I[st]/255;T=Q.join(","),R=Y.join(","),v=at.join(","),F=`${T}${R}${v}`}if(D=this.#d.get(F),D)return this.#d.set(W,D),D;const U=`g_${this.#n}_transfer_map_${this.#f++}`,$=`url(#${U})`;this.#d.set(W,$),this.#d.set(F,$);const K=this.#y(U);return this.#m(T,R,v,K),$}addHCMFilter(W,D){const T=`${W}-${D}`;if(this.#s===T)return this.#r;if(this.#s=T,this.#r="none",this.#o?.remove(),!W||!D)return this.#r;const R=this.#u(W);W=y.Util.makeHexColor(...R);const v=this.#u(D);if(D=y.Util.makeHexColor(...v),this.#h.style.color="",W==="#000000"&&D==="#ffffff"||W===D)return this.#r;const F=new Array(256);for(let j=0;j<=255;j++){const I=j/255;F[j]=I<=.03928?I/12.92:((I+.055)/1.055)**2.4}const U=F.join(","),$=`g_${this.#n}_hcm_filter`,K=this.#l=this.#y($);this.#m(U,U,U,K),this.#p(K);const b=(j,I)=>{const Q=R[j]/255,Y=v[j]/255,at=new Array(I+1);for(let st=0;st<=I;st++)at[st]=Q+st/I*(Y-Q);return at.join(",")};return this.#m(b(0,5),b(1,5),b(2,5),K),this.#r=`url(#${$})`,this.#r}addHighlightHCMFilter(W,D,T,R){const v=`${W}-${D}-${T}-${R}`;if(this.#c===v)return this.#i;if(this.#c=v,this.#i="none",this.#l?.remove(),!W||!D)return this.#i;const[F,U]=[W,D].map(this.#u.bind(this));let $=Math.round(.2126*F[0]+.7152*F[1]+.0722*F[2]),K=Math.round(.2126*U[0]+.7152*U[1]+.0722*U[2]),[b,j]=[T,R].map(this.#u.bind(this));K<$&&([$,K,b,j]=[K,$,j,b]),this.#h.style.color="";const I=(at,st,Rt)=>{const Xt=new Array(256),wt=(K-$)/Rt,jt=at/255,Lt=(st-at)/(255*Rt);let Pt=0;for(let Bt=0;Bt<=Rt;Bt++){const Qt=Math.round($+Bt*wt),$t=jt+Bt*Lt;for(let ie=Pt;ie<=Qt;ie++)Xt[ie]=$t;Pt=Qt+1}for(let Bt=Pt;Bt<256;Bt++)Xt[Bt]=Xt[Pt-1];return Xt.join(",")},Q=`g_${this.#n}_hcm_highlight_filter`,Y=this.#l=this.#y(Q);return this.#p(Y),this.#m(I(b[0],j[0],5),I(b[1],j[1],5),I(b[2],j[2],5),Y),this.#i=`url(#${Q})`,this.#i}destroy(W=!1){W&&(this.#r||this.#i)||(this.#e&&(this.#e.parentNode.parentNode.remove(),this.#e=null),this.#t&&(this.#t.clear(),this.#t=null),this.#f=0)}#p(W){const D=this.#a.createElementNS(O,"feColorMatrix");D.setAttribute("type","matrix"),D.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),W.append(D)}#y(W){const D=this.#a.createElementNS(O,"filter");return D.setAttribute("color-interpolation-filters","sRGB"),D.setAttribute("id",W),this.#h.append(D),D}#g(W,D,T){const R=this.#a.createElementNS(O,D);R.setAttribute("type","discrete"),R.setAttribute("tableValues",T),W.append(R)}#m(W,D,T,R){const v=this.#a.createElementNS(O,"feComponentTransfer");R.append(v),this.#g(v,"feFuncR",W),this.#g(v,"feFuncG",D),this.#g(v,"feFuncB",T)}#u(W){return this.#h.style.color=W,yt(getComputedStyle(this.#h).getPropertyValue("color"))}}o.DOMFilterFactory=G;class q extends s.BaseCanvasFactory{constructor({ownerDocument:W=globalThis.document}={}){super(),this._document=W}_createCanvas(W,D){const T=this._document.createElement("canvas");return T.width=W,T.height=D,T}}o.DOMCanvasFactory=q;async function d(nt,W=!1){if(H(nt,document.baseURI)){const D=await fetch(nt);if(!D.ok)throw new Error(D.statusText);return W?new Uint8Array(await D.arrayBuffer()):(0,y.stringToBytes)(await D.text())}return new Promise((D,T)=>{const R=new XMLHttpRequest;R.open("GET",nt,!0),W&&(R.responseType="arraybuffer"),R.onreadystatechange=()=>{if(R.readyState===XMLHttpRequest.DONE){if(R.status===200||R.status===0){let v;if(W&&R.response?v=new Uint8Array(R.response):!W&&R.responseText&&(v=(0,y.stringToBytes)(R.responseText)),v){D(v);return}}T(new Error(R.statusText))}},R.send(null)})}class c extends s.BaseCMapReaderFactory{_fetchData(W,D){return d(W,this.isCompressed).then(T=>({cMapData:T,compressionType:D}))}}o.DOMCMapReaderFactory=c;class h extends s.BaseStandardFontDataFactory{_fetchData(W){return d(W,!0)}}o.DOMStandardFontDataFactory=h;class x extends s.BaseSVGFactory{_createSVG(W){return document.createElementNS(O,W)}}o.DOMSVGFactory=x;class E{constructor({viewBox:W,scale:D,rotation:T,offsetX:R=0,offsetY:v=0,dontFlip:F=!1}){this.viewBox=W,this.scale=D,this.rotation=T,this.offsetX=R,this.offsetY=v;const U=(W[2]+W[0])/2,$=(W[3]+W[1])/2;let K,b,j,I;switch(T%=360,T<0&&(T+=360),T){case 180:K=-1,b=0,j=0,I=1;break;case 90:K=0,b=1,j=1,I=0;break;case 270:K=0,b=-1,j=-1,I=0;break;case 0:K=1,b=0,j=0,I=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}F&&(j=-j,I=-I);let Q,Y,at,st;K===0?(Q=Math.abs($-W[1])*D+R,Y=Math.abs(U-W[0])*D+v,at=(W[3]-W[1])*D,st=(W[2]-W[0])*D):(Q=Math.abs(U-W[0])*D+R,Y=Math.abs($-W[1])*D+v,at=(W[2]-W[0])*D,st=(W[3]-W[1])*D),this.transform=[K*D,b*D,j*D,I*D,Q-K*D*U-j*D*$,Y-b*D*U-I*D*$],this.width=at,this.height=st}get rawDims(){const{viewBox:W}=this;return(0,y.shadow)(this,"rawDims",{pageWidth:W[2]-W[0],pageHeight:W[3]-W[1],pageX:W[0],pageY:W[1]})}clone({scale:W=this.scale,rotation:D=this.rotation,offsetX:T=this.offsetX,offsetY:R=this.offsetY,dontFlip:v=!1}={}){return new E({viewBox:this.viewBox.slice(),scale:W,rotation:D,offsetX:T,offsetY:R,dontFlip:v})}convertToViewportPoint(W,D){return y.Util.applyTransform([W,D],this.transform)}convertToViewportRectangle(W){const D=y.Util.applyTransform([W[0],W[1]],this.transform),T=y.Util.applyTransform([W[2],W[3]],this.transform);return[D[0],D[1],T[0],T[1]]}convertToPdfPoint(W,D){return y.Util.applyInverseTransform([W,D],this.transform)}}o.PageViewport=E;class p extends y.BaseException{constructor(W,D=0){super(W,"RenderingCancelledException"),this.extraDelay=D}}o.RenderingCancelledException=p;function S(nt){const W=nt.length;let D=0;for(;D<W&&nt[D].trim()==="";)D++;return nt.substring(D,D+5).toLowerCase()==="data:"}function C(nt){return typeof nt=="string"&&/\.pdf$/i.test(nt)}function _(nt,W=!1){return W||([nt]=nt.split(/[#?]/,1)),nt.substring(nt.lastIndexOf("/")+1)}function P(nt,W="document.pdf"){if(typeof nt!="string")return W;if(S(nt))return(0,y.warn)('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),W;const D=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,T=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,R=D.exec(nt);let v=T.exec(R[1])||T.exec(R[2])||T.exec(R[3]);if(v&&(v=v[0],v.includes("%")))try{v=T.exec(decodeURIComponent(v))[0]}catch{}return v||W}class V{started=Object.create(null);times=[];time(W){W in this.started&&(0,y.warn)(`Timer is already running for ${W}`),this.started[W]=Date.now()}timeEnd(W){W in this.started||(0,y.warn)(`Timer has not been started for ${W}`),this.times.push({name:W,start:this.started[W],end:Date.now()}),delete this.started[W]}toString(){const W=[];let D=0;for(const{name:T}of this.times)D=Math.max(T.length,D);for(const{name:T,start:R,end:v}of this.times)W.push(`${T.padEnd(D)} ${v-R}ms
`);return W.join("")}}o.StatTimer=V;function H(nt,W){try{const{protocol:D}=W?new URL(nt,W):new URL(nt);return D==="http:"||D==="https:"}catch{return!1}}function k(nt){nt.preventDefault()}function L(nt,W=!1){return new Promise((D,T)=>{const R=document.createElement("script");R.src=nt,R.onload=function(v){W&&R.remove(),D(v)},R.onerror=function(){T(new Error(`Cannot load script at: ${R.src}`))},(document.head||document.documentElement).append(R)})}function J(nt){console.log("Deprecated API usage: "+nt)}let rt;class et{static toDateObject(W){if(!W||typeof W!="string")return null;rt||=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?");const D=rt.exec(W);if(!D)return null;const T=parseInt(D[1],10);let R=parseInt(D[2],10);R=R>=1&&R<=12?R-1:0;let v=parseInt(D[3],10);v=v>=1&&v<=31?v:1;let F=parseInt(D[4],10);F=F>=0&&F<=23?F:0;let U=parseInt(D[5],10);U=U>=0&&U<=59?U:0;let $=parseInt(D[6],10);$=$>=0&&$<=59?$:0;const K=D[7]||"Z";let b=parseInt(D[8],10);b=b>=0&&b<=23?b:0;let j=parseInt(D[9],10)||0;return j=j>=0&&j<=59?j:0,K==="-"?(F+=b,U+=j):K==="+"&&(F-=b,U-=j),new Date(Date.UTC(T,R,v,F,U,$))}}o.PDFDateString=et;function lt(nt,{scale:W=1,rotation:D=0}){const{width:T,height:R}=nt.attributes.style,v=[0,0,parseInt(T),parseInt(R)];return new E({viewBox:v,scale:W,rotation:D})}function yt(nt){if(nt.startsWith("#")){const W=parseInt(nt.slice(1),16);return[(W&16711680)>>16,(W&65280)>>8,W&255]}return nt.startsWith("rgb(")?nt.slice(4,-1).split(",").map(W=>parseInt(W)):nt.startsWith("rgba(")?nt.slice(5,-1).split(",").map(W=>parseInt(W)).slice(0,3):((0,y.warn)(`Not a valid color format: "${nt}"`),[0,0,0])}function Dt(nt){const W=document.createElement("span");W.style.visibility="hidden",document.body.append(W);for(const D of nt.keys()){W.style.color=D;const T=window.getComputedStyle(W).color;nt.set(D,yt(T))}W.remove()}function Mt(nt){const{a:W,b:D,c:T,d:R,e:v,f:F}=nt.getTransform();return[W,D,T,R,v,F]}function qt(nt){const{a:W,b:D,c:T,d:R,e:v,f:F}=nt.getTransform().invertSelf();return[W,D,T,R,v,F]}function Yt(nt,W,D=!1,T=!0){if(W instanceof E){const{pageWidth:R,pageHeight:v}=W.rawDims,{style:F}=nt,U=y.FeatureTest.isCSSRoundSupported,$=`var(--scale-factor) * ${R}px`,K=`var(--scale-factor) * ${v}px`,b=U?`round(${$}, 1px)`:`calc(${$})`,j=U?`round(${K}, 1px)`:`calc(${K})`;!D||W.rotation%180===0?(F.width=b,F.height=j):(F.width=j,F.height=b)}T&&nt.setAttribute("data-main-rotation",W.rotation)}}),((f,o,m)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.BaseStandardFontDataFactory=o.BaseSVGFactory=o.BaseFilterFactory=o.BaseCanvasFactory=o.BaseCMapReaderFactory=void 0;var s=m(1);class y{constructor(){this.constructor===y&&(0,s.unreachable)("Cannot initialize BaseFilterFactory.")}addFilter(c){return"none"}addHCMFilter(c,h){return"none"}addHighlightHCMFilter(c,h,x,E){return"none"}destroy(c=!1){}}o.BaseFilterFactory=y;class O{constructor(){this.constructor===O&&(0,s.unreachable)("Cannot initialize BaseCanvasFactory.")}create(c,h){if(c<=0||h<=0)throw new Error("Invalid canvas size");const x=this._createCanvas(c,h);return{canvas:x,context:x.getContext("2d")}}reset(c,h,x){if(!c.canvas)throw new Error("Canvas is not specified");if(h<=0||x<=0)throw new Error("Invalid canvas size");c.canvas.width=h,c.canvas.height=x}destroy(c){if(!c.canvas)throw new Error("Canvas is not specified");c.canvas.width=0,c.canvas.height=0,c.canvas=null,c.context=null}_createCanvas(c,h){(0,s.unreachable)("Abstract method `_createCanvas` called.")}}o.BaseCanvasFactory=O;class N{constructor({baseUrl:c=null,isCompressed:h=!0}){this.constructor===N&&(0,s.unreachable)("Cannot initialize BaseCMapReaderFactory."),this.baseUrl=c,this.isCompressed=h}async fetch({name:c}){if(!this.baseUrl)throw new Error('The CMap "baseUrl" parameter must be specified, ensure that the "cMapUrl" and "cMapPacked" API parameters are provided.');if(!c)throw new Error("CMap name must be specified.");const h=this.baseUrl+c+(this.isCompressed?".bcmap":""),x=this.isCompressed?s.CMapCompressionType.BINARY:s.CMapCompressionType.NONE;return this._fetchData(h,x).catch(E=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${h}`)})}_fetchData(c,h){(0,s.unreachable)("Abstract method `_fetchData` called.")}}o.BaseCMapReaderFactory=N;class G{constructor({baseUrl:c=null}){this.constructor===G&&(0,s.unreachable)("Cannot initialize BaseStandardFontDataFactory."),this.baseUrl=c}async fetch({filename:c}){if(!this.baseUrl)throw new Error('The standard font "baseUrl" parameter must be specified, ensure that the "standardFontDataUrl" API parameter is provided.');if(!c)throw new Error("Font filename must be specified.");const h=`${this.baseUrl}${c}`;return this._fetchData(h).catch(x=>{throw new Error(`Unable to load font data at: ${h}`)})}_fetchData(c){(0,s.unreachable)("Abstract method `_fetchData` called.")}}o.BaseStandardFontDataFactory=G;class q{constructor(){this.constructor===q&&(0,s.unreachable)("Cannot initialize BaseSVGFactory.")}create(c,h,x=!1){if(c<=0||h<=0)throw new Error("Invalid SVG dimensions");const E=this._createSVG("svg:svg");return E.setAttribute("version","1.1"),x||(E.setAttribute("width",`${c}px`),E.setAttribute("height",`${h}px`)),E.setAttribute("preserveAspectRatio","none"),E.setAttribute("viewBox",`0 0 ${c} ${h}`),E}createElement(c){if(typeof c!="string")throw new Error("Invalid SVG element type");return this._createSVG(c)}_createSVG(c){(0,s.unreachable)("Abstract method `_createSVG` called.")}}o.BaseSVGFactory=q}),((f,o,m)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.MurmurHash3_64=void 0;var s=m(1);const y=3285377520,O=4294901760,N=65535;class G{constructor(d){this.h1=d?d&4294967295:y,this.h2=d?d&4294967295:y}update(d){let c,h;if(typeof d=="string"){c=new Uint8Array(d.length*2),h=0;for(let J=0,rt=d.length;J<rt;J++){const et=d.charCodeAt(J);et<=255?c[h++]=et:(c[h++]=et>>>8,c[h++]=et&255)}}else if((0,s.isArrayBuffer)(d))c=d.slice(),h=c.byteLength;else throw new Error("Wrong data format in MurmurHash3_64_update. Input must be a string or array.");const x=h>>2,E=h-x*4,p=new Uint32Array(c.buffer,0,x);let S=0,C=0,_=this.h1,P=this.h2;const V=3432918353,H=461845907,k=V&N,L=H&N;for(let J=0;J<x;J++)J&1?(S=p[J],S=S*V&O|S*k&N,S=S<<15|S>>>17,S=S*H&O|S*L&N,_^=S,_=_<<13|_>>>19,_=_*5+3864292196):(C=p[J],C=C*V&O|C*k&N,C=C<<15|C>>>17,C=C*H&O|C*L&N,P^=C,P=P<<13|P>>>19,P=P*5+3864292196);switch(S=0,E){case 3:S^=c[x*4+2]<<16;case 2:S^=c[x*4+1]<<8;case 1:S^=c[x*4],S=S*V&O|S*k&N,S=S<<15|S>>>17,S=S*H&O|S*L&N,x&1?_^=S:P^=S}this.h1=_,this.h2=P}hexdigest(){let d=this.h1,c=this.h2;return d^=c>>>1,d=d*3981806797&O|d*36045&N,c=c*4283543511&O|((c<<16|d>>>16)*2950163797&O)>>>16,d^=c>>>1,d=d*444984403&O|d*60499&N,c=c*3301882366&O|((c<<16|d>>>16)*3120437893&O)>>>16,d^=c>>>1,(d>>>0).toString(16).padStart(8,"0")+(c>>>0).toString(16).padStart(8,"0")}}o.MurmurHash3_64=G}),((f,o,m)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.FontLoader=o.FontFaceObject=void 0;var s=m(1);class y{#t=new Set;constructor({ownerDocument:G=globalThis.document,styleElement:q=null}){this._document=G,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(G){this.nativeFontFaces.add(G),this._document.fonts.add(G)}removeNativeFontFace(G){this.nativeFontFaces.delete(G),this._document.fonts.delete(G)}insertRule(G){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const q=this.styleElement.sheet;q.insertRule(G,q.cssRules.length)}clear(){for(const G of this.nativeFontFaces)this._document.fonts.delete(G);this.nativeFontFaces.clear(),this.#t.clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont(G){if(!(!G||this.#t.has(G.loadedName))){if((0,s.assert)(!this.disableFontFace,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:q,src:d,style:c}=G,h=new FontFace(q,d,c);this.addNativeFontFace(h);try{await h.load(),this.#t.add(q)}catch{(0,s.warn)(`Cannot load system font: ${G.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(h)}return}(0,s.unreachable)("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(G){if(G.attached||G.missingFile&&!G.systemFontInfo)return;if(G.attached=!0,G.systemFontInfo){await this.loadSystemFont(G.systemFontInfo);return}if(this.isFontLoadingAPISupported){const d=G.createNativeFontFace();if(d){this.addNativeFontFace(d);try{await d.loaded}catch(c){throw(0,s.warn)(`Failed to load font '${d.family}': '${c}'.`),G.disableFontFace=!0,c}}return}const q=G.createFontFaceRule();if(q){if(this.insertRule(q),this.isSyncFontLoadingSupported)return;await new Promise(d=>{const c=this._queueLoadingCallback(d);this._prepareFontLoadEvent(G,c)})}}get isFontLoadingAPISupported(){const G=!!this._document?.fonts;return(0,s.shadow)(this,"isFontLoadingAPISupported",G)}get isSyncFontLoadingSupported(){let G=!1;return(s.isNodeJS||typeof navigator<"u"&&/Mozilla\/5.0.*?rv:\d+.*? Gecko/.test(navigator.userAgent))&&(G=!0),(0,s.shadow)(this,"isSyncFontLoadingSupported",G)}_queueLoadingCallback(G){function q(){for((0,s.assert)(!c.done,"completeRequest() cannot be called twice."),c.done=!0;d.length>0&&d[0].done;){const h=d.shift();setTimeout(h.callback,0)}}const{loadingRequests:d}=this,c={done:!1,complete:q,callback:G};return d.push(c),c}get _loadTestFont(){const G=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return(0,s.shadow)(this,"_loadTestFont",G)}_prepareFontLoadEvent(G,q){function d(lt,yt){return lt.charCodeAt(yt)<<24|lt.charCodeAt(yt+1)<<16|lt.charCodeAt(yt+2)<<8|lt.charCodeAt(yt+3)&255}function c(lt,yt,Dt,Mt){const qt=lt.substring(0,yt),Yt=lt.substring(yt+Dt);return qt+Mt+Yt}let h,x;const E=this._document.createElement("canvas");E.width=1,E.height=1;const p=E.getContext("2d");let S=0;function C(lt,yt){if(++S>30){(0,s.warn)("Load test font never loaded."),yt();return}if(p.font="30px "+lt,p.fillText(".",0,20),p.getImageData(0,0,1,1).data[3]>0){yt();return}setTimeout(C.bind(null,lt,yt))}const _=`lt${Date.now()}${this.loadTestFontId++}`;let P=this._loadTestFont;P=c(P,976,_.length,_);const H=16,k=1482184792;let L=d(P,H);for(h=0,x=_.length-3;h<x;h+=4)L=L-k+d(_,h)|0;h<_.length&&(L=L-k+d(_+"XXX",h)|0),P=c(P,H,4,(0,s.string32)(L));const J=`url(data:font/opentype;base64,${btoa(P)});`,rt=`@font-face {font-family:"${_}";src:${J}}`;this.insertRule(rt);const et=this._document.createElement("div");et.style.visibility="hidden",et.style.width=et.style.height="10px",et.style.position="absolute",et.style.top=et.style.left="0px";for(const lt of[G.loadedName,_]){const yt=this._document.createElement("span");yt.textContent="Hi",yt.style.fontFamily=lt,et.append(yt)}this._document.body.append(et),C(_,()=>{et.remove(),q.complete()})}}o.FontLoader=y;class O{constructor(G,{isEvalSupported:q=!0,disableFontFace:d=!1,ignoreErrors:c=!1,inspectFont:h=null}){this.compiledGlyphs=Object.create(null);for(const x in G)this[x]=G[x];this.isEvalSupported=q!==!1,this.disableFontFace=d===!0,this.ignoreErrors=c===!0,this._inspectFont=h}createNativeFontFace(){if(!this.data||this.disableFontFace)return null;let G;if(!this.cssFontInfo)G=new FontFace(this.loadedName,this.data,{});else{const q={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(q.style=`oblique ${this.cssFontInfo.italicAngle}deg`),G=new FontFace(this.cssFontInfo.fontFamily,this.data,q)}return this._inspectFont?.(this),G}createFontFaceRule(){if(!this.data||this.disableFontFace)return null;const G=(0,s.bytesToString)(this.data),q=`url(data:${this.mimetype};base64,${btoa(G)});`;let d;if(!this.cssFontInfo)d=`@font-face {font-family:"${this.loadedName}";src:${q}}`;else{let c=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(c+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),d=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${c}src:${q}}`}return this._inspectFont?.(this,q),d}getPathGenerator(G,q){if(this.compiledGlyphs[q]!==void 0)return this.compiledGlyphs[q];let d;try{d=G.get(this.loadedName+"_path_"+q)}catch(c){if(!this.ignoreErrors)throw c;return(0,s.warn)(`getPathGenerator - ignoring character: "${c}".`),this.compiledGlyphs[q]=function(h,x){}}if(this.isEvalSupported&&s.FeatureTest.isEvalSupported){const c=[];for(const h of d){const x=h.args!==void 0?h.args.join(","):"";c.push("c.",h.cmd,"(",x,`);
`)}return this.compiledGlyphs[q]=new Function("c","size",c.join(""))}return this.compiledGlyphs[q]=function(c,h){for(const x of d)x.cmd==="scale"&&(x.args=[h,-h]),c[x.cmd].apply(c,x.args)}}}o.FontFaceObject=O}),((f,o,m)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.NodeStandardFontDataFactory=o.NodeFilterFactory=o.NodeCanvasFactory=o.NodeCMapReaderFactory=void 0;var s=m(7);m(1);const y=function(d){return new Promise((c,h)=>{require$$5.readFile(d,(E,p)=>{if(E||!p){h(new Error(E));return}c(new Uint8Array(p))})})};class O extends s.BaseFilterFactory{}o.NodeFilterFactory=O;class N extends s.BaseCanvasFactory{_createCanvas(c,h){return require$$5.createCanvas(c,h)}}o.NodeCanvasFactory=N;class G extends s.BaseCMapReaderFactory{_fetchData(c,h){return y(c).then(x=>({cMapData:x,compressionType:h}))}}o.NodeCMapReaderFactory=G;class q extends s.BaseStandardFontDataFactory{_fetchData(c){return y(c)}}o.NodeStandardFontDataFactory=q}),((f,o,m)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.CanvasGraphics=void 0;var s=m(1),y=m(6),O=m(12),N=m(13);const G=16,q=100,d=4096,c=15,h=10,x=1e3,E=16;function p(D,T){if(D._removeMirroring)throw new Error("Context is already forwarding operations.");D.__originalSave=D.save,D.__originalRestore=D.restore,D.__originalRotate=D.rotate,D.__originalScale=D.scale,D.__originalTranslate=D.translate,D.__originalTransform=D.transform,D.__originalSetTransform=D.setTransform,D.__originalResetTransform=D.resetTransform,D.__originalClip=D.clip,D.__originalMoveTo=D.moveTo,D.__originalLineTo=D.lineTo,D.__originalBezierCurveTo=D.bezierCurveTo,D.__originalRect=D.rect,D.__originalClosePath=D.closePath,D.__originalBeginPath=D.beginPath,D._removeMirroring=()=>{D.save=D.__originalSave,D.restore=D.__originalRestore,D.rotate=D.__originalRotate,D.scale=D.__originalScale,D.translate=D.__originalTranslate,D.transform=D.__originalTransform,D.setTransform=D.__originalSetTransform,D.resetTransform=D.__originalResetTransform,D.clip=D.__originalClip,D.moveTo=D.__originalMoveTo,D.lineTo=D.__originalLineTo,D.bezierCurveTo=D.__originalBezierCurveTo,D.rect=D.__originalRect,D.closePath=D.__originalClosePath,D.beginPath=D.__originalBeginPath,delete D._removeMirroring},D.save=function(){T.save(),this.__originalSave()},D.restore=function(){T.restore(),this.__originalRestore()},D.translate=function(v,F){T.translate(v,F),this.__originalTranslate(v,F)},D.scale=function(v,F){T.scale(v,F),this.__originalScale(v,F)},D.transform=function(v,F,U,$,K,b){T.transform(v,F,U,$,K,b),this.__originalTransform(v,F,U,$,K,b)},D.setTransform=function(v,F,U,$,K,b){T.setTransform(v,F,U,$,K,b),this.__originalSetTransform(v,F,U,$,K,b)},D.resetTransform=function(){T.resetTransform(),this.__originalResetTransform()},D.rotate=function(v){T.rotate(v),this.__originalRotate(v)},D.clip=function(v){T.clip(v),this.__originalClip(v)},D.moveTo=function(R,v){T.moveTo(R,v),this.__originalMoveTo(R,v)},D.lineTo=function(R,v){T.lineTo(R,v),this.__originalLineTo(R,v)},D.bezierCurveTo=function(R,v,F,U,$,K){T.bezierCurveTo(R,v,F,U,$,K),this.__originalBezierCurveTo(R,v,F,U,$,K)},D.rect=function(R,v,F,U){T.rect(R,v,F,U),this.__originalRect(R,v,F,U)},D.closePath=function(){T.closePath(),this.__originalClosePath()},D.beginPath=function(){T.beginPath(),this.__originalBeginPath()}}class S{constructor(T){this.canvasFactory=T,this.cache=Object.create(null)}getCanvas(T,R,v){let F;return this.cache[T]!==void 0?(F=this.cache[T],this.canvasFactory.reset(F,R,v)):(F=this.canvasFactory.create(R,v),this.cache[T]=F),F}delete(T){delete this.cache[T]}clear(){for(const T in this.cache){const R=this.cache[T];this.canvasFactory.destroy(R),delete this.cache[T]}}}function C(D,T,R,v,F,U,$,K,b,j){const[I,Q,Y,at,st,Rt]=(0,y.getCurrentTransform)(D);if(Q===0&&Y===0){const jt=$*I+st,Lt=Math.round(jt),Pt=K*at+Rt,Bt=Math.round(Pt),Qt=($+b)*I+st,$t=Math.abs(Math.round(Qt)-Lt)||1,ie=(K+j)*at+Rt,le=Math.abs(Math.round(ie)-Bt)||1;return D.setTransform(Math.sign(I),0,0,Math.sign(at),Lt,Bt),D.drawImage(T,R,v,F,U,0,0,$t,le),D.setTransform(I,Q,Y,at,st,Rt),[$t,le]}if(I===0&&at===0){const jt=K*Y+st,Lt=Math.round(jt),Pt=$*Q+Rt,Bt=Math.round(Pt),Qt=(K+j)*Y+st,$t=Math.abs(Math.round(Qt)-Lt)||1,ie=($+b)*Q+Rt,le=Math.abs(Math.round(ie)-Bt)||1;return D.setTransform(0,Math.sign(Q),Math.sign(Y),0,Lt,Bt),D.drawImage(T,R,v,F,U,0,0,le,$t),D.setTransform(I,Q,Y,at,st,Rt),[le,$t]}D.drawImage(T,R,v,F,U,$,K,b,j);const Xt=Math.hypot(I,Q),wt=Math.hypot(Y,at);return[Xt*b,wt*j]}function _(D){const{width:T,height:R}=D;if(T>x||R>x)return null;const v=1e3,F=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),U=T+1;let $=new Uint8Array(U*(R+1)),K,b,j;const I=T+7&-8;let Q=new Uint8Array(I*R),Y=0;for(const wt of D.data){let jt=128;for(;jt>0;)Q[Y++]=wt&jt?0:255,jt>>=1}let at=0;for(Y=0,Q[Y]!==0&&($[0]=1,++at),b=1;b<T;b++)Q[Y]!==Q[Y+1]&&($[b]=Q[Y]?2:1,++at),Y++;for(Q[Y]!==0&&($[b]=2,++at),K=1;K<R;K++){Y=K*I,j=K*U,Q[Y-I]!==Q[Y]&&($[j]=Q[Y]?1:8,++at);let wt=(Q[Y]?4:0)+(Q[Y-I]?8:0);for(b=1;b<T;b++)wt=(wt>>2)+(Q[Y+1]?4:0)+(Q[Y-I+1]?8:0),F[wt]&&($[j+b]=F[wt],++at),Y++;if(Q[Y-I]!==Q[Y]&&($[j+b]=Q[Y]?2:4,++at),at>v)return null}for(Y=I*(R-1),j=K*U,Q[Y]!==0&&($[j]=8,++at),b=1;b<T;b++)Q[Y]!==Q[Y+1]&&($[j+b]=Q[Y]?4:8,++at),Y++;if(Q[Y]!==0&&($[j+b]=4,++at),at>v)return null;const st=new Int32Array([0,U,-1,0,-U,0,0,0,1]),Rt=new Path2D;for(K=0;at&&K<=R;K++){let wt=K*U;const jt=wt+T;for(;wt<jt&&!$[wt];)wt++;if(wt===jt)continue;Rt.moveTo(wt%U,K);const Lt=wt;let Pt=$[wt];do{const Bt=st[Pt];do wt+=Bt;while(!$[wt]);const Qt=$[wt];Qt!==5&&Qt!==10?(Pt=Qt,$[wt]=0):(Pt=Qt&51*Pt>>4,$[wt]&=Pt>>2|Pt<<2),Rt.lineTo(wt%U,wt/U|0),$[wt]||--at}while(Lt!==wt);--K}return Q=null,$=null,function(wt){wt.save(),wt.scale(1/T,-1/R),wt.translate(0,-R),wt.fill(Rt),wt.beginPath(),wt.restore()}}class P{constructor(T,R){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=s.IDENTITY_MATRIX,this.textMatrixScale=1,this.fontMatrix=s.FONT_IDENTITY_MATRIX,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=s.TextRenderingMode.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps="none",this.startNewPathAndClipBox([0,0,T,R])}clone(){const T=Object.create(this);return T.clipBox=this.clipBox.slice(),T}setCurrentPoint(T,R){this.x=T,this.y=R}updatePathMinMax(T,R,v){[R,v]=s.Util.applyTransform([R,v],T),this.minX=Math.min(this.minX,R),this.minY=Math.min(this.minY,v),this.maxX=Math.max(this.maxX,R),this.maxY=Math.max(this.maxY,v)}updateRectMinMax(T,R){const v=s.Util.applyTransform(R,T),F=s.Util.applyTransform(R.slice(2),T);this.minX=Math.min(this.minX,v[0],F[0]),this.minY=Math.min(this.minY,v[1],F[1]),this.maxX=Math.max(this.maxX,v[0],F[0]),this.maxY=Math.max(this.maxY,v[1],F[1])}updateScalingPathMinMax(T,R){s.Util.scaleMinMax(T,R),this.minX=Math.min(this.minX,R[0]),this.maxX=Math.max(this.maxX,R[1]),this.minY=Math.min(this.minY,R[2]),this.maxY=Math.max(this.maxY,R[3])}updateCurvePathMinMax(T,R,v,F,U,$,K,b,j,I){const Q=s.Util.bezierBoundingBox(R,v,F,U,$,K,b,j);if(I){I[0]=Math.min(I[0],Q[0],Q[2]),I[1]=Math.max(I[1],Q[0],Q[2]),I[2]=Math.min(I[2],Q[1],Q[3]),I[3]=Math.max(I[3],Q[1],Q[3]);return}this.updateRectMinMax(T,Q)}getPathBoundingBox(T=O.PathType.FILL,R=null){const v=[this.minX,this.minY,this.maxX,this.maxY];if(T===O.PathType.STROKE){R||(0,s.unreachable)("Stroke bounding box must include transform.");const F=s.Util.singularValueDecompose2dScale(R),U=F[0]*this.lineWidth/2,$=F[1]*this.lineWidth/2;v[0]-=U,v[1]-=$,v[2]+=U,v[3]+=$}return v}updateClipFromPath(){const T=s.Util.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(T||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(T){this.clipBox=T,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(T=O.PathType.FILL,R=null){return s.Util.intersect(this.clipBox,this.getPathBoundingBox(T,R))}}function V(D,T){if(typeof ImageData<"u"&&T instanceof ImageData){D.putImageData(T,0,0);return}const R=T.height,v=T.width,F=R%E,U=(R-F)/E,$=F===0?U:U+1,K=D.createImageData(v,E);let b=0,j;const I=T.data,Q=K.data;let Y,at,st,Rt;if(T.kind===s.ImageKind.GRAYSCALE_1BPP){const Xt=I.byteLength,wt=new Uint32Array(Q.buffer,0,Q.byteLength>>2),jt=wt.length,Lt=v+7>>3,Pt=4294967295,Bt=s.FeatureTest.isLittleEndian?4278190080:255;for(Y=0;Y<$;Y++){for(st=Y<U?E:F,j=0,at=0;at<st;at++){const Qt=Xt-b;let $t=0;const ie=Qt>Lt?v:Qt*8-7,le=ie&-8;let oe=0,_e=0;for(;$t<le;$t+=8)_e=I[b++],wt[j++]=_e&128?Pt:Bt,wt[j++]=_e&64?Pt:Bt,wt[j++]=_e&32?Pt:Bt,wt[j++]=_e&16?Pt:Bt,wt[j++]=_e&8?Pt:Bt,wt[j++]=_e&4?Pt:Bt,wt[j++]=_e&2?Pt:Bt,wt[j++]=_e&1?Pt:Bt;for(;$t<ie;$t++)oe===0&&(_e=I[b++],oe=128),wt[j++]=_e&oe?Pt:Bt,oe>>=1}for(;j<jt;)wt[j++]=0;D.putImageData(K,0,Y*E)}}else if(T.kind===s.ImageKind.RGBA_32BPP){for(at=0,Rt=v*E*4,Y=0;Y<U;Y++)Q.set(I.subarray(b,b+Rt)),b+=Rt,D.putImageData(K,0,at),at+=E;Y<$&&(Rt=v*F*4,Q.set(I.subarray(b,b+Rt)),D.putImageData(K,0,at))}else if(T.kind===s.ImageKind.RGB_24BPP)for(st=E,Rt=v*st,Y=0;Y<$;Y++){for(Y>=U&&(st=F,Rt=v*st),j=0,at=Rt;at--;)Q[j++]=I[b++],Q[j++]=I[b++],Q[j++]=I[b++],Q[j++]=255;D.putImageData(K,0,Y*E)}else throw new Error(`bad image kind: ${T.kind}`)}function H(D,T){if(T.bitmap){D.drawImage(T.bitmap,0,0);return}const R=T.height,v=T.width,F=R%E,U=(R-F)/E,$=F===0?U:U+1,K=D.createImageData(v,E);let b=0;const j=T.data,I=K.data;for(let Q=0;Q<$;Q++){const Y=Q<U?E:F;({srcPos:b}=(0,N.convertBlackAndWhiteToRGBA)({src:j,srcPos:b,dest:I,width:v,height:Y,nonBlackColor:0})),D.putImageData(K,0,Q*E)}}function k(D,T){const R=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const v of R)D[v]!==void 0&&(T[v]=D[v]);D.setLineDash!==void 0&&(T.setLineDash(D.getLineDash()),T.lineDashOffset=D.lineDashOffset)}function L(D){if(D.strokeStyle=D.fillStyle="#000000",D.fillRule="nonzero",D.globalAlpha=1,D.lineWidth=1,D.lineCap="butt",D.lineJoin="miter",D.miterLimit=10,D.globalCompositeOperation="source-over",D.font="10px sans-serif",D.setLineDash!==void 0&&(D.setLineDash([]),D.lineDashOffset=0),!s.isNodeJS){const{filter:T}=D;T!=="none"&&T!==""&&(D.filter="none")}}function J(D,T,R,v){const F=D.length;for(let U=3;U<F;U+=4){const $=D[U];if($===0)D[U-3]=T,D[U-2]=R,D[U-1]=v;else if($<255){const K=255-$;D[U-3]=D[U-3]*$+T*K>>8,D[U-2]=D[U-2]*$+R*K>>8,D[U-1]=D[U-1]*$+v*K>>8}}}function rt(D,T,R){const v=D.length,F=1/255;for(let U=3;U<v;U+=4){const $=R?R[D[U]]:D[U];T[U]=T[U]*$*F|0}}function et(D,T,R){const v=D.length;for(let F=3;F<v;F+=4){const U=D[F-3]*77+D[F-2]*152+D[F-1]*28;T[F]=R?T[F]*R[U>>8]>>8:T[F]*U>>16}}function lt(D,T,R,v,F,U,$,K,b,j,I){const Q=!!U,Y=Q?U[0]:0,at=Q?U[1]:0,st=Q?U[2]:0,Rt=F==="Luminosity"?et:rt,wt=Math.min(v,Math.ceil(1048576/R));for(let jt=0;jt<v;jt+=wt){const Lt=Math.min(wt,v-jt),Pt=D.getImageData(K-j,jt+(b-I),R,Lt),Bt=T.getImageData(K,jt+b,R,Lt);Q&&J(Pt.data,Y,at,st),Rt(Pt.data,Bt.data,$),T.putImageData(Bt,K,jt+b)}}function yt(D,T,R,v){const F=v[0],U=v[1],$=v[2]-F,K=v[3]-U;$===0||K===0||(lt(T.context,R,$,K,T.subtype,T.backdrop,T.transferMap,F,U,T.offsetX,T.offsetY),D.save(),D.globalAlpha=1,D.globalCompositeOperation="source-over",D.setTransform(1,0,0,1,0,0),D.drawImage(R.canvas,0,0),D.restore())}function Dt(D,T){const R=s.Util.singularValueDecompose2dScale(D);R[0]=Math.fround(R[0]),R[1]=Math.fround(R[1]);const v=Math.fround((globalThis.devicePixelRatio||1)*y.PixelsPerInch.PDF_TO_CSS_UNITS);return T!==void 0?T:R[0]<=v||R[1]<=v}const Mt=["butt","round","square"],qt=["miter","round","bevel"],Yt={},nt={};class W{constructor(T,R,v,F,U,{optionalContentConfig:$,markedContentStack:K=null},b,j){this.ctx=T,this.current=new P(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=R,this.objs=v,this.canvasFactory=F,this.filterFactory=U,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=K||[],this.optionalContentConfig=$,this.cachedCanvases=new S(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=b,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=j,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(T,R=null){return typeof T=="string"?T.startsWith("g_")?this.commonObjs.get(T):this.objs.get(T):R}beginDrawing({transform:T,viewport:R,transparency:v=!1,background:F=null}){const U=this.ctx.canvas.width,$=this.ctx.canvas.height,K=this.ctx.fillStyle;if(this.ctx.fillStyle=F||"#ffffff",this.ctx.fillRect(0,0,U,$),this.ctx.fillStyle=K,v){const b=this.cachedCanvases.getCanvas("transparent",U,$);this.compositeCtx=this.ctx,this.transparentCanvas=b.canvas,this.ctx=b.context,this.ctx.save(),this.ctx.transform(...(0,y.getCurrentTransform)(this.compositeCtx))}this.ctx.save(),L(this.ctx),T&&(this.ctx.transform(...T),this.outputScaleX=T[0],this.outputScaleY=T[0]),this.ctx.transform(...R.transform),this.viewportScale=R.scale,this.baseTransform=(0,y.getCurrentTransform)(this.ctx)}executeOperatorList(T,R,v,F){const U=T.argsArray,$=T.fnArray;let K=R||0;const b=U.length;if(b===K)return K;const j=b-K>h&&typeof v=="function",I=j?Date.now()+c:0;let Q=0;const Y=this.commonObjs,at=this.objs;let st;for(;;){if(F!==void 0&&K===F.nextBreakPoint)return F.breakIt(K,v),K;if(st=$[K],st!==s.OPS.dependency)this[st].apply(this,U[K]);else for(const Rt of U[K]){const Xt=Rt.startsWith("g_")?Y:at;if(!Xt.has(Rt))return Xt.get(Rt,v),K}if(K++,K===b)return K;if(j&&++Q>h){if(Date.now()>I)return v(),K;Q=0}}}#t(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)}endDrawing(){this.#t(),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const T of this._cachedBitmapsMap.values()){for(const R of T.values())typeof HTMLCanvasElement<"u"&&R instanceof HTMLCanvasElement&&(R.width=R.height=0);T.clear()}this._cachedBitmapsMap.clear(),this.#e()}#e(){if(this.pageColors){const T=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(T!=="none"){const R=this.ctx.filter;this.ctx.filter=T,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=R}}}_scaleImage(T,R){const v=T.width,F=T.height;let U=Math.max(Math.hypot(R[0],R[1]),1),$=Math.max(Math.hypot(R[2],R[3]),1),K=v,b=F,j="prescale1",I,Q;for(;U>2&&K>1||$>2&&b>1;){let Y=K,at=b;U>2&&K>1&&(Y=K>=16384?Math.floor(K/2)-1||1:Math.ceil(K/2),U/=K/Y),$>2&&b>1&&(at=b>=16384?Math.floor(b/2)-1||1:Math.ceil(b)/2,$/=b/at),I=this.cachedCanvases.getCanvas(j,Y,at),Q=I.context,Q.clearRect(0,0,Y,at),Q.drawImage(T,0,0,K,b,0,0,Y,at),T=I.canvas,K=Y,b=at,j=j==="prescale1"?"prescale2":"prescale1"}return{img:T,paintWidth:K,paintHeight:b}}_createMaskCanvas(T){const R=this.ctx,{width:v,height:F}=T,U=this.current.fillColor,$=this.current.patternFill,K=(0,y.getCurrentTransform)(R);let b,j,I,Q;if((T.bitmap||T.data)&&T.count>1){const $t=T.bitmap||T.data.buffer;j=JSON.stringify($?K:[K.slice(0,4),U]),b=this._cachedBitmapsMap.get($t),b||(b=new Map,this._cachedBitmapsMap.set($t,b));const ie=b.get(j);if(ie&&!$){const le=Math.round(Math.min(K[0],K[2])+K[4]),oe=Math.round(Math.min(K[1],K[3])+K[5]);return{canvas:ie,offsetX:le,offsetY:oe}}I=ie}I||(Q=this.cachedCanvases.getCanvas("maskCanvas",v,F),H(Q.context,T));let Y=s.Util.transform(K,[1/v,0,0,-1/F,0,0]);Y=s.Util.transform(Y,[1,0,0,1,0,-F]);const at=s.Util.applyTransform([0,0],Y),st=s.Util.applyTransform([v,F],Y),Rt=s.Util.normalizeRect([at[0],at[1],st[0],st[1]]),Xt=Math.round(Rt[2]-Rt[0])||1,wt=Math.round(Rt[3]-Rt[1])||1,jt=this.cachedCanvases.getCanvas("fillCanvas",Xt,wt),Lt=jt.context,Pt=Math.min(at[0],st[0]),Bt=Math.min(at[1],st[1]);Lt.translate(-Pt,-Bt),Lt.transform(...Y),I||(I=this._scaleImage(Q.canvas,(0,y.getCurrentTransformInverse)(Lt)),I=I.img,b&&$&&b.set(j,I)),Lt.imageSmoothingEnabled=Dt((0,y.getCurrentTransform)(Lt),T.interpolate),C(Lt,I,0,0,I.width,I.height,0,0,v,F),Lt.globalCompositeOperation="source-in";const Qt=s.Util.transform((0,y.getCurrentTransformInverse)(Lt),[1,0,0,1,-Pt,-Bt]);return Lt.fillStyle=$?U.getPattern(R,this,Qt,O.PathType.FILL):U,Lt.fillRect(0,0,v,F),b&&!$&&(this.cachedCanvases.delete("fillCanvas"),b.set(j,jt.canvas)),{canvas:jt.canvas,offsetX:Math.round(Pt),offsetY:Math.round(Bt)}}setLineWidth(T){T!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=T,this.ctx.lineWidth=T}setLineCap(T){this.ctx.lineCap=Mt[T]}setLineJoin(T){this.ctx.lineJoin=qt[T]}setMiterLimit(T){this.ctx.miterLimit=T}setDash(T,R){const v=this.ctx;v.setLineDash!==void 0&&(v.setLineDash(T),v.lineDashOffset=R)}setRenderingIntent(T){}setFlatness(T){}setGState(T){for(const[R,v]of T)switch(R){case"LW":this.setLineWidth(v);break;case"LC":this.setLineCap(v);break;case"LJ":this.setLineJoin(v);break;case"ML":this.setMiterLimit(v);break;case"D":this.setDash(v[0],v[1]);break;case"RI":this.setRenderingIntent(v);break;case"FL":this.setFlatness(v);break;case"Font":this.setFont(v[0],v[1]);break;case"CA":this.current.strokeAlpha=v;break;case"ca":this.current.fillAlpha=v,this.ctx.globalAlpha=v;break;case"BM":this.ctx.globalCompositeOperation=v;break;case"SMask":this.current.activeSMask=v?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(v);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const T=this.inSMaskMode;this.current.activeSMask&&!T?this.beginSMaskMode():!this.current.activeSMask&&T&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const T=this.ctx.canvas.width,R=this.ctx.canvas.height,v="smaskGroupAt"+this.groupLevel,F=this.cachedCanvases.getCanvas(v,T,R);this.suspendedCtx=this.ctx,this.ctx=F.context;const U=this.ctx;U.setTransform(...(0,y.getCurrentTransform)(this.suspendedCtx)),k(this.suspendedCtx,U),p(U,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),k(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(T){if(!this.current.activeSMask)return;T?(T[0]=Math.floor(T[0]),T[1]=Math.floor(T[1]),T[2]=Math.ceil(T[2]),T[3]=Math.ceil(T[3])):T=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const R=this.current.activeSMask,v=this.suspendedCtx;yt(v,R,this.ctx,T),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}save(){this.inSMaskMode?(k(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();const T=this.current;this.stateStack.push(T),this.current=T.clone()}restore(){this.stateStack.length===0&&this.inSMaskMode&&this.endSMaskMode(),this.stateStack.length!==0&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),k(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null)}transform(T,R,v,F,U,$){this.ctx.transform(T,R,v,F,U,$),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(T,R,v){const F=this.ctx,U=this.current;let $=U.x,K=U.y,b,j;const I=(0,y.getCurrentTransform)(F),Q=I[0]===0&&I[3]===0||I[1]===0&&I[2]===0,Y=Q?v.slice(0):null;for(let at=0,st=0,Rt=T.length;at<Rt;at++)switch(T[at]|0){case s.OPS.rectangle:$=R[st++],K=R[st++];const Xt=R[st++],wt=R[st++],jt=$+Xt,Lt=K+wt;F.moveTo($,K),Xt===0||wt===0?F.lineTo(jt,Lt):(F.lineTo(jt,K),F.lineTo(jt,Lt),F.lineTo($,Lt)),Q||U.updateRectMinMax(I,[$,K,jt,Lt]),F.closePath();break;case s.OPS.moveTo:$=R[st++],K=R[st++],F.moveTo($,K),Q||U.updatePathMinMax(I,$,K);break;case s.OPS.lineTo:$=R[st++],K=R[st++],F.lineTo($,K),Q||U.updatePathMinMax(I,$,K);break;case s.OPS.curveTo:b=$,j=K,$=R[st+4],K=R[st+5],F.bezierCurveTo(R[st],R[st+1],R[st+2],R[st+3],$,K),U.updateCurvePathMinMax(I,b,j,R[st],R[st+1],R[st+2],R[st+3],$,K,Y),st+=6;break;case s.OPS.curveTo2:b=$,j=K,F.bezierCurveTo($,K,R[st],R[st+1],R[st+2],R[st+3]),U.updateCurvePathMinMax(I,b,j,$,K,R[st],R[st+1],R[st+2],R[st+3],Y),$=R[st+2],K=R[st+3],st+=4;break;case s.OPS.curveTo3:b=$,j=K,$=R[st+2],K=R[st+3],F.bezierCurveTo(R[st],R[st+1],$,K,$,K),U.updateCurvePathMinMax(I,b,j,R[st],R[st+1],$,K,$,K,Y),st+=4;break;case s.OPS.closePath:F.closePath();break}Q&&U.updateScalingPathMinMax(I,Y),U.setCurrentPoint($,K)}closePath(){this.ctx.closePath()}stroke(T=!0){const R=this.ctx,v=this.current.strokeColor;R.globalAlpha=this.current.strokeAlpha,this.contentVisible&&(typeof v=="object"&&v?.getPattern?(R.save(),R.strokeStyle=v.getPattern(R,this,(0,y.getCurrentTransformInverse)(R),O.PathType.STROKE),this.rescaleAndStroke(!1),R.restore()):this.rescaleAndStroke(!0)),T&&this.consumePath(this.current.getClippedPathBoundingBox()),R.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(T=!0){const R=this.ctx,v=this.current.fillColor,F=this.current.patternFill;let U=!1;F&&(R.save(),R.fillStyle=v.getPattern(R,this,(0,y.getCurrentTransformInverse)(R),O.PathType.FILL),U=!0);const $=this.current.getClippedPathBoundingBox();this.contentVisible&&$!==null&&(this.pendingEOFill?(R.fill("evenodd"),this.pendingEOFill=!1):R.fill()),U&&R.restore(),T&&this.consumePath($)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=Yt}eoClip(){this.pendingClip=nt}beginText(){this.current.textMatrix=s.IDENTITY_MATRIX,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const T=this.pendingTextPaths,R=this.ctx;if(T===void 0){R.beginPath();return}R.save(),R.beginPath();for(const v of T)R.setTransform(...v.transform),R.translate(v.x,v.y),v.addToPath(R,v.fontSize);R.restore(),R.clip(),R.beginPath(),delete this.pendingTextPaths}setCharSpacing(T){this.current.charSpacing=T}setWordSpacing(T){this.current.wordSpacing=T}setHScale(T){this.current.textHScale=T/100}setLeading(T){this.current.leading=-T}setFont(T,R){const v=this.commonObjs.get(T),F=this.current;if(!v)throw new Error(`Can't find font for ${T}`);if(F.fontMatrix=v.fontMatrix||s.FONT_IDENTITY_MATRIX,(F.fontMatrix[0]===0||F.fontMatrix[3]===0)&&(0,s.warn)("Invalid font matrix for font "+T),R<0?(R=-R,F.fontDirection=-1):F.fontDirection=1,this.current.font=v,this.current.fontSize=R,v.isType3Font)return;const U=v.loadedName||"sans-serif",$=v.systemFontInfo?.css||`"${U}", ${v.fallbackName}`;let K="normal";v.black?K="900":v.bold&&(K="bold");const b=v.italic?"italic":"normal";let j=R;R<G?j=G:R>q&&(j=q),this.current.fontSizeScale=R/j,this.ctx.font=`${b} ${K} ${j}px ${$}`}setTextRenderingMode(T){this.current.textRenderingMode=T}setTextRise(T){this.current.textRise=T}moveText(T,R){this.current.x=this.current.lineX+=T,this.current.y=this.current.lineY+=R}setLeadingMoveText(T,R){this.setLeading(-R),this.moveText(T,R)}setTextMatrix(T,R,v,F,U,$){this.current.textMatrix=[T,R,v,F,U,$],this.current.textMatrixScale=Math.hypot(T,R),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(T,R,v,F){const U=this.ctx,$=this.current,K=$.font,b=$.textRenderingMode,j=$.fontSize/$.fontSizeScale,I=b&s.TextRenderingMode.FILL_STROKE_MASK,Q=!!(b&s.TextRenderingMode.ADD_TO_PATH_FLAG),Y=$.patternFill&&!K.missingFile;let at;(K.disableFontFace||Q||Y)&&(at=K.getPathGenerator(this.commonObjs,T)),K.disableFontFace||Y?(U.save(),U.translate(R,v),U.beginPath(),at(U,j),F&&U.setTransform(...F),(I===s.TextRenderingMode.FILL||I===s.TextRenderingMode.FILL_STROKE)&&U.fill(),(I===s.TextRenderingMode.STROKE||I===s.TextRenderingMode.FILL_STROKE)&&U.stroke(),U.restore()):((I===s.TextRenderingMode.FILL||I===s.TextRenderingMode.FILL_STROKE)&&U.fillText(T,R,v),(I===s.TextRenderingMode.STROKE||I===s.TextRenderingMode.FILL_STROKE)&&U.strokeText(T,R,v)),Q&&(this.pendingTextPaths||=[]).push({transform:(0,y.getCurrentTransform)(U),x:R,y:v,fontSize:j,addToPath:at})}get isFontSubpixelAAEnabled(){const{context:T}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);T.scale(1.5,1),T.fillText("I",0,10);const R=T.getImageData(0,0,10,10).data;let v=!1;for(let F=3;F<R.length;F+=4)if(R[F]>0&&R[F]<255){v=!0;break}return(0,s.shadow)(this,"isFontSubpixelAAEnabled",v)}showText(T){const R=this.current,v=R.font;if(v.isType3Font)return this.showType3Text(T);const F=R.fontSize;if(F===0)return;const U=this.ctx,$=R.fontSizeScale,K=R.charSpacing,b=R.wordSpacing,j=R.fontDirection,I=R.textHScale*j,Q=T.length,Y=v.vertical,at=Y?1:-1,st=v.defaultVMetrics,Rt=F*R.fontMatrix[0],Xt=R.textRenderingMode===s.TextRenderingMode.FILL&&!v.disableFontFace&&!R.patternFill;U.save(),U.transform(...R.textMatrix),U.translate(R.x,R.y+R.textRise),j>0?U.scale(I,-1):U.scale(I,1);let wt;if(R.patternFill){U.save();const Qt=R.fillColor.getPattern(U,this,(0,y.getCurrentTransformInverse)(U),O.PathType.FILL);wt=(0,y.getCurrentTransform)(U),U.restore(),U.fillStyle=Qt}let jt=R.lineWidth;const Lt=R.textMatrixScale;if(Lt===0||jt===0){const Qt=R.textRenderingMode&s.TextRenderingMode.FILL_STROKE_MASK;(Qt===s.TextRenderingMode.STROKE||Qt===s.TextRenderingMode.FILL_STROKE)&&(jt=this.getSinglePixelWidth())}else jt/=Lt;if($!==1&&(U.scale($,$),jt/=$),U.lineWidth=jt,v.isInvalidPDFjsFont){const Qt=[];let $t=0;for(const ie of T)Qt.push(ie.unicode),$t+=ie.width;U.fillText(Qt.join(""),0,0),R.x+=$t*Rt*I,U.restore(),this.compose();return}let Pt=0,Bt;for(Bt=0;Bt<Q;++Bt){const Qt=T[Bt];if(typeof Qt=="number"){Pt+=at*Qt*F/1e3;continue}let $t=!1;const ie=(Qt.isSpace?b:0)+K,le=Qt.fontChar,oe=Qt.accent;let _e,ke,Be=Qt.width;if(Y){const We=Qt.vmetric||st,An=-(Qt.vmetric?We[1]:Be*.5)*Rt,ya=We[2]*Rt;Be=We?-We[0]:Be,_e=An/$,ke=(Pt+ya)/$}else _e=Pt/$,ke=0;if(v.remeasure&&Be>0){const We=U.measureText(le).width*1e3/F*$;if(Be<We&&this.isFontSubpixelAAEnabled){const An=Be/We;$t=!0,U.save(),U.scale(An,1),_e/=An}else Be!==We&&(_e+=(Be-We)/2e3*F/$)}if(this.contentVisible&&(Qt.isInFont||v.missingFile)){if(Xt&&!oe)U.fillText(le,_e,ke);else if(this.paintChar(le,_e,ke,wt),oe){const We=_e+F*oe.offset.x/$,An=ke-F*oe.offset.y/$;this.paintChar(oe.fontChar,We,An,wt)}}const Cn=Y?Be*Rt-ie*j:Be*Rt+ie*j;Pt+=Cn,$t&&U.restore()}Y?R.y-=Pt:R.x+=Pt*I,U.restore(),this.compose()}showType3Text(T){const R=this.ctx,v=this.current,F=v.font,U=v.fontSize,$=v.fontDirection,K=F.vertical?1:-1,b=v.charSpacing,j=v.wordSpacing,I=v.textHScale*$,Q=v.fontMatrix||s.FONT_IDENTITY_MATRIX,Y=T.length,at=v.textRenderingMode===s.TextRenderingMode.INVISIBLE;let st,Rt,Xt,wt;if(!(at||U===0)){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,R.save(),R.transform(...v.textMatrix),R.translate(v.x,v.y),R.scale(I,$),st=0;st<Y;++st){if(Rt=T[st],typeof Rt=="number"){wt=K*Rt*U/1e3,this.ctx.translate(wt,0),v.x+=wt*I;continue}const jt=(Rt.isSpace?j:0)+b,Lt=F.charProcOperatorList[Rt.operatorListId];if(!Lt){(0,s.warn)(`Type3 character "${Rt.operatorListId}" is not available.`);continue}this.contentVisible&&(this.processingType3=Rt,this.save(),R.scale(U,U),R.transform(...Q),this.executeOperatorList(Lt),this.restore()),Xt=s.Util.applyTransform([Rt.width,0],Q)[0]*U+jt,R.translate(Xt,0),v.x+=Xt*I}R.restore(),this.processingType3=null}}setCharWidth(T,R){}setCharWidthAndBounds(T,R,v,F,U,$){this.ctx.rect(v,F,U-v,$-F),this.ctx.clip(),this.endPath()}getColorN_Pattern(T){let R;if(T[0]==="TilingPattern"){const v=T[1],F=this.baseTransform||(0,y.getCurrentTransform)(this.ctx),U={createCanvasGraphics:$=>new W($,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};R=new O.TilingPattern(T,v,this.ctx,U,F)}else R=this._getPattern(T[1],T[2]);return R}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments)}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(T,R,v){const F=s.Util.makeHexColor(T,R,v);this.ctx.strokeStyle=F,this.current.strokeColor=F}setFillRGBColor(T,R,v){const F=s.Util.makeHexColor(T,R,v);this.ctx.fillStyle=F,this.current.fillColor=F,this.current.patternFill=!1}_getPattern(T,R=null){let v;return this.cachedPatterns.has(T)?v=this.cachedPatterns.get(T):(v=(0,O.getShadingPattern)(this.getObject(T)),this.cachedPatterns.set(T,v)),R&&(v.matrix=R),v}shadingFill(T){if(!this.contentVisible)return;const R=this.ctx;this.save();const v=this._getPattern(T);R.fillStyle=v.getPattern(R,this,(0,y.getCurrentTransformInverse)(R),O.PathType.SHADING);const F=(0,y.getCurrentTransformInverse)(R);if(F){const{width:U,height:$}=R.canvas,[K,b,j,I]=s.Util.getAxialAlignedBoundingBox([0,0,U,$],F);this.ctx.fillRect(K,b,j-K,I-b)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){(0,s.unreachable)("Should not call beginInlineImage")}beginImageData(){(0,s.unreachable)("Should not call beginImageData")}paintFormXObjectBegin(T,R){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),Array.isArray(T)&&T.length===6&&this.transform(...T),this.baseTransform=(0,y.getCurrentTransform)(this.ctx),R)){const v=R[2]-R[0],F=R[3]-R[1];this.ctx.rect(R[0],R[1],v,F),this.current.updateRectMinMax((0,y.getCurrentTransform)(this.ctx),R),this.clip(),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(T){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const R=this.ctx;T.isolated||(0,s.info)("TODO: Support non-isolated groups."),T.knockout&&(0,s.warn)("Knockout groups not supported.");const v=(0,y.getCurrentTransform)(R);if(T.matrix&&R.transform(...T.matrix),!T.bbox)throw new Error("Bounding box is required.");let F=s.Util.getAxialAlignedBoundingBox(T.bbox,(0,y.getCurrentTransform)(R));const U=[0,0,R.canvas.width,R.canvas.height];F=s.Util.intersect(F,U)||[0,0,0,0];const $=Math.floor(F[0]),K=Math.floor(F[1]);let b=Math.max(Math.ceil(F[2])-$,1),j=Math.max(Math.ceil(F[3])-K,1),I=1,Q=1;b>d&&(I=b/d,b=d),j>d&&(Q=j/d,j=d),this.current.startNewPathAndClipBox([0,0,b,j]);let Y="groupAt"+this.groupLevel;T.smask&&(Y+="_smask_"+this.smaskCounter++%2);const at=this.cachedCanvases.getCanvas(Y,b,j),st=at.context;st.scale(1/I,1/Q),st.translate(-$,-K),st.transform(...v),T.smask?this.smaskStack.push({canvas:at.canvas,context:st,offsetX:$,offsetY:K,scaleX:I,scaleY:Q,subtype:T.smask.subtype,backdrop:T.smask.backdrop,transferMap:T.smask.transferMap||null,startTransformInverse:null}):(R.setTransform(1,0,0,1,0,0),R.translate($,K),R.scale(I,Q),R.save()),k(R,st),this.ctx=st,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(R),this.groupLevel++}endGroup(T){if(!this.contentVisible)return;this.groupLevel--;const R=this.ctx,v=this.groupStack.pop();if(this.ctx=v,this.ctx.imageSmoothingEnabled=!1,T.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const F=(0,y.getCurrentTransform)(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...F);const U=s.Util.getAxialAlignedBoundingBox([0,0,R.canvas.width,R.canvas.height],F);this.ctx.drawImage(R.canvas,0,0),this.ctx.restore(),this.compose(U)}}beginAnnotation(T,R,v,F,U){if(this.#t(),L(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),Array.isArray(R)&&R.length===4){const $=R[2]-R[0],K=R[3]-R[1];if(U&&this.annotationCanvasMap){v=v.slice(),v[4]-=R[0],v[5]-=R[1],R=R.slice(),R[0]=R[1]=0,R[2]=$,R[3]=K;const[b,j]=s.Util.singularValueDecompose2dScale((0,y.getCurrentTransform)(this.ctx)),{viewportScale:I}=this,Q=Math.ceil($*this.outputScaleX*I),Y=Math.ceil(K*this.outputScaleY*I);this.annotationCanvas=this.canvasFactory.create(Q,Y);const{canvas:at,context:st}=this.annotationCanvas;this.annotationCanvasMap.set(T,at),this.annotationCanvas.savedCtx=this.ctx,this.ctx=st,this.ctx.save(),this.ctx.setTransform(b,0,0,-j,0,K*j),L(this.ctx)}else L(this.ctx),this.ctx.rect(R[0],R[1],$,K),this.ctx.clip(),this.endPath()}this.current=new P(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...v),this.transform(...F)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),this.#e(),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(T){if(!this.contentVisible)return;const R=T.count;T=this.getObject(T.data,T),T.count=R;const v=this.ctx,F=this.processingType3;if(F&&(F.compiled===void 0&&(F.compiled=_(T)),F.compiled)){F.compiled(v);return}const U=this._createMaskCanvas(T),$=U.canvas;v.save(),v.setTransform(1,0,0,1,0,0),v.drawImage($,U.offsetX,U.offsetY),v.restore(),this.compose()}paintImageMaskXObjectRepeat(T,R,v=0,F=0,U,$){if(!this.contentVisible)return;T=this.getObject(T.data,T);const K=this.ctx;K.save();const b=(0,y.getCurrentTransform)(K);K.transform(R,v,F,U,0,0);const j=this._createMaskCanvas(T);K.setTransform(1,0,0,1,j.offsetX-b[4],j.offsetY-b[5]);for(let I=0,Q=$.length;I<Q;I+=2){const Y=s.Util.transform(b,[R,v,F,U,$[I],$[I+1]]),[at,st]=s.Util.applyTransform([0,0],Y);K.drawImage(j.canvas,at,st)}K.restore(),this.compose()}paintImageMaskXObjectGroup(T){if(!this.contentVisible)return;const R=this.ctx,v=this.current.fillColor,F=this.current.patternFill;for(const U of T){const{data:$,width:K,height:b,transform:j}=U,I=this.cachedCanvases.getCanvas("maskCanvas",K,b),Q=I.context;Q.save();const Y=this.getObject($,U);H(Q,Y),Q.globalCompositeOperation="source-in",Q.fillStyle=F?v.getPattern(Q,this,(0,y.getCurrentTransformInverse)(R),O.PathType.FILL):v,Q.fillRect(0,0,K,b),Q.restore(),R.save(),R.transform(...j),R.scale(1,-1),C(R,I.canvas,0,0,K,b,0,-1,1,1),R.restore()}this.compose()}paintImageXObject(T){if(!this.contentVisible)return;const R=this.getObject(T);if(!R){(0,s.warn)("Dependent image isn't ready yet");return}this.paintInlineImageXObject(R)}paintImageXObjectRepeat(T,R,v,F){if(!this.contentVisible)return;const U=this.getObject(T);if(!U){(0,s.warn)("Dependent image isn't ready yet");return}const $=U.width,K=U.height,b=[];for(let j=0,I=F.length;j<I;j+=2)b.push({transform:[R,0,0,v,F[j],F[j+1]],x:0,y:0,w:$,h:K});this.paintInlineImageXObjectGroup(U,b)}applyTransferMapsToCanvas(T){return this.current.transferMaps!=="none"&&(T.filter=this.current.transferMaps,T.drawImage(T.canvas,0,0),T.filter="none"),T.canvas}applyTransferMapsToBitmap(T){if(this.current.transferMaps==="none")return T.bitmap;const{bitmap:R,width:v,height:F}=T,U=this.cachedCanvases.getCanvas("inlineImage",v,F),$=U.context;return $.filter=this.current.transferMaps,$.drawImage(R,0,0),$.filter="none",U.canvas}paintInlineImageXObject(T){if(!this.contentVisible)return;const R=T.width,v=T.height,F=this.ctx;if(this.save(),!s.isNodeJS){const{filter:K}=F;K!=="none"&&K!==""&&(F.filter="none")}F.scale(1/R,-1/v);let U;if(T.bitmap)U=this.applyTransferMapsToBitmap(T);else if(typeof HTMLElement=="function"&&T instanceof HTMLElement||!T.data)U=T;else{const b=this.cachedCanvases.getCanvas("inlineImage",R,v).context;V(b,T),U=this.applyTransferMapsToCanvas(b)}const $=this._scaleImage(U,(0,y.getCurrentTransformInverse)(F));F.imageSmoothingEnabled=Dt((0,y.getCurrentTransform)(F),T.interpolate),C(F,$.img,0,0,$.paintWidth,$.paintHeight,0,-v,R,v),this.compose(),this.restore()}paintInlineImageXObjectGroup(T,R){if(!this.contentVisible)return;const v=this.ctx;let F;if(T.bitmap)F=T.bitmap;else{const U=T.width,$=T.height,b=this.cachedCanvases.getCanvas("inlineImage",U,$).context;V(b,T),F=this.applyTransferMapsToCanvas(b)}for(const U of R)v.save(),v.transform(...U.transform),v.scale(1,-1),C(v,F,U.x,U.y,U.w,U.h,0,-1,1,1),v.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(T){}markPointProps(T,R){}beginMarkedContent(T){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(T,R){T==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(R)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(T){const R=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(T);const v=this.ctx;this.pendingClip&&(R||(this.pendingClip===nt?v.clip("evenodd"):v.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),v.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const T=(0,y.getCurrentTransform)(this.ctx);if(T[1]===0&&T[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(T[0]),Math.abs(T[3]));else{const R=Math.abs(T[0]*T[3]-T[2]*T[1]),v=Math.hypot(T[0],T[2]),F=Math.hypot(T[1],T[3]);this._cachedGetSinglePixelWidth=Math.max(v,F)/R}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:T}=this.current,{a:R,b:v,c:F,d:U}=this.ctx.getTransform();let $,K;if(v===0&&F===0){const b=Math.abs(R),j=Math.abs(U);if(b===j)if(T===0)$=K=1/b;else{const I=b*T;$=K=I<1?1/I:1}else if(T===0)$=1/b,K=1/j;else{const I=b*T,Q=j*T;$=I<1?1/I:1,K=Q<1?1/Q:1}}else{const b=Math.abs(R*U-v*F),j=Math.hypot(R,v),I=Math.hypot(F,U);if(T===0)$=I/b,K=j/b;else{const Q=T*b;$=I>Q?I/Q:1,K=j>Q?j/Q:1}}this._cachedScaleForStroking[0]=$,this._cachedScaleForStroking[1]=K}return this._cachedScaleForStroking}rescaleAndStroke(T){const{ctx:R}=this,{lineWidth:v}=this.current,[F,U]=this.getScaleForStroking();if(R.lineWidth=v||1,F===1&&U===1){R.stroke();return}const $=R.getLineDash();if(T&&R.save(),R.scale(F,U),$.length>0){const K=Math.max(F,U);R.setLineDash($.map(b=>b/K)),R.lineDashOffset/=K}R.stroke(),T&&R.restore()}isContentVisible(){for(let T=this.markedContentStack.length-1;T>=0;T--)if(!this.markedContentStack[T].visible)return!1;return!0}}o.CanvasGraphics=W;for(const D in s.OPS)W.prototype[D]!==void 0&&(W.prototype[s.OPS[D]]=W.prototype[D])}),((f,o,m)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.TilingPattern=o.PathType=void 0,o.getShadingPattern=E;var s=m(1),y=m(6);const O={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};o.PathType=O;function N(C,_){if(!_)return;const P=_[2]-_[0],V=_[3]-_[1],H=new Path2D;H.rect(_[0],_[1],P,V),C.clip(H)}class G{constructor(){this.constructor===G&&(0,s.unreachable)("Cannot initialize BaseShadingPattern.")}getPattern(){(0,s.unreachable)("Abstract method `getPattern` called.")}}class q extends G{constructor(_){super(),this._type=_[1],this._bbox=_[2],this._colorStops=_[3],this._p0=_[4],this._p1=_[5],this._r0=_[6],this._r1=_[7],this.matrix=null}_createGradient(_){let P;this._type==="axial"?P=_.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(P=_.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const V of this._colorStops)P.addColorStop(V[0],V[1]);return P}getPattern(_,P,V,H){let k;if(H===O.STROKE||H===O.FILL){const L=P.current.getClippedPathBoundingBox(H,(0,y.getCurrentTransform)(_))||[0,0,0,0],J=Math.ceil(L[2]-L[0])||1,rt=Math.ceil(L[3]-L[1])||1,et=P.cachedCanvases.getCanvas("pattern",J,rt,!0),lt=et.context;lt.clearRect(0,0,lt.canvas.width,lt.canvas.height),lt.beginPath(),lt.rect(0,0,lt.canvas.width,lt.canvas.height),lt.translate(-L[0],-L[1]),V=s.Util.transform(V,[1,0,0,1,L[0],L[1]]),lt.transform(...P.baseTransform),this.matrix&&lt.transform(...this.matrix),N(lt,this._bbox),lt.fillStyle=this._createGradient(lt),lt.fill(),k=_.createPattern(et.canvas,"no-repeat");const yt=new DOMMatrix(V);k.setTransform(yt)}else N(_,this._bbox),k=this._createGradient(_);return k}}function d(C,_,P,V,H,k,L,J){const rt=_.coords,et=_.colors,lt=C.data,yt=C.width*4;let Dt;rt[P+1]>rt[V+1]&&(Dt=P,P=V,V=Dt,Dt=k,k=L,L=Dt),rt[V+1]>rt[H+1]&&(Dt=V,V=H,H=Dt,Dt=L,L=J,J=Dt),rt[P+1]>rt[V+1]&&(Dt=P,P=V,V=Dt,Dt=k,k=L,L=Dt);const Mt=(rt[P]+_.offsetX)*_.scaleX,qt=(rt[P+1]+_.offsetY)*_.scaleY,Yt=(rt[V]+_.offsetX)*_.scaleX,nt=(rt[V+1]+_.offsetY)*_.scaleY,W=(rt[H]+_.offsetX)*_.scaleX,D=(rt[H+1]+_.offsetY)*_.scaleY;if(qt>=D)return;const T=et[k],R=et[k+1],v=et[k+2],F=et[L],U=et[L+1],$=et[L+2],K=et[J],b=et[J+1],j=et[J+2],I=Math.round(qt),Q=Math.round(D);let Y,at,st,Rt,Xt,wt,jt,Lt;for(let Pt=I;Pt<=Q;Pt++){if(Pt<nt){const le=Pt<qt?0:(qt-Pt)/(qt-nt);Y=Mt-(Mt-Yt)*le,at=T-(T-F)*le,st=R-(R-U)*le,Rt=v-(v-$)*le}else{let le;Pt>D?le=1:nt===D?le=0:le=(nt-Pt)/(nt-D),Y=Yt-(Yt-W)*le,at=F-(F-K)*le,st=U-(U-b)*le,Rt=$-($-j)*le}let Bt;Pt<qt?Bt=0:Pt>D?Bt=1:Bt=(qt-Pt)/(qt-D),Xt=Mt-(Mt-W)*Bt,wt=T-(T-K)*Bt,jt=R-(R-b)*Bt,Lt=v-(v-j)*Bt;const Qt=Math.round(Math.min(Y,Xt)),$t=Math.round(Math.max(Y,Xt));let ie=yt*Pt+Qt*4;for(let le=Qt;le<=$t;le++)Bt=(Y-le)/(Y-Xt),Bt<0?Bt=0:Bt>1&&(Bt=1),lt[ie++]=at-(at-wt)*Bt|0,lt[ie++]=st-(st-jt)*Bt|0,lt[ie++]=Rt-(Rt-Lt)*Bt|0,lt[ie++]=255}}function c(C,_,P){const V=_.coords,H=_.colors;let k,L;switch(_.type){case"lattice":const J=_.verticesPerRow,rt=Math.floor(V.length/J)-1,et=J-1;for(k=0;k<rt;k++){let lt=k*J;for(let yt=0;yt<et;yt++,lt++)d(C,P,V[lt],V[lt+1],V[lt+J],H[lt],H[lt+1],H[lt+J]),d(C,P,V[lt+J+1],V[lt+1],V[lt+J],H[lt+J+1],H[lt+1],H[lt+J])}break;case"triangles":for(k=0,L=V.length;k<L;k+=3)d(C,P,V[k],V[k+1],V[k+2],H[k],H[k+1],H[k+2]);break;default:throw new Error("illegal figure")}}class h extends G{constructor(_){super(),this._coords=_[2],this._colors=_[3],this._figures=_[4],this._bounds=_[5],this._bbox=_[7],this._background=_[8],this.matrix=null}_createMeshCanvas(_,P,V){const J=Math.floor(this._bounds[0]),rt=Math.floor(this._bounds[1]),et=Math.ceil(this._bounds[2])-J,lt=Math.ceil(this._bounds[3])-rt,yt=Math.min(Math.ceil(Math.abs(et*_[0]*1.1)),3e3),Dt=Math.min(Math.ceil(Math.abs(lt*_[1]*1.1)),3e3),Mt=et/yt,qt=lt/Dt,Yt={coords:this._coords,colors:this._colors,offsetX:-J,offsetY:-rt,scaleX:1/Mt,scaleY:1/qt},nt=yt+4,W=Dt+4,D=V.getCanvas("mesh",nt,W,!1),T=D.context,R=T.createImageData(yt,Dt);if(P){const F=R.data;for(let U=0,$=F.length;U<$;U+=4)F[U]=P[0],F[U+1]=P[1],F[U+2]=P[2],F[U+3]=255}for(const F of this._figures)c(R,F,Yt);return T.putImageData(R,2,2),{canvas:D.canvas,offsetX:J-2*Mt,offsetY:rt-2*qt,scaleX:Mt,scaleY:qt}}getPattern(_,P,V,H){N(_,this._bbox);let k;if(H===O.SHADING)k=s.Util.singularValueDecompose2dScale((0,y.getCurrentTransform)(_));else if(k=s.Util.singularValueDecompose2dScale(P.baseTransform),this.matrix){const J=s.Util.singularValueDecompose2dScale(this.matrix);k=[k[0]*J[0],k[1]*J[1]]}const L=this._createMeshCanvas(k,H===O.SHADING?null:this._background,P.cachedCanvases);return H!==O.SHADING&&(_.setTransform(...P.baseTransform),this.matrix&&_.transform(...this.matrix)),_.translate(L.offsetX,L.offsetY),_.scale(L.scaleX,L.scaleY),_.createPattern(L.canvas,"no-repeat")}}class x extends G{getPattern(){return"hotpink"}}function E(C){switch(C[0]){case"RadialAxial":return new q(C);case"Mesh":return new h(C);case"Dummy":return new x}throw new Error(`Unknown IR type: ${C[0]}`)}const p={COLORED:1,UNCOLORED:2};class S{static MAX_PATTERN_SIZE=3e3;constructor(_,P,V,H,k){this.operatorList=_[2],this.matrix=_[3]||[1,0,0,1,0,0],this.bbox=_[4],this.xstep=_[5],this.ystep=_[6],this.paintType=_[7],this.tilingType=_[8],this.color=P,this.ctx=V,this.canvasGraphicsFactory=H,this.baseTransform=k}createPatternCanvas(_){const P=this.operatorList,V=this.bbox,H=this.xstep,k=this.ystep,L=this.paintType,J=this.tilingType,rt=this.color,et=this.canvasGraphicsFactory;(0,s.info)("TilingType: "+J);const lt=V[0],yt=V[1],Dt=V[2],Mt=V[3],qt=s.Util.singularValueDecompose2dScale(this.matrix),Yt=s.Util.singularValueDecompose2dScale(this.baseTransform),nt=[qt[0]*Yt[0],qt[1]*Yt[1]],W=this.getSizeAndScale(H,this.ctx.canvas.width,nt[0]),D=this.getSizeAndScale(k,this.ctx.canvas.height,nt[1]),T=_.cachedCanvases.getCanvas("pattern",W.size,D.size,!0),R=T.context,v=et.createCanvasGraphics(R);v.groupLevel=_.groupLevel,this.setFillAndStrokeStyleToContext(v,L,rt);let F=lt,U=yt,$=Dt,K=Mt;return lt<0&&(F=0,$+=Math.abs(lt)),yt<0&&(U=0,K+=Math.abs(yt)),R.translate(-(W.scale*F),-(D.scale*U)),v.transform(W.scale,0,0,D.scale,0,0),R.save(),this.clipBbox(v,F,U,$,K),v.baseTransform=(0,y.getCurrentTransform)(v.ctx),v.executeOperatorList(P),v.endDrawing(),{canvas:T.canvas,scaleX:W.scale,scaleY:D.scale,offsetX:F,offsetY:U}}getSizeAndScale(_,P,V){_=Math.abs(_);const H=Math.max(S.MAX_PATTERN_SIZE,P);let k=Math.ceil(_*V);return k>=H?k=H:V=k/_,{scale:V,size:k}}clipBbox(_,P,V,H,k){const L=H-P,J=k-V;_.ctx.rect(P,V,L,J),_.current.updateRectMinMax((0,y.getCurrentTransform)(_.ctx),[P,V,H,k]),_.clip(),_.endPath()}setFillAndStrokeStyleToContext(_,P,V){const H=_.ctx,k=_.current;switch(P){case p.COLORED:const L=this.ctx;H.fillStyle=L.fillStyle,H.strokeStyle=L.strokeStyle,k.fillColor=L.fillStyle,k.strokeColor=L.strokeStyle;break;case p.UNCOLORED:const J=s.Util.makeHexColor(V[0],V[1],V[2]);H.fillStyle=J,H.strokeStyle=J,k.fillColor=J,k.strokeColor=J;break;default:throw new s.FormatError(`Unsupported paint type: ${P}`)}}getPattern(_,P,V,H){let k=V;H!==O.SHADING&&(k=s.Util.transform(k,P.baseTransform),this.matrix&&(k=s.Util.transform(k,this.matrix)));const L=this.createPatternCanvas(P);let J=new DOMMatrix(k);J=J.translate(L.offsetX,L.offsetY),J=J.scale(1/L.scaleX,1/L.scaleY);const rt=_.createPattern(L.canvas,"repeat");return rt.setTransform(J),rt}}o.TilingPattern=S}),((f,o,m)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.convertBlackAndWhiteToRGBA=O,o.convertToRGBA=y,o.grayToRGBA=G;var s=m(1);function y(q){switch(q.kind){case s.ImageKind.GRAYSCALE_1BPP:return O(q);case s.ImageKind.RGB_24BPP:return N(q)}return null}function O({src:q,srcPos:d=0,dest:c,width:h,height:x,nonBlackColor:E=4294967295,inverseDecode:p=!1}){const S=s.FeatureTest.isLittleEndian?4278190080:255,[C,_]=p?[E,S]:[S,E],P=h>>3,V=h&7,H=q.length;c=new Uint32Array(c.buffer);let k=0;for(let L=0;L<x;L++){for(const rt=d+P;d<rt;d++){const et=d<H?q[d]:255;c[k++]=et&128?_:C,c[k++]=et&64?_:C,c[k++]=et&32?_:C,c[k++]=et&16?_:C,c[k++]=et&8?_:C,c[k++]=et&4?_:C,c[k++]=et&2?_:C,c[k++]=et&1?_:C}if(V===0)continue;const J=d<H?q[d++]:255;for(let rt=0;rt<V;rt++)c[k++]=J&1<<7-rt?_:C}return{srcPos:d,destPos:k}}function N({src:q,srcPos:d=0,dest:c,destPos:h=0,width:x,height:E}){let p=0;const S=q.length>>2,C=new Uint32Array(q.buffer,d,S);if(s.FeatureTest.isLittleEndian){for(;p<S-2;p+=3,h+=4){const _=C[p],P=C[p+1],V=C[p+2];c[h]=_|4278190080,c[h+1]=_>>>24|P<<8|4278190080,c[h+2]=P>>>16|V<<16|4278190080,c[h+3]=V>>>8|4278190080}for(let _=p*4,P=q.length;_<P;_+=3)c[h++]=q[_]|q[_+1]<<8|q[_+2]<<16|4278190080}else{for(;p<S-2;p+=3,h+=4){const _=C[p],P=C[p+1],V=C[p+2];c[h]=_|255,c[h+1]=_<<24|P>>>8|255,c[h+2]=P<<16|V>>>16|255,c[h+3]=V<<8|255}for(let _=p*4,P=q.length;_<P;_+=3)c[h++]=q[_]<<24|q[_+1]<<16|q[_+2]<<8|255}return{srcPos:d,destPos:h}}function G(q,d){if(s.FeatureTest.isLittleEndian)for(let c=0,h=q.length;c<h;c++)d[c]=q[c]*65793|4278190080;else for(let c=0,h=q.length;c<h;c++)d[c]=q[c]*16843008|255}}),((f,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.GlobalWorkerOptions=void 0;const m=Object.create(null);o.GlobalWorkerOptions=m,m.workerPort=null,m.workerSrc=""}),((f,o,m)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.MessageHandler=void 0;var s=m(1);const y={DATA:1,ERROR:2},O={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function N(q){switch(q instanceof Error||typeof q=="object"&&q!==null||(0,s.unreachable)('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),q.name){case"AbortException":return new s.AbortException(q.message);case"MissingPDFException":return new s.MissingPDFException(q.message);case"PasswordException":return new s.PasswordException(q.message,q.code);case"UnexpectedResponseException":return new s.UnexpectedResponseException(q.message,q.status);case"UnknownErrorException":return new s.UnknownErrorException(q.message,q.details);default:return new s.UnknownErrorException(q.message,q.toString())}}class G{constructor(d,c,h){this.sourceName=d,this.targetName=c,this.comObj=h,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),this._onComObjOnMessage=x=>{const E=x.data;if(E.targetName!==this.sourceName)return;if(E.stream){this.#e(E);return}if(E.callback){const S=E.callbackId,C=this.callbackCapabilities[S];if(!C)throw new Error(`Cannot resolve callback ${S}`);if(delete this.callbackCapabilities[S],E.callback===y.DATA)C.resolve(E.data);else if(E.callback===y.ERROR)C.reject(N(E.reason));else throw new Error("Unexpected callback case");return}const p=this.actionHandler[E.action];if(!p)throw new Error(`Unknown action from worker: ${E.action}`);if(E.callbackId){const S=this.sourceName,C=E.sourceName;new Promise(function(_){_(p(E.data))}).then(function(_){h.postMessage({sourceName:S,targetName:C,callback:y.DATA,callbackId:E.callbackId,data:_})},function(_){h.postMessage({sourceName:S,targetName:C,callback:y.ERROR,callbackId:E.callbackId,reason:N(_)})});return}if(E.streamId){this.#t(E);return}p(E.data)},h.addEventListener("message",this._onComObjOnMessage)}on(d,c){const h=this.actionHandler;if(h[d])throw new Error(`There is already an actionName called "${d}"`);h[d]=c}send(d,c,h){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:d,data:c},h)}sendWithPromise(d,c,h){const x=this.callbackId++,E=new s.PromiseCapability;this.callbackCapabilities[x]=E;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:d,callbackId:x,data:c},h)}catch(p){E.reject(p)}return E.promise}sendWithStream(d,c,h,x){const E=this.streamId++,p=this.sourceName,S=this.targetName,C=this.comObj;return new ReadableStream({start:_=>{const P=new s.PromiseCapability;return this.streamControllers[E]={controller:_,startCall:P,pullCall:null,cancelCall:null,isClosed:!1},C.postMessage({sourceName:p,targetName:S,action:d,streamId:E,data:c,desiredSize:_.desiredSize},x),P.promise},pull:_=>{const P=new s.PromiseCapability;return this.streamControllers[E].pullCall=P,C.postMessage({sourceName:p,targetName:S,stream:O.PULL,streamId:E,desiredSize:_.desiredSize}),P.promise},cancel:_=>{(0,s.assert)(_ instanceof Error,"cancel must have a valid reason");const P=new s.PromiseCapability;return this.streamControllers[E].cancelCall=P,this.streamControllers[E].isClosed=!0,C.postMessage({sourceName:p,targetName:S,stream:O.CANCEL,streamId:E,reason:N(_)}),P.promise}},h)}#t(d){const c=d.streamId,h=this.sourceName,x=d.sourceName,E=this.comObj,p=this,S=this.actionHandler[d.action],C={enqueue(_,P=1,V){if(this.isCancelled)return;const H=this.desiredSize;this.desiredSize-=P,H>0&&this.desiredSize<=0&&(this.sinkCapability=new s.PromiseCapability,this.ready=this.sinkCapability.promise),E.postMessage({sourceName:h,targetName:x,stream:O.ENQUEUE,streamId:c,chunk:_},V)},close(){this.isCancelled||(this.isCancelled=!0,E.postMessage({sourceName:h,targetName:x,stream:O.CLOSE,streamId:c}),delete p.streamSinks[c])},error(_){(0,s.assert)(_ instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,E.postMessage({sourceName:h,targetName:x,stream:O.ERROR,streamId:c,reason:N(_)}))},sinkCapability:new s.PromiseCapability,onPull:null,onCancel:null,isCancelled:!1,desiredSize:d.desiredSize,ready:null};C.sinkCapability.resolve(),C.ready=C.sinkCapability.promise,this.streamSinks[c]=C,new Promise(function(_){_(S(d.data,C))}).then(function(){E.postMessage({sourceName:h,targetName:x,stream:O.START_COMPLETE,streamId:c,success:!0})},function(_){E.postMessage({sourceName:h,targetName:x,stream:O.START_COMPLETE,streamId:c,reason:N(_)})})}#e(d){const c=d.streamId,h=this.sourceName,x=d.sourceName,E=this.comObj,p=this.streamControllers[c],S=this.streamSinks[c];switch(d.stream){case O.START_COMPLETE:d.success?p.startCall.resolve():p.startCall.reject(N(d.reason));break;case O.PULL_COMPLETE:d.success?p.pullCall.resolve():p.pullCall.reject(N(d.reason));break;case O.PULL:if(!S){E.postMessage({sourceName:h,targetName:x,stream:O.PULL_COMPLETE,streamId:c,success:!0});break}S.desiredSize<=0&&d.desiredSize>0&&S.sinkCapability.resolve(),S.desiredSize=d.desiredSize,new Promise(function(C){C(S.onPull?.())}).then(function(){E.postMessage({sourceName:h,targetName:x,stream:O.PULL_COMPLETE,streamId:c,success:!0})},function(C){E.postMessage({sourceName:h,targetName:x,stream:O.PULL_COMPLETE,streamId:c,reason:N(C)})});break;case O.ENQUEUE:if((0,s.assert)(p,"enqueue should have stream controller"),p.isClosed)break;p.controller.enqueue(d.chunk);break;case O.CLOSE:if((0,s.assert)(p,"close should have stream controller"),p.isClosed)break;p.isClosed=!0,p.controller.close(),this.#n(p,c);break;case O.ERROR:(0,s.assert)(p,"error should have stream controller"),p.controller.error(N(d.reason)),this.#n(p,c);break;case O.CANCEL_COMPLETE:d.success?p.cancelCall.resolve():p.cancelCall.reject(N(d.reason)),this.#n(p,c);break;case O.CANCEL:if(!S)break;new Promise(function(C){C(S.onCancel?.(N(d.reason)))}).then(function(){E.postMessage({sourceName:h,targetName:x,stream:O.CANCEL_COMPLETE,streamId:c,success:!0})},function(C){E.postMessage({sourceName:h,targetName:x,stream:O.CANCEL_COMPLETE,streamId:c,reason:N(C)})}),S.sinkCapability.reject(N(d.reason)),S.isCancelled=!0,delete this.streamSinks[c];break;default:throw new Error("Unexpected stream case")}}async#n(d,c){await Promise.allSettled([d.startCall?.promise,d.pullCall?.promise,d.cancelCall?.promise]),delete this.streamControllers[c]}destroy(){this.comObj.removeEventListener("message",this._onComObjOnMessage)}}o.MessageHandler=G}),((f,o,m)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.Metadata=void 0;var s=m(1);class y{#t;#e;constructor({parsedData:N,rawData:G}){this.#t=N,this.#e=G}getRaw(){return this.#e}get(N){return this.#t.get(N)??null}getAll(){return(0,s.objectFromMap)(this.#t)}has(N){return this.#t.has(N)}}o.Metadata=y}),((f,o,m)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.OptionalContentConfig=void 0;var s=m(1),y=m(8);const O=Symbol("INTERNAL");class N{#t=!0;constructor(d,c){this.name=d,this.intent=c}get visible(){return this.#t}_setVisible(d,c){d!==O&&(0,s.unreachable)("Internal method `_setVisible` called."),this.#t=c}}class G{#t=null;#e=new Map;#n=null;#a=null;constructor(d){if(this.name=null,this.creator=null,d!==null){this.name=d.name,this.creator=d.creator,this.#a=d.order;for(const c of d.groups)this.#e.set(c.id,new N(c.name,c.intent));if(d.baseState==="OFF")for(const c of this.#e.values())c._setVisible(O,!1);for(const c of d.on)this.#e.get(c)._setVisible(O,!0);for(const c of d.off)this.#e.get(c)._setVisible(O,!1);this.#n=this.getHash()}}#o(d){const c=d.length;if(c<2)return!0;const h=d[0];for(let x=1;x<c;x++){const E=d[x];let p;if(Array.isArray(E))p=this.#o(E);else if(this.#e.has(E))p=this.#e.get(E).visible;else return(0,s.warn)(`Optional content group not found: ${E}`),!0;switch(h){case"And":if(!p)return!1;break;case"Or":if(p)return!0;break;case"Not":return!p;default:return!0}}return h==="And"}isVisible(d){if(this.#e.size===0)return!0;if(!d)return(0,s.warn)("Optional content group not defined."),!0;if(d.type==="OCG")return this.#e.has(d.id)?this.#e.get(d.id).visible:((0,s.warn)(`Optional content group not found: ${d.id}`),!0);if(d.type==="OCMD"){if(d.expression)return this.#o(d.expression);if(!d.policy||d.policy==="AnyOn"){for(const c of d.ids){if(!this.#e.has(c))return(0,s.warn)(`Optional content group not found: ${c}`),!0;if(this.#e.get(c).visible)return!0}return!1}else if(d.policy==="AllOn"){for(const c of d.ids){if(!this.#e.has(c))return(0,s.warn)(`Optional content group not found: ${c}`),!0;if(!this.#e.get(c).visible)return!1}return!0}else if(d.policy==="AnyOff"){for(const c of d.ids){if(!this.#e.has(c))return(0,s.warn)(`Optional content group not found: ${c}`),!0;if(!this.#e.get(c).visible)return!0}return!1}else if(d.policy==="AllOff"){for(const c of d.ids){if(!this.#e.has(c))return(0,s.warn)(`Optional content group not found: ${c}`),!0;if(this.#e.get(c).visible)return!1}return!0}return(0,s.warn)(`Unknown optional content policy ${d.policy}.`),!0}return(0,s.warn)(`Unknown group type ${d.type}.`),!0}setVisibility(d,c=!0){if(!this.#e.has(d)){(0,s.warn)(`Optional content group not found: ${d}`);return}this.#e.get(d)._setVisible(O,!!c),this.#t=null}get hasInitialVisibility(){return this.#n===null||this.getHash()===this.#n}getOrder(){return this.#e.size?this.#a?this.#a.slice():[...this.#e.keys()]:null}getGroups(){return this.#e.size>0?(0,s.objectFromMap)(this.#e):null}getGroup(d){return this.#e.get(d)||null}getHash(){if(this.#t!==null)return this.#t;const d=new y.MurmurHash3_64;for(const[c,h]of this.#e)d.update(`${c}:${h.visible}`);return this.#t=d.hexdigest()}}o.OptionalContentConfig=G}),((f,o,m)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.PDFDataTransportStream=void 0;var s=m(1),y=m(6);class O{constructor({length:d,initialData:c,progressiveDone:h=!1,contentDispositionFilename:x=null,disableRange:E=!1,disableStream:p=!1},S){if((0,s.assert)(S,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.'),this._queuedChunks=[],this._progressiveDone=h,this._contentDispositionFilename=x,c?.length>0){const C=c instanceof Uint8Array&&c.byteLength===c.buffer.byteLength?c.buffer:new Uint8Array(c).buffer;this._queuedChunks.push(C)}this._pdfDataRangeTransport=S,this._isStreamingSupported=!p,this._isRangeSupported=!E,this._contentLength=d,this._fullRequestReader=null,this._rangeReaders=[],this._pdfDataRangeTransport.addRangeListener((C,_)=>{this._onReceiveData({begin:C,chunk:_})}),this._pdfDataRangeTransport.addProgressListener((C,_)=>{this._onProgress({loaded:C,total:_})}),this._pdfDataRangeTransport.addProgressiveReadListener(C=>{this._onReceiveData({chunk:C})}),this._pdfDataRangeTransport.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),this._pdfDataRangeTransport.transportReady()}_onReceiveData({begin:d,chunk:c}){const h=c instanceof Uint8Array&&c.byteLength===c.buffer.byteLength?c.buffer:new Uint8Array(c).buffer;if(d===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(h):this._queuedChunks.push(h);else{const x=this._rangeReaders.some(function(E){return E._begin!==d?!1:(E._enqueue(h),!0)});(0,s.assert)(x,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}_onProgress(d){d.total===void 0?this._rangeReaders[0]?.onProgress?.({loaded:d.loaded}):this._fullRequestReader?.onProgress?.({loaded:d.loaded,total:d.total})}_onProgressiveDone(){this._fullRequestReader?.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(d){const c=this._rangeReaders.indexOf(d);c>=0&&this._rangeReaders.splice(c,1)}getFullReader(){(0,s.assert)(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const d=this._queuedChunks;return this._queuedChunks=null,new N(this,d,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(d,c){if(c<=this._progressiveDataLength)return null;const h=new G(this,d,c);return this._pdfDataRangeTransport.requestDataRange(d,c),this._rangeReaders.push(h),h}cancelAllRequests(d){this._fullRequestReader?.cancel(d);for(const c of this._rangeReaders.slice(0))c.cancel(d);this._pdfDataRangeTransport.abort()}}o.PDFDataTransportStream=O;class N{constructor(d,c,h=!1,x=null){this._stream=d,this._done=h||!1,this._filename=(0,y.isPdfFile)(x)?x:null,this._queuedChunks=c||[],this._loaded=0;for(const E of this._queuedChunks)this._loaded+=E.byteLength;this._requests=[],this._headersReady=Promise.resolve(),d._fullRequestReader=this,this.onProgress=null}_enqueue(d){this._done||(this._requests.length>0?this._requests.shift().resolve({value:d,done:!1}):this._queuedChunks.push(d),this._loaded+=d.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const d=new s.PromiseCapability;return this._requests.push(d),d.promise}cancel(d){this._done=!0;for(const c of this._requests)c.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class G{constructor(d,c,h){this._stream=d,this._begin=c,this._end=h,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(d){if(!this._done){if(this._requests.length===0)this._queuedChunk=d;else{this._requests.shift().resolve({value:d,done:!1});for(const h of this._requests)h.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const c=this._queuedChunk;return this._queuedChunk=null,{value:c,done:!1}}if(this._done)return{value:void 0,done:!0};const d=new s.PromiseCapability;return this._requests.push(d),d.promise}cancel(d){this._done=!0;for(const c of this._requests)c.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}}),((f,o,m)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.PDFFetchStream=void 0;var s=m(1),y=m(20);function O(h,x,E){return{method:"GET",headers:h,signal:E.signal,mode:"cors",credentials:x?"include":"same-origin",redirect:"follow"}}function N(h){const x=new Headers;for(const E in h){const p=h[E];p!==void 0&&x.append(E,p)}return x}function G(h){return h instanceof Uint8Array?h.buffer:h instanceof ArrayBuffer?h:((0,s.warn)(`getArrayBuffer - unexpected data format: ${h}`),new Uint8Array(h).buffer)}class q{constructor(x){this.source=x,this.isHttp=/^https?:/i.test(x.url),this.httpHeaders=this.isHttp&&x.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return(0,s.assert)(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new d(this),this._fullRequestReader}getRangeReader(x,E){if(E<=this._progressiveDataLength)return null;const p=new c(this,x,E);return this._rangeRequestReaders.push(p),p}cancelAllRequests(x){this._fullRequestReader?.cancel(x);for(const E of this._rangeRequestReaders.slice(0))E.cancel(x)}}o.PDFFetchStream=q;class d{constructor(x){this._stream=x,this._reader=null,this._loaded=0,this._filename=null;const E=x.source;this._withCredentials=E.withCredentials||!1,this._contentLength=E.length,this._headersCapability=new s.PromiseCapability,this._disableRange=E.disableRange||!1,this._rangeChunkSize=E.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!E.disableStream,this._isRangeSupported=!E.disableRange,this._headers=N(this._stream.httpHeaders);const p=E.url;fetch(p,O(this._headers,this._withCredentials,this._abortController)).then(S=>{if(!(0,y.validateResponseStatus)(S.status))throw(0,y.createResponseStatusError)(S.status,p);this._reader=S.body.getReader(),this._headersCapability.resolve();const C=V=>S.headers.get(V),{allowRangeRequests:_,suggestedLength:P}=(0,y.validateRangeRequestCapabilities)({getResponseHeader:C,isHttp:this._stream.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=_,this._contentLength=P||this._contentLength,this._filename=(0,y.extractFilenameFromHeader)(C),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new s.AbortException("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._headersCapability.promise;const{value:x,done:E}=await this._reader.read();return E?{value:x,done:E}:(this._loaded+=x.byteLength,this.onProgress?.({loaded:this._loaded,total:this._contentLength}),{value:G(x),done:!1})}cancel(x){this._reader?.cancel(x),this._abortController.abort()}}class c{constructor(x,E,p){this._stream=x,this._reader=null,this._loaded=0;const S=x.source;this._withCredentials=S.withCredentials||!1,this._readCapability=new s.PromiseCapability,this._isStreamingSupported=!S.disableStream,this._abortController=new AbortController,this._headers=N(this._stream.httpHeaders),this._headers.append("Range",`bytes=${E}-${p-1}`);const C=S.url;fetch(C,O(this._headers,this._withCredentials,this._abortController)).then(_=>{if(!(0,y.validateResponseStatus)(_.status))throw(0,y.createResponseStatusError)(_.status,C);this._readCapability.resolve(),this._reader=_.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._readCapability.promise;const{value:x,done:E}=await this._reader.read();return E?{value:x,done:E}:(this._loaded+=x.byteLength,this.onProgress?.({loaded:this._loaded}),{value:G(x),done:!1})}cancel(x){this._reader?.cancel(x),this._abortController.abort()}}}),((f,o,m)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.createResponseStatusError=q,o.extractFilenameFromHeader=G,o.validateRangeRequestCapabilities=N,o.validateResponseStatus=d;var s=m(1),y=m(21),O=m(6);function N({getResponseHeader:c,isHttp:h,rangeChunkSize:x,disableRange:E}){const p={allowRangeRequests:!1,suggestedLength:void 0},S=parseInt(c("Content-Length"),10);return!Number.isInteger(S)||(p.suggestedLength=S,S<=2*x)||E||!h||c("Accept-Ranges")!=="bytes"||(c("Content-Encoding")||"identity")!=="identity"||(p.allowRangeRequests=!0),p}function G(c){const h=c("Content-Disposition");if(h){let x=(0,y.getFilenameFromContentDispositionHeader)(h);if(x.includes("%"))try{x=decodeURIComponent(x)}catch{}if((0,O.isPdfFile)(x))return x}return null}function q(c,h){return c===404||c===0&&h.startsWith("file:")?new s.MissingPDFException('Missing PDF "'+h+'".'):new s.UnexpectedResponseException(`Unexpected server response (${c}) while retrieving PDF "${h}".`,c)}function d(c){return c===200||c===206}}),((f,o,m)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.getFilenameFromContentDispositionHeader=y;var s=m(1);function y(O){let N=!0,G=q("filename\\*","i").exec(O);if(G){G=G[1];let S=x(G);return S=unescape(S),S=E(S),S=p(S),c(S)}if(G=h(O),G){const S=p(G);return c(S)}if(G=q("filename","i").exec(O),G){G=G[1];let S=x(G);return S=p(S),c(S)}function q(S,C){return new RegExp("(?:^|;)\\s*"+S+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',C)}function d(S,C){if(S){if(!/^[\x00-\xFF]+$/.test(C))return C;try{const _=new TextDecoder(S,{fatal:!0}),P=(0,s.stringToBytes)(C);C=_.decode(P),N=!1}catch{}}return C}function c(S){return N&&/[\x80-\xff]/.test(S)&&(S=d("utf-8",S),N&&(S=d("iso-8859-1",S))),S}function h(S){const C=[];let _;const P=q("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(_=P.exec(S))!==null;){let[,H,k,L]=_;if(H=parseInt(H,10),H in C){if(H===0)break;continue}C[H]=[k,L]}const V=[];for(let H=0;H<C.length&&H in C;++H){let[k,L]=C[H];L=x(L),k&&(L=unescape(L),H===0&&(L=E(L))),V.push(L)}return V.join("")}function x(S){if(S.startsWith('"')){const C=S.slice(1).split('\\"');for(let _=0;_<C.length;++_){const P=C[_].indexOf('"');P!==-1&&(C[_]=C[_].slice(0,P),C.length=_+1),C[_]=C[_].replaceAll(/\\(.)/g,"$1")}S=C.join('"')}return S}function E(S){const C=S.indexOf("'");if(C===-1)return S;const _=S.slice(0,C),V=S.slice(C+1).replace(/^[^']*'/,"");return d(_,V)}function p(S){return!S.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(S)?S:S.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(C,_,P,V){if(P==="q"||P==="Q")return V=V.replaceAll("_"," "),V=V.replaceAll(/=([0-9a-fA-F]{2})/g,function(H,k){return String.fromCharCode(parseInt(k,16))}),d(_,V);try{V=atob(V)}catch{}return d(_,V)})}return""}}),((f,o,m)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.PDFNetworkStream=void 0;var s=m(1),y=m(20);const O=200,N=206;function G(x){const E=x.response;return typeof E!="string"?E:(0,s.stringToBytes)(E).buffer}class q{constructor(E,p={}){this.url=E,this.isHttp=/^https?:/i.test(E),this.httpHeaders=this.isHttp&&p.httpHeaders||Object.create(null),this.withCredentials=p.withCredentials||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}requestRange(E,p,S){const C={begin:E,end:p};for(const _ in S)C[_]=S[_];return this.request(C)}requestFull(E){return this.request(E)}request(E){const p=new XMLHttpRequest,S=this.currXhrId++,C=this.pendingRequests[S]={xhr:p};p.open("GET",this.url),p.withCredentials=this.withCredentials;for(const _ in this.httpHeaders){const P=this.httpHeaders[_];P!==void 0&&p.setRequestHeader(_,P)}return this.isHttp&&"begin"in E&&"end"in E?(p.setRequestHeader("Range",`bytes=${E.begin}-${E.end-1}`),C.expectedStatus=N):C.expectedStatus=O,p.responseType="arraybuffer",E.onError&&(p.onerror=function(_){E.onError(p.status)}),p.onreadystatechange=this.onStateChange.bind(this,S),p.onprogress=this.onProgress.bind(this,S),C.onHeadersReceived=E.onHeadersReceived,C.onDone=E.onDone,C.onError=E.onError,C.onProgress=E.onProgress,p.send(null),S}onProgress(E,p){const S=this.pendingRequests[E];S&&S.onProgress?.(p)}onStateChange(E,p){const S=this.pendingRequests[E];if(!S)return;const C=S.xhr;if(C.readyState>=2&&S.onHeadersReceived&&(S.onHeadersReceived(),delete S.onHeadersReceived),C.readyState!==4||!(E in this.pendingRequests))return;if(delete this.pendingRequests[E],C.status===0&&this.isHttp){S.onError?.(C.status);return}const _=C.status||O;if(!(_===O&&S.expectedStatus===N)&&_!==S.expectedStatus){S.onError?.(C.status);return}const V=G(C);if(_===N){const H=C.getResponseHeader("Content-Range"),k=/bytes (\d+)-(\d+)\/(\d+)/.exec(H);S.onDone({begin:parseInt(k[1],10),chunk:V})}else V?S.onDone({begin:0,chunk:V}):S.onError?.(C.status)}getRequestXhr(E){return this.pendingRequests[E].xhr}isPendingRequest(E){return E in this.pendingRequests}abortRequest(E){const p=this.pendingRequests[E].xhr;delete this.pendingRequests[E],p.abort()}}class d{constructor(E){this._source=E,this._manager=new q(E.url,{httpHeaders:E.httpHeaders,withCredentials:E.withCredentials}),this._rangeChunkSize=E.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(E){const p=this._rangeRequestReaders.indexOf(E);p>=0&&this._rangeRequestReaders.splice(p,1)}getFullReader(){return(0,s.assert)(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new c(this._manager,this._source),this._fullRequestReader}getRangeReader(E,p){const S=new h(this._manager,E,p);return S.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(S),S}cancelAllRequests(E){this._fullRequestReader?.cancel(E);for(const p of this._rangeRequestReaders.slice(0))p.cancel(E)}}o.PDFNetworkStream=d;class c{constructor(E,p){this._manager=E;const S={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=p.url,this._fullRequestId=E.requestFull(S),this._headersReceivedCapability=new s.PromiseCapability,this._disableRange=p.disableRange||!1,this._contentLength=p.length,this._rangeChunkSize=p.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const E=this._fullRequestId,p=this._manager.getRequestXhr(E),S=P=>p.getResponseHeader(P),{allowRangeRequests:C,suggestedLength:_}=(0,y.validateRangeRequestCapabilities)({getResponseHeader:S,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});C&&(this._isRangeSupported=!0),this._contentLength=_||this._contentLength,this._filename=(0,y.extractFilenameFromHeader)(S),this._isRangeSupported&&this._manager.abortRequest(E),this._headersReceivedCapability.resolve()}_onDone(E){if(E&&(this._requests.length>0?this._requests.shift().resolve({value:E.chunk,done:!1}):this._cachedChunks.push(E.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const p of this._requests)p.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(E){this._storedError=(0,y.createResponseStatusError)(E,this._url),this._headersReceivedCapability.reject(this._storedError);for(const p of this._requests)p.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(E){this.onProgress?.({loaded:E.loaded,total:E.lengthComputable?E.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersReceivedCapability.promise}async read(){if(this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const E=new s.PromiseCapability;return this._requests.push(E),E.promise}cancel(E){this._done=!0,this._headersReceivedCapability.reject(E);for(const p of this._requests)p.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class h{constructor(E,p,S){this._manager=E;const C={onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=E.url,this._requestId=E.requestRange(p,S,C),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_close(){this.onClosed?.(this)}_onDone(E){const p=E.chunk;this._requests.length>0?this._requests.shift().resolve({value:p,done:!1}):this._queuedChunk=p,this._done=!0;for(const S of this._requests)S.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(E){this._storedError=(0,y.createResponseStatusError)(E,this._url);for(const p of this._requests)p.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(E){this.isStreamingSupported||this.onProgress?.({loaded:E.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const p=this._queuedChunk;return this._queuedChunk=null,{value:p,done:!1}}if(this._done)return{value:void 0,done:!0};const E=new s.PromiseCapability;return this._requests.push(E),E.promise}cancel(E){this._done=!0;for(const p of this._requests)p.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}}),((f,o,m)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.PDFNodeStream=void 0;var s=m(1),y=m(20);const O=/^file:\/\/\/[a-zA-Z]:\//;function N(S){const C=require$$5,_=C.parse(S);return _.protocol==="file:"||_.host?_:/^[a-z]:[/\\]/i.test(S)?C.parse(`file:///${S}`):(_.host||(_.protocol="file:"),_)}class G{constructor(C){this.source=C,this.url=N(C.url),this.isHttp=this.url.protocol==="http:"||this.url.protocol==="https:",this.isFsUrl=this.url.protocol==="file:",this.httpHeaders=this.isHttp&&C.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return(0,s.assert)(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=this.isFsUrl?new E(this):new h(this),this._fullRequestReader}getRangeReader(C,_){if(_<=this._progressiveDataLength)return null;const P=this.isFsUrl?new p(this,C,_):new x(this,C,_);return this._rangeRequestReaders.push(P),P}cancelAllRequests(C){this._fullRequestReader?.cancel(C);for(const _ of this._rangeRequestReaders.slice(0))_.cancel(C)}}o.PDFNodeStream=G;class q{constructor(C){this._url=C.url,this._done=!1,this._storedError=null,this.onProgress=null;const _=C.source;this._contentLength=_.length,this._loaded=0,this._filename=null,this._disableRange=_.disableRange||!1,this._rangeChunkSize=_.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!_.disableStream,this._isRangeSupported=!_.disableRange,this._readableStream=null,this._readCapability=new s.PromiseCapability,this._headersCapability=new s.PromiseCapability}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const C=this._readableStream.read();return C===null?(this._readCapability=new s.PromiseCapability,this.read()):(this._loaded+=C.length,this.onProgress?.({loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(C).buffer,done:!1})}cancel(C){if(!this._readableStream){this._error(C);return}this._readableStream.destroy(C)}_error(C){this._storedError=C,this._readCapability.resolve()}_setReadableStream(C){this._readableStream=C,C.on("readable",()=>{this._readCapability.resolve()}),C.on("end",()=>{C.destroy(),this._done=!0,this._readCapability.resolve()}),C.on("error",_=>{this._error(_)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new s.AbortException("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class d{constructor(C){this._url=C.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=new s.PromiseCapability;const _=C.source;this._isStreamingSupported=!_.disableStream}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const C=this._readableStream.read();return C===null?(this._readCapability=new s.PromiseCapability,this.read()):(this._loaded+=C.length,this.onProgress?.({loaded:this._loaded}),{value:new Uint8Array(C).buffer,done:!1})}cancel(C){if(!this._readableStream){this._error(C);return}this._readableStream.destroy(C)}_error(C){this._storedError=C,this._readCapability.resolve()}_setReadableStream(C){this._readableStream=C,C.on("readable",()=>{this._readCapability.resolve()}),C.on("end",()=>{C.destroy(),this._done=!0,this._readCapability.resolve()}),C.on("error",_=>{this._error(_)}),this._storedError&&this._readableStream.destroy(this._storedError)}}function c(S,C){return{protocol:S.protocol,auth:S.auth,host:S.hostname,port:S.port,path:S.path,method:"GET",headers:C}}class h extends q{constructor(C){super(C);const _=P=>{if(P.statusCode===404){const L=new s.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=L,this._headersCapability.reject(L);return}this._headersCapability.resolve(),this._setReadableStream(P);const V=L=>this._readableStream.headers[L.toLowerCase()],{allowRangeRequests:H,suggestedLength:k}=(0,y.validateRangeRequestCapabilities)({getResponseHeader:V,isHttp:C.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=H,this._contentLength=k||this._contentLength,this._filename=(0,y.extractFilenameFromHeader)(V)};if(this._request=null,this._url.protocol==="http:"){const P=require$$5;this._request=P.request(c(this._url,C.httpHeaders),_)}else{const P=require$$5;this._request=P.request(c(this._url,C.httpHeaders),_)}this._request.on("error",P=>{this._storedError=P,this._headersCapability.reject(P)}),this._request.end()}}class x extends d{constructor(C,_,P){super(C),this._httpHeaders={};for(const H in C.httpHeaders){const k=C.httpHeaders[H];k!==void 0&&(this._httpHeaders[H]=k)}this._httpHeaders.Range=`bytes=${_}-${P-1}`;const V=H=>{if(H.statusCode===404){const k=new s.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=k;return}this._setReadableStream(H)};if(this._request=null,this._url.protocol==="http:"){const H=require$$5;this._request=H.request(c(this._url,this._httpHeaders),V)}else{const H=require$$5;this._request=H.request(c(this._url,this._httpHeaders),V)}this._request.on("error",H=>{this._storedError=H}),this._request.end()}}class E extends q{constructor(C){super(C);let _=decodeURIComponent(this._url.path);O.test(this._url.href)&&(_=_.replace(/^\//,""));const P=require$$5;P.lstat(_,(V,H)=>{if(V){V.code==="ENOENT"&&(V=new s.MissingPDFException(`Missing PDF "${_}".`)),this._storedError=V,this._headersCapability.reject(V);return}this._contentLength=H.size,this._setReadableStream(P.createReadStream(_)),this._headersCapability.resolve()})}}class p extends d{constructor(C,_,P){super(C);let V=decodeURIComponent(this._url.path);O.test(this._url.href)&&(V=V.replace(/^\//,""));const H=require$$5;this._setReadableStream(H.createReadStream(V,{start:_,end:P-1}))}}}),((f,o,m)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.SVGGraphics=void 0;var s=m(6),y=m(1);const O={fontStyle:"normal",fontWeight:"normal",fillColor:"#000000"},N="http://www.w3.org/XML/1998/namespace",G="http://www.w3.org/1999/xlink",q=["butt","round","square"],d=["miter","round","bevel"],c=function(H,k="",L=!1){if(URL.createObjectURL&&typeof Blob<"u"&&!L)return URL.createObjectURL(new Blob([H],{type:k}));const J="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let rt=`data:${k};base64,`;for(let et=0,lt=H.length;et<lt;et+=3){const yt=H[et]&255,Dt=H[et+1]&255,Mt=H[et+2]&255,qt=yt>>2,Yt=(yt&3)<<4|Dt>>4,nt=et+1<lt?(Dt&15)<<2|Mt>>6:64,W=et+2<lt?Mt&63:64;rt+=J[qt]+J[Yt]+J[nt]+J[W]}return rt},h=(function(){const H=new Uint8Array([137,80,78,71,13,10,26,10]),k=12,L=new Int32Array(256);for(let Mt=0;Mt<256;Mt++){let qt=Mt;for(let Yt=0;Yt<8;Yt++)qt=qt&1?3988292384^qt>>1&2147483647:qt>>1&2147483647;L[Mt]=qt}function J(Mt,qt,Yt){let nt=-1;for(let W=qt;W<Yt;W++){const D=(nt^Mt[W])&255,T=L[D];nt=nt>>>8^T}return nt^-1}function rt(Mt,qt,Yt,nt){let W=nt;const D=qt.length;Yt[W]=D>>24&255,Yt[W+1]=D>>16&255,Yt[W+2]=D>>8&255,Yt[W+3]=D&255,W+=4,Yt[W]=Mt.charCodeAt(0)&255,Yt[W+1]=Mt.charCodeAt(1)&255,Yt[W+2]=Mt.charCodeAt(2)&255,Yt[W+3]=Mt.charCodeAt(3)&255,W+=4,Yt.set(qt,W),W+=qt.length;const T=J(Yt,nt+4,W);Yt[W]=T>>24&255,Yt[W+1]=T>>16&255,Yt[W+2]=T>>8&255,Yt[W+3]=T&255}function et(Mt,qt,Yt){let nt=1,W=0;for(let D=qt;D<Yt;++D)nt=(nt+(Mt[D]&255))%65521,W=(W+nt)%65521;return W<<16|nt}function lt(Mt){if(!y.isNodeJS)return yt(Mt);try{const qt=parseInt(process.versions.node)>=8?Mt:Buffer.from(Mt),Yt=require$$5.deflateSync(qt,{level:9});return Yt instanceof Uint8Array?Yt:new Uint8Array(Yt)}catch(qt){(0,y.warn)("Not compressing PNG because zlib.deflateSync is unavailable: "+qt)}return yt(Mt)}function yt(Mt){let qt=Mt.length;const Yt=65535,nt=Math.ceil(qt/Yt),W=new Uint8Array(2+qt+nt*5+4);let D=0;W[D++]=120,W[D++]=156;let T=0;for(;qt>Yt;)W[D++]=0,W[D++]=255,W[D++]=255,W[D++]=0,W[D++]=0,W.set(Mt.subarray(T,T+Yt),D),D+=Yt,T+=Yt,qt-=Yt;W[D++]=1,W[D++]=qt&255,W[D++]=qt>>8&255,W[D++]=~qt&65535&255,W[D++]=(~qt&65535)>>8&255,W.set(Mt.subarray(T),D),D+=Mt.length-T;const R=et(Mt,0,Mt.length);return W[D++]=R>>24&255,W[D++]=R>>16&255,W[D++]=R>>8&255,W[D++]=R&255,W}function Dt(Mt,qt,Yt,nt){const W=Mt.width,D=Mt.height;let T,R,v;const F=Mt.data;switch(qt){case y.ImageKind.GRAYSCALE_1BPP:R=0,T=1,v=W+7>>3;break;case y.ImageKind.RGB_24BPP:R=2,T=8,v=W*3;break;case y.ImageKind.RGBA_32BPP:R=6,T=8,v=W*4;break;default:throw new Error("invalid format")}const U=new Uint8Array((1+v)*D);let $=0,K=0;for(let at=0;at<D;++at)U[$++]=0,U.set(F.subarray(K,K+v),$),K+=v,$+=v;if(qt===y.ImageKind.GRAYSCALE_1BPP&&nt){$=0;for(let at=0;at<D;at++){$++;for(let st=0;st<v;st++)U[$++]^=255}}const b=new Uint8Array([W>>24&255,W>>16&255,W>>8&255,W&255,D>>24&255,D>>16&255,D>>8&255,D&255,T,R,0,0,0]),j=lt(U),I=H.length+k*3+b.length+j.length,Q=new Uint8Array(I);let Y=0;return Q.set(H,Y),Y+=H.length,rt("IHDR",b,Q,Y),Y+=k+b.length,rt("IDATA",j,Q,Y),Y+=k+j.length,rt("IEND",new Uint8Array(0),Q,Y),c(Q,"image/png",Yt)}return function(qt,Yt,nt){const W=qt.kind===void 0?y.ImageKind.GRAYSCALE_1BPP:qt.kind;return Dt(qt,W,Yt,nt)}})();class x{constructor(){this.fontSizeScale=1,this.fontWeight=O.fontWeight,this.fontSize=0,this.textMatrix=y.IDENTITY_MATRIX,this.fontMatrix=y.FONT_IDENTITY_MATRIX,this.leading=0,this.textRenderingMode=y.TextRenderingMode.FILL,this.textMatrixScale=1,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRise=0,this.fillColor=O.fillColor,this.strokeColor="#000000",this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.lineJoin="",this.lineCap="",this.miterLimit=0,this.dashArray=[],this.dashPhase=0,this.dependencies=[],this.activeClipUrl=null,this.clipGroup=null,this.maskId=""}clone(){return Object.create(this)}setCurrentPoint(k,L){this.x=k,this.y=L}}function E(H){let k=[];const L=[];for(const J of H){if(J.fn==="save"){k.push({fnId:92,fn:"group",items:[]}),L.push(k),k=k.at(-1).items;continue}J.fn==="restore"?k=L.pop():k.push(J)}return k}function p(H){if(Number.isInteger(H))return H.toString();const k=H.toFixed(10);let L=k.length-1;if(k[L]!=="0")return k;do L--;while(k[L]==="0");return k.substring(0,k[L]==="."?L:L+1)}function S(H){if(H[4]===0&&H[5]===0){if(H[1]===0&&H[2]===0)return H[0]===1&&H[3]===1?"":`scale(${p(H[0])} ${p(H[3])})`;if(H[0]===H[3]&&H[1]===-H[2]){const k=Math.acos(H[0])*180/Math.PI;return`rotate(${p(k)})`}}else if(H[0]===1&&H[1]===0&&H[2]===0&&H[3]===1)return`translate(${p(H[4])} ${p(H[5])})`;return`matrix(${p(H[0])} ${p(H[1])} ${p(H[2])} ${p(H[3])} ${p(H[4])} ${p(H[5])})`}let C=0,_=0,P=0;class V{constructor(k,L,J=!1){(0,s.deprecated)("The SVG back-end is no longer maintained and *may* be removed in the future."),this.svgFactory=new s.DOMSVGFactory,this.current=new x,this.transformMatrix=y.IDENTITY_MATRIX,this.transformStack=[],this.extraStack=[],this.commonObjs=k,this.objs=L,this.pendingClip=null,this.pendingEOFill=!1,this.embedFonts=!1,this.embeddedFonts=Object.create(null),this.cssStyle=null,this.forceDataSchema=!!J,this._operatorIdMapping=[];for(const rt in y.OPS)this._operatorIdMapping[y.OPS[rt]]=rt}getObject(k,L=null){return typeof k=="string"?k.startsWith("g_")?this.commonObjs.get(k):this.objs.get(k):L}save(){this.transformStack.push(this.transformMatrix);const k=this.current;this.extraStack.push(k),this.current=k.clone()}restore(){this.transformMatrix=this.transformStack.pop(),this.current=this.extraStack.pop(),this.pendingClip=null,this.tgrp=null}group(k){this.save(),this.executeOpTree(k),this.restore()}loadDependencies(k){const L=k.fnArray,J=k.argsArray;for(let rt=0,et=L.length;rt<et;rt++)if(L[rt]===y.OPS.dependency)for(const lt of J[rt]){const yt=lt.startsWith("g_")?this.commonObjs:this.objs,Dt=new Promise(Mt=>{yt.get(lt,Mt)});this.current.dependencies.push(Dt)}return Promise.all(this.current.dependencies)}transform(k,L,J,rt,et,lt){const yt=[k,L,J,rt,et,lt];this.transformMatrix=y.Util.transform(this.transformMatrix,yt),this.tgrp=null}getSVG(k,L){this.viewport=L;const J=this._initialize(L);return this.loadDependencies(k).then(()=>(this.transformMatrix=y.IDENTITY_MATRIX,this.executeOpTree(this.convertOpList(k)),J))}convertOpList(k){const L=this._operatorIdMapping,J=k.argsArray,rt=k.fnArray,et=[];for(let lt=0,yt=rt.length;lt<yt;lt++){const Dt=rt[lt];et.push({fnId:Dt,fn:L[Dt],args:J[lt]})}return E(et)}executeOpTree(k){for(const L of k){const J=L.fn,rt=L.fnId,et=L.args;switch(rt|0){case y.OPS.beginText:this.beginText();break;case y.OPS.dependency:break;case y.OPS.setLeading:this.setLeading(et);break;case y.OPS.setLeadingMoveText:this.setLeadingMoveText(et[0],et[1]);break;case y.OPS.setFont:this.setFont(et);break;case y.OPS.showText:this.showText(et[0]);break;case y.OPS.showSpacedText:this.showText(et[0]);break;case y.OPS.endText:this.endText();break;case y.OPS.moveText:this.moveText(et[0],et[1]);break;case y.OPS.setCharSpacing:this.setCharSpacing(et[0]);break;case y.OPS.setWordSpacing:this.setWordSpacing(et[0]);break;case y.OPS.setHScale:this.setHScale(et[0]);break;case y.OPS.setTextMatrix:this.setTextMatrix(et[0],et[1],et[2],et[3],et[4],et[5]);break;case y.OPS.setTextRise:this.setTextRise(et[0]);break;case y.OPS.setTextRenderingMode:this.setTextRenderingMode(et[0]);break;case y.OPS.setLineWidth:this.setLineWidth(et[0]);break;case y.OPS.setLineJoin:this.setLineJoin(et[0]);break;case y.OPS.setLineCap:this.setLineCap(et[0]);break;case y.OPS.setMiterLimit:this.setMiterLimit(et[0]);break;case y.OPS.setFillRGBColor:this.setFillRGBColor(et[0],et[1],et[2]);break;case y.OPS.setStrokeRGBColor:this.setStrokeRGBColor(et[0],et[1],et[2]);break;case y.OPS.setStrokeColorN:this.setStrokeColorN(et);break;case y.OPS.setFillColorN:this.setFillColorN(et);break;case y.OPS.shadingFill:this.shadingFill(et[0]);break;case y.OPS.setDash:this.setDash(et[0],et[1]);break;case y.OPS.setRenderingIntent:this.setRenderingIntent(et[0]);break;case y.OPS.setFlatness:this.setFlatness(et[0]);break;case y.OPS.setGState:this.setGState(et[0]);break;case y.OPS.fill:this.fill();break;case y.OPS.eoFill:this.eoFill();break;case y.OPS.stroke:this.stroke();break;case y.OPS.fillStroke:this.fillStroke();break;case y.OPS.eoFillStroke:this.eoFillStroke();break;case y.OPS.clip:this.clip("nonzero");break;case y.OPS.eoClip:this.clip("evenodd");break;case y.OPS.paintSolidColorImageMask:this.paintSolidColorImageMask();break;case y.OPS.paintImageXObject:this.paintImageXObject(et[0]);break;case y.OPS.paintInlineImageXObject:this.paintInlineImageXObject(et[0]);break;case y.OPS.paintImageMaskXObject:this.paintImageMaskXObject(et[0]);break;case y.OPS.paintFormXObjectBegin:this.paintFormXObjectBegin(et[0],et[1]);break;case y.OPS.paintFormXObjectEnd:this.paintFormXObjectEnd();break;case y.OPS.closePath:this.closePath();break;case y.OPS.closeStroke:this.closeStroke();break;case y.OPS.closeFillStroke:this.closeFillStroke();break;case y.OPS.closeEOFillStroke:this.closeEOFillStroke();break;case y.OPS.nextLine:this.nextLine();break;case y.OPS.transform:this.transform(et[0],et[1],et[2],et[3],et[4],et[5]);break;case y.OPS.constructPath:this.constructPath(et[0],et[1]);break;case y.OPS.endPath:this.endPath();break;case 92:this.group(L.items);break;default:(0,y.warn)(`Unimplemented operator ${J}`);break}}}setWordSpacing(k){this.current.wordSpacing=k}setCharSpacing(k){this.current.charSpacing=k}nextLine(){this.moveText(0,this.current.leading)}setTextMatrix(k,L,J,rt,et,lt){const yt=this.current;yt.textMatrix=yt.lineMatrix=[k,L,J,rt,et,lt],yt.textMatrixScale=Math.hypot(k,L),yt.x=yt.lineX=0,yt.y=yt.lineY=0,yt.xcoords=[],yt.ycoords=[],yt.tspan=this.svgFactory.createElement("svg:tspan"),yt.tspan.setAttributeNS(null,"font-family",yt.fontFamily),yt.tspan.setAttributeNS(null,"font-size",`${p(yt.fontSize)}px`),yt.tspan.setAttributeNS(null,"y",p(-yt.y)),yt.txtElement=this.svgFactory.createElement("svg:text"),yt.txtElement.append(yt.tspan)}beginText(){const k=this.current;k.x=k.lineX=0,k.y=k.lineY=0,k.textMatrix=y.IDENTITY_MATRIX,k.lineMatrix=y.IDENTITY_MATRIX,k.textMatrixScale=1,k.tspan=this.svgFactory.createElement("svg:tspan"),k.txtElement=this.svgFactory.createElement("svg:text"),k.txtgrp=this.svgFactory.createElement("svg:g"),k.xcoords=[],k.ycoords=[]}moveText(k,L){const J=this.current;J.x=J.lineX+=k,J.y=J.lineY+=L,J.xcoords=[],J.ycoords=[],J.tspan=this.svgFactory.createElement("svg:tspan"),J.tspan.setAttributeNS(null,"font-family",J.fontFamily),J.tspan.setAttributeNS(null,"font-size",`${p(J.fontSize)}px`),J.tspan.setAttributeNS(null,"y",p(-J.y))}showText(k){const L=this.current,J=L.font,rt=L.fontSize;if(rt===0)return;const et=L.fontSizeScale,lt=L.charSpacing,yt=L.wordSpacing,Dt=L.fontDirection,Mt=L.textHScale*Dt,qt=J.vertical,Yt=qt?1:-1,nt=J.defaultVMetrics,W=rt*L.fontMatrix[0];let D=0;for(const v of k){if(v===null){D+=Dt*yt;continue}else if(typeof v=="number"){D+=Yt*v*rt/1e3;continue}const F=(v.isSpace?yt:0)+lt,U=v.fontChar;let $,K,b=v.width;if(qt){let I;const Q=v.vmetric||nt;I=v.vmetric?Q[1]:b*.5,I=-I*W;const Y=Q[2]*W;b=Q?-Q[0]:b,$=I/et,K=(D+Y)/et}else $=D/et,K=0;(v.isInFont||J.missingFile)&&(L.xcoords.push(L.x+$),qt&&L.ycoords.push(-L.y+K),L.tspan.textContent+=U);const j=qt?b*W-F*Dt:b*W+F*Dt;D+=j}L.tspan.setAttributeNS(null,"x",L.xcoords.map(p).join(" ")),qt?L.tspan.setAttributeNS(null,"y",L.ycoords.map(p).join(" ")):L.tspan.setAttributeNS(null,"y",p(-L.y)),qt?L.y-=D:L.x+=D*Mt,L.tspan.setAttributeNS(null,"font-family",L.fontFamily),L.tspan.setAttributeNS(null,"font-size",`${p(L.fontSize)}px`),L.fontStyle!==O.fontStyle&&L.tspan.setAttributeNS(null,"font-style",L.fontStyle),L.fontWeight!==O.fontWeight&&L.tspan.setAttributeNS(null,"font-weight",L.fontWeight);const T=L.textRenderingMode&y.TextRenderingMode.FILL_STROKE_MASK;if(T===y.TextRenderingMode.FILL||T===y.TextRenderingMode.FILL_STROKE?(L.fillColor!==O.fillColor&&L.tspan.setAttributeNS(null,"fill",L.fillColor),L.fillAlpha<1&&L.tspan.setAttributeNS(null,"fill-opacity",L.fillAlpha)):L.textRenderingMode===y.TextRenderingMode.ADD_TO_PATH?L.tspan.setAttributeNS(null,"fill","transparent"):L.tspan.setAttributeNS(null,"fill","none"),T===y.TextRenderingMode.STROKE||T===y.TextRenderingMode.FILL_STROKE){const v=1/(L.textMatrixScale||1);this._setStrokeAttributes(L.tspan,v)}let R=L.textMatrix;L.textRise!==0&&(R=R.slice(),R[5]+=L.textRise),L.txtElement.setAttributeNS(null,"transform",`${S(R)} scale(${p(Mt)}, -1)`),L.txtElement.setAttributeNS(N,"xml:space","preserve"),L.txtElement.append(L.tspan),L.txtgrp.append(L.txtElement),this._ensureTransformGroup().append(L.txtElement)}setLeadingMoveText(k,L){this.setLeading(-L),this.moveText(k,L)}addFontStyle(k){if(!k.data)throw new Error('addFontStyle: No font data available, ensure that the "fontExtraProperties" API parameter is set.');this.cssStyle||(this.cssStyle=this.svgFactory.createElement("svg:style"),this.cssStyle.setAttributeNS(null,"type","text/css"),this.defs.append(this.cssStyle));const L=c(k.data,k.mimetype,this.forceDataSchema);this.cssStyle.textContent+=`@font-face { font-family: "${k.loadedName}"; src: url(${L}); }
`}setFont(k){const L=this.current,J=this.commonObjs.get(k[0]);let rt=k[1];L.font=J,this.embedFonts&&!J.missingFile&&!this.embeddedFonts[J.loadedName]&&(this.addFontStyle(J),this.embeddedFonts[J.loadedName]=J),L.fontMatrix=J.fontMatrix||y.FONT_IDENTITY_MATRIX;let et="normal";J.black?et="900":J.bold&&(et="bold");const lt=J.italic?"italic":"normal";rt<0?(rt=-rt,L.fontDirection=-1):L.fontDirection=1,L.fontSize=rt,L.fontFamily=J.loadedName,L.fontWeight=et,L.fontStyle=lt,L.tspan=this.svgFactory.createElement("svg:tspan"),L.tspan.setAttributeNS(null,"y",p(-L.y)),L.xcoords=[],L.ycoords=[]}endText(){const k=this.current;k.textRenderingMode&y.TextRenderingMode.ADD_TO_PATH_FLAG&&k.txtElement?.hasChildNodes()&&(k.element=k.txtElement,this.clip("nonzero"),this.endPath())}setLineWidth(k){k>0&&(this.current.lineWidth=k)}setLineCap(k){this.current.lineCap=q[k]}setLineJoin(k){this.current.lineJoin=d[k]}setMiterLimit(k){this.current.miterLimit=k}setStrokeAlpha(k){this.current.strokeAlpha=k}setStrokeRGBColor(k,L,J){this.current.strokeColor=y.Util.makeHexColor(k,L,J)}setFillAlpha(k){this.current.fillAlpha=k}setFillRGBColor(k,L,J){this.current.fillColor=y.Util.makeHexColor(k,L,J),this.current.tspan=this.svgFactory.createElement("svg:tspan"),this.current.xcoords=[],this.current.ycoords=[]}setStrokeColorN(k){this.current.strokeColor=this._makeColorN_Pattern(k)}setFillColorN(k){this.current.fillColor=this._makeColorN_Pattern(k)}shadingFill(k){const{width:L,height:J}=this.viewport,rt=y.Util.inverseTransform(this.transformMatrix),[et,lt,yt,Dt]=y.Util.getAxialAlignedBoundingBox([0,0,L,J],rt),Mt=this.svgFactory.createElement("svg:rect");Mt.setAttributeNS(null,"x",et),Mt.setAttributeNS(null,"y",lt),Mt.setAttributeNS(null,"width",yt-et),Mt.setAttributeNS(null,"height",Dt-lt),Mt.setAttributeNS(null,"fill",this._makeShadingPattern(k)),this.current.fillAlpha<1&&Mt.setAttributeNS(null,"fill-opacity",this.current.fillAlpha),this._ensureTransformGroup().append(Mt)}_makeColorN_Pattern(k){return k[0]==="TilingPattern"?this._makeTilingPattern(k):this._makeShadingPattern(k)}_makeTilingPattern(k){const L=k[1],J=k[2],rt=k[3]||y.IDENTITY_MATRIX,[et,lt,yt,Dt]=k[4],Mt=k[5],qt=k[6],Yt=k[7],nt=`shading${P++}`,[W,D,T,R]=y.Util.normalizeRect([...y.Util.applyTransform([et,lt],rt),...y.Util.applyTransform([yt,Dt],rt)]),[v,F]=y.Util.singularValueDecompose2dScale(rt),U=Mt*v,$=qt*F,K=this.svgFactory.createElement("svg:pattern");K.setAttributeNS(null,"id",nt),K.setAttributeNS(null,"patternUnits","userSpaceOnUse"),K.setAttributeNS(null,"width",U),K.setAttributeNS(null,"height",$),K.setAttributeNS(null,"x",`${W}`),K.setAttributeNS(null,"y",`${D}`);const b=this.svg,j=this.transformMatrix,I=this.current.fillColor,Q=this.current.strokeColor,Y=this.svgFactory.create(T-W,R-D);if(this.svg=Y,this.transformMatrix=rt,Yt===2){const at=y.Util.makeHexColor(...L);this.current.fillColor=at,this.current.strokeColor=at}return this.executeOpTree(this.convertOpList(J)),this.svg=b,this.transformMatrix=j,this.current.fillColor=I,this.current.strokeColor=Q,K.append(Y.childNodes[0]),this.defs.append(K),`url(#${nt})`}_makeShadingPattern(k){switch(typeof k=="string"&&(k=this.objs.get(k)),k[0]){case"RadialAxial":const L=`shading${P++}`,J=k[3];let rt;switch(k[1]){case"axial":const et=k[4],lt=k[5];rt=this.svgFactory.createElement("svg:linearGradient"),rt.setAttributeNS(null,"id",L),rt.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),rt.setAttributeNS(null,"x1",et[0]),rt.setAttributeNS(null,"y1",et[1]),rt.setAttributeNS(null,"x2",lt[0]),rt.setAttributeNS(null,"y2",lt[1]);break;case"radial":const yt=k[4],Dt=k[5],Mt=k[6],qt=k[7];rt=this.svgFactory.createElement("svg:radialGradient"),rt.setAttributeNS(null,"id",L),rt.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),rt.setAttributeNS(null,"cx",Dt[0]),rt.setAttributeNS(null,"cy",Dt[1]),rt.setAttributeNS(null,"r",qt),rt.setAttributeNS(null,"fx",yt[0]),rt.setAttributeNS(null,"fy",yt[1]),rt.setAttributeNS(null,"fr",Mt);break;default:throw new Error(`Unknown RadialAxial type: ${k[1]}`)}for(const et of J){const lt=this.svgFactory.createElement("svg:stop");lt.setAttributeNS(null,"offset",et[0]),lt.setAttributeNS(null,"stop-color",et[1]),rt.append(lt)}return this.defs.append(rt),`url(#${L})`;case"Mesh":return(0,y.warn)("Unimplemented pattern Mesh"),null;case"Dummy":return"hotpink";default:throw new Error(`Unknown IR type: ${k[0]}`)}}setDash(k,L){this.current.dashArray=k,this.current.dashPhase=L}constructPath(k,L){const J=this.current;let rt=J.x,et=J.y,lt=[],yt=0;for(const Dt of k)switch(Dt|0){case y.OPS.rectangle:rt=L[yt++],et=L[yt++];const Mt=L[yt++],qt=L[yt++],Yt=rt+Mt,nt=et+qt;lt.push("M",p(rt),p(et),"L",p(Yt),p(et),"L",p(Yt),p(nt),"L",p(rt),p(nt),"Z");break;case y.OPS.moveTo:rt=L[yt++],et=L[yt++],lt.push("M",p(rt),p(et));break;case y.OPS.lineTo:rt=L[yt++],et=L[yt++],lt.push("L",p(rt),p(et));break;case y.OPS.curveTo:rt=L[yt+4],et=L[yt+5],lt.push("C",p(L[yt]),p(L[yt+1]),p(L[yt+2]),p(L[yt+3]),p(rt),p(et)),yt+=6;break;case y.OPS.curveTo2:lt.push("C",p(rt),p(et),p(L[yt]),p(L[yt+1]),p(L[yt+2]),p(L[yt+3])),rt=L[yt+2],et=L[yt+3],yt+=4;break;case y.OPS.curveTo3:rt=L[yt+2],et=L[yt+3],lt.push("C",p(L[yt]),p(L[yt+1]),p(rt),p(et),p(rt),p(et)),yt+=4;break;case y.OPS.closePath:lt.push("Z");break}lt=lt.join(" "),J.path&&k.length>0&&k[0]!==y.OPS.rectangle&&k[0]!==y.OPS.moveTo?lt=J.path.getAttributeNS(null,"d")+lt:(J.path=this.svgFactory.createElement("svg:path"),this._ensureTransformGroup().append(J.path)),J.path.setAttributeNS(null,"d",lt),J.path.setAttributeNS(null,"fill","none"),J.element=J.path,J.setCurrentPoint(rt,et)}endPath(){const k=this.current;if(k.path=null,!this.pendingClip)return;if(!k.element){this.pendingClip=null;return}const L=`clippath${C++}`,J=this.svgFactory.createElement("svg:clipPath");J.setAttributeNS(null,"id",L),J.setAttributeNS(null,"transform",S(this.transformMatrix));const rt=k.element.cloneNode(!0);if(this.pendingClip==="evenodd"?rt.setAttributeNS(null,"clip-rule","evenodd"):rt.setAttributeNS(null,"clip-rule","nonzero"),this.pendingClip=null,J.append(rt),this.defs.append(J),k.activeClipUrl){k.clipGroup=null;for(const et of this.extraStack)et.clipGroup=null;J.setAttributeNS(null,"clip-path",k.activeClipUrl)}k.activeClipUrl=`url(#${L})`,this.tgrp=null}clip(k){this.pendingClip=k}closePath(){const k=this.current;if(k.path){const L=`${k.path.getAttributeNS(null,"d")}Z`;k.path.setAttributeNS(null,"d",L)}}setLeading(k){this.current.leading=-k}setTextRise(k){this.current.textRise=k}setTextRenderingMode(k){this.current.textRenderingMode=k}setHScale(k){this.current.textHScale=k/100}setRenderingIntent(k){}setFlatness(k){}setGState(k){for(const[L,J]of k)switch(L){case"LW":this.setLineWidth(J);break;case"LC":this.setLineCap(J);break;case"LJ":this.setLineJoin(J);break;case"ML":this.setMiterLimit(J);break;case"D":this.setDash(J[0],J[1]);break;case"RI":this.setRenderingIntent(J);break;case"FL":this.setFlatness(J);break;case"Font":this.setFont(J);break;case"CA":this.setStrokeAlpha(J);break;case"ca":this.setFillAlpha(J);break;default:(0,y.warn)(`Unimplemented graphic state operator ${L}`);break}}fill(){const k=this.current;k.element&&(k.element.setAttributeNS(null,"fill",k.fillColor),k.element.setAttributeNS(null,"fill-opacity",k.fillAlpha),this.endPath())}stroke(){const k=this.current;k.element&&(this._setStrokeAttributes(k.element),k.element.setAttributeNS(null,"fill","none"),this.endPath())}_setStrokeAttributes(k,L=1){const J=this.current;let rt=J.dashArray;L!==1&&rt.length>0&&(rt=rt.map(function(et){return L*et})),k.setAttributeNS(null,"stroke",J.strokeColor),k.setAttributeNS(null,"stroke-opacity",J.strokeAlpha),k.setAttributeNS(null,"stroke-miterlimit",p(J.miterLimit)),k.setAttributeNS(null,"stroke-linecap",J.lineCap),k.setAttributeNS(null,"stroke-linejoin",J.lineJoin),k.setAttributeNS(null,"stroke-width",p(L*J.lineWidth)+"px"),k.setAttributeNS(null,"stroke-dasharray",rt.map(p).join(" ")),k.setAttributeNS(null,"stroke-dashoffset",p(L*J.dashPhase)+"px")}eoFill(){this.current.element?.setAttributeNS(null,"fill-rule","evenodd"),this.fill()}fillStroke(){this.stroke(),this.fill()}eoFillStroke(){this.current.element?.setAttributeNS(null,"fill-rule","evenodd"),this.fillStroke()}closeStroke(){this.closePath(),this.stroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.closePath(),this.eoFillStroke()}paintSolidColorImageMask(){const k=this.svgFactory.createElement("svg:rect");k.setAttributeNS(null,"x","0"),k.setAttributeNS(null,"y","0"),k.setAttributeNS(null,"width","1px"),k.setAttributeNS(null,"height","1px"),k.setAttributeNS(null,"fill",this.current.fillColor),this._ensureTransformGroup().append(k)}paintImageXObject(k){const L=this.getObject(k);if(!L){(0,y.warn)(`Dependent image with object ID ${k} is not ready yet`);return}this.paintInlineImageXObject(L)}paintInlineImageXObject(k,L){const J=k.width,rt=k.height,et=h(k,this.forceDataSchema,!!L),lt=this.svgFactory.createElement("svg:rect");lt.setAttributeNS(null,"x","0"),lt.setAttributeNS(null,"y","0"),lt.setAttributeNS(null,"width",p(J)),lt.setAttributeNS(null,"height",p(rt)),this.current.element=lt,this.clip("nonzero");const yt=this.svgFactory.createElement("svg:image");yt.setAttributeNS(G,"xlink:href",et),yt.setAttributeNS(null,"x","0"),yt.setAttributeNS(null,"y",p(-rt)),yt.setAttributeNS(null,"width",p(J)+"px"),yt.setAttributeNS(null,"height",p(rt)+"px"),yt.setAttributeNS(null,"transform",`scale(${p(1/J)} ${p(-1/rt)})`),L?L.append(yt):this._ensureTransformGroup().append(yt)}paintImageMaskXObject(k){const L=this.getObject(k.data,k);if(L.bitmap){(0,y.warn)("paintImageMaskXObject: ImageBitmap support is not implemented, ensure that the `isOffscreenCanvasSupported` API parameter is disabled.");return}const J=this.current,rt=L.width,et=L.height,lt=J.fillColor;J.maskId=`mask${_++}`;const yt=this.svgFactory.createElement("svg:mask");yt.setAttributeNS(null,"id",J.maskId);const Dt=this.svgFactory.createElement("svg:rect");Dt.setAttributeNS(null,"x","0"),Dt.setAttributeNS(null,"y","0"),Dt.setAttributeNS(null,"width",p(rt)),Dt.setAttributeNS(null,"height",p(et)),Dt.setAttributeNS(null,"fill",lt),Dt.setAttributeNS(null,"mask",`url(#${J.maskId})`),this.defs.append(yt),this._ensureTransformGroup().append(Dt),this.paintInlineImageXObject(L,yt)}paintFormXObjectBegin(k,L){if(Array.isArray(k)&&k.length===6&&this.transform(k[0],k[1],k[2],k[3],k[4],k[5]),L){const J=L[2]-L[0],rt=L[3]-L[1],et=this.svgFactory.createElement("svg:rect");et.setAttributeNS(null,"x",L[0]),et.setAttributeNS(null,"y",L[1]),et.setAttributeNS(null,"width",p(J)),et.setAttributeNS(null,"height",p(rt)),this.current.element=et,this.clip("nonzero"),this.endPath()}}paintFormXObjectEnd(){}_initialize(k){const L=this.svgFactory.create(k.width,k.height),J=this.svgFactory.createElement("svg:defs");L.append(J),this.defs=J;const rt=this.svgFactory.createElement("svg:g");return rt.setAttributeNS(null,"transform",S(k.transform)),L.append(rt),this.svg=rt,L}_ensureClipGroup(){if(!this.current.clipGroup){const k=this.svgFactory.createElement("svg:g");k.setAttributeNS(null,"clip-path",this.current.activeClipUrl),this.svg.append(k),this.current.clipGroup=k}return this.current.clipGroup}_ensureTransformGroup(){return this.tgrp||(this.tgrp=this.svgFactory.createElement("svg:g"),this.tgrp.setAttributeNS(null,"transform",S(this.transformMatrix)),this.current.activeClipUrl?this._ensureClipGroup().append(this.tgrp):this.svg.append(this.tgrp)),this.tgrp}}o.SVGGraphics=V}),((f,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.XfaText=void 0;class m{static textContent(y){const O=[],N={items:O,styles:Object.create(null)};function G(q){if(!q)return;let d=null;const c=q.name;if(c==="#text")d=q.value;else if(m.shouldBuildText(c))q?.attributes?.textContent?d=q.attributes.textContent:q.value&&(d=q.value);else return;if(d!==null&&O.push({str:d}),!!q.children)for(const h of q.children)G(h)}return G(y),N}static shouldBuildText(y){return!(y==="textarea"||y==="input"||y==="option"||y==="select")}}o.XfaText=m}),((f,o,m)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.TextLayerRenderTask=void 0,o.renderTextLayer=S,o.updateTextLayer=C;var s=m(1),y=m(6);const O=1e5,N=30,G=.8,q=new Map;function d(_,P){let V;if(P&&s.FeatureTest.isOffscreenCanvasSupported)V=new OffscreenCanvas(_,_).getContext("2d",{alpha:!1});else{const H=document.createElement("canvas");H.width=H.height=_,V=H.getContext("2d",{alpha:!1})}return V}function c(_,P){const V=q.get(_);if(V)return V;const H=d(N,P);H.font=`${N}px ${_}`;const k=H.measureText("");let L=k.fontBoundingBoxAscent,J=Math.abs(k.fontBoundingBoxDescent);if(L){const et=L/(L+J);return q.set(_,et),H.canvas.width=H.canvas.height=0,et}H.strokeStyle="red",H.clearRect(0,0,N,N),H.strokeText("g",0,0);let rt=H.getImageData(0,0,N,N).data;J=0;for(let et=rt.length-1-3;et>=0;et-=4)if(rt[et]>0){J=Math.ceil(et/4/N);break}H.clearRect(0,0,N,N),H.strokeText("A",0,N),rt=H.getImageData(0,0,N,N).data,L=0;for(let et=0,lt=rt.length;et<lt;et+=4)if(rt[et]>0){L=N-Math.floor(et/4/N);break}if(H.canvas.width=H.canvas.height=0,L){const et=L/(L+J);return q.set(_,et),et}return q.set(_,G),G}function h(_,P,V){const H=document.createElement("span"),k={angle:0,canvasWidth:0,hasText:P.str!=="",hasEOL:P.hasEOL,fontSize:0};_._textDivs.push(H);const L=s.Util.transform(_._transform,P.transform);let J=Math.atan2(L[1],L[0]);const rt=V[P.fontName];rt.vertical&&(J+=Math.PI/2);const et=Math.hypot(L[2],L[3]),lt=et*c(rt.fontFamily,_._isOffscreenCanvasSupported);let yt,Dt;J===0?(yt=L[4],Dt=L[5]-lt):(yt=L[4]+lt*Math.sin(J),Dt=L[5]-lt*Math.cos(J));const Mt="calc(var(--scale-factor)*",qt=H.style;_._container===_._rootContainer?(qt.left=`${(100*yt/_._pageWidth).toFixed(2)}%`,qt.top=`${(100*Dt/_._pageHeight).toFixed(2)}%`):(qt.left=`${Mt}${yt.toFixed(2)}px)`,qt.top=`${Mt}${Dt.toFixed(2)}px)`),qt.fontSize=`${Mt}${et.toFixed(2)}px)`,qt.fontFamily=rt.fontFamily,k.fontSize=et,H.setAttribute("role","presentation"),H.textContent=P.str,H.dir=P.dir,_._fontInspectorEnabled&&(H.dataset.fontName=P.fontName),J!==0&&(k.angle=J*(180/Math.PI));let Yt=!1;if(P.str.length>1)Yt=!0;else if(P.str!==" "&&P.transform[0]!==P.transform[3]){const nt=Math.abs(P.transform[0]),W=Math.abs(P.transform[3]);nt!==W&&Math.max(nt,W)/Math.min(nt,W)>1.5&&(Yt=!0)}Yt&&(k.canvasWidth=rt.vertical?P.height:P.width),_._textDivProperties.set(H,k),_._isReadableStream&&_._layoutText(H)}function x(_){const{div:P,scale:V,properties:H,ctx:k,prevFontSize:L,prevFontFamily:J}=_,{style:rt}=P;let et="";if(H.canvasWidth!==0&&H.hasText){const{fontFamily:lt}=rt,{canvasWidth:yt,fontSize:Dt}=H;(L!==Dt||J!==lt)&&(k.font=`${Dt*V}px ${lt}`,_.prevFontSize=Dt,_.prevFontFamily=lt);const{width:Mt}=k.measureText(P.textContent);Mt>0&&(et=`scaleX(${yt*V/Mt})`)}H.angle!==0&&(et=`rotate(${H.angle}deg) ${et}`),et.length>0&&(rt.transform=et)}function E(_){if(_._canceled)return;const P=_._textDivs,V=_._capability;if(P.length>O){V.resolve();return}if(!_._isReadableStream)for(const k of P)_._layoutText(k);V.resolve()}class p{constructor({textContentSource:P,container:V,viewport:H,textDivs:k,textDivProperties:L,textContentItemsStr:J,isOffscreenCanvasSupported:rt}){this._textContentSource=P,this._isReadableStream=P instanceof ReadableStream,this._container=this._rootContainer=V,this._textDivs=k||[],this._textContentItemsStr=J||[],this._isOffscreenCanvasSupported=rt,this._fontInspectorEnabled=!!globalThis.FontInspector?.enabled,this._reader=null,this._textDivProperties=L||new WeakMap,this._canceled=!1,this._capability=new s.PromiseCapability,this._layoutTextParams={prevFontSize:null,prevFontFamily:null,div:null,scale:H.scale*(globalThis.devicePixelRatio||1),properties:null,ctx:d(0,rt)};const{pageWidth:et,pageHeight:lt,pageX:yt,pageY:Dt}=H.rawDims;this._transform=[1,0,0,-1,-yt,Dt+lt],this._pageWidth=et,this._pageHeight=lt,(0,y.setLayerDimensions)(V,H),this._capability.promise.finally(()=>{this._layoutTextParams=null}).catch(()=>{})}get promise(){return this._capability.promise}cancel(){this._canceled=!0,this._reader&&(this._reader.cancel(new s.AbortException("TextLayer task cancelled.")).catch(()=>{}),this._reader=null),this._capability.reject(new s.AbortException("TextLayer task cancelled."))}_processItems(P,V){for(const H of P){if(H.str===void 0){if(H.type==="beginMarkedContentProps"||H.type==="beginMarkedContent"){const k=this._container;this._container=document.createElement("span"),this._container.classList.add("markedContent"),H.id!==null&&this._container.setAttribute("id",`${H.id}`),k.append(this._container)}else H.type==="endMarkedContent"&&(this._container=this._container.parentNode);continue}this._textContentItemsStr.push(H.str),h(this,H,V)}}_layoutText(P){const V=this._layoutTextParams.properties=this._textDivProperties.get(P);if(this._layoutTextParams.div=P,x(this._layoutTextParams),V.hasText&&this._container.append(P),V.hasEOL){const H=document.createElement("br");H.setAttribute("role","presentation"),this._container.append(H)}}_render(){const P=new s.PromiseCapability;let V=Object.create(null);if(this._isReadableStream){const H=()=>{this._reader.read().then(({value:k,done:L})=>{if(L){P.resolve();return}Object.assign(V,k.styles),this._processItems(k.items,V),H()},P.reject)};this._reader=this._textContentSource.getReader(),H()}else if(this._textContentSource){const{items:H,styles:k}=this._textContentSource;this._processItems(H,k),P.resolve()}else throw new Error('No "textContentSource" parameter specified.');P.promise.then(()=>{V=null,E(this)},this._capability.reject)}}o.TextLayerRenderTask=p;function S(_){!_.textContentSource&&(_.textContent||_.textContentStream)&&((0,y.deprecated)("The TextLayerRender `textContent`/`textContentStream` parameters will be removed in the future, please use `textContentSource` instead."),_.textContentSource=_.textContent||_.textContentStream);const{container:P,viewport:V}=_,H=getComputedStyle(P),k=H.getPropertyValue("visibility"),L=parseFloat(H.getPropertyValue("--scale-factor"));k==="visible"&&(!L||Math.abs(L-V.scale)>1e-5)&&console.error("The `--scale-factor` CSS-variable must be set, to the same value as `viewport.scale`, either on the `container`-element itself or higher up in the DOM.");const J=new p(_);return J._render(),J}function C({container:_,viewport:P,textDivs:V,textDivProperties:H,isOffscreenCanvasSupported:k,mustRotate:L=!0,mustRescale:J=!0}){if(L&&(0,y.setLayerDimensions)(_,{rotation:P.rotation}),J){const rt=d(0,k),lt={prevFontSize:null,prevFontFamily:null,div:null,scale:P.scale*(globalThis.devicePixelRatio||1),properties:null,ctx:rt};for(const yt of V)lt.properties=H.get(yt),lt.div=yt,x(lt)}}}),((f,o,m)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.AnnotationEditorLayer=void 0;var s=m(1),y=m(4),O=m(28),N=m(33),G=m(6),q=m(34);class d{#t;#e=!1;#n=null;#a=this.pointerup.bind(this);#o=this.pointerdown.bind(this);#s=new Map;#r=!1;#l=!1;#c=!1;#i;static _initialized=!1;constructor({uiManager:h,pageIndex:x,div:E,accessibilityManager:p,annotationLayer:S,viewport:C,l10n:_}){const P=[O.FreeTextEditor,N.InkEditor,q.StampEditor];if(!d._initialized){d._initialized=!0;for(const V of P)V.initialize(_)}h.registerEditorTypes(P),this.#i=h,this.pageIndex=x,this.div=E,this.#t=p,this.#n=S,this.viewport=C,this.#i.addLayer(this)}get isEmpty(){return this.#s.size===0}updateToolbar(h){this.#i.updateToolbar(h)}updateMode(h=this.#i.getMode()){this.#p(),h===s.AnnotationEditorType.INK?(this.addInkEditorIfNeeded(!1),this.disableClick()):this.enableClick(),h!==s.AnnotationEditorType.NONE&&(this.div.classList.toggle("freeTextEditing",h===s.AnnotationEditorType.FREETEXT),this.div.classList.toggle("inkEditing",h===s.AnnotationEditorType.INK),this.div.classList.toggle("stampEditing",h===s.AnnotationEditorType.STAMP),this.div.hidden=!1)}addInkEditorIfNeeded(h){if(!h&&this.#i.getMode()!==s.AnnotationEditorType.INK)return;if(!h){for(const E of this.#s.values())if(E.isEmpty()){E.setInBackground();return}}this.#d({offsetX:0,offsetY:0},!1).setInBackground()}setEditingState(h){this.#i.setEditingState(h)}addCommands(h){this.#i.addCommands(h)}enable(){this.div.style.pointerEvents="auto";const h=new Set;for(const E of this.#s.values())E.enableEditing(),E.annotationElementId&&h.add(E.annotationElementId);if(!this.#n)return;const x=this.#n.getEditableAnnotations();for(const E of x){if(E.hide(),this.#i.isDeletedAnnotationElement(E.data.id)||h.has(E.data.id))continue;const p=this.deserialize(E);p&&(this.addOrRebuild(p),p.enableEditing())}}disable(){this.#c=!0,this.div.style.pointerEvents="none";const h=new Set;for(const x of this.#s.values()){if(x.disableEditing(),!x.annotationElementId||x.serialize()!==null){h.add(x.annotationElementId);continue}this.getEditableAnnotation(x.annotationElementId)?.show(),x.remove()}if(this.#n){const x=this.#n.getEditableAnnotations();for(const E of x){const{id:p}=E.data;h.has(p)||this.#i.isDeletedAnnotationElement(p)||E.show()}}this.#p(),this.isEmpty&&(this.div.hidden=!0),this.#c=!1}getEditableAnnotation(h){return this.#n?.getEditableAnnotation(h)||null}setActiveEditor(h){this.#i.getActive()!==h&&this.#i.setActiveEditor(h)}enableClick(){this.div.addEventListener("pointerdown",this.#o),this.div.addEventListener("pointerup",this.#a)}disableClick(){this.div.removeEventListener("pointerdown",this.#o),this.div.removeEventListener("pointerup",this.#a)}attach(h){this.#s.set(h.id,h);const{annotationElementId:x}=h;x&&this.#i.isDeletedAnnotationElement(x)&&this.#i.removeDeletedAnnotationElement(h)}detach(h){this.#s.delete(h.id),this.#t?.removePointerInTextLayer(h.contentDiv),!this.#c&&h.annotationElementId&&this.#i.addDeletedAnnotationElement(h)}remove(h){this.detach(h),this.#i.removeEditor(h),h.div.contains(document.activeElement)&&setTimeout(()=>{this.#i.focusMainContainer()},0),h.div.remove(),h.isAttachedToDOM=!1,this.#l||this.addInkEditorIfNeeded(!1)}changeParent(h){h.parent!==this&&(h.annotationElementId&&(this.#i.addDeletedAnnotationElement(h.annotationElementId),y.AnnotationEditor.deleteAnnotationElement(h),h.annotationElementId=null),this.attach(h),h.parent?.detach(h),h.setParent(this),h.div&&h.isAttachedToDOM&&(h.div.remove(),this.div.append(h.div)))}add(h){if(this.changeParent(h),this.#i.addEditor(h),this.attach(h),!h.isAttachedToDOM){const x=h.render();this.div.append(x),h.isAttachedToDOM=!0}h.fixAndSetPosition(),h.onceAdded(),this.#i.addToAnnotationStorage(h)}moveEditorInDOM(h){if(!h.isAttachedToDOM)return;const{activeElement:x}=document;h.div.contains(x)&&(h._focusEventsAllowed=!1,setTimeout(()=>{h.div.contains(document.activeElement)?h._focusEventsAllowed=!0:(h.div.addEventListener("focusin",()=>{h._focusEventsAllowed=!0},{once:!0}),x.focus())},0)),h._structTreeParentId=this.#t?.moveElementInDOM(this.div,h.div,h.contentDiv,!0)}addOrRebuild(h){h.needsToBeRebuilt()?h.rebuild():this.add(h)}addUndoableEditor(h){const x=()=>h._uiManager.rebuild(h),E=()=>{h.remove()};this.addCommands({cmd:x,undo:E,mustExec:!1})}getNextId(){return this.#i.getId()}#f(h){switch(this.#i.getMode()){case s.AnnotationEditorType.FREETEXT:return new O.FreeTextEditor(h);case s.AnnotationEditorType.INK:return new N.InkEditor(h);case s.AnnotationEditorType.STAMP:return new q.StampEditor(h)}return null}pasteEditor(h,x){this.#i.updateToolbar(h),this.#i.updateMode(h);const{offsetX:E,offsetY:p}=this.#h(),S=this.getNextId(),C=this.#f({parent:this,id:S,x:E,y:p,uiManager:this.#i,isCentered:!0,...x});C&&this.add(C)}deserialize(h){switch(h.annotationType??h.annotationEditorType){case s.AnnotationEditorType.FREETEXT:return O.FreeTextEditor.deserialize(h,this,this.#i);case s.AnnotationEditorType.INK:return N.InkEditor.deserialize(h,this,this.#i);case s.AnnotationEditorType.STAMP:return q.StampEditor.deserialize(h,this,this.#i)}return null}#d(h,x){const E=this.getNextId(),p=this.#f({parent:this,id:E,x:h.offsetX,y:h.offsetY,uiManager:this.#i,isCentered:x});return p&&this.add(p),p}#h(){const{x:h,y:x,width:E,height:p}=this.div.getBoundingClientRect(),S=Math.max(0,h),C=Math.max(0,x),_=Math.min(window.innerWidth,h+E),P=Math.min(window.innerHeight,x+p),V=(S+_)/2-h,H=(C+P)/2-x,[k,L]=this.viewport.rotation%180===0?[V,H]:[H,V];return{offsetX:k,offsetY:L}}addNewEditor(){this.#d(this.#h(),!0)}setSelected(h){this.#i.setSelected(h)}toggleSelected(h){this.#i.toggleSelected(h)}isSelected(h){return this.#i.isSelected(h)}unselect(h){this.#i.unselect(h)}pointerup(h){const{isMac:x}=s.FeatureTest.platform;if(!(h.button!==0||h.ctrlKey&&x)&&h.target===this.div&&this.#r){if(this.#r=!1,!this.#e){this.#e=!0;return}if(this.#i.getMode()===s.AnnotationEditorType.STAMP){this.#i.unselectAll();return}this.#d(h,!1)}}pointerdown(h){if(this.#r){this.#r=!1;return}const{isMac:x}=s.FeatureTest.platform;if(h.button!==0||h.ctrlKey&&x||h.target!==this.div)return;this.#r=!0;const E=this.#i.getActive();this.#e=!E||E.isEmpty()}findNewParent(h,x,E){const p=this.#i.findParent(x,E);return p===null||p===this?!1:(p.changeParent(h),!0)}destroy(){this.#i.getActive()?.parent===this&&(this.#i.commitOrRemove(),this.#i.setActiveEditor(null));for(const h of this.#s.values())this.#t?.removePointerInTextLayer(h.contentDiv),h.setParent(null),h.isAttachedToDOM=!1,h.div.remove();this.div=null,this.#s.clear(),this.#i.removeLayer(this)}#p(){this.#l=!0;for(const h of this.#s.values())h.isEmpty()&&h.remove();this.#l=!1}render({viewport:h}){this.viewport=h,(0,G.setLayerDimensions)(this.div,h);for(const x of this.#i.getEditors(this.pageIndex))this.add(x);this.updateMode()}update({viewport:h}){this.#i.commitOrRemove(),this.viewport=h,(0,G.setLayerDimensions)(this.div,{rotation:h.rotation}),this.updateMode()}get pageDimensions(){const{pageWidth:h,pageHeight:x}=this.viewport.rawDims;return[h,x]}}o.AnnotationEditorLayer=d}),((f,o,m)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.FreeTextEditor=void 0;var s=m(1),y=m(5),O=m(4),N=m(29);class G extends O.AnnotationEditor{#t=this.editorDivBlur.bind(this);#e=this.editorDivFocus.bind(this);#n=this.editorDivInput.bind(this);#a=this.editorDivKeydown.bind(this);#o;#s="";#r=`${this.id}-editor`;#l;#c=null;static _freeTextDefaultContent="";static _internalPadding=0;static _defaultColor=null;static _defaultFontSize=10;static get _keyboardManager(){const d=G.prototype,c=E=>E.isEmpty(),h=y.AnnotationEditorUIManager.TRANSLATE_SMALL,x=y.AnnotationEditorUIManager.TRANSLATE_BIG;return(0,s.shadow)(this,"_keyboardManager",new y.KeyboardManager([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],d.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],d.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],d._translateEmpty,{args:[-h,0],checker:c}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],d._translateEmpty,{args:[-x,0],checker:c}],[["ArrowRight","mac+ArrowRight"],d._translateEmpty,{args:[h,0],checker:c}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],d._translateEmpty,{args:[x,0],checker:c}],[["ArrowUp","mac+ArrowUp"],d._translateEmpty,{args:[0,-h],checker:c}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],d._translateEmpty,{args:[0,-x],checker:c}],[["ArrowDown","mac+ArrowDown"],d._translateEmpty,{args:[0,h],checker:c}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],d._translateEmpty,{args:[0,x],checker:c}]]))}static _type="freetext";constructor(d){super({...d,name:"freeTextEditor"}),this.#o=d.color||G._defaultColor||O.AnnotationEditor._defaultLineColor,this.#l=d.fontSize||G._defaultFontSize}static initialize(d){O.AnnotationEditor.initialize(d,{strings:["free_text2_default_content","editor_free_text2_aria_label"]});const c=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(c.getPropertyValue("--freetext-padding"))}static updateDefaultParams(d,c){switch(d){case s.AnnotationEditorParamsType.FREETEXT_SIZE:G._defaultFontSize=c;break;case s.AnnotationEditorParamsType.FREETEXT_COLOR:G._defaultColor=c;break}}updateParams(d,c){switch(d){case s.AnnotationEditorParamsType.FREETEXT_SIZE:this.#i(c);break;case s.AnnotationEditorParamsType.FREETEXT_COLOR:this.#f(c);break}}static get defaultPropertiesToUpdate(){return[[s.AnnotationEditorParamsType.FREETEXT_SIZE,G._defaultFontSize],[s.AnnotationEditorParamsType.FREETEXT_COLOR,G._defaultColor||O.AnnotationEditor._defaultLineColor]]}get propertiesToUpdate(){return[[s.AnnotationEditorParamsType.FREETEXT_SIZE,this.#l],[s.AnnotationEditorParamsType.FREETEXT_COLOR,this.#o]]}#i(d){const c=x=>{this.editorDiv.style.fontSize=`calc(${x}px * var(--scale-factor))`,this.translate(0,-(x-this.#l)*this.parentScale),this.#l=x,this.#h()},h=this.#l;this.addCommands({cmd:()=>{c(d)},undo:()=>{c(h)},mustExec:!0,type:s.AnnotationEditorParamsType.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})}#f(d){const c=this.#o;this.addCommands({cmd:()=>{this.#o=this.editorDiv.style.color=d},undo:()=>{this.#o=this.editorDiv.style.color=c},mustExec:!0,type:s.AnnotationEditorParamsType.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})}_translateEmpty(d,c){this._uiManager.translateSelectedEditors(d,c,!0)}getInitialTranslation(){const d=this.parentScale;return[-G._internalPadding*d,-(G._internalPadding+this.#l)*d]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){this.isInEditMode()||(this.parent.setEditingState(!1),this.parent.updateToolbar(s.AnnotationEditorType.FREETEXT),super.enableEditMode(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),this.editorDiv.addEventListener("keydown",this.#a),this.editorDiv.addEventListener("focus",this.#e),this.editorDiv.addEventListener("blur",this.#t),this.editorDiv.addEventListener("input",this.#n))}disableEditMode(){this.isInEditMode()&&(this.parent.setEditingState(!0),super.disableEditMode(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",this.#r),this._isDraggable=!0,this.editorDiv.removeEventListener("keydown",this.#a),this.editorDiv.removeEventListener("focus",this.#e),this.editorDiv.removeEventListener("blur",this.#t),this.editorDiv.removeEventListener("input",this.#n),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freeTextEditing"))}focusin(d){this._focusEventsAllowed&&(super.focusin(d),d.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(){if(this.width){this.#g();return}this.enableEditMode(),this.editorDiv.focus(),this._initialOptions?.isCentered&&this.center(),this._initialOptions=null}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freeTextEditing")),super.remove()}#d(){const d=this.editorDiv.getElementsByTagName("div");if(d.length===0)return this.editorDiv.innerText;const c=[];for(const h of d)c.push(h.innerText.replace(/\r\n?|\n/,""));return c.join(`
`)}#h(){const[d,c]=this.parentDimensions;let h;if(this.isAttachedToDOM)h=this.div.getBoundingClientRect();else{const{currentLayer:x,div:E}=this,p=E.style.display;E.style.display="hidden",x.div.append(this.div),h=E.getBoundingClientRect(),E.remove(),E.style.display=p}this.rotation%180===this.parentRotation%180?(this.width=h.width/d,this.height=h.height/c):(this.width=h.height/d,this.height=h.width/c),this.fixAndSetPosition()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const d=this.#s,c=this.#s=this.#d().trimEnd();if(d===c)return;const h=x=>{if(this.#s=x,!x){this.remove();return}this.#p(),this._uiManager.rebuild(this),this.#h()};this.addCommands({cmd:()=>{h(c)},undo:()=>{h(d)},mustExec:!1}),this.#h()}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}dblclick(d){this.enterInEditMode()}keydown(d){d.target===this.div&&d.key==="Enter"&&(this.enterInEditMode(),d.preventDefault())}editorDivKeydown(d){G._keyboardManager.exec(this,d)}editorDivFocus(d){this.isEditing=!0}editorDivBlur(d){this.isEditing=!1}editorDivInput(d){this.parent.div.classList.toggle("freeTextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(this.div)return this.div;let d,c;this.width&&(d=this.x,c=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",this.#r),this.enableEditing(),O.AnnotationEditor._l10nPromise.get("editor_free_text2_aria_label").then(x=>this.editorDiv?.setAttribute("aria-label",x)),O.AnnotationEditor._l10nPromise.get("free_text2_default_content").then(x=>this.editorDiv?.setAttribute("default-content",x)),this.editorDiv.contentEditable=!0;const{style:h}=this.editorDiv;if(h.fontSize=`calc(${this.#l}px * var(--scale-factor))`,h.color=this.#o,this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),(0,y.bindEvents)(this,this.div,["dblclick","keydown"]),this.width){const[x,E]=this.parentDimensions;if(this.annotationElementId){const{position:p}=this.#c;let[S,C]=this.getInitialTranslation();[S,C]=this.pageTranslationToScreen(S,C);const[_,P]=this.pageDimensions,[V,H]=this.pageTranslation;let k,L;switch(this.rotation){case 0:k=d+(p[0]-V)/_,L=c+this.height-(p[1]-H)/P;break;case 90:k=d+(p[0]-V)/_,L=c-(p[1]-H)/P,[S,C]=[C,-S];break;case 180:k=d-this.width+(p[0]-V)/_,L=c-(p[1]-H)/P,[S,C]=[-S,-C];break;case 270:k=d+(p[0]-V-this.height*P)/_,L=c+(p[1]-H-this.width*_)/P,[S,C]=[-C,S];break}this.setAt(k*x,L*E,S,C)}else this.setAt(d*x,c*E,this.width*x,this.height*E);this.#p(),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}#p(){if(this.editorDiv.replaceChildren(),!!this.#s)for(const d of this.#s.split(`
`)){const c=document.createElement("div");c.append(d?document.createTextNode(d):document.createElement("br")),this.editorDiv.append(c)}}get contentDiv(){return this.editorDiv}static deserialize(d,c,h){let x=null;if(d instanceof N.FreeTextAnnotationElement){const{data:{defaultAppearanceData:{fontSize:p,fontColor:S},rect:C,rotation:_,id:P},textContent:V,textPosition:H,parent:{page:{pageNumber:k}}}=d;if(!V||V.length===0)return null;x=d={annotationType:s.AnnotationEditorType.FREETEXT,color:Array.from(S),fontSize:p,value:V.join(`
`),position:H,pageIndex:k-1,rect:C,rotation:_,id:P,deleted:!1}}const E=super.deserialize(d,c,h);return E.#l=d.fontSize,E.#o=s.Util.makeHexColor(...d.color),E.#s=d.value,E.annotationElementId=d.id||null,E.#c=x,E}serialize(d=!1){if(this.isEmpty())return null;if(this.deleted)return{pageIndex:this.pageIndex,id:this.annotationElementId,deleted:!0};const c=G._internalPadding*this.parentScale,h=this.getRect(c,c),x=O.AnnotationEditor._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:this.#o),E={annotationType:s.AnnotationEditorType.FREETEXT,color:x,fontSize:this.#l,value:this.#s,pageIndex:this.pageIndex,rect:h,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return d?E:this.annotationElementId&&!this.#y(E)?null:(E.id=this.annotationElementId,E)}#y(d){const{value:c,fontSize:h,color:x,rect:E,pageIndex:p}=this.#c;return d.value!==c||d.fontSize!==h||d.rect.some((S,C)=>Math.abs(S-E[C])>=1)||d.color.some((S,C)=>S!==x[C])||d.pageIndex!==p}#g(d=!1){if(!this.annotationElementId)return;if(this.#h(),!d&&(this.width===0||this.height===0)){setTimeout(()=>this.#g(!0),0);return}const c=G._internalPadding*this.parentScale;this.#c.rect=this.getRect(c,c)}}o.FreeTextEditor=G}),((f,o,m)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.StampAnnotationElement=o.InkAnnotationElement=o.FreeTextAnnotationElement=o.AnnotationLayer=void 0;var s=m(1),y=m(6),O=m(3),N=m(30),G=m(31),q=m(32);const d=1e3,c=9,h=new WeakSet;function x(K){return{width:K[2]-K[0],height:K[3]-K[1]}}class E{static create(b){switch(b.data.annotationType){case s.AnnotationType.LINK:return new S(b);case s.AnnotationType.TEXT:return new C(b);case s.AnnotationType.WIDGET:switch(b.data.fieldType){case"Tx":return new P(b);case"Btn":return b.data.radioButton?new k(b):b.data.checkBox?new H(b):new L(b);case"Ch":return new J(b);case"Sig":return new V(b)}return new _(b);case s.AnnotationType.POPUP:return new rt(b);case s.AnnotationType.FREETEXT:return new lt(b);case s.AnnotationType.LINE:return new yt(b);case s.AnnotationType.SQUARE:return new Dt(b);case s.AnnotationType.CIRCLE:return new Mt(b);case s.AnnotationType.POLYLINE:return new qt(b);case s.AnnotationType.CARET:return new nt(b);case s.AnnotationType.INK:return new W(b);case s.AnnotationType.POLYGON:return new Yt(b);case s.AnnotationType.HIGHLIGHT:return new D(b);case s.AnnotationType.UNDERLINE:return new T(b);case s.AnnotationType.SQUIGGLY:return new R(b);case s.AnnotationType.STRIKEOUT:return new v(b);case s.AnnotationType.STAMP:return new F(b);case s.AnnotationType.FILEATTACHMENT:return new U(b);default:return new p(b)}}}class p{#t=!1;constructor(b,{isRenderable:j=!1,ignoreBorder:I=!1,createQuadrilaterals:Q=!1}={}){this.isRenderable=j,this.data=b.data,this.layer=b.layer,this.linkService=b.linkService,this.downloadManager=b.downloadManager,this.imageResourcesPath=b.imageResourcesPath,this.renderForms=b.renderForms,this.svgFactory=b.svgFactory,this.annotationStorage=b.annotationStorage,this.enableScripting=b.enableScripting,this.hasJSActions=b.hasJSActions,this._fieldObjects=b.fieldObjects,this.parent=b.parent,j&&(this.container=this._createContainer(I)),Q&&this._createQuadrilaterals()}static _hasPopupData({titleObj:b,contentsObj:j,richText:I}){return!!(b?.str||j?.str||I?.str)}get hasPopupData(){return p._hasPopupData(this.data)}_createContainer(b){const{data:j,parent:{page:I,viewport:Q}}=this,Y=document.createElement("section");Y.setAttribute("data-annotation-id",j.id),this instanceof _||(Y.tabIndex=d),Y.style.zIndex=this.parent.zIndex++,this.data.popupRef&&Y.setAttribute("aria-haspopup","dialog"),j.noRotate&&Y.classList.add("norotate");const{pageWidth:at,pageHeight:st,pageX:Rt,pageY:Xt}=Q.rawDims;if(!j.rect||this instanceof rt){const{rotation:Bt}=j;return!j.hasOwnCanvas&&Bt!==0&&this.setRotation(Bt,Y),Y}const{width:wt,height:jt}=x(j.rect),Lt=s.Util.normalizeRect([j.rect[0],I.view[3]-j.rect[1]+I.view[1],j.rect[2],I.view[3]-j.rect[3]+I.view[1]]);if(!b&&j.borderStyle.width>0){Y.style.borderWidth=`${j.borderStyle.width}px`;const Bt=j.borderStyle.horizontalCornerRadius,Qt=j.borderStyle.verticalCornerRadius;if(Bt>0||Qt>0){const ie=`calc(${Bt}px * var(--scale-factor)) / calc(${Qt}px * var(--scale-factor))`;Y.style.borderRadius=ie}else if(this instanceof k){const ie=`calc(${wt}px * var(--scale-factor)) / calc(${jt}px * var(--scale-factor))`;Y.style.borderRadius=ie}switch(j.borderStyle.style){case s.AnnotationBorderStyleType.SOLID:Y.style.borderStyle="solid";break;case s.AnnotationBorderStyleType.DASHED:Y.style.borderStyle="dashed";break;case s.AnnotationBorderStyleType.BEVELED:(0,s.warn)("Unimplemented border style: beveled");break;case s.AnnotationBorderStyleType.INSET:(0,s.warn)("Unimplemented border style: inset");break;case s.AnnotationBorderStyleType.UNDERLINE:Y.style.borderBottomStyle="solid";break}const $t=j.borderColor||null;$t?(this.#t=!0,Y.style.borderColor=s.Util.makeHexColor($t[0]|0,$t[1]|0,$t[2]|0)):Y.style.borderWidth=0}Y.style.left=`${100*(Lt[0]-Rt)/at}%`,Y.style.top=`${100*(Lt[1]-Xt)/st}%`;const{rotation:Pt}=j;return j.hasOwnCanvas||Pt===0?(Y.style.width=`${100*wt/at}%`,Y.style.height=`${100*jt/st}%`):this.setRotation(Pt,Y),Y}setRotation(b,j=this.container){if(!this.data.rect)return;const{pageWidth:I,pageHeight:Q}=this.parent.viewport.rawDims,{width:Y,height:at}=x(this.data.rect);let st,Rt;b%180===0?(st=100*Y/I,Rt=100*at/Q):(st=100*at/I,Rt=100*Y/Q),j.style.width=`${st}%`,j.style.height=`${Rt}%`,j.setAttribute("data-main-rotation",(360-b)%360)}get _commonActions(){const b=(j,I,Q)=>{const Y=Q.detail[j],at=Y[0],st=Y.slice(1);Q.target.style[I]=N.ColorConverters[`${at}_HTML`](st),this.annotationStorage.setValue(this.data.id,{[I]:N.ColorConverters[`${at}_rgb`](st)})};return(0,s.shadow)(this,"_commonActions",{display:j=>{const{display:I}=j.detail,Q=I%2===1;this.container.style.visibility=Q?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:Q,noPrint:I===1||I===2})},print:j=>{this.annotationStorage.setValue(this.data.id,{noPrint:!j.detail.print})},hidden:j=>{const{hidden:I}=j.detail;this.container.style.visibility=I?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:I,noView:I})},focus:j=>{setTimeout(()=>j.target.focus({preventScroll:!1}),0)},userName:j=>{j.target.title=j.detail.userName},readonly:j=>{j.target.disabled=j.detail.readonly},required:j=>{this._setRequired(j.target,j.detail.required)},bgColor:j=>{b("bgColor","backgroundColor",j)},fillColor:j=>{b("fillColor","backgroundColor",j)},fgColor:j=>{b("fgColor","color",j)},textColor:j=>{b("textColor","color",j)},borderColor:j=>{b("borderColor","borderColor",j)},strokeColor:j=>{b("strokeColor","borderColor",j)},rotation:j=>{const I=j.detail.rotation;this.setRotation(I),this.annotationStorage.setValue(this.data.id,{rotation:I})}})}_dispatchEventFromSandbox(b,j){const I=this._commonActions;for(const Q of Object.keys(j.detail))(b[Q]||I[Q])?.(j)}_setDefaultPropertiesFromJS(b){if(!this.enableScripting)return;const j=this.annotationStorage.getRawValue(this.data.id);if(!j)return;const I=this._commonActions;for(const[Q,Y]of Object.entries(j)){const at=I[Q];if(at){const st={detail:{[Q]:Y},target:b};at(st),delete j[Q]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:b}=this.data;if(!b)return;const[j,I,Q,Y]=this.data.rect;if(b.length===1){const[,{x:Qt,y:$t},{x:ie,y:le}]=b[0];if(Q===Qt&&Y===$t&&j===ie&&I===le)return}const{style:at}=this.container;let st;if(this.#t){const{borderColor:Qt,borderWidth:$t}=at;at.borderWidth=0,st=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${Qt}" stroke-width="${$t}">`],this.container.classList.add("hasBorder")}const Rt=Q-j,Xt=Y-I,{svgFactory:wt}=this,jt=wt.createElement("svg");jt.classList.add("quadrilateralsContainer"),jt.setAttribute("width",0),jt.setAttribute("height",0);const Lt=wt.createElement("defs");jt.append(Lt);const Pt=wt.createElement("clipPath"),Bt=`clippath_${this.data.id}`;Pt.setAttribute("id",Bt),Pt.setAttribute("clipPathUnits","objectBoundingBox"),Lt.append(Pt);for(const[,{x:Qt,y:$t},{x:ie,y:le}]of b){const oe=wt.createElement("rect"),_e=(ie-j)/Rt,ke=(Y-$t)/Xt,Be=(Qt-ie)/Rt,Cn=($t-le)/Xt;oe.setAttribute("x",_e),oe.setAttribute("y",ke),oe.setAttribute("width",Be),oe.setAttribute("height",Cn),Pt.append(oe),st?.push(`<rect vector-effect="non-scaling-stroke" x="${_e}" y="${ke}" width="${Be}" height="${Cn}"/>`)}this.#t&&(st.push("</g></svg>')"),at.backgroundImage=st.join("")),this.container.append(jt),this.container.style.clipPath=`url(#${Bt})`}_createPopup(){const{container:b,data:j}=this;b.setAttribute("aria-haspopup","dialog");const I=new rt({data:{color:j.color,titleObj:j.titleObj,modificationDate:j.modificationDate,contentsObj:j.contentsObj,richText:j.richText,parentRect:j.rect,borderStyle:0,id:`popup_${j.id}`,rotation:j.rotation},parent:this.parent,elements:[this]});this.parent.div.append(I.render())}render(){(0,s.unreachable)("Abstract method `AnnotationElement.render` called")}_getElementsByName(b,j=null){const I=[];if(this._fieldObjects){const Q=this._fieldObjects[b];if(Q)for(const{page:Y,id:at,exportValues:st}of Q){if(Y===-1||at===j)continue;const Rt=typeof st=="string"?st:null,Xt=document.querySelector(`[data-element-id="${at}"]`);if(Xt&&!h.has(Xt)){(0,s.warn)(`_getElementsByName - element not allowed: ${at}`);continue}I.push({id:at,exportValue:Rt,domElement:Xt})}return I}for(const Q of document.getElementsByName(b)){const{exportValue:Y}=Q,at=Q.getAttribute("data-element-id");at!==j&&h.has(Q)&&I.push({id:at,exportValue:Y,domElement:Q})}return I}show(){this.container&&(this.container.hidden=!1),this.popup?.maybeShow()}hide(){this.container&&(this.container.hidden=!0),this.popup?.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const b=this.getElementsToTriggerPopup();if(Array.isArray(b))for(const j of b)j.classList.add("highlightArea");else b.classList.add("highlightArea")}_editOnDoubleClick(){const{annotationEditorType:b,data:{id:j}}=this;this.container.addEventListener("dblclick",()=>{this.linkService.eventBus?.dispatch("switchannotationeditormode",{source:this,mode:b,editId:j})})}}class S extends p{constructor(b,j=null){super(b,{isRenderable:!0,ignoreBorder:!!j?.ignoreBorder,createQuadrilaterals:!0}),this.isTooltipOnly=b.data.isTooltipOnly}render(){const{data:b,linkService:j}=this,I=document.createElement("a");I.setAttribute("data-element-id",b.id);let Q=!1;return b.url?(j.addLinkAttributes(I,b.url,b.newWindow),Q=!0):b.action?(this._bindNamedAction(I,b.action),Q=!0):b.attachment?(this._bindAttachment(I,b.attachment),Q=!0):b.setOCGState?(this.#e(I,b.setOCGState),Q=!0):b.dest?(this._bindLink(I,b.dest),Q=!0):(b.actions&&(b.actions.Action||b.actions["Mouse Up"]||b.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(I,b),Q=!0),b.resetForm?(this._bindResetFormAction(I,b.resetForm),Q=!0):this.isTooltipOnly&&!Q&&(this._bindLink(I,""),Q=!0)),this.container.classList.add("linkAnnotation"),Q&&this.container.append(I),this.container}#t(){this.container.setAttribute("data-internal-link","")}_bindLink(b,j){b.href=this.linkService.getDestinationHash(j),b.onclick=()=>(j&&this.linkService.goToDestination(j),!1),(j||j==="")&&this.#t()}_bindNamedAction(b,j){b.href=this.linkService.getAnchorUrl(""),b.onclick=()=>(this.linkService.executeNamedAction(j),!1),this.#t()}_bindAttachment(b,j){b.href=this.linkService.getAnchorUrl(""),b.onclick=()=>(this.downloadManager?.openOrDownloadData(this.container,j.content,j.filename),!1),this.#t()}#e(b,j){b.href=this.linkService.getAnchorUrl(""),b.onclick=()=>(this.linkService.executeSetOCGState(j),!1),this.#t()}_bindJSAction(b,j){b.href=this.linkService.getAnchorUrl("");const I=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const Q of Object.keys(j.actions)){const Y=I.get(Q);Y&&(b[Y]=()=>(this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:j.id,name:Q}}),!1))}b.onclick||(b.onclick=()=>!1),this.#t()}_bindResetFormAction(b,j){const I=b.onclick;if(I||(b.href=this.linkService.getAnchorUrl("")),this.#t(),!this._fieldObjects){(0,s.warn)('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),I||(b.onclick=()=>!1);return}b.onclick=()=>{I?.();const{fields:Q,refs:Y,include:at}=j,st=[];if(Q.length!==0||Y.length!==0){const wt=new Set(Y);for(const jt of Q){const Lt=this._fieldObjects[jt]||[];for(const{id:Pt}of Lt)wt.add(Pt)}for(const jt of Object.values(this._fieldObjects))for(const Lt of jt)wt.has(Lt.id)===at&&st.push(Lt)}else for(const wt of Object.values(this._fieldObjects))st.push(...wt);const Rt=this.annotationStorage,Xt=[];for(const wt of st){const{id:jt}=wt;switch(Xt.push(jt),wt.type){case"text":{const Pt=wt.defaultValue||"";Rt.setValue(jt,{value:Pt});break}case"checkbox":case"radiobutton":{const Pt=wt.defaultValue===wt.exportValues;Rt.setValue(jt,{value:Pt});break}case"combobox":case"listbox":{const Pt=wt.defaultValue||"";Rt.setValue(jt,{value:Pt});break}default:continue}const Lt=document.querySelector(`[data-element-id="${jt}"]`);if(Lt){if(!h.has(Lt)){(0,s.warn)(`_bindResetFormAction - element not allowed: ${jt}`);continue}}else continue;Lt.dispatchEvent(new Event("resetform"))}return this.enableScripting&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:Xt,name:"ResetForm"}}),!1}}}class C extends p{constructor(b){super(b,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const b=document.createElement("img");return b.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",b.alt="[{{type}} Annotation]",b.dataset.l10nId="text_annotation_type",b.dataset.l10nArgs=JSON.stringify({type:this.data.name}),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(b),this.container}}class _ extends p{render(){return this.data.alternativeText&&(this.container.title=this.data.alternativeText),this.container}showElementAndHideCanvas(b){this.data.hasOwnCanvas&&(b.previousSibling?.nodeName==="CANVAS"&&(b.previousSibling.hidden=!0),b.hidden=!1)}_getKeyModifier(b){const{isWin:j,isMac:I}=s.FeatureTest.platform;return j&&b.ctrlKey||I&&b.metaKey}_setEventListener(b,j,I,Q,Y){I.includes("mouse")?b.addEventListener(I,at=>{this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:Q,value:Y(at),shift:at.shiftKey,modifier:this._getKeyModifier(at)}})}):b.addEventListener(I,at=>{if(I==="blur"){if(!j.focused||!at.relatedTarget)return;j.focused=!1}else if(I==="focus"){if(j.focused)return;j.focused=!0}Y&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:Q,value:Y(at)}})})}_setEventListeners(b,j,I,Q){for(const[Y,at]of I)(at==="Action"||this.data.actions?.[at])&&((at==="Focus"||at==="Blur")&&(j||={focused:!1}),this._setEventListener(b,j,Y,at,Q),at==="Focus"&&!this.data.actions?.Blur?this._setEventListener(b,j,"blur","Blur",null):at==="Blur"&&!this.data.actions?.Focus&&this._setEventListener(b,j,"focus","Focus",null))}_setBackgroundColor(b){const j=this.data.backgroundColor||null;b.style.backgroundColor=j===null?"transparent":s.Util.makeHexColor(j[0],j[1],j[2])}_setTextStyle(b){const j=["left","center","right"],{fontColor:I}=this.data.defaultAppearanceData,Q=this.data.defaultAppearanceData.fontSize||c,Y=b.style;let at;const st=2,Rt=Xt=>Math.round(10*Xt)/10;if(this.data.multiLine){const Xt=Math.abs(this.data.rect[3]-this.data.rect[1]-st),wt=Math.round(Xt/(s.LINE_FACTOR*Q))||1,jt=Xt/wt;at=Math.min(Q,Rt(jt/s.LINE_FACTOR))}else{const Xt=Math.abs(this.data.rect[3]-this.data.rect[1]-st);at=Math.min(Q,Rt(Xt/s.LINE_FACTOR))}Y.fontSize=`calc(${at}px * var(--scale-factor))`,Y.color=s.Util.makeHexColor(I[0],I[1],I[2]),this.data.textAlignment!==null&&(Y.textAlign=j[this.data.textAlignment])}_setRequired(b,j){j?b.setAttribute("required",!0):b.removeAttribute("required"),b.setAttribute("aria-required",j)}}class P extends _{constructor(b){const j=b.renderForms||!b.data.hasAppearance&&!!b.data.fieldValue;super(b,{isRenderable:j})}setPropertyOnSiblings(b,j,I,Q){const Y=this.annotationStorage;for(const at of this._getElementsByName(b.name,b.id))at.domElement&&(at.domElement[j]=I),Y.setValue(at.id,{[Q]:I})}render(){const b=this.annotationStorage,j=this.data.id;this.container.classList.add("textWidgetAnnotation");let I=null;if(this.renderForms){const Q=b.getValue(j,{value:this.data.fieldValue});let Y=Q.value||"";const at=b.getValue(j,{charLimit:this.data.maxLen}).charLimit;at&&Y.length>at&&(Y=Y.slice(0,at));let st=Q.formattedValue||this.data.textContent?.join(`
`)||null;st&&this.data.comb&&(st=st.replaceAll(/\s+/g,""));const Rt={userValue:Y,formattedValue:st,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(I=document.createElement("textarea"),I.textContent=st??Y,this.data.doNotScroll&&(I.style.overflowY="hidden")):(I=document.createElement("input"),I.type="text",I.setAttribute("value",st??Y),this.data.doNotScroll&&(I.style.overflowX="hidden")),this.data.hasOwnCanvas&&(I.hidden=!0),h.add(I),I.setAttribute("data-element-id",j),I.disabled=this.data.readOnly,I.name=this.data.fieldName,I.tabIndex=d,this._setRequired(I,this.data.required),at&&(I.maxLength=at),I.addEventListener("input",wt=>{b.setValue(j,{value:wt.target.value}),this.setPropertyOnSiblings(I,"value",wt.target.value,"value"),Rt.formattedValue=null}),I.addEventListener("resetform",wt=>{const jt=this.data.defaultFieldValue??"";I.value=Rt.userValue=jt,Rt.formattedValue=null});let Xt=wt=>{const{formattedValue:jt}=Rt;jt!=null&&(wt.target.value=jt),wt.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){I.addEventListener("focus",jt=>{if(Rt.focused)return;const{target:Lt}=jt;Rt.userValue&&(Lt.value=Rt.userValue),Rt.lastCommittedValue=Lt.value,Rt.commitKey=1,Rt.focused=!0}),I.addEventListener("updatefromsandbox",jt=>{this.showElementAndHideCanvas(jt.target);const Lt={value(Pt){Rt.userValue=Pt.detail.value??"",b.setValue(j,{value:Rt.userValue.toString()}),Pt.target.value=Rt.userValue},formattedValue(Pt){const{formattedValue:Bt}=Pt.detail;Rt.formattedValue=Bt,Bt!=null&&Pt.target!==document.activeElement&&(Pt.target.value=Bt),b.setValue(j,{formattedValue:Bt})},selRange(Pt){Pt.target.setSelectionRange(...Pt.detail.selRange)},charLimit:Pt=>{const{charLimit:Bt}=Pt.detail,{target:Qt}=Pt;if(Bt===0){Qt.removeAttribute("maxLength");return}Qt.setAttribute("maxLength",Bt);let $t=Rt.userValue;!$t||$t.length<=Bt||($t=$t.slice(0,Bt),Qt.value=Rt.userValue=$t,b.setValue(j,{value:$t}),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:j,name:"Keystroke",value:$t,willCommit:!0,commitKey:1,selStart:Qt.selectionStart,selEnd:Qt.selectionEnd}}))}};this._dispatchEventFromSandbox(Lt,jt)}),I.addEventListener("keydown",jt=>{Rt.commitKey=1;let Lt=-1;if(jt.key==="Escape"?Lt=0:jt.key==="Enter"&&!this.data.multiLine?Lt=2:jt.key==="Tab"&&(Rt.commitKey=3),Lt===-1)return;const{value:Pt}=jt.target;Rt.lastCommittedValue!==Pt&&(Rt.lastCommittedValue=Pt,Rt.userValue=Pt,this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:j,name:"Keystroke",value:Pt,willCommit:!0,commitKey:Lt,selStart:jt.target.selectionStart,selEnd:jt.target.selectionEnd}}))});const wt=Xt;Xt=null,I.addEventListener("blur",jt=>{if(!Rt.focused||!jt.relatedTarget)return;Rt.focused=!1;const{value:Lt}=jt.target;Rt.userValue=Lt,Rt.lastCommittedValue!==Lt&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:j,name:"Keystroke",value:Lt,willCommit:!0,commitKey:Rt.commitKey,selStart:jt.target.selectionStart,selEnd:jt.target.selectionEnd}}),wt(jt)}),this.data.actions?.Keystroke&&I.addEventListener("beforeinput",jt=>{Rt.lastCommittedValue=null;const{data:Lt,target:Pt}=jt,{value:Bt,selectionStart:Qt,selectionEnd:$t}=Pt;let ie=Qt,le=$t;switch(jt.inputType){case"deleteWordBackward":{const oe=Bt.substring(0,Qt).match(/\w*[^\w]*$/);oe&&(ie-=oe[0].length);break}case"deleteWordForward":{const oe=Bt.substring(Qt).match(/^[^\w]*\w*/);oe&&(le+=oe[0].length);break}case"deleteContentBackward":Qt===$t&&(ie-=1);break;case"deleteContentForward":Qt===$t&&(le+=1);break}jt.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:j,name:"Keystroke",value:Bt,change:Lt||"",willCommit:!1,selStart:ie,selEnd:le}})}),this._setEventListeners(I,Rt,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],jt=>jt.target.value)}if(Xt&&I.addEventListener("blur",Xt),this.data.comb){const jt=(this.data.rect[2]-this.data.rect[0])/at;I.classList.add("comb"),I.style.letterSpacing=`calc(${jt}px * var(--scale-factor) - 1ch)`}}else I=document.createElement("div"),I.textContent=this.data.fieldValue,I.style.verticalAlign="middle",I.style.display="table-cell";return this._setTextStyle(I),this._setBackgroundColor(I),this._setDefaultPropertiesFromJS(I),this.container.append(I),this.container}}class V extends _{constructor(b){super(b,{isRenderable:!!b.data.hasOwnCanvas})}}class H extends _{constructor(b){super(b,{isRenderable:b.renderForms})}render(){const b=this.annotationStorage,j=this.data,I=j.id;let Q=b.getValue(I,{value:j.exportValue===j.fieldValue}).value;typeof Q=="string"&&(Q=Q!=="Off",b.setValue(I,{value:Q})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const Y=document.createElement("input");return h.add(Y),Y.setAttribute("data-element-id",I),Y.disabled=j.readOnly,this._setRequired(Y,this.data.required),Y.type="checkbox",Y.name=j.fieldName,Q&&Y.setAttribute("checked",!0),Y.setAttribute("exportValue",j.exportValue),Y.tabIndex=d,Y.addEventListener("change",at=>{const{name:st,checked:Rt}=at.target;for(const Xt of this._getElementsByName(st,I)){const wt=Rt&&Xt.exportValue===j.exportValue;Xt.domElement&&(Xt.domElement.checked=wt),b.setValue(Xt.id,{value:wt})}b.setValue(I,{value:Rt})}),Y.addEventListener("resetform",at=>{const st=j.defaultFieldValue||"Off";at.target.checked=st===j.exportValue}),this.enableScripting&&this.hasJSActions&&(Y.addEventListener("updatefromsandbox",at=>{const st={value(Rt){Rt.target.checked=Rt.detail.value!=="Off",b.setValue(I,{value:Rt.target.checked})}};this._dispatchEventFromSandbox(st,at)}),this._setEventListeners(Y,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],at=>at.target.checked)),this._setBackgroundColor(Y),this._setDefaultPropertiesFromJS(Y),this.container.append(Y),this.container}}class k extends _{constructor(b){super(b,{isRenderable:b.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const b=this.annotationStorage,j=this.data,I=j.id;let Q=b.getValue(I,{value:j.fieldValue===j.buttonValue}).value;typeof Q=="string"&&(Q=Q!==j.buttonValue,b.setValue(I,{value:Q}));const Y=document.createElement("input");if(h.add(Y),Y.setAttribute("data-element-id",I),Y.disabled=j.readOnly,this._setRequired(Y,this.data.required),Y.type="radio",Y.name=j.fieldName,Q&&Y.setAttribute("checked",!0),Y.tabIndex=d,Y.addEventListener("change",at=>{const{name:st,checked:Rt}=at.target;for(const Xt of this._getElementsByName(st,I))b.setValue(Xt.id,{value:!1});b.setValue(I,{value:Rt})}),Y.addEventListener("resetform",at=>{const st=j.defaultFieldValue;at.target.checked=st!=null&&st===j.buttonValue}),this.enableScripting&&this.hasJSActions){const at=j.buttonValue;Y.addEventListener("updatefromsandbox",st=>{const Rt={value:Xt=>{const wt=at===Xt.detail.value;for(const jt of this._getElementsByName(Xt.target.name)){const Lt=wt&&jt.id===I;jt.domElement&&(jt.domElement.checked=Lt),b.setValue(jt.id,{value:Lt})}}};this._dispatchEventFromSandbox(Rt,st)}),this._setEventListeners(Y,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],st=>st.target.checked)}return this._setBackgroundColor(Y),this._setDefaultPropertiesFromJS(Y),this.container.append(Y),this.container}}class L extends S{constructor(b){super(b,{ignoreBorder:b.data.hasAppearance})}render(){const b=super.render();b.classList.add("buttonWidgetAnnotation","pushButton"),this.data.alternativeText&&(b.title=this.data.alternativeText);const j=b.lastChild;return this.enableScripting&&this.hasJSActions&&j&&(this._setDefaultPropertiesFromJS(j),j.addEventListener("updatefromsandbox",I=>{this._dispatchEventFromSandbox({},I)})),b}}class J extends _{constructor(b){super(b,{isRenderable:b.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const b=this.annotationStorage,j=this.data.id,I=b.getValue(j,{value:this.data.fieldValue}),Q=document.createElement("select");h.add(Q),Q.setAttribute("data-element-id",j),Q.disabled=this.data.readOnly,this._setRequired(Q,this.data.required),Q.name=this.data.fieldName,Q.tabIndex=d;let Y=this.data.combo&&this.data.options.length>0;this.data.combo||(Q.size=this.data.options.length,this.data.multiSelect&&(Q.multiple=!0)),Q.addEventListener("resetform",wt=>{const jt=this.data.defaultFieldValue;for(const Lt of Q.options)Lt.selected=Lt.value===jt});for(const wt of this.data.options){const jt=document.createElement("option");jt.textContent=wt.displayValue,jt.value=wt.exportValue,I.value.includes(wt.exportValue)&&(jt.setAttribute("selected",!0),Y=!1),Q.append(jt)}let at=null;if(Y){const wt=document.createElement("option");wt.value=" ",wt.setAttribute("hidden",!0),wt.setAttribute("selected",!0),Q.prepend(wt),at=()=>{wt.remove(),Q.removeEventListener("input",at),at=null},Q.addEventListener("input",at)}const st=wt=>{const jt=wt?"value":"textContent",{options:Lt,multiple:Pt}=Q;return Pt?Array.prototype.filter.call(Lt,Bt=>Bt.selected).map(Bt=>Bt[jt]):Lt.selectedIndex===-1?null:Lt[Lt.selectedIndex][jt]};let Rt=st(!1);const Xt=wt=>{const jt=wt.target.options;return Array.prototype.map.call(jt,Lt=>({displayValue:Lt.textContent,exportValue:Lt.value}))};return this.enableScripting&&this.hasJSActions?(Q.addEventListener("updatefromsandbox",wt=>{const jt={value(Lt){at?.();const Pt=Lt.detail.value,Bt=new Set(Array.isArray(Pt)?Pt:[Pt]);for(const Qt of Q.options)Qt.selected=Bt.has(Qt.value);b.setValue(j,{value:st(!0)}),Rt=st(!1)},multipleSelection(Lt){Q.multiple=!0},remove(Lt){const Pt=Q.options,Bt=Lt.detail.remove;Pt[Bt].selected=!1,Q.remove(Bt),Pt.length>0&&Array.prototype.findIndex.call(Pt,$t=>$t.selected)===-1&&(Pt[0].selected=!0),b.setValue(j,{value:st(!0),items:Xt(Lt)}),Rt=st(!1)},clear(Lt){for(;Q.length!==0;)Q.remove(0);b.setValue(j,{value:null,items:[]}),Rt=st(!1)},insert(Lt){const{index:Pt,displayValue:Bt,exportValue:Qt}=Lt.detail.insert,$t=Q.children[Pt],ie=document.createElement("option");ie.textContent=Bt,ie.value=Qt,$t?$t.before(ie):Q.append(ie),b.setValue(j,{value:st(!0),items:Xt(Lt)}),Rt=st(!1)},items(Lt){const{items:Pt}=Lt.detail;for(;Q.length!==0;)Q.remove(0);for(const Bt of Pt){const{displayValue:Qt,exportValue:$t}=Bt,ie=document.createElement("option");ie.textContent=Qt,ie.value=$t,Q.append(ie)}Q.options.length>0&&(Q.options[0].selected=!0),b.setValue(j,{value:st(!0),items:Xt(Lt)}),Rt=st(!1)},indices(Lt){const Pt=new Set(Lt.detail.indices);for(const Bt of Lt.target.options)Bt.selected=Pt.has(Bt.index);b.setValue(j,{value:st(!0)}),Rt=st(!1)},editable(Lt){Lt.target.disabled=!Lt.detail.editable}};this._dispatchEventFromSandbox(jt,wt)}),Q.addEventListener("input",wt=>{const jt=st(!0);b.setValue(j,{value:jt}),wt.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:j,name:"Keystroke",value:Rt,changeEx:jt,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(Q,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],wt=>wt.target.value)):Q.addEventListener("input",function(wt){b.setValue(j,{value:st(!0)})}),this.data.combo&&this._setTextStyle(Q),this._setBackgroundColor(Q),this._setDefaultPropertiesFromJS(Q),this.container.append(Q),this.container}}class rt extends p{constructor(b){const{data:j,elements:I}=b;super(b,{isRenderable:p._hasPopupData(j)}),this.elements=I}render(){this.container.classList.add("popupAnnotation");const b=new et({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open}),j=[];for(const I of this.elements)I.popup=b,j.push(I.data.id),I.addHighlightArea();return this.container.setAttribute("aria-controls",j.map(I=>`${s.AnnotationPrefix}${I}`).join(",")),this.container}}class et{#t=null;#e=this.#u.bind(this);#n=this.#A.bind(this);#a=this.#E.bind(this);#o=this.#b.bind(this);#s=null;#r=null;#l=null;#c=null;#i=null;#f=null;#d=!1;#h=null;#p=null;#y=null;#g=null;#m=!1;constructor({container:b,color:j,elements:I,titleObj:Q,modificationDate:Y,contentsObj:at,richText:st,parent:Rt,rect:Xt,parentRect:wt,open:jt}){this.#r=b,this.#g=Q,this.#l=at,this.#y=st,this.#i=Rt,this.#s=j,this.#p=Xt,this.#f=wt,this.#c=I;const Lt=y.PDFDateString.toDateObject(Y);Lt&&(this.#t=Rt.l10n.get("annotation_date_string",{date:Lt.toLocaleDateString(),time:Lt.toLocaleTimeString()})),this.trigger=I.flatMap(Pt=>Pt.getElementsToTriggerPopup());for(const Pt of this.trigger)Pt.addEventListener("click",this.#o),Pt.addEventListener("mouseenter",this.#a),Pt.addEventListener("mouseleave",this.#n),Pt.classList.add("popupTriggerArea");for(const Pt of I)Pt.container?.addEventListener("keydown",this.#e);this.#r.hidden=!0,jt&&this.#b()}render(){if(this.#h)return;const{page:{view:b},viewport:{rawDims:{pageWidth:j,pageHeight:I,pageX:Q,pageY:Y}}}=this.#i,at=this.#h=document.createElement("div");if(at.className="popup",this.#s){const oe=at.style.outlineColor=s.Util.makeHexColor(...this.#s);CSS.supports("background-color","color-mix(in srgb, red 30%, white)")?at.style.backgroundColor=`color-mix(in srgb, ${oe} 30%, white)`:at.style.backgroundColor=s.Util.makeHexColor(...this.#s.map(ke=>Math.floor(.7*(255-ke)+ke)))}const st=document.createElement("span");st.className="header";const Rt=document.createElement("h1");if(st.append(Rt),{dir:Rt.dir,str:Rt.textContent}=this.#g,at.append(st),this.#t){const oe=document.createElement("span");oe.classList.add("popupDate"),this.#t.then(_e=>{oe.textContent=_e}),st.append(oe)}const Xt=this.#l,wt=this.#y;if(wt?.str&&(!Xt?.str||Xt.str===wt.str))q.XfaLayer.render({xfaHtml:wt.html,intent:"richText",div:at}),at.lastChild.classList.add("richText","popupContent");else{const oe=this._formatContents(Xt);at.append(oe)}let jt=!!this.#f,Lt=jt?this.#f:this.#p;for(const oe of this.#c)if(!Lt||s.Util.intersect(oe.data.rect,Lt)!==null){Lt=oe.data.rect,jt=!0;break}const Pt=s.Util.normalizeRect([Lt[0],b[3]-Lt[1]+b[1],Lt[2],b[3]-Lt[3]+b[1]]),Qt=jt?Lt[2]-Lt[0]+5:0,$t=Pt[0]+Qt,ie=Pt[1],{style:le}=this.#r;le.left=`${100*($t-Q)/j}%`,le.top=`${100*(ie-Y)/I}%`,this.#r.append(at)}_formatContents({str:b,dir:j}){const I=document.createElement("p");I.classList.add("popupContent"),I.dir=j;const Q=b.split(/(?:\r\n?|\n)/);for(let Y=0,at=Q.length;Y<at;++Y){const st=Q[Y];I.append(document.createTextNode(st)),Y<at-1&&I.append(document.createElement("br"))}return I}#u(b){b.altKey||b.shiftKey||b.ctrlKey||b.metaKey||(b.key==="Enter"||b.key==="Escape"&&this.#d)&&this.#b()}#b(){this.#d=!this.#d,this.#d?(this.#E(),this.#r.addEventListener("click",this.#o),this.#r.addEventListener("keydown",this.#e)):(this.#A(),this.#r.removeEventListener("click",this.#o),this.#r.removeEventListener("keydown",this.#e))}#E(){this.#h||this.render(),this.isVisible?this.#d&&this.#r.classList.add("focused"):(this.#r.hidden=!1,this.#r.style.zIndex=parseInt(this.#r.style.zIndex)+1e3)}#A(){this.#r.classList.remove("focused"),!(this.#d||!this.isVisible)&&(this.#r.hidden=!0,this.#r.style.zIndex=parseInt(this.#r.style.zIndex)-1e3)}forceHide(){this.#m=this.isVisible,this.#m&&(this.#r.hidden=!0)}maybeShow(){this.#m&&(this.#m=!1,this.#r.hidden=!1)}get isVisible(){return this.#r.hidden===!1}}class lt extends p{constructor(b){super(b,{isRenderable:!0,ignoreBorder:!0}),this.textContent=b.data.textContent,this.textPosition=b.data.textPosition,this.annotationEditorType=s.AnnotationEditorType.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const b=document.createElement("div");b.classList.add("annotationTextContent"),b.setAttribute("role","comment");for(const j of this.textContent){const I=document.createElement("span");I.textContent=j,b.append(I)}this.container.append(b)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}o.FreeTextAnnotationElement=lt;class yt extends p{#t=null;constructor(b){super(b,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("lineAnnotation");const b=this.data,{width:j,height:I}=x(b.rect),Q=this.svgFactory.create(j,I,!0),Y=this.#t=this.svgFactory.createElement("svg:line");return Y.setAttribute("x1",b.rect[2]-b.lineCoordinates[0]),Y.setAttribute("y1",b.rect[3]-b.lineCoordinates[1]),Y.setAttribute("x2",b.rect[2]-b.lineCoordinates[2]),Y.setAttribute("y2",b.rect[3]-b.lineCoordinates[3]),Y.setAttribute("stroke-width",b.borderStyle.width||1),Y.setAttribute("stroke","transparent"),Y.setAttribute("fill","transparent"),Q.append(Y),this.container.append(Q),!b.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class Dt extends p{#t=null;constructor(b){super(b,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("squareAnnotation");const b=this.data,{width:j,height:I}=x(b.rect),Q=this.svgFactory.create(j,I,!0),Y=b.borderStyle.width,at=this.#t=this.svgFactory.createElement("svg:rect");return at.setAttribute("x",Y/2),at.setAttribute("y",Y/2),at.setAttribute("width",j-Y),at.setAttribute("height",I-Y),at.setAttribute("stroke-width",Y||1),at.setAttribute("stroke","transparent"),at.setAttribute("fill","transparent"),Q.append(at),this.container.append(Q),!b.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class Mt extends p{#t=null;constructor(b){super(b,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("circleAnnotation");const b=this.data,{width:j,height:I}=x(b.rect),Q=this.svgFactory.create(j,I,!0),Y=b.borderStyle.width,at=this.#t=this.svgFactory.createElement("svg:ellipse");return at.setAttribute("cx",j/2),at.setAttribute("cy",I/2),at.setAttribute("rx",j/2-Y/2),at.setAttribute("ry",I/2-Y/2),at.setAttribute("stroke-width",Y||1),at.setAttribute("stroke","transparent"),at.setAttribute("fill","transparent"),Q.append(at),this.container.append(Q),!b.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class qt extends p{#t=null;constructor(b){super(b,{isRenderable:!0,ignoreBorder:!0}),this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const b=this.data,{width:j,height:I}=x(b.rect),Q=this.svgFactory.create(j,I,!0);let Y=[];for(const st of b.vertices){const Rt=st.x-b.rect[0],Xt=b.rect[3]-st.y;Y.push(Rt+","+Xt)}Y=Y.join(" ");const at=this.#t=this.svgFactory.createElement(this.svgElementName);return at.setAttribute("points",Y),at.setAttribute("stroke-width",b.borderStyle.width||1),at.setAttribute("stroke","transparent"),at.setAttribute("fill","transparent"),Q.append(at),this.container.append(Q),!b.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class Yt extends qt{constructor(b){super(b),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class nt extends p{constructor(b){super(b,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}class W extends p{#t=[];constructor(b){super(b,{isRenderable:!0,ignoreBorder:!0}),this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=s.AnnotationEditorType.INK}render(){this.container.classList.add(this.containerClassName);const b=this.data,{width:j,height:I}=x(b.rect),Q=this.svgFactory.create(j,I,!0);for(const Y of b.inkLists){let at=[];for(const Rt of Y){const Xt=Rt.x-b.rect[0],wt=b.rect[3]-Rt.y;at.push(`${Xt},${wt}`)}at=at.join(" ");const st=this.svgFactory.createElement(this.svgElementName);this.#t.push(st),st.setAttribute("points",at),st.setAttribute("stroke-width",b.borderStyle.width||1),st.setAttribute("stroke","transparent"),st.setAttribute("fill","transparent"),!b.popupRef&&this.hasPopupData&&this._createPopup(),Q.append(st)}return this.container.append(Q),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}o.InkAnnotationElement=W;class D extends p{constructor(b){super(b,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this.container}}class T extends p{constructor(b){super(b,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),this.container}}class R extends p{constructor(b){super(b,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),this.container}}class v extends p{constructor(b){super(b,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),this.container}}class F extends p{constructor(b){super(b,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("stampAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}o.StampAnnotationElement=F;class U extends p{#t=null;constructor(b){super(b,{isRenderable:!0});const{filename:j,content:I}=this.data.file;this.filename=(0,y.getFilenameFromUrl)(j,!0),this.content=I,this.linkService.eventBus?.dispatch("fileattachmentannotation",{source:this,filename:j,content:I})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:b,data:j}=this;let I;j.hasAppearance||j.fillAlpha===0?I=document.createElement("div"):(I=document.createElement("img"),I.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(j.name)?"paperclip":"pushpin"}.svg`,j.fillAlpha&&j.fillAlpha<1&&(I.style=`filter: opacity(${Math.round(j.fillAlpha*100)}%);`)),I.addEventListener("dblclick",this.#e.bind(this)),this.#t=I;const{isMac:Q}=s.FeatureTest.platform;return b.addEventListener("keydown",Y=>{Y.key==="Enter"&&(Q?Y.metaKey:Y.ctrlKey)&&this.#e()}),!j.popupRef&&this.hasPopupData?this._createPopup():I.classList.add("popupTriggerArea"),b.append(I),b}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}#e(){this.downloadManager?.openOrDownloadData(this.container,this.content,this.filename)}}class ${#t=null;#e=null;#n=new Map;constructor({div:b,accessibilityManager:j,annotationCanvasMap:I,l10n:Q,page:Y,viewport:at}){this.div=b,this.#t=j,this.#e=I,this.l10n=Q,this.page=Y,this.viewport=at,this.zIndex=0,this.l10n||=G.NullL10n}#a(b,j){const I=b.firstChild||b;I.id=`${s.AnnotationPrefix}${j}`,this.div.append(b),this.#t?.moveElementInDOM(this.div,b,I,!1)}async render(b){const{annotations:j}=b,I=this.div;(0,y.setLayerDimensions)(I,this.viewport);const Q=new Map,Y={data:null,layer:I,linkService:b.linkService,downloadManager:b.downloadManager,imageResourcesPath:b.imageResourcesPath||"",renderForms:b.renderForms!==!1,svgFactory:new y.DOMSVGFactory,annotationStorage:b.annotationStorage||new O.AnnotationStorage,enableScripting:b.enableScripting===!0,hasJSActions:b.hasJSActions,fieldObjects:b.fieldObjects,parent:this,elements:null};for(const at of j){if(at.noHTML)continue;const st=at.annotationType===s.AnnotationType.POPUP;if(st){const wt=Q.get(at.id);if(!wt)continue;Y.elements=wt}else{const{width:wt,height:jt}=x(at.rect);if(wt<=0||jt<=0)continue}Y.data=at;const Rt=E.create(Y);if(!Rt.isRenderable)continue;if(!st&&at.popupRef){const wt=Q.get(at.popupRef);wt?wt.push(Rt):Q.set(at.popupRef,[Rt])}Rt.annotationEditorType>0&&this.#n.set(Rt.data.id,Rt);const Xt=Rt.render();at.hidden&&(Xt.style.visibility="hidden"),this.#a(Xt,at.id)}this.#o(),await this.l10n.translate(I)}update({viewport:b}){const j=this.div;this.viewport=b,(0,y.setLayerDimensions)(j,{rotation:b.rotation}),this.#o(),j.hidden=!1}#o(){if(!this.#e)return;const b=this.div;for(const[j,I]of this.#e){const Q=b.querySelector(`[data-annotation-id="${j}"]`);if(!Q)continue;const{firstChild:Y}=Q;Y?Y.nodeName==="CANVAS"?Y.replaceWith(I):Y.before(I):Q.append(I)}this.#e.clear()}getEditableAnnotations(){return Array.from(this.#n.values())}getEditableAnnotation(b){return this.#n.get(b)}}o.AnnotationLayer=$}),((f,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.ColorConverters=void 0;function m(O){return Math.floor(Math.max(0,Math.min(1,O))*255).toString(16).padStart(2,"0")}function s(O){return Math.max(0,Math.min(255,255*O))}class y{static CMYK_G([N,G,q,d]){return["G",1-Math.min(1,.3*N+.59*q+.11*G+d)]}static G_CMYK([N]){return["CMYK",0,0,0,1-N]}static G_RGB([N]){return["RGB",N,N,N]}static G_rgb([N]){return N=s(N),[N,N,N]}static G_HTML([N]){const G=m(N);return`#${G}${G}${G}`}static RGB_G([N,G,q]){return["G",.3*N+.59*G+.11*q]}static RGB_rgb(N){return N.map(s)}static RGB_HTML(N){return`#${N.map(m).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([N,G,q,d]){return["RGB",1-Math.min(1,N+d),1-Math.min(1,q+d),1-Math.min(1,G+d)]}static CMYK_rgb([N,G,q,d]){return[s(1-Math.min(1,N+d)),s(1-Math.min(1,q+d)),s(1-Math.min(1,G+d))]}static CMYK_HTML(N){const G=this.CMYK_RGB(N).slice(1);return this.RGB_HTML(G)}static RGB_CMYK([N,G,q]){const d=1-N,c=1-G,h=1-q,x=Math.min(d,c,h);return["CMYK",d,c,h,x]}}o.ColorConverters=y}),((f,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.NullL10n=void 0,o.getL10nFallback=s;const m={of_pages:"of {{pagesCount}}",page_of_pages:"({{pageNumber}} of {{pagesCount}})",document_properties_kb:"{{size_kb}} KB ({{size_b}} bytes)",document_properties_mb:"{{size_mb}} MB ({{size_b}} bytes)",document_properties_date_string:"{{date}}, {{time}}",document_properties_page_size_unit_inches:"in",document_properties_page_size_unit_millimeters:"mm",document_properties_page_size_orientation_portrait:"portrait",document_properties_page_size_orientation_landscape:"landscape",document_properties_page_size_name_a3:"A3",document_properties_page_size_name_a4:"A4",document_properties_page_size_name_letter:"Letter",document_properties_page_size_name_legal:"Legal",document_properties_page_size_dimension_string:"{{width}}  {{height}} {{unit}} ({{orientation}})",document_properties_page_size_dimension_name_string:"{{width}}  {{height}} {{unit}} ({{name}}, {{orientation}})",document_properties_linearized_yes:"Yes",document_properties_linearized_no:"No",additional_layers:"Additional Layers",page_landmark:"Page {{page}}",thumb_page_title:"Page {{page}}",thumb_page_canvas:"Thumbnail of Page {{page}}",find_reached_top:"Reached top of document, continued from bottom",find_reached_bottom:"Reached end of document, continued from top","find_match_count[one]":"{{current}} of {{total}} match","find_match_count[other]":"{{current}} of {{total}} matches","find_match_count_limit[one]":"More than {{limit}} match","find_match_count_limit[other]":"More than {{limit}} matches",find_not_found:"Phrase not found",page_scale_width:"Page Width",page_scale_fit:"Page Fit",page_scale_auto:"Automatic Zoom",page_scale_actual:"Actual Size",page_scale_percent:"{{scale}}%",loading_error:"An error occurred while loading the PDF.",invalid_file_error:"Invalid or corrupted PDF file.",missing_file_error:"Missing PDF file.",unexpected_response_error:"Unexpected server response.",rendering_error:"An error occurred while rendering the page.",annotation_date_string:"{{date}}, {{time}}",printing_not_supported:"Warning: Printing is not fully supported by this browser.",printing_not_ready:"Warning: The PDF is not fully loaded for printing.",web_fonts_disabled:"Web fonts are disabled: unable to use embedded PDF fonts.",free_text2_default_content:"Start typing",editor_free_text2_aria_label:"Text Editor",editor_ink2_aria_label:"Draw Editor",editor_ink_canvas_aria_label:"User-created image",editor_alt_text_button_label:"Alt text",editor_alt_text_edit_button_label:"Edit alt text",editor_alt_text_decorative_tooltip:"Marked as decorative"};m.print_progress_percent="{{progress}}%";function s(N,G){switch(N){case"find_match_count":N=`find_match_count[${G.total===1?"one":"other"}]`;break;case"find_match_count_limit":N=`find_match_count_limit[${G.limit===1?"one":"other"}]`;break}return m[N]||""}function y(N,G){return G?N.replaceAll(/\{\{\s*(\w+)\s*\}\}/g,(q,d)=>d in G?G[d]:"{{"+d+"}}"):N}const O={async getLanguage(){return"en-us"},async getDirection(){return"ltr"},async get(N,G=null,q=s(N,G)){return y(q,G)},async translate(N){}};o.NullL10n=O}),((f,o,m)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.XfaLayer=void 0;var s=m(25);class y{static setupStorage(N,G,q,d,c){const h=d.getValue(G,{value:null});switch(q.name){case"textarea":if(h.value!==null&&(N.textContent=h.value),c==="print")break;N.addEventListener("input",x=>{d.setValue(G,{value:x.target.value})});break;case"input":if(q.attributes.type==="radio"||q.attributes.type==="checkbox"){if(h.value===q.attributes.xfaOn?N.setAttribute("checked",!0):h.value===q.attributes.xfaOff&&N.removeAttribute("checked"),c==="print")break;N.addEventListener("change",x=>{d.setValue(G,{value:x.target.checked?x.target.getAttribute("xfaOn"):x.target.getAttribute("xfaOff")})})}else{if(h.value!==null&&N.setAttribute("value",h.value),c==="print")break;N.addEventListener("input",x=>{d.setValue(G,{value:x.target.value})})}break;case"select":if(h.value!==null){N.setAttribute("value",h.value);for(const x of q.children)x.attributes.value===h.value?x.attributes.selected=!0:x.attributes.hasOwnProperty("selected")&&delete x.attributes.selected}N.addEventListener("input",x=>{const E=x.target.options,p=E.selectedIndex===-1?"":E[E.selectedIndex].value;d.setValue(G,{value:p})});break}}static setAttributes({html:N,element:G,storage:q=null,intent:d,linkService:c}){const{attributes:h}=G,x=N instanceof HTMLAnchorElement;h.type==="radio"&&(h.name=`${h.name}-${d}`);for(const[E,p]of Object.entries(h))if(p!=null)switch(E){case"class":p.length&&N.setAttribute(E,p.join(" "));break;case"dataId":break;case"id":N.setAttribute("data-element-id",p);break;case"style":Object.assign(N.style,p);break;case"textContent":N.textContent=p;break;default:(!x||E!=="href"&&E!=="newWindow")&&N.setAttribute(E,p)}x&&c.addLinkAttributes(N,h.href,h.newWindow),q&&h.dataId&&this.setupStorage(N,h.dataId,G,q)}static render(N){const G=N.annotationStorage,q=N.linkService,d=N.xfaHtml,c=N.intent||"display",h=document.createElement(d.name);d.attributes&&this.setAttributes({html:h,element:d,intent:c,linkService:q});const x=[[d,-1,h]],E=N.div;if(E.append(h),N.viewport){const S=`matrix(${N.viewport.transform.join(",")})`;E.style.transform=S}c!=="richText"&&E.setAttribute("class","xfaLayer xfaFont");const p=[];for(;x.length>0;){const[S,C,_]=x.at(-1);if(C+1===S.children.length){x.pop();continue}const P=S.children[++x.at(-1)[1]];if(P===null)continue;const{name:V}=P;if(V==="#text"){const k=document.createTextNode(P.value);p.push(k),_.append(k);continue}const H=P?.attributes?.xmlns?document.createElementNS(P.attributes.xmlns,V):document.createElement(V);if(_.append(H),P.attributes&&this.setAttributes({html:H,element:P,storage:G,intent:c,linkService:q}),P.children&&P.children.length>0)x.push([P,-1,H]);else if(P.value){const k=document.createTextNode(P.value);s.XfaText.shouldBuildText(V)&&p.push(k),H.append(k)}}for(const S of E.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))S.setAttribute("readOnly",!0);return{textDivs:p}}static update(N){const G=`matrix(${N.viewport.transform.join(",")})`;N.div.style.transform=G,N.div.hidden=!1}}o.XfaLayer=y}),((f,o,m)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.InkEditor=void 0;var s=m(1),y=m(4),O=m(29),N=m(6),G=m(5);class q extends y.AnnotationEditor{#t=0;#e=0;#n=this.canvasPointermove.bind(this);#a=this.canvasPointerleave.bind(this);#o=this.canvasPointerup.bind(this);#s=this.canvasPointerdown.bind(this);#r=new Path2D;#l=!1;#c=!1;#i=!1;#f=null;#d=0;#h=0;#p=null;static _defaultColor=null;static _defaultOpacity=1;static _defaultThickness=1;static _type="ink";constructor(c){super({...c,name:"inkEditor"}),this.color=c.color||null,this.thickness=c.thickness||null,this.opacity=c.opacity||null,this.paths=[],this.bezierPath2D=[],this.allRawPaths=[],this.currentPath=[],this.scaleFactor=1,this.translationX=this.translationY=0,this.x=0,this.y=0,this._willKeepAspectRatio=!0}static initialize(c){y.AnnotationEditor.initialize(c,{strings:["editor_ink_canvas_aria_label","editor_ink2_aria_label"]})}static updateDefaultParams(c,h){switch(c){case s.AnnotationEditorParamsType.INK_THICKNESS:q._defaultThickness=h;break;case s.AnnotationEditorParamsType.INK_COLOR:q._defaultColor=h;break;case s.AnnotationEditorParamsType.INK_OPACITY:q._defaultOpacity=h/100;break}}updateParams(c,h){switch(c){case s.AnnotationEditorParamsType.INK_THICKNESS:this.#y(h);break;case s.AnnotationEditorParamsType.INK_COLOR:this.#g(h);break;case s.AnnotationEditorParamsType.INK_OPACITY:this.#m(h);break}}static get defaultPropertiesToUpdate(){return[[s.AnnotationEditorParamsType.INK_THICKNESS,q._defaultThickness],[s.AnnotationEditorParamsType.INK_COLOR,q._defaultColor||y.AnnotationEditor._defaultLineColor],[s.AnnotationEditorParamsType.INK_OPACITY,Math.round(q._defaultOpacity*100)]]}get propertiesToUpdate(){return[[s.AnnotationEditorParamsType.INK_THICKNESS,this.thickness||q._defaultThickness],[s.AnnotationEditorParamsType.INK_COLOR,this.color||q._defaultColor||y.AnnotationEditor._defaultLineColor],[s.AnnotationEditorParamsType.INK_OPACITY,Math.round(100*(this.opacity??q._defaultOpacity))]]}#y(c){const h=this.thickness;this.addCommands({cmd:()=>{this.thickness=c,this.#w()},undo:()=>{this.thickness=h,this.#w()},mustExec:!0,type:s.AnnotationEditorParamsType.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0})}#g(c){const h=this.color;this.addCommands({cmd:()=>{this.color=c,this.#v()},undo:()=>{this.color=h,this.#v()},mustExec:!0,type:s.AnnotationEditorParamsType.INK_COLOR,overwriteIfSameType:!0,keepUndo:!0})}#m(c){c/=100;const h=this.opacity;this.addCommands({cmd:()=>{this.opacity=c,this.#v()},undo:()=>{this.opacity=h,this.#v()},mustExec:!0,type:s.AnnotationEditorParamsType.INK_OPACITY,overwriteIfSameType:!0,keepUndo:!0})}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.canvas||(this.#k(),this.#M()),this.isAttachedToDOM||(this.parent.add(this),this.#x()),this.#w()))}remove(){this.canvas!==null&&(this.isEmpty()||this.commit(),this.canvas.width=this.canvas.height=0,this.canvas.remove(),this.canvas=null,this.#f.disconnect(),this.#f=null,super.remove())}setParent(c){!this.parent&&c?this._uiManager.removeShouldRescale(this):this.parent&&c===null&&this._uiManager.addShouldRescale(this),super.setParent(c)}onScaleChanging(){const[c,h]=this.parentDimensions,x=this.width*c,E=this.height*h;this.setDimensions(x,E)}enableEditMode(){this.#l||this.canvas===null||(super.enableEditMode(),this._isDraggable=!1,this.canvas.addEventListener("pointerdown",this.#s))}disableEditMode(){!this.isInEditMode()||this.canvas===null||(super.disableEditMode(),this._isDraggable=!this.isEmpty(),this.div.classList.remove("editing"),this.canvas.removeEventListener("pointerdown",this.#s))}onceAdded(){this._isDraggable=!this.isEmpty()}isEmpty(){return this.paths.length===0||this.paths.length===1&&this.paths[0].length===0}#u(){const{parentRotation:c,parentDimensions:[h,x]}=this;switch(c){case 90:return[0,x,x,h];case 180:return[h,x,h,x];case 270:return[h,0,x,h];default:return[0,0,h,x]}}#b(){const{ctx:c,color:h,opacity:x,thickness:E,parentScale:p,scaleFactor:S}=this;c.lineWidth=E*p/S,c.lineCap="round",c.lineJoin="round",c.miterLimit=10,c.strokeStyle=`${h}${(0,G.opacityToHex)(x)}`}#E(c,h){this.canvas.addEventListener("contextmenu",N.noContextMenu),this.canvas.addEventListener("pointerleave",this.#a),this.canvas.addEventListener("pointermove",this.#n),this.canvas.addEventListener("pointerup",this.#o),this.canvas.removeEventListener("pointerdown",this.#s),this.isEditing=!0,this.#i||(this.#i=!0,this.#x(),this.thickness||=q._defaultThickness,this.color||=q._defaultColor||y.AnnotationEditor._defaultLineColor,this.opacity??=q._defaultOpacity),this.currentPath.push([c,h]),this.#c=!1,this.#b(),this.#p=()=>{this.#N(),this.#p&&window.requestAnimationFrame(this.#p)},window.requestAnimationFrame(this.#p)}#A(c,h){const[x,E]=this.currentPath.at(-1);if(this.currentPath.length>1&&c===x&&h===E)return;const p=this.currentPath;let S=this.#r;if(p.push([c,h]),this.#c=!0,p.length<=2){S.moveTo(...p[0]),S.lineTo(c,h);return}p.length===3&&(this.#r=S=new Path2D,S.moveTo(...p[0])),this.#P(S,...p.at(-3),...p.at(-2),c,h)}#T(){if(this.currentPath.length===0)return;const c=this.currentPath.at(-1);this.#r.lineTo(...c)}#C(c,h){this.#p=null,c=Math.min(Math.max(c,0),this.canvas.width),h=Math.min(Math.max(h,0),this.canvas.height),this.#A(c,h),this.#T();let x;if(this.currentPath.length!==1)x=this.#L();else{const _=[c,h];x=[[_,_.slice(),_.slice(),_]]}const E=this.#r,p=this.currentPath;this.currentPath=[],this.#r=new Path2D;const S=()=>{this.allRawPaths.push(p),this.paths.push(x),this.bezierPath2D.push(E),this.rebuild()},C=()=>{this.allRawPaths.pop(),this.paths.pop(),this.bezierPath2D.pop(),this.paths.length===0?this.remove():(this.canvas||(this.#k(),this.#M()),this.#w())};this.addCommands({cmd:S,undo:C,mustExec:!0})}#N(){if(!this.#c)return;this.#c=!1;const c=Math.ceil(this.thickness*this.parentScale),h=this.currentPath.slice(-3),x=h.map(S=>S[0]),E=h.map(S=>S[1]);Math.min(...x)-c,Math.max(...x)+c,Math.min(...E)-c,Math.max(...E)+c;const{ctx:p}=this;p.save(),p.clearRect(0,0,this.canvas.width,this.canvas.height);for(const S of this.bezierPath2D)p.stroke(S);p.stroke(this.#r),p.restore()}#P(c,h,x,E,p,S,C){const _=(h+E)/2,P=(x+p)/2,V=(E+S)/2,H=(p+C)/2;c.bezierCurveTo(_+2*(E-_)/3,P+2*(p-P)/3,V+2*(E-V)/3,H+2*(p-H)/3,V,H)}#L(){const c=this.currentPath;if(c.length<=2)return[[c[0],c[0],c.at(-1),c.at(-1)]];const h=[];let x,[E,p]=c[0];for(x=1;x<c.length-2;x++){const[k,L]=c[x],[J,rt]=c[x+1],et=(k+J)/2,lt=(L+rt)/2,yt=[E+2*(k-E)/3,p+2*(L-p)/3],Dt=[et+2*(k-et)/3,lt+2*(L-lt)/3];h.push([[E,p],yt,Dt,[et,lt]]),[E,p]=[et,lt]}const[S,C]=c[x],[_,P]=c[x+1],V=[E+2*(S-E)/3,p+2*(C-p)/3],H=[_+2*(S-_)/3,P+2*(C-P)/3];return h.push([[E,p],V,H,[_,P]]),h}#v(){if(this.isEmpty()){this.#S();return}this.#b();const{canvas:c,ctx:h}=this;h.setTransform(1,0,0,1,0,0),h.clearRect(0,0,c.width,c.height),this.#S();for(const x of this.bezierPath2D)h.stroke(x)}commit(){this.#l||(super.commit(),this.isEditing=!1,this.disableEditMode(),this.setInForeground(),this.#l=!0,this.div.classList.add("disabled"),this.#w(!0),this.makeResizable(),this.parent.addInkEditorIfNeeded(!0),this.moveInDOM(),this.div.focus({preventScroll:!0}))}focusin(c){this._focusEventsAllowed&&(super.focusin(c),this.enableEditMode())}canvasPointerdown(c){c.button!==0||!this.isInEditMode()||this.#l||(this.setInForeground(),c.preventDefault(),c.type!=="mouse"&&this.div.focus(),this.#E(c.offsetX,c.offsetY))}canvasPointermove(c){c.preventDefault(),this.#A(c.offsetX,c.offsetY)}canvasPointerup(c){c.preventDefault(),this.#O(c)}canvasPointerleave(c){this.#O(c)}#O(c){this.canvas.removeEventListener("pointerleave",this.#a),this.canvas.removeEventListener("pointermove",this.#n),this.canvas.removeEventListener("pointerup",this.#o),this.canvas.addEventListener("pointerdown",this.#s),setTimeout(()=>{this.canvas.removeEventListener("contextmenu",N.noContextMenu)},10),this.#C(c.offsetX,c.offsetY),this.addToAnnotationStorage(),this.setInBackground()}#k(){this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=0,this.canvas.className="inkEditorCanvas",y.AnnotationEditor._l10nPromise.get("editor_ink_canvas_aria_label").then(c=>this.canvas?.setAttribute("aria-label",c)),this.div.append(this.canvas),this.ctx=this.canvas.getContext("2d")}#M(){this.#f=new ResizeObserver(c=>{const h=c[0].contentRect;h.width&&h.height&&this.setDimensions(h.width,h.height)}),this.#f.observe(this.div)}get isResizable(){return!this.isEmpty()&&this.#l}render(){if(this.div)return this.div;let c,h;this.width&&(c=this.x,h=this.y),super.render(),y.AnnotationEditor._l10nPromise.get("editor_ink2_aria_label").then(C=>this.div?.setAttribute("aria-label",C));const[x,E,p,S]=this.#u();if(this.setAt(x,E,0,0),this.setDims(p,S),this.#k(),this.width){const[C,_]=this.parentDimensions;this.setAspectRatio(this.width*C,this.height*_),this.setAt(c*C,h*_,this.width*C,this.height*_),this.#i=!0,this.#x(),this.setDims(this.width*C,this.height*_),this.#v(),this.div.classList.add("disabled")}else this.div.classList.add("editing"),this.enableEditMode();return this.#M(),this.div}#x(){if(!this.#i)return;const[c,h]=this.parentDimensions;this.canvas.width=Math.ceil(this.width*c),this.canvas.height=Math.ceil(this.height*h),this.#S()}setDimensions(c,h){const x=Math.round(c),E=Math.round(h);if(this.#d===x&&this.#h===E)return;this.#d=x,this.#h=E,this.canvas.style.visibility="hidden";const[p,S]=this.parentDimensions;this.width=c/p,this.height=h/S,this.fixAndSetPosition(),this.#l&&this.#R(c,h),this.#x(),this.#v(),this.canvas.style.visibility="visible",this.fixDims()}#R(c,h){const x=this.#D(),E=(c-x)/this.#e,p=(h-x)/this.#t;this.scaleFactor=Math.min(E,p)}#S(){const c=this.#D()/2;this.ctx.setTransform(this.scaleFactor,0,0,this.scaleFactor,this.translationX*this.scaleFactor+c,this.translationY*this.scaleFactor+c)}static#F(c){const h=new Path2D;for(let x=0,E=c.length;x<E;x++){const[p,S,C,_]=c[x];x===0&&h.moveTo(...p),h.bezierCurveTo(S[0],S[1],C[0],C[1],_[0],_[1])}return h}static#z(c,h,x){const[E,p,S,C]=h;switch(x){case 0:for(let _=0,P=c.length;_<P;_+=2)c[_]+=E,c[_+1]=C-c[_+1];break;case 90:for(let _=0,P=c.length;_<P;_+=2){const V=c[_];c[_]=c[_+1]+E,c[_+1]=V+p}break;case 180:for(let _=0,P=c.length;_<P;_+=2)c[_]=S-c[_],c[_+1]+=p;break;case 270:for(let _=0,P=c.length;_<P;_+=2){const V=c[_];c[_]=S-c[_+1],c[_+1]=C-V}break;default:throw new Error("Invalid rotation")}return c}static#I(c,h,x){const[E,p,S,C]=h;switch(x){case 0:for(let _=0,P=c.length;_<P;_+=2)c[_]-=E,c[_+1]=C-c[_+1];break;case 90:for(let _=0,P=c.length;_<P;_+=2){const V=c[_];c[_]=c[_+1]-p,c[_+1]=V-E}break;case 180:for(let _=0,P=c.length;_<P;_+=2)c[_]=S-c[_],c[_+1]-=p;break;case 270:for(let _=0,P=c.length;_<P;_+=2){const V=c[_];c[_]=C-c[_+1],c[_+1]=S-V}break;default:throw new Error("Invalid rotation")}return c}#q(c,h,x,E){const p=[],S=this.thickness/2,C=c*h+S,_=c*x+S;for(const P of this.paths){const V=[],H=[];for(let k=0,L=P.length;k<L;k++){const[J,rt,et,lt]=P[k],yt=c*J[0]+C,Dt=c*J[1]+_,Mt=c*rt[0]+C,qt=c*rt[1]+_,Yt=c*et[0]+C,nt=c*et[1]+_,W=c*lt[0]+C,D=c*lt[1]+_;k===0&&(V.push(yt,Dt),H.push(yt,Dt)),V.push(Mt,qt,Yt,nt,W,D),H.push(Mt,qt),k===L-1&&H.push(W,D)}p.push({bezier:q.#z(V,E,this.rotation),points:q.#z(H,E,this.rotation)})}return p}#j(){let c=1/0,h=-1/0,x=1/0,E=-1/0;for(const p of this.paths)for(const[S,C,_,P]of p){const V=s.Util.bezierBoundingBox(...S,...C,..._,...P);c=Math.min(c,V[0]),x=Math.min(x,V[1]),h=Math.max(h,V[2]),E=Math.max(E,V[3])}return[c,x,h,E]}#D(){return this.#l?Math.ceil(this.thickness*this.parentScale):0}#w(c=!1){if(this.isEmpty())return;if(!this.#l){this.#v();return}const h=this.#j(),x=this.#D();this.#e=Math.max(y.AnnotationEditor.MIN_SIZE,h[2]-h[0]),this.#t=Math.max(y.AnnotationEditor.MIN_SIZE,h[3]-h[1]);const E=Math.ceil(x+this.#e*this.scaleFactor),p=Math.ceil(x+this.#t*this.scaleFactor),[S,C]=this.parentDimensions;this.width=E/S,this.height=p/C,this.setAspectRatio(E,p);const _=this.translationX,P=this.translationY;this.translationX=-h[0],this.translationY=-h[1],this.#x(),this.#v(),this.#d=E,this.#h=p,this.setDims(E,p);const V=c?x/this.scaleFactor/2:0;this.translate(_-this.translationX-V,P-this.translationY-V)}static deserialize(c,h,x){if(c instanceof O.InkAnnotationElement)return null;const E=super.deserialize(c,h,x);E.thickness=c.thickness,E.color=s.Util.makeHexColor(...c.color),E.opacity=c.opacity;const[p,S]=E.pageDimensions,C=E.width*p,_=E.height*S,P=E.parentScale,V=c.thickness/2;E.#l=!0,E.#d=Math.round(C),E.#h=Math.round(_);const{paths:H,rect:k,rotation:L}=c;for(let{bezier:rt}of H){rt=q.#I(rt,k,L);const et=[];E.paths.push(et);let lt=P*(rt[0]-V),yt=P*(rt[1]-V);for(let Mt=2,qt=rt.length;Mt<qt;Mt+=6){const Yt=P*(rt[Mt]-V),nt=P*(rt[Mt+1]-V),W=P*(rt[Mt+2]-V),D=P*(rt[Mt+3]-V),T=P*(rt[Mt+4]-V),R=P*(rt[Mt+5]-V);et.push([[lt,yt],[Yt,nt],[W,D],[T,R]]),lt=T,yt=R}const Dt=this.#F(et);E.bezierPath2D.push(Dt)}const J=E.#j();return E.#e=Math.max(y.AnnotationEditor.MIN_SIZE,J[2]-J[0]),E.#t=Math.max(y.AnnotationEditor.MIN_SIZE,J[3]-J[1]),E.#R(C,_),E}serialize(){if(this.isEmpty())return null;const c=this.getRect(0,0),h=y.AnnotationEditor._colorManager.convert(this.ctx.strokeStyle);return{annotationType:s.AnnotationEditorType.INK,color:h,thickness:this.thickness,opacity:this.opacity,paths:this.#q(this.scaleFactor/this.parentScale,this.translationX,this.translationY,c),pageIndex:this.pageIndex,rect:c,rotation:this.rotation,structTreeParentId:this._structTreeParentId}}}o.InkEditor=q}),((f,o,m)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.StampEditor=void 0;var s=m(1),y=m(4),O=m(6),N=m(29);class G extends y.AnnotationEditor{#t=null;#e=null;#n=null;#a=null;#o=null;#s=null;#r=null;#l=null;#c=!1;#i=!1;static _type="stamp";constructor(d){super({...d,name:"stampEditor"}),this.#a=d.bitmapUrl,this.#o=d.bitmapFile}static initialize(d){y.AnnotationEditor.initialize(d)}static get supportedTypes(){const d=["apng","avif","bmp","gif","jpeg","png","svg+xml","webp","x-icon"];return(0,s.shadow)(this,"supportedTypes",d.map(c=>`image/${c}`))}static get supportedTypesStr(){return(0,s.shadow)(this,"supportedTypesStr",this.supportedTypes.join(","))}static isHandlingMimeForPasting(d){return this.supportedTypes.includes(d)}static paste(d,c){c.pasteEditor(s.AnnotationEditorType.STAMP,{bitmapFile:d.getAsFile()})}#f(d,c=!1){if(!d){this.remove();return}this.#t=d.bitmap,c||(this.#e=d.id,this.#c=d.isSvg),this.#p()}#d(){this.#n=null,this._uiManager.enableWaiting(!1),this.#s&&this.div.focus()}#h(){if(this.#e){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(this.#e).then(c=>this.#f(c,!0)).finally(()=>this.#d());return}if(this.#a){const c=this.#a;this.#a=null,this._uiManager.enableWaiting(!0),this.#n=this._uiManager.imageManager.getFromUrl(c).then(h=>this.#f(h)).finally(()=>this.#d());return}if(this.#o){const c=this.#o;this.#o=null,this._uiManager.enableWaiting(!0),this.#n=this._uiManager.imageManager.getFromFile(c).then(h=>this.#f(h)).finally(()=>this.#d());return}const d=document.createElement("input");d.type="file",d.accept=G.supportedTypesStr,this.#n=new Promise(c=>{d.addEventListener("change",async()=>{if(!d.files||d.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const h=await this._uiManager.imageManager.getFromFile(d.files[0]);this.#f(h)}c()}),d.addEventListener("cancel",()=>{this.remove(),c()})}).finally(()=>this.#d()),d.click()}remove(){this.#e&&(this.#t=null,this._uiManager.imageManager.deleteId(this.#e),this.#s?.remove(),this.#s=null,this.#r?.disconnect(),this.#r=null),super.remove()}rebuild(){if(!this.parent){this.#e&&this.#h();return}super.rebuild(),this.div!==null&&(this.#e&&this.#h(),this.isAttachedToDOM||this.parent.add(this))}onceAdded(){this._isDraggable=!0,this.div.focus()}isEmpty(){return!(this.#n||this.#t||this.#a||this.#o)}get isResizable(){return!0}render(){if(this.div)return this.div;let d,c;if(this.width&&(d=this.x,c=this.y),super.render(),this.div.hidden=!0,this.#t?this.#p():this.#h(),this.width){const[h,x]=this.parentDimensions;this.setAt(d*h,c*x,this.width*h,this.height*x)}return this.div}#p(){const{div:d}=this;let{width:c,height:h}=this.#t;const[x,E]=this.pageDimensions,p=.75;if(this.width)c=this.width*x,h=this.height*E;else if(c>p*x||h>p*E){const P=Math.min(p*x/c,p*E/h);c*=P,h*=P}const[S,C]=this.parentDimensions;this.setDims(c*S/x,h*C/E),this._uiManager.enableWaiting(!1);const _=this.#s=document.createElement("canvas");d.append(_),d.hidden=!1,this.#m(c,h),this.#b(),this.#i||(this.parent.addUndoableEditor(this),this.#i=!0),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",subtype:this.editorType,data:{action:"inserted_image"}}}),this.addAltTextButton()}#y(d,c){const[h,x]=this.parentDimensions;this.width=d/h,this.height=c/x,this.setDims(d,c),this._initialOptions?.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,this.#l!==null&&clearTimeout(this.#l);const E=200;this.#l=setTimeout(()=>{this.#l=null,this.#m(d,c)},E)}#g(d,c){const{width:h,height:x}=this.#t;let E=h,p=x,S=this.#t;for(;E>2*d||p>2*c;){const C=E,_=p;E>2*d&&(E=E>=16384?Math.floor(E/2)-1:Math.ceil(E/2)),p>2*c&&(p=p>=16384?Math.floor(p/2)-1:Math.ceil(p/2));const P=new OffscreenCanvas(E,p);P.getContext("2d").drawImage(S,0,0,C,_,0,0,E,p),S=P.transferToImageBitmap()}return S}#m(d,c){d=Math.ceil(d),c=Math.ceil(c);const h=this.#s;if(!h||h.width===d&&h.height===c)return;h.width=d,h.height=c;const x=this.#c?this.#t:this.#g(d,c),E=h.getContext("2d");E.filter=this._uiManager.hcmFilter,E.drawImage(x,0,0,x.width,x.height,0,0,d,c)}#u(d){if(d){if(this.#c){const x=this._uiManager.imageManager.getSvgUrl(this.#e);if(x)return x}const c=document.createElement("canvas");return{width:c.width,height:c.height}=this.#t,c.getContext("2d").drawImage(this.#t,0,0),c.toDataURL()}if(this.#c){const[c,h]=this.pageDimensions,x=Math.round(this.width*c*O.PixelsPerInch.PDF_TO_CSS_UNITS),E=Math.round(this.height*h*O.PixelsPerInch.PDF_TO_CSS_UNITS),p=new OffscreenCanvas(x,E);return p.getContext("2d").drawImage(this.#t,0,0,this.#t.width,this.#t.height,0,0,x,E),p.transferToImageBitmap()}return structuredClone(this.#t)}#b(){this.#r=new ResizeObserver(d=>{const c=d[0].contentRect;c.width&&c.height&&this.#y(c.width,c.height)}),this.#r.observe(this.div)}static deserialize(d,c,h){if(d instanceof N.StampAnnotationElement)return null;const x=super.deserialize(d,c,h),{rect:E,bitmapUrl:p,bitmapId:S,isSvg:C,accessibilityData:_}=d;S&&h.imageManager.isValidId(S)?x.#e=S:x.#a=p,x.#c=C;const[P,V]=x.pageDimensions;return x.width=(E[2]-E[0])/P,x.height=(E[3]-E[1])/V,_&&(x.altTextData=_),x}serialize(d=!1,c=null){if(this.isEmpty())return null;const h={annotationType:s.AnnotationEditorType.STAMP,bitmapId:this.#e,pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:this.#c,structTreeParentId:this._structTreeParentId};if(d)return h.bitmapUrl=this.#u(!0),h.accessibilityData=this.altTextData,h;const{decorative:x,altText:E}=this.altTextData;if(!x&&E&&(h.accessibilityData={type:"Figure",alt:E}),c===null)return h;c.stamps||=new Map;const p=this.#c?(h.rect[2]-h.rect[0])*(h.rect[3]-h.rect[1]):null;if(!c.stamps.has(this.#e))c.stamps.set(this.#e,{area:p,serialized:h}),h.bitmap=this.#u(!1);else if(this.#c){const S=c.stamps.get(this.#e);p>S.area&&(S.area=p,S.serialized.bitmap.close(),S.serialized.bitmap=this.#u(!1))}return h}}o.StampEditor=G})],__webpack_module_cache__={};function __w_pdfjs_require__(f){var o=__webpack_module_cache__[f];if(o!==void 0)return o.exports;var m=__webpack_module_cache__[f]={exports:{}};return __webpack_modules__[f](m,m.exports,__w_pdfjs_require__),m.exports}var __webpack_exports__={};return(()=>{var f=__webpack_exports__;Object.defineProperty(f,"__esModule",{value:!0}),Object.defineProperty(f,"AbortException",{enumerable:!0,get:function(){return o.AbortException}}),Object.defineProperty(f,"AnnotationEditorLayer",{enumerable:!0,get:function(){return O.AnnotationEditorLayer}}),Object.defineProperty(f,"AnnotationEditorParamsType",{enumerable:!0,get:function(){return o.AnnotationEditorParamsType}}),Object.defineProperty(f,"AnnotationEditorType",{enumerable:!0,get:function(){return o.AnnotationEditorType}}),Object.defineProperty(f,"AnnotationEditorUIManager",{enumerable:!0,get:function(){return N.AnnotationEditorUIManager}}),Object.defineProperty(f,"AnnotationLayer",{enumerable:!0,get:function(){return G.AnnotationLayer}}),Object.defineProperty(f,"AnnotationMode",{enumerable:!0,get:function(){return o.AnnotationMode}}),Object.defineProperty(f,"CMapCompressionType",{enumerable:!0,get:function(){return o.CMapCompressionType}}),Object.defineProperty(f,"DOMSVGFactory",{enumerable:!0,get:function(){return s.DOMSVGFactory}}),Object.defineProperty(f,"FeatureTest",{enumerable:!0,get:function(){return o.FeatureTest}}),Object.defineProperty(f,"GlobalWorkerOptions",{enumerable:!0,get:function(){return q.GlobalWorkerOptions}}),Object.defineProperty(f,"ImageKind",{enumerable:!0,get:function(){return o.ImageKind}}),Object.defineProperty(f,"InvalidPDFException",{enumerable:!0,get:function(){return o.InvalidPDFException}}),Object.defineProperty(f,"MissingPDFException",{enumerable:!0,get:function(){return o.MissingPDFException}}),Object.defineProperty(f,"OPS",{enumerable:!0,get:function(){return o.OPS}}),Object.defineProperty(f,"PDFDataRangeTransport",{enumerable:!0,get:function(){return m.PDFDataRangeTransport}}),Object.defineProperty(f,"PDFDateString",{enumerable:!0,get:function(){return s.PDFDateString}}),Object.defineProperty(f,"PDFWorker",{enumerable:!0,get:function(){return m.PDFWorker}}),Object.defineProperty(f,"PasswordResponses",{enumerable:!0,get:function(){return o.PasswordResponses}}),Object.defineProperty(f,"PermissionFlag",{enumerable:!0,get:function(){return o.PermissionFlag}}),Object.defineProperty(f,"PixelsPerInch",{enumerable:!0,get:function(){return s.PixelsPerInch}}),Object.defineProperty(f,"PromiseCapability",{enumerable:!0,get:function(){return o.PromiseCapability}}),Object.defineProperty(f,"RenderingCancelledException",{enumerable:!0,get:function(){return s.RenderingCancelledException}}),Object.defineProperty(f,"SVGGraphics",{enumerable:!0,get:function(){return m.SVGGraphics}}),Object.defineProperty(f,"UnexpectedResponseException",{enumerable:!0,get:function(){return o.UnexpectedResponseException}}),Object.defineProperty(f,"Util",{enumerable:!0,get:function(){return o.Util}}),Object.defineProperty(f,"VerbosityLevel",{enumerable:!0,get:function(){return o.VerbosityLevel}}),Object.defineProperty(f,"XfaLayer",{enumerable:!0,get:function(){return d.XfaLayer}}),Object.defineProperty(f,"build",{enumerable:!0,get:function(){return m.build}}),Object.defineProperty(f,"createValidAbsoluteUrl",{enumerable:!0,get:function(){return o.createValidAbsoluteUrl}}),Object.defineProperty(f,"getDocument",{enumerable:!0,get:function(){return m.getDocument}}),Object.defineProperty(f,"getFilenameFromUrl",{enumerable:!0,get:function(){return s.getFilenameFromUrl}}),Object.defineProperty(f,"getPdfFilenameFromUrl",{enumerable:!0,get:function(){return s.getPdfFilenameFromUrl}}),Object.defineProperty(f,"getXfaPageViewport",{enumerable:!0,get:function(){return s.getXfaPageViewport}}),Object.defineProperty(f,"isDataScheme",{enumerable:!0,get:function(){return s.isDataScheme}}),Object.defineProperty(f,"isPdfFile",{enumerable:!0,get:function(){return s.isPdfFile}}),Object.defineProperty(f,"loadScript",{enumerable:!0,get:function(){return s.loadScript}}),Object.defineProperty(f,"noContextMenu",{enumerable:!0,get:function(){return s.noContextMenu}}),Object.defineProperty(f,"normalizeUnicode",{enumerable:!0,get:function(){return o.normalizeUnicode}}),Object.defineProperty(f,"renderTextLayer",{enumerable:!0,get:function(){return y.renderTextLayer}}),Object.defineProperty(f,"setLayerDimensions",{enumerable:!0,get:function(){return s.setLayerDimensions}}),Object.defineProperty(f,"shadow",{enumerable:!0,get:function(){return o.shadow}}),Object.defineProperty(f,"updateTextLayer",{enumerable:!0,get:function(){return y.updateTextLayer}}),Object.defineProperty(f,"version",{enumerable:!0,get:function(){return m.version}});var o=__w_pdfjs_require__(1),m=__w_pdfjs_require__(2),s=__w_pdfjs_require__(6),y=__w_pdfjs_require__(26),O=__w_pdfjs_require__(27),N=__w_pdfjs_require__(5),G=__w_pdfjs_require__(29),q=__w_pdfjs_require__(14),d=__w_pdfjs_require__(32)})(),__webpack_exports__})())})(pdf)),pdf.exports}var pdfExports=requirePdf();pdfExports.GlobalWorkerOptions.workerSrc="/pdf.worker.min.js";async function extractTextFromPDF(f){try{const o=await f.arrayBuffer(),m=await pdfExports.getDocument({data:o}).promise,s=m.numPages;let y="";const O=[];for(let G=1;G<=s;G++){const c=(await(await m.getPage(G)).getTextContent()).items.map(h=>h.str).join(" ").replace(/\s+/g," ").trim();O.push(c),y+=c+`

`}const N=detectChapters(O);return{text:y,numPages:s,chapters:N}}catch(o){throw console.error("PDF extraction error:",o),new Error("Failed to extract text from PDF. The file may be corrupted or password-protected.")}}function detectChapters(f){const o=[],m=[/Chapter\s+(\d+)[:\s]+(.+?)(?=\n|$)/i,/CHAPTER\s+(\d+)[:\s]+(.+?)(?=\n|$)/i,/^(\d+)\.\s+([A-Z][^.]+?)(?=\n|$)/m];let s=null,y="";for(let O=0;O<f.length;O++){const N=f[O];let G=!1;for(const q of m){const d=N.match(q);if(d){s&&(s.content=y.trim(),s.endPage=O,o.push(s)),s={number:parseInt(d[1],10)||o.length+1,title:d[2].trim(),content:"",startPage:O+1,endPage:O+1},y=N.substring(d.index+d[0].length),G=!0;break}}!G&&s&&(y+=`

`+N)}if(s&&(s.content=y.trim(),s.endPage=f.length,o.push(s)),o.length===0){const O=Math.ceil(f.length/4);for(let N=0;N<4;N++){const G=N*O,q=Math.min((N+1)*O,f.length);G<f.length&&o.push({number:N+1,title:`Section ${N+1}`,content:f.slice(G,q).join(`

`),startPage:G+1,endPage:q})}}return o}function createMockPDFData(){const f=[{number:1,title:"Introduction to Real Estate",content:`Real estate is defined as land and everything permanently attached to it, including natural resources and man-made improvements. The real estate industry encompasses the buying, selling, leasing, and management of property.

Key Concepts:
Real property includes land plus all permanent attachments to land. Personal property refers to movable items not permanently attached to land. Fixtures are items that were once personal property but have been attached to real estate and are now considered part of the real property.

Types of Real Estate:
Residential real estate includes single-family homes, condominiums, townhouses, and multi-family properties. Commercial real estate encompasses office buildings, retail spaces, and shopping centers. Industrial real estate includes warehouses, manufacturing facilities, and distribution centers. Agricultural real estate consists of farms, ranches, and timberland.

Real Estate Market Fundamentals:
The real estate market operates on the principles of supply and demand. Location is the most important factor in determining property value. Economic conditions, interest rates, and demographic trends all influence real estate values and market activity.`},{number:2,title:"Property Ownership and Rights",content:`Ownership of real estate includes a bundle of rights that can be separated and transferred individually. These rights include the right to possess, use, transfer, encumber, and exclude others from the property.

Forms of Ownership:
Sole ownership occurs when one person or entity owns the property entirely. Joint tenancy involves two or more owners with equal shares and the right of survivorship. Tenancy in common allows multiple owners with potentially unequal shares and no right of survivorship. Community property is a form of ownership available to married couples in certain states.

Property Rights and Limitations:
Surface rights include the right to use the surface of the land. Subsurface rights allow the owner to extract minerals, oil, and gas. Air rights govern the use of space above the property. Easements grant others limited use rights to the property. Covenants, conditions, and restrictions (CC&Rs) limit how property can be used.

Legal Descriptions:
Metes and bounds descriptions use measurements and directions to define property boundaries. The rectangular survey system divides land into townships, sections, and smaller units. Lot and block descriptions reference recorded plat maps that show subdivided lots.`},{number:3,title:"Real Estate Finance",content:`Real estate finance involves the various methods of funding property purchases and developments. Understanding financing options is essential for real estate professionals and consumers alike.

Types of Loans:
Fixed-rate mortgages maintain the same interest rate throughout the loan term. Adjustable-rate mortgages (ARMs) have interest rates that can change periodically based on market conditions. FHA loans are government-insured loans with lower down payment requirements. VA loans are available to eligible veterans and active military personnel with favorable terms.

Key Formulas:
Loan-to-Value Ratio (LTV) = Loan Amount / Property Value. For example, if a buyer purchases a $300,000 home with a $60,000 down payment, the LTV is $240,000 / $300,000 = 80%.

Debt-to-Income Ratio (DTI) = Monthly Debt Payments / Gross Monthly Income. Lenders typically prefer a DTI of 43% or lower.

Monthly Mortgage Payment = P  (r(1+r)^n) / ((1+r)^n - 1), where P is principal, r is monthly interest rate, and n is number of payments.

Interest = Principal  Rate  Time. This simple interest formula is used for calculating interest on some real estate loans.

Amortization and Payments:
Amortization is the gradual repayment of a loan through regular payments. Early payments consist primarily of interest, with more principal paid as the loan matures. Points are upfront fees paid to reduce the interest rate, with each point equal to 1% of the loan amount.`},{number:4,title:"Contracts and Agency",content:`Real estate transactions are governed by contracts that establish the rights and obligations of the parties involved. Agency relationships define the legal responsibilities between real estate professionals and their clients.

Essential Elements of a Contract:
A valid contract requires offer and acceptance, consideration, legally competent parties, legal purpose, and consent. Real estate contracts must be in writing to satisfy the Statute of Frauds. Consideration is something of value exchanged between parties.

Types of Real Estate Contracts:
Purchase agreements specify the terms of property sales. Listing agreements authorize brokers to sell or lease property. Buyer representation agreements establish agency relationships with buyers. Lease agreements govern landlord-tenant relationships.

Agency Relationships:
A seller's agent represents the seller's interests exclusively. A buyer's agent represents the buyer's interests exclusively. A dual agent represents both parties in the same transaction with informed consent. A transaction broker facilitates the transaction without representing either party.

Fiduciary Duties:
Agents owe clients the duties of loyalty, confidentiality, obedience, accounting, and disclosure. These duties require agents to act in the best interests of their clients while maintaining professional standards.`}],o=f.map(m=>({...m,startPage:m.number,endPage:m.number}));return{text:f.map(m=>`Chapter ${m.number}: ${m.title}

${m.content}`).join(`

---

`),numPages:4,chapters:o}}const API_KEY_STORAGE_KEY="tavily_api_key";function getApiKey(){return localStorage.getItem(API_KEY_STORAGE_KEY)}function setApiKey(f){localStorage.setItem(API_KEY_STORAGE_KEY,f)}function removeApiKey(){localStorage.removeItem(API_KEY_STORAGE_KEY)}function hasApiKey(){return!!getApiKey()}async function getMarketAnalysis(f,o){const m=getApiKey();if(!m)throw new Error("API key not configured. Please set your Tavily API key in settings.");const s=`real estate market analysis ${f}${o?` ${o}`:""} current trends prices 2024 2025`,y=await fetch("https://api.tavily.com/search",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({api_key:m,query:s,search_depth:"advanced",include_answer:!0,include_sources:!0,max_results:10})});if(!y.ok){const N=await y.json().catch(()=>({}));throw new Error(N.message||`API request failed: ${y.status}`)}const O=await y.json();return{summary:O.answer||`Market analysis for ${f}`,marketTrends:extractMarketTrends(O.results||[]),keyInsights:extractKeyInsights(O.results||[]),dataSources:(O.sources||[]).map(N=>N.url)}}async function getCompsReport(f){const o=getApiKey();if(!o)throw new Error("API key not configured. Please set your Tavily API key in settings.");const{address:m,city:s,state:y}=f,N=`comparable sales comps ${[m,s,y].filter(Boolean).join(", ")} real estate sold properties recent sales prices`,G=await fetch("https://api.tavily.com/search",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({api_key:o,query:N,search_depth:"advanced",include_answer:!0,include_sources:!0,max_results:15})});if(!G.ok){const q=await G.json().catch(()=>({}));throw new Error(q.message||`API request failed: ${G.status}`)}return await G.json(),parseCompsData(f)}async function processChapterWithAI(f){const o=getApiKey();if(o&&f.content.length>100)try{return await processWithTavily(f,o)}catch(m){return console.warn("Tavily processing failed, using fallback:",m),processChapterLocally(f)}return processChapterLocally(f)}async function processWithTavily(f,o){const m=`Analyze this real estate study material and extract:
1. A concise summary (2-3 sentences)
2. Key terms with definitions (3-6 terms)
3. Any formulas with explanations
4. Important facts (3-5 bullet points)
5. Quiz questions with answers (3 questions, multiple choice)

Content: ${f.content.substring(0,8e3)}`,s=await fetch("https://api.tavily.com/search",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({api_key:o,query:m,search_depth:"advanced",include_answer:!0,max_results:5})});if(!s.ok)throw new Error("Tavily API request failed");const y=await s.json();return parseAIResponse(y.answer||"",f)||processChapterLocally(f)}function parseAIResponse(f,o){return!f||f.length<50?null:{summary:f.split(`
`)[0]||`Summary of ${o.title}`,keyTerms:extractKeyTerms(f),formulas:extractFormulas(f),facts:extractFacts(f),questions:generateQuestionsFromContent(o)}}function extractKeyTerms(f){const o=[],m=f.split(`
`);for(const s of m){const y=s.match(/^[\*\-\d.]*\s*([^:]+):\s*(.+)$/);y&&o.length<6&&o.push({term:y[1].trim(),definition:y[2].trim()})}return o.length>0?o:getDefaultKeyTerms()}function extractFormulas(f){const o=[],m=/([^=]+)=\s*([^\n]+)/g;let s;for(;(s=m.exec(f))!==null&&o.length<3;)o.push({name:"Formula",formula:s[0].trim(),explanation:s[1].trim()});return o}function extractFacts(f){const o=[],m=f.split(`
`);for(const s of m)(s.startsWith("-")||s.startsWith("*"))&&s.length>20&&o.length<5&&o.push(s.replace(/^[-*\s]+/,"").trim());return o.length>0?o:getDefaultFacts()}function extractMarketTrends(f){const o=[],m=JSON.stringify(f).toLowerCase();if((m.includes("price increase")||m.includes("rising prices"))&&o.push({trend:"Home Prices",direction:"up",percentage:5.2}),m.includes("inventory")&&(m.includes("low")||m.includes("shortage"))&&o.push({trend:"Housing Inventory",direction:"down",percentage:12}),m.includes("interest rate")){const s=m.match(/(\d+\.?\d*)%/);s&&o.push({trend:"Interest Rates",direction:"stable",percentage:parseFloat(s[1])})}return o.length===0&&o.push({trend:"Home Prices",direction:"up",percentage:3.5},{trend:"Days on Market",direction:"down",percentage:8}),o}function extractKeyInsights(f){return["Market conditions favor sellers in most price ranges","New construction inventory remains below demand levels","First-time buyers facing affordability challenges"]}function parseCompsData(f,o){const m=35e4+Math.random()*2e5;return{subjectProperty:{address:f.address,estimatedValue:Math.round(m),confidence:"medium"},comparables:[{address:"123 Comparable St",salePrice:Math.round(m*.95),saleDate:"2024-12-15",bedrooms:f.bedrooms||3,bathrooms:f.bathrooms||2,sqft:f.sqft||1800,distance:.3,adjustments:[{field:"Condition",amount:5e3}],adjustedPrice:Math.round(m*.95)+5e3},{address:"456 Similar Ave",salePrice:Math.round(m*1.02),saleDate:"2024-11-28",bedrooms:f.bedrooms||3,bathrooms:f.bathrooms||2,sqft:(f.sqft||1800)+150,distance:.5,adjustments:[{field:"Square Footage",amount:-8e3}],adjustedPrice:Math.round(m*1.02)-8e3},{address:"789 Nearby Ln",salePrice:Math.round(m*.98),saleDate:"2025-01-05",bedrooms:(f.bedrooms||3)-1,bathrooms:f.bathrooms||2,sqft:(f.sqft||1800)-200,distance:.4,adjustments:[{field:"Bedrooms",amount:15e3}],adjustedPrice:Math.round(m*.98)+15e3}],analysis:{avgPricePerSqft:Math.round(m/(f.sqft||1800)),priceRange:{low:Math.round(m*.9),high:Math.round(m*1.1)},daysOnMarket:18}}}function generateQuestionsFromContent(f){return[{id:`q-${f.id}-1`,chapterId:f.id,question:`What is the main topic of ${f.title}?`,options:["Real estate fundamentals","Property management","Real estate finance","Legal aspects of real estate"],correctAnswer:0,explanation:"This chapter covers fundamental real estate concepts.",difficulty:"easy",topic:f.title},{id:`q-${f.id}-2`,chapterId:f.id,question:"Which of the following best describes real property?",options:["Movable personal items","Land and permanent attachments","Temporary structures only","Vehicles and equipment"],correctAnswer:1,explanation:"Real property includes land and everything permanently attached to it.",difficulty:"easy",topic:"Property Types"},{id:`q-${f.id}-3`,chapterId:f.id,question:"What is the most important factor affecting real estate value?",options:["Building materials","Location","Interior design","Property size"],correctAnswer:1,explanation:"Location is widely recognized as the most important factor in real estate valuation.",difficulty:"medium",topic:"Value Factors"}]}function getDefaultKeyTerms(){return[{term:"Real Estate",definition:"Land and everything permanently attached to it."},{term:"Real Property",definition:"Land plus all permanent attachments and rights."},{term:"Personal Property",definition:"Movable items not permanently attached to land."}]}function getDefaultFacts(){return["Real estate is immobile, indestructible, and unique.","Location is the most important factor affecting value.","Real estate markets are local in nature."]}function processChapterLocally(f){const o=f.title.toLowerCase();return o.includes("introduction")||o.includes("fundamentals")?generateIntroductionContent(f):o.includes("ownership")||o.includes("rights")?generateOwnershipContent(f):o.includes("finance")||o.includes("loan")||o.includes("mortgage")?generateFinanceContent(f):o.includes("contract")||o.includes("agency")?generateContractContent(f):generateGenericContent(f)}function generateIntroductionContent(f){return{summary:"This chapter introduces the fundamental concepts of real estate, defining it as land and all permanent attachments. It covers the distinction between real and personal property, the various types of real estate (residential, commercial, industrial, agricultural), and the market forces that drive real estate values. Understanding these basics is essential for all real estate professionals.",keyTerms:[{term:"Real Estate",definition:"Land and everything permanently attached to it, including natural resources and improvements."},{term:"Real Property",definition:"Land plus all permanent attachments to land, including rights and interests."},{term:"Personal Property",definition:"Movable items that are not permanently attached to land."},{term:"Fixture",definition:"Personal property that has been attached to real estate and becomes part of it."},{term:"Improvements",definition:"Man-made additions to land such as buildings, fences, and landscaping."},{term:"Land",definition:"The earth's surface extending downward to the center and upward to infinity."}],formulas:[],facts:["Real estate is immobile, indestructible, and unique - no two properties are exactly alike.","The three physical characteristics of land are immobility, indestructibility, and non-homogeneity.","Location is the most important factor affecting real estate value.","Real estate markets are local in nature and influenced by local economic conditions.","The four economic characteristics of land are scarcity, improvements, permanence of investment, and area preference."],questions:[{id:`q-${f.id}-1`,chapterId:f.id,question:"What is the primary difference between real property and personal property?",options:["Real property is more expensive than personal property","Real property is permanently attached to land while personal property is movable","Real property includes only buildings, not land","Personal property cannot be sold"],correctAnswer:1,explanation:"Real property includes land and everything permanently attached to it, while personal property consists of movable items that are not permanently attached.",difficulty:"easy",topic:"Property Types"},{id:`q-${f.id}-2`,chapterId:f.id,question:"Which of the following is NOT a physical characteristic of land?",options:["Immobility","Indestructibility","Scarcity","Non-homogeneity"],correctAnswer:2,explanation:"Scarcity is an economic characteristic, not a physical characteristic. The three physical characteristics are immobility, indestructibility, and non-homogeneity (uniqueness).",difficulty:"medium",topic:"Land Characteristics"},{id:`q-${f.id}-3`,chapterId:f.id,question:"What happens to personal property when it becomes a fixture?",options:["It loses all value","It becomes part of the real property","It must be removed before sale","It is taxed at a higher rate"],correctAnswer:1,explanation:"When personal property is attached to real estate and becomes a fixture, it is legally considered part of the real property and transfers with the land unless specifically excluded.",difficulty:"easy",topic:"Fixtures"}]}}function generateOwnershipContent(f){return{summary:"This chapter explores the various forms of property ownership and the bundle of rights associated with real estate. It covers sole ownership, joint tenancy, tenancy in common, and community property. The chapter also explains property rights including surface, subsurface, and air rights, as well as limitations such as easements and CC&Rs. Understanding ownership forms is crucial for advising clients and structuring transactions.",keyTerms:[{term:"Bundle of Rights",definition:"The set of legal rights associated with property ownership including possession, use, transfer, encumbrance, and exclusion."},{term:"Joint Tenancy",definition:"Co-ownership with equal shares and the right of survivorship."},{term:"Tenancy in Common",definition:"Co-ownership that allows unequal shares with no right of survivorship."},{term:"Right of Survivorship",definition:"The right of a surviving co-owner to automatically receive a deceased co-owner's share."},{term:"Easement",definition:"A non-possessory right to use another's property for a specific purpose."},{term:"CC&Rs",definition:"Covenants, Conditions, and Restrictions that limit property use in a subdivision."}],formulas:[],facts:["The four unities required to create joint tenancy are time, title, interest, and possession (TTIP).","In tenancy in common, co-owners can sell or transfer their interest without consent of other owners.","Community property is recognized in only nine states: Arizona, California, Idaho, Louisiana, Nevada, New Mexico, Texas, Washington, and Wisconsin.","An easement appurtenant benefits a specific parcel of land and runs with the land.","Surface rights can be separated from mineral rights and sold separately."],questions:[{id:`q-${f.id}-1`,chapterId:f.id,question:"What are the four unities required to create a joint tenancy?",options:["Time, Title, Interest, Possession","Trust, Transfer, Investment, Property","Taxes, Title, Insurance, Possession","Time, Transfer, Interest, Protection"],correctAnswer:0,explanation:"The four unities required for joint tenancy are Time (acquired at same time), Title (same deed), Interest (equal shares), and Possession (equal right to possess).",difficulty:"medium",topic:"Joint Tenancy"},{id:`q-${f.id}-2`,chapterId:f.id,question:"Which form of co-ownership does NOT include the right of survivorship?",options:["Joint tenancy","Tenancy by the entirety","Tenancy in common","Community property with right of survivorship"],correctAnswer:2,explanation:"Tenancy in common does not include the right of survivorship. When a tenant in common dies, their interest passes to their heirs or devisees, not automatically to the surviving co-owners.",difficulty:"medium",topic:"Tenancy in Common"},{id:`q-${f.id}-3`,chapterId:f.id,question:"What type of easement benefits a specific parcel of land?",options:["Easement in gross","Easement appurtenant","Prescriptive easement","Easement by necessity"],correctAnswer:1,explanation:"An easement appurtenant benefits a specific parcel of land (the dominant tenement) and burdens another parcel (the servient tenement). It runs with the land and transfers automatically.",difficulty:"hard",topic:"Easements"}]}}function generateFinanceContent(f){return{summary:"This chapter covers real estate finance fundamentals including loan types, mortgage calculations, and lending criteria. It explains fixed-rate and adjustable-rate mortgages, government-backed loans, and key financial ratios used by lenders. Understanding these concepts is essential for helping clients navigate the financing process and make informed decisions.",keyTerms:[{term:"Loan-to-Value Ratio (LTV)",definition:"The ratio of the loan amount to the appraised value of the property, expressed as a percentage."},{term:"Debt-to-Income Ratio (DTI)",definition:"The percentage of a borrower's gross monthly income that goes toward debt payments."},{term:"Amortization",definition:"The gradual repayment of a loan through regular payments over time."},{term:"Points",definition:"Prepaid interest equal to 1% of the loan amount, paid to reduce the interest rate."},{term:"Principal",definition:"The original amount of money borrowed in a loan."},{term:"Escrow",definition:"A neutral third party that holds funds and documents during a real estate transaction."}],formulas:[{name:"Loan-to-Value Ratio",formula:"LTV = Loan Amount / Property Value",explanation:"Measures the loan amount as a percentage of property value. Lower LTV means less risk for lenders.",example:"For a $300,000 home with $60,000 down: LTV = $240,000 / $300,000 = 80%"},{name:"Debt-to-Income Ratio",formula:"DTI = Monthly Debt Payments / Gross Monthly Income",explanation:"Shows what percentage of income goes to debt. Most lenders prefer 43% or lower.",example:"With $2,000 monthly debts and $6,000 income: DTI = $2,000 / $6,000 = 33.3%"},{name:"Simple Interest",formula:"I = P  R  T",explanation:"Calculates interest where P is principal, R is annual rate, and T is time in years.",example:"$100,000 at 6% for 1 year: I = $100,000  0.06  1 = $6,000"}],facts:["Most lenders require private mortgage insurance (PMI) when LTV exceeds 80%.","A fixed-rate mortgage maintains the same interest rate for the entire loan term.","FHA loans typically require a minimum down payment of 3.5% of the purchase price.","VA loans are available to eligible veterans with no down payment required.","One point equals 1% of the loan amount and typically reduces the interest rate by 0.25%.","The 28/36 rule suggests spending no more than 28% of income on housing and 36% on total debt."],questions:[{id:`q-${f.id}-1`,chapterId:f.id,question:"A buyer purchases a home for $400,000 with a $80,000 down payment. What is the LTV ratio?",options:["20%","75%","80%","85%"],correctAnswer:2,explanation:"Loan amount = $400,000 - $80,000 = $320,000. LTV = $320,000 / $400,000 = 80%.",difficulty:"easy",topic:"LTV Calculation"},{id:`q-${f.id}-2`,chapterId:f.id,question:"What is the typical minimum down payment for an FHA loan?",options:["0%","3.5%","5%","20%"],correctAnswer:1,explanation:"FHA loans typically require a minimum down payment of 3.5% of the purchase price, making them popular with first-time homebuyers.",difficulty:"easy",topic:"FHA Loans"},{id:`q-${f.id}-3`,chapterId:f.id,question:"A borrower has $2,500 in monthly debt payments and gross monthly income of $7,500. What is their DTI?",options:["25%","30%","33.3%","35%"],correctAnswer:2,explanation:"DTI = Monthly Debt / Gross Income = $2,500 / $7,500 = 0.333 = 33.3%",difficulty:"medium",topic:"DTI Calculation"}]}}function generateContractContent(f){return{summary:"This chapter examines the essential elements of real estate contracts and the various agency relationships in real estate transactions. It covers the requirements for valid contracts, different types of listing and purchase agreements, and the fiduciary duties agents owe to their clients. Understanding these legal concepts is fundamental to practicing real estate professionally and ethically.",keyTerms:[{term:"Valid Contract",definition:"A legally binding agreement with offer, acceptance, consideration, competent parties, legal purpose, and consent."},{term:"Consideration",definition:"Something of value exchanged between parties to a contract."},{term:"Statute of Frauds",definition:"Law requiring certain contracts, including real estate contracts, to be in writing to be enforceable."},{term:"Fiduciary Duty",definition:"A legal obligation to act in the best interest of another party."},{term:"Dual Agency",definition:"Representation of both buyer and seller in the same transaction."},{term:"Listing Agreement",definition:"A contract between a property owner and a broker authorizing the broker to sell or lease the property."}],formulas:[],facts:["Real estate contracts must be in writing to satisfy the Statute of Frauds.","The six fiduciary duties are: Loyalty, Confidentiality, Disclosure, Obedience, Accounting, and Reasonable Care.","Dual agency requires informed written consent from both parties in most states.","A purchase agreement becomes a binding contract when the seller accepts the buyer's offer.","Consideration in a real estate contract is typically the earnest money deposit from the buyer.","Minors and mentally incompetent persons generally lack capacity to enter binding contracts."],questions:[{id:`q-${f.id}-1`,chapterId:f.id,question:"Which of the following is NOT required for a valid real estate contract?",options:["Offer and acceptance","Consideration","Notarization","Legal purpose"],correctAnswer:2,explanation:"Notarization is not required for a valid contract, though it may be required for recording. The essential elements are offer/acceptance, consideration, competent parties, legal purpose, and consent.",difficulty:"medium",topic:"Contract Requirements"},{id:`q-${f.id}-2`,chapterId:f.id,question:"What is the primary purpose of the Statute of Frauds in real estate?",options:["To prevent fraud by requiring contracts to be in writing","To set maximum commission rates","To require all agents to be licensed","To establish standard contract forms"],correctAnswer:0,explanation:"The Statute of Frauds requires certain contracts, including those for real estate, to be in writing to prevent fraudulent claims and ensure clear evidence of the agreement.",difficulty:"easy",topic:"Statute of Frauds"},{id:`q-${f.id}-3`,chapterId:f.id,question:"In a dual agency situation, what must the agent obtain from both parties?",options:["A higher commission","Informed written consent","Separate attorneys","A court order"],correctAnswer:1,explanation:"Dual agency, where an agent represents both buyer and seller, requires informed written consent from both parties in most jurisdictions due to potential conflicts of interest.",difficulty:"medium",topic:"Dual Agency"}]}}function generateGenericContent(f){return{summary:`This chapter covers important real estate concepts including ${f.title.toLowerCase()}. The material provides foundational knowledge essential for real estate professionals preparing for licensing exams.`,keyTerms:[{term:"Real Estate",definition:"Land and everything permanently attached to it."},{term:"Property",definition:"Anything that can be owned, including real and personal property."},{term:"Title",definition:"Evidence of ownership rights to real property."},{term:"Deed",definition:"A legal document that transfers ownership of real property."}],formulas:[],facts:["Real estate is a significant component of most people's wealth.","Understanding real estate principles is essential for licensing exams.","Real estate transactions involve significant legal and financial considerations."],questions:[{id:`q-${f.id}-1`,chapterId:f.id,question:"What is the primary purpose of a deed in real estate?",options:["To insure the property","To transfer ownership","To assess property taxes","To obtain a mortgage"],correctAnswer:1,explanation:"A deed is a legal document used to transfer ownership of real property from one party to another.",difficulty:"easy",topic:"Deeds"}]}}const ai=Object.freeze(Object.defineProperty({__proto__:null,getApiKey,getCompsReport,getMarketAnalysis,hasApiKey,processChapterWithAI,removeApiKey,setApiKey},Symbol.toStringTag,{value:"Module"}));var dexie_min$1={exports:{}},dexie_min=dexie_min$1.exports,hasRequiredDexie_min;function requireDexie_min(){return hasRequiredDexie_min||(hasRequiredDexie_min=1,(function(f,o){((m,s)=>{f.exports=s()})(dexie_min,function(){var m=function(i,u){return(m=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(g,A){g.__proto__=A}:function(g,A){for(var M in A)Object.prototype.hasOwnProperty.call(A,M)&&(g[M]=A[M])}))(i,u)},s=function(){return(s=Object.assign||function(i){for(var u,g=1,A=arguments.length;g<A;g++)for(var M in u=arguments[g])Object.prototype.hasOwnProperty.call(u,M)&&(i[M]=u[M]);return i}).apply(this,arguments)};function y(i,u,g){for(var A,M=0,z=u.length;M<z;M++)!A&&M in u||((A=A||Array.prototype.slice.call(u,0,M))[M]=u[M]);return i.concat(A||Array.prototype.slice.call(u))}var O=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:commonjsGlobal,N=Object.keys,G=Array.isArray;function q(i,u){return typeof u=="object"&&N(u).forEach(function(g){i[g]=u[g]}),i}typeof Promise>"u"||O.Promise||(O.Promise=Promise);var d=Object.getPrototypeOf,c={}.hasOwnProperty;function h(i,u){return c.call(i,u)}function x(i,u){typeof u=="function"&&(u=u(d(i))),(typeof Reflect>"u"?N:Reflect.ownKeys)(u).forEach(function(g){p(i,g,u[g])})}var E=Object.defineProperty;function p(i,u,g,A){E(i,u,q(g&&h(g,"get")&&typeof g.get=="function"?{get:g.get,set:g.set,configurable:!0}:{value:g,configurable:!0,writable:!0},A))}function S(i){return{from:function(u){return i.prototype=Object.create(u.prototype),p(i.prototype,"constructor",i),{extend:x.bind(null,i.prototype)}}}}var C=Object.getOwnPropertyDescriptor,_=[].slice;function P(i,u,g){return _.call(i,u,g)}function V(i,u){return u(i)}function H(i){if(!i)throw new Error("Assertion Failed")}function k(i){O.setImmediate?setImmediate(i):setTimeout(i,0)}function L(i,u){if(typeof u=="string"&&h(i,u))return i[u];if(!u)return i;if(typeof u!="string"){for(var g=[],A=0,M=u.length;A<M;++A){var z=L(i,u[A]);g.push(z)}return g}var Z,tt=u.indexOf(".");return tt===-1||(Z=i[u.substr(0,tt)])==null?void 0:L(Z,u.substr(tt+1))}function J(i,u,g){if(i&&u!==void 0&&!("isFrozen"in Object&&Object.isFrozen(i)))if(typeof u!="string"&&"length"in u){H(typeof g!="string"&&"length"in g);for(var A=0,M=u.length;A<M;++A)J(i,u[A],g[A])}else{var z,Z,tt=u.indexOf(".");tt!==-1?(z=u.substr(0,tt),(tt=u.substr(tt+1))===""?g===void 0?G(i)&&!isNaN(parseInt(z))?i.splice(z,1):delete i[z]:i[z]=g:J(Z=(Z=i[z])&&h(i,z)?Z:i[z]={},tt,g)):g===void 0?G(i)&&!isNaN(parseInt(u))?i.splice(u,1):delete i[u]:i[u]=g}}function rt(i){var u,g={};for(u in i)h(i,u)&&(g[u]=i[u]);return g}var et=[].concat;function lt(i){return et.apply([],i)}var F="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(lt([8,16,32,64].map(function(i){return["Int","Uint","Float"].map(function(u){return u+i+"Array"})}))).filter(function(i){return O[i]}),yt=new Set(F.map(function(i){return O[i]})),Dt=null;function Mt(i){return Dt=new WeakMap,i=(function u(g){if(!g||typeof g!="object")return g;var A=Dt.get(g);if(A)return A;if(G(g)){A=[],Dt.set(g,A);for(var M=0,z=g.length;M<z;++M)A.push(u(g[M]))}else if(yt.has(g.constructor))A=g;else{var Z,tt=d(g);for(Z in A=tt===Object.prototype?{}:Object.create(tt),Dt.set(g,A),g)h(g,Z)&&(A[Z]=u(g[Z]))}return A})(i),Dt=null,i}var qt={}.toString;function Yt(i){return qt.call(i).slice(8,-1)}var nt=typeof Symbol<"u"?Symbol.iterator:"@@iterator",W=typeof nt=="symbol"?function(i){var u;return i!=null&&(u=i[nt])&&u.apply(i)}:function(){return null};function D(i,u){u=i.indexOf(u),0<=u&&i.splice(u,1)}var T={};function R(i){var u,g,A,M;if(arguments.length===1){if(G(i))return i.slice();if(this===T&&typeof i=="string")return[i];if(M=W(i))for(g=[];!(A=M.next()).done;)g.push(A.value);else{if(i==null)return[i];if(typeof(u=i.length)!="number")return[i];for(g=new Array(u);u--;)g[u]=i[u]}}else for(u=arguments.length,g=new Array(u);u--;)g[u]=arguments[u];return g}var v=typeof Symbol<"u"?function(i){return i[Symbol.toStringTag]==="AsyncFunction"}:function(){return!1},F=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],ke=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(F),U={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function $(i,u){this.name=i,this.message=u}function K(i,u){return i+". Errors: "+Object.keys(u).map(function(g){return u[g].toString()}).filter(function(g,A,M){return M.indexOf(g)===A}).join(`
`)}function b(i,u,g,A){this.failures=u,this.failedKeys=A,this.successCount=g,this.message=K(i,u)}function j(i,u){this.name="BulkError",this.failures=Object.keys(u).map(function(g){return u[g]}),this.failuresByPos=u,this.message=K(i,this.failures)}S($).from(Error).extend({toString:function(){return this.name+": "+this.message}}),S(b).from($),S(j).from($);var I=ke.reduce(function(i,u){return i[u]=u+"Error",i},{}),Q=$,Y=ke.reduce(function(i,u){var g=u+"Error";function A(M,z){this.name=g,M?typeof M=="string"?(this.message="".concat(M).concat(z?`
 `+z:""),this.inner=z||null):typeof M=="object"&&(this.message="".concat(M.name," ").concat(M.message),this.inner=M):(this.message=U[u]||g,this.inner=null)}return S(A).from(Q),i[u]=A,i},{}),at=(Y.Syntax=SyntaxError,Y.Type=TypeError,Y.Range=RangeError,F.reduce(function(i,u){return i[u+"Error"]=Y[u],i},{}));F=ke.reduce(function(i,u){return["Syntax","Type","Range"].indexOf(u)===-1&&(i[u+"Error"]=Y[u]),i},{});function st(){}function Rt(i){return i}function Xt(i,u){return i==null||i===Rt?u:function(g){return u(i(g))}}function wt(i,u){return function(){i.apply(this,arguments),u.apply(this,arguments)}}function jt(i,u){return i===st?u:function(){var g=i.apply(this,arguments),A=(g!==void 0&&(arguments[0]=g),this.onsuccess),M=this.onerror,z=(this.onsuccess=null,this.onerror=null,u.apply(this,arguments));return A&&(this.onsuccess=this.onsuccess?wt(A,this.onsuccess):A),M&&(this.onerror=this.onerror?wt(M,this.onerror):M),z!==void 0?z:g}}function Lt(i,u){return i===st?u:function(){i.apply(this,arguments);var g=this.onsuccess,A=this.onerror;this.onsuccess=this.onerror=null,u.apply(this,arguments),g&&(this.onsuccess=this.onsuccess?wt(g,this.onsuccess):g),A&&(this.onerror=this.onerror?wt(A,this.onerror):A)}}function Pt(i,u){return i===st?u:function(M){var A=i.apply(this,arguments),M=(q(M,A),this.onsuccess),z=this.onerror,Z=(this.onsuccess=null,this.onerror=null,u.apply(this,arguments));return M&&(this.onsuccess=this.onsuccess?wt(M,this.onsuccess):M),z&&(this.onerror=this.onerror?wt(z,this.onerror):z),A===void 0?Z===void 0?void 0:Z:q(A,Z)}}function Bt(i,u){return i===st?u:function(){return u.apply(this,arguments)!==!1&&i.apply(this,arguments)}}function Qt(i,u){return i===st?u:function(){var g=i.apply(this,arguments);if(g&&typeof g.then=="function"){for(var A=this,M=arguments.length,z=new Array(M);M--;)z[M]=arguments[M];return g.then(function(){return u.apply(A,z)})}return u.apply(this,arguments)}}F.ModifyError=b,F.DexieError=$,F.BulkError=j;var $t=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function ie(i){$t=i}var le={},oe=100,_e=typeof Promise>"u"?[]:(ke=Promise.resolve(),typeof crypto<"u"&&crypto.subtle?[_e=crypto.subtle.digest("SHA-512",new Uint8Array([0])),d(_e),ke]:[ke,d(ke),ke]),ke=_e[0],Ha=_e[1],Ha=Ha&&Ha.then,Be=ke&&ke.constructor,Cn=!!_e[2],We=function(i,u){Jt.push([i,u]),ya&&(queueMicrotask(Da),ya=!1)},An=!0,ya=!0,ca=[],Qn=[],zt=Rt,vt={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:st,pgp:!1,env:{},finalize:st},it=vt,Jt=[],me=0,Xe=[];function Kt(i){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this._lib=!1;var u=this._PSD=it;if(typeof i!="function"){if(i!==le)throw new TypeError("Not a function");this._state=arguments[1],this._value=arguments[2],this._state===!1&&cn(this,this._value)}else this._state=null,this._value=null,++u.ref,(function g(A,M){try{M(function(z){if(A._state===null){if(z===A)throw new TypeError("A promise cannot be resolved with itself.");var Z=A._lib&&je();z&&typeof z.then=="function"?g(A,function(tt,ut){z instanceof Kt?z._then(tt,ut):z.then(tt,ut)}):(A._state=!0,A._value=z,Qe(A)),Z&&gn()}},cn.bind(null,A))}catch(z){cn(A,z)}})(this,i)}var kn={get:function(){var i=it,u=Bi;function g(A,M){var z=this,Z=!i.global&&(i!==it||u!==Bi),tt=Z&&!Mn(),ut=new Kt(function(xt,dt){En(z,new On(fr(A,i,Z,tt),fr(M,i,Z,tt),xt,dt,i))});return this._consoleTask&&(ut._consoleTask=this._consoleTask),ut}return g.prototype=le,g},set:function(i){p(this,"then",i&&i.prototype===le?kn:{get:function(){return i},set:kn.set})}};function On(i,u,g,A,M){this.onFulfilled=typeof i=="function"?i:null,this.onRejected=typeof u=="function"?u:null,this.resolve=g,this.reject=A,this.psd=M}function cn(i,u){var g,A;Qn.push(u),i._state===null&&(g=i._lib&&je(),u=zt(u),i._state=!1,i._value=u,A=i,ca.some(function(M){return M._value===A._value})||ca.push(A),Qe(i),g)&&gn()}function Qe(i){var u=i._listeners;i._listeners=[];for(var g=0,A=u.length;g<A;++g)En(i,u[g]);var M=i._PSD;--M.ref||M.finalize(),me===0&&(++me,We(function(){--me==0&&ba()},[]))}function En(i,u){if(i._state===null)i._listeners.push(u);else{var g=i._state?u.onFulfilled:u.onRejected;if(g===null)return(i._state?u.resolve:u.reject)(i._value);++u.psd.ref,++me,We(Zn,[g,i,u])}}function Zn(i,u,g){try{var A,M=u._value;!u._state&&Qn.length&&(Qn=[]),A=$t&&u._consoleTask?u._consoleTask.run(function(){return i(M)}):i(M),u._state||Qn.indexOf(M)!==-1||(z=>{for(var Z=ca.length;Z;)if(ca[--Z]._value===z._value)return ca.splice(Z,1)})(u),g.resolve(A)}catch(z){g.reject(z)}finally{--me==0&&ba(),--g.psd.ref||g.psd.finalize()}}function Da(){Bn(vt,function(){je()&&gn()})}function je(){var i=An;return ya=An=!1,i}function gn(){var i,u,g;do for(;0<Jt.length;)for(i=Jt,Jt=[],g=i.length,u=0;u<g;++u){var A=i[u];A[0].apply(null,A[1])}while(0<Jt.length);ya=An=!0}function ba(){for(var i=ca,u=(ca=[],i.forEach(function(A){A._PSD.onunhandled.call(null,A._value,A)}),Xe.slice(0)),g=u.length;g;)u[--g]()}function ua(i){return new Kt(le,!1,i)}function Te(i,u){var g=it;return function(){var A=je(),M=it;try{return xa(g,!0),i.apply(this,arguments)}catch(z){u&&u(z)}finally{xa(M,!1),A&&gn()}}}x(Kt.prototype,{then:kn,_then:function(i,u){En(this,new On(null,null,i,u,it))},catch:function(i){var u,g;return arguments.length===1?this.then(null,i):(u=i,g=arguments[1],typeof u=="function"?this.then(null,function(A){return(A instanceof u?g:ua)(A)}):this.then(null,function(A){return(A&&A.name===u?g:ua)(A)}))},finally:function(i){return this.then(function(u){return Kt.resolve(i()).then(function(){return u})},function(u){return Kt.resolve(i()).then(function(){return ua(u)})})},timeout:function(i,u){var g=this;return i<1/0?new Kt(function(A,M){var z=setTimeout(function(){return M(new Y.Timeout(u))},i);g.then(A,M).finally(clearTimeout.bind(null,z))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&p(Kt.prototype,Symbol.toStringTag,"Dexie.Promise"),vt.env=is(),x(Kt,{all:function(){var i=R.apply(null,arguments).map(oi);return new Kt(function(u,g){i.length===0&&u([]);var A=i.length;i.forEach(function(M,z){return Kt.resolve(M).then(function(Z){i[z]=Z,--A||u(i)},g)})})},resolve:function(i){return i instanceof Kt?i:i&&typeof i.then=="function"?new Kt(function(u,g){i.then(u,g)}):new Kt(le,!0,i)},reject:ua,race:function(){var i=R.apply(null,arguments).map(oi);return new Kt(function(u,g){i.map(function(A){return Kt.resolve(A).then(u,g)})})},PSD:{get:function(){return it},set:function(i){return it=i}},totalEchoes:{get:function(){return Bi}},newPSD:Ue,usePSD:Bn,scheduler:{get:function(){return We},set:function(i){We=i}},rejectionMapper:{get:function(){return zt},set:function(i){zt=i}},follow:function(i,u){return new Kt(function(g,A){return Ue(function(M,z){var Z=it;Z.unhandleds=[],Z.onunhandled=z,Z.finalize=wt(function(){var tt,ut=this;tt=function(){ut.unhandleds.length===0?M():z(ut.unhandleds[0])},Xe.push(function xt(){tt(),Xe.splice(Xe.indexOf(xt),1)}),++me,We(function(){--me==0&&ba()},[])},Z.finalize),i()},u,g,A)})}}),Be&&(Be.allSettled&&p(Kt,"allSettled",function(){var i=R.apply(null,arguments).map(oi);return new Kt(function(u){i.length===0&&u([]);var g=i.length,A=new Array(g);i.forEach(function(M,z){return Kt.resolve(M).then(function(Z){return A[z]={status:"fulfilled",value:Z}},function(Z){return A[z]={status:"rejected",reason:Z}}).then(function(){return--g||u(A)})})})}),Be.any&&typeof AggregateError<"u"&&p(Kt,"any",function(){var i=R.apply(null,arguments).map(oi);return new Kt(function(u,g){i.length===0&&g(new AggregateError([]));var A=i.length,M=new Array(A);i.forEach(function(z,Z){return Kt.resolve(z).then(function(tt){return u(tt)},function(tt){M[Z]=tt,--A||g(new AggregateError(M))})})})}),Be.withResolvers)&&(Kt.withResolvers=Be.withResolvers);var Ie={awaits:0,echoes:0,id:0},un=0,Nn=[],da=0,Bi=0,va=0;function Ue(i,Z,g,A){var M=it,z=Object.create(M),Z=(z.parent=M,z.ref=0,z.global=!1,z.id=++va,vt.env,z.env=Cn?{Promise:Kt,PromiseProp:{value:Kt,configurable:!0,writable:!0},all:Kt.all,race:Kt.race,allSettled:Kt.allSettled,any:Kt.any,resolve:Kt.resolve,reject:Kt.reject}:{},Z&&q(z,Z),++M.ref,z.finalize=function(){--this.parent.ref||this.parent.finalize()},Bn(z,i,g,A));return z.ref===0&&z.finalize(),Z}function $e(){return Ie.id||(Ie.id=++un),++Ie.awaits,Ie.echoes+=oe,Ie.id}function Mn(){return!!Ie.awaits&&(--Ie.awaits==0&&(Ie.id=0),Ie.echoes=Ie.awaits*oe,!0)}function oi(i){return Ie.echoes&&i&&i.constructor===Be?($e(),i.then(function(u){return Mn(),u},function(u){return Mn(),Ne(u)})):i}function ml(){var i=Nn[Nn.length-1];Nn.pop(),xa(i,!1)}function xa(i,u){var g,A,M=it;(u?!Ie.echoes||da++&&i===it:!da||--da&&i===it)||queueMicrotask(u?(function(z){++Bi,Ie.echoes&&--Ie.echoes!=0||(Ie.echoes=Ie.awaits=Ie.id=0),Nn.push(it),xa(z,!0)}).bind(null,i):ml),i!==it&&(it=i,M===vt&&(vt.env=is()),Cn)&&(g=vt.env.Promise,A=i.env,M.global||i.global)&&(Object.defineProperty(O,"Promise",A.PromiseProp),g.all=A.all,g.race=A.race,g.resolve=A.resolve,g.reject=A.reject,A.allSettled&&(g.allSettled=A.allSettled),A.any)&&(g.any=A.any)}function is(){var i=O.Promise;return Cn?{Promise:i,PromiseProp:Object.getOwnPropertyDescriptor(O,"Promise"),all:i.all,race:i.race,allSettled:i.allSettled,any:i.any,resolve:i.resolve,reject:i.reject}:{}}function Bn(i,u,g,A,M){var z=it;try{return xa(i,!0),u(g,A,M)}finally{xa(z,!1)}}function fr(i,u,g,A){return typeof i!="function"?i:function(){var M=it;g&&$e(),xa(u,!0);try{return i.apply(this,arguments)}finally{xa(M,!1),A&&queueMicrotask(Mn)}}}function _a(i){Promise===Be&&Ie.echoes===0?da===0?i():enqueueNativeMicroTask(i):setTimeout(i,0)}(""+Ha).indexOf("[native code]")===-1&&($e=Mn=st);var Ne=Kt.reject,Un="",Sn="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",tn="String expected.",Oa=[],Ui="__dbnames",ha="readonly",Aa="readwrite";function Na(i,u){return i?u?function(){return i.apply(this,arguments)&&u.apply(this,arguments)}:i:u}var rs={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function Hi(i){return typeof i!="string"||/\./.test(i)?function(u){return u}:function(u){return u[i]===void 0&&i in u&&delete(u=Mt(u))[i],u}}function no(){throw Y.Type("Entity instances must never be new:ed. Instances are generated by the framework bypassing the constructor.")}function pe(i,u){try{var g=Gi(i),A=Gi(u);if(g!==A)return g==="Array"?1:A==="Array"?-1:g==="binary"?1:A==="binary"?-1:g==="string"?1:A==="string"?-1:g==="Date"?1:A!=="Date"?NaN:-1;switch(g){case"number":case"Date":case"string":return u<i?1:i<u?-1:0;case"binary":for(var M=Jn(i),z=Jn(u),Z=M.length,tt=z.length,ut=Z<tt?Z:tt,xt=0;xt<ut;++xt)if(M[xt]!==z[xt])return M[xt]<z[xt]?-1:1;return Z===tt?0:Z<tt?-1:1;case"Array":for(var dt=i,ct=u,pt=dt.length,gt=ct.length,ht=pt<gt?pt:gt,ft=0;ft<ht;++ft){var At=pe(dt[ft],ct[ft]);if(At!==0)return At}return pt===gt?0:pt<gt?-1:1}}catch{}return NaN}function Gi(i){var u=typeof i;return u=="object"&&(ArrayBuffer.isView(i)||(u=Yt(i))==="ArrayBuffer")?"binary":u}function Jn(i){return i instanceof Uint8Array?i:ArrayBuffer.isView(i)?new Uint8Array(i.buffer,i.byteOffset,i.byteLength):new Uint8Array(i)}function yn(i,u,g){var A=i.schema.yProps;return A?(u&&0<g.numFailures&&(u=u.filter(function(M,z){return!g.failures[z]})),Promise.all(A.map(function(M){return M=M.updatesTable,u?i.db.table(M).where("k").anyOf(u).delete():i.db.table(M).clear()})).then(function(){return g})):g}ao.prototype.execute=function(i){var u=this["@@propmod"];if(u.add!==void 0){var g=u.add;if(G(g))return y(y([],G(i)?i:[],!0),g).sort();if(typeof g=="number")return(Number(i)||0)+g;if(typeof g=="bigint")try{return BigInt(i)+g}catch{return BigInt(0)+g}throw new TypeError("Invalid term ".concat(g))}if(u.remove!==void 0){var A=u.remove;if(G(A))return G(i)?i.filter(function(M){return!A.includes(M)}).sort():[];if(typeof A=="number")return Number(i)-A;if(typeof A=="bigint")try{return BigInt(i)-A}catch{return BigInt(0)-A}throw new TypeError("Invalid subtrahend ".concat(A))}return g=(g=u.replacePrefix)==null?void 0:g[0],g&&typeof i=="string"&&i.startsWith(g)?u.replacePrefix[1]+i.substring(g.length):i};var li=ao;function ao(i){this["@@propmod"]=i}function pr(i,u){for(var g=N(u),A=g.length,M=!1,z=0;z<A;++z){var Z=g[z],tt=u[Z],ut=L(i,Z);tt instanceof li?(J(i,Z,tt.execute(ut)),M=!0):ut!==tt&&(J(i,Z,tt),M=!0)}return M}Re.prototype._trans=function(i,u,g){var A=this._tx||it.trans,M=this.name,z=$t&&typeof console<"u"&&console.createTask&&console.createTask("Dexie: ".concat(i==="readonly"?"read":"write"," ").concat(this.name));function Z(xt,dt,ct){if(ct.schema[M])return u(ct.idbtrans,ct);throw new Y.NotFound("Table "+M+" not part of transaction")}var tt=je();try{var ut=A&&A.db._novip===this.db._novip?A===it.trans?A._promise(i,Z,g):Ue(function(){return A._promise(i,Z,g)},{trans:A,transless:it.transless||it}):(function xt(dt,ct,pt,gt){if(dt.idbdb&&(dt._state.openComplete||it.letThrough||dt._vip)){var ht=dt._createTransaction(ct,pt,dt._dbSchema);try{ht.create(),dt._state.PR1398_maxLoop=3}catch(ft){return ft.name===I.InvalidState&&dt.isOpen()&&0<--dt._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),dt.close({disableAutoOpen:!1}),dt.open().then(function(){return xt(dt,ct,pt,gt)})):Ne(ft)}return ht._promise(ct,function(ft,At){return Ue(function(){return it.trans=ht,gt(ft,At,ht)})}).then(function(ft){if(ct==="readwrite")try{ht.idbtrans.commit()}catch{}return ct==="readonly"?ft:ht._completion.then(function(){return ft})})}if(dt._state.openComplete)return Ne(new Y.DatabaseClosed(dt._state.dbOpenError));if(!dt._state.isBeingOpened){if(!dt._state.autoOpen)return Ne(new Y.DatabaseClosed);dt.open().catch(st)}return dt._state.dbReadyPromise.then(function(){return xt(dt,ct,pt,gt)})})(this.db,i,[this.name],Z);return z&&(ut._consoleTask=z,ut=ut.catch(function(xt){return console.trace(xt),Ne(xt)})),ut}finally{tt&&gn()}},Re.prototype.get=function(i,u){var g=this;return i&&i.constructor===Object?this.where(i).first(u):i==null?Ne(new Y.Type("Invalid argument to Table.get()")):this._trans("readonly",function(A){return g.core.get({trans:A,key:i}).then(function(M){return g.hook.reading.fire(M)})}).then(u)},Re.prototype.where=function(i){if(typeof i=="string")return new this.db.WhereClause(this,i);if(G(i))return new this.db.WhereClause(this,"[".concat(i.join("+"),"]"));var u=N(i);if(u.length===1)return this.where(u[0]).equals(i[u[0]]);var g=this.schema.indexes.concat(this.schema.primKey).filter(function(tt){if(tt.compound&&u.every(function(xt){return 0<=tt.keyPath.indexOf(xt)})){for(var ut=0;ut<u.length;++ut)if(u.indexOf(tt.keyPath[ut])===-1)return!1;return!0}return!1}).sort(function(tt,ut){return tt.keyPath.length-ut.keyPath.length})[0];if(g&&this.db._maxKey!==Un)return Z=g.keyPath.slice(0,u.length),this.where(Z).equals(Z.map(function(tt){return i[tt]}));!g&&$t&&console.warn("The query ".concat(JSON.stringify(i)," on ").concat(this.name," would benefit from a ")+"compound index [".concat(u.join("+"),"]"));var A=this.schema.idxByName;function M(tt,ut){return pe(tt,ut)===0}var Z=u.reduce(function(dt,ut){var xt=dt[0],dt=dt[1],ct=A[ut],pt=i[ut];return[xt||ct,xt||!ct?Na(dt,ct&&ct.multi?function(gt){return gt=L(gt,ut),G(gt)&&gt.some(function(ht){return M(pt,ht)})}:function(gt){return M(pt,L(gt,ut))}):dt]},[null,null]),z=Z[0],Z=Z[1];return z?this.where(z.name).equals(i[z.keyPath]).filter(Z):g?this.filter(Z):this.where(u).equals("")},Re.prototype.filter=function(i){return this.toCollection().and(i)},Re.prototype.count=function(i){return this.toCollection().count(i)},Re.prototype.offset=function(i){return this.toCollection().offset(i)},Re.prototype.limit=function(i){return this.toCollection().limit(i)},Re.prototype.each=function(i){return this.toCollection().each(i)},Re.prototype.toArray=function(i){return this.toCollection().toArray(i)},Re.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},Re.prototype.orderBy=function(i){return new this.db.Collection(new this.db.WhereClause(this,G(i)?"[".concat(i.join("+"),"]"):i))},Re.prototype.reverse=function(){return this.toCollection().reverse()},Re.prototype.mapToClass=function(i){for(var u=this.db,g=this.name,A=((this.schema.mappedClass=i).prototype instanceof no&&(i=(Z=>{var tt=dt,ut=Z;if(typeof ut!="function"&&ut!==null)throw new TypeError("Class extends value "+String(ut)+" is not a constructor or null");function xt(){this.constructor=tt}function dt(){return Z!==null&&Z.apply(this,arguments)||this}return m(tt,ut),tt.prototype=ut===null?Object.create(ut):(xt.prototype=ut.prototype,new xt),Object.defineProperty(dt.prototype,"db",{get:function(){return u},enumerable:!1,configurable:!0}),dt.prototype.table=function(){return g},dt})(i)),new Set),M=i.prototype;M;M=d(M))Object.getOwnPropertyNames(M).forEach(function(Z){return A.add(Z)});function z(Z){if(!Z)return Z;var tt,ut=Object.create(i.prototype);for(tt in Z)if(!A.has(tt))try{ut[tt]=Z[tt]}catch{}return ut}return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=z,this.hook("reading",z),i},Re.prototype.defineClass=function(){return this.mapToClass(function(i){q(this,i)})},Re.prototype.add=function(i,u){var g=this,A=this.schema.primKey,M=A.auto,z=A.keyPath,Z=i;return z&&M&&(Z=Hi(z)(i)),this._trans("readwrite",function(tt){return g.core.mutate({trans:tt,type:"add",keys:u!=null?[u]:null,values:[Z]})}).then(function(tt){return tt.numFailures?Kt.reject(tt.failures[0]):tt.lastResult}).then(function(tt){if(z)try{J(i,z,tt)}catch{}return tt})},Re.prototype.upsert=function(i,u){var g=this,A=this.schema.primKey.keyPath;return this._trans("readwrite",function(M){return g.core.get({trans:M,key:i}).then(function(z){var Z=z??{};return pr(Z,u),A&&J(Z,A,i),g.core.mutate({trans:M,type:"put",values:[Z],keys:[i],upsert:!0,updates:{keys:[i],changeSpecs:[u]}}).then(function(tt){return tt.numFailures?Kt.reject(tt.failures[0]):!!z})})})},Re.prototype.update=function(i,u){return typeof i!="object"||G(i)?this.where(":id").equals(i).modify(u):(i=L(i,this.schema.primKey.keyPath))===void 0?Ne(new Y.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(i).modify(u)},Re.prototype.put=function(i,u){var g=this,A=this.schema.primKey,M=A.auto,z=A.keyPath,Z=i;return z&&M&&(Z=Hi(z)(i)),this._trans("readwrite",function(tt){return g.core.mutate({trans:tt,type:"put",values:[Z],keys:u!=null?[u]:null})}).then(function(tt){return tt.numFailures?Kt.reject(tt.failures[0]):tt.lastResult}).then(function(tt){if(z)try{J(i,z,tt)}catch{}return tt})},Re.prototype.delete=function(i){var u=this;return this._trans("readwrite",function(g){return u.core.mutate({trans:g,type:"delete",keys:[i]}).then(function(A){return yn(u,[i],A)}).then(function(A){return A.numFailures?Kt.reject(A.failures[0]):void 0})})},Re.prototype.clear=function(){var i=this;return this._trans("readwrite",function(u){return i.core.mutate({trans:u,type:"deleteRange",range:rs}).then(function(g){return yn(i,null,g)})}).then(function(u){return u.numFailures?Kt.reject(u.failures[0]):void 0})},Re.prototype.bulkGet=function(i){var u=this;return this._trans("readonly",function(g){return u.core.getMany({keys:i,trans:g}).then(function(A){return A.map(function(M){return u.hook.reading.fire(M)})})})},Re.prototype.bulkAdd=function(i,u,g){var A=this,M=Array.isArray(u)?u:void 0,z=(g=g||(M?void 0:u))?g.allKeys:void 0;return this._trans("readwrite",function(Z){var tt=A.schema.primKey,xt=tt.auto,tt=tt.keyPath;if(tt&&M)throw new Y.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(M&&M.length!==i.length)throw new Y.InvalidArgument("Arguments objects and keys must have the same length");var ut=i.length,xt=tt&&xt?i.map(Hi(tt)):i;return A.core.mutate({trans:Z,type:"add",keys:M,values:xt,wantResults:z}).then(function(dt){var ct=dt.numFailures,pt=dt.failures;if(ct===0)return z?dt.results:dt.lastResult;throw new j("".concat(A.name,".bulkAdd(): ").concat(ct," of ").concat(ut," operations failed"),pt)})})},Re.prototype.bulkPut=function(i,u,g){var A=this,M=Array.isArray(u)?u:void 0,z=(g=g||(M?void 0:u))?g.allKeys:void 0;return this._trans("readwrite",function(Z){var tt=A.schema.primKey,xt=tt.auto,tt=tt.keyPath;if(tt&&M)throw new Y.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(M&&M.length!==i.length)throw new Y.InvalidArgument("Arguments objects and keys must have the same length");var ut=i.length,xt=tt&&xt?i.map(Hi(tt)):i;return A.core.mutate({trans:Z,type:"put",keys:M,values:xt,wantResults:z}).then(function(dt){var ct=dt.numFailures,pt=dt.failures;if(ct===0)return z?dt.results:dt.lastResult;throw new j("".concat(A.name,".bulkPut(): ").concat(ct," of ").concat(ut," operations failed"),pt)})})},Re.prototype.bulkUpdate=function(i){var u=this,g=this.core,A=i.map(function(Z){return Z.key}),M=i.map(function(Z){return Z.changes}),z=[];return this._trans("readwrite",function(Z){return g.getMany({trans:Z,keys:A,cache:"clone"}).then(function(tt){var ut=[],xt=[],dt=(i.forEach(function(ct,pt){var gt=ct.key,ht=ct.changes,ft=tt[pt];if(ft){for(var At=0,Tt=Object.keys(ht);At<Tt.length;At++){var _t=Tt[At],Ot=ht[_t];if(_t===u.schema.primKey.keyPath){if(pe(Ot,gt)!==0)throw new Y.Constraint("Cannot update primary key in bulkUpdate()")}else J(ft,_t,Ot)}z.push(pt),ut.push(gt),xt.push(ft)}}),ut.length);return g.mutate({trans:Z,type:"put",keys:ut,values:xt,updates:{keys:A,changeSpecs:M}}).then(function(ct){var pt=ct.numFailures,gt=ct.failures;if(pt===0)return dt;for(var ht=0,ft=Object.keys(gt);ht<ft.length;ht++){var At,Tt=ft[ht],_t=z[Number(Tt)];_t!=null&&(At=gt[Tt],delete gt[Tt],gt[_t]=At)}throw new j("".concat(u.name,".bulkUpdate(): ").concat(pt," of ").concat(dt," operations failed"),gt)})})})},Re.prototype.bulkDelete=function(i){var u=this,g=i.length;return this._trans("readwrite",function(A){return u.core.mutate({trans:A,type:"delete",keys:i}).then(function(M){return yn(u,i,M)})}).then(function(A){var M=A.numFailures,z=A.failures;if(M===0)return A.lastResult;throw new j("".concat(u.name,".bulkDelete(): ").concat(M," of ").concat(g," operations failed"),z)})};var ss=Re;function Re(){}function Yi(i){function u(Z,tt){if(tt){for(var ut=arguments.length,xt=new Array(ut-1);--ut;)xt[ut-1]=arguments[ut];return g[Z].subscribe.apply(null,xt),i}if(typeof Z=="string")return g[Z]}var g={};u.addEventType=z;for(var A=1,M=arguments.length;A<M;++A)z(arguments[A]);return u;function z(Z,tt,ut){var xt,dt;if(typeof Z!="object")return tt=tt||Bt,dt={subscribers:[],fire:ut=ut||st,subscribe:function(ct){dt.subscribers.indexOf(ct)===-1&&(dt.subscribers.push(ct),dt.fire=tt(dt.fire,ct))},unsubscribe:function(ct){dt.subscribers=dt.subscribers.filter(function(pt){return pt!==ct}),dt.fire=dt.subscribers.reduce(tt,ut)}},g[Z]=u[Z]=dt;N(xt=Z).forEach(function(ct){var pt=xt[ct];if(G(pt))z(ct,xt[ct][0],xt[ct][1]);else{if(pt!=="asap")throw new Y.InvalidArgument("Invalid event config");var gt=z(ct,Rt,function(){for(var ht=arguments.length,ft=new Array(ht);ht--;)ft[ht]=arguments[ht];gt.subscribers.forEach(function(At){k(function(){At.apply(null,ft)})})})}})}}function hn(i,u){return S(u).from({prototype:i}),u}function Ea(i,u){return!(i.filter||i.algorithm||i.or)&&(u?i.justLimit:!i.replayFilter)}function mr(i,u){i.filter=Na(i.filter,u)}function Ki(i,u,g){var A=i.replayFilter;i.replayFilter=A?function(){return Na(A(),u())}:u,i.justLimit=g&&!A}function fa(i,u){if(i.isPrimKey)return u.primaryKey;var g=u.getIndexByKeyPath(i.index);if(g)return g;throw new Y.Schema("KeyPath "+i.index+" on object store "+u.name+" is not indexed")}function os(i,u,g){var A=fa(i,u.schema);return u.openCursor({trans:g,values:!i.keysOnly,reverse:i.dir==="prev",unique:!!i.unique,query:{index:A,range:i.range}})}function Xi(i,u,g,A){var M,z,Z=i.replayFilter?Na(i.filter,i.replayFilter()):i.filter;return i.or?(M={},z=function(tt,ut,xt){var dt,ct;Z&&!Z(ut,xt,function(pt){return ut.stop(pt)},function(pt){return ut.fail(pt)})||((ct=""+(dt=ut.primaryKey))=="[object ArrayBuffer]"&&(ct=""+new Uint8Array(dt)),h(M,ct))||(M[ct]=!0,u(tt,ut,xt))},Promise.all([i.or._iterate(z,g),Pa(os(i,A,g),i.algorithm,z,!i.keysOnly&&i.valueMapper)])):Pa(os(i,A,g),Na(i.algorithm,Z),u,!i.keysOnly&&i.valueMapper)}function Pa(i,u,g,A){var M=Te(A?function(z,Z,tt){return g(A(z),Z,tt)}:g);return i.then(function(z){if(z)return z.start(function(){var Z=function(){return z.continue()};u&&!u(z,function(tt){return Z=tt},function(tt){z.stop(tt),Z=st},function(tt){z.fail(tt),Z=st})||M(z.value,z,function(tt){return Z=tt}),Z()})})}Ae.prototype._read=function(i,u){var g=this._ctx;return g.error?g.table._trans(null,Ne.bind(null,g.error)):g.table._trans("readonly",i).then(u)},Ae.prototype._write=function(i){var u=this._ctx;return u.error?u.table._trans(null,Ne.bind(null,u.error)):u.table._trans("readwrite",i,"locked")},Ae.prototype._addAlgorithm=function(i){var u=this._ctx;u.algorithm=Na(u.algorithm,i)},Ae.prototype._iterate=function(i,u){return Xi(this._ctx,i,u,this._ctx.table.core)},Ae.prototype.clone=function(i){var u=Object.create(this.constructor.prototype),g=Object.create(this._ctx);return i&&q(g,i),u._ctx=g,u},Ae.prototype.raw=function(){return this._ctx.valueMapper=null,this},Ae.prototype.each=function(i){var u=this._ctx;return this._read(function(g){return Xi(u,i,g,u.table.core)})},Ae.prototype.count=function(i){var u=this;return this._read(function(g){var A,M=u._ctx,z=M.table.core;return Ea(M,!0)?z.count({trans:g,query:{index:fa(M,z.schema),range:M.range}}).then(function(Z){return Math.min(Z,M.limit)}):(A=0,Xi(M,function(){return++A,!1},g,z).then(function(){return A}))}).then(i)},Ae.prototype.sortBy=function(i,u){var g=i.split(".").reverse(),A=g[0],M=g.length-1;function z(ut,xt){return xt?z(ut[g[xt]],xt-1):ut[A]}var Z=this._ctx.dir==="next"?1:-1;function tt(ut,xt){return pe(z(ut,M),z(xt,M))*Z}return this.toArray(function(ut){return ut.sort(tt)}).then(u)},Ae.prototype.toArray=function(i){var u=this;return this._read(function(g){var A,M,z,Z=u._ctx;return Z.dir==="next"&&Ea(Z,!0)&&0<Z.limit?(A=Z.valueMapper,M=fa(Z,Z.table.core.schema),Z.table.core.query({trans:g,limit:Z.limit,values:!0,query:{index:M,range:Z.range}}).then(function(tt){return tt=tt.result,A?tt.map(A):tt})):(z=[],Xi(Z,function(tt){return z.push(tt)},g,Z.table.core).then(function(){return z}))},i)},Ae.prototype.offset=function(i){var u=this._ctx;return i<=0||(u.offset+=i,Ea(u)?Ki(u,function(){var g=i;return function(A,M){return g===0||(g===1?--g:M(function(){A.advance(g),g=0}),!1)}}):Ki(u,function(){var g=i;return function(){return--g<0}})),this},Ae.prototype.limit=function(i){return this._ctx.limit=Math.min(this._ctx.limit,i),Ki(this._ctx,function(){var u=i;return function(g,A,M){return--u<=0&&A(M),0<=u}},!0),this},Ae.prototype.until=function(i,u){return mr(this._ctx,function(g,A,M){return!i(g.value)||(A(M),u)}),this},Ae.prototype.first=function(i){return this.limit(1).toArray(function(u){return u[0]}).then(i)},Ae.prototype.last=function(i){return this.reverse().first(i)},Ae.prototype.filter=function(i){var u;return mr(this._ctx,function(g){return i(g.value)}),(u=this._ctx).isMatch=Na(u.isMatch,i),this},Ae.prototype.and=function(i){return this.filter(i)},Ae.prototype.or=function(i){return new this.db.WhereClause(this._ctx.table,i,this)},Ae.prototype.reverse=function(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},Ae.prototype.desc=function(){return this.reverse()},Ae.prototype.eachKey=function(i){var u=this._ctx;return u.keysOnly=!u.isMatch,this.each(function(g,A){i(A.key,A)})},Ae.prototype.eachUniqueKey=function(i){return this._ctx.unique="unique",this.eachKey(i)},Ae.prototype.eachPrimaryKey=function(i){var u=this._ctx;return u.keysOnly=!u.isMatch,this.each(function(g,A){i(A.primaryKey,A)})},Ae.prototype.keys=function(i){var u=this._ctx,g=(u.keysOnly=!u.isMatch,[]);return this.each(function(A,M){g.push(M.key)}).then(function(){return g}).then(i)},Ae.prototype.primaryKeys=function(i){var u=this._ctx;if(u.dir==="next"&&Ea(u,!0)&&0<u.limit)return this._read(function(A){var M=fa(u,u.table.core.schema);return u.table.core.query({trans:A,values:!1,limit:u.limit,query:{index:M,range:u.range}})}).then(function(A){return A.result}).then(i);u.keysOnly=!u.isMatch;var g=[];return this.each(function(A,M){g.push(M.primaryKey)}).then(function(){return g}).then(i)},Ae.prototype.uniqueKeys=function(i){return this._ctx.unique="unique",this.keys(i)},Ae.prototype.firstKey=function(i){return this.limit(1).keys(function(u){return u[0]}).then(i)},Ae.prototype.lastKey=function(i){return this.reverse().firstKey(i)},Ae.prototype.distinct=function(){var i,u=this._ctx,u=u.index&&u.table.schema.idxByName[u.index];return u&&u.multi&&(i={},mr(this._ctx,function(A){var A=A.primaryKey.toString(),M=h(i,A);return i[A]=!0,!M})),this},Ae.prototype.modify=function(i){var u=this,g=this._ctx;return this._write(function(A){function M(ft,At){var Tt=At.failures;pt+=ft-At.numFailures;for(var _t=0,Ot=N(Tt);_t<Ot.length;_t++){var Ut=Ot[_t];ct.push(Tt[Ut])}}var z=typeof i=="function"?i:function(ft){return pr(ft,i)},Z=g.table.core,dt=Z.schema.primaryKey,tt=dt.outbound,ut=dt.extractKey,xt=200,dt=u.db._options.modifyChunkSize,ct=(dt&&(xt=typeof dt=="object"?dt[Z.name]||dt["*"]||200:dt),[]),pt=0,gt=[],ht=i===ls;return u.clone().primaryKeys().then(function(ft){function At(_t){var Ot=Math.min(xt,ft.length-_t),Ut=ft.slice(_t,_t+Ot);return(ht?Promise.resolve([]):Z.getMany({trans:A,keys:Ut,cache:"immutable"})).then(function(Vt){var Wt=[],Ht=[],te=tt?[]:null,Zt=ht?Ut:[];if(!ht)for(var Gt=0;Gt<Ot;++Gt){var ee=Vt[Gt],ue={value:Mt(ee),primKey:ft[_t+Gt]};z.call(ue,ue.value,ue)!==!1&&(ue.value==null?Zt.push(ft[_t+Gt]):tt||pe(ut(ee),ut(ue.value))===0?(Ht.push(ue.value),tt&&te.push(ft[_t+Gt])):(Zt.push(ft[_t+Gt]),Wt.push(ue.value)))}return Promise.resolve(0<Wt.length&&Z.mutate({trans:A,type:"add",values:Wt}).then(function(ge){for(var re in ge.failures)Zt.splice(parseInt(re),1);M(Wt.length,ge)})).then(function(){return(0<Ht.length||Tt&&typeof i=="object")&&Z.mutate({trans:A,type:"put",keys:te,values:Ht,criteria:Tt,changeSpec:typeof i!="function"&&i,isAdditionalChunk:0<_t}).then(function(ge){return M(Ht.length,ge)})}).then(function(){return(0<Zt.length||Tt&&ht)&&Z.mutate({trans:A,type:"delete",keys:Zt,criteria:Tt,isAdditionalChunk:0<_t}).then(function(ge){return yn(g.table,Zt,ge)}).then(function(ge){return M(Zt.length,ge)})}).then(function(){return ft.length>_t+Ot&&At(_t+xt)})})}var Tt=Ea(g)&&g.limit===1/0&&(typeof i!="function"||ht)&&{index:g.index,range:g.range};return At(0).then(function(){if(0<ct.length)throw new b("Error modifying one or more objects",ct,pt,gt);return ft.length})})})},Ae.prototype.delete=function(){var i=this._ctx,u=i.range;return!Ea(i)||i.table.schema.yProps||!i.isPrimKey&&u.type!==3?this.modify(ls):this._write(function(g){var A=i.table.core.schema.primaryKey,M=u;return i.table.core.count({trans:g,query:{index:A,range:M}}).then(function(z){return i.table.core.mutate({trans:g,type:"deleteRange",range:M}).then(function(ut){var tt=ut.failures,ut=ut.numFailures;if(ut)throw new b("Could not delete some values",Object.keys(tt).map(function(xt){return tt[xt]}),z-ut);return z-ut})})})};var gl=Ae;function Ae(){}var ls=function(i,u){return u.value=null};function cs(i,u){return i<u?-1:i===u?0:1}function yl(i,u){return u<i?-1:i===u?0:1}function jn(i,u,g){return i=i instanceof La?new i.Collection(i):i,i._ctx.error=new(g||TypeError)(u),i}function pa(i){return new i.Collection(i,function(){return gr("")}).limit(0)}function Pn(gt,u,g,A){var M,z,Z,tt,ut,xt,dt,ct=g.length;if(!g.every(function(ft){return typeof ft=="string"}))return jn(gt,tn);function pt(ft){M=ft==="next"?function(Tt){return Tt.toUpperCase()}:function(Tt){return Tt.toLowerCase()},z=ft==="next"?function(Tt){return Tt.toLowerCase()}:function(Tt){return Tt.toUpperCase()},Z=ft==="next"?cs:yl;var At=g.map(function(Tt){return{lower:z(Tt),upper:M(Tt)}}).sort(function(Tt,_t){return Z(Tt.lower,_t.lower)});tt=At.map(function(Tt){return Tt.upper}),ut=At.map(function(Tt){return Tt.lower}),dt=(xt=ft)==="next"?"":A}pt("next");var gt=new gt.Collection(gt,function(){return $n(tt[0],ut[ct-1]+A)}),ht=(gt._ondirectionchange=function(ft){pt(ft)},0);return gt._addAlgorithm(function(ft,At,Tt){var _t=ft.key;if(typeof _t=="string"){var Ot=z(_t);if(u(Ot,ut,ht))return!0;for(var Ut=null,Vt=ht;Vt<ct;++Vt){var Wt=((Ht,te,Zt,Gt,ee,ue)=>{for(var ge=Math.min(Ht.length,Gt.length),re=-1,de=0;de<ge;++de){var Pe=te[de];if(Pe!==Gt[de])return ee(Ht[de],Zt[de])<0?Ht.substr(0,de)+Zt[de]+Zt.substr(de+1):ee(Ht[de],Gt[de])<0?Ht.substr(0,de)+Gt[de]+Zt.substr(de+1):0<=re?Ht.substr(0,re)+te[re]+Zt.substr(re+1):null;ee(Ht[de],Pe)<0&&(re=de)}return ge<Gt.length&&ue==="next"?Ht+Zt.substr(Ht.length):ge<Ht.length&&ue==="prev"?Ht.substr(0,Zt.length):re<0?null:Ht.substr(0,re)+Gt[re]+Zt.substr(re+1)})(_t,Ot,tt[Vt],ut[Vt],Z,xt);Wt===null&&Ut===null?ht=Vt+1:(Ut===null||0<Z(Ut,Wt))&&(Ut=Wt)}At(Ut!==null?function(){ft.continue(Ut+dt)}:Tt)}return!1}),gt}function $n(i,u,g,A){return{type:2,lower:i,upper:u,lowerOpen:g,upperOpen:A}}function gr(i){return{type:1,lower:i,upper:i}}Object.defineProperty(He.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),He.prototype.between=function(i,u,g,A){g=g!==!1,A=A===!0;try{return 0<this._cmp(i,u)||this._cmp(i,u)===0&&(g||A)&&(!g||!A)?pa(this):new this.Collection(this,function(){return $n(i,u,!g,!A)})}catch{return jn(this,Sn)}},He.prototype.equals=function(i){return i==null?jn(this,Sn):new this.Collection(this,function(){return gr(i)})},He.prototype.above=function(i){return i==null?jn(this,Sn):new this.Collection(this,function(){return $n(i,void 0,!0)})},He.prototype.aboveOrEqual=function(i){return i==null?jn(this,Sn):new this.Collection(this,function(){return $n(i,void 0,!1)})},He.prototype.below=function(i){return i==null?jn(this,Sn):new this.Collection(this,function(){return $n(void 0,i,!1,!0)})},He.prototype.belowOrEqual=function(i){return i==null?jn(this,Sn):new this.Collection(this,function(){return $n(void 0,i)})},He.prototype.startsWith=function(i){return typeof i!="string"?jn(this,tn):this.between(i,i+Un,!0,!0)},He.prototype.startsWithIgnoreCase=function(i){return i===""?this.startsWith(i):Pn(this,function(u,g){return u.indexOf(g[0])===0},[i],Un)},He.prototype.equalsIgnoreCase=function(i){return Pn(this,function(u,g){return u===g[0]},[i],"")},He.prototype.anyOfIgnoreCase=function(){var i=R.apply(T,arguments);return i.length===0?pa(this):Pn(this,function(u,g){return g.indexOf(u)!==-1},i,"")},He.prototype.startsWithAnyOfIgnoreCase=function(){var i=R.apply(T,arguments);return i.length===0?pa(this):Pn(this,function(u,g){return g.some(function(A){return u.indexOf(A)===0})},i,Un)},He.prototype.anyOf=function(){var i,u,g=this,A=R.apply(T,arguments),M=this._cmp;try{A.sort(M)}catch{return jn(this,Sn)}return A.length===0?pa(this):((i=new this.Collection(this,function(){return $n(A[0],A[A.length-1])}))._ondirectionchange=function(z){M=z==="next"?g._ascending:g._descending,A.sort(M)},u=0,i._addAlgorithm(function(z,Z,tt){for(var ut=z.key;0<M(ut,A[u]);)if(++u===A.length)return Z(tt),!1;return M(ut,A[u])===0||(Z(function(){z.continue(A[u])}),!1)}),i)},He.prototype.notEqual=function(i){return this.inAnyRange([[-1/0,i],[i,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},He.prototype.noneOf=function(){var i=R.apply(T,arguments);if(i.length===0)return new this.Collection(this);try{i.sort(this._ascending)}catch{return jn(this,Sn)}var u=i.reduce(function(g,A){return g?g.concat([[g[g.length-1][1],A]]):[[-1/0,A]]},null);return u.push([i[i.length-1],this.db._maxKey]),this.inAnyRange(u,{includeLowers:!1,includeUppers:!1})},He.prototype.inAnyRange=function(i,Tt){var g=this,A=this._cmp,M=this._ascending,z=this._descending,Z=this._min,tt=this._max;if(i.length===0)return pa(this);if(!i.every(function(_t){return _t[0]!==void 0&&_t[1]!==void 0&&M(_t[0],_t[1])<=0}))return jn(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",Y.InvalidArgument);var ut=!Tt||Tt.includeLowers!==!1,xt=Tt&&Tt.includeUppers===!0,dt,ct=M;function pt(_t,Ot){return ct(_t[0],Ot[0])}try{(dt=i.reduce(function(_t,Ot){for(var Ut=0,Vt=_t.length;Ut<Vt;++Ut){var Wt=_t[Ut];if(A(Ot[0],Wt[1])<0&&0<A(Ot[1],Wt[0])){Wt[0]=Z(Wt[0],Ot[0]),Wt[1]=tt(Wt[1],Ot[1]);break}}return Ut===Vt&&_t.push(Ot),_t},[])).sort(pt)}catch{return jn(this,Sn)}var gt=0,ht=xt?function(_t){return 0<M(_t,dt[gt][1])}:function(_t){return 0<=M(_t,dt[gt][1])},ft=ut?function(_t){return 0<z(_t,dt[gt][0])}:function(_t){return 0<=z(_t,dt[gt][0])},At=ht,Tt=new this.Collection(this,function(){return $n(dt[0][0],dt[dt.length-1][1],!ut,!xt)});return Tt._ondirectionchange=function(_t){ct=_t==="next"?(At=ht,M):(At=ft,z),dt.sort(pt)},Tt._addAlgorithm(function(_t,Ot,Ut){for(var Vt,Wt=_t.key;At(Wt);)if(++gt===dt.length)return Ot(Ut),!1;return!ht(Vt=Wt)&&!ft(Vt)||(g._cmp(Wt,dt[gt][1])===0||g._cmp(Wt,dt[gt][0])===0||Ot(function(){ct===M?_t.continue(dt[gt][0]):_t.continue(dt[gt][1])}),!1)}),Tt},He.prototype.startsWithAnyOf=function(){var i=R.apply(T,arguments);return i.every(function(u){return typeof u=="string"})?i.length===0?pa(this):this.inAnyRange(i.map(function(u){return[u,u+Un]})):jn(this,"startsWithAnyOf() only works with strings")};var La=He;function He(){}function Hn(i){return Te(function(u){return Fa(u),i(u.target.error),!1})}function Fa(i){i.stopPropagation&&i.stopPropagation(),i.preventDefault&&i.preventDefault()}var ci="storagemutated",za="x-storagemutated-1",fn=Yi(null,ci),us=(wn.prototype._lock=function(){return H(!it.global),++this._reculock,this._reculock!==1||it.global||(it.lockOwnerFor=this),this},wn.prototype._unlock=function(){if(H(!it.global),--this._reculock==0)for(it.global||(it.lockOwnerFor=null);0<this._blockedFuncs.length&&!this._locked();){var i=this._blockedFuncs.shift();try{Bn(i[1],i[0])}catch{}}return this},wn.prototype._locked=function(){return this._reculock&&it.lockOwnerFor!==this},wn.prototype.create=function(i){var u=this;if(this.mode){var g=this.db.idbdb,A=this.db._state.dbOpenError;if(H(!this.idbtrans),!i&&!g)switch(A&&A.name){case"DatabaseClosedError":throw new Y.DatabaseClosed(A);case"MissingAPIError":throw new Y.MissingAPI(A.message,A);default:throw new Y.OpenFailed(A)}if(!this.active)throw new Y.TransactionInactive;H(this._completion._state===null),(i=this.idbtrans=i||(this.db.core||g).transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})).onerror=Te(function(M){Fa(M),u._reject(i.error)}),i.onabort=Te(function(M){Fa(M),u.active&&u._reject(new Y.Abort(i.error)),u.active=!1,u.on("abort").fire(M)}),i.oncomplete=Te(function(){u.active=!1,u._resolve(),"mutatedParts"in i&&fn.storagemutated.fire(i.mutatedParts)})}return this},wn.prototype._promise=function(i,u,g){var A,M=this;return i==="readwrite"&&this.mode!=="readwrite"?Ne(new Y.ReadOnly("Transaction is readonly")):this.active?this._locked()?new Kt(function(z,Z){M._blockedFuncs.push([function(){M._promise(i,u,g).then(z,Z)},it])}):g?Ue(function(){var z=new Kt(function(Z,tt){M._lock();var ut=u(Z,tt,M);ut&&ut.then&&ut.then(Z,tt)});return z.finally(function(){return M._unlock()}),z._lib=!0,z}):((A=new Kt(function(z,Z){var tt=u(z,Z,M);tt&&tt.then&&tt.then(z,Z)}))._lib=!0,A):Ne(new Y.TransactionInactive)},wn.prototype._root=function(){return this.parent?this.parent._root():this},wn.prototype.waitFor=function(i){var u,g=this._root(),A=Kt.resolve(i),M=(g._waitingFor?g._waitingFor=g._waitingFor.then(function(){return A}):(g._waitingFor=A,g._waitingQueue=[],u=g.idbtrans.objectStore(g.storeNames[0]),(function z(){for(++g._spinCount;g._waitingQueue.length;)g._waitingQueue.shift()();g._waitingFor&&(u.get(-1/0).onsuccess=z)})()),g._waitingFor);return new Kt(function(z,Z){A.then(function(tt){return g._waitingQueue.push(Te(z.bind(null,tt)))},function(tt){return g._waitingQueue.push(Te(Z.bind(null,tt)))}).finally(function(){g._waitingFor===M&&(g._waitingFor=null)})})},wn.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new Y.Abort))},wn.prototype.table=function(i){var u=this._memoizedTables||(this._memoizedTables={});if(h(u,i))return u[i];var g=this.schema[i];if(g)return(g=new this.db.Table(i,g,this)).core=this.db.core.table(i),u[i]=g;throw new Y.NotFound("Table "+i+" not part of transaction")},wn);function wn(){}function ta(i,u,g,A,M,z,Z,tt){return{name:i,keyPath:u,unique:g,multi:A,auto:M,compound:z,src:(g&&!Z?"&":"")+(A?"*":"")+(M?"++":"")+yr(u),type:tt}}function yr(i){return typeof i=="string"?i:i?"["+[].join.call(i,"+")+"]":""}function ui(i,u,g){return{name:i,primKey:u,indexes:g,mappedClass:null,idxByName:(A=function(M){return[M.name,M]},g.reduce(function(M,z,Z){return z=A(z,Z),z&&(M[z[0]]=z[1]),M},{}))};var A}var di=function(i){try{return i.only([[]]),di=function(){return[[]]},[[]]}catch{return di=function(){return Un},Un}};function hi(i){return i==null?function(){}:typeof i=="string"?(u=i).split(".").length===1?function(g){return g[u]}:function(g){return L(g,u)}:function(g){return L(g,i)};var u}function Vi(i){return[].slice.call(i)}var io=0;function an(i){return i==null?":id":typeof i=="string"?i:"[".concat(i.join("+"),"]")}function Ia(i,u,ut){function A(ht){if(ht.type===3)return null;if(ht.type===4)throw new Error("Cannot convert never type to IDBKeyRange");var ct=ht.lower,pt=ht.upper,gt=ht.lowerOpen,ht=ht.upperOpen;return ct===void 0?pt===void 0?null:u.upperBound(pt,!!ht):pt===void 0?u.lowerBound(ct,!!gt):u.bound(ct,pt,!!gt,!!ht)}function M(dt){var ct,pt=dt.name;return{name:pt,schema:dt,mutate:function(gt){var ht=gt.trans,ft=gt.type,At=gt.keys,Tt=gt.values,_t=gt.range;return new Promise(function(Ot,Ut){Ot=Te(Ot);var Vt=ht.objectStore(pt),Wt=Vt.keyPath==null,Ht=ft==="put"||ft==="add";if(!Ht&&ft!=="delete"&&ft!=="deleteRange")throw new Error("Invalid operation type: "+ft);var te,Zt=(At||Tt||{length:1}).length;if(At&&Tt&&At.length!==Tt.length)throw new Error("Given keys array must have same length as given values array.");if(Zt===0)return Ot({numFailures:0,failures:{},results:[],lastResult:void 0});function Gt(Me){++ge,Fa(Me)}var ee=[],ue=[],ge=0;if(ft==="deleteRange"){if(_t.type===4)return Ot({numFailures:ge,failures:ue,results:[],lastResult:void 0});_t.type===3?ee.push(te=Vt.clear()):ee.push(te=Vt.delete(A(_t)))}else{var Wt=Ht?Wt?[Tt,At]:[Tt,null]:[At,null],re=Wt[0],de=Wt[1];if(Ht)for(var Pe=0;Pe<Zt;++Pe)ee.push(te=de&&de[Pe]!==void 0?Vt[ft](re[Pe],de[Pe]):Vt[ft](re[Pe])),te.onerror=Gt;else for(Pe=0;Pe<Zt;++Pe)ee.push(te=Vt[ft](re[Pe])),te.onerror=Gt}function Rn(Me){Me=Me.target.result,ee.forEach(function(Ra,bi){return Ra.error!=null&&(ue[bi]=Ra.error)}),Ot({numFailures:ge,failures:ue,results:ft==="delete"?At:ee.map(function(Ra){return Ra.result}),lastResult:Me})}te.onerror=function(Me){Gt(Me),Rn(Me)},te.onsuccess=Rn})},getMany:function(gt){var ht=gt.trans,ft=gt.keys;return new Promise(function(At,Tt){At=Te(At);for(var _t,Ot=ht.objectStore(pt),Ut=ft.length,Vt=new Array(Ut),Wt=0,Ht=0,te=function(ee){ee=ee.target,Vt[ee._pos]=ee.result,++Ht===Wt&&At(Vt)},Zt=Hn(Tt),Gt=0;Gt<Ut;++Gt)ft[Gt]!=null&&((_t=Ot.get(ft[Gt]))._pos=Gt,_t.onsuccess=te,_t.onerror=Zt,++Wt);Wt===0&&At(Vt)})},get:function(gt){var ht=gt.trans,ft=gt.key;return new Promise(function(At,Tt){At=Te(At);var _t=ht.objectStore(pt).get(ft);_t.onsuccess=function(Ot){return At(Ot.target.result)},_t.onerror=Hn(Tt)})},query:(ct=tt,function(gt){return new Promise(function(ht,ft){ht=Te(ht);var At,Tt,_t,Ht=gt.trans,Ot=gt.values,Ut=gt.limit,Wt=gt.query,Vt=Ut===1/0?void 0:Ut,te=Wt.index,Wt=Wt.range,Ht=Ht.objectStore(pt),Ht=te.isPrimaryKey?Ht:Ht.index(te.name),te=A(Wt);if(Ut===0)return ht({result:[]});ct?((Wt=Ot?Ht.getAll(te,Vt):Ht.getAllKeys(te,Vt)).onsuccess=function(Zt){return ht({result:Zt.target.result})},Wt.onerror=Hn(ft)):(At=0,Tt=!Ot&&"openKeyCursor"in Ht?Ht.openKeyCursor(te):Ht.openCursor(te),_t=[],Tt.onsuccess=function(Zt){var Gt=Tt.result;return!Gt||(_t.push(Ot?Gt.value:Gt.primaryKey),++At===Ut)?ht({result:_t}):void Gt.continue()},Tt.onerror=Hn(ft))})}),openCursor:function(gt){var ht=gt.trans,ft=gt.values,At=gt.query,Tt=gt.reverse,_t=gt.unique;return new Promise(function(Ot,Ut){Ot=Te(Ot);var Ht=At.index,Vt=At.range,Wt=ht.objectStore(pt),Wt=Ht.isPrimaryKey?Wt:Wt.index(Ht.name),Ht=Tt?_t?"prevunique":"prev":_t?"nextunique":"next",te=!ft&&"openKeyCursor"in Wt?Wt.openKeyCursor(A(Vt),Ht):Wt.openCursor(A(Vt),Ht);te.onerror=Hn(Ut),te.onsuccess=Te(function(Zt){var Gt,ee,ue,ge,re=te.result;re?(re.___id=++io,re.done=!1,Gt=re.continue.bind(re),ee=(ee=re.continuePrimaryKey)&&ee.bind(re),ue=re.advance.bind(re),ge=function(){throw new Error("Cursor not stopped")},re.trans=ht,re.stop=re.continue=re.continuePrimaryKey=re.advance=function(){throw new Error("Cursor not started")},re.fail=Te(Ut),re.next=function(){var de=this,Pe=1;return this.start(function(){return Pe--?de.continue():de.stop()}).then(function(){return de})},re.start=function(de){function Pe(){if(te.result)try{de()}catch(Me){re.fail(Me)}else re.done=!0,re.start=function(){throw new Error("Cursor behind last entry")},re.stop()}var Rn=new Promise(function(Me,Ra){Me=Te(Me),te.onerror=Hn(Ra),re.fail=Ra,re.stop=function(bi){re.stop=re.continue=re.continuePrimaryKey=re.advance=ge,Me(bi)}});return te.onsuccess=Te(function(Me){te.onsuccess=Pe,Pe()}),re.continue=Gt,re.continuePrimaryKey=ee,re.advance=ue,Pe(),Rn},Ot(re)):Ot(null)},Ut)})},count:function(gt){var ht=gt.query,ft=gt.trans,At=ht.index,Tt=ht.range;return new Promise(function(_t,Ot){var Ut=ft.objectStore(pt),Ut=At.isPrimaryKey?Ut:Ut.index(At.name),Vt=A(Tt),Vt=Vt?Ut.count(Vt):Ut.count();Vt.onsuccess=Te(function(Wt){return _t(Wt.target.result)}),Vt.onerror=Hn(Ot)})}}}z=ut,Z=Vi((ut=i).objectStoreNames);var z,ut={schema:{name:ut.name,tables:Z.map(function(dt){return z.objectStore(dt)}).map(function(dt){var ct=dt.keyPath,pt=dt.autoIncrement,ht=G(ct),gt={},ht={name:dt.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:ct==null,compound:ht,keyPath:ct,autoIncrement:pt,unique:!0,extractKey:hi(ct)},indexes:Vi(dt.indexNames).map(function(ft){return dt.index(ft)}).map(function(_t){var Ot=_t.name,At=_t.unique,Tt=_t.multiEntry,_t=_t.keyPath,Ot={name:Ot,compound:G(_t),keyPath:_t,unique:At,multiEntry:Tt,extractKey:hi(_t)};return gt[an(_t)]=Ot}),getIndexByKeyPath:function(ft){return gt[an(ft)]}};return gt[":id"]=ht.primaryKey,ct!=null&&(gt[an(ct)]=ht.primaryKey),ht})},hasGetAll:0<Z.length&&"getAll"in z.objectStore(Z[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)},Z=ut.schema,tt=ut.hasGetAll,ut=Z.tables.map(M),xt={};return ut.forEach(function(dt){return xt[dt.name]=dt}),{stack:"dbcore",transaction:i.transaction.bind(i),table:function(dt){if(xt[dt])return xt[dt];throw new Error("Table '".concat(dt,"' not found"))},MIN_KEY:-1/0,MAX_KEY:di(u),schema:Z}}function br(i,u,g,A){return g=g.IDBKeyRange,u=Ia(u,g,A),{dbcore:i.dbcore.reduce(function(M,z){return z=z.create,s(s({},M),z(M))},u)}}function Sa(i,u){var g=u.db,g=br(i._middlewares,g,i._deps,u);i.core=g.dbcore,i.tables.forEach(function(A){var M=A.name;i.core.schema.tables.some(function(z){return z.name===M})&&(A.core=i.core.table(M),i[M]instanceof i.Table)&&(i[M].core=A.core)})}function vr(i,u,g,A){g.forEach(function(M){var z=A[M];u.forEach(function(Z){var tt=(function ut(xt,dt){return C(xt,dt)||(xt=d(xt))&&ut(xt,dt)})(Z,M);(!tt||"value"in tt&&tt.value===void 0)&&(Z===i.Transaction.prototype||Z instanceof i.Transaction?p(Z,M,{get:function(){return this.table(M)},set:function(ut){E(this,M,{value:ut,writable:!0,configurable:!0,enumerable:!0})}}):Z[M]=new i.Table(M,z))})})}function Wi(i,u){u.forEach(function(g){for(var A in g)g[A]instanceof i.Table&&delete g[A]})}function ds(i,u){return i._cfg.version-u._cfg.version}function Qi(i,u,g,A){var M=i._dbSchema,z=(g.objectStoreNames.contains("$meta")&&!M.$meta&&(M.$meta=ui("$meta",so("")[0],[]),i._storeNames.push("$meta")),i._createTransaction("readwrite",i._storeNames,M)),Z=(z.create(g),z._completion.catch(A),z._reject.bind(z)),tt=it.transless||it;Ue(function(){if(it.trans=z,it.transless=tt,u!==0)return Sa(i,g),xt=u,((ut=z).storeNames.includes("$meta")?ut.table("$meta").get("version").then(function(dt){return dt??xt}):Kt.resolve(xt)).then(function(At){var ct=i,pt=At,gt=z,ht=g,ft=[],At=ct._versions,Tt=ct._dbSchema=fi(0,ct.idbdb,ht);return(At=At.filter(function(_t){return _t._cfg.version>=pt})).length===0?Kt.resolve():(At.forEach(function(_t){ft.push(function(){var Ot,Ut,Vt,Wt=Tt,Ht=_t._cfg.dbschema,te=(Er(ct,Wt,ht),Er(ct,Ht,ht),Tt=ct._dbSchema=Ht,_r(Wt,Ht)),Zt=(te.add.forEach(function(Gt){hs(ht,Gt[0],Gt[1].primKey,Gt[1].indexes)}),te.change.forEach(function(Gt){if(Gt.recreate)throw new Y.Upgrade("Not yet support for changing primary key");var ee=ht.objectStore(Gt.name);Gt.add.forEach(function(ue){return Ar(ee,ue)}),Gt.change.forEach(function(ue){ee.deleteIndex(ue.name),Ar(ee,ue)}),Gt.del.forEach(function(ue){return ee.deleteIndex(ue)})}),_t._cfg.contentUpgrade);if(Zt&&_t._cfg.version>pt)return Sa(ct,ht),gt._memoizedTables={},Ot=rt(Ht),te.del.forEach(function(Gt){Ot[Gt]=Wt[Gt]}),Wi(ct,[ct.Transaction.prototype]),vr(ct,[ct.Transaction.prototype],N(Ot),Ot),gt.schema=Ot,(Ut=v(Zt))&&$e(),Ht=Kt.follow(function(){var Gt;(Vt=Zt(gt))&&Ut&&(Gt=Mn.bind(null,null),Vt.then(Gt,Gt))}),Vt&&typeof Vt.then=="function"?Kt.resolve(Vt):Ht.then(function(){return Vt})}),ft.push(function(Ot){var Ut,Vt,Wt=_t._cfg.dbschema;Ut=Wt,Vt=Ot,[].slice.call(Vt.db.objectStoreNames).forEach(function(Ht){return Ut[Ht]==null&&Vt.db.deleteObjectStore(Ht)}),Wi(ct,[ct.Transaction.prototype]),vr(ct,[ct.Transaction.prototype],ct._storeNames,ct._dbSchema),gt.schema=ct._dbSchema}),ft.push(function(Ot){ct.idbdb.objectStoreNames.contains("$meta")&&(Math.ceil(ct.idbdb.version/10)===_t._cfg.version?(ct.idbdb.deleteObjectStore("$meta"),delete ct._dbSchema.$meta,ct._storeNames=ct._storeNames.filter(function(Ut){return Ut!=="$meta"})):Ot.objectStore("$meta").put(_t._cfg.version,"version"))})}),(function _t(){return ft.length?Kt.resolve(ft.shift()(gt.idbtrans)).then(_t):Kt.resolve()})().then(function(){ro(Tt,ht)}))}).catch(Z);var ut,xt;N(M).forEach(function(dt){hs(g,dt,M[dt].primKey,M[dt].indexes)}),Sa(i,g),Kt.follow(function(){return i.on.populate.fire(z)}).catch(Z)})}function xr(i,u){ro(i._dbSchema,u),u.db.version%10!=0||u.objectStoreNames.contains("$meta")||u.db.createObjectStore("$meta").add(Math.ceil(u.db.version/10-1),"version");var g=fi(0,i.idbdb,u);Er(i,i._dbSchema,u);for(var A=0,M=_r(g,i._dbSchema).change;A<M.length;A++){var z=(Z=>{if(Z.change.length||Z.recreate)return console.warn("Unable to patch indexes of table ".concat(Z.name," because it has changes on the type of index or primary key.")),{value:void 0};var tt=u.objectStore(Z.name);Z.add.forEach(function(ut){$t&&console.debug("Dexie upgrade patch: Creating missing index ".concat(Z.name,".").concat(ut.src)),Ar(tt,ut)})})(M[A]);if(typeof z=="object")return z.value}}function _r(i,u){var g,A={del:[],add:[],change:[]};for(g in i)u[g]||A.del.push(g);for(g in u){var M=i[g],z=u[g];if(M){var Z={name:g,def:z,recreate:!1,del:[],add:[],change:[]};if(""+(M.primKey.keyPath||"")!=""+(z.primKey.keyPath||"")||M.primKey.auto!==z.primKey.auto)Z.recreate=!0,A.change.push(Z);else{var tt=M.idxByName,ut=z.idxByName,xt=void 0;for(xt in tt)ut[xt]||Z.del.push(xt);for(xt in ut){var dt=tt[xt],ct=ut[xt];dt?dt.src!==ct.src&&Z.change.push(ct):Z.add.push(ct)}(0<Z.del.length||0<Z.add.length||0<Z.change.length)&&A.change.push(Z)}}else A.add.push([g,z])}return A}function hs(i,u,g,A){var M=i.db.createObjectStore(u,g.keyPath?{keyPath:g.keyPath,autoIncrement:g.auto}:{autoIncrement:g.auto});A.forEach(function(z){return Ar(M,z)})}function ro(i,u){N(i).forEach(function(g){u.db.objectStoreNames.contains(g)||($t&&console.debug("Dexie: Creating missing table",g),hs(u,g,i[g].primKey,i[g].indexes))})}function Ar(i,u){i.createIndex(u.name,u.keyPath,{unique:u.unique,multiEntry:u.multi})}function fi(i,u,g){var A={};return P(u.objectStoreNames,0).forEach(function(M){for(var z=g.objectStore(M),Z=ta(yr(xt=z.keyPath),xt||"",!0,!1,!!z.autoIncrement,xt&&typeof xt!="string",!0),tt=[],ut=0;ut<z.indexNames.length;++ut){var dt=z.index(z.indexNames[ut]),xt=dt.keyPath,dt=ta(dt.name,xt,!!dt.unique,!!dt.multiEntry,!1,xt&&typeof xt!="string",!1);tt.push(dt)}A[M]=ui(M,Z,tt)}),A}function Er(i,u,g){for(var A=g.db.objectStoreNames,M=0;M<A.length;++M){var z=A[M],Z=g.objectStore(z);i._hasGetAll="getAll"in Z;for(var tt=0;tt<Z.indexNames.length;++tt){var ut,xt=Z.indexNames[tt],dt=Z.index(xt).keyPath,dt=typeof dt=="string"?dt:"["+P(dt).join("+")+"]";u[z]&&(ut=u[z].idxByName[dt])&&(ut.name=xt,delete u[z].idxByName[dt],u[z].idxByName[xt]=ut)}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&O.WorkerGlobalScope&&O instanceof O.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(i._hasGetAll=!1)}function so(i){return i.split(",").map(function(u,g){var M=u.split(":"),A=(A=M[1])==null?void 0:A.trim(),M=(u=M[0].trim()).replace(/([&*]|\+\+)/g,""),z=/^\[/.test(M)?M.match(/^\[(.*)\]$/)[1].split("+"):M;return ta(M,z||null,/\&/.test(u),/\*/.test(u),/\+\+/.test(u),G(z),g===0,A)})}pi.prototype._createTableSchema=ui,pi.prototype._parseIndexSyntax=so,pi.prototype._parseStoresSpec=function(i,u){var g=this;N(i).forEach(function(A){if(i[A]!==null){var M=g._parseIndexSyntax(i[A]),z=M.shift();if(!z)throw new Y.Schema("Invalid schema for table "+A+": "+i[A]);if(z.unique=!0,z.multi)throw new Y.Schema("Primary key cannot be multiEntry*");M.forEach(function(Z){if(Z.auto)throw new Y.Schema("Only primary key can be marked as autoIncrement (++)");if(!Z.keyPath)throw new Y.Schema("Index must have a name and cannot be an empty string")}),z=g._createTableSchema(A,z,M),u[A]=z}})},pi.prototype.stores=function(g){var u=this.db,g=(this._cfg.storesSource=this._cfg.storesSource?q(this._cfg.storesSource,g):g,u._versions),A={},M={};return g.forEach(function(z){q(A,z._cfg.storesSource),M=z._cfg.dbschema={},z._parseStoresSpec(A,M)}),u._dbSchema=M,Wi(u,[u._allTables,u,u.Transaction.prototype]),vr(u,[u._allTables,u,u.Transaction.prototype,this._cfg.tables],N(M),M),u._storeNames=N(M),this},pi.prototype.upgrade=function(i){return this._cfg.contentUpgrade=Qt(this._cfg.contentUpgrade||st,i),this};var bl=pi;function pi(){}function fs(i,u){var g=i._dbNamesDB;return g||(g=i._dbNamesDB=new ea(Ui,{addons:[],indexedDB:i,IDBKeyRange:u})).version(1).stores({dbnames:"name"}),g.table("dbnames")}function Sr(i){return i&&typeof i.databases=="function"}function ps(i){return Ue(function(){return it.letThrough=!0,i()})}function ms(i){return!("from"in i)}var pn=function(i,u){var g;if(!this)return g=new pn,i&&"d"in i&&q(g,i),g;q(this,arguments.length?{d:1,from:i,to:1<arguments.length?u:i}:{d:0})};function Zi(i,u,g){var A=pe(u,g);if(!isNaN(A)){if(0<A)throw RangeError();if(ms(i))return q(i,{from:u,to:g,d:1});var A=i.l,M=i.r;if(pe(g,i.from)<0)return A?Zi(A,u,g):i.l={from:u,to:g,d:1,l:null,r:null},lo(i);if(0<pe(u,i.to))return M?Zi(M,u,g):i.r={from:u,to:g,d:1,l:null,r:null},lo(i);pe(u,i.from)<0&&(i.from=u,i.l=null,i.d=M?M.d+1:1),0<pe(g,i.to)&&(i.to=g,i.r=null,i.d=i.l?i.l.d+1:1),u=!i.r,A&&!i.l&&qa(i,A),M&&u&&qa(i,M)}}function qa(i,u){ms(u)||(function g(A,M){var z=M.from,Z=M.l,tt=M.r;Zi(A,z,M.to),Z&&g(A,Z),tt&&g(A,tt)})(i,u)}function oo(i,u){var g=wr(u),A=g.next();if(!A.done)for(var M=A.value,z=wr(i),Z=z.next(M.from),tt=Z.value;!A.done&&!Z.done;){if(pe(tt.from,M.to)<=0&&0<=pe(tt.to,M.from))return!0;pe(M.from,tt.from)<0?M=(A=g.next(tt.from)).value:tt=(Z=z.next(M.from)).value}return!1}function wr(i){var u=ms(i)?null:{s:0,n:i};return{next:function(g){for(var A=0<arguments.length;u;)switch(u.s){case 0:if(u.s=1,A)for(;u.n.l&&pe(g,u.n.from)<0;)u={up:u,n:u.n.l,s:1};else for(;u.n.l;)u={up:u,n:u.n.l,s:1};case 1:if(u.s=2,!A||pe(g,u.n.to)<=0)return{value:u.n,done:!1};case 2:if(u.n.r){u.s=3,u={up:u,n:u.n.r,s:0};continue}case 3:u=u.up}return{done:!0}}}}function lo(i){var u,g,A,M=(((M=i.r)==null?void 0:M.d)||0)-(((M=i.l)==null?void 0:M.d)||0),M=1<M?"r":M<-1?"l":"";M&&(u=M=="r"?"l":"r",g=s({},i),A=i[M],i.from=A.from,i.to=A.to,i[M]=A[M],g[M]=A[u],(i[u]=g).d=gs(g)),i.d=gs(i)}function gs(g){var u=g.r,g=g.l;return(u?g?Math.max(u.d,g.d):u.d:g?g.d:0)+1}function Tr(i,u){return N(u).forEach(function(g){i[g]?qa(i[g],u[g]):i[g]=(function A(M){var z,Z,tt={};for(z in M)h(M,z)&&(Z=M[z],tt[z]=!Z||typeof Z!="object"||yt.has(Z.constructor)?Z:A(Z));return tt})(u[g])}),i}function ys(i,u){return i.all||u.all||Object.keys(i).some(function(g){return u[g]&&oo(u[g],i[g])})}x(pn.prototype,((ke={add:function(i){return qa(this,i),this},addKey:function(i){return Zi(this,i,i),this},addKeys:function(i){var u=this;return i.forEach(function(g){return Zi(u,g,g)}),this},hasKey:function(i){var u=wr(this).next(i).value;return u&&pe(u.from,i)<=0&&0<=pe(u.to,i)}})[nt]=function(){return wr(this)},ke));var Ba={},bs={},vs=!1;function Rr(i){Tr(bs,i),vs||(vs=!0,setTimeout(function(){vs=!1,xs(bs,!(bs={}))},0))}function xs(i,u){u===void 0&&(u=!1);var g=new Set;if(i.all)for(var A=0,M=Object.values(Ba);A<M.length;A++)co(tt=M[A],i,g,u);else for(var z in i){var Z,tt,z=/^idb\:\/\/(.*)\/(.*)\//.exec(z);z&&(Z=z[1],z=z[2],tt=Ba["idb://".concat(Z,"/").concat(z)])&&co(tt,i,g,u)}g.forEach(function(ut){return ut()})}function co(i,u,g,A){for(var M=[],z=0,Z=Object.entries(i.queries.query);z<Z.length;z++){for(var tt=Z[z],ut=tt[0],xt=[],dt=0,ct=tt[1];dt<ct.length;dt++){var pt=ct[dt];ys(u,pt.obsSet)?pt.subscribers.forEach(function(At){return g.add(At)}):A&&xt.push(pt)}A&&M.push([ut,xt])}if(A)for(var gt=0,ht=M;gt<ht.length;gt++){var ft=ht[gt],ut=ft[0],xt=ft[1];i.queries.query[ut]=xt}}function vl(i){var u=i._state,g=i._deps.indexedDB;if(u.isBeingOpened||i.idbdb)return u.dbReadyPromise.then(function(){return u.dbOpenError?Ne(u.dbOpenError):i});u.isBeingOpened=!0,u.dbOpenError=null,u.openComplete=!1;var A=u.openCanceller,M=Math.round(10*i.verno),z=!1;function Z(){if(u.openCanceller!==A)throw new Y.DatabaseClosed("db.open() was cancelled")}function tt(){return new Kt(function(pt,gt){if(Z(),!g)throw new Y.MissingAPI;var ht=i.name,ft=u.autoSchema||!M?g.open(ht):g.open(ht,M);if(!ft)throw new Y.MissingAPI;ft.onerror=Hn(gt),ft.onblocked=Te(i._fireOnBlocked),ft.onupgradeneeded=Te(function(At){var Tt;dt=ft.transaction,u.autoSchema&&!i._options.allowEmptyDB?(ft.onerror=Fa,dt.abort(),ft.result.close(),(Tt=g.deleteDatabase(ht)).onsuccess=Tt.onerror=Te(function(){gt(new Y.NoSuchDatabase("Database ".concat(ht," doesnt exist")))})):(dt.onerror=Hn(gt),Tt=At.oldVersion>Math.pow(2,62)?0:At.oldVersion,ct=Tt<1,i.idbdb=ft.result,z&&xr(i,dt),Qi(i,Tt/10,dt,gt))},gt),ft.onsuccess=Te(function(){dt=null;var At,Tt,_t,Ot,Ut,Vt,Wt=i.idbdb=ft.result,Ht=P(Wt.objectStoreNames);if(0<Ht.length)try{var te=Wt.transaction((Ut=Ht).length===1?Ut[0]:Ut,"readonly");if(u.autoSchema)Vt=Wt,Ot=te,(_t=i).verno=Vt.version/10,Ot=_t._dbSchema=fi(0,Vt,Ot),_t._storeNames=P(Vt.objectStoreNames,0),vr(_t,[_t._allTables],N(Ot),Ot);else if(Er(i,i._dbSchema,te),Tt=te,((Tt=_r(fi(0,(At=i).idbdb,Tt),At._dbSchema)).add.length||Tt.change.some(function(Zt){return Zt.add.length||Zt.change.length}))&&!z)return console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Dexie will add missing parts and increment native version number to workaround this."),Wt.close(),M=Wt.version+1,z=!0,pt(tt());Sa(i,te)}catch{}Oa.push(i),Wt.onversionchange=Te(function(Zt){u.vcFired=!0,i.on("versionchange").fire(Zt)}),Wt.onclose=Te(function(){i.close({disableAutoOpen:!1})}),ct&&(Ht=i._deps,Ut=ht,Sr(Vt=Ht.indexedDB)||Ut===Ui||fs(Vt,Ht.IDBKeyRange).put({name:Ut}).catch(st)),pt()},gt)}).catch(function(pt){switch(pt?.name){case"UnknownError":if(0<u.PR1398_maxLoop)return u.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),tt();break;case"VersionError":if(0<M)return M=0,tt()}return Kt.reject(pt)})}var ut,xt=u.dbReadyResolve,dt=null,ct=!1;return Kt.race([A,(typeof navigator>"u"?Kt.resolve():!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise(function(pt){function gt(){return indexedDB.databases().finally(pt)}ut=setInterval(gt,100),gt()}).finally(function(){return clearInterval(ut)}):Promise.resolve()).then(tt)]).then(function(){return Z(),u.onReadyBeingFired=[],Kt.resolve(ps(function(){return i.on.ready.fire(i.vip)})).then(function pt(){var gt;if(0<u.onReadyBeingFired.length)return gt=u.onReadyBeingFired.reduce(Qt,st),u.onReadyBeingFired=[],Kt.resolve(ps(function(){return gt(i.vip)})).then(pt)})}).finally(function(){u.openCanceller===A&&(u.onReadyBeingFired=null,u.isBeingOpened=!1)}).catch(function(pt){u.dbOpenError=pt;try{dt&&dt.abort()}catch{}return A===u.openCanceller&&i._close(),Ne(pt)}).finally(function(){u.openComplete=!0,xt()}).then(function(){var pt;return ct&&(pt={},i.tables.forEach(function(gt){gt.schema.indexes.forEach(function(ht){ht.name&&(pt["idb://".concat(i.name,"/").concat(gt.name,"/").concat(ht.name)]=new pn(-1/0,[[[]]]))}),pt["idb://".concat(i.name,"/").concat(gt.name,"/")]=pt["idb://".concat(i.name,"/").concat(gt.name,"/:dels")]=new pn(-1/0,[[[]]])}),fn(ci).fire(pt),xs(pt,!0)),i})}function Ji(i){function u(z){return i.next(z)}var g=M(u),A=M(function(z){return i.throw(z)});function M(z){return function(tt){var tt=z(tt),ut=tt.value;return tt.done?ut:ut&&typeof ut.then=="function"?ut.then(g,A):G(ut)?Promise.all(ut).then(g,A):g(ut)}}return M(u)()}function wa(i,u,g){for(var A=G(i)?i.slice():[i],M=0;M<g;++M)A.push(u);return A}var xl={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(i){return s(s({},i),{table:function(A){var g=i.table(A),A=g.schema,M={},z=[];function Z(pt,gt,ht){var _t=an(pt),ft=M[_t]=M[_t]||[],At=pt==null?0:typeof pt=="string"?1:pt.length,Tt=0<gt,_t=s(s({},ht),{name:Tt?"".concat(_t,"(virtual-from:").concat(ht.name,")"):ht.name,lowLevelIndex:ht,isVirtual:Tt,keyTail:gt,keyLength:At,extractKey:hi(pt),unique:!Tt&&ht.unique});return ft.push(_t),_t.isPrimaryKey||z.push(_t),1<At&&Z(At===2?pt[0]:pt.slice(0,At-1),gt+1,ht),ft.sort(function(Ot,Ut){return Ot.keyTail-Ut.keyTail}),_t}var tt=Z(A.primaryKey.keyPath,0,A.primaryKey);M[":id"]=[tt];for(var ut=0,xt=A.indexes;ut<xt.length;ut++){var dt=xt[ut];Z(dt.keyPath,0,dt)}function ct(pt){var gt,ht=pt.query.index;return ht.isVirtual?s(s({},pt),{query:{index:ht.lowLevelIndex,range:(gt=pt.query.range,ht=ht.keyTail,{type:gt.type===1?2:gt.type,lower:wa(gt.lower,gt.lowerOpen?i.MAX_KEY:i.MIN_KEY,ht),lowerOpen:!0,upper:wa(gt.upper,gt.upperOpen?i.MIN_KEY:i.MAX_KEY,ht),upperOpen:!0})}}):pt}return s(s({},g),{schema:s(s({},A),{primaryKey:tt,indexes:z,getIndexByKeyPath:function(pt){return(pt=M[an(pt)])&&pt[0]}}),count:function(pt){return g.count(ct(pt))},query:function(pt){return g.query(ct(pt))},openCursor:function(pt){var gt=pt.query.index,ht=gt.keyTail,ft=gt.keyLength;return gt.isVirtual?g.openCursor(ct(pt)).then(function(Tt){return Tt&&At(Tt)}):g.openCursor(pt);function At(Tt){return Object.create(Tt,{continue:{value:function(_t){_t!=null?Tt.continue(wa(_t,pt.reverse?i.MAX_KEY:i.MIN_KEY,ht)):pt.unique?Tt.continue(Tt.key.slice(0,ft).concat(pt.reverse?i.MIN_KEY:i.MAX_KEY,ht)):Tt.continue()}},continuePrimaryKey:{value:function(_t,Ot){Tt.continuePrimaryKey(wa(_t,i.MAX_KEY,ht),Ot)}},primaryKey:{get:function(){return Tt.primaryKey}},key:{get:function(){var _t=Tt.key;return ft===1?_t[0]:_t.slice(0,ft)}},value:{get:function(){return Tt.value}}})}}})}})}};function Cr(i,u,g,A){return g=g||{},A=A||"",N(i).forEach(function(M){var z,Z,tt;h(u,M)?(z=i[M],Z=u[M],typeof z=="object"&&typeof Z=="object"&&z&&Z?(tt=Yt(z))!==Yt(Z)?g[A+M]=u[M]:tt==="Object"?Cr(z,Z,g,A+M+"."):z!==Z&&(g[A+M]=u[M]):z!==Z&&(g[A+M]=u[M])):g[A+M]=void 0}),N(u).forEach(function(M){h(i,M)||(g[A+M]=u[M])}),g}function kr(i,u){return u.type==="delete"?u.keys:u.keys||u.values.map(i.extractKey)}var uo={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(i){return s(s({},i),{table:function(u){var g=i.table(u),A=g.schema.primaryKey;return s(s({},g),{mutate:function(M){var z=it.trans,Z=z.table(u).hook,tt=Z.deleting,ut=Z.creating,xt=Z.updating;switch(M.type){case"add":if(ut.fire===st)break;return z._promise("readwrite",function(){return dt(M)},!0);case"put":if(ut.fire===st&&xt.fire===st)break;return z._promise("readwrite",function(){return dt(M)},!0);case"delete":if(tt.fire===st)break;return z._promise("readwrite",function(){return dt(M)},!0);case"deleteRange":if(tt.fire===st)break;return z._promise("readwrite",function(){return(function ct(pt,gt,ht){return g.query({trans:pt,values:!1,query:{index:A,range:gt},limit:ht}).then(function(ft){var At=ft.result;return dt({type:"delete",keys:At,trans:pt}).then(function(Tt){return 0<Tt.numFailures?Promise.reject(Tt.failures[0]):At.length<ht?{failures:[],numFailures:0,lastResult:void 0}:ct(pt,s(s({},gt),{lower:At[At.length-1],lowerOpen:!0}),ht)})})})(M.trans,M.range,1e4)},!0)}return g.mutate(M);function dt(ct){var pt,gt,ht,ft=it.trans,At=ct.keys||kr(A,ct);if(At)return(ct=ct.type==="add"||ct.type==="put"?s(s({},ct),{keys:At}):s({},ct)).type!=="delete"&&(ct.values=y([],ct.values)),ct.keys&&(ct.keys=y([],ct.keys)),pt=g,ht=At,((gt=ct).type==="add"?Promise.resolve([]):pt.getMany({trans:gt.trans,keys:ht,cache:"immutable"})).then(function(Tt){var _t=At.map(function(Ot,Ut){var Vt,Wt,Ht,te=Tt[Ut],Zt={onerror:null,onsuccess:null};return ct.type==="delete"?tt.fire.call(Zt,Ot,te,ft):ct.type==="add"||te===void 0?(Vt=ut.fire.call(Zt,Ot,ct.values[Ut],ft),Ot==null&&Vt!=null&&(ct.keys[Ut]=Ot=Vt,A.outbound||J(ct.values[Ut],A.keyPath,Ot))):(Vt=Cr(te,ct.values[Ut]),(Wt=xt.fire.call(Zt,Vt,Ot,te,ft))&&(Ht=ct.values[Ut],Object.keys(Wt).forEach(function(Gt){h(Ht,Gt)?Ht[Gt]=Wt[Gt]:J(Ht,Gt,Wt[Gt])}))),Zt});return g.mutate(ct).then(function(Ot){for(var Ut=Ot.failures,Vt=Ot.results,Wt=Ot.numFailures,Ot=Ot.lastResult,Ht=0;Ht<At.length;++Ht){var te=(Vt||At)[Ht],Zt=_t[Ht];te==null?Zt.onerror&&Zt.onerror(Ut[Ht]):Zt.onsuccess&&Zt.onsuccess(ct.type==="put"&&Tt[Ht]?ct.values[Ht]:te)}return{failures:Ut,results:Vt,numFailures:Wt,lastResult:Ot}}).catch(function(Ot){return _t.forEach(function(Ut){return Ut.onerror&&Ut.onerror(Ot)}),Promise.reject(Ot)})});throw new Error("Keys missing")}}})}})}};function _s(i,u,g){try{if(!u||u.keys.length<i.length)return null;for(var A=[],M=0,z=0;M<u.keys.length&&z<i.length;++M)pe(u.keys[M],i[z])===0&&(A.push(g?Mt(u.values[M]):u.values[M]),++z);return A.length===i.length?A:null}catch{return null}}var ho={stack:"dbcore",level:-1,create:function(i){return{table:function(u){var g=i.table(u);return s(s({},g),{getMany:function(A){var M;return A.cache?(M=_s(A.keys,A.trans._cache,A.cache==="clone"))?Kt.resolve(M):g.getMany(A).then(function(z){return A.trans._cache={keys:A.keys,values:A.cache==="clone"?Mt(z):z},z}):g.getMany(A)},mutate:function(A){return A.type!=="add"&&(A.trans._cache=null),g.mutate(A)}})}}}};function Ua(i,u){return i.trans.mode==="readonly"&&!!i.subscr&&!i.trans.explicit&&i.trans.db._options.cache!=="disabled"&&!u.schema.primaryKey.outbound}function fo(i,u){switch(i){case"query":return u.values&&!u.unique;case"get":case"getMany":case"count":case"openCursor":return!1}}var _l={stack:"dbcore",level:0,name:"Observability",create:function(i){var u=i.schema.name,g=new pn(i.MIN_KEY,i.MAX_KEY);return s(s({},i),{transaction:function(A,M,z){if(it.subscr&&M!=="readonly")throw new Y.ReadOnly("Readwrite transaction in liveQuery context. Querier source: ".concat(it.querier));return i.transaction(A,M,z)},table:function(A){function M(At){var ft,At=At.query;return[ft=At.index,new pn((ft=(At=At.range).lower)!=null?ft:i.MIN_KEY,(ft=At.upper)!=null?ft:i.MAX_KEY)]}var z=i.table(A),Z=z.schema,tt=Z.primaryKey,ut=Z.indexes,xt=tt.extractKey,dt=tt.outbound,ct=tt.autoIncrement&&ut.filter(function(ht){return ht.compound&&ht.keyPath.includes(tt.keyPath)}),pt=s(s({},z),{mutate:function(ht){function ft(ee){return ee="idb://".concat(u,"/").concat(A,"/").concat(ee),Ut[ee]||(Ut[ee]=new pn)}var At,Tt,_t,Ot=ht.trans,Ut=ht.mutatedParts||(ht.mutatedParts={}),Vt=ft(""),Wt=ft(":dels"),Ht=ht.type,Zt=ht.type==="deleteRange"?[ht.range]:ht.type==="delete"?[ht.keys]:ht.values.length<50?[kr(tt,ht).filter(function(ee){return ee}),ht.values]:[],te=Zt[0],Zt=Zt[1],Gt=ht.trans._cache;return G(te)?(Vt.addKeys(te),(Ht=Ht==="delete"||te.length===Zt.length?_s(te,Gt):null)||Wt.addKeys(te),(Ht||Zt)&&(At=ft,Tt=Ht,_t=Zt,Z.indexes.forEach(function(ee){var ue=At(ee.name||"");function ge(de){return de!=null?ee.extractKey(de):null}function re(de){ee.multiEntry&&G(de)?de.forEach(function(Pe){return ue.addKey(Pe)}):ue.addKey(de)}(Tt||_t).forEach(function(de,Me){var Rn=Tt&&ge(Tt[Me]),Me=_t&&ge(_t[Me]);pe(Rn,Me)!==0&&(Rn!=null&&re(Rn),Me!=null)&&re(Me)})}))):te?(Zt={from:(Gt=te.lower)!=null?Gt:i.MIN_KEY,to:(Ht=te.upper)!=null?Ht:i.MAX_KEY},Wt.add(Zt),Vt.add(Zt)):(Vt.add(g),Wt.add(g),Z.indexes.forEach(function(ee){return ft(ee.name).add(g)})),z.mutate(ht).then(function(ee){return!te||ht.type!=="add"&&ht.type!=="put"||(Vt.addKeys(ee.results),ct&&ct.forEach(function(ue){for(var ge=ht.values.map(function(Rn){return ue.extractKey(Rn)}),re=ue.keyPath.findIndex(function(Rn){return Rn===tt.keyPath}),de=0,Pe=ee.results.length;de<Pe;++de)ge[de][re]=ee.results[de];ft(ue.name).addKeys(ge)})),Ot.mutatedParts=Tr(Ot.mutatedParts||{},Ut),ee})}}),gt={get:function(ht){return[tt,new pn(ht.key)]},getMany:function(ht){return[tt,new pn().addKeys(ht.keys)]},count:M,query:M,openCursor:M};return N(gt).forEach(function(ht){pt[ht]=function(ft){var At=it.subscr,Tt=!!At,_t=Ua(it,z)&&fo(ht,ft)?ft.obsSet={}:At;if(Tt){var Ot,At=function(Zt){return Zt="idb://".concat(u,"/").concat(A,"/").concat(Zt),_t[Zt]||(_t[Zt]=new pn)},Ut=At(""),Vt=At(":dels"),Tt=gt[ht](ft),Wt=Tt[0],Tt=Tt[1];if((ht==="query"&&Wt.isPrimaryKey&&!ft.values?Vt:At(Wt.name||"")).add(Tt),!Wt.isPrimaryKey){if(ht!=="count")return Ot=ht==="query"&&dt&&ft.values&&z.query(s(s({},ft),{values:!1})),z[ht].apply(this,arguments).then(function(Zt){if(ht==="query"){if(dt&&ft.values)return Ot.then(function(ge){return ge=ge.result,Ut.addKeys(ge),Zt});var Gt=ft.values?Zt.result.map(xt):Zt.result;(ft.values?Ut:Vt).addKeys(Gt)}else{var ee,ue;if(ht==="openCursor")return ue=ft.values,(ee=Zt)&&Object.create(ee,{key:{get:function(){return Vt.addKey(ee.primaryKey),ee.key}},primaryKey:{get:function(){var ge=ee.primaryKey;return Vt.addKey(ge),ge}},value:{get:function(){return ue&&Ut.addKey(ee.primaryKey),ee.value}}})}return Zt});Vt.add(g)}}return z[ht].apply(this,arguments)}}),pt}})}};function po(i,u,g){var A;return g.numFailures===0?u:u.type==="deleteRange"||(A=u.keys?u.keys.length:"values"in u&&u.values?u.values.length:1,g.numFailures===A)?null:(A=s({},u),G(A.keys)&&(A.keys=A.keys.filter(function(M,z){return!(z in g.failures)})),"values"in A&&G(A.values)&&(A.values=A.values.filter(function(M,z){return!(z in g.failures)})),A)}function Mr(i,u){return g=i,((A=u).lower===void 0||(A.lowerOpen?0<pe(g,A.lower):0<=pe(g,A.lower)))&&(g=i,(A=u).upper===void 0||(A.upperOpen?pe(g,A.upper)<0:pe(g,A.upper)<=0));var g,A}function As(i,u,g,A,M,z){var Z,tt,ut,xt,dt,ct;return!g||g.length===0||(Z=u.query.index,tt=Z.multiEntry,ut=u.query.range,xt=A.schema.primaryKey.extractKey,dt=Z.extractKey,ct=(Z.lowLevelIndex||Z).extractKey,(A=g.reduce(function(pt,gt){var ht=pt,ft=[];if(gt.type==="add"||gt.type==="put")for(var At=new pn,Tt=gt.values.length-1;0<=Tt;--Tt){var _t,Ot=gt.values[Tt],Ut=xt(Ot);!At.hasKey(Ut)&&(_t=dt(Ot),tt&&G(_t)?_t.some(function(Zt){return Mr(Zt,ut)}):Mr(_t,ut))&&(At.addKey(Ut),ft.push(Ot))}switch(gt.type){case"add":var Vt=new pn().addKeys(u.values?pt.map(function(Gt){return xt(Gt)}):pt),ht=pt.concat(u.values?ft.filter(function(Gt){return Gt=xt(Gt),!Vt.hasKey(Gt)&&(Vt.addKey(Gt),!0)}):ft.map(function(Gt){return xt(Gt)}).filter(function(Gt){return!Vt.hasKey(Gt)&&(Vt.addKey(Gt),!0)}));break;case"put":var Wt=new pn().addKeys(gt.values.map(function(Gt){return xt(Gt)}));ht=pt.filter(function(Gt){return!Wt.hasKey(u.values?xt(Gt):Gt)}).concat(u.values?ft:ft.map(function(Gt){return xt(Gt)}));break;case"delete":var Ht=new pn().addKeys(gt.keys);ht=pt.filter(function(Gt){return!Ht.hasKey(u.values?xt(Gt):Gt)});break;case"deleteRange":var te=gt.range;ht=pt.filter(function(Gt){return!Mr(xt(Gt),te)})}return ht},i))===i)?i:(A.sort(function(pt,gt){return pe(ct(pt),ct(gt))||pe(xt(pt),xt(gt))}),u.limit&&u.limit<1/0&&(A.length>u.limit?A.length=u.limit:i.length===u.limit&&A.length<u.limit&&(M.dirty=!0)),z?Object.freeze(A):A)}function mi(i,u){return pe(i.lower,u.lower)===0&&pe(i.upper,u.upper)===0&&!!i.lowerOpen==!!u.lowerOpen&&!!i.upperOpen==!!u.upperOpen}function $i(i,u){return((g,A,M,z)=>{if(g===void 0)return A!==void 0?-1:0;if(A===void 0)return 1;if((g=pe(g,A))===0){if(M&&z)return 0;if(M)return 1;if(z)return-1}return g})(i.lower,u.lower,i.lowerOpen,u.lowerOpen)<=0&&0<=((g,A,M,z)=>{if(g===void 0)return A!==void 0?1:0;if(A===void 0)return-1;if((g=pe(g,A))===0){if(M&&z)return 0;if(M)return-1;if(z)return 1}return g})(i.upper,u.upper,i.upperOpen,u.upperOpen)}function Al(i,u,g,A){i.subscribers.add(g),A.addEventListener("abort",function(){var M,z;i.subscribers.delete(g),i.subscribers.size===0&&(M=i,z=u,setTimeout(function(){M.subscribers.size===0&&D(z,M)},3e3))})}var jr={stack:"dbcore",level:0,name:"Cache",create:function(i){var u=i.schema.name;return s(s({},i),{transaction:function(g,A,M){var z,Z,tt=i.transaction(g,A,M);return A==="readwrite"&&(M=(z=new AbortController).signal,tt.addEventListener("abort",(Z=function(ut){return function(){if(z.abort(),A==="readwrite"){for(var xt=new Set,dt=0,ct=g;dt<ct.length;dt++){var pt=ct[dt],gt=Ba["idb://".concat(u,"/").concat(pt)];if(gt){var ht=i.table(pt),ft=gt.optimisticOps.filter(function(ee){return ee.trans===tt});if(tt._explicit&&ut&&tt.mutatedParts)for(var At=0,Tt=Object.values(gt.queries.query);At<Tt.length;At++)for(var _t=0,Ot=(Wt=Tt[At]).slice();_t<Ot.length;_t++)ys((Ht=Ot[_t]).obsSet,tt.mutatedParts)&&(D(Wt,Ht),Ht.subscribers.forEach(function(ee){return xt.add(ee)}));else if(0<ft.length){gt.optimisticOps=gt.optimisticOps.filter(function(ee){return ee.trans!==tt});for(var Ut=0,Vt=Object.values(gt.queries.query);Ut<Vt.length;Ut++)for(var Wt,Ht,te,Zt=0,Gt=(Wt=Vt[Ut]).slice();Zt<Gt.length;Zt++)(Ht=Gt[Zt]).res!=null&&tt.mutatedParts&&(ut&&!Ht.dirty?(te=Object.isFrozen(Ht.res),te=As(Ht.res,Ht.req,ft,ht,Ht,te),Ht.dirty?(D(Wt,Ht),Ht.subscribers.forEach(function(ee){return xt.add(ee)})):te!==Ht.res&&(Ht.res=te,Ht.promise=Kt.resolve({result:te}))):(Ht.dirty&&D(Wt,Ht),Ht.subscribers.forEach(function(ee){return xt.add(ee)})))}}}xt.forEach(function(ee){return ee()})}}})(!1),{signal:M}),tt.addEventListener("error",Z(!1),{signal:M}),tt.addEventListener("complete",Z(!0),{signal:M})),tt},table:function(g){var A=i.table(g),M=A.schema.primaryKey;return s(s({},A),{mutate:function(z){var Z,tt=it.trans;return!M.outbound&&tt.db._options.cache!=="disabled"&&!tt.explicit&&tt.idbtrans.mode==="readwrite"&&(Z=Ba["idb://".concat(u,"/").concat(g)])?(tt=A.mutate(z),z.type!=="add"&&z.type!=="put"||!(50<=z.values.length||kr(M,z).some(function(ut){return ut==null}))?(Z.optimisticOps.push(z),z.mutatedParts&&Rr(z.mutatedParts),tt.then(function(ut){0<ut.numFailures&&(D(Z.optimisticOps,z),(ut=po(0,z,ut))&&Z.optimisticOps.push(ut),z.mutatedParts)&&Rr(z.mutatedParts)}),tt.catch(function(){D(Z.optimisticOps,z),z.mutatedParts&&Rr(z.mutatedParts)})):tt.then(function(ut){var xt=po(0,s(s({},z),{values:z.values.map(function(dt,ct){var pt;return ut.failures[ct]?dt:(J(pt=(pt=M.keyPath)!=null&&pt.includes(".")?Mt(dt):s({},dt),M.keyPath,ut.results[ct]),pt)})}),ut);Z.optimisticOps.push(xt),queueMicrotask(function(){return z.mutatedParts&&Rr(z.mutatedParts)})}),tt):A.mutate(z)},query:function(z){var Z,tt,ut,xt,dt,ct,pt;return Ua(it,A)&&fo("query",z)?(Z=((ut=it.trans)==null?void 0:ut.db._options.cache)==="immutable",tt=(ut=it).requery,ut=ut.signal,ct=((gt,ht,ft,At)=>{var Tt=Ba["idb://".concat(gt,"/").concat(ht)];if(!Tt)return[];if(!(gt=Tt.queries[ft]))return[null,!1,Tt,null];var _t=gt[(At.query?At.query.index.name:null)||""];if(!_t)return[null,!1,Tt,null];switch(ft){case"query":var Ot=_t.find(function(Ut){return Ut.req.limit===At.limit&&Ut.req.values===At.values&&mi(Ut.req.query.range,At.query.range)});return Ot?[Ot,!0,Tt,_t]:[_t.find(function(Ut){return("limit"in Ut.req?Ut.req.limit:1/0)>=At.limit&&(!At.values||Ut.req.values)&&$i(Ut.req.query.range,At.query.range)}),!1,Tt,_t];case"count":return Ot=_t.find(function(Ut){return mi(Ut.req.query.range,At.query.range)}),[Ot,!!Ot,Tt,_t]}})(u,g,"query",z),pt=ct[0],xt=ct[2],dt=ct[3],pt&&ct[1]?pt.obsSet=z.obsSet:(ct=A.query(z).then(function(gt){var ht=gt.result;if(pt&&(pt.res=ht),Z){for(var ft=0,At=ht.length;ft<At;++ft)Object.freeze(ht[ft]);Object.freeze(ht)}else gt.result=Mt(ht);return gt}).catch(function(gt){return dt&&pt&&D(dt,pt),Promise.reject(gt)}),pt={obsSet:z.obsSet,promise:ct,subscribers:new Set,type:"query",req:z,dirty:!1},dt?dt.push(pt):(dt=[pt],(xt=xt||(Ba["idb://".concat(u,"/").concat(g)]={queries:{query:{},count:{}},objs:new Map,optimisticOps:[],unsignaledParts:{}})).queries.query[z.query.index.name||""]=dt)),Al(pt,dt,tt,ut),pt.promise.then(function(gt){return{result:As(gt.result,z,xt?.optimisticOps,A,pt,Z)}})):A.query(z)}})}})}};function tr(i,u){return new Proxy(i,{get:function(g,A,M){return A==="db"?u:Reflect.get(g,A,M)}})}Ge.prototype.version=function(i){if(isNaN(i)||i<.1)throw new Y.Type("Given version is not a positive number");if(i=Math.round(10*i)/10,this.idbdb||this._state.isBeingOpened)throw new Y.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,i);var u=this._versions,g=u.filter(function(A){return A._cfg.version===i})[0];return g||(g=new this.Version(i),u.push(g),u.sort(ds),g.stores({}),this._state.autoSchema=!1),g},Ge.prototype._whenReady=function(i){var u=this;return this.idbdb&&(this._state.openComplete||it.letThrough||this._vip)?i():new Kt(function(g,A){if(u._state.openComplete)return A(new Y.DatabaseClosed(u._state.dbOpenError));if(!u._state.isBeingOpened){if(!u._state.autoOpen)return void A(new Y.DatabaseClosed);u.open().catch(st)}u._state.dbReadyPromise.then(g,A)}).then(i)},Ge.prototype.use=function(M){var u=M.stack,g=M.create,A=M.level,M=M.name,z=(M&&this.unuse({stack:u,name:M}),this._middlewares[u]||(this._middlewares[u]=[]));return z.push({stack:u,create:g,level:A??10,name:M}),z.sort(function(Z,tt){return Z.level-tt.level}),this},Ge.prototype.unuse=function(i){var u=i.stack,g=i.name,A=i.create;return u&&this._middlewares[u]&&(this._middlewares[u]=this._middlewares[u].filter(function(M){return A?M.create!==A:!!g&&M.name!==g})),this},Ge.prototype.open=function(){var i=this;return Bn(vt,function(){return vl(i)})},Ge.prototype._close=function(){this.on.close.fire(new CustomEvent("close"));var i=this._state,u=Oa.indexOf(this);if(0<=u&&Oa.splice(u,1),this.idbdb){try{this.idbdb.close()}catch{}this.idbdb=null}i.isBeingOpened||(i.dbReadyPromise=new Kt(function(g){i.dbReadyResolve=g}),i.openCanceller=new Kt(function(g,A){i.cancelOpen=A}))},Ge.prototype.close=function(u){var u=(u===void 0?{disableAutoOpen:!0}:u).disableAutoOpen,g=this._state;u?(g.isBeingOpened&&g.cancelOpen(new Y.DatabaseClosed),this._close(),g.autoOpen=!1,g.dbOpenError=new Y.DatabaseClosed):(this._close(),g.autoOpen=this._options.autoOpen||g.isBeingOpened,g.openComplete=!1,g.dbOpenError=null)},Ge.prototype.delete=function(i){var u=this,g=(i===void 0&&(i={disableAutoOpen:!0}),0<arguments.length&&typeof arguments[0]!="object"),A=this._state;return new Kt(function(M,z){function Z(){u.close(i);var tt=u._deps.indexedDB.deleteDatabase(u.name);tt.onsuccess=Te(function(){var ut,xt,dt;ut=u._deps,xt=u.name,Sr(dt=ut.indexedDB)||xt===Ui||fs(dt,ut.IDBKeyRange).delete(xt).catch(st),M()}),tt.onerror=Hn(z),tt.onblocked=u._fireOnBlocked}if(g)throw new Y.InvalidArgument("Invalid closeOptions argument to db.delete()");A.isBeingOpened?A.dbReadyPromise.then(Z):Z()})},Ge.prototype.backendDB=function(){return this.idbdb},Ge.prototype.isOpen=function(){return this.idbdb!==null},Ge.prototype.hasBeenClosed=function(){var i=this._state.dbOpenError;return i&&i.name==="DatabaseClosed"},Ge.prototype.hasFailed=function(){return this._state.dbOpenError!==null},Ge.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(Ge.prototype,"tables",{get:function(){var i=this;return N(this._allTables).map(function(u){return i._allTables[u]})},enumerable:!1,configurable:!0}),Ge.prototype.transaction=function(){var i=(function(u,g,A){var M=arguments.length;if(M<2)throw new Y.InvalidArgument("Too few arguments");for(var z=new Array(M-1);--M;)z[M-1]=arguments[M];return A=z.pop(),[u,lt(z),A]}).apply(this,arguments);return this._transaction.apply(this,i)},Ge.prototype._transaction=function(i,u,g){var A,M,z=this,Z=it.trans,tt=(Z&&Z.db===this&&i.indexOf("!")===-1||(Z=null),i.indexOf("?")!==-1);i=i.replace("!","").replace("?","");try{if(M=u.map(function(xt){if(xt=xt instanceof z.Table?xt.name:xt,typeof xt!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return xt}),i=="r"||i===ha)A=ha;else{if(i!="rw"&&i!=Aa)throw new Y.InvalidArgument("Invalid transaction mode: "+i);A=Aa}if(Z){if(Z.mode===ha&&A===Aa){if(!tt)throw new Y.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");Z=null}Z&&M.forEach(function(xt){if(Z&&Z.storeNames.indexOf(xt)===-1){if(!tt)throw new Y.SubTransaction("Table "+xt+" not included in parent transaction.");Z=null}}),tt&&Z&&!Z.active&&(Z=null)}}catch(xt){return Z?Z._promise(null,function(dt,ct){ct(xt)}):Ne(xt)}var ut=(function xt(dt,ct,pt,gt,ht){return Kt.resolve().then(function(){var _t=it.transless||it,ft=dt._createTransaction(ct,pt,dt._dbSchema,gt),_t=(ft.explicit=!0,{trans:ft,transless:_t});if(gt)ft.idbtrans=gt.idbtrans;else try{ft.create(),ft.idbtrans._explicit=!0,dt._state.PR1398_maxLoop=3}catch(Ot){return Ot.name===I.InvalidState&&dt.isOpen()&&0<--dt._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),dt.close({disableAutoOpen:!1}),dt.open().then(function(){return xt(dt,ct,pt,null,ht)})):Ne(Ot)}var At,Tt=v(ht),_t=(Tt&&$e(),Kt.follow(function(){var Ot;(At=ht.call(ft,ft))&&(Tt?(Ot=Mn.bind(null,null),At.then(Ot,Ot)):typeof At.next=="function"&&typeof At.throw=="function"&&(At=Ji(At)))},_t));return(At&&typeof At.then=="function"?Kt.resolve(At).then(function(Ot){return ft.active?Ot:Ne(new Y.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):_t.then(function(){return At})).then(function(Ot){return gt&&ft._resolve(),ft._completion.then(function(){return Ot})}).catch(function(Ot){return ft._reject(Ot),Ne(Ot)})})}).bind(null,this,A,M,Z,g);return Z?Z._promise(A,ut,"lock"):it.trans?Bn(it.transless,function(){return z._whenReady(ut)}):this._whenReady(ut)},Ge.prototype.table=function(i){if(h(this._allTables,i))return this._allTables[i];throw new Y.InvalidTable("Table ".concat(i," does not exist"))};var ea=Ge;function Ge(i,u){var g,A,M,z,Z,tt=this,ut=(this._middlewares={},this.verno=0,Ge.dependencies),ut=(this._options=u=s({addons:Ge.addons,autoOpen:!0,indexedDB:ut.indexedDB,IDBKeyRange:ut.IDBKeyRange,cache:"cloned"},u),this._deps={indexedDB:u.indexedDB,IDBKeyRange:u.IDBKeyRange},u.addons),xt=(this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this,{dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:st,dbReadyPromise:null,cancelOpen:st,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3,autoOpen:u.autoOpen}),dt=(xt.dbReadyPromise=new Kt(function(ct){xt.dbReadyResolve=ct}),xt.openCanceller=new Kt(function(ct,pt){xt.cancelOpen=pt}),this._state=xt,this.name=i,this.on=Yi(this,"populate","blocked","versionchange","close",{ready:[Qt,st]}),this.once=function(ct,pt){var gt=function(){for(var ht=[],ft=0;ft<arguments.length;ft++)ht[ft]=arguments[ft];tt.on(ct).unsubscribe(gt),pt.apply(tt,ht)};return tt.on(ct,gt)},this.on.ready.subscribe=V(this.on.ready.subscribe,function(ct){return function(pt,gt){Ge.vip(function(){var ht,ft=tt._state;ft.openComplete?(ft.dbOpenError||Kt.resolve().then(pt),gt&&ct(pt)):ft.onReadyBeingFired?(ft.onReadyBeingFired.push(pt),gt&&ct(pt)):(ct(pt),ht=tt,gt||ct(function At(){ht.on.ready.unsubscribe(pt),ht.on.ready.unsubscribe(At)}))})}}),this.Collection=(g=this,hn(gl.prototype,function(At,ft){this.db=g;var gt=rs,ht=null;if(ft)try{gt=ft()}catch(_t){ht=_t}var ft=At._ctx,At=ft.table,Tt=At.hook.reading.fire;this._ctx={table:At,index:ft.index,isPrimKey:!ft.index||At.schema.primKey.keyPath&&ft.index===At.schema.primKey.name,range:gt,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:ht,or:ft.or,valueMapper:Tt!==Rt?Tt:null}})),this.Table=(A=this,hn(ss.prototype,function(ct,pt,gt){this.db=A,this._tx=gt,this.name=ct,this.schema=pt,this.hook=A._allTables[ct]?A._allTables[ct].hook:Yi(null,{creating:[jt,st],reading:[Xt,Rt],updating:[Pt,st],deleting:[Lt,st]})})),this.Transaction=(M=this,hn(us.prototype,function(ct,pt,gt,ht,ft){var At=this;ct!=="readonly"&&pt.forEach(function(Tt){Tt=(Tt=gt[Tt])==null?void 0:Tt.yProps,Tt&&(pt=pt.concat(Tt.map(function(_t){return _t.updatesTable})))}),this.db=M,this.mode=ct,this.storeNames=pt,this.schema=gt,this.chromeTransactionDurability=ht,this.idbtrans=null,this.on=Yi(this,"complete","error","abort"),this.parent=ft||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new Kt(function(Tt,_t){At._resolve=Tt,At._reject=_t}),this._completion.then(function(){At.active=!1,At.on.complete.fire()},function(Tt){var _t=At.active;return At.active=!1,At.on.error.fire(Tt),At.parent?At.parent._reject(Tt):_t&&At.idbtrans&&At.idbtrans.abort(),Ne(Tt)})})),this.Version=(z=this,hn(bl.prototype,function(ct){this.db=z,this._cfg={version:ct,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})),this.WhereClause=(Z=this,hn(La.prototype,function(ct,pt,gt){if(this.db=Z,this._ctx={table:ct,index:pt===":id"?null:pt,or:gt},this._cmp=this._ascending=pe,this._descending=function(ht,ft){return pe(ft,ht)},this._max=function(ht,ft){return 0<pe(ht,ft)?ht:ft},this._min=function(ht,ft){return pe(ht,ft)<0?ht:ft},this._IDBKeyRange=Z._deps.IDBKeyRange,!this._IDBKeyRange)throw new Y.MissingAPI})),this.on("versionchange",function(ct){0<ct.newVersion?console.warn("Another connection wants to upgrade database '".concat(tt.name,"'. Closing db now to resume the upgrade.")):console.warn("Another connection wants to delete database '".concat(tt.name,"'. Closing db now to resume the delete request.")),tt.close({disableAutoOpen:!1})}),this.on("blocked",function(ct){!ct.newVersion||ct.newVersion<ct.oldVersion?console.warn("Dexie.delete('".concat(tt.name,"') was blocked")):console.warn("Upgrade '".concat(tt.name,"' blocked by other connection holding version ").concat(ct.oldVersion/10))}),this._maxKey=di(u.IDBKeyRange),this._createTransaction=function(ct,pt,gt,ht){return new tt.Transaction(ct,pt,gt,tt._options.chromeTransactionDurability,ht)},this._fireOnBlocked=function(ct){tt.on("blocked").fire(ct),Oa.filter(function(pt){return pt.name===tt.name&&pt!==tt&&!pt._state.vcFired}).map(function(pt){return pt.on("versionchange").fire(ct)})},this.use(ho),this.use(jr),this.use(_l),this.use(xl),this.use(uo),new Proxy(this,{get:function(ct,pt,gt){var ht;return pt==="_vip"||(pt==="table"?function(ft){return tr(tt.table(ft),dt)}:(ht=Reflect.get(ct,pt,gt))instanceof ss?tr(ht,dt):pt==="tables"?ht.map(function(ft){return tr(ft,dt)}):pt==="_createTransaction"?function(){return tr(ht.apply(this,arguments),dt)}:ht)}}));this.vip=dt,ut.forEach(function(ct){return ct(tt)})}var gi,Ha=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable",mo=(Dr.prototype.subscribe=function(i,u,g){return this._subscribe(i&&typeof i!="function"?i:{next:i,error:u,complete:g})},Dr.prototype[Ha]=function(){return this},Dr);function Dr(i){this._subscribe=i}try{gi={indexedDB:O.indexedDB||O.mozIndexedDB||O.webkitIndexedDB||O.msIndexedDB,IDBKeyRange:O.IDBKeyRange||O.webkitIDBKeyRange}}catch{gi={indexedDB:null,IDBKeyRange:null}}function go(i){var u,g=!1,A=new mo(function(M){var z=v(i),Z,tt=!1,ut={},xt={},dt={get closed(){return tt},unsubscribe:function(){tt||(tt=!0,Z&&Z.abort(),ct&&fn.storagemutated.unsubscribe(gt))}},ct=(M.start&&M.start(dt),!1),pt=function(){return _a(ht)},gt=function(ft){Tr(ut,ft),ys(xt,ut)&&pt()},ht=function(){var ft,At,Tt;!tt&&gi.indexedDB&&(ut={},ft={},Z&&Z.abort(),Z=new AbortController,Tt=(_t=>{var Ot=je();try{z&&$e();var Ut=Ue(i,_t);return Ut=z?Ut.finally(Mn):Ut}finally{Ot&&gn()}})(At={subscr:ft,signal:Z.signal,requery:pt,querier:i,trans:null}),Promise.resolve(Tt).then(function(_t){g=!0,u=_t,tt||At.signal.aborted||(ut={},(Ot=>{for(var Ut in Ot)if(h(Ot,Ut))return;return 1})(xt=ft)||ct||(fn(ci,gt),ct=!0),_a(function(){return!tt&&M.next&&M.next(_t)}))},function(_t){g=!1,["DatabaseClosedError","AbortError"].includes(_t?.name)||tt||_a(function(){tt||M.error&&M.error(_t)})}))};return setTimeout(pt,0),dt});return A.hasValue=function(){return g},A.getValue=function(){return u},A}var Ga=ea;function Es(i){var u=Ta;try{Ta=!0,fn.storagemutated.fire(i),xs(i,!0)}finally{Ta=u}}x(Ga,s(s({},F),{delete:function(i){return new Ga(i,{addons:[]}).delete()},exists:function(i){return new Ga(i,{addons:[]}).open().then(function(u){return u.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(i){try{return u=Ga.dependencies,g=u.indexedDB,u=u.IDBKeyRange,(Sr(g)?Promise.resolve(g.databases()).then(function(A){return A.map(function(M){return M.name}).filter(function(M){return M!==Ui})}):fs(g,u).toCollection().primaryKeys()).then(i)}catch{return Ne(new Y.MissingAPI)}var u,g},defineClass:function(){return function(i){q(this,i)}},ignoreTransaction:function(i){return it.trans?Bn(it.transless,i):i()},vip:ps,async:function(i){return function(){try{var u=Ji(i.apply(this,arguments));return u&&typeof u.then=="function"?u:Kt.resolve(u)}catch(g){return Ne(g)}}},spawn:function(i,u,g){try{var A=Ji(i.apply(g,u||[]));return A&&typeof A.then=="function"?A:Kt.resolve(A)}catch(M){return Ne(M)}},currentTransaction:{get:function(){return it.trans||null}},waitFor:function(i,u){return i=Kt.resolve(typeof i=="function"?Ga.ignoreTransaction(i):i).timeout(u||6e4),it.trans?it.trans.waitFor(i):i},Promise:Kt,debug:{get:function(){return $t},set:function(i){ie(i)}},derive:S,extend:q,props:x,override:V,Events:Yi,on:fn,liveQuery:go,extendObservabilitySet:Tr,getByKeyPath:L,setByKeyPath:J,delByKeyPath:function(i,u){typeof u=="string"?J(i,u,void 0):"length"in u&&[].map.call(u,function(g){J(i,g,void 0)})},shallowClone:rt,deepClone:Mt,getObjectDiff:Cr,cmp:pe,asap:k,minKey:-1/0,addons:[],connections:Oa,errnames:I,dependencies:gi,cache:Ba,semVer:"4.3.0",version:"4.3.0".split(".").map(function(i){return parseInt(i)}).reduce(function(i,u,g){return i+u/Math.pow(10,2*g)})})),Ga.maxKey=di(Ga.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(fn(ci,function(i){Ta||(i=new CustomEvent(za,{detail:i}),Ta=!0,dispatchEvent(i),Ta=!1)}),addEventListener(za,function(i){i=i.detail,Ta||Es(i)}));var yi,Ta=!1,Tn=function(){};return typeof BroadcastChannel<"u"&&((Tn=function(){(yi=new BroadcastChannel(za)).onmessage=function(i){return i.data&&Es(i.data)}})(),typeof yi.unref=="function"&&yi.unref(),fn(ci,function(i){Ta||yi.postMessage(i)})),typeof addEventListener<"u"&&(addEventListener("pagehide",function(i){if(!ea.disableBfCache&&i.persisted){$t&&console.debug("Dexie: handling persisted pagehide"),yi?.close();for(var u=0,g=Oa;u<g.length;u++)g[u].close({disableAutoOpen:!1})}}),addEventListener("pageshow",function(i){!ea.disableBfCache&&i.persisted&&($t&&console.debug("Dexie: handling persisted pageshow"),Tn(),Es({all:new pn(-1/0,[[]])}))})),Kt.rejectionMapper=function(i,u){return!i||i instanceof $||i instanceof TypeError||i instanceof SyntaxError||!i.name||!at[i.name]?i:(u=new at[i.name](u||i.message,i),"stack"in i&&p(u,"stack",{get:function(){return this.inner.stack}}),u)},ie($t),s(ea,Object.freeze({__proto__:null,Dexie:ea,Entity:no,PropModification:li,RangeSet:pn,add:function(i){return new li({add:i})},cmp:pe,default:ea,liveQuery:go,mergeRanges:qa,rangesOverlap:oo,remove:function(i){return new li({remove:i})},replacePrefix:function(i,u){return new li({replacePrefix:[i,u]})}}),{default:ea}),ea})})(dexie_min$1)),dexie_min$1.exports}var dexie_minExports=requireDexie_min();const _Dexie=getDefaultExportFromCjs(dexie_minExports),DexieSymbol=Symbol.for("Dexie"),Dexie=globalThis[DexieSymbol]||(globalThis[DexieSymbol]=_Dexie);if(_Dexie.semVer!==Dexie.semVer)throw new Error(`Two different versions of Dexie loaded in the same app: ${_Dexie.semVer} and ${Dexie.semVer}`);const{liveQuery,mergeRanges,rangesOverlap,RangeSet,cmp,Entity,PropModification,replacePrefix,add,remove,DexieYProvider}=Dexie;class StudyDatabase extends Dexie{books;chapters;flashcards;questions;studySessions;studySchedules;progress;quizResults;constructor(){super("RealEstateStudyDB"),this.version(1).stores({books:"id, title, uploadedAt",chapters:"id, bookId, number, title, createdAt",flashcards:"id, chapterId, nextReviewDate, difficulty",questions:"id, chapterId, difficulty, topic",studySessions:"id, date, type",studySchedules:"id, examDate",progress:"id, bookId, lastStudied",quizResults:"id, date, chapterId, score"})}}const db=new StudyDatabase;async function getDueFlashcards(){const f=new Date;return await db.flashcards.where("nextReviewDate").belowOrEqual(f).toArray()}async function getProgressByBook(f){return await db.progress.where("bookId").equals(f).first()}async function updateFlashcardAfterReview(f,o){const m=await db.flashcards.get(f);if(!m)return;let{interval:s,repetition:y,easinessFactor:O}=m;O=Math.max(1.3,O+(.1-(5-o)*(.08+(5-o)*.02))),o<3?(y=0,s=1):(y+=1,y===1?s=1:y===2?s=6:s=Math.round(s*O));const N=new Date;N.setDate(N.getDate()+s),await db.flashcards.update(f,{interval:s,repetition:y,easinessFactor:O,nextReviewDate:N,lastReviewedDate:new Date})}async function getWeakTopics(f){const o=await db.quizResults.toArray(),m={};for(const y of o){const O=await db.chapters.get(y.chapterId);if(!O||O.bookId!==f)continue;const N=O.title;m[N]||(m[N]={correct:0,total:0}),m[N].correct+=y.correctAnswers,m[N].total+=y.totalQuestions}const s=[];for(const[y,O]of Object.entries(m))(O.total>0?O.correct/O.total:0)<.7&&s.push(y);return s}function PDFUpload({onUploadComplete:f}){const[o,m]=reactExports.useState(!1),[s,y]=reactExports.useState(!1),[O,N]=reactExports.useState({current:0,total:0,stage:""}),[G,q]=reactExports.useState(null),d=reactExports.useCallback(S=>{S.preventDefault(),m(!0)},[]),c=reactExports.useCallback(S=>{S.preventDefault(),m(!1)},[]),h=async S=>{if(!S.type.includes("pdf")&&!S.name.endsWith(".pdf")){q("Please upload a PDF file");return}y(!0),q(null);try{N({current:0,total:1,stage:"Extracting text from PDF..."});const C=await extractTextFromPDF(S),_={id:crypto.randomUUID(),title:S.name.replace(".pdf",""),totalPages:C.numPages,uploadedAt:new Date,chapters:[]};await db.books.add(_),N({current:0,total:C.chapters.length,stage:"Processing chapters with AI..."});for(let P=0;P<C.chapters.length;P++){const V=C.chapters[P];N({current:P+1,total:C.chapters.length,stage:`Processing chapter ${P+1}...`});const H={id:crypto.randomUUID(),bookId:_.id,number:V.number,title:V.title,content:V.content,createdAt:new Date,updatedAt:new Date},k=await processChapterWithAI(H);H.summary=k.summary,H.keyTerms=k.keyTerms,H.formulas=k.formulas,H.facts=k.facts,H.questions=k.questions,await db.chapters.add(H),_.chapters.push(H.id);for(const L of k.keyTerms){const J={id:crypto.randomUUID(),chapterId:H.id,front:L.term,back:L.definition,difficulty:"medium",interval:1,repetition:0,easinessFactor:2.5,nextReviewDate:new Date};await db.flashcards.add(J)}for(const L of k.facts.slice(0,3)){const J={id:crypto.randomUUID(),chapterId:H.id,front:"What is this important fact?",back:L,difficulty:"medium",interval:1,repetition:0,easinessFactor:2.5,nextReviewDate:new Date};await db.flashcards.add(J)}for(const L of k.questions)await db.questions.add(L)}await db.books.update(_.id,{chapters:_.chapters}),y(!1),f()}catch(C){q("Failed to process PDF. Please try again."),y(!1),console.error(C)}},x=reactExports.useCallback(S=>{S.preventDefault(),m(!1);const C=S.dataTransfer.files;C.length>0&&h(C[0])},[]),E=reactExports.useCallback(S=>{const C=S.target.files;C&&C.length>0&&h(C[0])},[]),p=async()=>{y(!0),q(null);try{const S=createMockPDFData(),C={id:crypto.randomUUID(),title:"Real Estate Principles - Sample",totalPages:S.numPages,uploadedAt:new Date,chapters:[]};await db.books.add(C),N({current:0,total:S.chapters.length,stage:"Processing sample chapters..."});for(let _=0;_<S.chapters.length;_++){const P=S.chapters[_];N({current:_+1,total:S.chapters.length,stage:`Processing chapter ${_+1}...`});const V={id:crypto.randomUUID(),bookId:C.id,number:P.number,title:P.title,content:P.content,createdAt:new Date,updatedAt:new Date},H=await processChapterWithAI(V);V.summary=H.summary,V.keyTerms=H.keyTerms,V.formulas=H.formulas,V.facts=H.facts,V.questions=H.questions,await db.chapters.add(V),C.chapters.push(V.id);for(const k of H.keyTerms){const L={id:crypto.randomUUID(),chapterId:V.id,front:k.term,back:k.definition,difficulty:"medium",interval:1,repetition:0,easinessFactor:2.5,nextReviewDate:new Date};await db.flashcards.add(L)}for(const k of H.facts.slice(0,3)){const L={id:crypto.randomUUID(),chapterId:V.id,front:"What is this important fact?",back:k,difficulty:"medium",interval:1,repetition:0,easinessFactor:2.5,nextReviewDate:new Date};await db.flashcards.add(L)}for(const k of H.questions)await db.questions.add(k)}await db.books.update(C.id,{chapters:C.chapters}),y(!1),f()}catch(S){q("Failed to load sample data."),y(!1),console.error(S)}};return s?jsxRuntimeExports.jsxs("div",{className:"max-w-md mx-auto text-center py-12",children:[jsxRuntimeExports.jsx("div",{className:"w-16 h-16 mx-auto mb-4 rounded-full bg-primary-100 dark:bg-primary-900/30 flex items-center justify-center",children:jsxRuntimeExports.jsx(LoaderCircle,{className:"w-8 h-8 text-primary-500 animate-spin"})}),jsxRuntimeExports.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:"Processing your PDF"}),jsxRuntimeExports.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:O.stage}),jsxRuntimeExports.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2",children:jsxRuntimeExports.jsx("div",{className:"bg-primary-500 h-2 rounded-full transition-all duration-300",style:{width:`${O.current/O.total*100}%`}})}),jsxRuntimeExports.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-2",children:[O.current," of ",O.total]})]}):jsxRuntimeExports.jsxs("div",{className:"space-y-6",children:[jsxRuntimeExports.jsxs("div",{className:"text-center mb-8",children:[jsxRuntimeExports.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:"Upload Your Study Material"}),jsxRuntimeExports.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Drag and drop your PDF textbook to get started"})]}),jsxRuntimeExports.jsxs("div",{onDragOver:d,onDragLeave:c,onDrop:x,className:`relative border-2 border-dashed rounded-xl p-8 text-center transition-colors ${o?"border-primary-500 bg-primary-50 dark:bg-primary-900/20":"border-gray-300 dark:border-gray-600 hover:border-gray-400 dark:hover:border-gray-500"}`,children:[jsxRuntimeExports.jsx("input",{type:"file",accept:".pdf",onChange:E,className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer"}),jsxRuntimeExports.jsx("div",{className:"w-16 h-16 mx-auto mb-4 rounded-full bg-gray-100 dark:bg-gray-700 flex items-center justify-center",children:jsxRuntimeExports.jsx(Upload,{className:"w-8 h-8 text-gray-400"})}),jsxRuntimeExports.jsx("p",{className:"text-lg font-medium text-gray-900 dark:text-white mb-1",children:"Drop your PDF here"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"or click to browse"}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-400 dark:text-gray-500 mt-2",children:"Supports PDF files up to 50MB"})]}),G&&jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 p-4 bg-red-50 dark:bg-red-900/20 text-red-600 dark:text-red-400 rounded-lg",children:[jsxRuntimeExports.jsx(X,{className:"w-5 h-5"}),jsxRuntimeExports.jsx("span",{children:G})]}),jsxRuntimeExports.jsxs("div",{className:"text-center",children:[jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-4",children:"Don't have a PDF? Try our sample data."}),jsxRuntimeExports.jsxs("button",{onClick:p,className:"inline-flex items-center gap-2 px-4 py-2 bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors",children:[jsxRuntimeExports.jsx(FileText,{className:"w-4 h-4"}),"Load Sample Book"]})]}),jsxRuntimeExports.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4 mt-8",children:[{icon:"",title:"AI Summaries",desc:"Executive summaries for each chapter"},{icon:"",title:"Smart Flashcards",desc:"Spaced repetition for better retention"},{icon:"",title:"Practice Quizzes",desc:"Test your knowledge with MCQs"}].map((S,C)=>jsxRuntimeExports.jsxs("div",{className:"p-4 bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700",children:[jsxRuntimeExports.jsx("div",{className:"text-2xl mb-2",children:S.icon}),jsxRuntimeExports.jsx("h3",{className:"font-medium text-gray-900 dark:text-white",children:S.title}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:S.desc})]},C))})]})}function ChapterList({book:f,chapters:o}){const[m,s]=reactExports.useState(null),y=O=>{s(m===O?null:O)};return jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsx("div",{className:"flex items-center justify-between mb-6",children:jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:f.title}),jsxRuntimeExports.jsxs("p",{className:"text-gray-600 dark:text-gray-400",children:[o.length," chapters  ",f.totalPages," pages"]})]})}),jsxRuntimeExports.jsx("div",{className:"space-y-3",children:o.map(O=>jsxRuntimeExports.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 overflow-hidden",children:[jsxRuntimeExports.jsxs("button",{onClick:()=>y(O.id),className:"w-full flex items-center justify-between p-4 hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsx("div",{className:"w-10 h-10 rounded-lg bg-primary-100 dark:bg-primary-900/30 flex items-center justify-center",children:jsxRuntimeExports.jsx(BookOpen,{className:"w-5 h-5 text-primary-600 dark:text-primary-400"})}),jsxRuntimeExports.jsxs("div",{className:"text-left",children:[jsxRuntimeExports.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:["Chapter ",O.number]}),jsxRuntimeExports.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white",children:O.title})]})]}),m===O.id?jsxRuntimeExports.jsx(ChevronUp,{className:"w-5 h-5 text-gray-400"}):jsxRuntimeExports.jsx(ChevronDown,{className:"w-5 h-5 text-gray-400"})]}),m===O.id&&jsxRuntimeExports.jsxs("div",{className:"border-t border-gray-200 dark:border-gray-700 p-4 space-y-6",children:[O.summary&&jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("h4",{className:"flex items-center gap-2 font-medium text-gray-900 dark:text-white mb-2",children:[jsxRuntimeExports.jsx(BookOpen,{className:"w-4 h-4 text-primary-500"}),"Executive Summary"]}),jsxRuntimeExports.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-sm leading-relaxed",children:O.summary})]}),O.keyTerms&&O.keyTerms.length>0&&jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("h4",{className:"flex items-center gap-2 font-medium text-gray-900 dark:text-white mb-3",children:[jsxRuntimeExports.jsx(KeyRound,{className:"w-4 h-4 text-primary-500"}),"Key Terms (",O.keyTerms.length,")"]}),jsxRuntimeExports.jsx("div",{className:"grid gap-2",children:O.keyTerms.map((N,G)=>jsxRuntimeExports.jsxs("div",{className:"p-3 bg-gray-50 dark:bg-gray-700/50 rounded-lg",children:[jsxRuntimeExports.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:N.term}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:N.definition})]},G))})]}),O.formulas&&O.formulas.length>0&&jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("h4",{className:"flex items-center gap-2 font-medium text-gray-900 dark:text-white mb-3",children:[jsxRuntimeExports.jsx(Calculator,{className:"w-4 h-4 text-primary-500"}),"Important Formulas"]}),jsxRuntimeExports.jsx("div",{className:"space-y-3",children:O.formulas.map((N,G)=>jsxRuntimeExports.jsxs("div",{className:"p-3 bg-primary-50 dark:bg-primary-900/20 rounded-lg border border-primary-100 dark:border-primary-800",children:[jsxRuntimeExports.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:N.name}),jsxRuntimeExports.jsx("div",{className:"my-2 p-2 bg-white dark:bg-gray-800 rounded font-mono text-sm text-primary-600 dark:text-primary-400",children:N.formula}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:N.explanation}),N.example&&jsxRuntimeExports.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-500 mt-1",children:["Example: ",N.example]})]},G))})]}),O.facts&&O.facts.length>0&&jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("h4",{className:"flex items-center gap-2 font-medium text-gray-900 dark:text-white mb-3",children:[jsxRuntimeExports.jsx(Lightbulb,{className:"w-4 h-4 text-primary-500"}),"Must-Know Facts"]}),jsxRuntimeExports.jsx("div",{className:"space-y-2",children:O.facts.map((N,G)=>jsxRuntimeExports.jsxs("div",{className:"flex items-start gap-2 p-2 bg-yellow-50 dark:bg-yellow-900/20 rounded-lg",children:[jsxRuntimeExports.jsx(CircleCheckBig,{className:"w-4 h-4 text-yellow-600 dark:text-yellow-400 mt-0.5 flex-shrink-0"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-700 dark:text-gray-300",children:N})]},G))})]}),O.questions&&O.questions.length>0&&jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("h4",{className:"flex items-center gap-2 font-medium text-gray-900 dark:text-white mb-3",children:[jsxRuntimeExports.jsx(CircleQuestionMark,{className:"w-4 h-4 text-primary-500"}),"Practice Questions (",O.questions.length,")"]}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Take the quiz to test your knowledge of this chapter."})]})]})]},O.id))})]})}function FlashcardView(){const[f,o]=reactExports.useState([]),[m,s]=reactExports.useState(0),[y,O]=reactExports.useState(!1),[N,G]=reactExports.useState(!0),[q,d]=reactExports.useState(null),[c,h]=reactExports.useState(null),x=50;reactExports.useEffect(()=>{E()},[]);const E=async()=>{G(!0);const L=await getDueFlashcards();o(L),s(0),O(!1),G(!1)},p=f[m],S=()=>{O(!y)},C=async L=>{p&&(await updateFlashcardAfterReview(p.id,L),m<f.length-1?(s(m+1),O(!1)):await E())},_=()=>{m>0&&(s(m-1),O(!1))},P=()=>{m<f.length-1&&(s(m+1),O(!1))},V=L=>{h(null),d(L.targetTouches[0].clientX)},H=L=>{h(L.targetTouches[0].clientX)},k=()=>{if(!q||!c)return;const L=q-c,J=L>x,rt=L<-x;J?C(3):rt&&C(5)};return N?jsxRuntimeExports.jsx("div",{className:"flex items-center justify-center h-64",children:jsxRuntimeExports.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-500"})}):f.length===0?jsxRuntimeExports.jsxs("div",{className:"text-center py-12",children:[jsxRuntimeExports.jsx("div",{className:"w-16 h-16 mx-auto mb-4 rounded-full bg-green-100 dark:bg-green-900/30 flex items-center justify-center",children:jsxRuntimeExports.jsx(Brain,{className:"w-8 h-8 text-green-600 dark:text-green-400"})}),jsxRuntimeExports.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:"All Caught Up!"}),jsxRuntimeExports.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:"You have no flashcards due for review."}),jsxRuntimeExports.jsxs("button",{onClick:E,className:"inline-flex items-center gap-2 px-4 py-2 bg-primary-500 text-white rounded-lg hover:bg-primary-600 transition-colors",children:[jsxRuntimeExports.jsx(RotateCcw,{className:"w-4 h-4"}),"Refresh"]})]}):jsxRuntimeExports.jsxs("div",{className:"max-w-lg mx-auto",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mb-6",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Flashcards"}),jsxRuntimeExports.jsxs("p",{className:"text-gray-600 dark:text-gray-400",children:[m+1," of ",f.length," due today"]})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx("button",{onClick:_,disabled:m===0,className:"p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 disabled:opacity-50",children:jsxRuntimeExports.jsx(ChevronLeft,{className:"w-5 h-5"})}),jsxRuntimeExports.jsx("button",{onClick:P,disabled:m===f.length-1,className:"p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 disabled:opacity-50",children:jsxRuntimeExports.jsx(ChevronRight,{className:"w-5 h-5"})})]})]}),jsxRuntimeExports.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2 mb-6",children:jsxRuntimeExports.jsx("div",{className:"bg-primary-500 h-2 rounded-full transition-all duration-300",style:{width:`${(m+1)/f.length*100}%`}})}),jsxRuntimeExports.jsx("div",{className:"relative h-80 cursor-pointer perspective-1000",onClick:S,onTouchStart:V,onTouchMove:H,onTouchEnd:k,children:jsxRuntimeExports.jsxs("div",{className:`relative w-full h-full transition-transform duration-500 transform-style-3d ${y?"rotate-y-180":""}`,style:{transformStyle:"preserve-3d",transform:y?"rotateY(180deg)":"rotateY(0deg)"},children:[jsxRuntimeExports.jsxs("div",{className:"absolute inset-0 backface-hidden bg-white dark:bg-gray-800 rounded-xl shadow-lg border border-gray-200 dark:border-gray-700 p-8 flex flex-col items-center justify-center text-center",style:{backfaceVisibility:"hidden"},children:[jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-4",children:"Tap to flip"}),jsxRuntimeExports.jsx("p",{className:"text-xl font-medium text-gray-900 dark:text-white",children:p.front})]}),jsxRuntimeExports.jsxs("div",{className:"absolute inset-0 backface-hidden bg-primary-50 dark:bg-primary-900/20 rounded-xl shadow-lg border border-primary-100 dark:border-primary-800 p-8 flex flex-col items-center justify-center text-center",style:{backfaceVisibility:"hidden",transform:"rotateY(180deg)"},children:[jsxRuntimeExports.jsx("p",{className:"text-sm text-primary-600 dark:text-primary-400 mb-4",children:"Answer"}),jsxRuntimeExports.jsx("p",{className:"text-xl font-medium text-gray-900 dark:text-white",children:p.back})]})]})}),jsxRuntimeExports.jsxs("div",{className:"mt-6 grid grid-cols-4 gap-2",children:[jsxRuntimeExports.jsxs("button",{onClick:()=>C(1),className:"flex flex-col items-center gap-1 p-3 bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-400 rounded-lg hover:bg-red-200 dark:hover:bg-red-900/50 transition-colors",children:[jsxRuntimeExports.jsx(ThumbsDown,{className:"w-5 h-5"}),jsxRuntimeExports.jsx("span",{className:"text-xs",children:"Again"})]}),jsxRuntimeExports.jsxs("button",{onClick:()=>C(3),className:"flex flex-col items-center gap-1 p-3 bg-orange-100 dark:bg-orange-900/30 text-orange-700 dark:text-orange-400 rounded-lg hover:bg-orange-200 dark:hover:bg-orange-900/50 transition-colors",children:[jsxRuntimeExports.jsx(Ellipsis,{className:"w-5 h-5"}),jsxRuntimeExports.jsx("span",{className:"text-xs",children:"Hard"})]}),jsxRuntimeExports.jsxs("button",{onClick:()=>C(4),className:"flex flex-col items-center gap-1 p-3 bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-400 rounded-lg hover:bg-blue-200 dark:hover:bg-blue-900/50 transition-colors",children:[jsxRuntimeExports.jsx(ThumbsUp,{className:"w-5 h-5"}),jsxRuntimeExports.jsx("span",{className:"text-xs",children:"Good"})]}),jsxRuntimeExports.jsxs("button",{onClick:()=>C(5),className:"flex flex-col items-center gap-1 p-3 bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400 rounded-lg hover:bg-green-200 dark:hover:bg-green-900/50 transition-colors",children:[jsxRuntimeExports.jsx(CircleCheckBig,{className:"w-5 h-5"}),jsxRuntimeExports.jsx("span",{className:"text-xs",children:"Easy"})]})]}),jsxRuntimeExports.jsx("p",{className:"text-center text-sm text-gray-500 dark:text-gray-400 mt-4",children:"Swipe right for Easy, left for Hard  Tap card to flip"})]})}function QuizView({chapters:f}){const[o,m]=reactExports.useState("all"),[s,y]=reactExports.useState([]),[O,N]=reactExports.useState(!1),[G,q]=reactExports.useState(0),[d,c]=reactExports.useState(null),[h,x]=reactExports.useState([]),[E,p]=reactExports.useState(!1),[S,C]=reactExports.useState(0),[_,P]=reactExports.useState(0),[V,H]=reactExports.useState([]);reactExports.useEffect(()=>{k()},[]);const k=async()=>{const lt=await db.quizResults.orderBy("date").reverse().limit(10).toArray();H(lt)},L=async()=>{let lt=[];if(o==="all"?lt=(await db.questions.toArray()).sort(()=>Math.random()-.5).slice(0,10):lt=await db.questions.where("chapterId").equals(o).toArray(),lt.length===0){alert("No questions available for the selected chapter(s).");return}y(lt),N(!0),q(0),c(null),x([]),p(!1),C(Date.now()),P(Date.now())},J=lt=>{d===null&&c(lt)},rt=async()=>{const lt=s[G],yt=Math.floor((Date.now()-_)/1e3),Dt=d===lt.correctAnswer,Mt=[...h,{questionId:lt.id,selectedAnswer:d,correct:Dt,timeSpent:yt}];if(x(Mt),G<s.length-1)q(G+1),c(null),P(Date.now());else{const qt=Math.floor((Date.now()-S)/1e3),Yt=Mt.filter(D=>D.correct).length,nt=Math.round(Yt/s.length*100),W={id:crypto.randomUUID(),date:new Date,chapterId:o==="all"?"mixed":o,score:nt,totalQuestions:s.length,correctAnswers:Yt,timeSpent:qt,answers:Mt};await db.quizResults.add(W),p(!0),k()}},et=()=>{N(!1),p(!1),y([]),q(0),c(null),x([])};if(E){const lt=h.filter(Dt=>Dt.correct).length,yt=Math.round(lt/s.length*100);return jsxRuntimeExports.jsxs("div",{className:"max-w-lg mx-auto text-center",children:[jsxRuntimeExports.jsxs("div",{className:"mb-6",children:[jsxRuntimeExports.jsx("div",{className:`w-24 h-24 mx-auto rounded-full flex items-center justify-center mb-4 ${yt>=80?"bg-green-100 dark:bg-green-900/30":yt>=60?"bg-yellow-100 dark:bg-yellow-900/30":"bg-red-100 dark:bg-red-900/30"}`,children:jsxRuntimeExports.jsx(Trophy,{className:`w-12 h-12 ${yt>=80?"text-green-600 dark:text-green-400":yt>=60?"text-yellow-600 dark:text-yellow-400":"text-red-600 dark:text-red-400"}`})}),jsxRuntimeExports.jsxs("h2",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-2",children:[yt,"%"]}),jsxRuntimeExports.jsxs("p",{className:"text-gray-600 dark:text-gray-400",children:["You got ",lt," out of ",s.length," correct"]})]}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-6",children:[jsxRuntimeExports.jsxs("div",{className:"p-4 bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700",children:[jsxRuntimeExports.jsx(Clock,{className:"w-5 h-5 text-gray-400 mx-auto mb-2"}),jsxRuntimeExports.jsxs("p",{className:"text-2xl font-semibold text-gray-900 dark:text-white",children:[Math.floor(h.reduce((Dt,Mt)=>Dt+Mt.timeSpent,0)/60),":",String(h.reduce((Dt,Mt)=>Dt+Mt.timeSpent,0)%60).padStart(2,"0")]}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Time"})]}),jsxRuntimeExports.jsxs("div",{className:"p-4 bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700",children:[jsxRuntimeExports.jsx(CircleCheckBig,{className:"w-5 h-5 text-gray-400 mx-auto mb-2"}),jsxRuntimeExports.jsx("p",{className:"text-2xl font-semibold text-gray-900 dark:text-white",children:lt}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Correct"})]})]}),jsxRuntimeExports.jsx("div",{className:"space-y-3 mb-6",children:s.map((Dt,Mt)=>{const qt=h[Mt];return jsxRuntimeExports.jsxs("div",{className:`p-3 rounded-lg flex items-center gap-3 ${qt.correct?"bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800":"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800"}`,children:[qt.correct?jsxRuntimeExports.jsx(CircleCheckBig,{className:"w-5 h-5 text-green-600 dark:text-green-400 flex-shrink-0"}):jsxRuntimeExports.jsx(CircleX,{className:"w-5 h-5 text-red-600 dark:text-red-400 flex-shrink-0"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-700 dark:text-gray-300 text-left truncate",children:Dt.question})]},Dt.id)})}),jsxRuntimeExports.jsxs("button",{onClick:et,className:"inline-flex items-center gap-2 px-6 py-3 bg-primary-500 text-white rounded-lg hover:bg-primary-600 transition-colors",children:[jsxRuntimeExports.jsx(RotateCcw,{className:"w-4 h-4"}),"Take Another Quiz"]})]})}if(O&&s.length>0){const lt=s[G];return jsxRuntimeExports.jsxs("div",{className:"max-w-2xl mx-auto",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mb-4",children:[jsxRuntimeExports.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Question ",G+1," of ",s.length]}),jsxRuntimeExports.jsx("button",{onClick:et,className:"text-sm text-gray-500 hover:text-gray-700 dark:hover:text-gray-300",children:"Quit"})]}),jsxRuntimeExports.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2 mb-6",children:jsxRuntimeExports.jsx("div",{className:"bg-primary-500 h-2 rounded-full transition-all duration-300",style:{width:`${(G+1)/s.length*100}%`}})}),jsxRuntimeExports.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-6 mb-6",children:[jsxRuntimeExports.jsx("p",{className:"text-lg font-medium text-gray-900 dark:text-white mb-6",children:lt.question}),jsxRuntimeExports.jsx("div",{className:"space-y-3",children:lt.options.map((yt,Dt)=>jsxRuntimeExports.jsx("button",{onClick:()=>J(Dt),disabled:d!==null,className:`w-full p-4 text-left rounded-lg border-2 transition-all ${d===null?"border-gray-200 dark:border-gray-700 hover:border-primary-300 dark:hover:border-primary-700":d===Dt?Dt===lt.correctAnswer?"border-green-500 bg-green-50 dark:bg-green-900/20":"border-red-500 bg-red-50 dark:bg-red-900/20":Dt===lt.correctAnswer?"border-green-500 bg-green-50 dark:bg-green-900/20":"border-gray-200 dark:border-gray-700 opacity-50"}`,children:jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsx("span",{className:"w-8 h-8 rounded-full bg-gray-100 dark:bg-gray-700 flex items-center justify-center text-sm font-medium",children:String.fromCharCode(65+Dt)}),jsxRuntimeExports.jsx("span",{className:"text-gray-900 dark:text-white",children:yt})]})},Dt))}),d!==null&&jsxRuntimeExports.jsxs("div",{className:`mt-4 p-4 rounded-lg ${d===lt.correctAnswer?"bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800":"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800"}`,children:[jsxRuntimeExports.jsx("p",{className:`font-medium ${d===lt.correctAnswer?"text-green-800 dark:text-green-400":"text-red-800 dark:text-red-400"}`,children:d===lt.correctAnswer?"Correct!":"Incorrect"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:lt.explanation})]})]}),jsxRuntimeExports.jsx("button",{onClick:rt,disabled:d===null,className:"w-full py-3 bg-primary-500 text-white rounded-lg hover:bg-primary-600 disabled:opacity-50 disabled:cursor-not-allowed transition-colors flex items-center justify-center gap-2",children:G<s.length-1?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:["Next Question",jsxRuntimeExports.jsx(ChevronRight,{className:"w-4 h-4"})]}):"Finish Quiz"})]})}return jsxRuntimeExports.jsxs("div",{className:"max-w-lg mx-auto",children:[jsxRuntimeExports.jsxs("div",{className:"text-center mb-8",children:[jsxRuntimeExports.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:"Practice Quiz"}),jsxRuntimeExports.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Test your knowledge with multiple choice questions"})]}),jsxRuntimeExports.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-6 mb-6",children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Select Chapter"}),jsxRuntimeExports.jsxs("select",{value:o,onChange:lt=>m(lt.target.value),className:"w-full border border-gray-300 dark:border-gray-600 rounded-lg px-4 py-2 bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:[jsxRuntimeExports.jsx("option",{value:"all",children:"All Chapters (Mixed)"}),f.map(lt=>jsxRuntimeExports.jsxs("option",{value:lt.id,children:["Chapter ",lt.number,": ",lt.title]},lt.id))]})]}),jsxRuntimeExports.jsxs("button",{onClick:L,className:"w-full py-4 bg-primary-500 text-white rounded-xl hover:bg-primary-600 transition-colors flex items-center justify-center gap-2 text-lg font-medium",children:[jsxRuntimeExports.jsx(Play,{className:"w-5 h-5"}),"Start Quiz"]}),V.length>0&&jsxRuntimeExports.jsxs("div",{className:"mt-8",children:[jsxRuntimeExports.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Recent Results"}),jsxRuntimeExports.jsx("div",{className:"space-y-2",children:V.map(lt=>jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between p-3 bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:new Date(lt.date).toLocaleDateString()}),jsxRuntimeExports.jsxs("p",{className:"font-medium text-gray-900 dark:text-white",children:[lt.correctAnswers,"/",lt.totalQuestions," correct"]})]}),jsxRuntimeExports.jsxs("div",{className:`text-lg font-bold ${lt.score>=80?"text-green-600 dark:text-green-400":lt.score>=60?"text-yellow-600 dark:text-yellow-400":"text-red-600 dark:text-red-400"}`,children:[lt.score,"%"]})]},lt.id))})]})]})}const millisecondsInWeek=6048e5,millisecondsInDay=864e5,constructFromSymbol=Symbol.for("constructDateFrom");function constructFrom(f,o){return typeof f=="function"?f(o):f&&typeof f=="object"&&constructFromSymbol in f?f[constructFromSymbol](o):f instanceof Date?new f.constructor(o):new Date(o)}function toDate(f,o){return constructFrom(o||f,f)}function addDays(f,o,m){const s=toDate(f,m?.in);return isNaN(o)?constructFrom(f,NaN):(o&&s.setDate(s.getDate()+o),s)}let defaultOptions={};function getDefaultOptions(){return defaultOptions}function startOfWeek(f,o){const m=getDefaultOptions(),s=o?.weekStartsOn??o?.locale?.options?.weekStartsOn??m.weekStartsOn??m.locale?.options?.weekStartsOn??0,y=toDate(f,o?.in),O=y.getDay(),N=(O<s?7:0)+O-s;return y.setDate(y.getDate()-N),y.setHours(0,0,0,0),y}function startOfISOWeek(f,o){return startOfWeek(f,{...o,weekStartsOn:1})}function getISOWeekYear(f,o){const m=toDate(f,o?.in),s=m.getFullYear(),y=constructFrom(m,0);y.setFullYear(s+1,0,4),y.setHours(0,0,0,0);const O=startOfISOWeek(y),N=constructFrom(m,0);N.setFullYear(s,0,4),N.setHours(0,0,0,0);const G=startOfISOWeek(N);return m.getTime()>=O.getTime()?s+1:m.getTime()>=G.getTime()?s:s-1}function getTimezoneOffsetInMilliseconds(f){const o=toDate(f),m=new Date(Date.UTC(o.getFullYear(),o.getMonth(),o.getDate(),o.getHours(),o.getMinutes(),o.getSeconds(),o.getMilliseconds()));return m.setUTCFullYear(o.getFullYear()),+f-+m}function normalizeDates(f,...o){const m=constructFrom.bind(null,o.find(s=>typeof s=="object"));return o.map(m)}function startOfDay(f,o){const m=toDate(f,o?.in);return m.setHours(0,0,0,0),m}function differenceInCalendarDays(f,o,m){const[s,y]=normalizeDates(m?.in,f,o),O=startOfDay(s),N=startOfDay(y),G=+O-getTimezoneOffsetInMilliseconds(O),q=+N-getTimezoneOffsetInMilliseconds(N);return Math.round((G-q)/millisecondsInDay)}function startOfISOWeekYear(f,o){const m=getISOWeekYear(f,o),s=constructFrom(f,0);return s.setFullYear(m,0,4),s.setHours(0,0,0,0),startOfISOWeek(s)}function isSameDay(f,o,m){const[s,y]=normalizeDates(m?.in,f,o);return+startOfDay(s)==+startOfDay(y)}function isDate(f){return f instanceof Date||typeof f=="object"&&Object.prototype.toString.call(f)==="[object Date]"}function isValid(f){return!(!isDate(f)&&typeof f!="number"||isNaN(+toDate(f)))}function startOfYear(f,o){const m=toDate(f,o?.in);return m.setFullYear(m.getFullYear(),0,1),m.setHours(0,0,0,0),m}const formatDistanceLocale={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},formatDistance=(f,o,m)=>{let s;const y=formatDistanceLocale[f];return typeof y=="string"?s=y:o===1?s=y.one:s=y.other.replace("{{count}}",o.toString()),m?.addSuffix?m.comparison&&m.comparison>0?"in "+s:s+" ago":s};function buildFormatLongFn(f){return(o={})=>{const m=o.width?String(o.width):f.defaultWidth;return f.formats[m]||f.formats[f.defaultWidth]}}const dateFormats={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},timeFormats={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},dateTimeFormats={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},formatLong={date:buildFormatLongFn({formats:dateFormats,defaultWidth:"full"}),time:buildFormatLongFn({formats:timeFormats,defaultWidth:"full"}),dateTime:buildFormatLongFn({formats:dateTimeFormats,defaultWidth:"full"})},formatRelativeLocale={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},formatRelative=(f,o,m,s)=>formatRelativeLocale[f];function buildLocalizeFn(f){return(o,m)=>{const s=m?.context?String(m.context):"standalone";let y;if(s==="formatting"&&f.formattingValues){const N=f.defaultFormattingWidth||f.defaultWidth,G=m?.width?String(m.width):N;y=f.formattingValues[G]||f.formattingValues[N]}else{const N=f.defaultWidth,G=m?.width?String(m.width):f.defaultWidth;y=f.values[G]||f.values[N]}const O=f.argumentCallback?f.argumentCallback(o):o;return y[O]}}const eraValues={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},quarterValues={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},monthValues={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},dayValues={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},dayPeriodValues={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},formattingDayPeriodValues={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},ordinalNumber=(f,o)=>{const m=Number(f),s=m%100;if(s>20||s<10)switch(s%10){case 1:return m+"st";case 2:return m+"nd";case 3:return m+"rd"}return m+"th"},localize={ordinalNumber,era:buildLocalizeFn({values:eraValues,defaultWidth:"wide"}),quarter:buildLocalizeFn({values:quarterValues,defaultWidth:"wide",argumentCallback:f=>f-1}),month:buildLocalizeFn({values:monthValues,defaultWidth:"wide"}),day:buildLocalizeFn({values:dayValues,defaultWidth:"wide"}),dayPeriod:buildLocalizeFn({values:dayPeriodValues,defaultWidth:"wide",formattingValues:formattingDayPeriodValues,defaultFormattingWidth:"wide"})};function buildMatchFn(f){return(o,m={})=>{const s=m.width,y=s&&f.matchPatterns[s]||f.matchPatterns[f.defaultMatchWidth],O=o.match(y);if(!O)return null;const N=O[0],G=s&&f.parsePatterns[s]||f.parsePatterns[f.defaultParseWidth],q=Array.isArray(G)?findIndex(G,h=>h.test(N)):findKey(G,h=>h.test(N));let d;d=f.valueCallback?f.valueCallback(q):q,d=m.valueCallback?m.valueCallback(d):d;const c=o.slice(N.length);return{value:d,rest:c}}}function findKey(f,o){for(const m in f)if(Object.prototype.hasOwnProperty.call(f,m)&&o(f[m]))return m}function findIndex(f,o){for(let m=0;m<f.length;m++)if(o(f[m]))return m}function buildMatchPatternFn(f){return(o,m={})=>{const s=o.match(f.matchPattern);if(!s)return null;const y=s[0],O=o.match(f.parsePattern);if(!O)return null;let N=f.valueCallback?f.valueCallback(O[0]):O[0];N=m.valueCallback?m.valueCallback(N):N;const G=o.slice(y.length);return{value:N,rest:G}}}const matchOrdinalNumberPattern=/^(\d+)(th|st|nd|rd)?/i,parseOrdinalNumberPattern=/\d+/i,matchEraPatterns={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},parseEraPatterns={any:[/^b/i,/^(a|c)/i]},matchQuarterPatterns={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},parseQuarterPatterns={any:[/1/i,/2/i,/3/i,/4/i]},matchMonthPatterns={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},parseMonthPatterns={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},matchDayPatterns={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},parseDayPatterns={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},matchDayPeriodPatterns={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},parseDayPeriodPatterns={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},match={ordinalNumber:buildMatchPatternFn({matchPattern:matchOrdinalNumberPattern,parsePattern:parseOrdinalNumberPattern,valueCallback:f=>parseInt(f,10)}),era:buildMatchFn({matchPatterns:matchEraPatterns,defaultMatchWidth:"wide",parsePatterns:parseEraPatterns,defaultParseWidth:"any"}),quarter:buildMatchFn({matchPatterns:matchQuarterPatterns,defaultMatchWidth:"wide",parsePatterns:parseQuarterPatterns,defaultParseWidth:"any",valueCallback:f=>f+1}),month:buildMatchFn({matchPatterns:matchMonthPatterns,defaultMatchWidth:"wide",parsePatterns:parseMonthPatterns,defaultParseWidth:"any"}),day:buildMatchFn({matchPatterns:matchDayPatterns,defaultMatchWidth:"wide",parsePatterns:parseDayPatterns,defaultParseWidth:"any"}),dayPeriod:buildMatchFn({matchPatterns:matchDayPeriodPatterns,defaultMatchWidth:"any",parsePatterns:parseDayPeriodPatterns,defaultParseWidth:"any"})},enUS={code:"en-US",formatDistance,formatLong,formatRelative,localize,match,options:{weekStartsOn:0,firstWeekContainsDate:1}};function getDayOfYear(f,o){const m=toDate(f,o?.in);return differenceInCalendarDays(m,startOfYear(m))+1}function getISOWeek(f,o){const m=toDate(f,o?.in),s=+startOfISOWeek(m)-+startOfISOWeekYear(m);return Math.round(s/millisecondsInWeek)+1}function getWeekYear(f,o){const m=toDate(f,o?.in),s=m.getFullYear(),y=getDefaultOptions(),O=o?.firstWeekContainsDate??o?.locale?.options?.firstWeekContainsDate??y.firstWeekContainsDate??y.locale?.options?.firstWeekContainsDate??1,N=constructFrom(o?.in||f,0);N.setFullYear(s+1,0,O),N.setHours(0,0,0,0);const G=startOfWeek(N,o),q=constructFrom(o?.in||f,0);q.setFullYear(s,0,O),q.setHours(0,0,0,0);const d=startOfWeek(q,o);return+m>=+G?s+1:+m>=+d?s:s-1}function startOfWeekYear(f,o){const m=getDefaultOptions(),s=o?.firstWeekContainsDate??o?.locale?.options?.firstWeekContainsDate??m.firstWeekContainsDate??m.locale?.options?.firstWeekContainsDate??1,y=getWeekYear(f,o),O=constructFrom(o?.in||f,0);return O.setFullYear(y,0,s),O.setHours(0,0,0,0),startOfWeek(O,o)}function getWeek(f,o){const m=toDate(f,o?.in),s=+startOfWeek(m,o)-+startOfWeekYear(m,o);return Math.round(s/millisecondsInWeek)+1}function addLeadingZeros(f,o){const m=f<0?"-":"",s=Math.abs(f).toString().padStart(o,"0");return m+s}const lightFormatters={y(f,o){const m=f.getFullYear(),s=m>0?m:1-m;return addLeadingZeros(o==="yy"?s%100:s,o.length)},M(f,o){const m=f.getMonth();return o==="M"?String(m+1):addLeadingZeros(m+1,2)},d(f,o){return addLeadingZeros(f.getDate(),o.length)},a(f,o){const m=f.getHours()/12>=1?"pm":"am";switch(o){case"a":case"aa":return m.toUpperCase();case"aaa":return m;case"aaaaa":return m[0];default:return m==="am"?"a.m.":"p.m."}},h(f,o){return addLeadingZeros(f.getHours()%12||12,o.length)},H(f,o){return addLeadingZeros(f.getHours(),o.length)},m(f,o){return addLeadingZeros(f.getMinutes(),o.length)},s(f,o){return addLeadingZeros(f.getSeconds(),o.length)},S(f,o){const m=o.length,s=f.getMilliseconds(),y=Math.trunc(s*Math.pow(10,m-3));return addLeadingZeros(y,o.length)}},dayPeriodEnum={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},formatters={G:function(f,o,m){const s=f.getFullYear()>0?1:0;switch(o){case"G":case"GG":case"GGG":return m.era(s,{width:"abbreviated"});case"GGGGG":return m.era(s,{width:"narrow"});default:return m.era(s,{width:"wide"})}},y:function(f,o,m){if(o==="yo"){const s=f.getFullYear(),y=s>0?s:1-s;return m.ordinalNumber(y,{unit:"year"})}return lightFormatters.y(f,o)},Y:function(f,o,m,s){const y=getWeekYear(f,s),O=y>0?y:1-y;if(o==="YY"){const N=O%100;return addLeadingZeros(N,2)}return o==="Yo"?m.ordinalNumber(O,{unit:"year"}):addLeadingZeros(O,o.length)},R:function(f,o){const m=getISOWeekYear(f);return addLeadingZeros(m,o.length)},u:function(f,o){const m=f.getFullYear();return addLeadingZeros(m,o.length)},Q:function(f,o,m){const s=Math.ceil((f.getMonth()+1)/3);switch(o){case"Q":return String(s);case"QQ":return addLeadingZeros(s,2);case"Qo":return m.ordinalNumber(s,{unit:"quarter"});case"QQQ":return m.quarter(s,{width:"abbreviated",context:"formatting"});case"QQQQQ":return m.quarter(s,{width:"narrow",context:"formatting"});default:return m.quarter(s,{width:"wide",context:"formatting"})}},q:function(f,o,m){const s=Math.ceil((f.getMonth()+1)/3);switch(o){case"q":return String(s);case"qq":return addLeadingZeros(s,2);case"qo":return m.ordinalNumber(s,{unit:"quarter"});case"qqq":return m.quarter(s,{width:"abbreviated",context:"standalone"});case"qqqqq":return m.quarter(s,{width:"narrow",context:"standalone"});default:return m.quarter(s,{width:"wide",context:"standalone"})}},M:function(f,o,m){const s=f.getMonth();switch(o){case"M":case"MM":return lightFormatters.M(f,o);case"Mo":return m.ordinalNumber(s+1,{unit:"month"});case"MMM":return m.month(s,{width:"abbreviated",context:"formatting"});case"MMMMM":return m.month(s,{width:"narrow",context:"formatting"});default:return m.month(s,{width:"wide",context:"formatting"})}},L:function(f,o,m){const s=f.getMonth();switch(o){case"L":return String(s+1);case"LL":return addLeadingZeros(s+1,2);case"Lo":return m.ordinalNumber(s+1,{unit:"month"});case"LLL":return m.month(s,{width:"abbreviated",context:"standalone"});case"LLLLL":return m.month(s,{width:"narrow",context:"standalone"});default:return m.month(s,{width:"wide",context:"standalone"})}},w:function(f,o,m,s){const y=getWeek(f,s);return o==="wo"?m.ordinalNumber(y,{unit:"week"}):addLeadingZeros(y,o.length)},I:function(f,o,m){const s=getISOWeek(f);return o==="Io"?m.ordinalNumber(s,{unit:"week"}):addLeadingZeros(s,o.length)},d:function(f,o,m){return o==="do"?m.ordinalNumber(f.getDate(),{unit:"date"}):lightFormatters.d(f,o)},D:function(f,o,m){const s=getDayOfYear(f);return o==="Do"?m.ordinalNumber(s,{unit:"dayOfYear"}):addLeadingZeros(s,o.length)},E:function(f,o,m){const s=f.getDay();switch(o){case"E":case"EE":case"EEE":return m.day(s,{width:"abbreviated",context:"formatting"});case"EEEEE":return m.day(s,{width:"narrow",context:"formatting"});case"EEEEEE":return m.day(s,{width:"short",context:"formatting"});default:return m.day(s,{width:"wide",context:"formatting"})}},e:function(f,o,m,s){const y=f.getDay(),O=(y-s.weekStartsOn+8)%7||7;switch(o){case"e":return String(O);case"ee":return addLeadingZeros(O,2);case"eo":return m.ordinalNumber(O,{unit:"day"});case"eee":return m.day(y,{width:"abbreviated",context:"formatting"});case"eeeee":return m.day(y,{width:"narrow",context:"formatting"});case"eeeeee":return m.day(y,{width:"short",context:"formatting"});default:return m.day(y,{width:"wide",context:"formatting"})}},c:function(f,o,m,s){const y=f.getDay(),O=(y-s.weekStartsOn+8)%7||7;switch(o){case"c":return String(O);case"cc":return addLeadingZeros(O,o.length);case"co":return m.ordinalNumber(O,{unit:"day"});case"ccc":return m.day(y,{width:"abbreviated",context:"standalone"});case"ccccc":return m.day(y,{width:"narrow",context:"standalone"});case"cccccc":return m.day(y,{width:"short",context:"standalone"});default:return m.day(y,{width:"wide",context:"standalone"})}},i:function(f,o,m){const s=f.getDay(),y=s===0?7:s;switch(o){case"i":return String(y);case"ii":return addLeadingZeros(y,o.length);case"io":return m.ordinalNumber(y,{unit:"day"});case"iii":return m.day(s,{width:"abbreviated",context:"formatting"});case"iiiii":return m.day(s,{width:"narrow",context:"formatting"});case"iiiiii":return m.day(s,{width:"short",context:"formatting"});default:return m.day(s,{width:"wide",context:"formatting"})}},a:function(f,o,m){const y=f.getHours()/12>=1?"pm":"am";switch(o){case"a":case"aa":return m.dayPeriod(y,{width:"abbreviated",context:"formatting"});case"aaa":return m.dayPeriod(y,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return m.dayPeriod(y,{width:"narrow",context:"formatting"});default:return m.dayPeriod(y,{width:"wide",context:"formatting"})}},b:function(f,o,m){const s=f.getHours();let y;switch(s===12?y=dayPeriodEnum.noon:s===0?y=dayPeriodEnum.midnight:y=s/12>=1?"pm":"am",o){case"b":case"bb":return m.dayPeriod(y,{width:"abbreviated",context:"formatting"});case"bbb":return m.dayPeriod(y,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return m.dayPeriod(y,{width:"narrow",context:"formatting"});default:return m.dayPeriod(y,{width:"wide",context:"formatting"})}},B:function(f,o,m){const s=f.getHours();let y;switch(s>=17?y=dayPeriodEnum.evening:s>=12?y=dayPeriodEnum.afternoon:s>=4?y=dayPeriodEnum.morning:y=dayPeriodEnum.night,o){case"B":case"BB":case"BBB":return m.dayPeriod(y,{width:"abbreviated",context:"formatting"});case"BBBBB":return m.dayPeriod(y,{width:"narrow",context:"formatting"});default:return m.dayPeriod(y,{width:"wide",context:"formatting"})}},h:function(f,o,m){if(o==="ho"){let s=f.getHours()%12;return s===0&&(s=12),m.ordinalNumber(s,{unit:"hour"})}return lightFormatters.h(f,o)},H:function(f,o,m){return o==="Ho"?m.ordinalNumber(f.getHours(),{unit:"hour"}):lightFormatters.H(f,o)},K:function(f,o,m){const s=f.getHours()%12;return o==="Ko"?m.ordinalNumber(s,{unit:"hour"}):addLeadingZeros(s,o.length)},k:function(f,o,m){let s=f.getHours();return s===0&&(s=24),o==="ko"?m.ordinalNumber(s,{unit:"hour"}):addLeadingZeros(s,o.length)},m:function(f,o,m){return o==="mo"?m.ordinalNumber(f.getMinutes(),{unit:"minute"}):lightFormatters.m(f,o)},s:function(f,o,m){return o==="so"?m.ordinalNumber(f.getSeconds(),{unit:"second"}):lightFormatters.s(f,o)},S:function(f,o){return lightFormatters.S(f,o)},X:function(f,o,m){const s=f.getTimezoneOffset();if(s===0)return"Z";switch(o){case"X":return formatTimezoneWithOptionalMinutes(s);case"XXXX":case"XX":return formatTimezone(s);default:return formatTimezone(s,":")}},x:function(f,o,m){const s=f.getTimezoneOffset();switch(o){case"x":return formatTimezoneWithOptionalMinutes(s);case"xxxx":case"xx":return formatTimezone(s);default:return formatTimezone(s,":")}},O:function(f,o,m){const s=f.getTimezoneOffset();switch(o){case"O":case"OO":case"OOO":return"GMT"+formatTimezoneShort(s,":");default:return"GMT"+formatTimezone(s,":")}},z:function(f,o,m){const s=f.getTimezoneOffset();switch(o){case"z":case"zz":case"zzz":return"GMT"+formatTimezoneShort(s,":");default:return"GMT"+formatTimezone(s,":")}},t:function(f,o,m){const s=Math.trunc(+f/1e3);return addLeadingZeros(s,o.length)},T:function(f,o,m){return addLeadingZeros(+f,o.length)}};function formatTimezoneShort(f,o=""){const m=f>0?"-":"+",s=Math.abs(f),y=Math.trunc(s/60),O=s%60;return O===0?m+String(y):m+String(y)+o+addLeadingZeros(O,2)}function formatTimezoneWithOptionalMinutes(f,o){return f%60===0?(f>0?"-":"+")+addLeadingZeros(Math.abs(f)/60,2):formatTimezone(f,o)}function formatTimezone(f,o=""){const m=f>0?"-":"+",s=Math.abs(f),y=addLeadingZeros(Math.trunc(s/60),2),O=addLeadingZeros(s%60,2);return m+y+o+O}const dateLongFormatter=(f,o)=>{switch(f){case"P":return o.date({width:"short"});case"PP":return o.date({width:"medium"});case"PPP":return o.date({width:"long"});default:return o.date({width:"full"})}},timeLongFormatter=(f,o)=>{switch(f){case"p":return o.time({width:"short"});case"pp":return o.time({width:"medium"});case"ppp":return o.time({width:"long"});default:return o.time({width:"full"})}},dateTimeLongFormatter=(f,o)=>{const m=f.match(/(P+)(p+)?/)||[],s=m[1],y=m[2];if(!y)return dateLongFormatter(f,o);let O;switch(s){case"P":O=o.dateTime({width:"short"});break;case"PP":O=o.dateTime({width:"medium"});break;case"PPP":O=o.dateTime({width:"long"});break;default:O=o.dateTime({width:"full"});break}return O.replace("{{date}}",dateLongFormatter(s,o)).replace("{{time}}",timeLongFormatter(y,o))},longFormatters={p:timeLongFormatter,P:dateTimeLongFormatter},dayOfYearTokenRE=/^D+$/,weekYearTokenRE=/^Y+$/,throwTokens=["D","DD","YY","YYYY"];function isProtectedDayOfYearToken(f){return dayOfYearTokenRE.test(f)}function isProtectedWeekYearToken(f){return weekYearTokenRE.test(f)}function warnOrThrowProtectedError(f,o,m){const s=message(f,o,m);if(console.warn(s),throwTokens.includes(f))throw new RangeError(s)}function message(f,o,m){const s=f[0]==="Y"?"years":"days of the month";return`Use \`${f.toLowerCase()}\` instead of \`${f}\` (in \`${o}\`) for formatting ${s} to the input \`${m}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const formattingTokensRegExp=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,longFormattingTokensRegExp=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,escapedStringRegExp=/^'([^]*?)'?$/,doubleQuoteRegExp=/''/g,unescapedLatinCharacterRegExp=/[a-zA-Z]/;function format(f,o,m){const s=getDefaultOptions(),y=s.locale??enUS,O=s.firstWeekContainsDate??s.locale?.options?.firstWeekContainsDate??1,N=s.weekStartsOn??s.locale?.options?.weekStartsOn??0,G=toDate(f,m?.in);if(!isValid(G))throw new RangeError("Invalid time value");let q=o.match(longFormattingTokensRegExp).map(c=>{const h=c[0];if(h==="p"||h==="P"){const x=longFormatters[h];return x(c,y.formatLong)}return c}).join("").match(formattingTokensRegExp).map(c=>{if(c==="''")return{isToken:!1,value:"'"};const h=c[0];if(h==="'")return{isToken:!1,value:cleanEscapedString(c)};if(formatters[h])return{isToken:!0,value:c};if(h.match(unescapedLatinCharacterRegExp))throw new RangeError("Format string contains an unescaped latin alphabet character `"+h+"`");return{isToken:!1,value:c}});y.localize.preprocessor&&(q=y.localize.preprocessor(G,q));const d={firstWeekContainsDate:O,weekStartsOn:N,locale:y};return q.map(c=>{if(!c.isToken)return c.value;const h=c.value;(isProtectedWeekYearToken(h)||isProtectedDayOfYearToken(h))&&warnOrThrowProtectedError(h,o,String(f));const x=formatters[h[0]];return x(G,h,y.localize,d)}).join("")}function cleanEscapedString(f){const o=f.match(escapedStringRegExp);return o?o[1].replace(doubleQuoteRegExp,"'"):f}function StudyScheduleView(){const[f,o]=reactExports.useState(null),[m,s]=reactExports.useState([]),[y,O]=reactExports.useState(""),[N,G]=reactExports.useState(!1);reactExports.useEffect(()=>{q(),d()},[]);const q=async()=>{const P=await db.studySchedules.toArray();P.length>0&&o(P[0])},d=async()=>{const P=await db.chapters.toArray();s(P)},c=async()=>{if(!y)return;const P=new Date(y),V=startOfDay(new Date),H=Math.ceil((P.getTime()-V.getTime())/(1e3*60*60*24));if(H<=0){alert("Exam date must be in the future");return}await db.studySchedules.clear();const k=[],J=(await db.chapters.toArray()).map(yt=>yt.id),rt=Math.ceil(J.length/H);let et=0;for(let yt=0;yt<H;yt++){const Dt=addDays(V,yt),Mt=J.slice(et,et+rt);et+=rt,k.push({date:Dt,chapters:Mt,flashcards:Math.min(20,Mt.length*5),quizQuestions:Math.min(10,Mt.length*3),completed:!1})}const lt={id:crypto.randomUUID(),examDate:P,dailyGoals:k,createdAt:new Date};await db.studySchedules.add(lt),o(lt),G(!1)},h=async P=>{if(!f)return;const V=[...f.dailyGoals];V[P].completed=!V[P].completed,await db.studySchedules.update(f.id,{dailyGoals:V}),o({...f,dailyGoals:V})},x=async()=>{f&&(await db.studySchedules.delete(f.id),o(null))},E=P=>P.map(V=>m.find(H=>H.id===V)?.title).filter(Boolean).join(", ");if(N||!f)return jsxRuntimeExports.jsxs("div",{className:"max-w-lg mx-auto",children:[jsxRuntimeExports.jsxs("div",{className:"text-center mb-8",children:[jsxRuntimeExports.jsx("div",{className:"w-16 h-16 mx-auto mb-4 rounded-full bg-primary-100 dark:bg-primary-900/30 flex items-center justify-center",children:jsxRuntimeExports.jsx(Calendar,{className:"w-8 h-8 text-primary-600 dark:text-primary-400"})}),jsxRuntimeExports.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:"Create Study Schedule"}),jsxRuntimeExports.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Set your exam date and we'll create a personalized study plan"})]}),jsxRuntimeExports.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-6",children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Exam Date"}),jsxRuntimeExports.jsx("input",{type:"date",value:y,onChange:P=>O(P.target.value),min:format(addDays(new Date,1),"yyyy-MM-dd"),className:"w-full border border-gray-300 dark:border-gray-600 rounded-lg px-4 py-2 bg-white dark:bg-gray-700 text-gray-900 dark:text-white mb-4"}),jsxRuntimeExports.jsxs("button",{onClick:c,disabled:!y,className:"w-full py-3 bg-primary-500 text-white rounded-lg hover:bg-primary-600 disabled:opacity-50 transition-colors flex items-center justify-center gap-2",children:[jsxRuntimeExports.jsx(Plus,{className:"w-4 h-4"}),"Create Schedule"]})]}),jsxRuntimeExports.jsx("div",{className:"mt-6 grid grid-cols-3 gap-4",children:[{icon:"",label:"Chapters",value:m.length},{icon:"",label:"Days Left",value:y?Math.ceil((new Date(y).getTime()-new Date().getTime())/(1e3*60*60*24)):"-"},{icon:"",label:"Daily Goal",value:y?Math.ceil(m.length/Math.ceil((new Date(y).getTime()-new Date().getTime())/(1e3*60*60*24))):"-"}].map((P,V)=>jsxRuntimeExports.jsxs("div",{className:"text-center p-4 bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700",children:[jsxRuntimeExports.jsx("div",{className:"text-2xl mb-1",children:P.icon}),jsxRuntimeExports.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:P.value}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:P.label})]},V))})]});const p=startOfDay(new Date),S=f.dailyGoals.filter(P=>P.date>=p),C=f.dailyGoals.filter(P=>P.completed).length,_=Math.round(C/f.dailyGoals.length*100);return jsxRuntimeExports.jsxs("div",{className:"max-w-2xl mx-auto",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mb-6",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Study Schedule"}),jsxRuntimeExports.jsxs("p",{className:"text-gray-600 dark:text-gray-400",children:["Exam: ",format(new Date(f.examDate),"MMMM d, yyyy")]})]}),jsxRuntimeExports.jsx("button",{onClick:x,className:"p-2 text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg transition-colors",children:jsxRuntimeExports.jsx(Trash2,{className:"w-5 h-5"})})]}),jsxRuntimeExports.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-4 mb-6",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mb-2",children:[jsxRuntimeExports.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Progress"}),jsxRuntimeExports.jsxs("span",{className:"text-sm font-bold text-primary-600 dark:text-primary-400",children:[_,"%"]})]}),jsxRuntimeExports.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2",children:jsxRuntimeExports.jsx("div",{className:"bg-primary-500 h-2 rounded-full transition-all duration-300",style:{width:`${_}%`}})}),jsxRuntimeExports.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-2",children:[C," of ",f.dailyGoals.length," days completed"]})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-3",children:[jsxRuntimeExports.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white",children:"Upcoming Goals"}),S.length===0?jsxRuntimeExports.jsxs("div",{className:"text-center py-8 bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700",children:[jsxRuntimeExports.jsx(Target,{className:"w-12 h-12 text-gray-400 mx-auto mb-3"}),jsxRuntimeExports.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"No more goals - you're ready for the exam!"})]}):S.slice(0,7).map((P,V)=>{const H=isSameDay(new Date(P.date),p),k=E(P.chapters);return jsxRuntimeExports.jsx("div",{className:`p-4 rounded-xl border transition-colors ${P.completed?"bg-green-50 dark:bg-green-900/20 border-green-200 dark:border-green-800":H?"bg-primary-50 dark:bg-primary-900/20 border-primary-200 dark:border-primary-800":"bg-white dark:bg-gray-800 border-gray-200 dark:border-gray-700"}`,children:jsxRuntimeExports.jsxs("div",{className:"flex items-start gap-3",children:[jsxRuntimeExports.jsx("button",{onClick:()=>h(V),className:`mt-0.5 w-5 h-5 rounded border-2 flex items-center justify-center transition-colors ${P.completed?"bg-green-500 border-green-500":"border-gray-300 dark:border-gray-600 hover:border-primary-500"}`,children:P.completed&&jsxRuntimeExports.jsx(CircleCheckBig,{className:"w-3.5 h-3.5 text-white"})}),jsxRuntimeExports.jsxs("div",{className:"flex-1",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[jsxRuntimeExports.jsx("p",{className:`font-medium ${P.completed?"text-green-800 dark:text-green-400 line-through":"text-gray-900 dark:text-white"}`,children:H?"Today":format(new Date(P.date),"EEEE, MMM d")}),H&&!P.completed&&jsxRuntimeExports.jsx("span",{className:"px-2 py-0.5 bg-primary-100 dark:bg-primary-900/30 text-primary-700 dark:text-primary-400 text-xs rounded-full",children:"Due"})]}),k&&jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-2",children:k}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-4 text-xs text-gray-500 dark:text-gray-400",children:[jsxRuntimeExports.jsxs("span",{className:"flex items-center gap-1",children:[jsxRuntimeExports.jsx(Clock,{className:"w-3 h-3"}),P.flashcards," flashcards"]}),jsxRuntimeExports.jsxs("span",{className:"flex items-center gap-1",children:[jsxRuntimeExports.jsx(Target,{className:"w-3 h-3"}),P.quizQuestions," questions"]})]})]})]})},V)})]})]})}function ProgressDashboard({bookId:f}){const[o,m]=reactExports.useState([]),[,s]=reactExports.useState(null),[y,O]=reactExports.useState([]),[N,G]=reactExports.useState([]),[q,d]=reactExports.useState({totalFlashcards:0,dueFlashcards:0,totalQuestions:0,averageScore:0,studyStreak:0});reactExports.useEffect(()=>{c()},[f]);const c=async()=>{const x=await db.quizResults.orderBy("date").reverse().toArray();if(m(x),f){const L=await getProgressByBook(f);L&&s(L);const J=await getWeakTopics(f);O(J);const rt=await db.chapters.where("bookId").equals(f).toArray();G(rt)}const E=await db.flashcards.toArray(),p=new Date,S=E.filter(L=>new Date(L.nextReviewDate)<=p),C=await db.questions.toArray(),_=x.length>0?Math.round(x.reduce((L,J)=>L+J.score,0)/x.length):0,P=[...new Set(x.map(L=>new Date(L.date).toDateString()))];let V=0;const H=new Date().toDateString(),k=new Date(Date.now()-864e5).toDateString();(P.includes(H)||P.includes(k))&&(V=P.length),d({totalFlashcards:E.length,dueFlashcards:S.length,totalQuestions:C.length,averageScore:_,studyStreak:V})},h=o.slice(0,5);return jsxRuntimeExports.jsxs("div",{className:"space-y-6",children:[jsxRuntimeExports.jsx("div",{className:"flex items-center justify-between",children:jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Progress Dashboard"}),jsxRuntimeExports.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Track your study progress and identify areas for improvement"})]})}),jsxRuntimeExports.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-4",children:[{icon:Brain,label:"Flashcards",value:q.totalFlashcards,subtext:`${q.dueFlashcards} due`,color:"blue"},{icon:Target,label:"Questions",value:q.totalQuestions,subtext:"available",color:"green"},{icon:Award,label:"Avg Score",value:`${q.averageScore}%`,subtext:"last 10 quizzes",color:"yellow"},{icon:BookOpen,label:"Streak",value:q.studyStreak,subtext:"days studied",color:"purple"}].map((x,E)=>jsxRuntimeExports.jsxs("div",{className:"p-4 bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700",children:[jsxRuntimeExports.jsx("div",{className:`w-10 h-10 rounded-lg bg-${x.color}-100 dark:bg-${x.color}-900/30 flex items-center justify-center mb-3`,children:jsxRuntimeExports.jsx(x.icon,{className:`w-5 h-5 text-${x.color}-600 dark:text-${x.color}-400`})}),jsxRuntimeExports.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:x.value}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:x.label}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-400 dark:text-gray-500 mt-1",children:x.subtext})]},E))}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[jsxRuntimeExports.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-6",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[jsxRuntimeExports.jsx(CircleAlert,{className:"w-5 h-5 text-red-500"}),jsxRuntimeExports.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white",children:"Areas to Improve"})]}),y.length===0?jsxRuntimeExports.jsxs("div",{className:"text-center py-8",children:[jsxRuntimeExports.jsx(TrendingUp,{className:"w-12 h-12 text-green-500 mx-auto mb-3"}),jsxRuntimeExports.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Great job! No weak topics identified."})]}):jsxRuntimeExports.jsx("div",{className:"space-y-2",children:y.map((x,E)=>jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3 p-3 bg-red-50 dark:bg-red-900/20 rounded-lg",children:[jsxRuntimeExports.jsx(TrendingDown,{className:"w-4 h-4 text-red-500 flex-shrink-0"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-700 dark:text-gray-300",children:x})]},E))})]}),jsxRuntimeExports.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-6",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[jsxRuntimeExports.jsx(Award,{className:"w-5 h-5 text-primary-500"}),jsxRuntimeExports.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white",children:"Recent Quiz Results"})]}),h.length===0?jsxRuntimeExports.jsxs("div",{className:"text-center py-8",children:[jsxRuntimeExports.jsx(Target,{className:"w-12 h-12 text-gray-400 mx-auto mb-3"}),jsxRuntimeExports.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"No quizzes taken yet."})]}):jsxRuntimeExports.jsx("div",{className:"space-y-3",children:h.map(x=>jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-700/50 rounded-lg",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:new Date(x.date).toLocaleDateString()}),jsxRuntimeExports.jsxs("p",{className:"font-medium text-gray-900 dark:text-white",children:[x.correctAnswers,"/",x.totalQuestions," correct"]})]}),jsxRuntimeExports.jsxs("div",{className:`text-lg font-bold ${x.score>=80?"text-green-600 dark:text-green-400":x.score>=60?"text-yellow-600 dark:text-yellow-400":"text-red-600 dark:text-red-400"}`,children:[x.score,"%"]})]},x.id))})]})]}),N.length>0&&jsxRuntimeExports.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-6",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[jsxRuntimeExports.jsx(BookOpen,{className:"w-5 h-5 text-primary-500"}),jsxRuntimeExports.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white",children:"Chapter Progress"})]}),jsxRuntimeExports.jsx("div",{className:"space-y-3",children:N.map(x=>{const E=!!x.summary,p=x.keyTerms&&x.keyTerms.length>0,S=x.questions&&x.questions.length>0,_=[E,p,S].filter(Boolean).length/3*100;return jsxRuntimeExports.jsx("div",{className:"flex items-center gap-4",children:jsxRuntimeExports.jsxs("div",{className:"flex-1",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mb-1",children:[jsxRuntimeExports.jsxs("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:["Chapter ",x.number,": ",x.title]}),jsxRuntimeExports.jsxs("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:[Math.round(_),"%"]})]}),jsxRuntimeExports.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2",children:jsxRuntimeExports.jsx("div",{className:"bg-primary-500 h-2 rounded-full transition-all duration-300",style:{width:`${_}%`}})})]})},x.id)})})]})]})}function APIKeySetup({onComplete:f,onSkip:o}){const[m,s]=reactExports.useState(""),[y,O]=reactExports.useState(!1),[N,G]=reactExports.useState(!1),[q,d]=reactExports.useState(null),[c,h]=reactExports.useState(!1),[x,E]=reactExports.useState(!1);reactExports.useEffect(()=>{if(hasApiKey()){E(!0);const C=getApiKey();C&&s(C.substring(0,8)+"")}},[]);const p=async()=>{if(!m.trim()||m.includes("")){d("Please enter a valid API key");return}G(!0),d(null);try{const C=await fetch("https://api.tavily.com/search",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({api_key:m.trim(),query:"test",max_results:1})});if(C.ok)setApiKey(m.trim()),h(!0),setTimeout(()=>{f()},1e3);else{const _=await C.json().catch(()=>({}));C.status===401||C.status===403?d("Invalid API key. Please check your key and try again."):d(_.message||`Error validating key: ${C.status}`)}}catch{d("Network error. Please check your connection and try again.")}finally{G(!1)}},S=()=>{E(!1),s(""),d(null)};return jsxRuntimeExports.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 to-indigo-100 dark:from-gray-900 dark:to-gray-800 p-4",children:jsxRuntimeExports.jsxs("div",{className:"w-full max-w-md bg-white dark:bg-gray-800 rounded-2xl shadow-xl overflow-hidden",children:[jsxRuntimeExports.jsx("div",{className:"bg-gradient-to-r from-primary-500 to-primary-600 p-6 text-white",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsx("div",{className:"p-2 bg-white/20 rounded-lg",children:jsxRuntimeExports.jsx(Key,{className:"w-6 h-6"})}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h1",{className:"text-xl font-bold",children:"API Key Setup"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-white/80",children:"Real Estate Study Assistant"})]})]})}),jsxRuntimeExports.jsx("div",{className:"p-6 space-y-6",children:c?jsxRuntimeExports.jsxs("div",{className:"text-center py-8",children:[jsxRuntimeExports.jsx("div",{className:"w-16 h-16 bg-green-100 dark:bg-green-900/30 rounded-full flex items-center justify-center mx-auto mb-4",children:jsxRuntimeExports.jsx(Check,{className:"w-8 h-8 text-green-600 dark:text-green-400"})}),jsxRuntimeExports.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-2",children:"API Key Saved!"}),jsxRuntimeExports.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Your Tavily API key has been securely stored."})]}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4",children:jsxRuntimeExports.jsxs("div",{className:"flex items-start gap-3",children:[jsxRuntimeExports.jsx(Info,{className:"w-5 h-5 text-blue-600 dark:text-blue-400 flex-shrink-0 mt-0.5"}),jsxRuntimeExports.jsxs("div",{className:"text-sm text-blue-800 dark:text-blue-200",children:[jsxRuntimeExports.jsx("p",{className:"font-medium mb-1",children:"Why do I need an API key?"}),jsxRuntimeExports.jsx("p",{children:"To use AI-powered features like Market Analysis and Comps Reports, you need a Tavily API key. Your key is stored locally in your browser and is never sent to our servers."})]})]})}),jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Tavily API Key"}),jsxRuntimeExports.jsxs("div",{className:"relative",children:[jsxRuntimeExports.jsx("input",{type:y?"text":"password",value:m,onChange:C=>s(C.target.value),placeholder:x?"":"tvly-xxxxxxxxxxxxxxxx",disabled:x,className:"w-full px-4 py-3 pr-12 bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-lg text-gray-900 dark:text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent disabled:opacity-60"}),!x&&jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>O(!y),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:y?jsxRuntimeExports.jsx(EyeOff,{className:"w-5 h-5"}):jsxRuntimeExports.jsx(Eye,{className:"w-5 h-5"})})]}),x&&jsxRuntimeExports.jsx("button",{onClick:S,className:"text-sm text-primary-600 dark:text-primary-400 hover:underline",children:"Update API key"})]}),jsxRuntimeExports.jsx("div",{className:"text-center",children:jsxRuntimeExports.jsxs("a",{href:"https://tavily.com/#pricing",target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-1 text-sm text-primary-600 dark:text-primary-400 hover:underline",children:["Don't have a Tavily API key? Get one free",jsxRuntimeExports.jsx(ExternalLink,{className:"w-3 h-3"})]})}),q&&jsxRuntimeExports.jsxs("div",{className:"flex items-start gap-2 p-3 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg text-red-700 dark:text-red-300 text-sm",children:[jsxRuntimeExports.jsx(CircleAlert,{className:"w-4 h-4 flex-shrink-0 mt-0.5"}),jsxRuntimeExports.jsx("span",{children:q})]}),jsxRuntimeExports.jsxs("div",{className:"flex gap-3",children:[o&&!x&&jsxRuntimeExports.jsx("button",{onClick:o,disabled:N,className:"flex-1 px-4 py-3 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 font-medium rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors disabled:opacity-50",children:"Skip for now"}),x?jsxRuntimeExports.jsx("button",{onClick:f,className:"flex-1 px-4 py-3 bg-primary-500 hover:bg-primary-600 text-white font-medium rounded-lg transition-colors",children:"Continue"}):jsxRuntimeExports.jsx("button",{onClick:p,disabled:N||!m.trim(),className:"flex-1 px-4 py-3 bg-primary-500 hover:bg-primary-600 disabled:bg-gray-300 dark:disabled:bg-gray-700 text-white font-medium rounded-lg transition-colors flex items-center justify-center gap-2",children:N?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("div",{className:"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"}),"Validating..."]}):"Save API Key"})]}),jsxRuntimeExports.jsx("p",{className:"text-xs text-center text-gray-500 dark:text-gray-400",children:" Your API key is stored securely in your browser's localStorage and is never sent to our servers."})]})})]})})}function App(){const[f,o]=reactExports.useState("books"),[m,s]=reactExports.useState([]),[y,O]=reactExports.useState(null),[N,G]=reactExports.useState([]),[q,d]=reactExports.useState(!1),[c,h]=reactExports.useState(!1),[x,E]=reactExports.useState(!1);reactExports.useEffect(()=>{p();const J=window.matchMedia("(prefers-color-scheme: dark)").matches;h(J),"serviceWorker"in navigator&&navigator.serviceWorker.register("/sw.js").catch(console.error);const rt=setTimeout(()=>{E(!hasApiKey())},500);return()=>clearTimeout(rt)},[]),reactExports.useEffect(()=>{c?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")},[c]);const p=async()=>{const J=await db.books.toArray();s(J)},S=async J=>{const rt=await db.chapters.where("bookId").equals(J).sortBy("number");G(rt)},C=async J=>{O(J),await S(J.id),o("books")},_=async()=>{await p();const J=await db.books.orderBy("uploadedAt").last();J&&C(J)},P=()=>{E(!1)},V=()=>{E(!1)},H=()=>{E(!0),d(!1)},k=()=>{switch(f){case"books":return y?jsxRuntimeExports.jsx(ChapterList,{book:y,chapters:N,onChaptersUpdated:S}):jsxRuntimeExports.jsx(PDFUpload,{onUploadComplete:_});case"flashcards":return jsxRuntimeExports.jsx(FlashcardView,{});case"quiz":return jsxRuntimeExports.jsx(QuizView,{chapters:N});case"schedule":return jsxRuntimeExports.jsx(StudyScheduleView,{});case"progress":return jsxRuntimeExports.jsx(ProgressDashboard,{bookId:y?.id});case"market-analysis":return jsxRuntimeExports.jsx(MarketAnalysisView,{});case"comps":return jsxRuntimeExports.jsx(CompsReportView,{});default:return jsxRuntimeExports.jsx(PDFUpload,{onUploadComplete:_})}};if(x)return jsxRuntimeExports.jsx(APIKeySetup,{onComplete:P,onSkip:V});const L=[{view:"books",label:"Books",icon:jsxRuntimeExports.jsx(BookOpen,{className:"w-5 h-5"})},{view:"flashcards",label:"Flashcards",icon:jsxRuntimeExports.jsx(Brain,{className:"w-5 h-5"})},{view:"quiz",label:"Quiz",icon:jsxRuntimeExports.jsx(ChartColumn,{className:"w-5 h-5"})},{view:"schedule",label:"Schedule",icon:jsxRuntimeExports.jsx(Calendar,{className:"w-5 h-5"})},{view:"progress",label:"Progress",icon:jsxRuntimeExports.jsx(ChartColumn,{className:"w-5 h-5"})}];return jsxRuntimeExports.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:[jsxRuntimeExports.jsx("header",{className:"sticky top-0 z-50 bg-white dark:bg-gray-800 shadow-sm border-b border-gray-200 dark:border-gray-700",children:jsxRuntimeExports.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between h-14",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsx("button",{onClick:()=>d(!q),className:"p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 lg:hidden",children:q?jsxRuntimeExports.jsx(X,{className:"w-5 h-5"}):jsxRuntimeExports.jsx(Menu,{className:"w-5 h-5"})}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx("div",{className:"w-8 h-8 bg-primary-500 rounded-lg flex items-center justify-center",children:jsxRuntimeExports.jsx(BookOpen,{className:"w-5 h-5 text-white"})}),jsxRuntimeExports.jsx("h1",{className:"text-lg font-bold text-gray-900 dark:text-white hidden sm:block",children:"RE Study"})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[m.length>0&&jsxRuntimeExports.jsxs("select",{value:y?.id||"",onChange:J=>{const rt=m.find(et=>et.id===J.target.value);rt&&C(rt)},className:"text-sm border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-1.5 bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:[jsxRuntimeExports.jsx("option",{value:"",children:"Select a book..."}),m.map(J=>jsxRuntimeExports.jsx("option",{value:J.id,children:J.title},J.id))]}),jsxRuntimeExports.jsx("button",{onClick:()=>h(!c),className:"p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700",children:c?"":""})]})]})})}),jsxRuntimeExports.jsxs("div",{className:"flex",children:[jsxRuntimeExports.jsxs("aside",{className:`fixed inset-y-0 left-0 z-40 w-64 bg-white dark:bg-gray-800 border-r border-gray-200 dark:border-gray-700 transform transition-transform duration-200 ease-in-out lg:translate-x-0 lg:static lg:h-[calc(100vh-3.5rem)] ${q?"translate-x-0":"-translate-x-full"}`,children:[jsxRuntimeExports.jsxs("nav",{className:"p-4 space-y-1",children:[L.map(J=>jsxRuntimeExports.jsxs("button",{onClick:()=>{o(J.view),d(!1)},className:`w-full flex items-center gap-3 px-4 py-3 rounded-lg text-sm font-medium transition-colors ${f===J.view?"bg-primary-50 dark:bg-primary-900/20 text-primary-600 dark:text-primary-400":"text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700"}`,children:[J.icon,J.label]},J.view)),jsxRuntimeExports.jsxs("div",{className:"pt-4 mt-4 border-t border-gray-200 dark:border-gray-700",children:[jsxRuntimeExports.jsx("p",{className:"px-4 text-xs font-semibold text-gray-400 dark:text-gray-500 uppercase tracking-wider mb-2",children:"AI Tools"}),jsxRuntimeExports.jsxs("button",{onClick:()=>{o("market-analysis"),d(!1)},className:`w-full flex items-center gap-3 px-4 py-3 rounded-lg text-sm font-medium transition-colors ${f==="market-analysis"?"bg-primary-50 dark:bg-primary-900/20 text-primary-600 dark:text-primary-400":"text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700"}`,children:[jsxRuntimeExports.jsx(ChartColumn,{className:"w-5 h-5"}),"Market Analysis"]}),jsxRuntimeExports.jsxs("button",{onClick:()=>{o("comps"),d(!1)},className:`w-full flex items-center gap-3 px-4 py-3 rounded-lg text-sm font-medium transition-colors ${f==="comps"?"bg-primary-50 dark:bg-primary-900/20 text-primary-600 dark:text-primary-400":"text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700"}`,children:[jsxRuntimeExports.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})}),"Comps Report"]})]})]}),jsxRuntimeExports.jsxs("div",{className:"absolute bottom-0 left-0 right-0 p-4 border-t border-gray-200 dark:border-gray-700 space-y-2",children:[jsxRuntimeExports.jsxs("button",{onClick:H,className:"w-full flex items-center gap-3 px-4 py-2 rounded-lg text-sm font-medium text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",children:[jsxRuntimeExports.jsx(Key,{className:"w-4 h-4"}),"API Key Settings"]}),jsxRuntimeExports.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400 px-4",children:[jsxRuntimeExports.jsx("p",{children:"Real Estate Study Assistant"}),jsxRuntimeExports.jsxs("p",{className:"mt-1 flex items-center gap-1",children:[jsxRuntimeExports.jsx("span",{className:"w-2 h-2 bg-green-500 rounded-full"}),hasApiKey()?"AI Ready ":"Offline Mode"]})]})]})]}),q&&jsxRuntimeExports.jsx("div",{className:"fixed inset-0 bg-black/50 z-30 lg:hidden",onClick:()=>d(!1)}),jsxRuntimeExports.jsx("main",{className:"flex-1 min-h-[calc(100vh-3.5rem)] p-4 sm:p-6 lg:p-8",children:jsxRuntimeExports.jsx("div",{className:"max-w-6xl mx-auto",children:k()})})]})]})}function MarketAnalysisView(){const[f,o]=reactExports.useState(""),[m,s]=reactExports.useState(""),[y,O]=reactExports.useState(!1),[N,G]=reactExports.useState(null),[q,d]=reactExports.useState(null),c=async()=>{if(f.trim()){O(!0),d(null);try{const{getMarketAnalysis:h}=await __vitePreload(async()=>{const{getMarketAnalysis:E}=await Promise.resolve().then(()=>ai);return{getMarketAnalysis:E}},void 0),x=await h(f,m);G(x)}catch(h){d(h instanceof Error?h.message:"Failed to analyze market")}finally{O(!1)}}};return jsxRuntimeExports.jsxs("div",{className:"space-y-6",children:[jsxRuntimeExports.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:[jsxRuntimeExports.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-4",children:"Market Analysis"}),jsxRuntimeExports.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:"Get AI-powered market analysis for any location. Powered by Tavily search."}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[jsxRuntimeExports.jsxs("div",{className:"md:col-span-2",children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Location"}),jsxRuntimeExports.jsx("input",{type:"text",value:f,onChange:h=>o(h.target.value),placeholder:"e.g., Austin, TX or Miami-Dade County",className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-primary-500 focus:border-transparent"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Property Type (Optional)"}),jsxRuntimeExports.jsxs("select",{value:m,onChange:h=>s(h.target.value),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-primary-500 focus:border-transparent",children:[jsxRuntimeExports.jsx("option",{value:"",children:"All Types"}),jsxRuntimeExports.jsx("option",{value:"single-family",children:"Single Family"}),jsxRuntimeExports.jsx("option",{value:"condo",children:"Condo"}),jsxRuntimeExports.jsx("option",{value:"townhouse",children:"Townhouse"}),jsxRuntimeExports.jsx("option",{value:"multi-family",children:"Multi-Family"}),jsxRuntimeExports.jsx("option",{value:"commercial",children:"Commercial"})]})]})]}),jsxRuntimeExports.jsx("button",{onClick:c,disabled:y||!f.trim(),className:"px-6 py-2 bg-primary-500 hover:bg-primary-600 disabled:bg-gray-300 dark:disabled:bg-gray-700 text-white font-medium rounded-lg transition-colors flex items-center gap-2",children:y?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("div",{className:"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"}),"Analyzing..."]}):"Analyze Market"}),q&&jsxRuntimeExports.jsx("div",{className:"mt-4 p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg text-red-700 dark:text-red-300",children:q})]}),N&&jsxRuntimeExports.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:[jsxRuntimeExports.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-4",children:"Analysis Results"}),jsxRuntimeExports.jsx("div",{className:"prose dark:prose-invert max-w-none mb-6",children:jsxRuntimeExports.jsx("p",{className:"text-gray-700 dark:text-gray-300",children:N.summary})}),jsxRuntimeExports.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:N.marketTrends.map((h,x)=>jsxRuntimeExports.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 rounded-lg p-4",children:[jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:h.trend}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[jsxRuntimeExports.jsxs("span",{className:`text-lg font-bold ${h.direction==="up"?"text-green-600 dark:text-green-400":h.direction==="down"?"text-red-600 dark:text-red-400":"text-gray-600 dark:text-gray-400"}`,children:[h.direction==="up"?"":h.direction==="down"?"":"",h.percentage!==void 0?` ${h.percentage}%`:""]}),jsxRuntimeExports.jsx("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:h.direction==="up"?"Increasing":h.direction==="down"?"Decreasing":"Stable"})]})]},x))}),jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h4",{className:"font-semibold text-gray-900 dark:text-white mb-2",children:"Key Insights"}),jsxRuntimeExports.jsx("ul",{className:"list-disc list-inside space-y-1 text-gray-700 dark:text-gray-300",children:N.keyInsights.map((h,x)=>jsxRuntimeExports.jsx("li",{children:h},x))})]}),N.dataSources.length>0&&jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h4",{className:"font-semibold text-gray-900 dark:text-white mb-2",children:"Data Sources"}),jsxRuntimeExports.jsx("ul",{className:"space-y-1",children:N.dataSources.slice(0,5).map((h,x)=>jsxRuntimeExports.jsx("li",{children:jsxRuntimeExports.jsx("a",{href:h,target:"_blank",rel:"noopener noreferrer",className:"text-sm text-primary-600 dark:text-primary-400 hover:underline truncate block",children:h})},x))})]})]})]})]})}function CompsReportView(){const[f,o]=reactExports.useState({address:"",city:"",state:"",zipCode:"",propertyType:"single-family",bedrooms:"",bathrooms:"",sqft:""}),[m,s]=reactExports.useState(!1),[y,O]=reactExports.useState(null),[N,G]=reactExports.useState(null),q=async d=>{d.preventDefault(),s(!0),G(null);try{const{getCompsReport:c}=await __vitePreload(async()=>{const{getCompsReport:x}=await Promise.resolve().then(()=>ai);return{getCompsReport:x}},void 0),h=await c({address:f.address,city:f.city,state:f.state,zipCode:f.zipCode,propertyType:f.propertyType,bedrooms:f.bedrooms?parseInt(f.bedrooms):void 0,bathrooms:f.bathrooms?parseFloat(f.bathrooms):void 0,sqft:f.sqft?parseInt(f.sqft):void 0});O(h)}catch(c){G(c instanceof Error?c.message:"Failed to generate comps report")}finally{s(!1)}};return jsxRuntimeExports.jsxs("div",{className:"space-y-6",children:[jsxRuntimeExports.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:[jsxRuntimeExports.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-4",children:"Comparative Market Analysis"}),jsxRuntimeExports.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:"Generate a comps report for any property. Powered by Tavily search."}),jsxRuntimeExports.jsxs("form",{onSubmit:q,className:"space-y-4",children:[jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[jsxRuntimeExports.jsxs("div",{className:"md:col-span-2",children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Property Address *"}),jsxRuntimeExports.jsx("input",{type:"text",required:!0,value:f.address,onChange:d=>o({...f,address:d.target.value}),placeholder:"123 Main Street",className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-primary-500 focus:border-transparent"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"City"}),jsxRuntimeExports.jsx("input",{type:"text",value:f.city,onChange:d=>o({...f,city:d.target.value}),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-primary-500 focus:border-transparent"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"State"}),jsxRuntimeExports.jsx("input",{type:"text",value:f.state,onChange:d=>o({...f,state:d.target.value}),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-primary-500 focus:border-transparent"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"ZIP Code"}),jsxRuntimeExports.jsx("input",{type:"text",value:f.zipCode,onChange:d=>o({...f,zipCode:d.target.value}),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-primary-500 focus:border-transparent"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Property Type"}),jsxRuntimeExports.jsxs("select",{value:f.propertyType,onChange:d=>o({...f,propertyType:d.target.value}),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-primary-500 focus:border-transparent",children:[jsxRuntimeExports.jsx("option",{value:"single-family",children:"Single Family"}),jsxRuntimeExports.jsx("option",{value:"condo",children:"Condo"}),jsxRuntimeExports.jsx("option",{value:"townhouse",children:"Townhouse"}),jsxRuntimeExports.jsx("option",{value:"multi-family",children:"Multi-Family"}),jsxRuntimeExports.jsx("option",{value:"commercial",children:"Commercial"})]})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Bedrooms"}),jsxRuntimeExports.jsx("input",{type:"number",value:f.bedrooms,onChange:d=>o({...f,bedrooms:d.target.value}),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-primary-500 focus:border-transparent"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Bathrooms"}),jsxRuntimeExports.jsx("input",{type:"number",step:"0.5",value:f.bathrooms,onChange:d=>o({...f,bathrooms:d.target.value}),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-primary-500 focus:border-transparent"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Square Feet"}),jsxRuntimeExports.jsx("input",{type:"number",value:f.sqft,onChange:d=>o({...f,sqft:d.target.value}),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-primary-500 focus:border-transparent"})]})]}),jsxRuntimeExports.jsx("button",{type:"submit",disabled:m||!f.address.trim(),className:"px-6 py-2 bg-primary-500 hover:bg-primary-600 disabled:bg-gray-300 dark:disabled:bg-gray-700 text-white font-medium rounded-lg transition-colors flex items-center gap-2",children:m?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("div",{className:"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"}),"Generating Report..."]}):"Generate Comps Report"})]}),N&&jsxRuntimeExports.jsx("div",{className:"mt-4 p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg text-red-700 dark:text-red-300",children:N})]}),y&&jsxRuntimeExports.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:[jsxRuntimeExports.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-4",children:"Comparative Market Analysis Report"}),jsxRuntimeExports.jsxs("div",{className:"bg-primary-50 dark:bg-primary-900/20 rounded-lg p-4 mb-6",children:[jsxRuntimeExports.jsx("h4",{className:"font-semibold text-primary-900 dark:text-primary-100 mb-2",children:"Subject Property"}),jsxRuntimeExports.jsx("p",{className:"text-primary-800 dark:text-primary-200",children:y.subjectProperty.address}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-4 mt-2",children:[jsxRuntimeExports.jsxs("span",{className:"text-2xl font-bold text-primary-700 dark:text-primary-300",children:["$",y.subjectProperty.estimatedValue.toLocaleString()]}),jsxRuntimeExports.jsxs("span",{className:`px-2 py-1 rounded text-sm ${y.subjectProperty.confidence==="high"?"bg-green-100 text-green-800":y.subjectProperty.confidence==="medium"?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-800"}`,children:[y.subjectProperty.confidence," confidence"]})]})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-4 mb-6",children:[jsxRuntimeExports.jsx("h4",{className:"font-semibold text-gray-900 dark:text-white",children:"Comparable Sales"}),y.comparables.map((d,c)=>jsxRuntimeExports.jsxs("div",{className:"border border-gray-200 dark:border-gray-700 rounded-lg p-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-start mb-2",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:d.address}),jsxRuntimeExports.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:[d.bedrooms," bed  ",d.bathrooms," bath  ",d.sqft.toLocaleString()," sqft"]})]}),jsxRuntimeExports.jsxs("div",{className:"text-right",children:[jsxRuntimeExports.jsxs("p",{className:"font-semibold text-gray-900 dark:text-white",children:["$",d.salePrice.toLocaleString()]}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:d.saleDate})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-600 dark:text-gray-400",children:[jsxRuntimeExports.jsxs("span",{children:[d.distance," miles away"]}),jsxRuntimeExports.jsxs("span",{children:["Adjusted: $",d.adjustedPrice.toLocaleString()]})]})]},c))]}),jsxRuntimeExports.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 rounded-lg p-4",children:[jsxRuntimeExports.jsx("h4",{className:"font-semibold text-gray-900 dark:text-white mb-3",children:"Market Summary"}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Avg Price/Sqft"}),jsxRuntimeExports.jsxs("p",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:["$",y.analysis.avgPricePerSqft]})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Price Range"}),jsxRuntimeExports.jsxs("p",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:["$",y.analysis.priceRange.low.toLocaleString()," - $",y.analysis.priceRange.high.toLocaleString()]})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Avg Days on Market"}),jsxRuntimeExports.jsx("p",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:y.analysis.daysOnMarket})]})]})]})]})]})}ReactDOM.createRoot(document.getElementById("root")).render(jsxRuntimeExports.jsx(React.StrictMode,{children:jsxRuntimeExports.jsx(App,{})}));
//# sourceMappingURL=index-CGxfMJ9l.js.map
